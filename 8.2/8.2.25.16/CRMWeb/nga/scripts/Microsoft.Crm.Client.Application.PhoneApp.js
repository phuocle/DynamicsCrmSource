Type.registerNamespace("Microsoft.Crm.Client.Application.PhoneApp");Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError=function(){};Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError.prototype={galleryNotAvailable:0,genericError:1,fileSizeBreached:2,userCanceled:3};Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError.registerEnum("Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError",!1);Microsoft.Crm.Client.Application.PhoneApp.StartPage=function(){this.$$d_$1y8=Function.createDelegate(this,this.$1y8);this.$$d_$2QK=Function.createDelegate(this,this.$2QK);this.$$d_$2QL=Function.createDelegate(this,this.$2QL);this.$$d_$2UC=Function.createDelegate(this,this.$2UC);this.$$d_$2Or=Function.createDelegate(this,this.$2Or);this.$$d_$3Dj=Function.createDelegate(this,this.$3Dj);this.$1w4=this.$$d_$3Dj;this.$1w5=this.$$d_$2Or;this.$vq=this.$$d_$2UC;this.$eD=!1};Microsoft.Crm.Client.Application.PhoneApp.StartPage.get_instance=function(){return Microsoft.Crm.Client.Application.PhoneApp.StartPage.$D};Microsoft.Crm.Client.Application.PhoneApp.StartPage.prototype={$1w4:null,$1w5:null,$vq:null,$eD:!1,$cY:!1,$1jw:!1,$rf:!1,get_palEnabled:function(){return Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().get_PALEnabled()},get_hideCommandBar:function(){return Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1X.get_$38().get_$36y()},addNativeBridgeOnReadyOrNow:function(n){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().add_$1GL(n)},getPhotoFromGallery:function(n,t,i){var r=Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Ti.get_$2Oo(),u,f;if(!r.get_$2ED()){i(0);return}u=this;f=this;Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Ti.$2JD(!1,n,function(n){window.setTimeout(function(){var i={};i.FileName=n.get_$JR();i.FileContents=n.get_$JQ();i.MimeType=n.get_$Mk();t(i)},0)},function(n){window.setTimeout(function(){var f="MultimediaDispatcherErrorDomain",e="ImagePickerControllerError",t=n[Microsoft.Crm.Client.Core.Framework.ErrorConverter.$1C2],r,u;if(t.startsWith(f))r=t.substr(f.length);else if(t.startsWith(e))r=t.substr(e.length);else{i(1);return}u=Number.parseInvariant(r);u===1?i(3):i(u===5?2:1)},0)})},saveAttachment:function(n,t,i,r,u,f){var e=new Microsoft.Crm.Client.Core.Framework.PAL.Dispatchers.$2H,o;e.set_$JQ(n);e.set_$JR(t);e.set_$Mk(i);e.set_$wS(r);o=this;Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$VN.$1IM(e,function(n){e.set_$lH(n);u(e)},f)},openAttachment:function(n,t){Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$6t.$1GR(n.get_$lH(),n.get_$JR(),n.get_$Mk(),t)},setCommandBar:function(n,t,i){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_device().$3Sc(n,t,i)},setMasthead:function(n){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_device().setMasthead(n)},setServerVersion:function(n,t){var i,r;this.get_palEnabled()&&(i={},i.serverversion=n,i.databaseversion=t,this.$rf||(r=this,window.setTimeout(function(){r.setServerVersion(n,t)},10)),Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$3M(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1X,Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_$2S().get_$3B(),new Microsoft.Crm.Client.Core.Framework.PAL.Dispatchers.$5g(i)))},signOut:function(){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Di.$21D()},bootstrap:function(n){this.get_palEnabled()&&this.$26L(n,!0,!1)},start:function(n){var t=window.applicationCache,i,r,u,f,o,e;if(!$0.$1(t)){this.$cY=!0;i=this;t.onupdateready=function(n){i.$uK(n);i.$cY=!1;t.status===4?(Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,"AppCache: SwapCache"),t.swapCache(),i.$wh(1,Microsoft.Crm.Client.Core.Framework.$4.$i("Appcache updated").$TI(),0)):i.$wi()};r=this;t.onerror=function(n){r.$uK(n);r.$cY=!1;r.$wi()};u=this;t.onnoupdate=function(n){u.$uK(n);u.$cY=!1;u.$wi()};f=this;t.oncached=function(n){f.$uK(n);f.$cY=!1;f.$wi()};try{Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,"AppCache: Start Update");t.update()}catch(s){Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,"AppCache: Update threw exception");this.$cY=!1;this.$wi()}}o=this.$32Q(n);e="liveid"in o;this.get_palEnabled()?this.$26L(n,e,!0):e?Microsoft.Crm.Client.Core.Framework.Trace.logError(97,"Unsupported client server configuration"):this.$1y8()},$uK:function(n){var t="ApplicationCacheObjectWasNull",i=window.applicationCache;if(!$0.$1(i))switch(i.status){case 2:t="Checking";break;case 3:t="Downloading";break;case 1:t="Idle";break;case 5:t="Obsolete";break;case 0:t="Uncached";break;case 4:t="UpdateReady"}try{Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,String.format("AppCache Event {0}. Status : {1}. Details : {2}",n.type,t,JSON.stringify(n)))}catch(r){}},$26L:function(n,t,i){Microsoft.Crm.Client.Core.Framework.Trace.set_$CH(!1);Microsoft.Crm.Client.Core.Framework.$1E.set_$1lv(0);Microsoft.Crm.Client.Core.Framework.$1e.set_$2M6(!1);Microsoft.Crm.Client.Core.Framework.AuthenticationManager.set_defaultInstance(Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$TH(n,t,i));this.addNativeBridgeOnReadyOrNow(i?this.$1w4:this.$1w5)},$32Q:function(n){var f=Microsoft.Crm.Client.Core.Framework.Utils.$1A.$E1(n),r={},u=f,t,i;for(t in u)i={key:t,value:u[t]},r[i.key.toLowerCase()]=i.value.toLowerCase();return r},$3Dj:function(){var n,t;if(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_$2S().get_$2b2()===1){n=Microsoft.Crm.Client.Core.Framework.$4.$i("");n.$z=-2147094014;this.$wh(0,n.$TI(),0);return}t=this;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.add_$Tp(function(n,i){var r=i,u;Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"StartPage OnAuthenticated: FirstPageLoad. Arguments: "+JSON.stringify(r));u=n;r.$L9||u.get_$Fz()!==1?Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"StartPage OnAuthenticated: FirstPageLoad. Could not redirect because IsError is true OR AuthManager.Status is != Ready"):t.$1y8()});this.$2Or()},$2Or:function(){var t=this,n;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.add_$Tp(function(n,i){var r=i,u;Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"StartPage OnAuthenticated: SubsequentPageLoad. Arguments: "+JSON.stringify(r));u=n;r.$L9?t.$wh(0,r.$F5.$TI(),r.$F5.$NN):u.get_$Fz()===1&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1X.$27k()});Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().add_$2Qb(this.$$d_$2QL);Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().add_$2QQ(this.$$d_$2QK);Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.$1in();n=this;window.setTimeout(function(){n.$1jw=!0;n.$wi()},0)},$2QL:function(){this.$eD&&(Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.$1ca(),Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.add_$Tp(this.$vq))},$2UC:function(){Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.remove_$Tp(this.$vq);this.$eD=!1},$2QK:function(){this.$eD=!0},$wi:function(){this.$1jw&&!this.$cY&&(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1PF(null),this.$rf=!0)},$wh:function(n,t,i){i===1?Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Di.$19u(n,t):Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1X.$1AU(n,t)},$1y8:function(){var n,t,i;if(this.$cY){Microsoft.Crm.Client.Core.Framework.Trace.logWarning(5,"Delaying RedirectToDefault since the AppCache update is still pending");window.setTimeout(this.$$d_$1y8,100);return}n=Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.$69;t=n+"/m/default.aspx?client_type=MobileClient&HideMasthead=true";Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"Do RedirectToDefaultPage");i=this;window.setTimeout(function(){window.location.replace(t)},100)}};Microsoft.Crm.Client.Application.PhoneApp.StartPage.registerClass("Microsoft.Crm.Client.Application.PhoneApp.StartPage");Microsoft.Crm.Client.Application.PhoneApp.StartPage.$D=new Microsoft.Crm.Client.Application.PhoneApp.StartPage
//# sourceMappingURL=../../../../../../../../../../Symbols/retail/amd64/jsmin/Microsoft.Crm.Client.Application.PhoneApp.js.srcmap
