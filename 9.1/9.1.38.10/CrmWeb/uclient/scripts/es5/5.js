(window.bundleExecutionMarkers=window.bundleExecutionMarkers||{})["scripts/es5/5.js?v=1.4.9962-v91onpremise"]={begin:performance.now()},(window.__wpJsonpUci=window.__wpJsonpUci||[]).push([[5],{"+hGu":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i="form.SuppressDuplicateDetection.set";function a(e,t){return{type:i,payload:{suppressDuplicateDetection:t},meta:{pageId:e}}}},"+ieV":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return c}));var i=r("5aNC"),a=r("yotr"),n=r("Ww2r"),o=r("2rJs"),s=r("zPLw"),u="form.notification.set";function l(e,t,r,n,o,l,c,d){return{type:"form.notification.set.sync",sync:!0,execute:function(p,h){s.f.has(n)&&(n=s.b);var f=h.ScriptManager.getContainer(t).getEventManager();for(var m in l=l||[],c=c||[],Object(i.a)(e,o,l,f),l){var g=l[m],v=Object(i.b)(o,m);f.addOnClickEvent(e,v,g.Handler)}for(var m in Object(a.a)(e,o,c,f),c){var b=c[m];v=Object(a.b)(o,m);b.Handler&&f.addOnClickEvent(e,v,b.Handler)}return p.dispatch(function(e,t,r,i,a,n,o){return{type:u,payload:{uniqueId:i,message:t,level:r,buttons:a,placeholders:n,controlName:o,componentId:e},meta:{pageId:e}}}(t,r,n,o,l,c,d))}}}function c(e,t){return{type:"form.notification.label.sync",sync:!0,execute:function(r,i,a){r.dispatch;var s=r.getState,u=Object(n.b)(s(),o.k);return String.format(u,e,t)}}}},"/SAa":function(e,t,r){"use strict";r.d(t,"b",(function(){return ge})),r.d(t,"c",(function(){return ve})),r.d(t,"a",(function(){return be}));var i=r("c/eZ"),a=r("9r0m"),n=r("9rlF"),o=r("VcAV"),s=r("nVTU"),u=function(){function e(e,t,r,i){void 0===i&&(i=!1),this.getValue=this.getValue.bind(this),this.getFormattedValue=this.getFormattedValue.bind(this),this._record=e,this._columnAliasNameMap=t,this._setAttributesByAliasMap(),this._primaryFieldName=r,this._isDirty=i}return e.prototype.getRecordId=function(){return a.a.toString(this._record.identifier.id)},e.prototype.getNamedReference=function(){if(this._entityReference)return this._entityReference;var e=this._record.identifier.name;e||(e=this.getFormattedValue(this._primaryFieldName));var t=this._record.fields.activitytypecode,r=t?t.value:this._record.identifier.etn;return this._entityReference=new s.a(r,this._record.identifier.id.guid,e),this._entityReference},e.prototype._setAttributesByAliasMap=function(){var e,t={};for(e in this._columnAliasNameMap)t[e]=this.getValue(e);Object.assign(this,t)},e.prototype.getValue=function(e){if(o.b(e))return null;o.b(this._columnAliasNameMap[e])||(e=this._columnAliasNameMap[e]);var t=this._record.fields[e];return o.c(t)?null:t.validationResult.isValueValid?Object(n.e)(t):t.validationResult.userInput},e.prototype.getFormattedValue=function(e){throw new Error("Not Linked")},e.prototype.setValue=function(e,t){throw new Error("Not Linked")},e.prototype.save=function(e){throw new Error("Not Linked")},e.prototype.isDirty=function(){return this._isDirty},e.prototype.isRecordValid=function(){for(var e in this._record.fields)if(!this.isValid(e))return!1;return!0},e.prototype.isEditable=function(e){throw new Error("Not Linked")},e.prototype.isSecured=function(e){throw new Error("Not Linked")},e.prototype.isReadable=function(e){throw new Error("Not Linked")},e.prototype.isValid=function(e){return!(this._record&&this._record.fields&&this._record.fields[e]&&this._record.fields[e].validationResult)||this._record.fields[e].validationResult.isValueValid},e.prototype.getValidationError=function(e){return this._record&&this._record.fields&&this._record.fields[e]&&this._record.fields[e].validationResult?this._record.fields[e].validationResult.errorMessage:null},e.prototype.getFieldRequiredLevel=function(e){throw new Error("Not Linked")},e.prototype.reformatValue=function(e){return""},e.prototype.getCurrencyDecimalPrecision=function(e){throw new Error("Not Linked")},e}(),l=r("8xrh"),c=function(){function e(){this.getConvertedFilter=this.getConvertedFilter.bind(this),this.getFilter=this.getFilter.bind(this),this.setFilter=this.setFilter.bind(this),this.clearFilter=this.clearFilter.bind(this)}return e.prototype.retrieveDataSetFiltering=function(){return{getFilter:this.getFilter.bind(this),setFilter:this.setFilter.bind(this),clearFilter:this.clearFilter.bind(this),aliasMap:Object.freeze(Object(i.__assign)({},this._columnAliasMapWithColumns)),canDisableRelationshipFilter:function(){return!1}}},e.prototype.setColumnAliasMapWithColumns=function(e){this._columnAliasMapWithColumns=e},e.prototype.extendColumnAliasMapWithColumns=function(e){var t=this;this._columnAliasMapWithColumns&&e?Object.keys(e).forEach((function(r){r in t._columnAliasMapWithColumns||(t._columnAliasMapWithColumns[r]=e[r])})):this._columnAliasMapWithColumns=e},e.prototype.getRootFilterExpression=function(){return this._rootFilterExpression},e.prototype.calculateFilterExpression=function(){this._rootFilterExpression=Object(l.n)(this._existedFilterExpression,this._columnAliasMapWithColumns)},e.prototype.convertFilter=function(e){if(!e)return null;if(!this._columnAliasMapWithColumns||!Object.keys(this._columnAliasMapWithColumns).length)return e;var t=[],r=[];for(var a in e.conditions){var n=this._columnAliasMapWithColumns[e.conditions[a].attributeName]||e.conditions[a].attributeName;t.push(Object(i.__assign)(Object(i.__assign)({},e.conditions[a]),{attributeName:n}))}var o={conditions:t,filterOperator:e.filterOperator};for(var a in e.filters)r.push(this.convertFilter(e.filters[a]));return r.length&&(o.filters=r),o},e.prototype.getConvertedFilter=function(){return this._convertedFilterExpression},e.prototype.getFilter=function(){return this._existedFilterExpression},e.prototype.setFilter=function(e){this._convertedFilterExpression=this.convertFilter(e),this._existedFilterExpression=e},e.prototype.clearFilter=function(){this._existedFilterExpression=null,this._convertedFilterExpression=null,this._rootFilterExpression=null},e.prototype.getClientApiFilterTimeStamp=function(){return this._clientApiFilterTimeStamp},e.prototype.setClientApiFilterTimeStamp=function(e){this._clientApiFilterTimeStamp=e},e}(),d=r("3/zo"),p=function(){function e(e,t,r,i,a,n){void 0===e&&(e=1),void 0===t&&(t=1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=0),void 0===n&&(n=25),this._currentPageFirstIndex=1,this._currentPageLastIndex=1,this._hasNextPage=!1,this._hasPreviousPage=!1,this._pageSize=25,this._totalResultCount=0,this._pagingSizeSettingSource=0,this._lastPageSizeFromView=-200,this._lastPageSizeFromParentPagingInput=-200,this.reset=this.reset.bind(this),this._currentPageFirstIndex=e,this._currentPageLastIndex=t,this._hasNextPage=r,this._hasPreviousPage=i,this._totalResultCount=a,this._pageSize=n}return e.prototype.retrieveDataSetPaging=function(){var e=this._currentPageFirstIndex===this._currentPageLastIndex?this._currentPageFirstIndex:-100;return{totalResultCount:this._totalResultCount,firstPageNumber:e,lastPageNumber:e,pageSize:this._pageSize,setPageSize:this.setPageSize.bind(this,1),hasNextPage:this._hasNextPage,hasPreviousPage:this._hasPreviousPage,loadNextPage:null,loadPreviousPage:null,reset:null,loadExactPage:null}},e.prototype.reset=function(){this._currentPageFirstIndex=1,this._currentPageLastIndex=1},e.prototype.getPageFirstIndex=function(){return this._currentPageFirstIndex},e.prototype.getPageLastIndex=function(){return this._currentPageLastIndex},e.prototype.getHasNextPage=function(){return this._hasNextPage},e.prototype.getHasPreviousPage=function(){return this._hasPreviousPage},e.prototype.getPageSize=function(){return this._pageSize},e.prototype.setPageFirstIndex=function(e){this._currentPageFirstIndex=e},e.prototype.setPageLastIndex=function(e){this._currentPageLastIndex=e},e.prototype.setHasNextPage=function(e){this._hasNextPage=e},e.prototype.setHasPreviousPage=function(e){this._hasPreviousPage=e},e.prototype.setPageSize=function(e,t){switch(this._pageSize=t,this._pagingSizeSettingSource=e,e){case 1:break;case 2:this._lastPageSizeFromParentPagingInput=t;break;case 3:this._lastPageSizeFromView=t}},e.prototype.setTotalResultCount=function(e){this._totalResultCount=e},e.prototype.getLastPageSizeFromParentPagingInput=function(){return this._lastPageSizeFromParentPagingInput},e.prototype.getLastPageSizeFromView=function(){return this._lastPageSizeFromView},e.prototype.getPagingSizeSettingSource=function(){return this._pagingSizeSettingSource},e}(),h=function(){function e(){this._previousSortingArray=[],this._currentSortingArray=[],this.retrieveDataSetSorting=this.retrieveDataSetSorting.bind(this),this.getCurrentSortingArray=this.getCurrentSortingArray.bind(this),this.setColumnAliasMap=this.setColumnAliasMap.bind(this),this.extendColumnAliasMap=this.extendColumnAliasMap.bind(this)}return e.prototype.retrieveDataSetSorting=function(){return this._currentSortingArray},e.prototype.getCurrentSortingArray=function(){return this._currentSortingArray},e.prototype.setColumnAliasMap=function(e){this._columnAliasMap=e},e.prototype.extendColumnAliasMap=function(e){var t=this;this._columnAliasMap&&e?Object.keys(e).forEach((function(r){r in t._columnAliasMap||(t._columnAliasMap[r]=e[r])})):this._columnAliasMap=e},e.prototype.getValidSortingArray=function(){return this._previousSortingArray},e.prototype.updateSortingArrays=function(){Object(l.e)(this._currentSortingArray,this._previousSortingArray)&&(this._previousSortingArray=Object(l.t)(this._currentSortingArray,this._columnAliasMap))},e}(),f=r("7EJx"),m=r("VnpK"),g=r("455M"),v=r("TCcM"),b=r("sgPk"),y=r("G7N+"),O=r("aqxQ"),_=r("r2h9"),P=r("/j9Z"),S=r("yHpA"),w=r("F2uj"),I=r("+6eZ"),j=r("jxko"),C=r("sRzG"),D=r("HSdq"),E=r("UlLp"),T=r("sOTk"),N=r("Gemh"),F=r("hl8w"),R=r("0hZT"),A=r("lMVv"),k=r("QAhb"),M=r("UOiB"),L=r("Sscr"),V=r("EGsq"),x=r("2OIc"),B=r("T2Xs"),U=r("otJc"),z=r("Ww2r"),W=r("WS0f"),q=r("6FBX"),G=r("j6Db"),Q=r("IUjT"),H=r("qC0c"),K=r("cZkS"),X=r("RNNy"),Y=r("vt+k"),Z=r("JlqV"),J=r("EpyZ"),$=r("wQXd"),ee=r("S2mk"),te=r("bI8h"),re=r("VSy5");function ie(e,t,r){var i=Object(re.a)(t,["/","*"])+"([\\S\\s]*)"+Object(re.a)(r,["/","*"]),a=new RegExp(i,"i"),n=e.match(a);return n&&n.length>0?n[1]:null}function ae(e,t){if(!e||!t)return null;var r=e.replace(/\sorder\s+by\s[\s\S]*$/i,"").match(/(select(?:[\s\S]*?))(?:where\s+([\s\S]*))?$/i);if(!r)return null;var i=r[1];if(!i)return null;var a=r[2],n=function(e){return/^\s*with\s/i.test(e)?function(e){var t=new RegExp(/(with[\s\S]*__QuickFindInternal__\]\))/i.source+"[\\s\\S]*"+/\swhere\s([\s\S]+\[__QuickFind__\]\))/i.source+"(?:[\\s\\S]*?)"+/(\s+order\s+by\s+(?:[\s\S]*?))?$/i.source,"i"),r=e.match(t);if(!r)return null;var i=r[1];if(!i)return null;var a=r[2];if(!a)return null;var n=r[3];return{with:i,in:a,orderBy:n}}(e):function(e){var t=/(\sorder\s+by\s+(?:[\s\S]*?))?$/i,r=e.match(t)[1];r&&(e=e.substring(0,e.indexOf(r)));var i=/^\s*select\s(?:[\s\S]*?)\sfrom\s(?:[\s\S]*?)where\s([\s\S]+)$/i,a=e.match(i)[1];if(!a)return null;return{in:a,orderBy:r}}(e)}(t),o=a?"("+a+") and ("+n.in+")":n.in;return(n.with||"")+" "+i+" where "+o+" "+(n.orderBy||"")}var ne=r("c56u"),oe=r("jigW"),se=r("uQP8"),ue=r("i2G7"),le=r("NuVc"),ce=r("M6d0"),de=r("3Cg9"),pe=r("+Iuh"),he=r("ak18"),fe=r("xkx/"),me="MscrmControls.FieldControls.SimpleLookupControl",ge="dataset",ve="dataset_recordid_",be=function(){function e(e,t,r){void 0===t&&(t=null),this._rerunMapStateToPropsTaskId=-1,this._shouldApplyContextFilter=!1,this.dataSetClass=0,this._viewBasedLinkedEntitiesKeys=[],this.previousDataSetParameter=null,this.previousEmptyParameter=null,this._previousDataSetRecords=null,this.previousRecords=null,this.previousSubParametersDefinition={sortingInput:null,filteringInput:null,extraFilters:null,pagingInput:null,refreshInput:null,linkingInput:null},this.previousSubParametersInput={sortingInput:null,filteringInput:null,extraFilters:null,pagingInput:null,refreshInput:null,linkingInput:null},this.previousAppliedSubParametersInput={sortingInput:null,filteringInput:null,extraFilters:null,pagingInput:null,refreshInput:null,linkingInput:null},this.previousOwnProps=null,this.linkedEntityParsed=!1,this.memoizedCurrentViewId=null,this.dataRequestedOnce=!1,this.dataFirstTimeSentAcknowledged=!1,this.forceApplyDataSetInputReturnNone=!1,this.firstDataRequestType=0,this.dataRequestedByControlInitialization=!0,this.previousInitState=y.a.Uninitialized,this._previousQueryKey=null,this._memoizedAdditionalColumnsInfo=null,this._memoizedViewColumnsInfo=null,this._memoizedAllColumnsInfo=null,this._additionalColumns=[],this._dataProvider=null,this._previousDataProviderReturn=null,this._selectedRecordIds=[],this._snapShotIdMap={},this.refreshingStatus=0,this._updatedDataSetPropertiesForLegacy={},this._updatedDataSetProperties={},this._queryBuilderForPaging=null,this.columnsForEmptyDataset=null,this._initialDataSetFetchEnabled=!0,this.entityLogicalNameFromView="",this._dataProviderRetrieveAction=0,this.extraFilters=[],this.lookupCustomFilters=[],this.viewIdDocumentDic={},this.isColumnFirstMetadataReady=!1,this._initialPageNumber=-1,this._relatedFilterEnabled=!0,this.meFilterEnabled=!1,this.gridRunOnLoad=this.gridRunOnLoad.bind(this),this.loadNextPage=this.loadNextPage.bind(this),this.loadExactPage=this.loadExactPage.bind(this),this.loadPreviousPage=this.loadPreviousPage.bind(this),this.resetPaging=this.resetPaging.bind(this),this.loadSpecificPage=this.loadSpecificPage.bind(this),this.addColumn=this.addColumn.bind(this),this.propKey=e,this.filteringObj=new c,this.linkedEntitiesObj=new d.a,this.pagingObj=new p,this.sortingObj=new h,this.previousDataSetDefinition=t,this._fieldDataSelector=Object(C.a)(),this.contextToken=r,this._additionalColumns=[]}return e.prototype.getPreviousQueryKey=function(){return this._previousQueryKey},e.prototype.getLatestData=function(){return this.previousDataSetParameter},e.prototype.getUpdateFlag=function(){return this._needToRunLoad},e.prototype.getPropKey=function(){return this.propKey},e.prototype.setLookupDataSetAttributes=function(e,t){this._shouldApplyContextFilter=e,this._parentRecordContext=t},e.prototype.setRelatedFilter=function(e){this._relatedFilterEnabled=e},e.prototype.setSelectedRecordIds=function(e){this._selectedRecordIds=e,this.previousDataSetDefinition.onRecordsSelected&&this.previousDataSetDefinition.onRecordsSelected(this._selectedRecordIds)},e.prototype.getSelectedRecordIds=function(){var e=[];if(this._previousDataSetRecords)for(var t in this._selectedRecordIds)this._previousDataSetRecords[this._selectedRecordIds[t]]&&e.push(this._selectedRecordIds[t]);return e.length!==this._selectedRecordIds.length&&(this._selectedRecordIds=e),this._selectedRecordIds},e.prototype.clearSelectedRecordIds=function(){return this.setSelectedRecordIds([])},e.prototype.getParameterManifestType=function(){return g.a.Grid},e.prototype.getCurrentSnapshotIdMap=function(){return this._snapShotIdMap},e.prototype.clearCurrentSnapshotIdMap=function(){this._snapShotIdMap={}},e.prototype.isParameterOfDataSetType=function(e){return!!e&&e.Type===this.getParameterManifestType()},e.prototype.getRelationshipNameFromParameter=function(e){return e?e.RelationshipName:null},e.prototype.getLegacyUpdatedPropertiesDic=function(){return this._updatedDataSetPropertiesForLegacy},e.prototype.clearLegacyUpdatedPropertiesDic=function(){this._updatedDataSetPropertiesForLegacy={}},e.prototype.setLegacyUpdatedPropertiesDic=function(e,t){var r;Object.assign(this._updatedDataSetPropertiesForLegacy,((r={})[e]=!0,r))},e.prototype.getUpdatedPropertiesDic=function(){return this._updatedDataSetProperties},e.prototype.clearUpdatedPropertiesDic=function(){this._updatedDataSetProperties={}},e.prototype.setUpdatedPropertiesDic=function(e,t){var r;Object.assign(this._updatedDataSetProperties,((r={})[e]=!0,r))},e.prototype.getBoundEntityRecordId=function(e,t){if(t&&t.formInfo&&t.formInfo.RecordId)return new a.a(t.formInfo.RecordId);var r=Object(se.a)(e,t.id),i=null;return r&&(i=r.input)?i.id:null},e.prototype.getBoundEntityName=function(e,t){if(t&&t.formInfo&&t.formInfo.EntityName)return t.formInfo.EntityName;var r=Object(se.a)(e,t.id),i=null;return r&&(i=r.input)?i.entityTypeName:null},e.prototype.savePreviousOwnProps=function(e){this.previousOwnProps=e},e.prototype.retrievePropertyParameter=function(e,t,r,a,n,o){var s,u=Object(i.__assign)(Object(i.__assign)({},r),{Parameters:(s={},s[o]=n,s)});return this._fieldDataSelector(o,e,t,u,a,this.contextToken)},e.prototype.getPropertyParameterValue=function(e){return e&&e.raw},e.prototype.updatePreviousDataSetParameterDefinition=function(e,t){Object(l.y)(this.previousDataSetDefinition,e)&&(this._isColumnsetChanged=!0),this.previousDataSetDefinition=e,this._dataProvider=e.DataProvider?e.DataProvider:null,this._dataProvider&&0!==this._dataProviderRetrieveAction&&(this._dataProviderRetrieveAction=1),e.FirstDataRequestType?this.firstDataRequestType=e.FirstDataRequestType:o.c(t)||(this._initialDataSetFetchEnabled=this._isInitialDataSetFetchEnabled(t),this._initialDataSetFetchEnabled||(this.firstDataRequestType=1)),this.previousDataSetDefinition.LinkingInput?this.previousSubParametersDefinition.linkingInput=Object(i.__assign)(Object(i.__assign)({},this.previousDataSetDefinition.LinkingInput),{Usage:1}):this.previousSubParametersDefinition.linkingInput=null,this.previousDataSetDefinition.SortingInput?this.previousSubParametersDefinition.sortingInput=Object(i.__assign)(Object(i.__assign)({},this.previousDataSetDefinition.SortingInput),{Usage:1}):this.previousSubParametersDefinition.sortingInput=null,this.previousDataSetDefinition.FilteringInput?this.previousSubParametersDefinition.filteringInput=Object(i.__assign)(Object(i.__assign)({},this.previousDataSetDefinition.FilteringInput),{Usage:1}):this.previousSubParametersDefinition.filteringInput=null,this.previousDataSetDefinition.ExtraFilters?this.previousSubParametersDefinition.extraFilters=this.previousDataSetDefinition.ExtraFilters.slice(0):this.previousSubParametersDefinition.extraFilters=null,this.previousDataSetDefinition.PagingInput?this.previousSubParametersDefinition.pagingInput=Object(i.__assign)(Object(i.__assign)({},this.previousDataSetDefinition.PagingInput),{Usage:1}):this.previousSubParametersDefinition.pagingInput=null,this.previousDataSetDefinition.RefreshInput?this.previousSubParametersDefinition.refreshInput=Object(i.__assign)(Object(i.__assign)({},this.previousDataSetDefinition.RefreshInput),{Usage:1}):this.previousSubParametersDefinition.refreshInput=null},e.prototype.getSubParameterValues=function(e,t,r,a){var n=!1,s=null,u=null,l=null,c=null,d=null,p=null;if(this.previousSubParametersDefinition.linkingInput){var h=this.getPropertyParameterValue(this.previousSubParametersInput.linkingInput),f=this.retrievePropertyParameter(e,t,r,a,this.previousSubParametersDefinition.linkingInput,"linking"),g=this.getPropertyParameterValue(f);h!==g&&Object(I.a)(g)?(p=f,n=!0):p=this.previousSubParametersInput.linkingInput}if(this.previousSubParametersDefinition.sortingInput){var v=this.getPropertyParameterValue(this.previousSubParametersInput.sortingInput),b=this.retrievePropertyParameter(e,t,r,a,this.previousSubParametersDefinition.sortingInput,"sorting"),y=this.getPropertyParameterValue(b),O=Object(I.a)(y);v!==y&&O?(s=b,Object(m.b)(this.sortingObj.getValidSortingArray(),O)?(this.previousSubParametersInput.sortingInput=b,this.previousAppliedSubParametersInput.sortingInput=b):n=!0):s=this.previousSubParametersInput.sortingInput}if(this.previousSubParametersDefinition.filteringInput){var _=this.getPropertyParameterValue(this.previousSubParametersInput.filteringInput),P=this.retrievePropertyParameter(e,t,r,a,this.previousSubParametersDefinition.filteringInput,"filtering"),S=this.getPropertyParameterValue(P),w=Object(I.a)(S);if(_!==S&&(""===S&&_||w))u=P,Object(m.a)(this.filteringObj.getFilter(),w)?(this.previousSubParametersInput.filteringInput=P,this.previousAppliedSubParametersInput.filteringInput=P):n=!0;else{var j=Object(N.t)(e,t.id,this.contextToken);_===S&&j&&j.source&&1===j.source&&j.timeStamp&&j.timeStamp!==this.filteringObj.getClientApiFilterTimeStamp()?(this.filteringObj.setClientApiFilterTimeStamp(j.timeStamp),u=Object(i.__assign)({},P),n=!0):u=this.previousSubParametersInput.filteringInput}}else if(!this.previousDataSetDefinition.FilteringInput){if(_=this.getPropertyParameterValue(this.previousSubParametersInput.filteringInput)){var C={Static:!0,Value:"",Usage:1};u=this.retrievePropertyParameter(e,t,r,a,C,"filtering"),n=!0}}if(this.previousSubParametersDefinition.extraFilters&&-1===t.controlId.indexOf("header_process")){var D=this.previousSubParametersInput.extraFilters&&this.previousSubParametersInput.extraFilters.length?this.previousSubParametersInput.extraFilters.join():"",E=this.previousSubParametersDefinition.extraFilters;D!==(E&&E.length?E.join():"")?(l=E,n=!0):l=this.previousSubParametersInput.extraFilters}if(this.previousSubParametersDefinition.pagingInput){var T=this.getPropertyParameterValue(this.previousSubParametersInput.pagingInput),F=this.retrievePropertyParameter(e,t,r,a,this.previousSubParametersDefinition.pagingInput,"paging"),R=this.getPropertyParameterValue(F),A=!(!Object(I.a)(R)||!Object(I.a)(T)||Object(I.a)(R).PageRefreshInput===Object(I.a)(T).PageRefreshInput);if(T!==R&&Object(I.a)(R)||A){var k=!1,M=Object(I.a)(R),L=Object(I.a)(T);if(M&&M.firstPageNumber===this.pagingObj.getPageFirstIndex()&&M.lastPageNumber===this.pagingObj.getPageLastIndex()&&M.pageSize===this.pagingObj.getPageSize()&&!A)n=!1,this.previousSubParametersInput.pagingInput=F,this.previousAppliedSubParametersInput.pagingInput=F,c=F;else if(M){var V=L&&L.pagingRefreshInput?L.pagingRefreshInput:"undefinedPagingRefreshInput";(this.isPagingSizeUpdated(M)||Object(m.y)(this.pagingObj.getPageFirstIndex(),M.firstPageNumber,this.pagingObj.getPageLastIndex(),M.lastPageNumber)||this.pagingObj.getHasNextPage()&&Object(m.w)(this.pagingObj.getPageFirstIndex(),M.firstPageNumber,this.pagingObj.getPageLastIndex(),M.lastPageNumber)||this.pagingObj.getHasPreviousPage()&&Object(m.x)(this.pagingObj.getPageFirstIndex(),M.firstPageNumber,this.pagingObj.getPageLastIndex(),M.lastPageNumber)||Object(m.v)(M.firstPageNumber,M.lastPageNumber,V,M.pagingRefreshInput,this.pagingObj.getPageFirstIndex(),this.pagingObj.getPageLastIndex()))&&(!this.dataRequestedOnce&&Object(m.v)(M.firstPageNumber,M.lastPageNumber,V,M.pagingRefreshInput,this.pagingObj.getPageFirstIndex(),this.pagingObj.getPageLastIndex())&&(this._initialPageNumber=M.firstPageNumber),k=!0),k?(c=F,n=!0):(T||(this.previousSubParametersInput.pagingInput={type:null,raw:this.previousSubParametersDefinition.pagingInput.Value,error:!1,errorMessage:null,security:null}),c=this.previousSubParametersInput.pagingInput)}}else c=this.previousSubParametersInput.pagingInput}if(this.previousSubParametersDefinition.refreshInput){var x=this.getPropertyParameterValue(this.previousSubParametersInput.refreshInput),B=this.retrievePropertyParameter(e,t,r,a,this.previousSubParametersDefinition.refreshInput,"refresh"),U=this.getPropertyParameterValue(B);x===U||o.c(U)?d=this.previousSubParametersInput.refreshInput:(d=B,n=!0)}return n?{sortingInput:s,filteringInput:u,extraFilters:l,pagingInput:c,refreshInput:d,linkingInput:p}:this.previousSubParametersInput},e.prototype.applySortingInput=function(e){var t=this.getPropertyParameterValue(e),r=Object(I.a)(t);if(r){var i=this.sortingObj.getCurrentSortingArray();i.splice(0),i.push.apply(i,r)}},e.prototype.applyLinkingInput=function(e){var t=this;if(this.linkedEntitiesObj.length>0&&(this.linkedEntitiesObj.clear(),this._viewBasedLinkedEntitiesKeys.length>0&&(this.linkedEntityParsed=!1)),e){var r=this.getPropertyParameterValue(e),i=Object(I.a)(r);i&&i.forEach((function(e){t.linkedEntitiesObj.addLinkedEntity(e)}))}},e.prototype.applyFilteringInput=function(e){var t=this.getPropertyParameterValue(e),r=""===t?t:Object(I.a)(t);r&&""!==r?this.filteringObj.setFilter(r):this.filteringObj.clearFilter()},e.prototype.applyExtraFiltersInput=function(e){this.extraFilters=e&&e.length?e.map((function(e){var t=Object(I.a)(e);return Object(l.n)(t,null)})).filter((function(e){return!o.c(e)})):[]},e.prototype.isPagingSizeUpdated=function(e){var t=this.pagingObj.getLastPageSizeFromParentPagingInput();return e.pageSize&&e.pageSize!==this.pagingObj.getPageSize()&&(-200===t||t!==e.pageSize)},e.prototype.updatePagingSizeFromViewIfNeeded=function(e,t){if(-200===this.pagingObj.getLastPageSizeFromView()&&1!==this.pagingObj.getPagingSizeSettingSource()&&4!==this.pagingObj.getPagingSizeSettingSource()&&(2!==this.pagingObj.getPagingSizeSettingSource()||this.pagingObj.getLastPageSizeFromParentPagingInput()===t)){var r=Object(l.B)(e,this.viewIdDocumentDic),i=r?r.getElementsByTagName("fetch"):null;if(i&&0!==i.length){var a=i[0].getAttribute("count"),n=-200;a&&""!==a&&("string"==typeof a?n=parseInt(a,10):"number"==typeof a&&(n=a)),-200!==n&&this.pagingObj.setPageSize(3,n)}}},e.prototype.applyPagingInput=function(e,t){var r=this.getPropertyParameterValue(e),i=Object(I.a)(r)||{firstPageNumber:null,lastPageNumber:null,pageSize:null},a=this.getPropertyParameterValue(t),n=Object(I.a)(a)||{firstPageNumber:null,lastPageNumber:null,pageSize:null};this.isPagingSizeUpdated(n)?(this.pagingObj.reset(),this.pagingObj.setPageSize(2,n.pageSize),this._initialPageNumber>=1&&(this.pagingObj.setPageFirstIndex(this._initialPageNumber),this.pagingObj.setPageLastIndex(this._initialPageNumber))):(Object(m.y)(this.pagingObj.getPageFirstIndex(),n.firstPageNumber,this.pagingObj.getPageLastIndex(),n.lastPageNumber)||n.firstPageNumber===n.lastPageNumber&&i.pagingRefreshInput!==n.pagingRefreshInput)&&(this.pagingObj.setPageFirstIndex(n.firstPageNumber),this.pagingObj.setPageLastIndex(n.lastPageNumber)),this.previousDataSetParameter&&(this.previousDataSetParameter.paging=this.pagingObj.retrieveDataSetPaging())},e.prototype.updateEntityOwnColumnNames=function(e,t,r){var i=null;t.TargetEntityType?i=t.TargetEntityType:t.EntityName&&(i=t.EntityName),this._entityOwnColumnNames=this._getOwnEntityColumnNames(r.map((function(e){return e.name})),Object(w.d)(e,i))},e.prototype.retrieveDataSetObjectFromStorage=function(e,t,r,n){var o=r.Parameters[this.propKey],s=this.updatedSubParameter(n),u=this.getCurrentViewId(o)||(this.shouldUseLookupService(e)&&this.lookupViewId?new a.a(this.lookupViewId):null),c=a.a.toString(u),d=Object(N.qb)(e,u,t.id);if(!d&&this.shouldUseLookupService(e)){if(!this.lookupView||u&&!a.a.equals(this.lookupView.viewId,u))return this.generateEmptyDataSetParam(d?d.title:"")}else if(null===d||d.initialized!==y.a.Initialized||!Object(N.E)(e,d)||!Object(A.h)(e,d.entityLogicalName)||!this.getIsColumnFirstMetadataReady())return this.generateEmptyDataSetParam(d?d.title:"");!d&&this.shouldUseLookupService(e)&&this.lookupView&&(d=this.parseLookupViewDescriptorToViewDescriptor(this.lookupView));var p=this.getListRecordData(e,t,r);if(null===p)return 1===this.refreshingStatus||2===this.refreshingStatus?this.previousDataSetParameter:this.generateEmptyDataSetParam(d?d.title:"");if(!this.previousDataSetParameter||p!==this.previousDataSetParameter.records||3===this.refreshingStatus||4===this.refreshingStatus){var h=this.shouldUseLookupService(e)&&this.lookupView&&a.a.equals(this.lookupView.viewId,d.viewId)?this.parseLookupColumnsToDataSetColumns(this.lookupView.columns):Object(l.m)(e,o,l.q,d,this.viewIdDocumentDic);this.addExtraColumns(h,e,d?d.entityLogicalName:null),this.addColumnsFromDataSetParameterForMetadataRetrieval(e,o,d);var f=this.previousInitState!==y.a.Initialized||3===this.refreshingStatus;this.setFilteringObjColumnAliasMap(h),this.setSortingObjColumnAliasMap(h),this.previousDataSetParameter=this.generateNewDatasetParam(f,h,!1,null,null,p,c,d.title),o.Type===g.a.Grid&&this.updateEntityOwnColumnNames(e,o,h),3!==this.refreshingStatus&&4!==this.refreshingStatus||(this.setLegacyUpdatedPropertiesDic(ge,!0),4===this.refreshingStatus&&(this.refreshingStatus=0))}return s&&(this.previousDataSetParameter=Object(i.__assign)({},this.previousDataSetParameter)),this.previousDataSetParameter},e.prototype.updatedSubParameter=function(e){return this.previousSubParametersInput!==e&&(this.previousSubParametersInput=e,this.dataFirstTimeSentAcknowledged?this.forceApplyDataSetInputReturnNone=!1:this.forceApplyDataSetInputReturnNone=!0,!0)},e.prototype.addColumnsFromDataSetParameterForMetadataRetrieval=function(e,t,r){var i=this;if(r&&r.initialized===y.a.Initialized&&t.Columns&&t.Columns.length>0){var a=Object(N.E)(e,r);t.Columns.forEach((function(e,t){var r=a[e.Name];o.c(r)&&i.addColumn(e.Name)}))}},e.prototype.addExtraColumns=function(e,t,r){var i=this;this._additionalColumns&&this._additionalColumns.length>0&&this._additionalColumns.forEach((function(r,a){var n=r.name,s=r.alias;if(o.c(s)){var u=e.filter((function(e){return e.name===n}));if(!u||0===u.length){var l=i._createDataSetColumn(t,n);o.c(l)||e.push(l)}}else{var c=i.linkedEntitiesObj.getLinkedEntities();if(c&&c.length>0){for(var d=null,p=0,h=c;p<h.length;p++){var f=h[p];if(f.alias===s){d=f.name;break}}l=i._createDataSetColumn(t,n,d,s);o.c(l)||e.push(l)}}})),this._addMandatoryColumns(e,t,r)},e.prototype._getMandatoryColumnNames=function(e,t){if(this._dataProvider||!t)return[];var r=Object(A.h)(e,t),i=r&&r.PrimaryNameAttribute;return i?[i]:[]},e.prototype._addMandatoryColumns=function(e,t,r){if(!this._dataProvider&&r){var i=Object(A.h)(t,r),a=i&&i.PrimaryNameAttribute,n=!!a&&e&&e.findIndex((function(e){return e.name===a}))>-1;a&&!n&&e.push({name:a,isHidden:!0,isPrimary:!0,displayName:"",order:0,dataType:"",alias:a,visualSizeFactor:1})}},e.prototype._createDataSetColumn=function(e,t,r,i){var a=null,n=o.c(r)?this.getEntityTypeName():r,s=Object(w.d)(e,n);if(!o.c(s)){var u=s[t];if(!o.c(u)){var c=null;o.c(u.Type)||o.c(u.Format)||(c=Object(j.a)(u.Type,u.Format));var d={Alias:o.c(i)?u.LogicalName:i+"."+u.LogicalName,DisplayName:u.DisplayName,DataType:c,Name:o.c(i)?u.LogicalName:i+"."+u.LogicalName,Type:c,Format:u.Format};a=Object(l.q)(d,-1,-1,null,!1)}}return a},e.prototype.retrieveDataSetObjectFromDataProvider=function(e,t,r,n){var o,s,u=r.Parameters[this.propKey],c=this.updatedSubParameter(n),d=this.getCurrentViewId(u),p="function"==typeof this._dataProvider.getTitle?this._dataProvider.getTitle():"";if(d&&(o=a.a.toString(d),null===(s=Object(N.qb)(e,d,t.id))||s.initialized!==y.a.Initialized||!this.getIsColumnFirstMetadataReady()))return this.generateEmptyDataSetParam(s?s.title:p);var h=Object(E.b)(e,t.id,t.controlId,this.propKey);if(null===h)return this.generateEmptyDataSetParam(s?s.title:p);if(!this.previousDataSetParameter||h!==this._previousDataProviderReturn){this.error=!1;var f=this.error;this.errorMessage="";var m=this.errorMessage,g=this.innerError,v=this._dataProvider.getColumns();s?(v=Object(l.m)(e,u,l.q,s,this.viewIdDocumentDic),this.setFilteringObjColumnAliasMap(v),this.setSortingObjColumnAliasMap(v)):(this.setFilteringObjColumnAliasMap(null),this.setSortingObjColumnAliasMap(null)),this._previousDataProviderReturn=h;for(var b={},O=0,_=h;O<_.length;O++){var P=_[O];b[P.getRecordId()]=P}this.setLegacyUpdatedPropertiesDic(ge,!0),this.setUpdatedPropertiesDic(ge,!0),this._postDataSetParameterProcessForDataProvider(),this.previousDataSetParameter=this.generateNewDatasetParam(!1,v,f,m,g,b,o,s?s.title:p),this.triggerOnDataSetUpdateCallBack(!1,"","")}return c&&(this.previousDataSetParameter=Object(i.__assign)({},this.previousDataSetParameter)),this.previousDataSetParameter},e.prototype._postDataSetParameterProcessForDataProvider=function(){if(this._dataProvider&&this._dataProvider.getPaging&&this._dataProvider.getPaging()){var e=this._dataProvider.getPaging();e.hasOwnProperty("hasNextPage")&&this.pagingObj.setHasNextPage(e.hasNextPage),e.hasOwnProperty("hasPreviousPage")&&this.pagingObj.setHasPreviousPage(e.hasPreviousPage),e.hasOwnProperty("pageSize")&&this.pagingObj.setPageSize(4,e.pageSize),e.hasOwnProperty("totalResultCount")&&this.pagingObj.setTotalResultCount(e.totalResultCount)}this._dataProviderRetrieveAction=this._dataProvider?1:0},e.prototype.retrieveDataSetObject=function(e,t,r,i){var n;this.savePreviousOwnProps(t),this.isOnlineStatus=Object(Z.b)(e);var s=r.Parameters[this.propKey];if(this.isParameterOfDataSetType(s)){this.updatePreviousDataSetParameterDefinition(s,e);var u=this.getSubParameterValues(e,t,r,i);if(this.previousSubParametersInput.sortingInput!==u.sortingInput&&this.applySortingInput(u.sortingInput),this.previousSubParametersInput.linkingInput!==u.linkingInput&&this.applyLinkingInput(u.linkingInput),this.previousSubParametersInput.filteringInput!==u.filteringInput&&this.applyFilteringInput(u.filteringInput),this.previousSubParametersInput.extraFilters!==u.extraFilters&&this.applyExtraFiltersInput(u.extraFilters),this.previousSubParametersInput.pagingInput!==u.pagingInput&&this.applyPagingInput(this.previousSubParametersInput.pagingInput,u.pagingInput),this.previousSubParametersInput.refreshInput!==u.refreshInput&&(this.previousSubParametersInput.refreshInput=u.refreshInput),this.controlId=t.descriptor.parentFieldSectionItem?t.descriptor.parentFieldSectionItem:t.controlId,!this.lookupView&&this.shouldUseLookupService(e)){var c=Object(J.b)(r,this.propKey);this.lookupMetadataKey=this.lookupMetadataKey||c?Object(Q.f)(e,i.entityTypeName,c,t.id):null,this.lookupView=Object(Q.a)(e,this.lookupMetadataKey,this.targetEntity||this.entityLogicalNameFromView),this.lookupView&&this.lookupView.viewId&&s.ViewId===this.lookupView.viewId.guid&&(this.lookupViewId=this.lookupView.viewId.guid,this.columnsForEmptyDataset=this.parseLookupColumnsToDataSetColumns(this.lookupView.columns))}if(o.c(this.columnsForEmptyDataset)){var d=void 0,p=this.getCurrentViewId(s);this.shouldUseLookupService(e)&&this.lookupView&&(!p||a.a.equals(this.lookupView.viewId,p))||(p?(d=Object(N.qb)(e,p,t.id),!o.c(d)&&d.initialized===y.a.Initialized&&Object(N.E)(e,d)&&Object(A.h)(e,d.entityLogicalName)&&this.getIsColumnFirstMetadataReady()&&(this.columnsForEmptyDataset=Object(l.m)(e,s,l.q,d,this.viewIdDocumentDic),this.entityLogicalNameFromView=d.entityLogicalName,this._sortedColumnsOnView||(this._sortedColumnsOnView=Object(l.x)(e,d,this.viewIdDocumentDic),this.columnsForEmptyDataset&&this.columnsForEmptyDataset.length>0&&this._sortedColumnsOnView&&this._sortedColumnsOnView.length>0&&0===this.sortingObj.getCurrentSortingArray().length&&(n=this.sortingObj.getCurrentSortingArray()).push.apply(n,this._sortedColumnsOnView)),this.updatePagingSizeFromViewIfNeeded(d,Object(f.h)(e)))):this._dataProvider&&(this.columnsForEmptyDataset=this._dataProvider.getColumns()))}var h=void 0;return o.c(i)||(this.pageEtn=i.entityTypeName),h=this._dataProvider?this.retrieveDataSetObjectFromDataProvider(e,t,r,u):this.retrieveDataSetObjectFromStorage(e,t,r,u),this.linkedEntityParsed||this._parselinkedEntitiesFromView(e,r),h}return null},e.prototype.getIsColumnFirstMetadataReady=function(){return this.shouldUseLookupService()||this.isColumnFirstMetadataReady||1===this.dataSetClass||3===this.dataSetClass||2===this.firstDataRequestType&&this.dataFirstTimeSentAcknowledged},e.prototype._parselinkedEntitiesFromView=function(e,t){var r=t.Parameters[this.propKey],i=this.previousOwnProps?this.previousOwnProps.id:null,a=this.getCurrentViewId(r),n=Object(N.qb)(e,a,i);this._parselinkedEntitiesFromViewDescriptor(n)},e.prototype._parselinkedEntitiesFromViewDescriptor=function(e){if(e){this.linkedEntityParsed=!0;var t=Object(l.B)(e,this.viewIdDocumentDic);if(t){var r=t.getElementsByTagName("link-entity");if(!r||0===r.length)return;for(var i=0;i<r.length;i++){var a=this._generateLinkedEntityExpression(r[i]);this.linkedEntitiesObj.addLinkedEntity(a);var n=this._getLinkedEntityExpressionKey(a);-1===this._viewBasedLinkedEntitiesKeys.indexOf(n)&&this._viewBasedLinkedEntitiesKeys.push(n)}}}},e.prototype._generateLinkedEntityExpression=function(e){if(!e)return null;var t=e.attributes,r=t.getNamedItem("alias")?t.getNamedItem("alias").value:null;return{name:t.getNamedItem("name")?t.getNamedItem("name").value:null,from:t.getNamedItem("from")?t.getNamedItem("from").value:null,to:t.getNamedItem("to")?t.getNamedItem("to").value:null,linkType:t.getNamedItem("link-type")?t.getNamedItem("link-type").value:null,alias:r}},e.prototype._getOwnEntityColumnNames=function(e,t){var r=[];if(t){var i=Object.keys(t);e.forEach((function(e){-1!==i.indexOf(e)&&r.push(e)}))}return r},e.prototype._getLinkedEntityExpressionKey=function(e){return e.name+": "+e.alias+": "+e.from+": "+e.to+": "+e.linkType},e.prototype.linkToParameter=function(e,t){var r=this,i=t.refreshDataSetParameter;for(var a in e.records)this.linkRecordAPI(e.records[a],t);e.refresh=function(){i(r,r.contextToken)},e.setSelectedRecordIds=this.setSelectedRecordIds.bind(this),e.getSelectedRecordIds=this.getSelectedRecordIds.bind(this),e.clearSelectedRecordIds=this.clearSelectedRecordIds.bind(this),this.linkPagingAPI(e.paging,t),e.openDatasetItem=t.openDatasetItem;var n={},o=[];e.columns.forEach((function(e){n[e.name]=e,o.push(e.name)})),e.getCellImageInfo=this._getCellConditionalImage.bind(this,e.records,t.loadWebResource,n,o)},e.prototype._getCellConditionalImage=function(e,t,r,i,a,n,o){var s=r[a];return this.getConditionalImage(t,i,e[n],s.imageProviderWebresource,s.imageProviderFunctionName,o)},e.prototype.getConditionalImage=function(e,t,r,a,n,o){var s=this;if(r&&a&&n&&"$webresource:"!==a){var u={};return u.RowId=r.getRecordId(),t.forEach((function(e){u[e]=r.getFormattedValue(e),u[e+"_Value"]=r.getValue(e)})),e(a,this.previousOwnProps.id).then((function(e){return Object(i.__awaiter)(s,void 0,void 0,(function(){var t,r,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.container.execute(n,[JSON.stringify(u),o])];case 1:return t=i.sent(),r=Array.isArray(t)&&t.length>0?t[0]&&t[0].startsWith("blob:")?t[0]:Object(V.a)(e.webResourcePath,t[0]):null,a=Array.isArray(t)&&t.length>1?t[1]:null,[2,{Url:r,Tooltip:a}]}}))}))}))}return Promise.resolve(null)},e.prototype.linkRecordAPI=function(e,t){e.setValue=this._recordSetValueAPI.bind(this,e,t.updateFieldValue),e.save=this._recordSaveAPI.bind(this,e,t.saveEmbeddedEntity)},e.prototype.linkPagingAPI=function(e,t){var r=t.refreshDataSetParameter;e.loadNextPage=this.loadNextPage.bind(this,r),e.loadPreviousPage=this.loadPreviousPage.bind(this,r),e.reset=this.resetPaging.bind(this,r),e.loadExactPage=this.loadExactPage.bind(this,r)},e.prototype._getClosestParentWithContext=function(e){return e.descriptor&&e.descriptor.HasContext?e.controlId:e.parentDefinedControlProps&&e.parentDefinedControlProps.closestParentWithContext},e.prototype._recordSetValueAPI=function(e,t,r,i){var a;if(this.previousOwnProps){var n=this._getClosestParentWithContext(this.previousOwnProps),o=this.previousOwnProps.id,s=e.getRecordId(),u=e.getNamedReference().entityName;t(o,((a={})[r]={fieldName:r,type:0,value:i},a),!1,u,s,n,this.contextToken)}},e.prototype._recordSaveAPI=function(e,t,r){var i=this._getClosestParentWithContext(this.previousOwnProps),a=this.previousOwnProps.id,n=e.getRecordId(),o=e.getNamedReference().entityName,s=this.previousDataSetDefinition.ViewId;return t(a,o,n,i,this._entityOwnColumnNames,s,r&&r.suppressDuplicateDetection,this.contextToken)},e.prototype.applyDataSetInputs=function(e){var t=0;if(this.previousSubParametersInput.pagingInput!==this.previousAppliedSubParametersInput.pagingInput){if(!this.previousSubParametersInput.pagingInput)return this.previousAppliedSubParametersInput.pagingInput=this.previousSubParametersInput.pagingInput,this.pagingObj.reset(),this.forceApplyDataSetInputReturnNone?(this.forceApplyDataSetInputReturnNone=!1,0):1;var r=this.getPropertyParameterValue(this.previousSubParametersInput.pagingInput),i=Object(I.a)(r);if(i){this.isPagingSizeUpdated(i)&&(this.pagingObj.setPageSize(2,i.pageSize),this.pagingObj.reset(),t=1),Object(m.w)(this.pagingObj.getPageFirstIndex(),i.firstPageNumber,this.pagingObj.getPageLastIndex(),i.lastPageNumber)&&(this.pagingObj.setPageFirstIndex(i.firstPageNumber),t=2),Object(m.x)(this.pagingObj.getPageFirstIndex(),i.firstPageNumber,this.pagingObj.getPageLastIndex(),i.lastPageNumber)&&(this.pagingObj.setPageLastIndex(i.lastPageNumber),t=3);var a=this.getPropertyParameterValue(this.previousAppliedSubParametersInput.pagingInput),n=Object(I.a)(a),o=n&&n.pagingRefreshInput?n.pagingRefreshInput:"undefinedPagingRefreshInput";Object(m.v)(i.firstPageNumber,i.lastPageNumber,o,i.pagingRefreshInput,this.pagingObj.getPageFirstIndex(),this.pagingObj.getPageLastIndex())&&(this.pagingObj.setPageFirstIndex(i.firstPageNumber),this.pagingObj.setPageLastIndex(i.lastPageNumber),t=6),this.previousAppliedSubParametersInput.pagingInput=this.previousSubParametersInput.pagingInput}}return this.previousSubParametersInput.sortingInput!==this.previousAppliedSubParametersInput.sortingInput&&(this.previousAppliedSubParametersInput.sortingInput=this.previousSubParametersInput.sortingInput,t=1),this.previousSubParametersInput.filteringInput!==this.previousAppliedSubParametersInput.filteringInput&&(this.previousAppliedSubParametersInput.filteringInput=this.previousSubParametersInput.filteringInput,t=1),this.previousSubParametersInput.extraFilters!==this.previousAppliedSubParametersInput.extraFilters&&(this.previousAppliedSubParametersInput.extraFilters=this.previousSubParametersInput.extraFilters,t=1),this.previousSubParametersInput.refreshInput!==this.previousAppliedSubParametersInput.refreshInput&&(this.previousAppliedSubParametersInput.refreshInput=this.previousSubParametersInput.refreshInput,t=1),this.forceApplyDataSetInputReturnNone?(this.forceApplyDataSetInputReturnNone=!1,0):t},e.prototype.setRefreshingStart=function(){0===this.refreshingStatus&&o.c(this._dataProvider)&&(this.refreshingStatus=1)},e.prototype.getCurrentViewId=function(e){if(!e)return this.dataSetClass,null;var t=e.ViewId;if(!t||t===a.a.toString(a.a.EMPTY)){if(!e.BoundViewParams||!this._isValidBoundParameterConfiguration(e.BoundViewParams))return null;this._boundViewParams={ViewId:e.BoundViewParams.ViewId,ViewDisplayName:e.BoundViewParams.ViewDisplayName,FetchXml:e.BoundViewParams.FetchXml,LayoutXml:e.BoundViewParams.LayoutXml,TargetEntityType:e.BoundViewParams.TargetEntityType},t=e.BoundViewParams.ViewId}return this.memoizedCurrentViewId&&a.a.toString(this.memoizedCurrentViewId)===t||(this.memoizedCurrentViewId=new a.a(t)),this.memoizedCurrentViewId},e.prototype.retrieveCurrentView=function(e,t){var r=this.previousOwnProps?this.previousOwnProps.id:null,i=this.getCurrentViewId(this.previousDataSetDefinition),n=Object(N.qb)(e(),i,r);return n&&a.a.equals(n.viewId,i)&&n.initialized===y.a.Initialized?Promise.resolve(n):this.shouldUseLookupService(e())&&this.lookupView&&(a.a.equals(this.lookupView.viewId,i)||!i)?Promise.resolve(this.parseLookupViewDescriptorToViewDescriptor(this.lookupView)):i?this.retrieveView(i,t).then((function(){return Object(N.qb)(e(),i,r)})):this.retrieveView(i,t).then((function(t){return Object(N.qb)(e(),t,r)}))},e.prototype._isValidBoundParameterConfiguration=function(e){if(Object(W.b)(e.TargetEntityType)||Object(W.b)(e.FetchXml)||Object(W.b)(e.LayoutXml)||!a.a.validate(e.ViewId)||Object(W.b)(e.ViewDisplayName)){var t=G.a+"Models.DataSet.DataSetObjectWrapper.addCustomView";return B.a.error(t+": addCustomView, view parameters are not valid",this._getTelemetryParams(t)),!1}return!0},e.prototype.addCurrentBoundView=function(e,t){var r=new a.a(this._boundViewParams.ViewId);t(null,null,new a.a(this._boundViewParams.ViewId),this._boundViewParams.TargetEntityType,null,this._boundViewParams.ViewDisplayName,this._boundViewParams.FetchXml,this._boundViewParams.LayoutXml);var i=this.previousOwnProps?this.previousOwnProps.id:null,n=Object(N.qb)(e(),r,i);return n&&a.a.equals(n.viewId,r)?Promise.resolve(n):Promise.reject(new P.a("Could not add current bound view to state"))},e.prototype.retrieveCurrentBoundView=function(e,t){var r=this.getCurrentViewId(this.previousDataSetDefinition);if(r){var i=this.previousOwnProps?this.previousOwnProps.id:null,n=Object(N.qb)(e(),r,i);return n&&a.a.equals(n.viewId,r)?Promise.resolve(n):this.addCurrentBoundView(e,t)}},e.prototype.retrieveCurrentViewAndAssoicatedAttributes=function(e,t){var r=this;return this.retrieveCurrentView(e,t.retrieveViewAction).then((function(i){var a=new Array,n=e(),o=r.getColumnsThatRequireMetadataToBeLoaded(i,n);for(var s in o)Object(l.z)(n,s,o[s])||a.push(t.getEntityMetadataAction(s,o[s]));return Promise.all(a).then((function(){return r.isColumnFirstMetadataReady=!0,Promise.resolve(i)}))}))},e.prototype._processSortingArrays=function(e,t,r){return 0===r.length||this._sortedColumnsOnView&&0!==this._sortedColumnsOnView.length&&Object(l.c)(r,this._sortedColumnsOnView)?[]:r},e.prototype.createQueryBuilder=function(t,r){var i,n,s=this.previousOwnProps?this.previousOwnProps.id:null,u=Object(N.C)(t(),s,this.contextToken);!o.b(this.lookupFilterString)&&this._quickFindView||(this.lookupFilterString=null);var c=t(),d=!0,p=!1,h=!!this.contextToken&&this.contextToken.contextTokenType===M.a.SubGrid;this.previousOwnProps&&this.previousOwnProps.descriptor&&this.previousOwnProps.descriptor.Parameters&&this.previousOwnProps.descriptor.Parameters.EnableViewPicker&&(p="true"===this.previousOwnProps.descriptor.Parameters.EnableViewPicker),Object(H.a)(c,K.Nd)&&h&&!p||Object(oe.l)(c)&&!this._isCustomGrid()||(d=r.queryType===_.a.QUICKFIND_SEARCH);var f,m=this.lookupFilterString||(u&&u.quickFind&&d?u.quickFind:null),g=r.fetchXML,v=r.offlineSqlQuery,y=!1,O="",P=!1,I=Object(l.p)(c,r.entityLogicalName);if(this.lookupFilterString&&this._quickFindView){var j=this._addQuickFindFilterToFetchXml(this._quickFindView,g),C=v;if(v&&this._quickFindView.offlineSqlQuery&&!(C=
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function(e,t,r){if(!t||!r)return null;var i=null;if(!Object(H.c)(e,K.Id))return ae(t,r);var a=ie(t,te.h,te.c);if(!a)return ae(t,r);var n=ie(r,te.b,te.a),o=ie(r,te.j,te.i),s=ie(t,te.j,te.i);s&&(s=s.toLowerCase().replace("where",""));var u=ie(r,te.e,te.d);return i=n?n+" "+a+" "+o:a+" "+o,s&&(i+=" and ("+s+")"),u&&(i+=" "+u),i}(c,v,this._quickFindView.offlineSqlQuery))){var E=(he=G.a+".Models.DataSet.DataSetObjectWrapper.createQueryBuilder")+" failed to merge offline Lookup queries:\nviewQuery:\n"+v+"\nquickFindQuery:\n"+this._quickFindView.offlineSqlQuery;B.a.error(E,this._getTelemetryParams(he))}f=b.a.fromXmlAndSql(j,C,this._quickFindView.viewId,m,r.entityLogicalName,t),this.previousOwnProps.configuration.CustomControlId===me&&f.setQuickFindSearch(m)}else{var T=!1;u&&u.quickFind&&this.propKey!==e._DATASET_LOOKUP_PROP_KEY&&(Object(oe.l)(c)&&!this._isCustomGrid()||Object(H.a)(c,K.Nd)&&h&&!p)&&(g=this._addQuickFindFilterToFetchXml(this._quickFindView,g),T=!0);if(r.entityLogicalName===X.a&&this.previousOwnProps&&this.previousOwnProps.descriptor&&this.previousOwnProps.descriptor.Parameters&&this.previousOwnProps.descriptor.Parameters.TeamTemplateId){var R=this.previousOwnProps.descriptor.Parameters.TeamTemplateId;if(g&&g.indexOf(R)<0){var A=(V=this.getBoundEntityRecordId(c,this.previousOwnProps))?V.guid:"",L=Object(F.a)(g,R,A);g=L.updatedFetchXml,O=L.filterString,y=!0}}(P=this._isModernQueryBuilder(c,r.viewId,s,y,I,m))?f=ue.a.fromView(r.viewId):(f=b.a.fromXmlAndSql(g,v,r.viewId,m,r.entityLogicalName,t),T&&f.setQuickFindSearch(null==u?void 0:u.quickFind)),this.lookupFilterString=null}if(y){var V=a.a.toString(this.getBoundEntityRecordId(c,this.previousOwnProps));f.addExistingContextFilterToKey(V,O)}var x=this._getAdditionalColumns(r,this.previousDataSetDefinition,c),U=this.sortingObj.getValidSortingArray();U&&U.length>0&&this._processSortingArrays(c,r,U).forEach((function(e){f.orderBy(e.name,1===e.sortDirection)}));var z=this.getRelationshipNameFromParameter(this.previousDataSetDefinition);if(z&&this._relatedFilterEnabled){V=this.getBoundEntityRecordId(c,this.previousOwnProps);var W=this.getBoundEntityName(c,this.previousOwnProps),q=null,Q=null;this.previousOwnProps&&this.previousOwnProps.descriptor&&this.previousOwnProps.descriptor.Parameters&&this.previousOwnProps.descriptor.Parameters.DependentAttributeName&&(q=(Q=this.previousOwnProps.descriptor.Parameters.DependentAttributeName).split(".")[1]?Q.split(".")[1]:Q);var Z=Object(D.ac)(c,s,this.contextToken),J=new k.a(W,V);if(this.propKey===e._DATASET_LOOKUP_PROP_KEY){var ee=this.previousDataSetDefinition;this._parentRecordContext&&(V=this._parentRecordContext.parentRecordId?new a.a(this._parentRecordContext.parentRecordId):a.a.EMPTY,Z=this.getRecordSnapshotId(c,this.previousOwnProps,this._parentRecordContext.parentRecordEntityTypeName,V),this._parentRecordContext.parentRecordEntityTypeName&&(W=this._parentRecordContext.parentRecordEntityTypeName,J=new k.a(this._parentRecordContext.parentRecordEntityTypeName,V))),ee.DependentAttributeName&&(q=(Q=ee.DependentAttributeName).split(".")[1]?Q.split(".")[1]:Q)}var re=Object(w.a)(c,W,q),ne=null,se=!1,le=this.previousDataSetDefinition.DependentAttributeType;re?ne=Object(S.d)(c,Z,J,q):le&&(se=le===W&&le!==this.entityLogicalNameFromView);var ce=ne;if(ce&&ce.reference?V=ce.reference.id:this.propKey!==e._DATASET_LOOKUP_PROP_KEY&&null===q||null!==ce&&null!==ce.reference||!J||null===J.id||se||(V=null),Object($.d)(c)&&null===V&&(V=a.a.EMPTY),Object(N.kb)(c,s,this.contextToken)){var de=Y.h.Related;"Opportunity_ActivityPointers"===z&&(de=Y.h.None),f.applyRollupContextFilter(J,de)}else if(this._shouldApplyContextFilter&&this.propKey===e._DATASET_LOOKUP_PROP_KEY||this.propKey!==e._DATASET_LOOKUP_PROP_KEY){var pe=Object(N.v)(c,s,this.contextToken);try{f.applyContextFilter(z,V,c,pe?pe.relationshipRoleOrdinal:void 0)}catch(e){var he=G.a+".Models.DataSet.DataSetObjectWrapper.createQueryBuilder";B.a.error(he+': relationship parameter was not found in the state tree metadata for relationshipName "'+z+'"',this._getTelemetryParams(he))}}}I&&f.where(I),this._updateQueryBuilderFiltering(f,m);for(var fe=0,ge=this.linkedEntitiesObj.getLinkedEntities();fe<ge.length;fe++){var ve=ge[fe];if((null===(n=null===(i=this.previousOwnProps)||void 0===i?void 0:i.configuration)||void 0===n?void 0:n.CustomControlId)===me&&f.validateLinkedEntity(c,ve),this._isLinkEntityNeeded(ve)){var be=[];if(this._additionalColumns&&this._additionalColumns.length>0)for(var ye=0,Oe=this._additionalColumns;ye<Oe.length;ye++){var _e=Oe[ye];_e.alias===ve.alias&&-1===be.indexOf(_e.name)&&be.push(_e.name)}f.addLinkedEntity(ve,be)}}f.pageSize=this.pagingObj.getPageSize();var Pe=x.slice(0);if(Pe&&Pe.length>0)for(var Se=0;Se<Pe.length;Se++)if(Pe[Se]===N.c){var we=Object(N.o)(c,r.entityLogicalName);we&&!Object(oe.b)(r.fetchXML)&&f.addChildCountAttribute(we.primaryAttribute),Pe.splice(Se,1)}return f.select.apply(f,Pe),P?(f.pageSize=this.pagingObj.getPageSize(),f.getQueryState(t)):f},e.prototype._addQuickFindFilterToFetchXml=function(e,t){var r=new DOMParser;if(e){for(var i=r.parseFromString(e.fetchXML,"text/xml"),a=r.parseFromString(t,"text/xml"),n=i.getElementsByTagName("filter"),o=0;o<n.length;o++)n[o].attributes&&n[o].attributes.getNamedItem("isquickfindfields")&&a.getElementsByTagName("entity")[0].appendChild(n[o]);return(new XMLSerializer).serializeToString(a)}return t},e.prototype._updateQueryBuilderFiltering=function(e,t){if(this.filteringObj.getRootFilterExpression()||this.extraFilters.length>0||this.lookupCustomFilters.length>0){for(var r=(new DOMParser).parseFromString(e.fetchXml,"text/xml").getElementsByTagName("filter"),i=!1,a=0;a<r.length;a++)i=i||!Object(ee.j)(r[a].getAttribute("hint"));var n=this.filteringObj.getRootFilterExpression();if(this.extraFilters.length>0||this.lookupCustomFilters.length>0){var o=this.extraFilters.slice(0);o.push.apply(o,this.lookupCustomFilters),!n||this.previousOwnProps.configuration.CustomControlId===me&&t||o.push(n);var s={operator:"and",terms:o};e.where(s,!0,i)}else!n||this.previousOwnProps.configuration.CustomControlId===me&&t||e.where(n,!0,i)}},e.prototype._checkIfLinkedEntityHasAdditionalColumns=function(e){return!!this._additionalColumns.find((function(t,r,i){t.name;return t.alias===e.alias}))},e.prototype._isLinkEntityNeeded=function(e){return-1===this._viewBasedLinkedEntitiesKeys.indexOf(this._getLinkedEntityExpressionKey(e))||this._checkIfLinkedEntityHasAdditionalColumns(e)},e.prototype._isModernQueryBuilder=function(e,t,r,i,a,n){var o,s,u=this,l=Object(T.g)(e,r),c=!(!(null==l?void 0:l.pageToEditedViewMapId)||!Object(N.rb)(e,l.pageToEditedViewMapId.guid,t.guid)),d=this.getRelationshipNameFromParameter(this.previousDataSetDefinition),p=this.linkedEntitiesObj.length>0&&this.linkedEntitiesObj.getLinkedEntities().some((function(e){return u._isLinkEntityNeeded(e)})),h=Object(N.qb)(e,t,r);return Object(fe.e)(e)&&("MscrmControls.Grid.ReadOnlyGrid"===(null===(s=null===(o=this.previousOwnProps)||void 0===o?void 0:o.configuration)||void 0===s?void 0:s.CustomControlId)||Object(fe.f)(e))&&!d&&!i&&!p&&!a&&!this.filteringObj.getRootFilterExpression()&&!(this.extraFilters.length>0)&&!(this.lookupCustomFilters.length>0)&&!c&&!n&&(null==h?void 0:h.queryType)!==_.a.QUICKFIND_SEARCH},e.prototype._retrieveDataProviderRetrieveAction=function(){var e=this._dataProvider.refresh.bind(this._dataProvider);switch(this._dataProviderRetrieveAction){case 2:e=this._dataProvider.getPaging().loadNextPage.bind(this._dataProvider.getPaging());break;case 3:e=this._dataProvider.getPaging().loadPreviousPage.bind(this._dataProvider.getPaging());break;case 5:e=this._dataProvider.getPaging().reset.bind(this._dataProvider.getPaging());break;case 6:e=this._dataProvider.getPaging().loadExactPage.bind(this._dataProvider.getPaging(),this._exactPageNumberToBeLoaded)}return e},e.prototype._refreshDataProvider=function(e,t){this._dataProvider.setSorting(this.sortingObj.getCurrentSortingArray()),this._dataProvider.setFiltering(this.filteringObj.getFilter()),this._dataProvider.getPaging&&this._dataProvider.getPaging()&&this._dataProvider.getPaging().setPagingSize&&this._dataProvider.getPaging().setPagingSize(this.pagingObj.getPageSize()),this._initialPageNumber>1&&(this.pagingObj.setPageFirstIndex(this._initialPageNumber),this.pagingObj.setPageLastIndex(this._initialPageNumber),this._exactPageNumberToBeLoaded=this._initialPageNumber,this._dataProviderRetrieveAction=6,this._initialPageNumber=-1);var r=t.refreshCustomDataProviderAction(this.previousOwnProps.id,this.previousOwnProps.controlId,this.propKey,this._retrieveDataProviderRetrieveAction()),i=this.getCurrentViewId(this.previousDataSetDefinition),a=new Array;return a.push(r),i&&a.push(this.retrieveCurrentViewAndAssoicatedAttributes(e,t)),Promise.all(a)},e.prototype.refreshDataSet=function(e,t,r){var a=this,n=e(),s=this.previousOwnProps&&this.previousOwnProps.configuration?Object(B.b)(n,this.previousOwnProps.configuration.CustomControlId)||Object(B.b)(e(),this.previousOwnProps.configuration.Name):G.a,u=this.previousOwnProps?Object(T.l)(e(),this.previousOwnProps.id):"",c=G.a+".Models.DataSet.DataSetObjectWrapper.refreshDataSet",d=this.retrieveQuickFindView(e,t);if(!this.previousDataSetDefinition){var p=new Error("Refreshing not initialized DataSet parameter"),h=this._getTelemetryParams(c);throw r.EventManager.ReportComponentFailure(s,p,null,h),p}return this._queryBuilderForPaging?(this.cachedQueryState=this._queryBuilderForPaging.getQueryState(Object(fe.e)(n)?e:void 0),this.cachedQueryBuilder=this._queryBuilderForPaging,this._queryBuilderForPaging=null,t.retrieveGridDataAction(this.cachedQueryState).then((function(){return a.updateRefreshStatusToRequestBack(),a}),(function(i){var n=a._getTelemetryParams(c+".retrieveGridDataAction",u);return r.EventManager.ReportComponentFailure(s,i,null,n),a.handleRefreshError(e,a,i,t),a}))):(this._additionalColumns&&this._additionalColumns.length>0&&(this.extendFilteringObjColumnAliasMap(this._additionalColumns),this.extendSortingObjColumnAliasMap(this._additionalColumns)),this.sortingObj.updateSortingArrays(),this.filteringObj.getFilter()&&this.filteringObj.calculateFilterExpression(),this.dataFirstTimeSentAcknowledged=!0,this._dataProvider?this._refreshDataProvider(e,t).catch((function(i){var n=a._getTelemetryParams(c+"._refreshDataProvider",u);return r.EventManager.ReportComponentFailure(s,i,null,n),a.handleRefreshError(e,a,i,t),a})):(this._boundViewParams?this.retrieveCurrentBoundView(e,t.addCustomViewAction):this.retrieveCurrentView(e,t.retrieveViewAction)).then((function(n){var p=new Array;if(null==n||n.initialized!==y.a.Initialized)return B.a.error(c+": retrieveView, can not retrieve view's metadata",a._getTelemetryParams(c)),Promise.reject(new P.a("Can not retrieve view's metadata",2415919120));a.linkedEntityParsed||a._parselinkedEntitiesFromViewDescriptor(n);var h=a.getColumnsThatRequireMetadataToBeLoaded(n,e()),m=Object(w.i)(e(),n,a.getRelationshipNameFromParameter(a.previousDataSetDefinition));for(var g in m&&!o.c(n.entityLogicalName)&&(o.c(h[n.entityLogicalName])&&(h[n.entityLogicalName]=[]),h[n.entityLogicalName].push(m)),h)Object(l.z)(e(),g,h[g])||p.push(t.getEntityMetadataAction(g,h[g]));var O=Object(l.u)();return O.length>0&&p.push(t.getAdditionalResourceStrings(O)),d&&p.push(d),n.isCustomView&&Object(ne.w)(e())&&(Object.isFrozen(n)&&(n=Object(i.__assign)({},n)),p.push(t.setOfflineQueryAction(n))),Promise.all(p).then((function(){var i,o,l;a.isColumnFirstMetadataReady=!0,a.updatePagingSizeFromViewIfNeeded(n,Object(f.h)(e()));var d=Promise.resolve(),p=a.createQueryBuilder(e,n);return p instanceof b.a?(a.cachedQueryBuilder=p,a.cachedQueryState=a.cachedQueryBuilder.getQueryState(),d=a._extractErrorMessagesIfNeeded(a.cachedQueryBuilder,t,e)):(a.cachedQueryState=p,a.cachedQueryState.entityLogicalName=n.entityLogicalName,a.cachedQueryBuilder=ue.a.fromState(a.cachedQueryState)),a._initialPageNumber<=1?a.pagingObj.reset():(a.cachedQueryBuilder.pageNumber=a._initialPageNumber,a.cachedQueryState.pageNumber=a._initialPageNumber,a._initialPageNumber=-1),1===a.firstDataRequestType&&a.dataRequestedByControlInitialization&&(a.dataRequestedByControlInitialization=!1,Object(v.o)(e(),a.cachedQueryBuilder.getKey())===y.a.Initialized||!a._initialDataSetFetchEnabled)?(a.updateRefreshStatusToRequestBack(),d.then((function(){return a}))):(Object(he.c)(a.cachedQueryState,null===(i=a.contextToken)||void 0===i?void 0:i.contextTokenType,null===(l=null===(o=a.previousOwnProps)||void 0===o?void 0:o.configuration)||void 0===l?void 0:l.CustomControlId),d.then((function(){return t.retrieveGridDataAction(a.cachedQueryState).then((function(){return a.updateRefreshStatusToRequestBack(),a}),(function(i){var n=a._getTelemetryParams(c+".retrieveGridDataAction",u);return r.EventManager.ReportComponentFailure(s,i,null,n),a.handleRefreshError(e,a,i,t),a}))})))}))})).catch((function(i){var n=a._getTelemetryParams(c+".viewRetrievePromise",u);return r.EventManager.ReportComponentFailure(s,i,null,n),a.handleRefreshError(e,a,i,t),a})))},e.prototype.retrieveQuickFindView=function(e,t){var r,i=this,a=e(),n=this.previousOwnProps?this.previousOwnProps.id:null;return this.previousOwnProps&&(r=Object(N.C)(a,n,this.contextToken)),this.shouldUseQuickFindViewForLookup(a)&&!o.b(this.lookupFilterString)||r&&r.quickFind?t.retrieveViewAction(this.targetEntity||this.entityLogicalNameFromView||this.getEntityTypeName(),_.a.QUICKFIND_SEARCH,_.b.savedview).then((function(t){i._quickFindView=Object(N.qb)(e(),t,n)})):null},e.prototype._extractErrorMessagesIfNeeded=function(e,t,r){if(!(this.previousOwnProps&&this.previousOwnProps.configuration&&this.previousOwnProps.configuration.CustomControlId===me&&e&&e.containsError()))return Promise.resolve();var i=e.getErrors().filter((function(e){return!!e.message})).map((function(e){return e.message}));if(t.getAdditionalResourceStrings&&"function"==typeof r){var a=Object(z.e)(r(),i);if(Object.values(a).some((function(e){return!e})))return t.getAdditionalResourceStrings(i)}return Promise.resolve()},e.prototype._isInitialDataSetFetchEnabled=function(e){if(this.previousOwnProps&&this.previousOwnProps.configuration){var t=Object(x.e)(e,this.previousOwnProps.configuration.CustomControlId)||Object(x.e)(e,this.previousOwnProps.configuration.Name);if(!(o.c(t)||o.c(t.Properties.DataSetDefinitions)||o.c(t.Properties.DataSetDefinitions[this.propKey])||o.c(t.Properties.DataSetDefinitions[this.propKey].InitialDataSetFetch)))return t.Properties.DataSetDefinitions[this.propKey].InitialDataSetFetch}return!0},e.prototype.getColumnsThatRequireMetadataToBeLoaded=function(e,t){var r=this,i=this._getAllColumns(e,this.previousDataSetDefinition,t,!0),a={},n=new Set,s=this.previousDataSetDefinition;return o.c(s)||o.c(s.Columns)||s.Columns.forEach((function(e){!o.c(e.PreventMetadataRequest)&&e.PreventMetadataRequest&&n.add(e.Name)})),i.forEach((function(t){if(n.has(t));else if(-1!==t.indexOf(".")){var i,s=r.linkedEntitiesObj.getLinkedEntities();if(s&&s.length>0&&s.forEach((function(e){e.alias===t.split(".")[0]&&(i=e.name)})),!o.c(i)){var u=t.split(".")[1];r._addColumnsToColumnDictionary(a,i,u)}}else r._addColumnsToColumnDictionary(a,e.entityLogicalName,t)})),this.linkedEntitiesObj.getLinkedEntities().forEach((function(t){var i=t.name,n=t.from;(null==e?void 0:e.entityLogicalName)&&i&&n&&r._addColumnsToColumnDictionary(a,i,n);var o=t.to;(null==e?void 0:e.entityLogicalName)&&i&&o&&r._addColumnsToColumnDictionary(a,e.entityLogicalName,o)})),a},e.prototype._addColumnsToColumnDictionary=function(e,t,r){o.c(e[t])&&(e[t]=[]),-1===e[t].indexOf(r)&&e[t].push(r)},e.prototype.updateRefreshStatusToRequestBack=function(){this.refreshingStatus=4,this.previousOwnProps&&this.previousOwnProps.reRunMapStateMainProps&&(0===this.dataSetClass?this.previousOwnProps.reRunMapStateMainProps():2!==this.dataSetClass&&3!==this.dataSetClass||this._scheduleForceMapStateToProps(this.previousOwnProps.reRunMapStateMainProps))},e.prototype.setErrorStatus=function(e,t,r){var i;this.refreshingStatus=100,this.errorMessage=e,this.innerError=null===(i=null==r?void 0:r.innerError)||void 0===i?void 0:i.message,this.error=!0;var a=this.getLatestData();a&&(a.loading=!1,this.previousDataSetParameter.loading=!1,a.error=this.error,this.previousDataSetParameter.error=this.error,a.errorMessage=this.errorMessage,this.previousDataSetParameter.errorMessage=this.errorMessage,a.innerError=this.innerError,this.previousDataSetParameter.innerError=this.innerError),this.reRenderControlAction&&this.reRenderControlAction(),this.triggerOnDataSetUpdateCallBack(this.error,this.errorMessage,this.innerError)},e.prototype.setControlReRender=function(e){this.reRenderControlAction=e},e.prototype.handleRefreshError=function(e,t,r,i){var a;r&&r.reason?a=r.reason:r&&(a=r),a?this._retrieveLocalizedMessageAndSetErrorStatus(e,t,a,i):t.setErrorStatus("")},e.prototype._retrieveLocalizedMessageAndSetErrorStatus=function(e,t,r,i){i.getLocalizedErrorMessage(r,this.previousOwnProps&&this.previousOwnProps.configuration&&this.previousOwnProps.configuration.CustomControlId).then((function(i){t.setErrorStatus(i,e,r)}))},e.prototype.gridRunOnLoad=function(e){if(this._needToRunLoad&&this.previousOwnProps){this._needToRunLoad=!1;try{e(this.previousOwnProps.id,void 0,this.previousOwnProps.controlId)}catch(e){B.a.error(G.a+".Models.DataSet.DataSetObjectWrapper.gridRunOnLoad: gridRunOnLoad encountered error: "+e.message,[{name:"APIName",value:G.a+".Models.DataSet.DataSetObjectWrapper.gridRunOnLoad"}])}}},e.prototype.loadNextPage=function(e){this._dataProvider&&this._dataProvider.getPaging&&this._dataProvider.getPaging()&&this._dataProvider.getPaging().loadNextPage&&(this._dataProviderRetrieveAction=2),this.loadSpecificPage(e,this.pagingObj.getHasNextPage(),this.pagingObj.getPageLastIndex()+1)},e.prototype.loadExactPage=function(e,t){this._dataProvider&&this._dataProvider.getPaging&&this._dataProvider.getPaging()&&this._dataProvider.getPaging().loadNextPage&&(this._dataProviderRetrieveAction=6);var r=t||this.pagingObj.getPageFirstIndex();this.loadSpecificPage(e,!0,r,!0)},e.prototype.loadPreviousPage=function(e){this._dataProvider&&this._dataProvider.getPaging&&this._dataProvider.getPaging()&&this._dataProvider.getPaging().loadPreviousPage&&(this._dataProviderRetrieveAction=3),this.loadSpecificPage(e,this.pagingObj.getHasPreviousPage(),this.pagingObj.getPageFirstIndex()-1)},e.prototype.resetPaging=function(e){this._dataProvider&&this._dataProvider.getPaging&&this._dataProvider.getPaging()&&this._dataProvider.getPaging().reset&&(this._dataProviderRetrieveAction=5);var t=1!==this.pagingObj.getPageFirstIndex();this.pagingObj.reset(),this.loadSpecificPage(e,t,1)},e.prototype._updatePagingObject=function(e,t){e?(this.pagingObj.setPageLastIndex(t),this.pagingObj.setPageFirstIndex(t),this._exactPageNumberToBeLoaded=t):t-this.pagingObj.getPageLastIndex()==1?this.pagingObj.setPageLastIndex(t):this.pagingObj.getPageFirstIndex()-t==1&&this.pagingObj.setPageFirstIndex(t)},e.prototype.loadSpecificPage=function(e,t,r,i){if(t){if(this._dataProvider&&0!==this._dataProviderRetrieveAction)return this._updatePagingObject(i,r),void e(this,this.contextToken);var a=this.cachedQueryBuilder;this.pagingObj.getPageSize()!==a.pageSize?(this.pagingObj.reset(),a.pageSize=this.pagingObj.getPageSize(),this.cachedQueryState=a.getQueryState(),r=1):this._updatePagingObject(i,r),a.pageNumber=r,this._queryBuilderForPaging=a,e(this,this.contextToken)}},e.prototype.generateNewDatasetParam=function(e,t,r,i,a,n,o,s){var u=this.getEntityTypeName()||this.targetEntity;return new O.a({loading:e,columns:t,error:r,errorMessage:i,innerError:a,sortedRecordIds:Object.keys(n),records:n,sorting:this.sortingObj.retrieveDataSetSorting(),filtering:this.filteringObj.retrieveDataSetFiltering(),paging:this.pagingObj.retrieveDataSetPaging(),linking:this.linkedEntitiesObj.retrieveDataSetLinking()},o,s,u,this.addColumn)},e.prototype.generateEmptyDataSetParam=function(e){void 0===e&&(e="");var t=this.shouldUseLookupService()&&this.lookupView?this.lookupView.viewId:this.getCurrentViewId(this.previousDataSetDefinition),r=a.a.toString(t);if(!this.previousEmptyParameter||r!==this.previousEmptyParameter.getViewId()||this.columnsForEmptyDataset&&this.previousEmptyParameter.columns.length!==this.columnsForEmptyDataset.length){var i=null!==t||null!==this._dataProvider;this.columnsForEmptyDataset&&(this.setFilteringObjColumnAliasMap(this.columnsForEmptyDataset),this.setSortingObjColumnAliasMap(this.columnsForEmptyDataset));var n=void 0,o=void 0,s=void 0;100===this.refreshingStatus&&this.previousDataSetParameter&&this.previousDataSetParameter.error&&(n=this.previousDataSetParameter.error,o=this.previousDataSetParameter.errorMessage,s=this.previousDataSetParameter.innerError),this.previousEmptyParameter=this.generateNewDatasetParam(i,this.columnsForEmptyDataset?this.columnsForEmptyDataset:[],!1,null,null,{},r,e),n&&(this.previousEmptyParameter.error=n,this.previousEmptyParameter.errorMessage=o,this.previousEmptyParameter.innerError=s,this.previousEmptyParameter.loading=!1),this.previousDataSetParameter=this.previousEmptyParameter}return this.previousEmptyParameter},e.prototype.isValidParameterConfiguration=function(e){return!!(e.ViewId||this._dataProvider||e.BoundViewParams)},e.prototype.addColumn=function(e,t){o.c(e)||this._additionalColumns.find((function(r,i,a){var n=r.name,o=r.alias;return n===e&&o===t}))||(this._additionalColumns.push({name:e,alias:t}),this._isColumnsetChanged=!0)},e.prototype.generateEmptyParam=function(){return this.generateEmptyDataSetParam()},e.prototype.getRecordSnapshotId=function(e,t,r,i){var a,n=this._getClosestParentWithContext(t),o=this.previousOwnProps.id;switch(Object(T.l)(e,o)){case R.a:var s=Object(L.f)(this.contextToken,i,r);a=Object(N.R)(e,o,s);break;default:if(n){s=Object(L.f)(this.contextToken,i,r);a=Object(N.R)(e,o,s)}else a=Object(D.ac)(e,o,this.contextToken)}return a},e.prototype._linkRecordToState=function(e,t,r){var i=this,s=this.previousOwnProps.id,u=r.getRecordId();r.getFormattedValue=function(e){var t,a;if(o.b(e))return null;o.b(r._columnAliasNameMap[e])||(e=r._columnAliasNameMap[e]);var s=null===(a=null===(t=i.previousDataSetParameter)||void 0===t?void 0:t.columns)||void 0===a?void 0:a.find((function(t){return t.name===e}));if(s&&(s.dataType===g.a.WholeLanguage||s.dataType===g.a.WholeTimeZone||s.dataType===g.a.WholeDuration))return r.reformatValue(e);var u=r._record.fields[e];return o.c(u)?null:Object(n.c)(u)};var c=r.getNamedReference().entityName,d=Object(L.f)(this.contextToken,new a.a(u,!0),c);r.isEditable=function(t){if(Object(W.b)(t)){var a=!i._isRecordDisabled(e,c,r);return Promise.resolve(a)}return Promise.resolve(i.getRecordFieldIsEditable(e,r,t))},r.isSecured=function(t){var i=Object(w.d)(e,r.getNamedReference().entityName);return i&&i[t]?Promise.resolve(i[t].IsSecured):Promise.resolve(!1)},r.isReadable=function(t){var i=Object(w.d)(e,r.getNamedReference().entityName);return i&&i[t]?Promise.resolve(i[t].IsValidForRead):Promise.resolve(!0)},r.getFieldRequiredLevel=function(t){return Promise.resolve(i.getRecordFieldRequiredLevel(e,r,t))},r.isValid=function(t){return!Object(N.J)(e,s,d,t)&&(!(r._record&&r._record.fields&&r._record.fields[t]&&r._record.fields[t].validationResult)||r._record.fields[t].validationResult.isValueValid)},r.getValidationError=function(t){var i=Object(N.J)(e,s,d,t);return i||(r._record&&r._record.fields&&r._record.fields[t]&&r._record.fields[t].validationResult?r._record.fields[t].validationResult.errorMessage:null)},r.reformatValue=function(t){var i=r.getValue(t);if(!Object(W.b)(i)){var a=Object(w.d)(e,r.getNamedReference().entityName);if((!a||!a[t])&&r._record&&r._record.fields&&r._record.fields[t]){var o=r._record.fields[t];Object(n.f)(o)&&(a=Object(w.d)(e,o.entityLogicalName),t=o.attributeLogicalName)}if(a&&a[t]||!r._record||!r._record.identifier||!r._record.identifier.etn||"activitypointer"!==r._record.identifier.etn||(a=Object(w.d)(e,"activitypointer")),a&&a[t]){var s=Object(l.u)(),u=Object(U.z)(e,a[t],null);return Object(U.x)(i,u,Object(z.e)(e,s))}}return""},r.getCurrencyDecimalPrecision=function(t){var i,n,s,u,l,c=Object(w.d)(e,r.getNamedReference().entityName);if(!c)return null;var d=c[t];if(!d||o.c(d.PrecisionSource))return null;var p=Object(V.x)(e);switch(d.PrecisionSource){case le.a.attribute:return d.Precision;case le.a.organization:return p.pricingDecimalPrecision;case le.a.currency:var h=null===(n=null===(i=r._record)||void 0===i?void 0:i.fields)||void 0===n?void 0:n[ce.w],m=a.a.toString(null===(s=null==h?void 0:h.reference)||void 0===s?void 0:s.id);return m&&(null===(u=p.transactionCurrencyById)||void 0===u?void 0:u.hasOwnProperty(m))?p.transactionCurrencyById[m].currencyPrecision:null===(l=Object(f.w)(e).numberFormatInfo)||void 0===l?void 0:l.CurrencyDecimalDigits}return null}},e.prototype._isRecordDisabled=function(e,t,r){return t!==q.tb&&(t===q.p||Object(D.Lb)(e,t,new a.a(r.getRecordId())))},e.prototype.getRecordFieldRequiredLevel=function(e,t,r){var i=this.previousOwnProps.id,n=t.getRecordId(),o=t.getNamedReference().entityName,s=Object(L.f)(this.contextToken,new a.a(n,!0),o);return Object(N.M)(e,i,s,r)},e.prototype.getRecordFieldIsEditable=function(e,t,r){if("statuscode"===r||"statecode"===r)return!1;var i=this.previousOwnProps.id,n=t.getRecordId(),o=t.getNamedReference().entityName,s=Object(L.f)(this.contextToken,new a.a(n,!0),o);return Object(N.K)(e,i,s,r,a.a.tryParseOrNull(n))},e.prototype.getListRecordData=function(e,t,r){var n,o=r.Parameters[this.propKey];if(this.shouldUseLookupService(e)){var s=Object(J.b)(r,this.propKey);n=Object(Q.b)(e,this.pageEtn,s,this.targetEntity||this.entityLogicalNameFromView,t.id),this.previousInitState=Object(Q.d)(e,n)}else n=this._getQueryKey((function(){return e}),t,o),this.previousInitState=Object(v.o)(e,n);if(this.previousInitState!==y.a.Initialized)return 1!==this.refreshingStatus||this.previousInitState!==y.a.Initializing&&this.previousInitState!==y.a.Refreshing||(this.refreshingStatus=2),null;if(2===this.refreshingStatus&&(this.refreshingStatus=3),1===this.refreshingStatus)return null;if(2===this.refreshingStatus)return null;var c=this.getRecordsListFromStateWithSnapshots(e,t,r);this.clearCurrentSnapshotIdMap();for(var d={},p={},h=0;h<c.length;h++){var f=c[h].identifier.id,m=a.a.toString(f),g=c[h].identifier.etn,b=this.getRecordSnapshotId(e,t,g,f);b&&(d[m]=b,p[b]=p[b]||Object(S.b)(e,b))}Object.assign(this._snapShotIdMap,d);var O=!!Object.keys(d).length;if(this._previousDataSetRecords&&!O&&n===this._previousQueryKey&&!this.shouldUseLookupService(e)&&4!==this.refreshingStatus)return this._previousDataSetRecords;var _=this._previousQueryKey!==n;(this._previousQueryKey=n,this.previousDataSetParameter)?Object(l.A)(this.previousRecords,this.previousDataSetParameter.sortedRecordIds,c)&&(this.setLegacyUpdatedPropertiesDic(ge,!0),this.setUpdatedPropertiesDic(ge,!0)):c&&c.length>0&&(this.setLegacyUpdatedPropertiesDic(ge,!0),this.setUpdatedPropertiesDic(ge,!0));var P=Object(l.d)(this.previousRecords,c),w=Object(l.b)(this.previousDataSetDefinition,o);if(P||w){var I={},j={},C=this.getAliasMap(o);for(h=0;h<c.length;h++){var D=c[h],E=(m=a.a.toString(D.identifier.id),g=D.identifier.etn,Object(A.h)(e,g).PrimaryNameAttribute),T=!1;if(this.isEditableGrid(e)&&d[m]){var N=p[d[m]]||Object(S.b)(e,d[m]);(N.activeChanges&&Object.keys(N.activeChanges).length||N.lockedChanges&&Object.keys(N.lockedChanges).length)&&(T=!0)}I[m]=D,j[m]=new u(D,C,E,T)}for(var m in P&&(this.previousRecords=Object(i.__assign)({},I)),w&&(this.previousDataSetDefinition=Object(i.__assign)({},o)),this._needToRunLoad=!0,this.setUpdatedPropertiesDic(ge,!0),this._previousDataSetRecords=Object(i.__assign)({},j),this._previousDataSetRecords){var F=this._previousDataSetRecords[m];this._linkRecordToState(e,t,F)}this.triggerOnDataSetUpdateCallBack(!1,"")}else(_||4===this.refreshingStatus)&&this.triggerOnDataSetUpdateCallBack(!1,"");return this._previousDataSetRecords},e.prototype.getRecordsListById=function(e,t,r){var i={};if(this.previousInitState!==y.a.Initialized)return i;for(var n=this.getRecordsListFromStateWithSnapshots(e,t,r),o=0;o<n.length;o++){var s=n[o];i[a.a.toString(s.identifier.id)]=s}return i},e.prototype.getRecordsListFromStateWithSnapshots=function(e,t,r){var i=r.Parameters[this.propKey],n=this.getRecordsList(e,t,i);this.clearCurrentSnapshotIdMap();for(var o={},s={},u=0;u<n.length;u++){var l=n[u].identifier.id,c=a.a.toString(l),d=n[u].identifier.etn,p=this.getRecordSnapshotId(e,t,d,l);p&&(o[c]=p,s[p]=s[p]||Object(S.b)(e,p))}return Object.assign(this._snapShotIdMap,o),!!Object.keys(o).length&&Object.keys(o).forEach((function(t){var r=n.findIndex((function(e){return e.identifier.id.guid===t})),i=n[r],u=o[t];(k.a.equals(s[u].identifier,i.identifier)||"activitypointer"===i.identifier.etn&&s[u].identifier&&i.identifier&&a.a.equals(s[u].identifier.id,i.identifier.id))&&(n[r]=Object(S.h)(e,o[t],i,i.identifier,Object.keys(i.fields)))})),n},e.prototype.getAliasMap=function(e){var t={};return e.Columns&&e.Columns.forEach((function(e){t[e.Alias]=e.Name})),t},e.prototype.setFilteringObjColumnAliasMap=function(e){e?this.filteringObj.setColumnAliasMapWithColumns(this._generateColumnAliasMapWithColumns(e)):this.filteringObj.setColumnAliasMapWithColumns(null)},e.prototype.extendFilteringObjColumnAliasMap=function(e){e&&e.length>0&&this.filteringObj.extendColumnAliasMapWithColumns(this._generateColumnAliasMapWithColumns(e))},e.prototype.setSortingObjColumnAliasMap=function(e){e?this.sortingObj.setColumnAliasMap(this._generateColumnAliasMapWithColumns(e)):this.sortingObj.setColumnAliasMap(null)},e.prototype.extendSortingObjColumnAliasMap=function(e){e&&e.length>0&&this.sortingObj.extendColumnAliasMap(this._generateColumnAliasMapWithColumns(e))},e.prototype.retrieveView=function(e,t){var r=this.getEntityTypeName();if(!r){var i=G.a+"Models.DataSet.DataSetObjectWrapper.retrieveView";return B.a.error(i+": retrieveView, Entity name is not specified for lookup",this._getTelemetryParams(i)),Promise.reject(new P.a("Entity name is not specified for lookup"))}return t(r,null,_.b.savedview,e)},e.prototype.ensureDataInitialization=function(e){this.dataRequestedOnce||this.previousInitState===y.a.Initialized&&2===this.firstDataRequestType?this.previousInitState===y.a.Initialized&&2===this.firstDataRequestType&&(this.dataFirstTimeSentAcknowledged=!0):e.refreshDataSetParameter(this,this.contextToken),this.dataRequestedOnce=!0},e.prototype.triggerOnDataSetUpdateCallBack=function(e,t,r){if(void 0===r&&(r=""),this.previousDataSetDefinition&&this.previousDataSetDefinition.onDataSetUpdate)if(this.cachedQueryState||this._dataProvider){var i="";this.filteringObj&&!o.c(this.filteringObj.getConvertedFilter())&&(i=Object(I.b)(this.filteringObj.getConvertedFilter()));var a=this.pagingObj.retrieveDataSetPaging();a.firstPageNumber=this.pagingObj.getPageFirstIndex(),a.lastPageNumber=this.pagingObj.getPageLastIndex();var n={fetchXmlInUse:o.c(this.cachedQueryState)?null:this.cachedQueryState.fetchXml,newQueryKey:o.c(this.cachedQueryState)?null:this.cachedQueryState.key,existedFilteringString:i,existedPagingString:Object(I.b)(a),error:e,errorMessage:t,innerError:r,existedValidSortingArrayString:Object(I.b)(this.sortingObj.getValidSortingArray())};this.previousDataSetDefinition.onDataSetUpdate(n)}else if(this.error){n={error:e,errorMessage:t,innerError:r};this.previousDataSetDefinition.onDataSetUpdate(n)}},e.prototype._getViewColumns=function(e,t){if(!this._memoizedViewColumnsInfo||this._memoizedViewColumnsInfo.memoizedViewId!==(e&&e.viewId)){var r=[],i=e&&e.grid&&e.grid.rows&&e.grid.rows[0]?e.grid.rows[0].cells:null;if(i){for(var a in i)!i.hasOwnProperty(a)||t&&i[a].disableMetaDataBinding||r.push(i[a].name);if(e.fetchXML){var n=Object(pe.b)(e.fetchXML),o=Object(de.m)(n);if(o)for(var s=0,u=o;s<u.length;s++){var l=u[s];-1===r.indexOf(l)&&r.push(l)}}}else if(this.shouldUseLookupService()&&this.lookupView)for(var c in this.lookupView.columns)r.push(this.lookupView.columns[c].logicalName);this._memoizedViewColumnsInfo={memoizedViewId:e&&e.viewId,memoizedValue:r}}return this._memoizedViewColumnsInfo.memoizedValue},e.prototype._getAdditionalColumns=function(e,t,r){if(this._isColumnsetChanged||!this._memoizedAdditionalColumnsInfo||this._memoizedAdditionalColumnsInfo.memoizedViewId!==e.viewId){var i=[],a=this._getViewColumns(e);for(var n in t.Columns){var s=t.Columns[n].Name;s&&-1===a.indexOf(s)&&-1===i.indexOf(s)&&i.push(s)}var u=[];this._additionalColumns.forEach((function(e){var t=e.name,r=e.alias,n=o.c(r)?t:r+"."+t;-1===i.indexOf(n)&&-1===a.indexOf(n)&&u.push(n)})),i=i.concat(u),(e?this._getMandatoryColumnNames(r,e.entityLogicalName):[]).forEach((function(e){-1===i.indexOf(e)&&-1===a.indexOf(e)&&i.push(e)})),this._memoizedAdditionalColumnsInfo={memoizedViewId:e.viewId,memoizedValue:i}}return this._memoizedAdditionalColumnsInfo.memoizedValue},e.prototype._getAllColumns=function(e,t,r,i){if(this._isColumnsetChanged||!this._memoizedAllColumnsInfo||this._memoizedAllColumnsInfo.memoizedViewId!==e.viewId){var a=this._getViewColumns(e,i).concat(this._getAdditionalColumns(e,t,r)),n=e&&e.grid&&e.grid.rows&&e.grid.rows[0]?e.grid.rows[0].multiObjectIdField:null;n&&-1===a.indexOf(n)&&a.push(n),this._memoizedAllColumnsInfo={memoizedViewId:e.viewId,memoizedValue:a},this._isColumnsetChanged=!1}return this._memoizedAllColumnsInfo.memoizedValue},e.prototype.getRecordsList=function(e,t,r){var i,a;if(this.shouldUseLookupService()&&this.lookupView&&this.lookupView.viewId&&(this.lookupView.viewId.guid===r.ViewId||!r.ViewId)){a=[];for(var n=0,o=this.lookupView.columns;n<o.length;n++){var s=o[n];a.push(s.logicalName)}}else{var u=Object(N.qb)(e,this.getCurrentViewId(r),t.id);u&&(a=this._getAllColumns(u,r,e))}var l=this._getPageNumberQueue(),c=[];l.length>0&&1!==l[0]?this.pagingObj.setHasPreviousPage(!0):this.pagingObj.setHasPreviousPage(!1);for(var d=0;d<l.length;d++){var p=void 0;if(this.shouldUseLookupService()){var h=Object(J.b)(t.configuration,this.propKey);i=Object(Q.b)(e,this.pageEtn,h,this.targetEntity||this.entityLogicalNameFromView,t.id),p=Object(Q.e)(e,i,l[d],a)}else i=this._getQueryKey((function(){return e}),t,r),p=Object(v.q)(e,i,l[d],a);if(p&&p.length>0){if(c.push.apply(c,p),d===l.length-1){var f=Object(v.n)(e,i).pages[l[d]];this.pagingObj.setHasNextPage(f.moreRecords)}}else d>0?this.pagingObj.setPageLastIndex(l[d]):this.pagingObj.setPageLastIndex(1),this.pagingObj.setHasNextPage(!1)}return this.pagingObj.setTotalResultCount(Object(v.s)(e,i)),c},e.prototype._generateColumnAliasMapWithColumns=function(e){for(var t={},r=0,i=e;r<i.length;r++){var a=i[r];a.alias&&a.name?(t[a.name]=a.name,t[a.alias]=a.name):!a.alias&&a.name&&(t[a.name]=a.name)}return t},e.prototype._getQueryKey=function(e,t,r){return this._getQueryBuilder(e,t,r).getKey()},e.prototype._getQueryBuilder=function(e,t,r){if(!this.cachedQueryState){var i=Object(N.qb)(e(),this.getCurrentViewId(r),t.id),a=this.createQueryBuilder(e,i);a instanceof b.a?(this.cachedQueryBuilder=a,this.cachedQueryState=this.cachedQueryBuilder.getQueryState()):(this.cachedQueryState=a,this.cachedQueryBuilder=ue.a.fromState(this.cachedQueryState))}return this.cachedQueryBuilder},e.prototype._getPageNumberQueue=function(){var e=[];if(this.shouldUseLookupService()||this.cachedQueryState)for(var t=this.pagingObj.getPageFirstIndex();t<this.pagingObj.getPageLastIndex()+1;t++)e.push(t);else e.push(1);return e},e.prototype._getTelemetryParams=function(e,t){var r=[],i={name:"pageType",value:t},a={name:"CustomControlId",value:this.previousOwnProps&&this.previousOwnProps.configuration?this.previousOwnProps.configuration.CustomControlId:""},n={name:"controlId",value:this.previousOwnProps?this.previousOwnProps.controlId:""},o={name:"APIName",value:e},s={name:"EntityName",value:this.previousOwnProps&&this.previousOwnProps.formInfo&&this.previousOwnProps.formInfo.EntityName?this.previousOwnProps.formInfo.EntityName:null},u={name:"FormId",value:this.previousOwnProps&&this.previousOwnProps.formInfo&&this.previousOwnProps.formInfo.FormId?this.previousOwnProps.formInfo.FormId:null},l={name:"contextString",value:this.previousOwnProps?this.previousOwnProps.contextString:""};return r.push(i),r.push(a),r.push(o),r.push(s),r.push(u),r.push(n),r.push(l),r},e.prototype.getEntityTypeName=function(){var e;return this.previousDataSetDefinition&&this.previousDataSetDefinition.TargetEntityType?e=this.previousDataSetDefinition.TargetEntityType:this.entityLogicalNameFromView?e=this.entityLogicalNameFromView:this.previousDataSetDefinition&&this.previousDataSetDefinition.EntityName&&(e=this.previousDataSetDefinition.EntityName),e},e.prototype.getAttribute=function(e,t,r){var i=e.Parameters[this.propKey];return 3===i.Usage?i.Attributes:Object(w.a)(t,r,i.Value)},e.prototype.isEditableGrid=function(e){if(!this.previousOwnProps||!this.previousOwnProps.configuration)return!1;var t=Object(x.e)(e,this.previousOwnProps.configuration.CustomControlId)||Object(x.e)(e,this.previousOwnProps.configuration.Name);if(!t||"MscrmControls.Grid.GridControl"!==t.ConstructorName)return!1;if(this.previousOwnProps.configuration.Parameters&&this.previousOwnProps.configuration.Parameters.EnableEditing){var r=this.previousOwnProps.configuration.Parameters.EnableEditing;if(r.Value&&"No"===r.Value)return!1}return!0},e.prototype.getViewIdDocumentDic=function(){return this.viewIdDocumentDic},e.prototype.parseLookupColumnsToDataSetColumns=function(e){for(var t=[],r=0;r<e.length;r++)t.push({name:e[r].logicalName,displayName:e[r].logicalName,order:r,dataType:"String"===e[r].dataType?"SingleLine."+e[r].format.charAt(0).toUpperCase()+e[r].format.slice(1):e[r].dataType,alias:e[r].alias||e[r].logicalName,visualSizeFactor:0});return t},e.prototype.parseLookupViewDescriptorToViewDescriptor=function(e){return{initialized:y.a.Initialized,viewId:new a.a(this.lookupViewId),fetchXML:this.lookupView.fetchXml,entityLogicalName:this.targetEntity||this.entityLogicalNameFromView,queryType:_.a.LOOKUP_VIEW,isUserView:!1,title:e.viewName}},e.prototype.shouldUseLookupService=function(e){if(e&&!Object(Z.b)(e)||!this.isOnlineStatus)return!1;if(Object(W.b)(this.lookupServiceEnabled)){if(!e)return!1;if(this._dataProvider)return this.lookupServiceEnabled=!1,this.lookupServiceEnabled;Object(W.b)(this.lookupServiceEnabled)&&(this.lookupServiceEnabled=Object(H.c)(e,K.mc))}var t=!1;return this.previousOwnProps&&this.previousOwnProps.configuration&&this.previousOwnProps.configuration.CustomControlId===me&&(t=!0),this.lookupServiceEnabled&&t},e.prototype.shouldUseQuickFindViewForLookup=function(e){Object(W.b)(this.lookupQuickFindEnabled)&&(this.lookupQuickFindEnabled=Object(H.c)(e,K.kc));var t=!1;return this.previousOwnProps&&this.previousOwnProps.configuration&&this.previousOwnProps.configuration.CustomControlId===me&&(t=!0),this.lookupQuickFindEnabled&&t},Object.defineProperty(e.prototype,"filteringObj",{get:function(){return this._filteringObj},set:function(e){this._filteringObj=e},enumerable:!1,configurable:!0}),e.prototype._scheduleForceMapStateToProps=function(e){var t=this;this._rerunMapStateToPropsTaskId>=0&&clearTimeout(this._rerunMapStateToPropsTaskId),this._rerunMapStateToPropsTaskId=setTimeout((function(){e(),t._rerunMapStateToPropsTaskId=-1}),50)},e.prototype._isCustomGrid=function(){var e;return(null===(e=this.contextToken)||void 0===e?void 0:e.contextTokenType)===M.a.CustomGrid},e.prototype.setMyRecordsOnlyFilter=function(e){this.meFilterEnabled=e},Object.defineProperty(e.prototype,"queryBuilder",{get:function(){return this.cachedQueryBuilder},enumerable:!1,configurable:!0}),e.prototype.relevantQueryError=function(){if(!(this.cachedQueryBuilder&&this.cachedQueryBuilder instanceof b.a&&this.cachedQueryBuilder.containsError()))return null;var e=this.cachedQueryBuilder.getFirstError();return!e||this.isOnlineStatus&&e.offlineModeSpecific?null:e},e._DATASET_LOOKUP_PROP_KEY="columnLookup",e.UnknownErrorMessage="Unknown error occurred.",e}()},"/eCp":function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i;r.d(t,"a",(function(){return i})),function(e){e[e.Active=1]="Active",e[e.Finished=2]="Finished",e[e.Aborted=3]="Aborted"}(i||(i={}))},"1Tfq":function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var i=r("12y7"),a=r("+D0h"),n=r("Ww2r"),o=r("mGpW"),s=r("UGbr"),u=r("Sscr"),l=r("HSdq"),c=r("F2uj"),d=r("sOTk"),p=r("QAhb"),h=r("feNe"),f=r("POQL"),m=r("qC0c"),g=r("cZkS");function v(e){return{type:"form.cancelInprogressFileImageUpload.async",execute:function(t){var r=t.dispatch,i=t.getState,a=Object(u.j)(i(),e),n=i(),o=Object(m.c)(n,g.Wb)&&Object(m.c)(n,g.nb),s=Object(m.c)(n,g.Yb)&&Object(m.c)(n,g.nb),v=Object(l.fb)(n,{id:e},a),b=o?Object(c.f)(n,v.EntityLogicalName,"file"):{},y=s?Object(c.f)(n,v.EntityLogicalName,"image"):{},O=Object.assign(b,y),_=Object(l.eb)(n,e,a),P=Object(d.g)(n,e);if(Object.keys(O).length>0)for(var S in _){var w=_[S].dataFieldName;if(O[w]&&P&&P.id&&w){var I=new p.a(v.EntityLogicalName,P.id,w);r(Object(h.b)(I,w,f.b.Cancelled))}}return Promise.resolve()}}}var b=r("CUpQ"),y=r("oVzJ");function O(e,t,r){var u=[{name:"message",value:t}];return{type:"show.unsaved.changes.dialog.async",execute:function(l,c,p){var h=l.dispatch,f=l.getState;return h(Object(o.e)(_)).then((function(){var o=c.TraceManager.getTracer("Forms.UnsavedChangesDialog"),l=Object(m.a)(f(),g.de),p=Object(y.b)(f()),O=function(e,t){var r=Object(m.a)(e,g.de),i=Object(y.b)(e),a=Object(d.m)(e,t),o=Object(n.e)(e,_);if(i)return a?{header:Object(n.c)(o,"UnSavedChanges_TitleUpdated"),message:Object(n.c)(o,"Discard_Message_Create")||"Are you sure you want to discard this new record?",ok:Object(n.c)(o,"Button_Label_Keep_Editing")||"Keep editing",cancel:Object(n.c)(o,b.b)}:{header:Object(n.c)(o,"UnSavedChanges_TitleUpdated"),message:Object(n.c)(o,"Discard_Message_Edit")||"Are you sure you want to discard your changes?",ok:Object(n.c)(o,"Button_Label_Keep_Editing")||"Keep editing",cancel:Object(n.c)(o,"Dialog_Button_DiscardChanges")};if(r)return{header:Object(n.c)(o,"UnSavedChanges_TitleUpdated"),message:Object(n.c)(o,"Web._forms.styles.FORM.crm.htc_TitleUpdated"),ok:Object(n.c)(o,"Button_Label_SaveContinue"),cancel:Object(n.c)(o,"Dialog_Button_DiscardChanges")};return{header:Object(n.c)(o,"UnSavedChanges_Title"),message:Object(n.c)(o,"Web._forms.styles.FORM.crm.htc_Title"),ok:Object(n.c)(o,"Dialog_Button_Ok"),cancel:Object(n.c)(o,"Button_Label_Cancel")}}(f(),e),P=O.header,S=O.message,w=O.ok,I=O.cancel,j=null!=t?t:S,C=null!=r?r:P;return u.push({name:"unsavedChangesDialogMessageLabel",value:j}),h(Object(i.a)(j,{allowNativeDialog:!0},C,e,"",w,I)).then((function(t){return 0===t.status?h(Object(a.a)(t.pageId)).then((function(t){if(t.value.confirmed){if(p)return!1;if(null!=e){if(l)return h(Object(s.e)(e,2)).then((function(){return!0})).catch((function(e){return!1}));o.info("Dispatched Cancellation for File/Image Inprogress Upload Due to discard changes",u),h(v(e))}return!0}return!("close"!==t.reason||!l)&&(null!=e&&(o.info("Dispatched Cancellation for File/Image Inprogress Upload due to discard changes",u),h(v(e))),!0)})):Promise.reject(t.error)}))}))},getFailureParameters:function(e,t){return u}}}var _=["UnSavedChanges_Title","UnSavedChanges_TitleUpdated","Web._forms.styles.FORM.crm.htc_Title","Web._forms.styles.FORM.crm.htc_TitleUpdated","Dialog_Button_Ok","Button_Label_SaveContinue","Button_Label_Cancel","Dialog_Button_DiscardChanges","UnSavedChangesWarning",b.b,"Button_Label_Continue","Button_Label_Keep_Editing","Discard_Message_Edit","Discard_Message_Create"]},"2nMH":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r("9r0m"),a=r("TCcM"),n=r("yZTI"),o=r("GHPx"),s=r("yHpA"),u=r("HSdq"),l=r("QAhb"),c=r("F2uj"),d=r("WS0f");function p(e,t,r,p,h){var f=[{name:"pageId",value:e}];return{type:"triggerdirtyonchangehandlers.async",execute:function(m,g,v){var b=m.dispatch,y=m.getState,O=y();if(!Object(n.n)(O,e)||Object(u.Eb)(y(),e)){var _=g.ScriptManager.getContainer(e).getEventManager();if(r||g.EventManager.ReportComponentFailure("Forms.TriggerDirtyOnChangeHandlers",new Error("Missing contextToken"),null,f),_){var P=function(e,t,r,n,p,h){var f=[];if(e&&t&&!Object(d.b)(r)&&!Object(d.b)(n)){var m=Object(a.h)(t,r,n),g=Object(u.ac)(e,p,h),v=m&&m.fields,b=new l.a(r,new i.a(n)),y=Object(c.d)(t,b.etn);for(var O in y){var _=y[O],P=Object(s.d)(e,g,b,_.LogicalName),S=v[_.LogicalName];Object(o.b)(P,S)&&f.push(_.LogicalName)}}return f}(t,O,p,i.a.toString(h),e,r);if(P)for(var S=0,w=P;S<w.length;S++){var I=w[S];b(_.runOnChange(r,I))}g.EventManager.ReportComponentSuccess("Forms.TriggerDirtyOnChangeHandlers",f)}else g.EventManager.ReportComponentFailure("Forms.TriggerDirtyOnChangeHandlers",new Error("Missing eventManager"),null,f)}else g.EventManager.ReportComponentSuccess("Forms.TriggerDirtyOnChangeHandlers",f);return Promise.resolve()},getFailureParameters:function(e,t){return f}}}},"3/Bp":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return n}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i="nf_serverValidationError",a="nf_formsyncerrornotificationId",n="nf_duplicateDetectionValidationError"},"3/zo":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i=function(){function e(){this.getLinkedEntities=this.getLinkedEntities.bind(this),this.addLinkedEntity=this.addLinkedEntity.bind(this),this.clear=this.clear.bind(this),this._linkedEntityExpressions=new Array}return e.prototype.retrieveDataSetLinking=function(){return{addLinkedEntity:this.addLinkedEntity.bind(this),getLinkedEntities:this.getLinkedEntities.bind(this)}},e.prototype.getLinkedEntities=function(){return this._linkedEntityExpressions},e.prototype.addLinkedEntity=function(e){this._linkedEntityExpressions.find((function(t){return t.name===e.name&&t.from===e.from&&t.to===e.to&&t.linkType===e.linkType&&t.alias===e.alias}))||this._linkedEntityExpressions.push(e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._linkedEntityExpressions.length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._linkedEntityExpressions=[]},e}()},"6q56":function(e,t,r){"use strict";r.d(t,"b",(function(){return w})),r.d(t,"d",(function(){return I})),r.d(t,"c",(function(){return j})),r.d(t,"a",(function(){return C})),r.d(t,"f",(function(){return N})),r.d(t,"e",(function(){return F})),r.d(t,"g",(function(){return D})),r.d(t,"i",(function(){return E})),r.d(t,"h",(function(){return R})),r.d(t,"j",(function(){return A}));var i=r("9r0m"),a=r("pOv+"),n=r("i8/j"),o=r("s2by"),s=r("U0B9"),u=r("2OIc"),l=r("z9yS"),c=r("r2h9"),d=r("EcZf"),p=r("hadW"),h=r("Gemh"),f=r("cZkS"),m=r("JlqV"),g=r("qC0c"),v=r("Sscr"),b=r("+l2M"),y=r("JECh"),O=r("HSdq"),_=r("7EJx"),P=r("CIm2"),S=p.a.guid.toUpperCase();function w(e,t,r,a,o){var s=Object(n.d)(e,r,t);if(!s)return{};var u=":"+i.a.toString(r),l={};for(var c in s){var d=s[c],p=a[d.ClassId.guid.toUpperCase()];if(p&&p(d))if(o){var h=o(d);if(Array.isArray(h))for(var f=0,m=h;f<m.length;f++){var g=m[f];l[g.name+u]=g.control}else l[d.Name+u]=h}else l[d.Name+u]=d}return l}function I(e,t,r,i,a,s,u,l){var c;void 0===s&&(s=!1),void 0===u&&(u=!1),void 0===l&&(l=!1);var p=Object(n.j)(e,r),h=Object(g.c)(e,f.y)&&Object(m.b)(e),b=Object(g.c)(e,f.z)&&Object(m.b)(e),O=function(t){return function(t){return h&&!s&&D(e,p,t,t.Parameters)}(t)||function(t){return b&&s&&D(e,p,t,t.Parameters)}(t)},I=function(e){return a&&e.ParentTabId===a&&(!s||s&&u)},j=function(e){return!l||!(e.Parameters&&e.Parameters.RelationshipName)},T=((c={})[S]=function(t){return j(t)&&I(t)&&R(e,p,t)},c[d.a]=function(e){return j(e)&&I(e)},c);return w(e,t,r,T,(function(t){var r=t.Parameters,a=O(t),n=E(e,p,t,r)||function(t){return!b&&s&&D(e,p,t,t.Parameters)}(t),u=Object(_.q)(e),l=Object(g.c)(e,f.Zc),c=Object(o.a)(r.TargetEntityType,u,i,l),d=null!==c?c.getFilterAndLinkedEntities(P.a,!0):null,h=n&&function(){return d};return{hasChart:a,chartType:a&&N(r),viewType:a&&F(r),getCustomFilter:n?h:null,hasGrid:n,gridType:0,ribbonContext:n&&y.u,recordsPerPage:n&&r.RecordsPerPage&&+r.RecordsPerPage,cardFormId:n&&C(e,p,t),contextToken:Object(v.p)(i,t.Name),control:t,controlParameters:r,entityLogicalName:r.TargetEntityType,viewId:r.ViewId}}))}function j(e,t,r,i){var a=function(e,t,r){var i,a=Object(n.j)(e,r);return w(e,t,r,((i={})[S]=function(t){return D(e,a,t,t.Parameters)},i[d.a]=function(t){return D(e,a,t,t.Parameters)},i))}(e,r,t),o={};for(var s in a){var u=a[s];o[s]=Object(v.p)(i,u.Name)}return o}function C(e,t,r){if(i.a.equals(r.ClassId,b.mb))return a.a;var n=Object(s.b)(e),o=t&&Object(u.a)(r,t,n);if(o&&o.Parameters&&o.Parameters.CardForm&&o.Parameters.CardForm.Value){var l=o.Parameters.CardForm.Value.split(":")[0];return i.a.tryParseOrNull(l)}}function D(e,t,r,i){if(i){var a=i.ChartGridMode;return i.VisualizationId&&("Chart"===a&&!R(e,t,r)||function(e,t,r){return T(e,t,r,"MscrmControls.Chart.ChartControl")}(e,t,r))}return!1}function E(e,t,r,i){return!!i&&("Chart"!==i.ChartGridMode&&(!R(e,t,r)||function(e,t,r){return T(e,t,r,"MscrmControls.Grid.ReadOnlyGrid","MscrmControls.MailApp.MailAppListControl","MscrmControls.AuditAssociatedGrid.AuditControl")}(e,t,r)))}function T(e,t,r){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var n=k(e,t,r);return n&&-1!==i.indexOf(n.Name)}function N(e){return e.IsUserChart&&"true"===e.IsUserChart?l.a.uservisualization:l.a.savedvisualization}function F(e){return e.IsUserView&&"true"===e.IsUserView?c.b.userview:c.b.savedview}function R(e,t,r){var i=k(e,t,r);return!!i&&!!Object(h.ab)(e,i.CustomControlId)}function A(e,t,r,i,a){var n={};return r.forEach((function(r){var o=Object(O.N)(e,r),s=I(e,t,r,i,o,!0,a);Object.assign(n,s)})),n}function k(e,t,r){var i=Object(s.b)(e);return Object(u.a)(r,t,i)}},"70DF":function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i;r.d(t,"a",(function(){return i})),function(e){e[e.DAY=0]="DAY",e[e.WEEK=1]="WEEK",e[e.MONTH=2]="MONTH",e[e.QUARTER=3]="QUARTER",e[e.YEAR=4]="YEAR",e[e.FISCAL_PERIOD=5]="FISCAL_PERIOD",e[e.FISCAL_YEAR=6]="FISCAL_YEAR"}(i||(i={}))},"7kKV":function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i;r.d(t,"a",(function(){return i})),function(e){e.success="success",e.crossEntity="crossEntity",e.beginning="beginning",e.end="end",e.invalid="invalid",e.dirtyForm="dirtyForm",e.stageGate="stageGate",e.invalidProcess="invalidProcess"}(i||(i={}))},"8Pwi":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var i=0;function a(e,t,r,i){return{attributeName:e,aliasName:t,entity:r,dateTimeGrouping:i||null,hasAggregate:!1,hasGroupBy:!1,aggregateType:null}}function n(e,t){return++i>65535&&(i=0),String.format("{0}_{1}{2}_{3}",e,i,t,(new Date).getTime())}},"8aRo":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var i=r("F2uj"),a=r("lMVv"),n=r("M6d0"),o=r("Ygmu"),s=r("Srej");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function u(e,t){var r=l(e,t,!0),a=Object(i.d)(e,t);return a&&Object.keys(a).forEach((function(e){var t=a[e];if(t.SourceType===o.a.Rollup){var i=t.LogicalName;!0===t.IsBaseCurrency&&(i=i.substring(0,i.length-5)),r.push(i+"_date"),r.push(i+"_state")}})),r}function l(e,t,r){var i=[],o=Object(a.h)(e,t);return o&&(o.HasStateCode&&i.push(n.u),o.PrimaryIdAttribute&&i.push(o.PrimaryIdAttribute),o.PrimaryImageAttribute&&i.push(Object(s.a)(o.PrimaryImageAttribute,null,null)),o.PrimaryNameAttribute&&(r&&o.PrimaryNameAttribute===n.j?i.push(n.j):r||i.push(o.PrimaryNameAttribute)),o.IsBPFEntity&&(i.push(n.r),i.push(n.x),i.push(n.a))),i}},"8xrh":function(e,t,r){"use strict";r.d(t,"A",(function(){return T})),r.d(t,"d",(function(){return N})),r.d(t,"b",(function(){return F})),r.d(t,"x",(function(){return R})),r.d(t,"c",(function(){return A})),r.d(t,"m",(function(){return k})),r.d(t,"r",(function(){return x})),r.d(t,"s",(function(){return V})),r.d(t,"e",(function(){return B})),r.d(t,"t",(function(){return U})),r.d(t,"p",(function(){return z})),r.d(t,"n",(function(){return W})),r.d(t,"g",(function(){return K})),r.d(t,"f",(function(){return X})),r.d(t,"i",(function(){return Y})),r.d(t,"h",(function(){return Z})),r.d(t,"o",(function(){return q})),r.d(t,"q",(function(){return G})),r.d(t,"B",(function(){return M})),r.d(t,"u",(function(){return te})),r.d(t,"j",(function(){return re})),r.d(t,"z",(function(){return ne})),r.d(t,"k",(function(){return ie})),r.d(t,"l",(function(){return ae})),r.d(t,"v",(function(){return oe})),r.d(t,"y",(function(){return se})),r.d(t,"w",(function(){return L})),r.d(t,"a",(function(){return E}));var i=r("c/eZ"),a=r("9r0m"),n=r("Gemh"),o=r("9rlF"),s=r("455M"),u=r("VcAV"),l=r("qC0c"),c=r("cZkS"),d=r("G7N+"),p=r("EpyZ"),h=r("EGsq"),f=r("7EJx"),m=r("jxko"),g=r("kl3Z"),v=r("QJO/"),b=r("F2uj"),y=r("lMVv"),O=r("WS0f"),_=r("QSLN"),P=r("Ww2r"),S=r("nVTU"),w=r("VnpK"),I=r("tIxw"),j=r("T2Xs"),C=r("jigW"),D="CustomControlFramework.Selectors.CustomControlDataSetSelectors",E={operator:"and",terms:[{operator:"eq-userid",terms:[{attributeName:"ownerid"}]}]};function T(e,t,r){if(!e)return!0;if(Object.keys(e).length!==r.length)return!0;if(t)for(var i=0;i<t.length;i++){var n=t[i],o=r[i];if(n!==a.a.toString(o.identifier.id))return!0}return!1}function N(e,t){var r,i;j.a.info(D+": areRecordsUpdated started");var n=!1,o=e;if(e)if(Object.keys(e).length!==t.length)n=!0;else for(var s=0;s<t.length;s++){var u=t[s],l=o[a.a.toString(u.identifier.id)];if((u&&!l||l.initialized!==u.initialized||l.identifier!==u.identifier)&&(n=!0),!n)for(var c in u.fields){var d=u.fields[c],p=l.fields[c];(!p&&d||(null===(r=null==d?void 0:d.timestamp)||void 0===r?void 0:r.getTime())!==(null===(i=null==p?void 0:p.timestamp)||void 0===i?void 0:i.getTime()))&&(n=!0)}if(n)break}else n=!0;return j.a.info(D+": areRecordsUpdated finished"),n}function F(e,t){j.a.info(D+": areColumnAliasMapUpdated started");var r=e,i=!1;if(e){if(r.Columns&&!t.Columns||!r.Columns&&t.Columns)i=!0;else if(r.Columns&&t.Columns)if(r.Columns.length!==t.Columns.length)i=!0;else for(var a=0;a<t.Columns.length;a++){for(var n=t.Columns[a].Alias,o=!0,s=0;s<r.Columns.length;s++)if(r.Columns[s].Alias===n){r.Columns[s].Name===t.Columns[a].Name?o=!1:i=!0;break}if(i||o){i=!0;break}}}else i=!0;return j.a.info(D+": areColumnAliasMapUpdated finished"),i}function R(e,t,r){var i;if(j.a.info(D+": getSortedColumnsOnView started"),!t||t.initialized!==d.a.Initialized)return[];var a=M(t,r);if(a){var n=a.getElementsByTagName("order");if(!n||0===n.length)return j.a.info(D+": getSortedColumnsOnView return []"),[];if(n.length>0){for(var o=[],s=0;s<n.length;s++){var u=n[s],l=Object(w.o)(u,"attribute"),c="";"link-entity"===(null===(i=null==u?void 0:u.parentNode)||void 0===i?void 0:i.nodeName)&&(c=u.parentNode.getAttribute("alias")?u.parentNode.getAttribute("alias")+".":"");var p=Object(w.o)(u,"descending");l&&o.push({name:c+l,sortDirection:p&&"TRUE"===p.toUpperCase()?1:0})}return j.a.info(D+": getSortedColumnsOnView finished"),o}}return j.a.info(D+": getSortedColumnsOnView finished and return []"),[]}function A(e,t){if(!e&&!t)return!0;if(!e&&t||!t&&e||e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(i.name!==a.name||i.sortDirection!==a.sortDirection)return!1}return!0}function k(e,t,r,a,o){void 0===a&&(a=null),j.a.info(D+": generateDataSetColumns started");var u=[],p=Object(h.x)(e),_=Object(f.w)(e),S=Object(h.g)(e),w=null;if(a&&a.initialized===d.a.Initialized){var I=Object(y.h)(e,a.entityLogicalName);I&&(w=I.PrimaryNameAttribute)}if(t.Type===s.a.Grid){var E=t;E.Columns&&E.Columns.forEach((function(t){if(a&&a.initialized===d.a.Initialized){var o=t.Name,s=Object(n.E)(e,a),l=s[o],c=l?l.DisplayName:"",p=o&&s&&s[o]&&s[o].Type?s[o].Type:"",h=o&&s&&s[o]&&s[o].Format?s[o].Format:"",f=Object(m.a)(p,h),g=Object(i.__assign)(Object(i.__assign)({},t),{DisplayName:c,DataType:f,Type:""===p?"string":p,Format:""===h?v.a.text:h});u.push(r(g,-1,-1,l))}else u.push(r(t,-1,-1,null))}));var T=u.find((function(e){return e.name===w}));T&&(T.isPrimary=!0)}if(t.Type===s.a.Grid||t.Type===s.a.LookupSimple){if(a&&a.initialized===d.a.Initialized){var N=Object(g.d)(a),F=0,R=M(a,o),A=R?R.getElementsByTagName("link-entity"):null,k=Object(n.E)(e,a);if(!k)return j.a.error(D+": generateDataSetColumns, attributesByName is missing, return []",[{name:"viewDescriptor",value:Object(C.j)(a.fetchXML)},{name:"attributesOnState",value:e&&e.metadata&&e.metadata.attributes?JSON.stringify(e.metadata.attributes):null}]),[];for(var V=function(t){var i=t.disableSorting,a=u.filter((function(e){return e.name===t.name&&e.order<0})),n=k[t.name],o=void 0;o=n&&t.labelId?Object(P.b)(e,t.labelId):n?n.DisplayName:"";var s="",d="";if(!n||0==(2&n.SourceTypeMask)&&0==(4&n.SourceTypeMask)&&0==(8&n.SourceTypeMask)||(i=!0),t.relatedEntityName){var h=Object(b.d)(e,t.relatedEntityName),f=t&&null!=t.name?t.name.split(".")[1]:null;n=null!=h&&f?h[f]:null,Object(l.c)(e,c.Hd)&&i&&n&&("lookup"===n.Type||"customer"===n.Type||"owner"===n.Type||"status"===n.Type||"state"===n.Type||!Object(O.a)(n.SourceType))&&"partylist"!==n.Type&&(i=!1),o=L(e,t,k,A,h),n&&(s=n.Type?n.Type:"",d=n.Format?n.Format:"")}else s=t.name&&k[t.name]&&k[t.name].Type?k[t.name].Type:"",d=t.name&&k[t.name]&&k[t.name].Format?k[t.name].Format:"";var g=Object(m.a)(s,d),y={Alias:t.name,DisplayName:o,DataType:g,Name:t.name,Type:""===s?"string":s,Format:""===d?v.a.text:d},I=r(y,F,t.width,n,t.isHidden||t.disableMetaDataBinding,t.imageProviderWebresource,t.imageProviderFunctionName,t.name===w,t.cellType,i,p,_,S,e);a&&a.length>0?a.forEach((function(e,t){var r=e.alias;Object.assign(e,I,{alias:r}),t>0&&Object.assign(e,{order:-1})})):u.push(I),F++},x=0,B=N;x<B.length;x++){V(B[x])}}return j.a.info(D+": generateDataSetColumns finished"),u}return j.a.info(D+": generateDataSetColumns finished and return []"),[]}function M(e,t){var r=e?a.a.toString(e.viewId):"";if(r&&t[r.toUpperCase()])return t[r.toUpperCase()];var i=new DOMParser,n=e&&e.fetchXML?i.parseFromString(e.fetchXML,"text/xml"):null;return r&&n&&(t[r.toUpperCase()]=n),n}function L(e,t,r,i,a){var n="",o=t.name.split("."),s=o.length>1?o[1]:o[0],u=a?a[s]:null;if(null!=a&&null!=u&&null!=i){for(var l="",c=0;c<i.length;c++)i[c].getAttribute("alias")===o[0]&&(l=i[c].getAttribute("to"));var d=r[l];n=u?String.format("{0} ({1})",u.DisplayName,d?d.DisplayName:""):""}return n}function V(e,t,r,i,a){var n=[],s=Object(g.d)(i).map((function(e){return e.name}));if(s)for(var u=0;u<s.length;u++){var l=a.fields[s[u]];n.push(Object(o.c)(l))}return n}function x(e,t,r,i,a){return Object(g.d)(i)}function B(e,t){if(!Object(u.a)(e))return!1;if(e.length!==t.length)return!0;for(var r=!1,i=0;i<t.length;i++){var a=e[i],n=t[i];if(!a.name||Object(u.b)(a.name)||!Q(a.sortDirection))return!1;a.name===n.name&&a.sortDirection===n.sortDirection||(r=!0)}return r}function U(e,t){for(var r=[],a=0;a<e.length;a++){var n=e[a],o=void 0;o=null==t?n.name:n.name?t[n.name]:null;var s=Object(i.__assign)(Object(i.__assign)({},n),{name:o});r.push(s)}return r}function z(e,t){var r={conditions:[],filterOperator:0};if("activitypointer"===t){var i=Object(y.a)(e);for(var a in i){var n=i[a];if(!n.IsEnabledInUnifiedInterface&&null!=n.ObjectTypeCode){var o={attributeName:"activitytypecode",conditionOperator:1,value:n.ObjectTypeCode.toString()};r.conditions.push(o)}}}return r.conditions.length>0?W(r,null):null}function W(e,t){if(j.a.info(D+": generateIExpression started"),Object(O.a)(e.filterOperator)&&(e.filterOperator=0),!(e&&(e.conditions&&0!==e.conditions.length||e.filters&&0!==e.filters.length)))return null;var r=function(e){switch(e){case 0:return"and";case 1:return"or"}return"none"}(e.filterOperator);!function(e){switch(e){case"and":case"or":break;default:throw new TypeError}}(r);var i=[];if(e.conditions&&e.conditions.length>0)for(var a=0;a<e.conditions.length;a++){var n=e.conditions[a];H(n);var o=J(n.conditionOperator);$(o);var s=void 0;s=null===t?n.attributeName:ee(n.attributeName,t);var u=void 0,l=void 0,c=void 0,d=void 0,p=void 0;if(Object(O.a)(n.value))l={etn:null,attributeName:s},d={entityName:n.entityAliasName},(u=[]).push(l),u.push(d),p={operator:o,terms:u},i.push(p);else l={etn:null,attributeName:s},c={value:"number"==typeof n.value?n.value.toString(10):n.value},d={entityName:n.entityAliasName},(u=[]).push(l),u.push(c),u.push(d),p={operator:o,terms:u},i.push(p)}if(e.filters&&e.filters.length>0)for(a=0;a<e.filters.length;a++){var h=W(e.filters[a],t);h&&i.push(h)}return e.conditions||e.filters?(j.a.info(D+": generateIExpression finished"),{hint:e.hint,operator:r,terms:i}):(j.a.info(D+": generateIExpression finished and return null"),null)}var q=function(e,t,r,i,a,n,o,s,u,l,c,d,h,f){var m=function(e){if(!e)return{LogicalName:null,Type:null,type:null,DisplayName:null,IsSecured:null,RequiredLevel:null,MaxLength:null,maxLength:null,MinValue:null,minValue:null,MaxValue:null,maxValue:null,Precision:null,precision:null,Format:null,format:null,Behavior:null,behavior:null,DefaultValue:null,defaultValue:null,Targets:null,targets:null,ImeMode:null,imeMode:null,SourceType:null,sourceType:null,Options:null,options:null,ParentPicklistLogicalName:null,parentPicklistLogicalName:null,ChildPicklistLogicalNames:null,childPicklistLogicalNames:null};var t=null;return e.Behavior&&(t=e.Behavior.toString()),{LogicalName:e.LogicalName,Type:e.Type,type:e.Type,DisplayName:e.DisplayName,IsSecured:e.IsSecured,RequiredLevel:e.RequiredLevel,MaxLength:e.MaxLength,maxLength:e.MaxLength,MinValue:e.MinValue,minValue:e.MinValue,MaxValue:e.MaxValue,maxValue:e.MaxValue,Precision:e.Precision,precision:e.Precision,Format:e.Format,format:e.Format,Behavior:t,behavior:t,DefaultValue:e.DefaultValue,defaultValue:e.DefaultValue,Targets:e.Targets,targets:e.Targets,ImeMode:e.ImeMode,imeMode:e.ImeMode,SourceType:e.SourceType,sourceType:e.SourceType,Options:e.OptionSet,options:e.OptionSet,ParentPicklistLogicalName:e.ParentPicklistLogicalName,parentPicklistLogicalName:e.ParentPicklistLogicalName,ChildPicklistLogicalNames:e.ChildPicklistLogicalNames,childPicklistLogicalNames:e.ChildPicklistLogicalNames}}(i);return c&&d&&h&&(m=Object(p.d)(m,c,d,e.DataType,h,null,f,null,null)),{name:e.Name,displayName:e.DisplayName,dataType:e.DataType,alias:e.Alias,order:t,visualSizeFactor:r,attributes:m,isHidden:a,imageProviderWebresource:n,imageProviderFunctionName:o,isPrimary:s,cellType:u,disableSorting:l}},G=function(e,t,r,i,a,n,o,s,u,l,c,d,p,h){return{name:e.Name,displayName:e.DisplayName,dataType:e.DataType,alias:e.Alias,order:t,visualSizeFactor:r,isHidden:a,imageProviderWebresource:n,imageProviderFunctionName:o,isPrimary:s,cellType:u,disableSorting:l}};function Q(e){return 0===e||1===e}function H(e){if(e.attributeName&&e.value&&(null===e.conditionOperator||"number"!=typeof e.conditionOperator))throw j.a.error(D+": checkIfConditionExpressionHasInvalidArguments, condition Operator in ConditionExpression is missing"),TypeError("Condition Operator in ConditionExpression is missing");if(e.conditionOperator&&e.value&&!e.attributeName)throw j.a.error(D+": checkIfConditionExpressionHasInvalidArguments, attributeName in ConditionExpression is missing"),TypeError("AttributeName in ConditionExpression is missing")}function K(e,t,r){return r.filter((function(r){var i=e.getFormattedValue(r),a=t.getFormattedValue(r);return!(!i&&!a)&&i!==a}))}function X(e,t,r){return r.filter((function(r){return e[r].isValid&&!t.isValid(r)||!e[r].isValid&&t.isValid(r)}))}function Y(e,t,r,i,a){return a.filter((function(a){return r[a].requiredLevel!==t.getRecordFieldRequiredLevel(e,i,a)}))}function Z(e,t,r,i,a){return a.filter((function(a){return r[a].isEditable!==t.getRecordFieldIsEditable(e,i,a)}))}function J(e){switch(e){case 0:return"eq";case 1:return"ne";case 4:return"ge";case 2:return"gt";case 5:return"le";case 3:return"lt";case 25:return"on";case 26:return"on-or-before";case 27:return"on-or-after";case 6:return"like";case 7:return"not-like";case 8:return"in";case 9:return"not-in";case 10:return"between";case 11:return"not-between";case 12:return"null";case 13:return"not-null";case 14:return"yesterday";case 15:return"today";case 16:return"tomorrow";case 17:return"last-seven-days";case 18:return"next-seven-days";case 19:return"last-week";case 20:return"this-week";case 21:return"next-week";case 22:return"last-month";case 23:return"this-month";case 24:return"next-month";case 28:return"last-year";case 29:return"this-year";case 30:return"next-year";case 31:return"last-x-hours";case 32:return"next-x-hours";case 33:return"last-x-days";case 34:return"next-x-days";case 35:return"last-x-weeks";case 36:return"next-x-weeks";case 39:return"last-x-years";case 40:return"next-x-years";case 37:return"last-x-months";case 38:return"next-x-months";case 8:return"in";case 49:return"like";case 58:return"this-fiscal-year";case 59:return"this-fiscal-period";case 60:return"next-fiscal-year";case 61:return"next-fiscal-period";case 62:return"last-fiscal-year";case 63:return"last-fiscal-period";case 64:return"last-x-fiscal-years";case 65:return"last-x-fiscal-periods";case 66:return"next-x-fiscal-years";case 67:return"next-x-fiscal-periods";case 68:return"in-fiscal-year";case 69:return"in-fiscal-period";case 70:return"in-fiscal-period-and-year";case 71:return"in-or-before-fiscal-period-and-year";case 72:return"in-or-after-fiscal-period-and-year";case 75:return"above";case 76:return"under";case 77:return"not-under";case 78:return"eq-or-above";case 79:return"eq-or-under";case 87:return"contain-values";case 53:return"olderthan-x-months";case 82:return"olderthan-x-years";case 83:return"olderthan-x-weeks";case 84:return"olderthan-x-days";case 85:return"olderthan-x-hours";case 86:return"olderthan-x-minutes";case 54:return"begins-with";case 56:return"ends-with";case 55:return"not-begin-with";case 57:return"not-end-with";case 51:return"eq-userlanguage";case 41:return"eq-userid";case 42:return"ne-userid";case 43:return"eq-businessid";case 44:return"ne-businessid";case 73:return"eq-userteams";case 74:return"eq-useroruserteams";case 80:return"eq-useroruserhierarchy";case 81:return"eq-useroruserhierarchyandteams";case 88:return"not-contain-values"}return""}function $(e){switch(e){case"eq":case"ne":case"neq":case"ge":case"gt":case"le":case"lt":case"on":case"on-or-before":case"on-or-after":case"like":case"not-like":case"in":case"not-in":case"between":case"not-between":case"null":case"not-null":case"yesterday":case"today":case"tomorrow":case"last-seven-days":case"next-seven-days":case"last-week":case"this-week":case"next-week":case"last-month":case"this-month":case"next-month":case"last-year":case"this-year":case"next-year":case"last-x-hours":case"next-x-hours":case"last-x-days":case"next-x-days":case"last-x-weeks":case"next-x-weeks":case"last-x-months":case"next-x-months":case"last-x-years":case"next-x-years":case"this-fiscal-year":case"this-fiscal-period":case"next-fiscal-year":case"next-fiscal-period":case"last-fiscal-year":case"last-fiscal-period":case"last-x-fiscal-years":case"last-x-fiscal-periods":case"next-x-fiscal-years":case"next-x-fiscal-periods":case"in-fiscal-year":case"in-fiscal-period":case"in-fiscal-period-and-year":case"in-or-before-fiscal-period-and-year":case"in-or-after-fiscal-period-and-year":case"above":case"under":case"not-under":case"eq-or-above":case"eq-or-under":case"olderthan-x-months":case"olderthan-x-years":case"olderthan-x-weeks":case"olderthan-x-days":case"olderthan-x-hours":case"olderthan-x-minutes":case"contain-values":case"begins-with":case"ends-with":case"not-begin-with":case"not-end-with":case"not-contain-values":case"eq-userid":case"ne-userid":case"eq-businessid":case"ne-businessid":case"eq-userlanguage":case"eq-userteams":case"eq-useroruserteams":case"eq-useroruserhierarchy":case"eq-useroruserhierarchyandteams":break;default:throw j.a.error(D+": checkConditionOperatorIsValid, invalid condition operator"),TypeError("Invalid condition operator")}}function ee(e,t){return t&&t.hasOwnProperty(e)?t[e]:e}function te(){return[].concat(_.o).concat(I.g)}function re(e){return e?(e instanceof Array||(e=[e]),e.forEach((function(e){Object.assign(e,{entityType:e.TypeName,id:e.Id?e.Id.toString():null,name:e.Name})})),e):[]}function ie(e){var t=[];if(!e)return t;var r=e.get_entities();return r?(r.forEach((function(e){var r=e.getValue("partyid");if(r)t.push(new S.a(r.TypeName,r.Id?r.Id.toString():null,r.Name));else{var i=e.getValue("addressused");i&&t.push(new S.a("unresolvedaddress",a.a.EMPTY.guid,i))}})),t):t}function ae(e){var t=[];return e?(e instanceof Array||(e=[e]),e.forEach((function(e){if(e.fields.partyid){var r=e.fields.partyid.reference;r&&t.push(new S.a(r.etn,r.id?r.id.guid:null,r.name))}else e.fields.addressused&&t.push(new S.a("unresolvedaddress",a.a.EMPTY.guid,e.fields.addressused.value))})),t):[]}function ne(e,t,r){var i=Object(b.j)(e,t,r);if(!i)return!1;for(var a=0;a<r.length;a++)if(!i[r[a]])return!1;return!0}function oe(e){if(e&&e.descriptor&&e.descriptor.Id){var t=e.descriptor.Id;return t.indexOf(".fieldControl")===t.length-".fieldControl".length?t.substring(0,t.length-".fieldControl".length):t}return null}function se(e,t){return!(Object(O.a)(e)||Object(O.a)(t)||Object(O.a)(e.Columns)===Object(O.a)(t.Columns)&&(Object(O.a)(t.Columns)||e.Columns.length===t.Columns.length))}},"9qYn":function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function i(){try{return window&&window.opener&&window.opener.parent&&window.opener.LOCID_BRANDNAME&&(window.opener.parent.IsUCI&&window.opener.auto||window.opener.parent.parent&&window.opener.parent.parent.refreshCurrentGrid&&window.opener.parent.parent.IsHybridAF)}catch(e){return!1}}function a(e){e&&i()&&window.opener.auto&&(window.opener.parent.IsUCI||window.opener.parent.parent.IsHybridAF)&&(window.opener.gridrefreshsource="child",window.opener.auto(Xrm.Internal.getEntityCode(e.getEntityName()),e.getPrimaryAttributeValue(),e.getId()))}function n(e){i()&&window.opener.parent.parent.refreshCurrentGrid&&window.opener.parent.parent.IsHybridAF&&window.opener.parent.parent.refreshCurrentGrid(e)}function o(e){return!(e||!i())&&(window.close(),!0)}r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o}))},"9uN/":function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return d}));var i=r("ME4N"),a=r("EGsq"),n=r("qC0c"),o=r("JlqV"),s=r("cZkS");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function u(e,t,r,a,n){void 0===n&&(n=null);var o=t.XrmObject,s=null!=n?n:"",u="NA",l="NA",c=!0;try{e&&e.reason&&(e.reason.get_textStatus()===i.h.Forbidden&&(c=!1),u=null!=e.reason.get_organizationServiceFault().get_innerFault().get_callStack()?e.reason.get_organizationServiceFault().get_innerFault().get_callStack():"NA",l=null!=e.reason.get_textStatus()?e.reason.get_textStatus():"NA",s=null!=e.reason.get_message()?e.reason.get_message():e.reason.get_organizationServiceFault().get_messages().get_Items().toString())}catch(e){s=e.message}try{c&&o&&o.Reporting&&o.Reporting.reportFailure(r,{name:"error",message:s},"",[{name:"Action",value:a},{name:"StackTrace",value:u},{name:"Status",value:l}])}catch(e){}}function l(e,t){var r=Object(a.x)(e);return!!r.enableActivitiesTimeLinePerfImprovement&&(r.enableActivitiesTimeLinePerfImprovement&t)===t}function c(e){return!Object(o.b)(e)&&Object(n.a)(e,i.t.TimelineWallNotesOffline)}function d(e){return Object(n.a)(e,i.t.TimelineWallKeywordSearch,s.h)}},Ajgc:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r("c/eZ"),a=r("C+/u"),n=r("8Pwi"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.setupAggregationQueries=function(){if(!this.initialized)throw new Error("ChartDataSetQueryDecorator has not been initialized.");if(!this.isWebResourceChart){this.dataDefinition.buildCategory();var e=this.viewDefinition;if(!this.dataDefinition.isOrderPresent()&&e.orderByAttributes.length>0){var t=e.orderByAttributes[0],r=this.dataDefinition.entityExpression;if(r.hasAggregate)for(var i=0;i<r.groupByAttributes.length;i++){var o=r.groupByAttributes[i];if(o.attributeName===t.name){Object(a.h)(r,Object(n.a)(o.attributeName,o.aliasName,r),!0,t.descending,-1);break}}else Object(a.h)(r,Object(n.a)(t.name,t.aliasName,r),!1,t.descending,-1)}Object(a.i)(this.dataDefinition.entityExpression)}},t}(r("NLYP").a)},AqA3:function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i;r.d(t,"a",(function(){return i})),function(e){e.crossEntity="crossEntity",e.invalid="invalid",e.unreachable="unreachable",e.dirtyForm="dirtyForm",e.invalidProcess="invalidProcess"}(i||(i={}))},B0z9:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var i=r("c/eZ"),a=r("8Pwi"),n=r("NLYP"),o=r("yGoS"),s=r("C+/u"),u=r("9r0m"),l=r("F2uj"),c=r("70DF"),d=function(e){function t(t,r,i,a,n,o,s,u){var l=e.call(this,t,r,i,a,n)||this;if(l._chartType=u,-1!==o.indexOf(".")){var c=o.split(".");2===c.length&&(l._newGroupByLinkedEntityAlias=c[0],l._newGroupByAttributeName=o.split(".")[1],l._newGroupByLinkedEntityName=s)}else l._newGroupByAttributeName=o;return l}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"drillDownChartType",{get:function(){return this._chartType},enumerable:!1,configurable:!0}),t.prototype.setupAggregationQueries=function(){if(!this.initialized)throw new Error("ChartDataSetQueryDecorator has not been initialized.");this.isWebResourceChart||(this._removeExistingGroupBysAndOrderBys(),this._addNewGroupBys(),this.dataDefinition.buildCategory(),Object(s.i)(this.dataDefinition.entityExpression))},t.prototype._removeExistingGroupBysAndOrderBys=function(){var e=this.dataDefinition.entityExpression;Object(s.j)(e,"groupby"),this.dataDefinition.groupByList.length=0},t.prototype._addNewGroupBys=function(){var e=this.dataDefinition.entityExpression,t="_"+u.a.toString(u.a.newGuid()).replace(/-/g,""),r=this._newGroupByLinkedEntityName?this._newGroupByLinkedEntityName:this.dataDefinition.entityExpression.entityName,i=null,a=this._createDateTimeGroupingInfo(r),n=a?Object(o.c)(a.groupingType):null;if(this._newGroupByLinkedEntityName){var l=this._getRequiredLinkedEntityFromViewDefintion();if(null!=l){var c=Object(s.c)(l,e);Object(s.g)(c,this._newGroupByAttributeName,t,"true",null,n,"true"),Object(s.a)(c,e),e.linkedEntities.push(c),i=this._createNewGroupByAndAddToExpression(t,c,a),this._GroupByKey="LinedEntity_"+c.entityName+"_alias_"+c.alias+"_from_"+c.linkFromAttribute+"_to_"+c.linkToAttribute+"_join_"+c.joinType+"_GroupBy_"+this._newGroupByAttributeName+"_"+n}}else Object(s.g)(e,this._newGroupByAttributeName,t,"true",null,n,"true"),i=this._createNewGroupByAndAddToExpression(t,e,a);this._GroupByKey="GroupBy_"+this._newGroupByAttributeName+"_"+n,this.dataDefinition.addGroupBys(i)},t.prototype._createNewGroupByAndAddToExpression=function(e,t,r){var i=Object(a.a)(this._newGroupByAttributeName,e,t,r);return i.hasGroupBy=!0,t.attributes.push(i),t.groupByAttributes.push(i),i},t.prototype._getRequiredLinkedEntityFromViewDefintion=function(){for(var e=0;e<this.viewDefinition.linkedEntities.length;e++)if(this.viewDefinition.linkedEntities[e].alias===this._newGroupByLinkedEntityAlias)return this.viewDefinition.linkedEntities[e];return null},t.prototype._createDateTimeGroupingInfo=function(e){return"datetime"===Object(l.a)(this.getState(),e,this._newGroupByAttributeName).Type?Object(o.a)(c.a.MONTH):null},t.prototype.getStorageKey=function(){var t=e.prototype.getStorageKey.call(this);return t=t+":"+this._GroupByKey+":"+this._chartType},t}(n.a)},B3Il:function(e,t,r){"use strict";r.d(t,"c",(function(){return C})),r.d(t,"b",(function(){return H})),r.d(t,"a",(function(){return Q}));var i=r("9r0m"),a=r("lMVv"),n=r("ib+O"),o=r("ME4N");function s(e){switch(e){case o.b.Email:return l(o.b.ActivityModule,o.b.Email,o.b.From,n.a.PartyList,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.PhoneCall:return l(o.b.ActivityModule,o.b.PhoneCall,o.b.From,n.a.PartyList,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.Task:return l(o.b.ActivityModule,o.b.Task,o.b.ModifiedBy,n.a.String,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.Appointment:return l(o.b.ActivityModule,o.b.Appointment,o.b.Organizer,n.a.PartyList,o.b.ScheduledStart,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.RecurringAppointment:return l(o.b.ActivityModule,o.b.RecurringAppointment,o.b.Organizer,n.a.PartyList,o.b.ScheduledStart,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.Letter:return l(o.b.ActivityModule,o.b.Letter,o.b.From,n.a.PartyList,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.Fax:return l(o.b.ActivityModule,o.b.Fax,o.b.From,n.a.PartyList,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);case o.b.OpportunityClose:return l(o.b.ActivityModule,o.b.OpportunityClose,o.b.OwnerId,n.a.PartyList,o.b.ModifiedOn,n.a.DateTime,o.b.ActualRevenue,n.a.Number,o.b.Subject,n.a.String);case o.b.IncidentResolution:return l(o.b.ActivityModule,o.b.IncidentResolution,o.b.CreatedBy,n.a.String,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String);default:return null}}function u(e,t){e[t.activityType.toLowerCase()]=t}function l(e,t,r,i,a,n,o,s,u,l){var c={activityType:t,moduleName:e},d={dataFieldName:r,dataType:i},p={dataFieldName:a,dataType:n},h={dataFieldName:o,dataType:s},f={dataFieldName:u,dataType:l};return c.headerFields=[d,p],c.bodyFields=[h,f],c}var c=r("i8/j"),d=r("F2uj"),p=r("7EJx"),h=r("qC0c"),f=r("3OsR"),m=r("w1wa"),g=r("EGsq"),v=r("TCcM"),b=r("JWXX"),y=r("rcZN"),O=r("c56u"),_=r("VWqI"),P=r("9uN/"),S=r("4tno"),w=r("aPRd"),I=r("U0B9"),j=r("cZkS");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function C(e,t,r,i,a,n){var o=Object(m.b)(e,t.LabelId,f.a.Metadata);return Object(m.d)(e,t.LabelId)?D(e,t,r,i,a,n):2!==o?null:D(e,t,r,i,a,n)}function D(e,t,r,i,n,s){var u=[],l=Object(P.a)(e,o.n.SecondStage);l&&(u=x(e,t.Parameters[o.s.UClientActivities]));var c=r.entityTypeName;n&&n.target&&n.target.etn&&(c=n.target.etn);var d=function(e){var t=Object(v.i)(e,b.a);if(!t)return[];var r=[];for(var i in t){var n=t[i],o=n&&n.fields&&n.fields[b.c]?n.fields[b.c].value:"";if(o){var s=Object(a.h)(e,o);s&&s.IsEnabledInUnifiedInterface&&n.fields.statecode&&"0"===n.fields.statecode.valueString&&r.push(o)}}return r}(e);return{TimelineWallConfiguration:{SortActivitiesByValue:null!=t.Parameters[o.s.UClientSortActivitiesByValue]?t.Parameters[o.s.UClientSortActivitiesByValue]:o.u.SortActivitiesByValueDefault,DefaultModuleForCreateExperience:null!=t.Parameters[o.s.UClientDefaultModuleForCreateExperience]?t.Parameters[o.s.UClientDefaultModuleForCreateExperience]:o.u.DefaultModuleForCreateExperience,OrderBy:null!=t.Parameters[o.s.UClientOrderBy]?t.Parameters[o.s.UClientOrderBy]:o.u.OrderByDefault,RecordPerPage:null!=t.Parameters[o.s.UClientRecordPerPage]?t.Parameters[o.s.UClientRecordPerPage]:10,Label:null!=t.Parameters[o.s.Label]?t.Parameters[o.s.Label]:null,ShowFilterPane:R(e,t),ExpandFilterPane:F(t.Parameters[o.s.UClientExpandFilterPane],!1),DefaultFilters:E(t.Parameters[o.s.UClientDefaultFilterJSON]),EnableSearch:F(t.Parameters[o.s.UClientEnableSearch],!0),EnableWhatsChanged:F(t.Parameters[o.s.UClientEnableWhatsNewFilter],T(e)),ExpandRecord:F(t.Parameters[o.s.UClientExpandRecord],!1),ShowOneNotePane:k(e,r),ShowContextualEmail:L(e),ShowRichTextNotes:V(e),IsAutoDataCaptureV2Enabled:M(e),Activities:l?u:x(e,t.Parameters[o.s.UClientActivities]),Modules:A(e,t.Parameters[o.s.UClientModules],c,i.ContextType),DisplayActivityHeaderUsing:null!=t.Parameters[o.s.UClientDisplayActivityHeaderUsing]?t.Parameters[o.s.UClientDisplayActivityHeaderUsing]:o.u.DisplayActivityHeaderDefault,CreateActivityUsing:null!=t.Parameters[o.s.UClientCreateActivityUsing]?t.Parameters[o.s.UClientCreateActivityUsing]:o.u.CreateActivityDefault,DisplayActivityUsing:null!=t.Parameters[o.s.UClientDisplayActivityUsing]?t.Parameters[o.s.UClientDisplayActivityUsing]:o.u.DisplayActivityDefault,ActivityCardMap:K(e,t.Parameters[o.s.UClientActivities],t.Parameters[o.s.UClientActivityCardMap],u),ActivityRollupType:t.Parameters[o.s.UClientActivityRollupType],ActivitiesConfigMap:E(t.Parameters[o.s.UClientActivitiesConfigurationJSON]),NotesConfigurations:E(t.Parameters[o.s.UClientNotesConfigurationJSON]),PostsConfigurations:E(t.Parameters[o.s.UClientPostsConfigurationJSON]),PostsEnabledEntities:d,PostsEnabledEntitiesQFVRetrievalList:Object(b.e)(d,s,e),isMetadataError:Object(m.d)(e,t.LabelId),upSyncStatus:Object(y.b)(e),offlineAvailableForUse:Object(O.w)(e),isNotesAnalysisEnabled:N(e,r),enableActivitiesTimeLinePerfImprovement:Object(g.x)(e).enableActivitiesTimeLinePerfImprovement},ContextType:i&&i.ContextType?i.ContextType:null,Type:o.q,EntitiesMetadata:B(e)}}function E(e){if(e)try{return JSON.parse(e)}catch(e){return null}return null}function T(e){return!Object(h.b)(e,"October2020Update")}function N(e,t){return!!Object(h.b)(e,o.t.TimelineWallNotesAnalysis)&&(function(e){var t=Object(p.w)(e).languageId;if(3081===t||10249===t||4105===t||9225===t||6153===t||8201===t||5129===t||13321===t||7177===t||11273===t||2057===t||1033===t||12297===t)return!0;return!1}(e)&&function(e){return e&&e.entityTypeName&&("contact"===e.entityTypeName||"opportunity"===e.entityTypeName||"lead"===e.entityTypeName||"account"===e.entityTypeName||"case"===e.entityTypeName)}(t))}function F(e,t){return null!=e?"true"===e:t}function R(e,t){var r=Object(h.b)(e,o.t.TimelineWallFilters),i=Object(P.c)(e),a=F(t.Parameters[o.s.UClientShowFilterPane],!0);return r&&a&&!i}function A(e,t,r,i){var n=[],s=r?Object(a.h)(e,r):null;i!==o.e&&s&&s.HasNotes&&n.push(o.u.NotesModule),(i===o.e||s&&s.HasActivities)&&n.push(o.u.ActivitiesModule),(i===o.e||function(e,t){var r=Object(v.i)(e,b.a);if(r)for(var i in r){var a=r[i];if(a.fields&&a.fields[b.c]&&a.fields[b.c].value===t)return a.fields[b.d]&&"1"!==a.fields[b.d].valueString}return!1}(e,r))&&n.push(o.u.PostsModule);var u=[];if(null!=t&&""!==t){var l=t.split(",");u=n.filter((function(e){return l.indexOf(e)>=0}))}else u=n;return u.reduce((function(t,r){return function(e,t){switch(t){case o.u.ActivitiesModule:return Object(h.b)(e,o.t.TimelineWallActivities);case o.u.NotesModule:return Object(h.b)(e,o.t.TimelineWallNotes);case o.u.PostsModule:return Object(h.b)(e,o.t.TimelineWallPosts);case o.u.UserPostsModule:return Object(h.b)(e,o.t.TimelineWallUserPosts);default:return!1}}(e,r)&&t.push(r),t}),[])}function k(e,t){if(t&&t.entityTypeName){var r=Object(g.x)(e),i=Object(p.w)(e),n=Object(a.h)(e,t.entityTypeName);if(Object(h.b)(e,o.i)&&Object(h.b)(e,o.p)&&0===r.sharePointDeploymentType&&i.isLive&&n.IsDocumentManagementEnabled&&n.IsOneNoteIntegrationEnabled)return!0}return!1}function M(e){return Object(g.x)(e).isAutoDataCaptureV2Enabled}function L(e){var t=Object(g.x)(e),r=Object(S.l)(e),i=Object(I.b)(e),a=Object(w.b)(e),n=Object(w.c)(e),s=o.d.SupportedUnifiedClientApps;return!!(Object(h.a)(e,o.t.TimelineWallContextualEmail)&&t.isContextualEmailEnabled&&(s.indexOf(r)>=0||Object(h.a)(e,o.t.TimelineWallContexual2020Update,j.h))&&i===I.a.Web&&a>o.d.PanelHeight&&n>o.d.PanelWidth)}function V(e){return Object(g.x)(e).isRichTextNotesEnabled}function x(e,t){var r=[],i=[],n=Object(P.a)(e,o.n.SecondStage);if(null!=t&&""!==t)t.split(",").forEach((function(t){n&&!Object(_.b)(e,t)||q(Object(a.h)(e,t),t,i,r)}));else{var s=Object(a.g)(e);for(var u in s){if(s[u].IsActivity&&(!n||Object(_.b)(e,u))&&(s[u].IsCustomEntity||o.u.ActivitiesListSupported(e).indexOf(u)>=0))q(Object(a.h)(e,u),u,i,r)}}return r.sort(G).concat(i.sort(G))}function B(e){var t=Object(a.g)(e),r={},i=Object(p.u)(e),n=function(a){var n=t[a],s=W(n,a);if(s.Privileges={},function(e,t,r){if(t)for(var i=0;i<t.length;i++){var a=t[i];if(a)r[U(a.PrivilegeType)]=z(e,a.PrivilegeId)}}(i,n.Privileges,s.Privileges),n.IsActivity||o.u.SupportedModules.findIndex((function(e){return e.entityName===a}))>=0||a===o.l){var u=Object(d.d)(e,a);s.AttributesMetadata=u}r[a]=s};for(var s in t)n(s);return r}function U(e){var t=e.toString();switch(e){case 1:t=o.o.Create;break;case 2:t=o.o.Read;break;case 3:t=o.o.Write;break;case 4:t=o.o.Delete;break;case 5:t=o.o.Assign;break;case 6:t=o.o.Share;break;case 7:t=o.o.Append;break;case 8:t=o.o.AppendTo}return t}function z(e,t){if(t&&""!==t&&e){var r=e[t];if(r&&r.privilegeDepth>=0)return!0}return!1}function W(e,t){var r={};return r.LogicalName=t,r.DisplayName=e.DisplayName,r.ObjectTypeCode=e.ObjectTypeCode,r.IsCustomEntity=e.IsCustomEntity,r.EntitySetName=e.EntitySetName,r.ActivityTypeMask=e.ActivityTypeMask,r.IsReadOnlyInMobileClient=e.IsReadOnlyInMobileClient,r.IsVisibleInMobileClient=e.IsVisibleInMobileClient,r.IsActivityParty=e.IsActivityParty,r.IconVectorName=e.IconVectorName,r}function q(e,t,r,i){e&&e.hasOwnProperty("IsActivity")&&e.IsActivity&&(e.IsCustomEntity?r.push(W(e,t)):i.push(W(e,t)))}function G(e,t){if(e&&t&&e.DisplayName&&t.DisplayName){var r=null==e.DisplayName.UserLocalizedLabel?e.DisplayName:e.DisplayName.UserLocalizedLabel.Label,i=null==t.DisplayName.UserLocalizedLabel?t.DisplayName:t.DisplayName.UserLocalizedLabel.Label;return r.localeCompare(i)}return-1}function Q(e){var t=[];null!=e&&(t=e.split(",").map((function(e){var t=e.split(":");return{logicalName:t[0],objectTypeCode:t[1],formId:t[2]}})));return t}function H(e,t){if(e&&e.dashboardId&&t.indexOf(o.f)>=0){var r=t.split(".");return r[r.length-1]}return t}function K(e,t,r,i){var c=function(e,t){var r={timelineCards:{}};for(var i in t)if(t[i].IsActivity&&(t[i].IsCustomEntity||o.u.ActivitiesListSupported(e).indexOf(i)>=0)){var a=s(i);a&&u(r.timelineCards,a)}return u(r.timelineCards,l(o.b.NotesModule,o.b.Annotations,o.b.UserName,n.a.String,o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.NoteText,n.a.String)),u(r.timelineCards,l(o.b.PostsModule,o.b.AutoPost,o.b.RegardingObjectId,n.a.String,o.b.CreatedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Text,n.a.String)),u(r.timelineCards,l(o.b.PostsModule,o.b.UserPost,o.b.CreatedBy,n.a.String,o.b.CreatedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Text,n.a.String)),r.defaultCustomActivityCard=l("_default","_default",o.b.OwnerId,Object(n.e)(),o.b.ModifiedOn,n.a.DateTime,o.b.Subject,n.a.String,o.b.Description,n.a.String),r}(e,Object(a.g)(e));Object(P.a)(e,o.n.SecondStage)&&i||(i=x(e,t));var p,h,f=function(e,t,r){for(var i,a={},n=function(n){var o=t[n];if(null!==o&&null!==o.ObjectTypeCode){var s=Object(d.d)(e,t[n].LogicalName);for(var u in o.AttributesMetadata={},s){var l=s[u];o.AttributesMetadata[l.LogicalName]=l}var c=r.find((function(e){return e.logicalName===o.LogicalName}));o.FormId=null!==(i=null==c?void 0:c.formId)&&void 0!==i?i:"";var p=o.LogicalName;a&&(a[p]=o)}},o=0;o<t.length;o++)n(o);return a}(e,i,Q(r));if(null!=f)for(var m in f){var g=void 0,v=f[m];if(""===v.FormId||void 0===v.FormId||null===v.FormId){p=c,h=v.LogicalName;var b=(g=p.timelineCards[h.toLowerCase()]?p.timelineCards[h.toLowerCase()]:p.defaultCustomActivityCard).headerFields,y=g.bodyFields;null!==v.AttributesMetadata&&void 0!==v.AttributesMetadata&&(Z(b,v.LogicalName,v.AttributesMetadata),Z(y,v.LogicalName,v.AttributesMetadata))}else g=X(e,v.FormId,v.LogicalName,f);null!=g&&u(c.timelineCards,g)}return c}function X(e,t,r,a){var o,s={activityType:r,moduleName:"Activities",headerFields:[],bodyFields:[],formId:t};if(void 0===t||""===t||null===t)return null;if(o=new i.a(t)){var u,l=Object(c.t)(e,o,"CardHeader"),d=Object(c.t)(e,o,"CardDetails");return null!=l&&l.Rows.forEach((function(e){null!=(u=e.Cells)&&(s=Y(u,n.b.Header,s,a))})),null!=d&&d.Rows.forEach((function(e){null!=(u=e.Cells)&&(s=Y(u,n.b.Body,s,a))})),s}}function Y(e,t,r,i){for(var a=0;a<e.length;a++){var s={},u=e[a].ControlName;if(null!=u){var l=u,c=i[r.activityType];if(null!=l&&null!=c&&null!=c.AttributesMetadata&&null!=c.AttributesMetadata[l]){s.dataFieldName=l,s.label=c.AttributesMetadata[l].DisplayName;var d=c.AttributesMetadata[l].Type;s.dataType=o.g[d.toLowerCase()],t===n.b.Body?r.bodyFields.push(s):r.headerFields.push(s)}}}return r}function Z(e,t,r){for(var i=0;i<e.length;i++){var a=e[i],n=a.dataFieldName;n&&r[n]&&(a.label=r[n].DisplayName)}}},"C+/u":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"f",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"h",(function(){return m})),r.d(t,"g",(function(){return g})),r.d(t,"j",(function(){return f})),r.d(t,"c",(function(){return O})),r.d(t,"a",(function(){return _})),r.d(t,"i",(function(){return y}));var i=r("8Pwi"),a=r("yGoS");function n(e,t,r,i){return{name:e,aliasName:t,descending:r,entity:i||null}}function o(e,t,r,i){return s(e,t,r,null,i)}function s(e,t,r,i,a){var n={getState:a,entityName:e,tableAliasCount:0,tableAliases:new Array,attributes:[],attributesByName:new Map,orderByAttributes:[],groupByAttributes:[],aggregateAttributes:[],linkedEntities:[],parentEntity:t||null,useLimitStatement:!0,top:5e3,offset:1,alias:i,filters:[]};return u(n),t?(n.baseEntity=t.baseEntity,n.joinType=r||0):n.baseEntity=n,n}function u(e){if(e.entityName){var t=String.format("{0}{1}",e.entityName,e.tableAliasCount++);e.tableAliases.push(t),e.tableAlias=t}else e.tableAlias=""}function l(e){return(new XMLSerializer).serializeToString(e.fetchXmlDoc.documentElement)}function c(e,t){var r=new DOMParser;e.fetchXmlDoc=r.parseFromString(t,"text/xml");var i=e.fetchXmlDoc.getElementsByTagName("fetch");i&&i.length>0&&d(e,i[0])}function d(e,t){var r=new DOMParser,o=new XMLSerializer;e.fetchXmlDoc=r.parseFromString(o.serializeToString(t),"text/xml"),e.hasAggregate="true"===p(t,"aggregate");var l=p(t,"count");l&&(e.top=Number(l));var c=t.getElementsByTagName("entity"),h=c&&c.length>0?c[0]:null;h||"link-entity"!==t.tagName||(h=t),e.parentEntity||(e.tableAliasCount=0,e.tableAliases=[],u(e),e.baseEntity=e),function(e,t){e.entityName=p(t,"name");for(var r=t.childNodes,o=0;o<r.length;o++){var u=r.item(o);if(u&&u.tagName)switch(u.tagName.toLowerCase()){case"attribute":var l=null,c=Object(a.b)(p(u,"dategrouping"));c>=0&&(l=Object(a.a)(c));var h=p(u,"name"),f=p(u,"alias"),m=Object(i.a)(h,f,e,l);e.attributesByName.set(null===f?h:f,m),e.attributes.push(m);var g=p(u,"aggregate");g&&(m.hasAggregate=!0,m.aggregateType=g,e.aggregateAttributes.push(m));var v=p(u,"groupby");v&&"true"===v&&(m.hasGroupBy=!0,e.groupByAttributes.push(m));break;case"order":var y=p(u,"alias"),O=p(u,"attribute"),_=p(u,"descending"),S=n(O,y,_&&"true"===_,e);e.orderByAttributes.push(S);break;case"link-entity":var w=u.getAttribute("name"),I=u.getAttribute("from"),j=u.getAttribute("to"),C=s(w,e,null,u.getAttribute("alias"),e.getState);P(C,I,j,"eq",b(u)),d(C,u),e.linkedEntities.push(C);break;case"filter":e.filters.push(u.outerHTML);break;default:throw new Error("Unexpected Node Name.")}}}(e,h)}function p(e,t){return e.getAttribute(t)}function h(e){var t=e.fetchXmlDoc.getElementsByTagName("entity")[0];return t||(t=e.fetchXmlDoc.getElementsByTagName("link-entity")[0]),t}function f(e,t){!function e(t,r){for(var i=new Array,a=0,n=t.childNodes.length;a<n;a++){var o=t.childNodes[a];switch(o.nodeName){case"attribute":r?r&&p(o,r)&&"true"===p(o,r).toLowerCase()&&i.push(o):i.push(o);break;case"order":i.push(o);break;case"link-entity":e(o,r),i.push(o)}}for(a=0;a<i.length;a++)t.removeChild(i[a])}(e.fetchXmlDoc.getElementsByTagName("entity")[0],t),function(e){if(e.hasAggregate){for(var t=e.groupByAttributes.length-1;t>=0;t--)e.groupByAttributes[t].hasGroupBy&&e.groupByAttributes.splice(t,1);for(t=e.orderByAttributes.length-1;t>=0;t--)e.orderByAttributes.splice(t,1)}}(e)}function m(e,t,r,i,a){var o=r?null:t.attributeName?t.attributeName:t.aliasName,s=r?t.aliasName?t.aliasName:t.attributeName:null;!function(e,t,r,i,a){var n=e.fetchXmlDoc.createElement("order");if(t){var o=e.fetchXmlDoc.createAttribute("attribute");o.value=t,n.attributes.setNamedItem(o)}if(r){var s=e.fetchXmlDoc.createAttribute("alias");s.value=r,n.attributes.setNamedItem(s)}var u=e.fetchXmlDoc.createAttribute("descending");u.value=i?"true":"false",n.attributes.setNamedItem(u);var l=h(e);if(a<0)return void l.appendChild(n);for(var c=l.childNodes,d=-1,p=0;p<c.length;p++){var f=c[p],m=f.nodeName;if(m&&"order"===m.toLowerCase()&&++d===a)return void l.insertBefore(n,f)}l.appendChild(n)}(e,o,s,i,a);var u=n(o,s,i,e);a<0||a>=e.orderByAttributes.length?e.orderByAttributes.push(u):e.orderByAttributes.splice(a,0,u)}function g(e,t,r,i,a,n,o){var s=e.fetchXmlDoc.createElement("attribute");s.attributes.setNamedItem(v(e,"name",t)),r&&s.attributes.setNamedItem(v(e,"alias",r)),i&&s.attributes.setNamedItem(v(e,"groupby",i)),a&&s.attributes.setNamedItem(v(e,"aggregate",a)),n&&(s.attributes.setNamedItem(v(e,"dategrouping",n)),o?s.attributes.setNamedItem(v(e,"usertimezone",o)):s.attributes.setNamedItem(v(e,"usertimezone","true"))),h(e).appendChild(s)}function v(e,t,r){var i=e.fetchXmlDoc.createAttribute(t);return i.value=r,i}function b(e){var t=p(e,"link-type");if(!t)return 0;switch(t){case"natural":return 2;case"inner":return 0;case"outer":return 1;case"matchfirstrowusingcrossapply":return 3;case"in":return 4;case"exists":return 5;default:throw new Error("EntityQueryExpression.GetLinkType: Invalid join type!")}}function y(e){var t=h(e);!function(e){for(var t=Array.from(e.childNodes).filter((function(e){return"link-entity"===e.tagName})),r=0;r<t.length;r++)e.removeChild(t[r])}(t),function(e,t){for(var r=0;r<t.linkedEntities.length;r++){var i=h(t.linkedEntities[r]).cloneNode(!0);e.appendChild(i)}}(t,e)}function O(e,t){return function(e,t,r,i,a,n){var o=s(e,r,null,t,r.getState);P(o,i,a,"eq",0);var u=function(e,t){var r=t.fetchXmlDoc.createElement("link-entity");if(e.entityName){(i=t.fetchXmlDoc.createAttribute("name")).value=e.entityName,r.attributes.setNamedItem(i)}if(e.linkFromAttribute){(i=t.fetchXmlDoc.createAttribute("from")).value=e.linkFromAttribute,r.attributes.setNamedItem(i)}if(e.linkToAttribute){(i=t.fetchXmlDoc.createAttribute("to")).value=e.linkToAttribute,r.attributes.setNamedItem(i)}if(null!==e.joinType){var i;(i=t.fetchXmlDoc.createAttribute("link-type")).value=function(e){switch(e){case 2:return"natural";case 0:return"inner";case 1:return"outer";case 3:return"matchfirstrowusingcrossapply";case 4:return"in";case 5:return"exists";default:throw new Error("EntityQueryExpression.convertLinkTypeToString: Invalid join type!")}}(e.joinType),r.attributes.setNamedItem(i)}return r}(o,r);return d(o,u),o}(e.entityName,e.alias,t,e.linkFromAttribute,e.linkToAttribute,e.joinType)}function _(e,t){var r=h(t),i=h(e);r.appendChild(i.cloneNode(!0))}function P(e,t,r,i,a){e.linkFromAttribute=t,e.linkToAttribute=r,e.conditionOperator=i,e.joinType=a}},Cfob:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var i=r("Sscr"),a=r("uO/V"),n="dataSnapshotNumber.setFormMetadata";function o(e,t,r){return{type:"grid.setCustomFilter.async",execute:function(o,s){var u=o.dispatch,l=(o.getState,s.TraceManager.getTracer(a.z)),c=a.x+".setDataSnapshotNumberAction";try{l.info("Updating the data snapshot id for the grid. ");var d=Object(i.v)(r);return u(function(e,t,r){return{type:n,payload:t,meta:{pageId:e,contextKey:r}}}(e,t,d)),s.EventManager.ReportComponentSuccess(c),Promise.resolve()}catch(e){var p="Updating data snapshot id failed with error : "+e.message;s.EventManager.ReportComponentFailure(c,Error(p))}}}}},E0SJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var i=r("Sscr"),a="attribute.options.set";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function n(e,t,r,n){var o=Object(i.v)(t);return{type:a,payload:n,meta:{pageId:e,contextKey:o,dataFieldName:r}}}},EGdP:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var i=r("Sscr"),a="form.setIsAutoSaving";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function n(e,t,r){var n=Object(i.v)(t);return{type:a,payload:{isAutoSaving:r},meta:{pageId:e,contextKey:n}}}},EK3O:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var i=r("c/eZ"),a=r("/SAa"),n=r("9r0m"),o=r("r2h9"),s=r("455M"),u=r("T2Xs"),l=r("j6Db"),c=r("8xrh"),d=r("bIXa"),p=r("RlP9"),h=r("MSit"),f=r("/j9Z"),m=r("F2uj"),g=r("Ww2r"),v=l.a+".Models.Lookups.MultiEntityTypeLookupInternalDataSetWrapper",b=function(e){function t(t,r,i,a,n){var s=e.call(this,r,null,i)||this;return s._previousAvailableViewIds=null,s._previousAvailableViews=null,s._selectedViewName=null,s.refreshDataSet=s.refreshDataSet.bind(s),s._ensureViewId=s._ensureViewId.bind(s),s.dataSetClass=3,s.targetEntity=t,s._viewId=a,s._viewType=n||o.b.savedview,s}return Object(i.__extends)(t,e),t.prototype._retrieveParameterDefinition=function(e,t,r){return Object(i.__assign)(Object(i.__assign)({},this.previousDataSetDefinition),{Type:s.a.Grid,ViewId:t,TargetEntityType:e,ExtraFilters:r})},t.prototype._ensureViewId=function(e,t){var r=this;return this.shouldUseLookupService()&&!this._viewId?(this._viewId=this.lookupViewId,Promise.resolve(this._viewId)):e(this.targetEntity,o.a.LOOKUP_VIEW,this._viewType).then((function(i){var a=n.a.toString(i);if(r._viewId&&a!==r._viewId){var s=e(r.targetEntity,o.a.LOOKUP_VIEW,r._viewType,new n.a(r._viewId)).then((function(e){return!!t||r._viewId})).catch((function(e){return u.a.error(l.a+": _ensureViewId encountered error, "+e),r.setErrorStatus(e),!1}));return t?Promise.resolve(!0):s}return r._viewId=a,!!t||r._viewId})).catch((function(e){return u.a.error(l.a+": _ensureViewId encountered error, "+e,[{name:"APIName",value:v}]),r.setErrorStatus(e),!1}))},t.prototype.setErrorStatus=function(t,r){var i=t,n=this.relevantQueryError();n&&r&&"function"==typeof r&&((i=Object(g.b)(r(),n.message))?n.parameter&&(i+=" "+n.parameter):i=a.a.UnknownErrorMessage),e.prototype.setErrorStatus.call(this,i,r)},t.prototype.refreshDataSet=function(t,r,i){var a=this,n=null,o=this.getEntityTypeName()||this.targetEntity;this.shouldUseLookupService()&&(this.lookupServiceEnabled=!1);try{r.startCustomFilter(this._pageId,this._controlName,this.contextToken),r.runPreSearch(this._pageId,this._controlName),r.runSetAdditionalParams(this._pageId,this._controlName),r.endCustomFilter(this._pageId,this._controlName,this.contextToken)}catch(e){}if(this.lookupCustomFilters=Object(d.a)(t(),this._pageId,this.contextToken,this.controlId,o),this.meFilterEnabled&&(Object(m.a)(t(),o,"ownerid")?this.lookupCustomFilters.push(c.a):n=r.getEntityMetadataAction(o,["ownerid"])),this.shouldUseQuickFindViewForLookup(t())){var s=this.filteringObj&&this.filteringObj.getFilter();this.lookupFilterString=s&&s.conditions&&s.conditions[0]&&s.conditions[0].value,this.lookupFilterString=this.lookupFilterString&&this.lookupFilterString.replace(/%$/g,"").replace(/\%/g,"*")}return this._ensureViewId(r.retrieveViewAction).then((function(){return e.prototype.updatePreviousDataSetParameterDefinition.call(a,a._retrieveParameterDefinition(a.targetEntity,a._viewId,a._passInConfigExtraFilters)),a.meFilterEnabled&&n?n.then((function(){return Object(m.a)(t(),o,"ownerid")&&a.lookupCustomFilters.push(c.a),e.prototype.refreshDataSet.call(a,t,r,i)})):e.prototype.refreshDataSet.call(a,t,r,i)}))},t.prototype.linkToParameter=function(t,r){e.prototype.linkToParameter.call(this,t,r),t.generateAdditionalAttributes=this._ensureViewId.bind(this,r.retrieveViewAction,!0)},t.prototype.retrieveDataSetObject=function(t,r,a,n){var o;if(this._pageId=r.id,this._controlName=Object(c.v)(r),a&&a.Parameters){var s=a.Parameters.value;if(this._passInConfigExtraFilters=[],s){this._controlName=this._controlName||s.Value,s.ExtraFilters&&(this._passInConfigExtraFilters=this._passInConfigExtraFilters.concat(s.ExtraFilters));var u=s.AdditionalTargetExtraFilters;u&&u.hasOwnProperty(this.targetEntity)&&(this._passInConfigExtraFilters=this._passInConfigExtraFilters.concat(u[this.targetEntity].slice(0)))}}var l=Object(i.__assign)(Object(i.__assign)({},a.Parameters[e.prototype.getPropKey.call(this)]),this._retrieveParameterDefinition(this.targetEntity,this._viewId,this._passInConfigExtraFilters)),d=Object(i.__assign)(Object(i.__assign)({},a),{Parameters:Object(i.__assign)(Object(i.__assign)({},a.Parameters),(o={},o[e.prototype.getPropKey.call(this)]=l,o))}),p=Object(i.__assign)(Object(i.__assign)({},r),{configuration:d}),h=e.prototype.retrieveDataSetObject.call(this,t,p,d,n);return this._updateAvailableViewIds(a,n,t,h),h},t.prototype.getPagingObject=function(){return this.pagingObj},t.prototype.updatePagingObject=function(){this.pagingObj.getHasNextPage()&&this.pagingObj.setPageLastIndex(this.pagingObj.getPageLastIndex()+1)},t.prototype.setViewId=function(e){this._viewId=e},t.prototype.updatePreviousOwnProps=function(e){this.previousOwnProps=e,this._pageId=e.id,this._controlName=Object(c.v)(e)},t.prototype.getRelationshipNameFromParameter=function(e){return e?e.FilterRelationshipName:null},t.prototype._updateAvailableViewIds=function(e,t,r,i){var a=this,o=!1,s=this._previousAvailableViewIds?this._previousAvailableViewIds.join():null,u=e.Parameters[this.getPropKey()],l=this.createLookupParameter(i,u),c=t,d=null,h=c&&c.viewIds&&c.viewIds.length>0?c.viewIds.join():null;if(h&&s!==h?(d=c.viewIds,o=!0):u.AvailableViewIds&&s!==u.AvailableViewIds&&(d=u.AvailableViewIds.split(","),o=!0),o){this._previousAvailableViews=[],d.forEach((function(e){var t=Object(p.c)(r,new n.a(e));t&&a._previousAvailableViews.push(t)})),this._previousAvailableViewIds=d.map((function(e){return e.replace(/[\{\}]/gi,"").toLocaleLowerCase()})),l.selectView=function(e){a._selectedViewName=e},l.availableViewNames=[];for(var f=0,m=this._previousAvailableViews.length;f<m;f++)this._previousAvailableViews[f]?l.availableViewNames.push(this._previousAvailableViews[f].title):l.availableViewNames.push("Unknown View")}},t.prototype.createLookupParameter=function(e,t){var r=new h.a(e,e.getViewId(),e.getTitle(),e.getTargetEntityType());return r.allowFilterOff=!!t.AllowFilterOff,r.disableQuickFind=!!t.DisableQuickFind,r.useMainFormDialogForCreate=!!t.UseMainFormDialogForCreate,r.useMainFormDialogForEdit=!!t.UseMainFormDialogForEdit,r.enableViewPicker=!1!==t.EnableViewPicker,r.targetEntityType=t.TargetEntityType,r.setMyRecordsOnlyFilter=this.setMyRecordsOnlyFilter.bind(this),r},t.prototype.retrieveView=function(e,t){var r;return this.previousDataSetDefinition&&this.previousDataSetDefinition.TargetEntityType?r=this.previousDataSetDefinition.TargetEntityType:this.previousDataSetDefinition&&this.previousDataSetDefinition.EntityName&&(r=this.previousDataSetDefinition.EntityName),r?t(r,o.a.LOOKUP_VIEW,o.b.savedview,e):(u.a.error(l.a+": retrieveView encountered error, Entity name is not specified for lookup",[{name:"APIName",value:l.a+".Models.Lookups.LookupSimpleObjectWrapper.retrieveView"}]),Promise.reject(new f.a("Entity name is not specified for lookup")))},t.prototype.getAvailableViews=function(){return this._previousAvailableViewIds||[]},t.prototype.getMissingDescriptorIds=function(){for(var e=[],t=this._previousAvailableViewIds?this._previousAvailableViewIds:[],r=function(r){i._previousAvailableViews&&0!==i._previousAvailableViews.length&&0!==i._previousAvailableViews.filter((function(e){return e.viewId&&e.viewId.guid===t[r]})).length||e.push(new n.a(t[r]))},i=this,a=0;a<t.length;a++)r(a);return e},t.prototype.retrieveCurrentView=function(t,r){if(null!==this._previousAvailableViews&&null!==this._selectedViewName)for(var i=0,a=this._previousAvailableViews.length;i<a;i++)if(this._previousAvailableViews[i]&&this._previousAvailableViews[i].title===this._selectedViewName)return Promise.resolve(this._previousAvailableViews[i]);return e.prototype.retrieveCurrentView.call(this,t,r)},t}(a.a)},EpyZ:function(e,t,r){"use strict";r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return v})),r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return b}));var i=r("455M"),a=r("otJc"),n=r("pmTS"),o=r("7EJx"),s=r("F2uj"),u=r("9rlF"),l=r("Sscr"),c=r("QAhb"),d=r("Ygmu"),p=r("sRkF"),h=r("TCcM"),f=r("uQP8");function m(e,t,r,n,o,l,p,f,m){switch(n){case i.a.WholeTimeZone:return function(e,t){var r={},i=t.timeZoneDefinitionByCode;for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];r[o.timeZoneCode]=a.w(o.timeZoneCode,t)}return e.TimeZoneByCode=r,e}(e,r);case i.a.WholeLanguage:return function(e,t,r){for(var i={},n=t.enabledLanguages,o=0;o<n.length;o++){var s=n[o];i[s]=a.n(s,r)}return e.LanguageByCode=i,e}(e,t,o)}return l===d.a.Rollup?function(e,t,r,i){var n=Object(s.d)(t,r),o="_date",l="_state",d=new c.a(r,i),p=n[e.LogicalName],f=p.LogicalName;p.IsBaseCurrency&&(f=f.substring(0,f.length-5));var m=Object(u.c)(Object(h.j)(t,d,f+o)),g=Object(u.c)(Object(h.j)(t,d,f+l)),v=Object(s.a)(t,r,e.LogicalName),b=a.z(t,v);return e.lastUpdatedValue=m?a.a(m,"date",b.cultureInfo,b):new Date(m),e.rollupStateValue=Number(g),e.rollupStateField=f+l,e.lastUpdatedField=f+o,e.calculatedFieldValid=!1,e.rollupValid=!0,e.recalculate=null,e}(e,p,f,m):e}function g(e,t,r,i,a){var n=!1,o=new c.a(t,r),s=Object(h.y)(e,a,o,i.lastUpdatedField),u=Object(h.y)(e,a,o,i.rollupStateField);return(s>i.lastUpdatedValue||u!==i.rollupStateValue)&&(i.lastUpdatedValue=s,i.rollupStateValue=u,n=!0),n}function v(e,t,r,i,u,c){var d=e.formatted,h=Object(o.w)(t),m=p.a.UserLocal,g=Object(n.c)()(t).response;if(!g.formatInfoCultureName||!g.numberFormatInfo||!g.dateTimeFormatInfo)return d;var v=new Sys.CultureInfo(g.formatInfoCultureName,g.numberFormatInfo,g.dateTimeFormatInfo),b=Object(l.x)(c),y=Object(f.a)(t,r.id);if(!(y&&y.metadata&&y.metadata[b]&&y.metadata[b].attributes&&y.metadata[b].attributes[u]&&y.metadata[b].attributes[u].Format))return d;var O=Object(s.a)(t,c.entityTypeName,u),_=a.z(t,O),P=y.metadata[b].attributes[u].Format,S=e.value;if(_.controlAttributes.Behavior===p.a.TimeZoneIndependent||_.controlAttributes.Behavior===p.a.DateOnly){m=p.a.None;var w=new Date(e.value);S=new Date(w.getTime()+6e4*w.getTimezoneOffset())}else S=a.D(d,_,v,_.controlAttributes.Format);return a.j(S,h,v,P,m)}function b(e,t){var r=e.Parameters[t];if(3===r.Usage){var i=r.Attributes;return i.LogicalName||i.EntityLogicalName}return r.Value}},IUjT:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"f",(function(){return l})),r.d(t,"a",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"d",(function(){return h}));var i=r("TCcM"),a=r("G7N+"),n=r("eYbs"),o=r("uQP8");function s(e,t,r,i){var a,n,s;return null===(s=null===(n=null===(a=Object(o.a)(e,t))||void 0===a?void 0:a.__lookupKeys)||void 0===n?void 0:n[r])||void 0===s?void 0:s[i]}function u(e,t,r){var i=Object(n.b)(e,t);return i&&r&&i[r]?i[r]:null}function l(e,t,r,i){var a=s(e,i,t||"placeholderEtn",r);return a&&a.metadataKey}function c(e,t,r,i,a){var n=s(e,a,t||"placeholderEtn",r);return n&&n.dataKeys?n.dataKeys[i]:null}function d(e,t,r){var i=u(e,t,r||"placeholderEtn");return i&&i.view?i.view:null}function p(e,t,r,a,n){var o=function(e,t,r,i){var a=function(e,t){if(!e||!e.data||!e.data.lists)return null;return e.data.lists[t]}(e,t);if(a){if(i)return a.records;if(a.pages&&r>0){var n=a.pages[r];if(n)return a.records.slice(n.startIndex,n.startIndex+a.pageSize)}}return null}(e,t,r,n),s=[];if(!o)return null;for(var u=0,l=o;u<l.length;u++){var c=l[u],d=Object(i.b)(c)(e,c.etn);d&&s.push(d)}return s}function h(e,t){var r=Object(i.n)(e,t);return r?r.initialized:a.a.Uninitialized}},JWXX:function(e,t,r){"use strict";r.d(t,"f",(function(){return P})),r.d(t,"e",(function(){return w})),r.d(t,"a",(function(){return b})),r.d(t,"c",(function(){return y})),r.d(t,"b",(function(){return O})),r.d(t,"d",(function(){return _}));var i=r("9PvT"),a=r("t8f4"),n=r("lMVv"),o=r("F2uj"),s=r("Eoze"),u=r("QAhb"),l=r("kKaT"),c=r("9uN/"),d=r("TCcM"),p=r("olrR"),h=r("r2h9"),f=r("qC0c"),m=r("ME4N"),g=r("RlP9"),v=r("gBKR"),b="msdyn_postconfig",y="msdyn_entityname",O="msdyn_configurewall",_="statecode";function P(e){return{type:"postconfigs.retrieve.async",execute:function(e,t){var r=e.dispatch,i=e.getState,n=Object(d.i)(i(),b);if(n){var o=[];for(var s in n)o.push(n[s].identifier);return r(Object(l.c)(o)),Promise.resolve()}var u=function(){var e=sessionStorage.getItem("PostConfigs");if(null!=e)return JSON.parse(e)}();return u?(I(u,r,i),Promise.resolve()):r(Object(a.e)(b,"?$select=msdyn_configurewall,statecode,msdyn_entityname")).then((function(e){return function(e){try{sessionStorage.setItem("PostConfigs",JSON.stringify(e))}catch(e){}}(e),I(e,r,i),Promise.resolve()}),(function(e){Object(c.d)(e,t,"TimelineWall.retrievePostConfigs","postconfigs.retrieve.async")}))}}}function S(e,t){return new Promise((function(r){e(function(e){return{type:"postconfigquickfindviews.retrieve.async",execute:function(t,r){var i=t.dispatch,a=t.getState;return i(Object(p.a)(e,h.a.QUICKFIND_SEARCH,h.b.savedview)).then((function(e){var t=null;return e&&(t=Object(g.c)(a(),e)),Promise.resolve(t)}),(function(e){Object(c.d)(e,r,"TimelineWall.retrieveQuickFindViewDescriptor","postconfigquickfindviews.retrieve.async")}))}}}(t)).then((function(e){r(e)}))}))}function w(e,t,r){var i={};return null!=t&&(Object(f.b)(r,m.t.TimelineWallPostsEnhancedMentions)||Object(f.b)(r,m.t.October2020Update)&&Object(f.b)(r,m.t.TimelineWallOctober2020UxUpdate)&&!Object(f.b)(r,m.t.TimelineWallShouldDisablePostMentionImprovements))&&e.forEach((function(e){i[e]=function(){return S(t,e)}})),i}function I(e,t,r){var a,c=r();if(e.value&&e.value.length>0){for(var d=[y,_,O],p=Object(n.h)(c,b),h=Object(o.d)(c,b),f=e.value.length,m=[],g={},P=0;P<f;P++){var S=e.value[P];(null==S?void 0:S.msdyn_entityname)&&0===(null==S?void 0:S.statecode)&&(g[S.msdyn_entityname]=[]);var w=Object(i.d)(c,S,p,h,d,null,null),I=u.a.fromLegacyEntityReference(w.get_identifier());t(Object(s.g)(I,w)),m.push(I)}g&&(null===(a=Object.keys(g))||void 0===a?void 0:a.length)>0&&t(Object(v.e)(g)),m.length>0&&t(Object(l.c)(m))}}},LnR7:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i}));var i="msdyn_forecastinstance";function a(e,t){e.dispatch,e.getState;return new Promise((function(e,t){Xrm.WebApi.retrieveMultipleRecords(i,"?fetchXml=\n<fetch version='1.0' mapping='logical' distinct='true' >\n\t<entity name='msdyn_forecastinstance'>\n\n\t\t<attribute name='msdyn_forecastdefinitionid'/>\n\n\t\t<link-entity name='msdyn_forecastdefinition' from='msdyn_forecastdefinitionid' to='msdyn_forecastdefinitionid' alias='fd'>\n\t\t\t<attribute name='msdyn_forecastdefinitionname'/>\n\t\t\t<attribute name='modifiedon'/>\n\t\t</link-entity>\n\n\t\t<filter type='and'> \n\t\t\t<condition attribute='ownerid' operator='eq-userid'/> \n\t\t</filter>\n\t\t\n\t</entity>\n\n</fetch>\n").then((function(t){var r=[],i=t.entities,a=r.length;i.sort((function(e,t){return new Date(t["fd.modifiedon"]).getTime()-new Date(e["fd.modifiedon"]).getTime()}));for(var n=0;n<i.length;n++){var o=a+n+":"+i[n]._msdyn_forecastdefinitionid_value;r.push({value:o,text:i[n]["fd.msdyn_forecastdefinitionname"],isDefault:!1})}r.length>0&&(r[0].isDefault=!0),e(r)}))}))}function n(e,t,r){var i=null,a=[];return a.push({attributeName:"msdyn_forecastdefinitionid",conditionOperator:0,value:e}),a&&a.length>0&&(i={conditions:a,filterOperator:1}),i}},ME4N:function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return v})),r.d(t,"r",(function(){return b})),r.d(t,"g",(function(){return y})),r.d(t,"t",(function(){return O})),r.d(t,"s",(function(){return _})),r.d(t,"o",(function(){return P})),r.d(t,"u",(function(){return S})),r.d(t,"q",(function(){return n})),r.d(t,"f",(function(){return o})),r.d(t,"i",(function(){return s})),r.d(t,"p",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"m",(function(){return d})),r.d(t,"k",(function(){return p})),r.d(t,"a",(function(){return h})),r.d(t,"h",(function(){return w})),r.d(t,"j",(function(){return f})),r.d(t,"n",(function(){return m})),r.d(t,"d",(function(){return I}));var i=r("ib+O"),a=r("qC0c"),n="notescontrol",o="DashboardControl",s="OneNoteIntegration",u="SharePointS2S",l="Personal",c="postcomment",d="systemusers",p="Posts",h=-2147164125,f="dashboard",m={PerfOrgDbOrgSettings:"EnableActivitiesTimeLinePerfImprovement",FirstStage:1,SecondStage:3},g={Email:"email",Task:"task",PhoneCall:"phonecall",Appointment:"appointment",Letter:"letter",Fax:"fax",RecurringAppointment:"recurringappointmentmaster",SocialActivity:"socialactivity",CampaignActivity:"campaignactivity",OpportunityClose:"opportunityclose",OrderClose:"orderclose",QuoteClose:"quoteclose",IncidentResolution:"incidentresolution",Annotations:"annotation",User:"systemuser",OwnerId:"ownerid",ScheduledStart:"scheduledstart",ScheduleEnd:"scheduleend",Description:"description",Owner:"owner",Subject:"subject",Organizer:"organizer",ActualStart:"actualstart",ModifiedOn:"modifiedon",ModifiedBy:"modifiedby",ActualRevenue:"actualrevenue",From:"from",StatusCode:"statuscode",Notes:"annotation",UserName:"username",RegardingObjectId:"regardingobject",CreatedOn:"createdon",NoteText:"notetext",Text:"text",ActivityModule:"Activities",NotesModule:"Notes",PostsModule:"Posts",AnnotationEntity:"annotation",PostsEntity:"post",ActivityPointerEntity:"activitypointer",PatternStartDate:"patternstartdate",AutoPost:"autopost",UserPost:"manualpost",CreatedBy:"createdby",FileName:"filename",FileSize:"filesize",IsDocument:"isdocument",MimeType:"mimetype"},v={letter:[g.From,g.ModifiedOn,g.Description],fax:[g.From,g.ModifiedOn,g.Description],email:[g.From,g.ModifiedOn,g.Description],task:[g.ModifiedBy,g.ModifiedOn,g.Description],phonecall:[g.From,g.ModifiedOn,g.Description],appointment:[g.Organizer,g.ScheduledStart,g.Description],RecurringAppointment:[g.OwnerId,g.PatternStartDate,g.Description],opportunityclose:[g.OwnerId,g.ModifiedOn,g.Subject,g.ActualRevenue],incidentresolution:[g.CreatedBy,g.ModifiedOn,g.Subject,g.Description],annotation:[g.ModifiedOn,g.NoteText,g.CreatedBy,g.CreatedOn,g.FileName,g.FileSize,g.IsDocument,g.MimeType,g.ModifiedBy],post:[g.CreatedOn],postcomment:[]},b={annotation:[g.NoteText,g.CreatedBy,g.CreatedOn,g.FileName,g.FileSize,g.IsDocument,g.MimeType,g.ModifiedBy]},y={bigint:i.a.Number,boolean:i.a.Boolean,customer:Object(i.c)(),datetime:i.a.DateTime,decimal:i.a.Number,double:i.a.Number,entityname:i.a.String,integer:i.a.Number,lookup:Object(i.d)(),memo:i.a.String,money:i.a.Number,owner:Object(i.e)(),partylist:i.a.PartyList,picklist:Object(i.d)(),state:i.a.String,status:i.a.String,string:i.a.String,uniqueidentifier:i.a.UniqueIdentifier,virtual:i.a.Virtual},O={TimelineWallActivities:"TimelineWallActivities",TimelineWallNotes:"TimelineWallNotes",TimelineWallPosts:"TimelineWallPosts",TimelineWallUserPosts:"TimelineWallUserPosts",TimelineWallFilters:"TimelineWallFilters",TimelineWallWhatsChanged:"TimelineWallWhatsChanged",TimelineWall:"TimelineWall",TimelineWallNotesAnalysis:"NotesAnalysisFeature",TimelineWallPostsEnhancedMentions:"TimelineWallPostsEnhancedMentions",TimelineWallContextualEmail:"FCB.ContextualEmailExperience",TimelineWallNotesOffline:"FCB.EnableNotesOnTimelineWallInOffline",TimelineWallContexual2020Update:"FCB.ContextualTimeline2020Update",TimelineWallKeywordSearch:"FCB.TimelineWall.KeywordSearch",October2020Update:"October2020Update",TimelineWallOctober2020UxUpdate:"TimelineWallOctober2020UxUpdate",TimelineWallShouldDisablePostMentionImprovements:"TimelineWallShouldDisablePostMentionImprovements"},_={Label:"Label",UClientUniqueName:"UClientUniqueName",UClientModules:"UClientModules",UClientShowFilterPane:"UClientShowFilterPane",UClientExpandFilterPane:"UClientExpandFilterPane",UClientEnableSearch:"UClientEnableSearch",UClientActivities:"UClientActivities",UClientActivityRollupType:"UClientActivityRollupType",UClientCreateActivityUsing:"UClientCreateActivityUsing",UClientDisplayActivityUsing:"UClientDisplayActivityUsing",UClientRecordPerPage:"UClientRecordPerPage",UClientOrderBy:"UClientOrderBy",UClientSortActivitiesByValue:"UClientSortActivitiesByValue",UClientActivityCardMap:"UClientActivityCardMap",UClientDisplayActivityHeaderUsing:"UClientDisplayActivityHeaderUsing",UClientDefaultModuleForCreateExperience:"UClientDefaultModuleForCreateExperience",UClientExpandRecord:"UClientExpandRecord",UClientEnableWhatsNewFilter:"UClientEnableWhatsNewFilter",UClientActivitiesConfigurationJSON:"UClientActivitiesConfigurationJSON",UClientNotesConfigurationJSON:"UClientNotesConfigurationJSON",UClientPostsConfigurationJSON:"UClientPostsConfigurationJSON",UClientDefaultFilterJSON:"UClientDefaultFilterJSON"},P={Read:"Read",Create:"Create",Write:"Write",Delete:"Delete",Assign:"Assign",Share:"Share",Append:"Append",AppendTo:"AppendTo"},S={SortActivitiesByValueDefault:"modifiedon",Timeline:"Timeline",OrderByDefault:"descending",CreateActivityDefault:"quickcreateform",DisplayActivityDefault:"defaultfields",DisplayActivityHeaderDefault:"defaultformat",PostsModule:"Posts",UserPostsModule:"UserPosts",ActivitiesModule:"Activities",NotesModule:"Notes",ActivitiesListSupported:function(e){return[g.Task,g.Email,g.PhoneCall,g.Appointment,g.Letter,g.Fax,g.RecurringAppointment,g.SocialActivity,g.CampaignActivity,g.OpportunityClose,g.OrderClose,g.QuoteClose,g.IncidentResolution].filter((function(t){switch(t){case g.RecurringAppointment:return Object(a.b)(e,"HybridDialog.AppointmentRecurrence");case g.Letter:case g.Fax:return Object(a.b)(e,"LetterAndFaxVisibleOnTLW");default:return!0}}))},SupportedModules:[{moduleName:"Notes",entityName:"annotation",sortByPrimary:"modifiedon"},{moduleName:"Posts",entityName:"post",sortByPrimary:"modifiedon"},{moduleName:"Activities",entityName:"activitypointer",sortByPrimary:"modifiedon",sortBySecondary:"activityid"}],DefaultModuleForCreateExperience:"Notes"};var w={Forbidden:"Forbidden"},I={PanelHeight:600,PanelWidth:840,SupportedUnifiedClientApps:["msdynce_saleshub"]}},MSit:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r("c/eZ"),a=function(e){function t(t,r,i,a){var n=e.call(this,t,r,i,a)||this;return Object.assign(n,t),n}return Object(i.__extends)(t,e),t.prototype.selectView=function(e){throw new Error("Not wrapped")},t.prototype.getRecentItems=function(){throw new Error("Not Replaced")},t.prototype.getLookupConfiguration=function(){throw new Error("Not Replaced")},t.prototype.getAllViews=function(){throw new Error("Not Replaced")},t.prototype.getDataSetParameter=function(e,t){throw new Error("Not Replaced")},t.prototype.getDefaultViewId=function(e){throw new Error("Not Replaced")},t.prototype.setMyRecordsOnlyFilter=function(e){throw new Error("Not Replaced")},t.prototype.sendLookupRequest=function(e,t,r,i,a){throw new Error("Not Replaced")},t.prototype.runPreSearch=function(){throw new Error("Not Replaced")},t.prototype.setRelatedFilter=function(e){throw new Error("Not Replaced")},t}(r("aqxQ").a)},NLYP:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var i=r("C+/u"),a=r("8Pwi"),n=r("yGoS"),o=r("lMVv"),s=r("70DF"),u=function(){function e(e,t){this._attribute=e,this._extendedGroupBys=new Array,this._chartDefinition=t,this._addExtendedGroupBys(),this._initializeOrderType()}return Object.defineProperty(e.prototype,"groupAttribute",{get:function(){return this._attribute},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extendedGroupBys",{get:function(){return this._extendedGroupBys},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"descending",{get:function(){return this._descending},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasOrder",{get:function(){return this._hasOrder},enumerable:!1,configurable:!0}),e.prototype._initializeOrderType=function(){for(var e=this._attribute.entity.orderByAttributes,t=0;t<e.length;t++){var r=e[t];if(r.aliasName===this._attribute.aliasName)return this._hasOrder=!0,void(this._descending=r.descending)}},e.prototype._addExtendedGroupBys=function(){this._addPrimaryFieldGroupByforPrimaryKey(),this._addDateGroupBys()},e.prototype._addDateGroupBys=function(){if(this._attribute.dateTimeGrouping){for(var e=-1,t=this._attribute.entity.orderByAttributes,r=0;r<t.length;r++){var a=t[r];if(a.aliasName===this._attribute.aliasName){e=r,this._hasOrder=!0,this._descending=a.descending;break}}switch(-1===e&&(Object(i.h)(this._attribute.entity,this._attribute,!0,!1,t.length),e=t.length-1,this._hasOrder=!0,this._descending=!1),this._attribute.dateTimeGrouping.groupingType){case s.a.FISCAL_YEAR:case s.a.FISCAL_PERIOD:case s.a.YEAR:return;case s.a.WEEK:case s.a.MONTH:case s.a.QUARTER:this._addGroupingAndOrder(s.a.YEAR,this.descending,e);break;case s.a.DAY:this._addGroupingAndOrder(s.a.MONTH,this.descending,e),this._addGroupingAndOrder(s.a.YEAR,this.descending,e)}}},e.prototype._addPrimaryFieldGroupByforPrimaryKey=function(){var e=this._attribute.entity,t=Object(o.h)(e.getState(),e.entityName).PrimaryIdAttribute;if(t&&this._attribute.attributeName===t){var r=Object(o.h)(e.getState(),e.entityName).PrimaryNameAttribute,n=e.entityName+"_"+r+"_extendedGroupByAttribute",s=Object(a.a)(r,n,e);if(this._attribute.hasGroupBy){for(var u=0;u<e.groupByAttributes.length;u++){var l=e.groupByAttributes[u];if(l.attributeName===r)return void this._extendedGroupBys.push(l)}s.hasGroupBy=!0,Object(i.g)(e,s.attributeName,s.aliasName,"true",null,null,null),e.groupByAttributes.push(s)}else Object(i.g)(e,s.attributeName,s.aliasName);e.attributes.push(s),e.attributesByName.set(s.aliasName,s),this._chartDefinition.allAttributeNamesByEntity.has(e.entityName)&&this._chartDefinition.allAttributeNamesByEntity.get(e.entityName).set(s.attributeName,s),this._extendedGroupBys.push(s)}},e.prototype._addGroupingAndOrder=function(e,t,r){var o=this._attribute.entity,u=this._attribute&&this._attribute.aliasName?this._attribute.aliasName+"_"+s.a[e]:Object(a.b)(o.entityName,this._attribute.attributeName),l=Object(a.a)(this._attribute.attributeName,u,o,n.a(e));l.hasGroupBy=!0,o.groupByAttributes.push(l),o.attributes.push(l),o.attributesByName.set(l.aliasName,l),Object(i.h)(o,l,!0,t,r),Object(i.g)(o,l.attributeName,l.aliasName,"true",null,n.c(e),"true"),this._extendedGroupBys.push(l)},e}();
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function l(e,t,r,n){var s=e.getAttribute("alias"),l=t.allMeasureInfo.get(s),c={measureAttribute:l.attributeExpression,parentMeasureCollection:r,parentCategory:n};return function(e,t,r){if(!e.parentCategory.primaryGroupBy)if(!t.groupByList||t.groupByList.length<=0)e.parentCategory.primaryGroupBy=function(e,t){if(e.hasAggregate)return null;var r=Object(a.a)(Object(o.h)(e.getState(),e.entityName).PrimaryIdAttribute,null,e);return Object(i.g)(e,r.attributeName,null),e.attributes.push(r),e.attributesByName.set(r.attributeName,r),t.allAttributeNamesByEntity.has(e.entityName)&&t.allAttributeNamesByEntity.get(e.entityName).set(r.attributeName,r),new u(r,t)}(t.attributeExpression.entity,r);else if(e.parentCategory.primaryGroupByAlias)for(var n=0;n<t.groupByList.length;n++){var s=t.groupByList[n];if(s.aliasName===e.parentCategory.primaryGroupByAlias){e.parentCategory.primaryGroupBy=new u(s,r);break}}else e.parentCategory.primaryGroupBy=new u(t.groupByList[0],r);if(!e.parentMeasureCollection.secondaryGroupBys&&(e.parentMeasureCollection.secondaryGroupBys=new Array,t.groupByList&&t.groupByList.length>1))for(n=0;n<t.groupByList.length;n++){var l=t.groupByList[n];l!==e.parentCategory.primaryGroupBy.groupAttribute&&e.parentMeasureCollection.secondaryGroupBys.push(new u(l,r))}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */(c,l,t),c}function c(e,t,r){var i={measures:new Array,chartDataDefinition:t,secondaryGroupBys:null};return i.measures.push(l(e.getElementsByTagName("measure")[0],i.chartDataDefinition,i,r)),i}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var d=function(){function e(e,t){this._attributeExpression=e,this._groupByList=t}return Object.defineProperty(e.prototype,"groupByList",{get:function(){return this._groupByList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributeExpression",{get:function(){return this._attributeExpression},enumerable:!1,configurable:!0}),e}(),p=function(){function e(e){this._getState=e,this._allAttributeNamesByEntity=new Map,this._groupByList=new Array,this._allMeasureInfo=new Map,this._allAttributes=new Map}return Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComparisonChart",{get:function(){return this._isComparisonChart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityExpression",{get:function(){return this._entityExpression},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupByList",{get:function(){return this._groupByList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allMeasureInfo",{get:function(){return this._allMeasureInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allAttributeNamesByEntity",{get:function(){return this._allAttributeNamesByEntity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"categoryColumns",{get:function(){var e=new Array;if(this._category.primaryGroupBy){this._category.primaryGroupBy.groupAttribute.attributeName!==Object(o.h)(this._getState(),this.category.primaryGroupBy.groupAttribute.entity.entityName).PrimaryIdAttribute&&e.push(this._category.primaryGroupBy.groupAttribute);for(t=0;t<this._category.primaryGroupBy.extendedGroupBys.length;t++)e.push(this._category.primaryGroupBy.extendedGroupBys[t])}else for(var t=0;t<this._entityExpression.attributes.length;t++){var r=this._entityExpression.attributes[t],i=r.aliasName?r.aliasName:r.attributeName;this._allMeasureInfo.has(i)||e.push(r)}return e},enumerable:!1,configurable:!0}),e.prototype.isOrderPresent=function(){if(this._entityExpression.orderByAttributes.length>0)return!0;for(var e=this._entityExpression.linkedEntities,t=0;t<e.length;t++)if(e[t].orderByAttributes.length>0)return!0;return!1},e.prototype.isOrderPresentOnPrimaryGroupBy=function(){return!!(this._category&&this._category.primaryGroupBy&&this._category.primaryGroupBy.hasOrder)},e.prototype.isGroupByFromNestedLinkEntity=function(){for(var e=0,t=this._entityExpression.linkedEntities;e<t.length;e++){var r=t[e];return this._isGroupByFromChildLinkEntity(r)}return!1},e.prototype._isGroupByFromChildLinkEntity=function(e){for(var t,r=0,i=e.linkedEntities;r<i.length;r++){var a=i[r];return(null===(t=null==a?void 0:a.groupByAttributes)||void 0===t?void 0:t.length)>0||this._isGroupByFromChildLinkEntity(a)}return!1},e.prototype.parserDataDefinition=function(e){var t=new DOMParser;this._dataXmlDoc=t.parseFromString(e,"text/xml"),function(e){var t=e.getElementsByTagName("parsererror");if(t&&t.length>0)throw new Error("Unreadable Chart Definition")}(this._dataXmlDoc),this._entityExpression=Object(i.b)(null,null,null,this._getState);var r=this._dataXmlDoc.getElementsByTagName("datadefinition")[0].getElementsByTagName("fetchcollection")[0].getElementsByTagName("fetch")[0];Object(i.e)(this._entityExpression,r),this._buildMeasureInformationFromFetch(this._entityExpression)},e.prototype.addGroupBys=function(e){this._groupByList.push(e),this._removeAliasFromCategoryNode()},e.prototype._removeAliasFromCategoryNode=function(){var e=this._dataXmlDoc.getElementsByTagName("datadefinition")[0].getElementsByTagName("categorycollection")[0].getElementsByTagName("category")[0];e&&e.removeAttribute("alias")},e.prototype.buildCategory=function(){this._buildChartMeasures(),this._isComparisonChart=this._category.measureCollections[0].secondaryGroupBys.length>0},e.prototype._buildChartMeasures=function(){var e=this._dataXmlDoc.getElementsByTagName("datadefinition")[0].getElementsByTagName("categorycollection")[0].getElementsByTagName("category")[0];if(!e)throw new Error("data xml missing category node!");this._category=function(e,t){for(var r={chartDataDefinition:t,measureCollections:new Array,primaryGroupByAlias:e.getAttribute("alias"),primaryGroupBy:null},i=e.getElementsByTagName("measurecollection"),a=0;a<i.length;a++)r.measureCollections.push(c(i[a],r.chartDataDefinition,r));return r}(e,this)},e.prototype._buildMeasureInformationFromFetch=function(e){var t,r=e.entityName;this._allAttributeNamesByEntity.has(r)?t=this._allAttributeNamesByEntity.get(r):(t=new Map,this._allAttributeNamesByEntity.set(r,t));for(var i=e.attributes,a=0;a<i.length;a++){var n=i[a];t.set(n.attributeName,n);var o=(n.aliasName,n.aliasName);this._allAttributes.set(o,n),n.hasGroupBy?this._groupByList.push(n):this._allMeasureInfo.set(h(n),new d(n,this._groupByList))}for(a=0;a<e.linkedEntities.length;a++)this._buildMeasureInformationFromFetch(e.linkedEntities[a])},e}();
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function h(e){return e.aliasName?e.aliasName:e.attributeName}var f=r("9r0m"),m=r("z9yS"),g=r("r2h9"),v=function(){function e(e,t,r,i,a){this._initialized=!1,this._isWebResourceChart=!1,this._isRollUpView=!1,this.getState=e,this._visualizationId=t,this._viewId=r,this._visualizationType=i||m.a.savedvisualization,this._viewType=a||g.b.savedview}return Object.defineProperty(e.prototype,"dataDefinition",{get:function(){return this._dataDefinition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fetchXml",{get:function(){return Object(i.d)(this._dataDefinition.entityExpression)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewDefinition",{get:function(){return this._viewDefinition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewXml",{get:function(){return this._viewDefinition?Object(i.d)(this._viewDefinition):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewId",{get:function(){return this._viewId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visualizationId",{get:function(){return this._visualizationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewType",{get:function(){return this._viewType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visualizationType",{get:function(){return this._visualizationType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isWebResourceChart",{get:function(){return this._isWebResourceChart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"presentationXml",{get:function(){return this._presentationXml},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTitle",{get:function(){return this._viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewEntityLogicalName",{get:function(){return this._viewEntityLogicalName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chartName",{get:function(){return this._chartName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"chartPrimaryEntityTypeCode",{get:function(){return this._chartPrimaryEntityTypeCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRollUpView",{get:function(){return this._isRollUpView},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e,t,r,a,n,o,s,u,l){void 0===u&&(u=!1),void 0===l&&(l=!1),e&&(this._dataDefinition=new p(this.getState),this._dataDefinition.parserDataDefinition(e)),t&&(this._viewDefinition=Object(i.b)(null,null,null,this.getState),Object(i.f)(this._viewDefinition,t)),this._presentationXml=r,this._isWebResourceChart=u,this._viewTitle=a,this._viewEntityLogicalName=n,this._chartName=o,this._chartPrimaryEntityTypeCode=s,this._isRollUpView=l,(u||e&&t)&&(this._initialized=!0)},e.prototype.getStorageKey=function(){var e="",t="",r="";return this.initialized&&!this.isWebResourceChart&&(e=this.viewDefinition.linkedEntities.map((function(e){return Object(i.d)(e)})).join(""),t=this.dataDefinition.entityExpression.linkedEntities.map((function(e){return Object(i.d)(e)})).join(""),r=this.viewDefinition.filters.join("")),(this.viewEntityLogicalName||"")+":"+f.a.toString(this.viewId)+":"+r+":"+e+":"+f.a.toString(this.visualizationId)+":"+t},e}()},ObKm:function(e,t,r){"use strict";r.d(t,"a",(function(){return K})),r.d(t,"b",(function(){return Z}));var i=r("g9bv"),a=r("yHpA"),n=r("/j9Z");function o(e,t){return{type:"dataSnapshot.undoChanges.async",execute:function(r,i){var o=r.dispatch,u=r.getState,l=Object(a.b)(u(),e);if(l){if(0===Object.keys(l.activeChanges).length)return Promise.resolve();var c={};if(t&&t.length>0){if(c=Object.keys(l.activeChanges).reduce((function(e,r){return-1===t.indexOf(r)&&(e[r]=l.activeChanges[r]),e}),c),Object.keys(c).length===Object.keys(l.activeChanges).length)return Promise.resolve();o(s(e,c))}else o(s(e,c));return Promise.resolve()}return Promise.reject(new n.a("Snapshot does not exist"))}}}function s(e,t){return{type:i.a,payload:t,meta:{snapshotId:e,flavor:1}}}var u=r("sOTk"),l=r("HSdq"),c=r("TVue"),d=r("rQCE"),p=r("QAhb"),h=r("jJRu"),f=r("aGOT"),m=r("Cfob"),g=r("kk/C"),v=r("9r0m"),b=r("cAHA"),y=r("GHPx"),O=r("Sscr"),_=r("zsi3"),P=r("+ieV"),S=r("Ww2r"),w=r("mGpW"),I=r("11yk"),j=r("VWqI"),C=r("fE8x"),D=r("F2uj"),E=r("i8/j"),T=r("WS0f"),N=r("wUng"),F=r("3/Bp"),R=r("cZkS"),A=r("qC0c"),k=r("TCcM"),M=r("hCnb"),L=r("POQL"),V=r("2p2B"),x=r("+Xnp"),B=r("zXhH"),U=r("2rJs"),z=r("OTOS"),W=r("Srej"),q=r("t8f4"),G=r("feNe");function Q(e,t,r){return{type:G.a,payload:{identifier:e,attributeName:t,fileState:{operationType:L.a.Delete,fileProgress:r}}}}function H(e,t){return{type:"delete.file",execute:function(r,i){var a=r.dispatch,n=(r.getState,i.TraceManager.getTracer("DownloadFile"));return n.info("deleteFile : Starting to delete the file associated with . fileAttributeName = "+t+" and target entity = "+e.etn),a(Object(q.c)(e,t)).then((function(){return a(Q(e,t,L.b.Finished)),Promise.resolve()})).catch((function(r){if(r)return a(Q(e,t,L.b.Failed)),n.error("deleteFile : Failed to delete the file associated with . fileAttributeName = "+t+" and target entity = "+e.etn),Promise.reject(r)}))}}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function K(e,t,r,n,s,I,M,L){return{type:"control.update.value",sync:!0,execute:function(V,U){var W,q,G,Q=V.dispatch,Y=V.getState,Z=Y(),J=Object(u.g)(Z,e),$=M&&s&&I,ee=!!s;if($){var te=Object(C.c)(Z),re=Object(C.b)(Z);(te||re)&&"Dashboard"!==Object(u.l)(Z,e)||(n=!0),q=Object(O.f)(L,new v.a(I),s),W=new p.a(s,new v.a(I))}else ee?(q=L,W=new p.a(s,I?new v.a(I):v.a.EMPTY),G=q.relationshipName):(q=L||Object(O.j)(Z,e),W=new p.a(J.entityTypeName,J.id));var ie=Object(l.ac)(Z,e,q),ae=!r||J.isOfflineSyncError;ae&&!J.isOfflineSyncError&&(Object(c.a)(Z,e)<d.a.OnLoadReady||Object(l.mb)(Z,{id:e},q))&&(ae=!1);var ne=ae?function(e,t,r,i){var n={};for(var o in t)n[o]=Object(a.d)(e,i,r,o);return n}(Z,t,W,ie):void 0,oe=Object(y.a)(Z,ie,W,t,!0,Object(O.s)(q),U.TraceManager.getTracer("Forms.UpdateFieldValue"),e,Q,G,r),se=Object.keys(oe);if(0!==se.length){if(J.isOfflineSyncError){for(var ue=!0,le=0;le<Object.keys(oe).length;le++){var ce=Object(z.b)(Z,e);if(!Object(T.a)(ce)){var de=Object(E.j)(Z,ce);if(!Object(T.a)(de)&&Object(T.a)(de.Controls[Object.keys(oe)[le]])){ue=!1;break}}if(!(ue=Object(u.m)(Z,e)?Object(j.f)(Z,W.etn,Object.keys(oe)[le],x.a.CanCreate,null==W?void 0:W.id):Object(j.f)(Z,W.etn,Object.keys(oe)[le],x.a.CanUpdate,null==W?void 0:W.id)))break}var pe="LOCID_RESOLVE_INFO_TEXT",he=_.a.information;ue||(pe="LOCID_RESOLVE_WARNING_TEXT",he=_.a.warning),Q(Object(w.e)([pe])).then((function(){Q(Object(P.c)(q,e,Object(S.b)(Y(),pe),he,F.c))}))}for(var fe=v.a.isNullOrEmpty(W.id)?b.a.Create:b.a.Update,me=Object(O.v)(q),ge=Object(a.b)(Z,ie),ve=Object.keys(t),be=[],ye=Object(D.d)(Z,W.etn),Oe=Object(A.c)(Z,R.Wb)&&Object(A.c)(Z,R.nb),_e=Object(A.c)(Z,R.Yb)&&Object(A.c)(Z,R.nb),Pe=Object(u.m)(Z,e),Se=0,we=ve;Se<we.length;Se++){var Ie=we[Se],je=ye[Ie];if(!Pe||je&&"multiselectpicklist"===je.Type){var Ce=Object(k.j)(Z,W,Ie);if((oe[Ie]&&!Object(y.b)(Ce,oe[Ie],!0)||!Oe&&je&&"file"===je.Type||!_e&&je&&"image"===je.Type)&&be.push(Ie),(Oe&&je&&"file"===je.Type||_e&&je&&"image"===je.Type)&&oe[Ie]&&t&&t[Ie])if(t[Ie].value){if("string"!=typeof t[Ie].value){var De=t[Ie].value;X(Y,De,Ie,Q,q,e,W,U)}}else Q(H(W,Ie))}}if(ie&&ge&&(p.a.equals(W,ge.identifier)||fe===b.a.Create))Q(Object(i.b)(Z,ie,oe));else{ie&&Q(Object(f.c)(e,ie,q));var Ee=Object(h.b)(Z,W,oe,me,fe),Te=Ee.payload.snapshotId;Q(Ee),Q(Object(m.b)(e,Te,q)),ie=Te}if(ae&&Q(Object(g.c)(e,q,ne)),Object(A.c)(Z,R.L)){var Ne=function(e,t,r){var i=Object(D.e)(e,t,Object.keys(r)),a={};if(i&&Object.keys(i).length>0){for(var n in i)a[n]=r[n];if(Object.keys(i).length>1)for(var n in i)i[n].ParentPicklistLogicalName&&delete a[n]}return a}(Z,W.etn,oe);Q(Object(N.b)(e,q,!0,Ne,r,n,s,I,M))}if(!n){if(!U.ScriptManager.containerExists(e)){var Fe=JSON.stringify(se),Re=[{name:"pageId",value:e},{name:"changeKeys",value:Fe}],Ae="Could not get container or event manager. pageId: "+e+", changesKeys "+Fe+".";U.EventManager.ReportComponentFailure("Forms.UpdateFieldValue",Error(Ae),void 0,Re)}var ke=U.ScriptManager.getContainer(e).getEventManager();for(var Me in t)oe[Me]&&oe[Me].validationResult&&(oe[Me].validationResult.isValueValid||"Required"===oe[Me].validationResult.errorId)&&Q(ke.runOnChange($?L:q,Me))}if(be.length>0&&ie&&Q(o(ie,be)),t.transactioncurrencyid){var Le=Object(D.d)(Z,J.entityTypeName),Ve={};for(var xe in Le){var Be=Le[xe];"money"===Be.Type.toLowerCase()&&(Ve[Be.LogicalName]=Object(a.d)(Z,ie,W,Be.LogicalName))}Q(K(e,Ve,!0,!0,s,I,M,q))}Q(Object(B.b)(e,q))}}}}function X(e,t,r,i,a,n,o,s){var u=e(),l=Object(D.a)(u,o.etn,r),c="file"===l.Type?String.format(Object(S.b)(e(),U.f),l.DisplayName):String.format(Object(S.b)(e(),U.i),l.DisplayName);Y(u,i,a,r,n,!1,_.a.information,c);var d=[];d.push({name:"Attribute Type",value:l.Type});var p=s.TraceManager.getTracer("Forms.LargeImageFileAttribute");return p.info("Uploaded started for file/image type attribute.",d),i(Object(I.b)(t,r,o)).then((function(){p.info("Uploaded successfully completed for file/image type attribute.",d);var t=e();return Object(k.k)(e(),o,r)===L.b.Finished&&Y(t,i,a,r,n,!0),Promise.resolve()})).catch((function(t){var s=Object(k.k)(e(),o,r),u=e();if(s===L.b.Failed){d.push({name:"Error",value:t.message}),p.error("Uploaded failed for file/image type attribute.",d);var c=String.format(Object(S.b)(e(),U.h),l.DisplayName);Y(u,i,a,r,n,!0,_.a.warning,c)}else if(s===L.b.Cancelled){p.info("Uploaded cancelled for file/image type attribute.",d);var h="file"===l.Type?String.format(Object(S.b)(e(),U.g),l.DisplayName):String.format(Object(S.b)(e(),U.j),l.DisplayName);Y(u,i,a,r,n,!0,_.a.information,h)}else Y(u,i,a,r,n,!0);return Promise.reject(t)}))}function Y(e,t,r,i,a,n,s,u){if(t(Object(M.b)(a,i,n,r)),n){var c=[];c.push(i),t(o(Object(l.ac)(e,a,r),c)),t(Object(V.b)(r,a,Object(W.d)(a,i)))}u&&s&&t(Object(P.c)(r,a,u,s,Object(W.d)(a,i)))}function Z(e,t){return{type:"control.update.value",sync:!0,execute:function(r,i){var a=r.dispatch,n=(0,r.getState)(),o={},s=Object(l.Qb)(n,{id:e},t);if(s)for(var u in s)o[s[u]]={fieldName:s[u],value:""};a(K(e,o,!0,!0))}}}},RNNy:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i="systemuser",a="transactioncurrency"},RwQN:function(e,t,r){"use strict";r.d(t,"a",(function(){return U}));var i=r("c/eZ"),a=r("cZkS"),n=r("qC0c"),o=r("9r0m"),s=r("G7N+"),u=r("j6Db");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function l(e,t,r,i,a,n,o,s,u){void 0===u&&(u=null);var l={getState:t,actions:r,entityName:s,parentName:a,promiseCollection:u||[],chartDataSetObjectWrapper:i,pageId:n,contextToken:o};switch(e){case 1:return d(l);case 3:return function(e){var t=e.actions.updateChartFilterExpression(e.pageId,e.contextToken,e.chartDataSetObjectWrapper.getChartFilterExpression()),r=e.actions.updateChartDrillDownParameters(e.pageId,e.contextToken,e.chartDataSetObjectWrapper.getChartDrillDownParameters());return Promise.all([t,r]).then((function(){var t=1,r=e.chartDataSetObjectWrapper.getChartDrillDownParameters();r&&r.length>0&&(t=2),e.chartDataSetObjectWrapper.setRefreshMode(t)}))}(l);case 2:return function(e){return c(e).then((function(e){var t=e.input,r=e.chartDataDecorator,i=e.input.actions.retreiveChartDataAction(r,t.entityName,t.pageId,!0);return t.promiseCollection.push(i),Promise.all(t.promiseCollection)}))}(l);default:return d(l)}}function c(e){return e.chartDataSetObjectWrapper.ensureReadinessForChartDataRefresh(e.getState,e.actions,e.entityName).then((function(t){if(e.parentName&&"DataSetHost"===e.parentName){var r=e.actions.updateDataSetChartVisualizationId(e.pageId,e.contextToken,o.a.toString(t.visualizationId)),i=e.actions.updateDataSetChartVisualizationType(e.pageId,e.contextToken,t.visualizationType);e.promiseCollection.push(r,i)}return{input:e,chartDataDecorator:t}}))}function d(e){return c(e).then((function(t){var r=t.input,i=t.chartDataDecorator,a=t.input.actions.retreiveChartDataAction(i,r.entityName,r.pageId,!0);return e.promiseCollection.push(a),Promise.all(e.promiseCollection)}))}var p=r("7dGM"),h=r("dUXI"),f=r("F2uj"),m=r("kl3Z"),g=r("Ww2r"),v=r("JlqV"),b=r("RlP9"),y=r("WACO"),O=r("8xrh"),_=r("T2Xs"),P=function(e){function t(t,r,i,a,n,o,s,u,l,c,d,p){var h=e.call(this,t,r,i,a)||this;return h.getChartConfigObject=function(){return n},h.getWebResourceState=function(){return o},h.getChartSelectorOption=function(){return s},h.getAttributesMetadata=function(){return u},h.getViewAssociatedAttributesMetadata=function(){return l},h.getViewSelectorOption=function(){return c},h.getDefaultVisualizationId=function(){return d},h.getChartExportMetadata=function(){return p},h}return Object(i.__extends)(t,e),t.prototype.getVisualizationType=function(){throw new Error("Not Replaced")},t.prototype.setVisualizationType=function(e){throw new Error("Not Replaced")},t.prototype.getVisualizationId=function(){throw new Error("Not Replaced")},t.prototype.setVisualizationId=function(e){throw new Error("Not Replaced")},t.prototype.getViewType=function(){throw new Error("Not Replaced")},t.prototype.setViewType=function(e){throw new Error("Not Replaced")},t.prototype.getViewId=function(){throw new Error("Not Replaced")},t.prototype.setViewId=function(e){throw new Error("Not Replaced")},t.prototype.getChartConfigObject=function(){throw new Error("Not Replaced")},t.prototype.getWebResourceState=function(){throw new Error("Not Replaced")},t.prototype.getChartFilterExpression=function(){throw new Error("Not Replaced")},t.prototype.setChartFilterExpression=function(e){throw new Error("Not Replaced")},t.prototype.getChartSelectorOption=function(){throw new Error("Not Replaced")},t.prototype.getViewSelectorOption=function(){throw new Error("Not Replaced")},t.prototype.getUpdateChartFilterExpression=function(){throw new Error("Not Replaced")},t.prototype.setUpdateChartFilterExpression=function(e){throw new Error("Not Replaced")},t.prototype.getAttributesMetadata=function(){throw new Error("Not Replaced")},t.prototype.getViewAssociatedAttributesMetadata=function(){throw new Error("Not Replaced")},t.prototype.setRefreshMode=function(e){throw new Error("Not Replaced")},t.prototype.getChartDrillDownParameters=function(){throw new Error("Not Replaced")},t.prototype.setChartDrillDownParameters=function(e){throw new Error("Not Replaced")},t.prototype.getDefaultVisualizationId=function(){throw new Error("Not Replaced")},t.prototype.formatNumber=function(e,t){throw new Error("Not Replaced")},t.prototype.getChartExportMetadata=function(){throw new Error("Not Replaced")},t.prototype.getIsRelatedRecord=function(){throw new Error("Not Replaced")},t}(r("aqxQ").a),S=r("/SAa"),w=r("r2h9"),I=r("scgP"),j=r("7EJx"),C=r("otJc"),D=r("B0z9"),E=r("Ajgc"),T=r("S2mk"),N=r("Z46F"),F=r("s2by"),R=r("vUcA"),A=r("CIm2"),k=r("6FBX"),M=r("VcAV"),L=r("Gemh"),V=r("sgPk"),x=r("i2G7"),B=u.a+".Models.DataSet.ChartDataSetObjectWrapper.refreshDataSet",U=function(e){function t(t,r){var i=e.call(this,t,null,r)||this;return i._previousChartDataSetParameter=null,i._previousEmptyChartParameter=null,i._previousChartConfigObjectFromStateTree=null,i._previousChartConfigObjectToChartControl=null,i._previousWebResourceStateFromStateTree=null,i._previousWebResourceStateToChartControl=null,i._previousChartSelectorObjectFromStateTree=null,i._previousChartSelectorObjectToChartControl=null,i._previousViewSelectorObjectFromStateTree=null,i._previousViewSelectorObjectToChartControl=null,i._previousViewIdsToDisplayRaw=null,i._previousViewIdsToDisplay=null,i._memoizedVisualizationIdFromDataSetDefinition=null,i._currentVisualizationId=null,i._memoizedVisualizationTypeFromDataSetDefinition=null,i._currentVisualizationType=null,i._memoizedViewIdFromDataSetDefinition=null,i._currentViewId=null,i._memoizedViewTypeFromDataSetDefinition=null,i._currentViewType=null,i._memoizedChartFilterExpressionFromDataSetDefinition=null,i._currentChartFilterExpression=null,i._memoizedChartDrillDownParametersFromDataSetDefinition=null,i._memoizedDefaultFilterAndLinkedEntities=null,i._currentChartDrillDownParameters=null,i._parentName=null,i._shouldUpdateChartFilterExpression=null,i._chartDataSetRefreshMode=null,i._isChartDrillDownFeatureEnabled=null,i._cultureInfo=null,i.dataSetClass=1,i}return Object(i.__extends)(t,e),t.prototype.getLatestData=function(){return this._previousChartDataSetParameter},t.prototype.retrieveDataSetObjectFromStorage=function(e,t,r,u){var l=r.Parameters.Parent;l&&(this._parentName=l.Value);var c=r.Parameters[this.getPropKey()],d=this.updatedSubParameter(u);"DataSetHost"===this._parentName&&(this.forceApplyDataSetInputReturnNone=!1);var h=this.getViewId(),g=this.getVisualizationId(),v=c.EntityName||c.TargetEntityType;if(this.getVisualizationType(),this.getViewType(),this.getChartFilterExpression(),this.getChartDrillDownParameters(),this._getUserCultureInfo(e),!h||!g)return this._generateEmptyChartDataSetParam();var b=this.previousOwnProps?this.previousOwnProps.id:null,y=Object(L.qb)(e,o.a.tryParse(h),b),_=this._retrieveChartConfigObject(e,g,h),P=this._retrieveWebResourceState(e,g),S=this._retrieveChartSelectorObject(e,v),w=this._retrieveViewSelectorObject(e,v);if(!(_||P||S||w))return this._generateEmptyChartDataSetParam();if(null!==P||null!==_?(2===this.refreshingStatus&&(this.refreshingStatus=4),this.previousInitState=s.a.Initialized):this.previousInitState===s.a.Uninitialized&&2===this.firstDataRequestType&&(this.previousInitState=s.a.Initializing),!this._previousChartDataSetParameter||_!==this._previousChartDataSetParameter.getChartConfigObject()||P!==this._previousChartDataSetParameter.getWebResourceState()||S!==this._previousChartDataSetParameter.getChartSelectorOption()||w!==this._previousChartDataSetParameter.getViewSelectorOption()||4===this.refreshingStatus){var I=!1;if(null!==_){I=(Object(n.c)(e,a.rd)?this._cachedChartDataDecorator?Object(p.e)(e,this._cachedChartDataDecorator.getStorageKey()):Object(p.e)(e,this.createChartDataDecorator(e).getStorageKey()):Object(p.d)(e,g,h))!==s.a.Initialized}var j=Object(O.m)(e,c,O.q,y,this.viewIdDocumentDic),C=h,D=_,E=P,T=S,N=Object(f.d)(e,v),F=function(e,t){var r={};if(e&&e.initialized===s.a.Initialized){Object(m.d)(e).forEach((function(e){r[e.name]={relatedEntityName:e.relatedEntityName||"",drilldownDisplayName:e.name}})),t&&t.length>0&&t.filter((function(e){return e.name in r})).forEach((function(e){r[e.name].drilldownDisplayName=e.displayName}))}return r}(y,j),R=w,A=this._getDefaultVisualizationId(e),k=this._getChartExportMetadataFromStateTree(e);null===P&&null===_||4===this.refreshingStatus&&(this.refreshingStatus=0),this._previousChartDataSetParameter=this._generateNewDataSetParam(I,j,!1,null,null,{},C,"",D,E,T,N,F,R,A,k)}return d&&(this._previousChartDataSetParameter=Object(i.__assign)({},this._previousChartDataSetParameter)),this._previousChartDataSetParameter},t.prototype._retrieveWebResourceState=function(e,t){var r=Object(p.a)(e,o.a.tryParse(t));if(null==r||o.a.isNullOrEmpty(r.WebResourceId))return null;var i=r.WebResourceId,a=Object(y.g)(e,i);if(!this._previousWebResourceStateFromStateTree||this._previousWebResourceStateFromStateTree!==a||!this._previousWebResourceStateToChartControl){this._previousWebResourceStateFromStateTree=a;var n=null;return a&&(n={name:a.name,displayName:a.displayName,id:o.a.toString(a.id),type:a.type,isEnabledForMobileClient:a.isEnabledForMobileClient}),this._previousWebResourceStateToChartControl=n,this._previousWebResourceStateToChartControl}return this._previousWebResourceStateToChartControl},t.prototype._retrieveChartConfigObject=function(e,t,r){var i=null;if(i=Object(n.c)(e,a.rd)?this._cachedChartDataDecorator?Object(p.c)(e,this._cachedChartDataDecorator.getStorageKey()):Object(p.c)(e,this.createChartDataDecorator(e).getStorageKey()):Object(p.b)(e,t,r),!this._previousChartConfigObjectFromStateTree||this._previousChartConfigObjectFromStateTree!==i||!this._previousChartConfigObjectToChartControl){this._previousChartConfigObjectFromStateTree=i;var o=null;return i&&(o={Title:i.Title,Legend:i.Legend,Area3DStyle:i.Area3DStyle,AreaGradientStyle:i.AreaGradientStyle,XAxes:i.XAxes,YAxes:i.YAxes,SeriesList:i.SeriesList,SubTitle:i.SubTitle,Colors:i.Colors,DisplayMode:i.DisplayMode,ErrorInformation:i.ErrorInformation,EnableDrilldown:i.EnableDrilldown,Annotations:i.Annotations}),this._previousChartConfigObjectToChartControl=o,this._previousChartConfigObjectToChartControl}return this._previousChartConfigObjectToChartControl},t.prototype._retrieveChartSelectorObject=function(e,t){var r=Object(p.i)(e,t);if(!this._previousChartSelectorObjectFromStateTree||this._previousChartSelectorObjectFromStateTree!==r||!this._previousChartSelectorObjectToChartControl){this._previousChartSelectorObjectFromStateTree=r;var i=[];if(r){var a=r.chartTypes;if(a&&Object.keys(a).length>0)for(var n in a){var s=a[n];for(var u in s){var l=s[u],c={categoryId:l.IsUserChart?"1":"0",id:o.a.toString(l.Id),value:o.a.toString(l.Id),text:l.Name};i.push(c)}}}return this._previousChartSelectorObjectToChartControl=i,this._previousChartSelectorObjectToChartControl}return this._previousChartSelectorObjectToChartControl},t.prototype._retrieveViewSelectorObject=function(e,t){var r=this.previousDataSetDefinition;if(!r.EnableViewPicker)return null;var i=r.ViewIds;this._previousViewIdsToDisplayRaw&&this._previousViewIdsToDisplayRaw===i||(this._previousViewIdsToDisplayRaw=i,this._previousViewIdsToDisplay=i&&i.split(","),this._previousViewIdsToDisplay&&this._previousViewIdsToDisplay.length>0&&this._previousViewIdsToDisplay.forEach((function(e,t,r){r[t]=o.a.toString(o.a.tryParse(e))})));var a=Object(b.f)(e,t,w.a.MAIN_APPLICATION_VIEW);if(a&&(!this._previousViewSelectorObjectFromStateTree||this._previousViewSelectorObjectFromStateTree!==a||!this._previousViewSelectorObjectToChartControl)){this._previousViewSelectorObjectFromStateTree=a;var n=[];if(Object.keys(a).length>0)for(var s in a)if(!(this._previousViewIdsToDisplay&&this._previousViewIdsToDisplay.length>0&&-1===this._previousViewIdsToDisplay.indexOf(s))){var u=a[s],l={categoryId:u.isUserView?"1":"0",id:s,value:s,text:u.name};n.push(l)}return this._previousViewSelectorObjectToChartControl=n,this._previousViewSelectorObjectToChartControl}return this._previousViewSelectorObjectToChartControl},t.prototype.generateEmptyParam=function(){return this._generateEmptyChartDataSetParam()},t.prototype._generateEmptyChartDataSetParam=function(){var e=this.getViewId(),t=this.getVisualizationId();if(!this._previousEmptyChartParameter||e!==this._previousEmptyChartParameter.getViewId()||t!==this._previousEmptyChartParameter.getVisualizationId()){var r=null!==e&&null!==t;this._previousEmptyChartParameter=this._generateNewDataSetParam(r,[],!1,null,null,{},e,"",null,null,null,null,null,null,"",null)}return this._previousChartDataSetParameter=this._previousEmptyChartParameter,this._previousEmptyChartParameter},t.prototype._generateNewDataSetParam=function(t,r,i,a,n,o,s,u,l,c,d,p,h,f,m,g){var v=e.prototype.generateNewDatasetParam.call(this,t,r,i,a,n,o,s,u),b=this.getEntityTypeName(),y=new P(v,s,u,b,l,c,d,p,h,f,m,g);return y.getVisualizationType=this.getVisualizationType.bind(this),y.setVisualizationType=this.setVisualizationType.bind(this),y.getVisualizationId=this.getVisualizationId.bind(this),y.setVisualizationId=this.setVisualizationId.bind(this),y.getViewType=this.getViewType.bind(this),y.setViewType=this.setViewType.bind(this),y.getViewId=this.getViewId.bind(this),y.setViewId=this.setViewId.bind(this),y.getChartFilterExpression=this.getChartFilterExpression.bind(this),y.setChartFilterExpression=this.setChartFilterExpression.bind(this),y.getUpdateChartFilterExpression=this.getUpdateChartFilterExpression.bind(this),y.setUpdateChartFilterExpression=this.setUpdateChartFilterExpression.bind(this),y.getChartDrillDownParameters=this.getChartDrillDownParameters.bind(this),y.setChartDrillDownParameters=this.setChartDrillDownParameters.bind(this),y.setRefreshMode=this.setRefreshMode.bind(this),y.formatNumber=this.formatNumber.bind(this),y.getIsRelatedRecord=this.getIsRelatedRecord.bind(this),y},t.prototype.getVisualizationId=function(){if(this._currentVisualizationId){if(this.previousDataSetDefinition&&this.previousDataSetDefinition.VisualizationId){(e=o.a.toString(new o.a(this.previousDataSetDefinition.VisualizationId)))!==this._memoizedVisualizationIdFromDataSetDefinition&&(this._currentVisualizationId=e,this._memoizedVisualizationIdFromDataSetDefinition=e)}}else if(this.previousDataSetDefinition&&this.previousDataSetDefinition.VisualizationId){var e=o.a.toString(new o.a(this.previousDataSetDefinition.VisualizationId));this._currentVisualizationId=e,this._memoizedVisualizationIdFromDataSetDefinition=e}else this._currentVisualizationId=null;return this._currentVisualizationId},t.prototype.setVisualizationId=function(e){var t=new o.a(e);this._currentVisualizationId=o.a.toString(t)},t.prototype.getVisualizationType=function(){var e=this.previousDataSetDefinition;if(null===this._currentVisualizationType)if(e&&e.IsUserChart){var t="true"===e.IsUserChart?1:0;this._currentVisualizationType=t,this._memoizedVisualizationTypeFromDataSetDefinition=t}else this._currentVisualizationType=0;else if(e&&e.IsUserChart){(t="true"===e.IsUserChart?1:0)!==this._memoizedVisualizationTypeFromDataSetDefinition&&(this._currentVisualizationType=t,this._memoizedVisualizationTypeFromDataSetDefinition=t)}return this._currentVisualizationType},t.prototype.setVisualizationType=function(e){this._currentVisualizationType=e},t.prototype.getViewId=function(){if(this._currentViewId){if(this.previousDataSetDefinition&&this.previousDataSetDefinition.ViewId){(e=o.a.toString(new o.a(this.previousDataSetDefinition.ViewId)))!==this._memoizedViewIdFromDataSetDefinition&&(this._currentViewId=e,this._memoizedViewIdFromDataSetDefinition=e)}}else if(this.previousDataSetDefinition&&this.previousDataSetDefinition.ViewId){var e=o.a.toString(new o.a(this.previousDataSetDefinition.ViewId));this._currentViewId=e,this._memoizedViewIdFromDataSetDefinition=e}else this._currentViewId=null;return this._currentViewId},t.prototype.setViewId=function(e){var t=new o.a(e);this._currentViewId=o.a.toString(t)},t.prototype.getViewType=function(){var e=this.previousDataSetDefinition;if(null===this._currentViewType)if(e&&e.IsUserView){var t="true"===e.IsUserView?4230:1039;this._currentViewType=t,this._memoizedViewTypeFromDataSetDefinition=t}else this._currentViewType=1039;else if(e&&e.IsUserView){(t="true"===e.IsUserView?4230:1039)!==this._memoizedViewTypeFromDataSetDefinition&&(this._currentViewType=t,this._memoizedViewTypeFromDataSetDefinition=t)}return this._currentViewType},t.prototype.setViewType=function(e){this._currentViewType=e},t.prototype.getChartFilterExpression=function(){var e=this.previousDataSetDefinition;return this._currentChartFilterExpression?e&&e.HighchartFilterExpression&&e.HighchartFilterExpression!==this._memoizedChartFilterExpressionFromDataSetDefinition&&(this._currentChartFilterExpression=e.HighchartFilterExpression,this._memoizedChartFilterExpressionFromDataSetDefinition=e.HighchartFilterExpression):e&&e.HighchartFilterExpression?(this._currentChartFilterExpression=e.HighchartFilterExpression,this._memoizedChartFilterExpressionFromDataSetDefinition=e.HighchartFilterExpression):e&&e.ChartDrillDownParameters&&e.ChartDrillDownParameters.length>0&&(this._currentChartFilterExpression=e.ChartDrillDownParameters[e.ChartDrillDownParameters.length-1].filterExpression),this._currentChartFilterExpression},t.prototype.setChartFilterExpression=function(e){this._currentChartFilterExpression=e},t.prototype.setUpdateChartFilterExpression=function(e){this._shouldUpdateChartFilterExpression=e},t.prototype.getUpdateChartFilterExpression=function(){return this._shouldUpdateChartFilterExpression},t.prototype.getChartDrillDownParameters=function(){var e=this.previousDataSetDefinition;return this._currentChartDrillDownParameters?e&&e.ChartDrillDownParameters&&e.ChartDrillDownParameters!==this._memoizedChartDrillDownParametersFromDataSetDefinition&&(this._currentChartDrillDownParameters=e.ChartDrillDownParameters,this._memoizedChartDrillDownParametersFromDataSetDefinition=e.ChartDrillDownParameters):e&&e.ChartDrillDownParameters&&(this._currentChartDrillDownParameters=e.ChartDrillDownParameters,this._memoizedChartDrillDownParametersFromDataSetDefinition=e.ChartDrillDownParameters),this._currentChartDrillDownParameters},t.prototype.setChartDrillDownParameters=function(e){this._currentChartDrillDownParameters=e},t.prototype.setRefreshMode=function(e){this._chartDataSetRefreshMode=e},t.prototype.formatNumber=function(e,t,r){return Object(I.c)(e,this._cultureInfo,t,r)},t.prototype.getRefreshMode=function(e){return null===this._isChartDrillDownFeatureEnabled&&(this._isChartDrillDownFeatureEnabled=Object(n.c)(e,a.t)),this._getRefreshMode()},t.prototype._getRefreshMode=function(){!1===this._isChartDrillDownFeatureEnabled&&(this._parentName&&"DataSetHost"===this._parentName&&this.getUpdateChartFilterExpression()?this._chartDataSetRefreshMode=3:this._chartDataSetRefreshMode=1);var e=this.getChartDrillDownParameters();return 2===this._chartDataSetRefreshMode&&(!e||e.length<=0)&&(this._chartDataSetRefreshMode=1),this._chartDataSetRefreshMode?this._chartDataSetRefreshMode:e&&e.length>0?2:1},t.prototype.getIsRelatedRecord=function(){var e;return!!(null===(e=this.previousDataSetDefinition)||void 0===e?void 0:e.RelationshipName)},t.prototype.createChartDataDecorator=function(e){var t,r=this.getViewId(),i=o.a.tryParse(r),a=this.getViewType(),n=this.getVisualizationId(),s=o.a.tryParse(n),u=this.getVisualizationType();switch(this.getRefreshMode(e)){case 2:var l=null,c=this.getChartDrillDownParameters();if(!(c&&c.length>0))throw new Error("Execution failed for ChartDrilldownDataSetRefreshExecutor; Cause: Missing Chart Drilldown Parameter.");l=c[c.length-1],t=new D.a((function(){return e}),s,i,u,a,l.groupByAttribute.name,l.groupByAttribute.relatedEntityName,l.chartType);break;case 1:case 3:default:t=new E.a((function(){return e}),s,i,u,a)}this.dataFirstTimeSentAcknowledged=!0;var d=this.previousOwnProps?this.previousOwnProps.id:null,h=Object(L.qb)(e,i,d);if(!h||!h.fetchXML)return t;var f=Object(p.a)(e,s);if(!f||!f.DataDescription&&!f.WebResourceId)return t;this.sortingObj.updateSortingArrays();var m=this.getChartFilterExpression();m&&("{}"===m?this.filteringObj.clearFilter():this.filteringObj.setFilter(JSON.parse(m))),h.entityLogicalName&&h.entityLogicalName===k.Bb&&this._applyQueueItemDefaultFilterAndLinkedEntities(e,h),this.filteringObj.getFilter()&&this.filteringObj.calculateFilterExpression();var g=this.createQueryBuilder((function(){return e}),h);return this.pagingObj.reset(),g instanceof V.a?(this.cachedQueryState=g.getQueryState(),this.cachedQueryBuilder=g):(this.cachedQueryState=g,this.cachedQueryBuilder=x.a.fromState(this.cachedQueryState)),t.initialize(f.DataDescription,this.cachedQueryBuilder instanceof V.a?this.cachedQueryBuilder.fetchXml:this.cachedQueryState.fetchXml,f.PresentationDescription,h.title,h.entityLogicalName,f.Name,f.PrimaryEntityTypeCode,!o.a.isNullOrEmpty(f.WebResourceId),!Object(M.c)(this.cachedQueryBuilder instanceof V.a?this.cachedQueryBuilder.rollupType:void 0)),t.setupAggregationQueries(),this._cachedChartDataDecorator=t,this._cachedChartDataDecorator},t.prototype.ensureDataInitialization=function(t){this.dataRequestedOnce||this.previousInitState!==s.a.Initializing||2!==this.firstDataRequestType||(this.dataRequestedOnce=!0,this.dataFirstTimeSentAcknowledged=!0),e.prototype.ensureDataInitialization.call(this,t)},t.prototype.ensureReadinessForChartDataRefresh=function(e,t,r){var i=this,a=this.getViewId(),n=this.getViewType(),s=this.getVisualizationId(),u=this.getVisualizationType(),l=[];l.push(t.retrieveViewAction(r,null,n,o.a.tryParse(a))),this.previousDataSetDefinition&&this.previousDataSetDefinition.EnableViewPicker&&l.push(t.retrieveViewSelectorAction(r,w.a.MAIN_APPLICATION_VIEW));var c=this.retrieveQuickFindView(e,t);return c&&l.push(c),Promise.all(l).then((function(l){return t.retreiveChartAction(r,u,o.a.tryParse(s)).then((function(){return i.createChartDataDecorator(e())}),(function(r){return i._handleRetrieveChartActionError(e,t,new E.a(e,o.a.tryParse(s),o.a.tryParse(a),u,n),r.getNegativeErrorCode()),null}))}),(function(r){var l=r&&!Object(T.j)(r.errorCode)&&r.errorCode,c=Object(R.a)(l),d=c?Object(g.b)(e(),c):"retrieve chart failed. error code: "+N.a.getHexErrorCodeFromInt(l);t.updateChartErrorInformation(e(),d,new E.a(e,o.a.tryParse(s),o.a.tryParse(a),u,n),i.previousOwnProps.id)}))},t.prototype._handleRetrieveChartActionError=function(e,t,r,i){var a=e();t.updateChartErrorInformation(a,Object(g.b)(a,h.q),r,this.previousOwnProps.id)},t.prototype.refreshDataSet=function(e,t,r){var i=this,a=this.previousOwnProps&&this.previousOwnProps.configuration?Object(_.b)(e(),this.previousOwnProps.configuration.CustomControlId)||Object(_.b)(e(),this.previousOwnProps.configuration.Name):u.a;if(!this.previousDataSetDefinition)throw r.EventManager.ReportComponentFailure(a,new Error("previousDataSetDefinition is null or undefined"),null,[{name:"APIName",value:B},{name:"controlId",value:this.previousOwnProps?this.previousOwnProps.controlId:""},{name:"EntityName",value:this.previousOwnProps&&this.previousOwnProps.formInfo?this.previousOwnProps.formInfo.EntityName:null},{name:"CustomControlId",value:this.previousOwnProps&&this.previousOwnProps.configuration?this.previousOwnProps.configuration.CustomControlId:""}]),new Error("Refreshing not initialized DataSet parameter");if(!Object(v.b)(e()))return this.updateRefreshStatusToRequestBack(),Promise.resolve(this);var n=this.previousOwnProps?this.previousOwnProps.id:null,s=this.previousOwnProps&&this.previousOwnProps.formInfo?this.previousOwnProps.formInfo.EntityName:this.getEntityTypeName(),c=this.getVisualizationId(),d=o.a.tryParse(c);return l(this.getRefreshMode(e()),e,t,this,this._parentName,n,this.contextToken,s,null).then((function(){return i.updateRefreshStatusToRequestBack(),i}),(function(o){return r.EventManager.ReportComponentFailure(a,o,o.message,[{name:"APIName",value:B},{name:"pageId",value:n},{name:"controlId",value:i.previousOwnProps?i.previousOwnProps.controlId:null},{name:"EntityName",value:i.getEntityTypeName()},{name:"visualizationId",value:JSON.stringify(d)}]),i.handleRefreshError(e,i,o,t),i}))},t.prototype.setErrorStatus=function(e,t){this.refreshingStatus=100,this.errorMessage=e,this.error=!0;var r=this.getLatestData();r&&(r.loading=!1,this._previousChartDataSetParameter.loading=!1,r.error=this.error,this._previousChartDataSetParameter.error=this.error,r.errorMessage=this.errorMessage,this._previousChartDataSetParameter.errorMessage=this.errorMessage),this.triggerOnDataSetUpdateCallBack(this.error,this.errorMessage,"")},t.prototype._getChartExportMetadataFromStateTree=function(e){return e&&e.metadata&&e.metadata.charts&&e.metadata.charts[this.getVisualizationId()]?{visualizationid:this.getVisualizationId(),name:e.metadata.charts[this.getVisualizationId()].Name,description:null,primaryentitytypecode:e.metadata.charts[this.getVisualizationId()].PrimaryEntityTypeCode,datadescription:e.metadata.charts[this.getVisualizationId()].DataDescription,presentationdescription:e.metadata.charts[this.getVisualizationId()].PresentationDescription,isdefault:e.metadata.charts[this.getVisualizationId()].IsDefault,solutionId:null}:null},t.prototype._getUserCultureInfo=function(e){return e&&e.user?(this._cultureInfo||(this._cultureInfo=Object(C.d)(Object(j.w)(e))),this._cultureInfo):null},t.prototype._getDefaultVisualizationId=function(e){var t=this.getEntityTypeName();if(!(e&&e.metadata&&e.metadata.chartDefaults&&t))return null;var r=e.metadata.chartDefaults[t];return r?o.a.toString(r):null},t.prototype._applyQueueItemDefaultFilterAndLinkedEntities=function(e,t){var r=this,i=Object(j.q)(e),o=t.entityLogicalName;if(i&&o&&0===this.extraFilters.length){if(!this._memoizedDefaultFilterAndLinkedEntities){var s=Object(n.c)(e,a.Zc),u=Object(F.a)(o,i,this.contextToken,s).getFilterAndLinkedEntities(A.a,!0);this._memoizedDefaultFilterAndLinkedEntities=u}if(this._memoizedDefaultFilterAndLinkedEntities){var l=this._memoizedDefaultFilterAndLinkedEntities.filter,c=this.filteringObj.getFilter();if(c&&c!==l){if(!c.filters||c.filters&&-1===c.filters.indexOf(l)){var d={conditions:[],filterOperator:0,filters:[c,l]};this.filteringObj.setFilter(d)}}else this.filteringObj.setFilter(l);this._memoizedDefaultFilterAndLinkedEntities.linkEntities.forEach((function(e){r.linkedEntitiesObj.addLinkedEntity(e)}))}}},t}(S.a)},T0dC:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var i=r("c/eZ"),a=r("RlP9"),n=r("F2uj"),o=r("r2h9"),s=r("9r0m"),u=r("S2mk"),l=r("o5EQ"),c=function(){function e(e,t,r){this._dataSetWrapper=null,this._dataSetHostOwnProps=null,this._dataSetPageInfo=null,this._memoizedDataSetColumnLookupOwnProps=null,this._memoizedDataSetColumnLookupConfiguration=null,this._columnName=e,this._contextToken=t,this._dataSetPageInfo=r}return e.prototype.setParentRecordContext=function(e){this._parentRecordContext=e,this._getDataSetWrapper()&&this._getDataSetWrapper().setLookupDataSetAttributes(!0,e)},e.prototype.updateParameterConfiguration=function(t,r,l,c){var d=this;if(this._dataSetHostOwnProps=r,l&&(this._dataSetPageInfo=l),!this._memoizedDataSetColumnLookupConfiguration){var p=Object(n.a)(t,c.getTargetEntityType(),this._columnName),h=void 0;if(p&&p.Targets&&p.Targets.length)h=p.Targets[0];else if(c&&c.columns){var f=c.columns[this._columnName];f||(f=c.columns.find((function(e){return e.name===d._columnName}))),f&&f.attributes&&f.attributes.Targets&&f.attributes.Targets.length&&(h=f.attributes.Targets[0])}c&&c.getTargetEntityType&&c.getTargetEntityType()&&"connection"===c.getTargetEntityType().toLowerCase()&&"record2id"===this._columnName&&(c&&c.getViewId&&c.getViewId()&&c.getViewId().toUpperCase()===e._ALL_STAKEHOLDERS_VIEWID?h="contact":c&&c.getViewId&&c.getViewId()&&c.getViewId().toUpperCase()===e._ALL_SALESTEAMMEMBERS_VIEWID&&(h="systemuser"));var m=Object(a.a)(t,h,o.a.LOOKUP_VIEW),g=!1,v=null,b=null,y=null;if(this._dataSetHostOwnProps&&this._dataSetHostOwnProps.configuration&&this._dataSetHostOwnProps.configuration.Parameters&&this._dataSetHostOwnProps.configuration.Parameters.hasOwnProperty(e._DATASET_GRID_PROPERTY)){var O=this._dataSetHostOwnProps.configuration.Parameters[e._DATASET_GRID_PROPERTY].Lookups;if(null!=O)for(var _ in O){if(_.split(".").indexOf(this._columnName)>-1){var P=_.split("."),S=P&&P.length>0&&P[0];if(c&&c.getViewId&&c.getViewId()&&s.a.equals(new s.a(c.getViewId()),new s.a(S))){var w=O[_];m=new s.a(w.DefaultViewId),g=w.AllowFilterOff,y=w.RelationshipName,v=w.DependentAttributeName,b=w.DependentAttributeType}}}}this._memoizedDataSetColumnLookupConfiguration=Object(u.m)(this._dataSetHostOwnProps.configuration.CustomControlId,this._dataSetHostOwnProps.configuration.FormFactor,s.a.toString(m),h,e._DATASET_LOOKUP_PROP_KEY,g,y,b,v)}if(this._memoizedDataSetColumnLookupConfiguration.Parameters.hasOwnProperty(e._DATASET_LOOKUP_PROP_KEY)){var I=this._memoizedDataSetColumnLookupConfiguration.Parameters[e._DATASET_LOOKUP_PROP_KEY];if(I&&null!=I.AllowFilterOff){c.filtering.canDisableRelationshipFilter=function(){return"true"===I.AllowFilterOff.toString()};var j=c.filtering;j.enableRelationshipFilter=function(e){d._dataSetWrapper.setLookupDataSetAttributes(!0,d._parentRecordContext)},j.disableRelationshipFilter=function(){d._dataSetWrapper.setLookupDataSetAttributes(!1,d._parentRecordContext)}}}this._memoizedDataSetColumnLookupOwnProps||(this._memoizedDataSetColumnLookupOwnProps=Object(i.__assign)(Object(i.__assign)({},this._dataSetHostOwnProps),{configuration:this._memoizedDataSetColumnLookupConfiguration}))},e.prototype._getDataSetWrapper=function(){if(!this._dataSetWrapper){var t=this._memoizedDataSetColumnLookupConfiguration.Parameters[e._DATASET_LOOKUP_PROP_KEY];this._dataSetWrapper=new l.a(e._DATASET_LOOKUP_PROP_KEY,t,this._contextToken)}return this._dataSetWrapper},e.prototype.ensureViewInitialization=function(t){var r=this._memoizedDataSetColumnLookupConfiguration.Parameters[e._DATASET_LOOKUP_PROP_KEY];return r.ViewId?Promise.resolve(r.ViewId):t(r.TargetEntityType,o.a.LOOKUP_VIEW,o.b.savedview).then((function(e){return r.ViewId=s.a.toString(e),r.ViewId}))},e.prototype.retrieveDataSetObject=function(e,t,r){this.updateParameterConfiguration(e,this._dataSetHostOwnProps,this._dataSetPageInfo,t);var i=this._getDataSetWrapper(),a=i.retrieveDataSetObject(e,this._memoizedDataSetColumnLookupOwnProps,this._memoizedDataSetColumnLookupConfiguration,this._dataSetPageInfo,r);a.filtering.canDisableRelationshipFilter=t.filtering.canDisableRelationshipFilter;var n=a.filtering;return n.disableRelationshipFilter=t.filtering.disableRelationshipFilter,n.enableRelationshipFilter=t.filtering.enableRelationshipFilter,i.updateControlMemoizedParameter(e,a,!1,null),a},e.prototype.setWrapperLoadingFlag=function(e){this._getDataSetWrapper().setWrapperLoadingFlag(!0)},e.prototype.linkToParameter=function(e,t){var r=this,i=e.filtering;e&&e.getTargetEntityType&&e.getTargetEntityType()&&"connectionrole"===e.getTargetEntityType().toLowerCase()&&"record2roleid"===this._columnName&&this._addConnectionFilters(i),this._dataSetWrapper.linkToParameter(e,t),e.refresh=function(){t.retrieveDataSetLookupCellParameter(e,r,r._contextToken)}},e.prototype.getLatestData=function(){return this._dataSetWrapper?this._dataSetWrapper.getLatestData():null},e.prototype.resetControlLockedDataSet=function(){this._dataSetWrapper&&this._dataSetWrapper.resetControlMemoizedDataSet()},e.prototype.refreshDataSet=function(e,t,r){var i=this._getDataSetWrapper();return this.ensureViewInitialization(t.retrieveViewAction).then((function(a){return i.refreshDataSet(e,t,r)}))},e.prototype._addConnectionFilters=function(t){if(this._dataSetHostOwnProps&&this._dataSetHostOwnProps.descriptor&&this._dataSetHostOwnProps.descriptor.Parameters&&this._dataSetHostOwnProps.descriptor.Parameters.hasOwnProperty(e._DATASET_VIEW_ID_PROPERTY)){var r=s.a.toString(s.a.fromExternalGuid(this._dataSetHostOwnProps.descriptor.Parameters[e._DATASET_VIEW_ID_PROPERTY])).toUpperCase();if(r===e._ALL_STAKEHOLDERS_VIEWID||r===e._ALL_SALESTEAMMEMBERS_VIEWID){var i=r===e._ALL_STAKEHOLDERS_VIEWID?"1000":"1001";t.clearFilter();var a=[],n={attributeName:"category",conditionOperator:0,value:i};a.push(n);var o={conditions:a,filterOperator:0};t.setFilter(o)}}},e._DATASET_LOOKUP_PROP_KEY="columnLookup",e._DATASET_GRID_PROPERTY="Grid",e._DATASET_VIEW_ID_PROPERTY="ViewId",e._ALL_STAKEHOLDERS_VIEWID="4E3600FA-B9C8-49F4-B69A-51EBA06D9BDF",e._ALL_SALESTEAMMEMBERS_VIEWID="FE4BC089-8901-466C-A41B-1C1090F204D4",e}()},TiXY:function(e,t,r){"use strict";r.d(t,"b",(function(){return P})),r.d(t,"a",(function(){return y})),r.d(t,"c",(function(){return v}));var i=r("9r0m"),a=r("HSdq"),n=r("UOiB"),o=r("Sscr"),s=r("kr+h"),u=r("wUng"),l=r("sOTk"),c=r("QAhb"),d=r("lGKN"),p=r("n1Ju"),h=r("EwXg"),f=r("Ww2r"),m=r("RndP"),g=r("BFwB");function v(e,t,r){return{type:"initialize.dependentOptionSet.fields",sync:!0,execute:function(i,a,n){var o=i.dispatch,s=i.getState,u=b.bind(this,s(),o,e,t,r);!function(e,t,r,i,a){var n=[],o=e.TraceManager.getTracer("initialize.dependentOptionSet.fields");e.TraceManager.setLogLevel(h.a.Info,"initialize.dependentOptionSet.fields"),n.push({name:"CorrelationId",value:t.correlationId},{name:"ContextId",value:t.contextId},{name:"ActionStack",value:t.stack},{name:"PageId",value:i},{name:"EntityTypeName",value:r}),o.info("Executing initialize dependent option set fields action.",n);var s=a(),u={name:"NumCompleteDependentOptionSetChains",value:s[0]},l={name:"CompleteChainsDepth",value:s[1]};n.push(u,s[2],l);var c=new g.a("initialize.dependentOptionSet.fields");c.addEventParameter("NumCompleteDependentOptionSetChains",s[0]),c.addEventParameter("NumPartialDependentOptionSetChainFields",s[2].value),c.addEventParameter("CompleteChainsDepth",s[1]),e.EventManager.ReportEvent(c),o.info("Executed initialize dependent option set fields action successfully.",n)}(a,n,e,t,u)}}}function b(e,t,r,i,s){var u={name:"NumPartialDependentOptionSetChainFields",value:0},d=[],p=0,h=Object(o.w)(s),f=Object(a.P)(e,h,r,i),m=function(e,t,r,i){var o;if(t.contextTokenType===n.a.RelatedEntity)o=Object(a.oc)(e,{id:r},t)[t.relationshipName];else{var s=Object(l.g)(e,r);o=new c.a(i,s.id)}return o}(e,s,i,r);for(var g in f){var v=f[g];if(null===v.ParentPicklistLogicalName){var b={name:g,value:0};y(e,s,i,r,f,g,b)?_(e,t,h,i,f,g,s.relationshipName,u):(O(e,t,s,i,m,g),p++,d.push(b))}else void 0===f[v.ParentPicklistLogicalName]&&_(e,t,h,i,f,g,s.relationshipName,u)}return[p,d,u]}function y(e,t,r,i,n,s,u){if(void 0===n[s])return!0;if(function(e,t,r,i,n){var s=Object(l.g)(e,r);if(!Object(a.Vc)(e,i,null==s?void 0:s.id,r,n))return!0;for(var u=Object(o.w)(t),c=Object(a.z)(e,r,u,n,t.relationshipName),d=0;d<c.length;d++){var p=Object(a.s)(e,{id:r,controlName:c[d]},u);if(p&&!p.Disabled&&p.Visible)return!1}return!0}(e,t,r,i,s))return!0;var c=n[s].ChildPicklistLogicalNames;if(null!==c)for(var d=0;d<c.length;d++){var p={name:s,value:0};if(y(e,t,r,i,n,c[d],p))return!0;u.value=Math.max(u.value,p.value)}return u.value=u.value+1,!1}function O(e,t,r,i,n,o){var s={},l=Object(a.ac)(e,i,r);s[o]=Object(a.X)(e,i,r,l,n,o),t(Object(u.b)(i,r,!1,s))}function _(e,t,r,i,n,o,u,l){if(void 0!==n[o]){var c=P(e,[String.format(Object(f.b)(e,m.a))],d.a.information);Object(a.z)(e,i,r,o,u).forEach((function(e){t(Object(s.b)(i,e,r,!0)),t(Object(p.b)(i,e,c,r)),l.value=l.value+1}));var h=n[o].ChildPicklistLogicalNames;if(h)for(var g=0;g<h.length;g++)_(e,t,r,i,n,h[g],u,l)}}function P(e,t,r){return{uniqueId:i.a.toString(i.a.newGuid()),messages:t,notificationLevel:r,actions:null}}},UGbr:function(e,t,r){"use strict";r.d(t,"e",(function(){return Ue})),r.d(t,"f",(function(){return pt})),r.d(t,"c",(function(){return Ye})),r.d(t,"d",(function(){return $e})),r.d(t,"b",(function(){return Ve})),r.d(t,"g",(function(){return lt})),r.d(t,"a",(function(){return Le}));var i=r("c/eZ"),a=r("OROb"),n=r("sOTk"),o=r("HSdq"),s=r("9r0m"),u=r("QAhb"),l=r("Z1aD"),c=r("i8/j"),d=r("jm5F"),p=r("/j9Z"),h=r("c3W+"),f=r("EGdP"),m=r("UTiY"),g=r("sMXu"),v=r("buKK"),b=r("zpQF"),y=r("yHpA"),O=r("+ieV"),_=r("2p2B"),P=r("zsi3"),S=r("Sscr"),w=r("cAHA"),I=r("+D0h"),j=r("mGpW"),C=r("Ww2r"),D=r("+hGu"),E=r("2rJs"),T=r("lMVv"),N=r("F2uj"),F=r("TCcM"),R=r("BvBP"),A=r("JlqV"),k=r("UOUy"),M=r("6cSU"),L=r("kk/C"),V=r("Uhhf"),x=r("q5XC"),B=r("tvev"),U=r("MSdU"),z=r("hFf+"),W=r("/XLd"),q=r("X5oH"),G=r("C6eY"),Q=r("rcZN");function H(e){return{type:"offline.resolve.syncerror.record",execute:function(t,r){var i,a=t.dispatch,o=t.getState,s=Object(n.g)(o(),e);if(!s.data||!s.data._isSyncErrorRetryRequest)return Promise.resolve();var u=s.data._isSyncErrorRetryRequest;if(!Object(Q.a)(o(),e)){var l=new Array(1),c={},d={};l[0]="statecode",c.statecode="state",d.statecode=new G.a(null,1,0,-1,null,null,null);var p=new U.a("syncerror",B.a.tryCreate(u)),h=new z.a(p,d,c,{},{},new W.a(new Array(0)));(i=h.get_changedFieldNames()).push.apply(i,l);var f=new q.a(h,!1);r.DataSource.execute(f,null).then((function(){a(Object(x.b)(e,!0))}),(function(t){a(Object(x.b)(e,!1))}))}return Promise.resolve()}}}var K=r("8aRo"),X=r("xm8q"),Y=r("okRr"),Z=r("3/Bp"),J=r("XNwl"),$=r("Srej"),ee=r("ObKm"),te=r("cn0Y"),re=r("7pqb"),ie=r("zmaG"),ae=r.n(ie),ne=r("EGsq"),oe=r("YEEA"),se=r("zETL"),ue=r("uO/V"),le=r("6q56"),ce=r("UOiB"),de=r("uQP8");var pe=r("WACO"),he=r("OTOS");var fe=r("Eoze");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var me=r("2nMH"),ge=r("9qYn"),ve=r("WS0f"),be=r("T576");var ye,Oe,_e=r("3ZuC"),Pe=r("tcXs"),Se=r("RK8T"),we=r("yZTI"),Ie=r("j+yI"),je=r("vm7t"),Ce=r("IQF2"),De=r("kr+h"),Ee=r("B188"),Te=r("+Swy"),Ne=r("n47b"),Fe=r("4sax"),Re=r("aGOT"),Ae=r("RYq1"),ke=r("KvcU"),Me=r("GUnN"),Le="ignore_save",Ve="Forms.SaveForm",xe=function(){function e(e,t,r,i){this._isIgnorable=e,this._continueExecution=t,this._canNavigate=r,this._canForceNavigate=i}return e.prototype.getIsIgnorable=function(){return this._isIgnorable},e.prototype.getContinueExecution=function(){return this._continueExecution},e.prototype.getCanNavigate=function(){return this._canNavigate},e.prototype.getCanForceNavigate=function(){return this._canForceNavigate},e}(),Be=new u.a("NO_ROOT_COMPONENT");function Ue(e,t,r){var i=[{name:"saveMode",value:t},{name:"PageId",value:e}];return{type:"form.save.async",execute:function(a,s,u){var l=a.dispatch,c=a.getState,d=s.TraceManager.getTracer(Ve);if(Object(o.Eb)(c(),e)||!Object(we.n)(c(),e)){var p=Object(n.l)(c(),e);i.push({name:"CorrelationId",value:u.correlationId},{name:"pageType",value:p}),function(e,t){var r={};r[re.b.SaveFormParameters.CorrelationId]=e.correlationId,r[re.b.SaveFormParameters.SaveMode]=t.toString(),ae.a.addKeyPerformanceIndicatorOnIdle("SaveForm",r)}(u,t);var h=Object(n.g)(c(),e),f=Object(o.Lb)(c(),null==h?void 0:h.entityTypeName,null==h?void 0:h.id);return it(s,l,c,e,t,!1,i,f).then((function(r){var a=r;a===Be&&(a=mt(c(),e));var n=ut(a,i,d,"Null identifier after _saveForm within saveForm");return He(l,c(),s,t,!0,e,n,i,f),n&&Object(ge.c)(Object(T.p)(c(),a.etn)),a}),(function(a){a=ze(a,e);var n=Object.keys(a),o=qe(a);i.push({name:"originalError",value:o});var u=Qe(n,c,a,l,d,i),p=n[0],h=a[p],m=Object(S.j)(c(),p),g=u[0];if(g&&g.getIsIgnorable()){if(He(l,c(),s,t,g.getContinueExecution(),p,!1,i,f),Ge(c(),l,s,e,a),2200000006===h.errorCode){var b=mt(c(),e);if(b)return Promise.resolve(b)}return Promise.reject(h)}return Ge(c(),l,s,e,a,"Forms.SaveForm.SaveForm",i),Object(oe.e)(h)?(d.info("Failed to save the form due to duplicate",i),l(Object(v.a)(p,h)).then((function(a){return 0===a.status?l(Object(I.a)(a.pageId)).then((function(a){if("merge_done"!==a.value.param_lastButtonClicked){if(a.value.param_lastButtonClicked===Le)return l(Object(_.b)(m,p,Z.a)),l(Object(D.b)(p,!0)),it(s,l,c,p,t,!1,i).then((function(t){var r=t;return r===Be&&(r=mt(c(),e)),ut(t,i,d,"Null identifier after internal _saveForm within saveForm"),Ke(l,c(),s,p,i),r}),(function(t){var a=t[p],n=Xe(a,l,c(),m,p,d,i);return n&&n.getIsIgnorable()?(Ke(l,c(),s,p,i),Ge(c(),l,s,e,t),null):(Ge(c(),l,s,e,t),et(l,c(),a,r,p),Object(oe.h)(c(),p,a,i,s,"Forms.SaveForm.SaveForm.Duplicate"),Promise.reject(a))}))}else We(c(),l,p,m,e)})):Promise.reject(a.error)}))):(l(Object(_.b)(m,p,Z.a)),et(l,c(),h,r,p),Promise.reject(h))}))}},getFailureParameters:function(e,t){return Object(oe.a)(e,i),i}}}function ze(e,t){var r;return e.message&&((r={})[t]=e,e=r),e}function We(e,t,r,i,a){var n=Object(o.ac)(e,r,i);t(Object(Re.b)(n)),t(Object(Ae.e)(a))}function qe(e){var t={};for(var r in e)Object(oe.e)(e[r])||(t[r]=e[r]);return JSON.stringify(t)}function Ge(e,t,r,i,a,n,s){for(var u=Object(he.a)(e,i),l=0;l<u.length;l++){var c=u[l],d=Object(S.j)(e,c);t(Object(f.b)(c,d,!1)),a[c]&&n?(t(Object(h.b)(c,d,2)),Object(oe.h)(e,c,a[c],s,r,n)):Object(o.mb)(e,{id:c},d)&&t(Object(h.b)(c,d,3))}}function Qe(e,t,r,i,a,n){var o=[];if(e)for(var s=0;s<e.length;s++){var u=e[s],l=Object(S.j)(t(),u),c=r[u];o.push(Xe(c,i,t(),l,u,a,n))}return o}function He(e,t,r,i,a,s,u,l,c){if(a){var d=Object(S.j)(t,s),p=!Object(A.b)(t),h=Object(R.a)(t);l.push({name:"isServerUnavailable",value:p},{name:"isMocaOfflineFeatureEnabled",value:h}),p&&h&&e(Object(k.c)(s,d,!0)),e(Object(_.b)(d,s,Z.a)),e(H(s));var f=Object(o.eb)(t,s,d),m=Object(n.g)(t,s),g=Object(o.Lb)(t,null==m?void 0:m.entityTypeName,null==m?void 0:m.id);if((15===i||5===i||!Object(ve.a)(c)&&g&&!c)&&f)for(var v in f)f[v]&&void 0!==f[v].disabledByClientApi&&null!==f[v].disabledByClientApi&&f[v].dataFieldName&&e(Object(De.b)(s,f[v].dataFieldName,d,void 0));u&&$e(e,d,s),e(Object(Pe.a)(s,null,!1))}r.EventManager.ReportComponentSuccess("Forms.SaveForm.SaveForm",l)}function Ke(e,t,r,i,a){r.EventManager.ReportComponentSuccess("Forms.SaveForm.SaveForm.Duplicate",a)}function Xe(e,t,r,i,a,n,s){var u=Object(oe.g)(e),l=!1,c=!0,d=!1;if(u)switch(e.errorCode){case 2200000004:d=!0;break;case 2200000005:c=!1;break;case 2200000006:l=!0,d=!0;break;case 2200000007:c=!1,function(e,t,r,i,a){if(a)r(Object(O.c)(t,i,a,P.a.error,Z.b));else{var n=Object(o.zb)(e,i,t);if(n)for(var s in n){var u=r(Object(O.b)(n[s].label,n[s].errorMessage)),l=Object(de.a)(e,i),c=Object(o.yb)(l,t),d=Object(o.y)(e,i,t),p=c.concat(d),h=Object(o.W)(e,t,i,s,p),f=Object($.d)(i,s);r(Object(O.c)(t,i,u,P.a.error,f,null,null,h))}}}(r,i,t,a),n.info(Object(oe.c)(2200000007),s);break;default:n.error("Unknown error code to ignore",s)}return s.push({name:"isIgnorable",value:u},{name:"continueExecution",value:l},{name:"canNavigate",value:c},{name:"canForceNavigate",value:d}),new xe(u,l,c,d)}function Ye(e){var t=[{name:"PageId",value:e}];return{type:"form.autosave.async",execute:function(r,i,a){var u=r.dispatch,l=r.getState,c=l(),d=Object(n.g)(c,e),p=function(e,t){var r=Object(n.g)(e,t),i="_isSyncErrorRetryRequest",a=!1;r.data&&(a=!!r.data[i]);return a!==Object(Q.a)(e,t)}(c,e),m=!d,g=!d.id,b=s.a.isNullOrEmpty(d.id);if(!Object(A.b)(c)&&!Object(R.a)(c))return Promise.resolve(void 0);if(Object(o.Eb)(c,e))return Promise.resolve(void 0);var w=i.TraceManager.getTracer(Ve);if(p||m||g||b)return t.push({name:"blockAutoSave",value:p},{name:"isPageInputNull",value:m},{name:"isPageInputIdNull",value:g},{name:"isPageInputIdBadGuid",value:b}),w.info("Not Autosaving due to bad inputs.",t),Promise.resolve(void 0);var T=Object(he.a)(l(),e);return T.some((function(e){var t=Object(S.j)(c,e),r=Object(o.ac)(c,e,t);return Object(y.g)(c,r)}))?it(i,u,l,e,70,!0,t).then((function(r){var i=r;i===Be&&(i=mt(l(),e));var a=ut(i,t,w,"Null identifier after _saveForm within autoSaveForm"),n=Object(S.j)(c,e);return Ze(u,l(),n,e,a),i}),(function(r){r=ze(r,e);var a=Object.keys(r),n=qe(r);t.push({name:"originalError",value:n});var o=Qe(a,l,r,u,w,t),s=a[0],d=r[s],p=Object(S.j)(l(),s),m=o[0];if(m&&m.getIsIgnorable()){var g=Object(S.j)(l(),e);return Ze(u,l(),g,e,!1),Ge(l(),u,i,e,r),null}return u(Object(j.e)(E.m)).then((function(){if(Ge(l(),u,i,e,r,"Forms.SaveForm.AutoSaveForm",t),!Object(oe.e)(d))return u(Object(_.b)(p,s,Z.a)),Promise.reject(d);w.info("Failed to autosave the form due to duplicate",t);var a=function(){u(Object(_.b)(p,s,Z.a)),u(Object(D.b)(s,!0));for(var r=0;r<T.length;r++){var a=T[r],n=Object(S.j)(l(),a);u(Object(h.b)(a,n,1)),u(Object(f.b)(a,n,!1))}return it(i,u,l,e,70,!0,t).then((function(r){var a=r;return a===Be&&(a=mt(l(),e)),ut(a,t,w,"Null identifier after internal _saveForm within autoSaveForm"),Je(u,l(),i,e,t),Promise.resolve(a)}),(function(r){r=ze(r,e);var a=Object.keys(r)[0],n=r[a],o=Object(S.j)(l(),a),d=Xe(n,u,l(),o,a,w,t);if(d&&d.getIsIgnorable())return Je(u,l(),i,e,t),null;Object(oe.h)(l(),s,n,t,i,"Forms.SaveForm.AutoSaveForm.SaveAnyway"),et(u,c,n,null,s)}))};rt(l());for(var n={Label:Object(C.c)(Oe,E.c),Handler:function(){a()}},o={Label:Object(C.c)(Oe,E.d),Handler:function(){u(Object(v.a)(e,d)).then((function(t){return 0===t.status?u(Object(I.a)(t.pageId)).then((function(t){"merge_done"!==t.value.param_lastButtonClicked?t.value.param_lastButtonClicked===Le&&a():We(l(),u,s,p,e)})):Promise.reject(t.error)}))}},m=0;m<T.length;m++){var g=T[m],b=Object(S.j)(l(),g);u(Object(f.b)(g,b,!1)),r[g]?u(Object(h.b)(g,b,2)):u(Object(h.b)(g,b,3)),u(Object(_.b)(b,g,Z.a))}return u(Object(O.c)(p,s,Object(C.c)(Oe,E.b),P.a.warning,Z.a,[n,o]))}))})):Promise.resolve(void 0)},getFailureParameters:function(e,r){return Object(oe.a)(e,t),t}}}function Ze(e,t,r,i,a){!Object(A.b)(t)&&Object(R.a)(t)&&e(Object(k.c)(i,r,!0)),e(Object(_.b)(r,i,Z.a)),a&&$e(e,r,i),e(Object(Pe.a)(i,null,!1))}function Je(e,t,r,i,a){r.EventManager.ReportComponentSuccess("Forms.SaveForm.AutoSaveForm.SaveAnyway",a)}function $e(e,t,r){e(function(e,t){return{type:"grids.page.refresh.dataset.asyn",execute:function(r,i){var a,n,o=r.dispatch,s=r.getState,u=i.TraceManager.getTracer(ue.z),l=ue.x+".refreshPageDataSetsAction";try{var c=s(),d=Object(de.a)(c,e);if(t.contextTokenType===ce.a.QuickViewForm){u.info("Refreshing all of the quick view's grids for the quick view on page with ID "+e);var h=Object(S.v)(t),f=null===(n=null===(a=null==d?void 0:d.forms)||void 0===a?void 0:a[h])||void 0===n?void 0:n.formId;if(f){var m=Object(le.j)(c,e,[f],t,!0);for(var g in m){var v=m[g].contextToken;o(Object(se.b)(e,v))}}}else if(u.info("Refreshing all the grids for the page with ID "+e),d.datasets)for(var b in d.datasets)o(Object(se.c)(e,b));return i.EventManager.ReportComponentSuccess(l),Promise.resolve()}catch(t){var y="Refreshing datasets for pageid "+e+"failed ";t&&t.message&&(y+="with the error message as : "+t.message),i.EventManager.ReportComponentFailure(l,Error(y));var O=new p.a(y);return Promise.reject(O)}}}}(r,t)),e(function(e,t){return{type:"form.page.chartdata.refresh.async",execute:function(r){var i=r.dispatch,a=(0,r.getState)(),n=Object(he.b)(a,e),o=Object(le.c)(a,n,e,t);for(var s in o){var u=o[s];i(Object(se.b)(e,u))}return Promise.resolve()}}}(r,t)),e(function(e,t){return{type:"form.quickform.data.resfresh.async",execute:function(r){var i=r.dispatch,a=(0,r.getState)(),s=Object(o.ac)(a,t,e),l=Object(n.g)(a,t),d=new u.a(l.entityTypeName,l.id),p=Object(o.fc)(a,t,e);for(var h in p){var f=Object(o.s)(a,{id:t,controlName:h},e),m=Object(y.d)(a,s,d,f.DataFieldName);if(m&&m.reference){var g=p[h][m.reference.etn],v=Object(c.y)(a,g);i(Object(fe.c)(m.reference,v))}}return Promise.resolve()}}}(t,r))}function et(e,t,r,i,a){if(!i){if(r&&r.errorCode)return e(Object(m.b)(r,!1,a));if(r&&r.reason&&r.reason.errorCode)return e(Object(m.b)(r.reason,!1,a));var n=r.message,o=tt(t,E.l);return e(Object(g.a)({title:o,text:n},{type:"error"},a))}}function tt(e,t){return rt(e),Object(C.c)(Oe,t)}function rt(e){ye||(ye=Object(C.h)()),Oe||(Oe=ye(e,E.m))}function it(e,t,r,i,l,c,m,g){var v=r(),b=Object(he.a)(v,i),O=b.map((function(e){return Object(S.j)(v,e)}));null==m&&(m=[{name:"nullTelemetryParameters",value:!0}]),m.push({name:"_saveMode",value:l});for(var _=[],P=[],w=0;w<b.length;w++){var I=b[w];Object(o.Wc)(v,I,O[w])?P.push(I):_.push(I)}var j=_.length>0;if(m.push({name:"readOnlyFormComponents",value:JSON.stringify(P)}),j)return function(e,t,r,i,l,c,m,g,v,b){var O,_=t(),P=Object(Ee.a)(),w=c.filter((function(e,t){var r=l[t];return Object(o.mb)(_,{id:e},r)}));if(w.length>0){if(P){var I=Object(Ne.b)(i,Te.b.onSave);w.forEach((function(e,t){var r=l[t],i=Object(Ne.c)(_,e,r),a=new Fe.a(new Error);I.push({message:"Save is called again while previous save operation is in progress "+i+". Make sure the previous save event handler code does not call client API to save the form.",callstack:a.getStackTrace()})}))}var j=tt(_,E.a),C=((O={})[i]=Object(oe.b)(_,i,2200000003,j),O);return Promise.reject(C)}var N=Object(ne.x)(t());c.forEach((function(r,i){("TaskBasedFlow"===Object(n.l)(t(),r)||N&&!1===N.isDuplicateDetectionEnabled||N&&!1===N.isDuplicateDetectionEnabledForOnlineCreateUpdate)&&e(Object(D.b)(r,!0)),e(Object(h.b)(r,l[i],0)),e(Object(f.b)(r,l[i],70===m))}));var F=70===m?Ce.a.getInstance().getAttributesPendingUpdate():new Set;return(70===m?Promise.resolve():Ce.a.getInstance().checkForOutstandingWork(t(),i)).then((function(){return function(e,t,r,i,l,c,m,g,v,b,O){var _,P,w=r();g||c.forEach((function(t,r){return e(Object(ee.b)(t,l[r]))}));for(var I={},j=0;j<c.length;j++){var C=c[j],D=l[j],E=Object(o.oc)(w,{id:C},D);if(E){var N=st(e,w,C,D,E,I);if(!Object(ve.b)(N)){var F=((_={})[C]=new p.a(N),_);return Promise.reject(F)}}}var R=t.TraceManager.getTracer(Ve),k=ot(w,c,l),M=k.map((function(e){return Object(S.j)(w,e)}));if(k.length>0)return gt(w,i,e,R,k,M,v);for(j=0;j<c.length;j++){C=c[j],D=l[j];var L=t.ScriptManager.getContainer(C).getEventManager();if(e(L.runOnSave(D,m))){R.info(Object(oe.c)(2200000005),v);F=((P={})[C]=Object(oe.b)(w,i,2200000005),P);return Promise.reject(F)}}if(w=r(),k=ot(w,c,l),M=k.map((function(e){return Object(S.j)(w,e)})),k.length>0)return gt(w,i,e,R,k,M,v);var V=c.map((function(e,t){return Object(o.ac)(w,e,l[t])})),x=V.map((function(e){return Object(y.b)(w,e)})),B=!1,U=!1,z=new Set,W=function(t){var r=x[t];if((null==r?void 0:r.activeChanges)&&Object.keys(r.activeChanges).length)U=!0,!B&&at(r,w,c[t])&&(B=!0);else{var i=c[t],a=!1,n=I[i];if(n&&n.length>0&&(a=n.some((function(e){var t=Object(y.b)(w,e);if((null==t?void 0:t.activeChanges)&&Object.keys(null==t?void 0:t.activeChanges).length>0)return at(t,w,i)}))),!a){var o=l[t];z.add(i),e(Object(h.b)(i,o,3)),e(Object(f.b)(i,o,!1))}}};for(j=0;j<x.length;j++)W(j);var q=[];if(Object.keys(I).forEach((function(e){I[e]&&q.push.apply(q,I[e])})),U&&!B||z.size===c.length&&0===q.length){R.info(Object(oe.c)(2200000006),v);F={};for(var G=0,Q=c;G<Q.length;G++){F[Q[G]]=Object(oe.b)(w,i,2200000006)}return Promise.reject(F)}return function(e,t,r,i,l,c,p,m,g,v,b,O,_){for(var P=[],S=[],w=function(i){var w=c[i];if(g.has(w))return"continue";var I=Object(he.b)(r(),w);S.push(w),P.push(e(Object(d.b)(w,I)).then((function(c){var g=c.unboundAttributes,P=c.attributesPendingUpdate;return function(e,t,r,i,l,c,p,m,g,v,b,O,_,P){var S=t(),w=Object(n.g)(S,l),I="";null!=w&&(O.push({name:"_entityTypeName",value:w.entityTypeName},{name:"_formId",value:s.a.toString(w.formId)}),I=Object(T.E)(S,w.entityTypeName));var j=Object(he.b)(S,l),C=lt(S,j,w,I,g);return function(e,t,r,i,l,c,p,m,g,v,b,O,_,P,S,w,I){var j=Object(o.Bc)(t,i),C=r.ScriptManager.getContainer(i).getEventManager(),D=function(e,t,r,i){if(!Object(be.e)(e,r.entityTypeName)||!Object(o.Cb)(e,t))return null;var a=Object(y.b)(e,i),n=new u.a(r.entityTypeName,r.id);s.a.isNullOrEmpty(r.id)&&!a.identifier&&(n=new u.a(r.entityTypeName,a.identifier.id));var l=r.processId&&!s.a.equals(s.a.fromExternalGuid(r.processId),s.a.EMPTY)?u.a.toLegacyEntityReference(new u.a("businessprocessflowinstance",s.a.fromExternalGuid(r.processId))):null,c=r.processInstanceId&&!s.a.equals(s.a.fromExternalGuid(r.processInstanceId),s.a.EMPTY)?u.a.toLegacyEntityReference(new u.a("businessprocessflowinstance",s.a.fromExternalGuid(r.processInstanceId))):null;if(n&&l&&c)return new Se.a(u.a.toLegacyEntityReference(n),l,c);if(n&&l&&!c)return new Se.a(u.a.toLegacyEntityReference(n),l,null);if(n)return new Se.a(u.a.toLegacyEntityReference(n),null,null);return null}(t,i,p,v),E=function(e,t,r,i,a){var n=new Array,o=Object(Ie.a)(e,t,r,i,a);o&&n.push(o);return n}(e,t,r,g,i);Object(he.b)(t,i);if(b.length>0||E.length>0)return function(e,t,r,i,n,o,s,u,l,c,p,m,g,v,b,y,O,_,P,S,w){O.push({name:"relatedEntitiesSnapshotIds.length",value:m.length},{name:"primaryEntitySnapshotId",value:p});var I=p?m.concat(p):m;g&&g.length>0&&I.push.apply(I,g);return e(Object(a.d)(I,y,P,w)).then((function(a){return e(Object(d.a)(i,v,b)).then((function(){if(a&&a.length>0&&p){var n=a[I.indexOf(p)];return e(ct(r,i,o,u,p,c,l,n,_,t,S))}return e(Object(h.b)(i,c,1)),e(Object(f.b)(i,c,!1)),a&&a.length>0?a[0]:null}))}))}(e,t,C,i,0,c,0,p,m,g,v,b,E,_,P,j,S,w,O,I,D);return function(e,t,r,i,o,s,u,l,c,p,h,f,m,g,v,b,y,O,_){var P=Object(n.g)(t,i),S=P&&f&&f[P.entityTypeName]?f[P.entityTypeName]:[];return e(Object(a.c)(h,v,S,_)).then((function(a){return e(Object(d.a)(i,m,g)).then((function(){return e(ct(r,i,s,l,h,p,c,a,y,t,O))}))}))}(e,t,C,i,0,c,0,p,m,g,v,O,_,P,j,0,w,I,D)}(e,S,r,l,0,g,w,I,i,p,m,C,v,b,O,_,P)}(e,r,t,l[i],w,0,p[i],m,v,g,P,b,O,_)})))},I=0;I<c.length;I++)w(I);var j=S.length;return Promise.all(P.map((function(t,i){return t.then((function(t){j--;var a=Promise.all([Promise.resolve()]);return 0===j&&(a=nt(e,r,S,v)),a.then((function(){return{formComponentId:S[i],entityReference:t}}))})).catch((function(t){throw 0===--j&&nt(e,r,S,v),t.saveFormPromiseComponentId=S[i],t}))}))).then((function(e){for(var t=0,r=e;t<r.length;t++){var a=r[t];if(a.formComponentId===i)return a.entityReference}return Be})).catch((function(t){var i,a,n=((i={})[t.saveFormPromiseComponentId]=t,i);if(t.saveFormPromiseComponentId=void 0,-2147220969===(null===(a=null==t?void 0:t.getNegativeErrorCode)||void 0===a?void 0:a.call(t))){var o=Object(Me.f)(t.message);o&&e(Object(ke.c)(o,Object(A.b)(r())))}throw n}))}(e,t,r,i,l,c,V,q,z,m,v,b,O)}(e,r,t,i,l,c,m,g,v,b,F)}))}(t,r,e,i,_.map((function(e){return Object(S.j)(v,e)})),_,l,c,m,!!g);e.TraceManager.getTracer(Ve).info(Object(oe.c)(2200000004),m);for(var C={},N=0,F=P;N<F.length;N++){C[F[N]]=Object(oe.b)(v,i,2200000004)}return Promise.reject(C)}function at(e,t,r){var i=!1,a=Object(o.Oc)(t,r);if(a){var n=Object.keys(a);Object.keys(e.activeChanges).filter((function(e){return-1===n.indexOf(e)})).length&&(i=!0)}else i=!0;return i}function nt(e,t,r,i){var a,o;if(r.length<2)return Promise.all([Promise.resolve()]);for(var l=t(),c=new Map,d=0,p=r;d<p.length;d++){var h=p[d],f=Object(n.g)(l,h),m=null!==(a=Object(T.E)(l,null==f?void 0:f.entityTypeName))&&void 0!==a?a:"",g=Object(he.b)(l,h),v=null==f?void 0:f.entityTypeName,b=s.a.toString(null==f?void 0:f.id),y=null===(o=lt(l,g,f,m,i))||void 0===o?void 0:o[v],O=c.get(v);if(null==O?void 0:O.size){var _=O.get(b);(null==_?void 0:_.size)?y.forEach(_.add,_):O.set(b,new Set(y))}else{var P=new Map;P.set(b,new Set(y)),c.set(v,P)}}var S=[];return c.forEach((function(t,r){t.forEach((function(t,i){var a=new u.a(r,new s.a(i));S.push(e(Object(fe.c)(a,Array.from(t))))}))})),Promise.all(S)}function ot(e,t,r){for(var i=[],a=0;a<t.length;a++){var n=t[a],s=Object(de.a)(e,n);Object(o.Gb)(s,e,n,r[a])||i.push(n)}return i}function st(e,t,r,i,a,n){var s=Object(de.a)(t,r),u=[];for(var l in a){var c=Object(S.m)(i,l),d=Object(o.ac)(t,r,c);if(d)if(u.push(d),!Object(o.Gb)(s,t,r,c))return e(Object(h.b)(r,i,2)),e(Object(f.b)(r,i,!1)),tt(t,E.e)}u.length>0&&(n[r]=u)}function ut(e,t,r,i){var a=!!e;return t.push({name:"isIdentifierValid",value:a},{name:"entityTypeName",value:a?e.etn:null}),a||r.error(i,t),a}function lt(e,t,r,i,a){var n,o=Object(c.j)(e,t),l=r?new u.a(r.entityTypeName,r.id):null,d=l?Object(F.e)(e,l):null,p=Object(c.y)(e,t),h=[];h.push.apply(h,p);var f=Object(K.a)(e,r.entityTypeName);if(f&&h.push.apply(h,f),o&&r.entityTypeName){var m=Object(pe.d)(e,o.FormLibraries,[r.entityTypeName]);m&&h.push.apply(h,m)}if(i&&-1===h.indexOf(i)){var g=Object(N.a)(e,r.entityTypeName,i);g&&g.IsRetrievable&&h.push(i)}if(d&&d!==s.a.EMPTY){var v=
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function(e,t,r){var i=[];if(e&&!s.a.isNullOrEmpty(t)&&r){var a=Object(be.a)(e,t);if(a&&a.businessProcessFlowStepEntityAttributeControls){var n=a.businessProcessFlowStepEntityAttributeControls[r];if(!Object(ve.a)(n)){var o=Object(T.h)(e,r);if(!Object(ve.a)(o)){var u=o.AttributeNames;Object(ve.a)(u)||Object.keys(n).forEach((function(e){var t=n[e].DataFieldName;!Object(ve.b)(t)&&u.indexOf(t)>-1&&i.push(t)}))}}}}return i}(e,d,l.etn);if(v){var b=v.filter((function(e){return-1===h.indexOf(e)}));h.push.apply(h,b)}}var y=h;if(70===a){var O=Ce.a.getInstance().getAttributesPendingUpdate();y=null==y?void 0:y.filter((function(e){return!O.has(e)}))}return(n={})[l.etn]=y,n}function ct(e,t,r,a,n,s,u,l,c,d,p){return{type:"form.updateOnSaveSuccess",sync:!0,execute:function(m,g){var v=m.dispatch,O=m.getState,_=O(),P=Object(i.__assign)(Object(i.__assign)({},a),{id:l.id,data:dt(a)}),S=Object(y.b)(_,n),I=Object(F.j)(_,l,u),j=I?I.value:null,C=S.identifier.name?S.identifier.name:j||null,D=Object(i.__assign)(Object(i.__assign)({},l),{name:C});v(Object(b.b)(P,t)),Object(de.a)(_,t).__pageName!==M.a&&v(Object(V.b)(t,D)),a.id||v(e.runOnProcessChange(s,2));var E=70===r?Array.from(Ce.a.getInstance().getAttributesPendingUpdate()).concat(Array.from(p)):void 0;v(Object(L.d)(t,s,E)),v(Object(h.b)(t,s,1)),v(Object(f.b)(t,s,!1)),v(Object(je.g)(t)),v(Object(me.a)(t,d,s,l.etn,l.id)),v(e.runOnDataLoad(s,2)),!c&&(a.id||Object(o.Kb)(_,t)||Object(o.Ib)(_,t))||v(e.runOnLoad(s,2)),v(e.runPBLs(s));var N=P.entityTypeName,R=Object($.c)(t,N,O(),s);return R&&v(Object(J.c)(t,R)),v(function(e,t){return{type:"recentitems.formsave.addrecentitem",sync:!0,execute:function(r){var i=r.dispatch,a=(0,r.getState)();if(t&&e&&void 0!==t.mode){var n=Object(T.E)(a,e.etn),s=n&&t.activeChanges&&t.activeChanges[n];if(t.mode!==w.a.Update||s){var u={RecordType:Y.a.Entity,EntityTypeName:e.etn,LastAccessed:new Date,ObjectId:e.id,Title:Object(o.ec)(a,e.etn,e.id),IconPath:Object(T.j)(a,e.etn,e.id)};i(Object(X.b)(u))}}}}}(D,Object(y.b)(d,n))),D}}}function dt(e){var t={};return null!=e&&null!=e.data&&(t.processId=e.data.processId,t.processInstanceId=e.data.processInstanceId,t.nextStageId=e.data.nextStageId,t.parentrecordtype=e.data.parentrecordtype,t.parentrecordid=e.data.parentrecordid,t.parentrecordname=e.data.parentrecordname),t}function pt(e,t,r,i,a,u,l){var c=[{name:"PageId",value:e},{name:"saveMode",value:i},{name:"shouldNavigateToSavedEntity",value:r},{name:"performRefresh",value:!!a}];return{type:"form.saveNavigate.async",execute:function(d,p,h){var f=d.dispatch,m=d.getState,g=m(),b=Object(n.l)(g,e);if(c.push({name:"pageType",value:b}),Object(o.Eb)(g,e))return Promise.reject(Object(oe.b)(g,e,2200000016));if(!Object(o.Qc)(g)&&a){var y=Object(n.g)(g,e);null!=y&&c.push({name:"entityTypeName",value:y.entityTypeName},{name:"formId",value:s.a.toString(y.formId)});var O=Object(S.j)(g,e);return ft(g,f,p,e,O,t,r,y,a),p.EventManager.ReportComponentSuccess("Forms.SaveForm.SaveAndNavigateAway",c),null}var P=p.TraceManager.getTracer(Ve);return it(p,f,m,e,i,!1,c,u).then((function(n){var o=n;o===Be&&(o=mt(m(),e));var s=ut(o,c,P,"Null identifier after _saveForm within saveFormAndNavigate"),u=Object(S.j)(g,e);return ht(f,m,p,u,e,t,r,s,!!a,!0,!1,i,c),o}),(function(n){n=ze(n,e);var o=Object.keys(n),s=qe(n);c.push({name:"originalError",value:s});var d=Qe(o,m,n,f,P,c),h=o[0],g=n[h],b=Object(S.j)(m(),h),y=d[0];if(y&&y.getIsIgnorable()){if(ht(f,m,p,b,h,t,r,!1,!!a,y.getCanNavigate(),y.getCanForceNavigate(),i,c),Ge(m(),f,p,e,n),2200000006===g.errorCode){var O=mt(m(),e);if(O)return Promise.resolve(O)}return Promise.reject(g)}return Ge(m(),f,p,e,n,"Forms.SaveForm.SaveAndNavigateAway",c),Object(oe.e)(g)?f(Object(v.a)(h,g)).then((function(o){return 0===o.status?f(Object(I.a)(o.pageId)).then((function(o){if("merge_done"!==o.value.param_lastButtonClicked){if(o.value.param_lastButtonClicked===Le)return f(Object(_.b)(b,h,Z.a)),f(Object(D.b)(h,!0)),f(pt(h,t,r,i,a,u)).catch((function(t){t=ze(t,e);var r=Object.keys(t)[0],i=null==n?void 0:n[r];return c.push({name:"errorCode",value:null==i?void 0:i.errorCode}),P.warn("Ignorable error on duplicate record save",c),Promise.reject(i)}))}else We(m(),f,h,b,e)})):Promise.reject(o.error)})):(f(Object(_.b)(b,h,Z.a)),et(f,m(),g,l,h),Promise.reject(g))}))},getFailureParameters:function(e,t){return Object(oe.a)(e,c),c}}}function ht(e,t,r,a,o,u,l,c,d,p,h,f,m){m.push({name:"performRefresh",value:d});var g=Object(n.g)(t(),o);g&&g.isOfflineSyncError&&e(Object(b.b)(Object(i.__assign)(Object(i.__assign)({},g),{isOfflineSyncError:!1}),o));var v=t(),y=Object(n.g)(v,o);null!=y&&m.push({name:"_entityTypeName",value:y.entityTypeName},{name:"_formId",value:s.a.toString(y.formId)}),p&&(c||d||h)&&(ft(v,e,r,o,a,u,l,y,d),e(H(o))),r.EventManager.ReportComponentSuccess("Forms.SaveForm.SaveAndNavigateAway",m)}function ft(e,t,r,i,a,n,s,u,c){if(s){var d=r.Router.createUrlForPage(n,u),p=d.match(/pagetype=([^&]+)/)[1];if(c||u.pageType!==p){var h=function(e){if(!e)return e;var t=["entityTypeName","id","formId","processId","processInstanceId","selectedStageId","isCrossEntityNavigate","isOfflineSyncError","navItemId","bodyOnly","recordSetQueryKey"],r={entityTypeName:e.entityTypeName};return t.reduce((function(t,r){return t[r]=e[r],t}),r)}(u);t(Object(l.a)(n,h,i,te.b.Redirect))}else if(!c&&!Object(o.Ib)(e,i)){var f=r.Router.getHistoryManager(),m=Object(_e.a)(e,i);f.ReplaceState(f.GetState(),d,m)}}}function mt(e,t){var r=Object(n.g)(e,t);return r&&r.entityTypeName&&r.id?new u.a(r.entityTypeName,r.id):null}function gt(e,t,r,i,a,n,o){var s={};return null==a||a.forEach((function(i,a){r(Object(h.b)(i,n[a],2)),r(Object(f.b)(i,n[a],!1)),s[i]=Object(oe.b)(e,t,2200000007)})),i.info(Object(oe.c)(2200000007),o),Promise.reject(s)}},UOUy:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return l}));var i=r("Sscr"),a=r("BvBP"),n=r("9r0m"),o=r("Ev4I"),s=r("JlqV"),u="has.offline.changes";function l(e,t){var r=[{name:"entityLogicalName",value:e}];return{type:"has.offline.changes.async",execute:function(i,u,l){i.dispatch;var c=(0,i.getState)(),d=Object(s.b)(c),p=Object(a.a)(c),h=Object(o.l)(c,e);return r.push({name:"CorrelationId",value:l.correlationId},{name:"ContextId",value:l.contextId},{name:"ActionStack",value:l.stack},{name:"isServerAvailableFromState",value:d},{name:"isMocaOfflineEnabled",value:p},{name:"isEntityAvailableForOffline",value:h}),!d&&p&&h?u.OfflineProvider.hasOfflineChanges(e,n.a.toLegacyGuid(t)).nativePromise().then((function(e){return u.EventManager.ReportComponentSuccess("Forms.SetHasOfflineChanges.HasOfflineChanges",r),e})):(u.TraceManager.getTracer("Forms.SetHasOfflineChanges").warn("Not checking for offline changes.",r),Promise.resolve(!1))},getFailureParameters:function(e,t){return r}}}function c(e,t,r){var a=Object(i.v)(t);return{type:u,payload:{hasOfflineChanges:r},meta:{pageId:e,contextKey:a}}}},Uhhf:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var i="form.output";function a(e,t){return{type:i,payload:{reason:"save",value:t},meta:{pageId:e}}}},UlLp:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var i=r("uQP8");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function a(e,t){return e+":"+t}function n(e,t,r,n){var o=a(r,n),s=Object(i.a)(e,t);return s&&s.customDataProviderOutputs&&s.customDataProviderOutputs[o]?s.customDataProviderOutputs[o]:null}},VZmd:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var i=r("c/eZ"),a=r("/SAa"),n=r("re9F"),o=r("ktSr"),s=r("EK3O"),u=r("MSit"),l=r("455M"),c=r("9r0m"),d=r("RlP9"),p=r("r2h9"),h=r("/j9Z"),f=r("G7N+"),m=r("Ff8i"),g=r("T2Xs"),v=r("j6Db"),b=r("8xrh"),y=r("IUjT"),O=r("Y+aM"),_=r("7FCO"),P=r("z99Z"),S=r("EpyZ"),w=r("bIXa"),I=r("F2uj"),j=r("Ww2r"),C=function(e){function t(t,r,i){var a=e.call(this,t,null,r)||this;return a._dataSetWrappers={},a._dataSetParameters={},a._viewSelectorItemsByTypeById={},a._previousAvailableViewIds=null,a._previousAvailableViews=null,a._selectedViewName=null,a._previousLookupParameter=null,a._lookupConfigurationWrapper=null,a._lookupMruWrapper=null,a._requireRefresh=!1,a._views={},a.lookupMetaDataRequestOnce=!1,a._lookupMruWrapper=new n.a,a._lookupConfigurationWrapper=new o.a,a._requireRefresh=i,a.dataSetClass=2,a}return Object(i.__extends)(t,e),t.prototype.getLatestData=function(){return this._previousLookupParameter},t.prototype.getLatestFieldData=function(){return this._previousFieldData},t.prototype.retrieveCurrentView=function(t,r){if(null!==this._previousAvailableViews&&null!==this._selectedViewName)for(var i=0,a=this._previousAvailableViews.length;i<a;i++)if(this._previousAvailableViews[i]&&this._previousAvailableViews[i].title===this._selectedViewName)return Promise.resolve(this._previousAvailableViews[i]);return e.prototype.retrieveCurrentView.call(this,t,r)},t.prototype.getRelationshipNameFromParameter=function(e){return e?e.FilterRelationshipName:null},t.prototype.retrieveDataSetObject=function(t,r,a,n){var o,u=this,l=a.Parameters[this.getPropKey()];this._pageId=r.id,this.controlId=Object(b.v)(r)||l.Value,this.pageEtn=n?n.entityTypeName:"";var h=Object(S.b)(a,this.propKey),f=this.getAttribute(a,t,this.pageEtn),g=f&&f.Targets&&f.Targets[0];if(this.targetEntity=g,f&&this._checkCustomViews(t,f),this.shouldUseLookupService(t)&&f){var v=Object(y.f)(t,this.pageEtn,h,this._pageId);if(!this._entityMetadata){var O=Object(y.c)(t,v,g);if(O){var _=O.entity;this._entityMetadata=((o={})[g]=this.convertEntityDescriptorToEntityMetadata(_),o)}}}var P=!1;if(!this.isParameterOfDataSetType(l))return null;this._defaultViewId=this.getCurrentViewId(l);var w=this.previousDataSetParameter,I=this._retrieveDataSetObjectInternal(t,r,a,n);if(!I){var j=this.getCurrentViewId(l),C=void 0;j&&(C=Object(d.c)(t,j)),I=e.prototype.generateNewDatasetParam.call(this,!0,[],!1,null,null,{},c.a.toString(j),C?C.title:"")}var D=this.createLookupParameter(t,I,l);if(this._updateMemoizedObjectsIfNeeded(w,I,D,l,n,t),this._lookupConfigurationWrapper.updateConfiguration(l,r.descriptor),this._lookupMruWrapper.updateRecentItems(Object(m.h)(t),[I.getTargetEntityType()||g],this._lookupConfigurationWrapper.getLookupConfiguration()),Object.keys(this._viewSelectorItemsByTypeById).length>0){var E={};Object.keys(this._viewSelectorItemsByTypeById).forEach((function(e){Object.keys(u._viewSelectorItemsByTypeById[e]).forEach((function(i){if(u._views[i]=Object(d.c)(t,new c.a(i)),!u._dataSetWrappers[i]){var o=u._viewSelectorItemsByTypeById[e][i],l=o&&o.isUserView?p.b.userview:p.b.savedview;u._dataSetWrappers[i]=new s.a(e,u.propKey,u.contextToken,i,l),u._dataSetWrappers[i].updatePreviousOwnProps(r),u._dataSetParameters[i]=null}var h=u._dataSetWrappers[i],f=h.retrieveDataSetObject(t,r,a,n);f||(f=h.generateEmptyParam()),E[i]=f,E[i]!==u._dataSetParameters[i]&&(u._dataSetParameters[i]=E[i],P=!0)}))})),P&&(this._previousLookupParameter=Object(i.__assign)({},this._previousLookupParameter))}return this._previousLookupParameter},t.prototype._getExtraFilters=function(e){var t=[];if(e){e.ExtraFilters&&(t=t.concat(e.ExtraFilters));var r=e.AdditionalTargetExtraFilters;r&&r.hasOwnProperty(this.targetEntity)&&(t=t.concat(r[this.targetEntity].slice(0)))}return t},t.prototype._retrieveDataSetObjectInternal=function(t,r,a,n){var o,s=this.getPropKey();if(a&&a.Parameters&&a.Parameters[s]){var u=a.Parameters[s],c=this._getExtraFilters(u),d=Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({},a.Parameters[s]),this.previousDataSetDefinition),{Type:l.a.LookupSimple,ExtraFilters:c}),p=Object(i.__assign)(Object(i.__assign)({},a),{Parameters:Object(i.__assign)(Object(i.__assign)({},a.Parameters),(o={},o[s]=d,o))}),h=Object(i.__assign)(Object(i.__assign)({},r),{configuration:p});return e.prototype.retrieveDataSetObject.call(this,t,h,p,n)}return e.prototype.retrieveDataSetObject.call(this,t,r,a,n)},t.prototype._checkCustomViews=function(e,t){if(e&&e.metadata&&e.metadata.views&&t&&t.Targets){var r=[],a=[];for(var n in e.metadata.views){e.metadata.views[n].isCustomView&&a.push(n)}for(var o in a){n=a[o];r.push({id:n,name:e.metadata.views[n].title,queryType:p.a.CUSTOM_DEFINED_VIEW,isDefault:!1,isQuickFindQuery:!1,isUserView:!1,isPinned:!1,relatedEntityName:e.metadata.views[n].entityLogicalName,isAvailableInOffline:!0})}var s=function(e){var a=t.Targets[e],n=r.filter((function(e){return e.relatedEntityName===a})),o={};n&&n.length>0&&(n.forEach((function(e){o[e.id]=e})),u._viewSelectorItemsByTypeById[a]=Object(i.__assign)(Object(i.__assign)({},u._viewSelectorItemsByTypeById[a]),o))},u=this;for(var o in t.Targets)s(o)}},t.prototype._updateMemoizedObjectsIfNeeded=function(e,t,r,i,a,n){var o=this,s=!1,u=!1,l=this._previousAvailableViewIds?this._previousAvailableViewIds.join():null,p=null;this.previousDataSetDefinition!==i&&(this.previousDataSetDefinition=i),null!==e&&e===t||(s=!0,this.previousDataSetParameter=t);var h=a,f=h&&h.viewIds&&h.viewIds.length>0?h.viewIds.join():null;if(f&&l!==f?(s=!0,u=!0,p=h.viewIds):i.AvailableViewIds&&l!==i.AvailableViewIds&&(s=!0,u=!0,p=i.AvailableViewIds.split(",")),null===this._previousLookupParameter&&(s=!0),s?this._previousLookupParameter=r:r.error&&(this._previousLookupParameter.error=!0,this._previousLookupParameter.errorMessage=r.errorMessage),u){this._previousAvailableViews=[],p.forEach((function(e){var t=Object(d.c)(n,new c.a(e));t&&o._previousAvailableViews.push(t)})),this._previousAvailableViewIds=p.map((function(e){return e.replace(/[\{\}]/gi,"").toLocaleLowerCase()})),r.selectView=function(e){o._selectedViewName=e},r.availableViewNames=[];for(var m=0,g=this._previousAvailableViews.length;m<g;m++)this._previousAvailableViews[m]?r.availableViewNames.push(this._previousAvailableViews[m].title):r.availableViewNames.push("Unknown View")}},t.prototype.createLookupParameter=function(e,t,r){var i=new u.a(t,t.getViewId(),t.getTitle(),t.getTargetEntityType());i.allowFilterOff=!!r.AllowFilterOff,i.disableQuickFind=!!r.DisableQuickFind,i.enableViewPicker=!1!==r.EnableViewPicker,i.targetEntityType=r.TargetEntityType,i.filterRelationshipName=r.FilterRelationshipName,i.setRelatedFilter=this._setRelatedFilter.bind(this),i.setMyRecordsOnlyFilter=this._setMyRecordsOnlyFilter.bind(this);var n=this.relevantQueryError();if(n){if(i.error=!0,i.errorMessage=Object(j.b)(e,n.message),!i.errorMessage)return i.errorMessage=a.a.UnknownErrorMessage,i;n.parameter&&(i.errorMessage+=" "+n.parameter)}return i},t.prototype._setMyRecordsOnlyFilter=function(e){var t=this;this.setMyRecordsOnlyFilter(e),this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(r){t._dataSetWrappers[r].setMyRecordsOnlyFilter(e)}))},t.prototype._setRelatedFilter=function(e){var t=this;this.setRelatedFilter(e),this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(r){t._dataSetWrappers[r].setRelatedFilter(e)}))},t.prototype.generateEmptyLookupParam=function(t){var r=this.previousDataSetParameter,i=e.prototype.generateEmptyDataSetParam.call(this);if(!this._previousLookupParameter||r!==i){var a=this.getCurrentViewId(this.previousDataSetDefinition),n=c.a.toString(a),o=this.targetEntity;this._previousLookupParameter=this.extendByFieldData(new u.a(i,n,"",o),t)}return this._previousLookupParameter},t.prototype.generateEmptyParam=function(){return this.generateEmptyLookupParam(t._EMPTY_LOOKUP_SIMPLE_FIELD_DATA)},t.prototype.extendByFieldData=function(e,t){void 0===t&&(t=null);var r=this.queryBuilder&&this.queryBuilder.getFirstError()&&this._previousLookupParameter&&this._previousLookupParameter.error,a=r?this._previousLookupParameter.errorMessage:"";return null!==t&&this._previousFieldData!==t?(this._previousFieldData=t,this._previousLookupParameter=Object(i.__assign)(Object(i.__assign)({},e),this._previousFieldData)):this._previousLookupParameter=Object.assign(e,this._previousFieldData),r&&(this._previousLookupParameter.error=r,this._previousLookupParameter.errorMessage=a),this._previousLookupParameter},t.prototype.linkToParameter=function(t,r){var i=this;e.prototype.linkToParameter.call(this,t,r),t.getRecentItems=this._lookupMruWrapper.getRecentItems.bind(this._lookupMruWrapper,{entityTypeNames:[t.getTargetEntityType()]}),t.getLookupConfiguration=this._lookupConfigurationWrapper.getLookupConfiguration.bind(this._lookupConfigurationWrapper),t.getAllViews=this.getAllViews.bind(this,{retrieveViewAction:r.retrieveViewAction,retrieveViewSelectorAction:r.retrieveViewSelectorAction}),t.getDefaultViewId=this.getDefaultViewId.bind(this),t.getDataSetParameter=this._getDataSetParameter.bind(this),this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(e){i._dataSetWrappers[e].linkToParameter(i._dataSetParameters[e],r)})),t.generateAdditionalAttributes=this.ensureLookupMetaDataInitialization.bind(this,{retrieveLookupMetadataAction:r.retrieveLookupMetadataAction,refreshDataSetParameter:r.refreshDataSetParameter},!0),t.sendLookupRequest=this.searchLookup.bind(this,r),t.runPreSearch=function(){i.contextToken&&r.runPreSearch(i.contextToken,i.controlId,i._pageId)},t.executeNotifyHandlersThatEventOccurred=this._executeNotifyHandlersThatEventOccurred.bind(this,r)},t.prototype.getDefaultViewId=function(e){return this._defaultViewId&&this._defaultViewId.guid},t.prototype.getAllViews=function(e,t,r){var a=this,n=t,o=[];if(!r){var s=e.retrieveViewAction(n,p.a.MAIN_APPLICATION_VIEW,p.b.savedview),u=e.retrieveViewAction(n,p.a.LOOKUP_VIEW,p.b.savedview);o=o.concat([s,u])}for(var l=this._previousAvailableViewIds?this._previousAvailableViewIds:[],d=function(t){h._previousAvailableViews&&0!==h._previousAvailableViews.length&&0!==h._previousAvailableViews.filter((function(e){return e.viewId&&e.viewId.guid===l[t]})).length||o.push(h.retrieveView(new c.a(l[t]),e.retrieveViewAction))},h=this,f=0;f<l.length;f++)d(f);return Promise.all(o).then((function(){var o=[],s=[];if(!r){var u=e.retrieveViewSelectorAction(n,p.a.LOOKUP_VIEW).then((function(e){var t=e.viewSelectors[n][p.a[p.a.LOOKUP_VIEW]];t&&(a._viewSelectorItemsByTypeById[n]=Object(i.__assign)(Object(i.__assign)({},a._viewSelectorItemsByTypeById[n]),t),Object.keys(t).forEach((function(e){(0===l.length||l.indexOf(e.toLocaleLowerCase())>-1)&&o.push({viewId:e,viewName:t[e]?t[e].name:null,isDefault:t[e]?t[e].isDefault:null,isAvailableInOffline:t[e]?t[e].isAvailableInOffline:null,isUserView:t[e]?t[e].isUserView:null,isPinned:t[e]?t[e].isPinned:null,relatedEntityName:t[e]?t[e].relatedEntityName:null})})))})),c=e.retrieveViewSelectorAction(n,p.a.MAIN_APPLICATION_VIEW).then((function(e){var t=e.viewSelectors[n][p.a[p.a.MAIN_APPLICATION_VIEW]];t&&(a._viewSelectorItemsByTypeById[n]=Object(i.__assign)(Object(i.__assign)({},a._viewSelectorItemsByTypeById[n]),t),Object.keys(t).forEach((function(e){(0===l.length||l.indexOf(e.toLocaleLowerCase())>-1)&&o.push({viewId:e,viewName:t[e]?t[e].name:null,isDefault:!1,isAvailableInOffline:t[e]?t[e].isAvailableInOffline:null,isUserView:t[e]?t[e].isUserView:null,isPinned:t[e]?t[e].isPinned:null,relatedEntityName:t[e]?t[e].relatedEntityName:null})})))}));s=s.concat([u,c])}var d=new Promise((function(e){for(var r in a._viewSelectorItemsByTypeById[t]){var i=a._viewSelectorItemsByTypeById[t][r];i.queryType===p.a.CUSTOM_DEFINED_VIEW&&o.push({viewId:r,viewName:i.name,isDefault:i.isDefault,isAvailableInOffline:i.isAvailableInOffline,isUserView:i.isUserView,isPinned:i.isPinned,relatedEntityName:i.relatedEntityName})}e()}));return s.push(d),Promise.all(s).then((function(){return o}))}))},t.prototype.retrieveView=function(e,t){var r,i=this;return this.previousDataSetDefinition&&this.previousDataSetDefinition.TargetEntityType?r=this.previousDataSetDefinition.TargetEntityType:this.previousDataSetDefinition&&this.previousDataSetDefinition.EntityName?r=this.previousDataSetDefinition.EntityName:this._previousFieldData&&this._previousFieldData.attributes&&this._previousFieldData.attributes.Targets&&this._previousFieldData.attributes.Targets.length>0?r=this._previousFieldData.attributes.Targets[0]:this._previousFieldData&&this._previousFieldData.attributes&&this._previousFieldData.attributes.EntityLogicalName&&(r=this._previousFieldData.attributes.EntityLogicalName),r?e||this._viewId?t(r,p.a.LOOKUP_VIEW,p.b.savedview,e||this._viewId):t(r,p.a.LOOKUP_VIEW,p.b.savedview).then((function(e){return i._viewId=e,e})).then((function(e){return e})):(g.a.error(v.a+": retrieveView encountered error, Entity name is not specified for lookup",[{name:"APIName",value:v.a+".Models.Lookups.LookupSimpleObjectWrapper.retrieveView"}]),Promise.reject(new h.a("Entity name is not specified for lookup")))},t.prototype.getParameterManifestType=function(){return l.a.LookupSimple},t.prototype.refreshDataSet=function(t,r,i){var a=this,n=null,o=this.getEntityTypeName()||this.targetEntity;try{r.startCustomFilter(this._pageId,this.controlId,this.contextToken),r.runPreSearch(this._pageId,this.controlId),r.runSetAdditionalParams(this._pageId,this.controlId),r.endCustomFilter(this._pageId,this.controlId,this.contextToken)}catch(e){}if(this.lookupCustomFilters=Object(w.a)(t(),this._pageId,this.contextToken,this.controlId,o),this.meFilterEnabled&&(Object(I.a)(t(),o,"ownerid")?this.lookupCustomFilters.push(b.a):n=r.getEntityMetadataAction(o,["ownerid"])),this.shouldUseQuickFindViewForLookup(t())){var s=this.filteringObj&&this.filteringObj.getFilter();this.lookupFilterString=s&&s.conditions&&s.conditions[0]&&s.conditions[0].value,this.lookupFilterString=this.lookupFilterString&&this.lookupFilterString.replace(/%$/g,"").replace(/\%/g,"*")}return this.meFilterEnabled&&n?n.then((function(){return Object(I.a)(t(),o,"ownerid")&&a.lookupCustomFilters.push(b.a),e.prototype.refreshDataSet.call(a,t,r,i)})):e.prototype.refreshDataSet.call(this,t,r,i)},t.prototype.setErrorStatus=function(t,r){var i=t,n=this.relevantQueryError();n&&r&&"function"==typeof r&&((i=Object(j.b)(r(),n.message))?n.parameter&&(i+=" "+n.parameter):i=a.a.UnknownErrorMessage),e.prototype.setErrorStatus.call(this,i,r)},t.prototype.isParameterOfDataSetType=function(e){return!!e&&e.Type===this.getParameterManifestType()},t.prototype.retrieveLookupMetadata=function(e,t){return this.lookupMetaDataRequestOnce=!0,this.retrieveCurrentViewAndAssoicatedAttributes(e,t)},t.prototype.ensureLookupMetaDataInitialization=function(e){var t=this;this.previousInitState!==f.a.Uninitialized||this.lookupMetaDataRequestOnce||this.shouldUseLookupService()||e.retrieveLookupMetadataAction(this).then((function(){t._requireRefresh&&(t._requireRefresh=!1,e.refreshDataSetParameter(t,t.contextToken))}))},t.prototype._executeNotifyHandlersThatEventOccurred=function(e,t,r){return this.contextToken?e.executeNotifyHandlersThatEventOccurred({contextToken:this.contextToken,fieldName:this.controlId,pageId:this._pageId,record:r,eventName:t}):Promise.resolve(!1)},t.prototype._getDataSetParameter=function(e,t){return this._dataSetParameters[t]},t.prototype.convertEntityDescriptorToEntityMetadata=function(e){return{IsReadOnlyInMobileClient:e.IsReadOnlyInMobileClient,IsEnabledInUnifiedInterface:e.IsEnabledInUnifiedInterface,DisplayName:e.DisplayName,PrimaryNameAttribute:e.PrimaryNameAttribute,LogicalName:e.EntityLogicalName,DisplayCollectionName:e.DisplayCollectionName,IconVectorName:e.IconVectorName,ObjectTypeCode:e.ObjectTypeCode,Attributes:null}},t.prototype.searchLookup=function(e,t,r,i,a,n){var o=this,s=new P.a(this.pagingObj.getPageLastIndex()+(i&&this.pagingObj.getHasNextPage()?1:0),this.pagingObj.getPageSize(),!0,null);this._viewId=t?new c.a(t):this._defaultViewId;var u=a;n||(n=this.getRelationshipNameFromParameter(this.previousDataSetDefinition));var l=new _.a(this.targetEntity,this._viewId,u,n,null,null,s);if(i){if(!this.pagingObj.getHasNextPage())return Promise.resolve(null);this.pagingObj.setPageLastIndex(this.pagingObj.getPageLastIndex()+1)}var d=new O.a([l],null,null,null,r,!0);this.getLatestData().loading=!0,this.setRefreshingStart();var p=Object(S.b)(this.previousOwnProps.configuration,this.propKey);return e.sendLookupRequest(d,this.contextToken,this._pageId,this.pageEtn,this.controlId,p,this.previousDataSetDefinition.DependentAttributeName).then((function(){o.updateRefreshStatusToRequestBack()})).catch((function(e){var t="Lookup Data Request encounters an exception";return o.setErrorStatus(t),g.a.error(v.a+": "+t,[{name:"APIName",value:v.a+".Models.Lookups.LookupSimpleObjectWrapper.searchLookup"},{name:"error.Stack",value:JSON.stringify(e.stack)},{name:"controlId",value:o.controlId},{name:"entityTypeName",value:o.pageEtn}]),Promise.reject(new h.a(t))}))},t._EMPTY_LOOKUP_SIMPLE_FIELD_DATA={type:l.a.LookupSimple,raw:void 0,error:!1,errorMessage:void 0,security:null},t}(a.a)},Ygmu:function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i;r.d(t,"a",(function(){return i})),function(e){e[e.Unknown=-1]="Unknown",e[e.Persistent=0]="Persistent",e[e.Calculated=1]="Calculated",e[e.Rollup=2]="Rollup"}(i||(i={}))},ZEX9:function(e,t,r){"use strict";r.d(t,"b",(function(){return Ie})),r.d(t,"a",(function(){return je}));var i=r("c/eZ"),a=r("455M"),n=r("sRzG"),o=r("9r0m"),s=r("/SAa"),u=r("JlqV"),l=r("RlP9"),c=r("r2h9"),d=r("sOTk"),p=function(){function e(){}return e.prototype.getDataSetParameter=function(e){throw new Error("Not wrapped")},e.prototype.getTargetEntityNames=function(){throw new Error("Not wrapped")},e.prototype.refresh=function(e){throw new Error("Not Replaced")},e.prototype.getRecentItems=function(e){throw new Error("Not Replaced")},e.prototype.getLookupConfiguration=function(){throw new Error("Not Replaced")},e.prototype.getAllViews=function(e){throw new Error("Not Replaced")},e.prototype.getDefaultViewId=function(e){throw new Error("Not Replaced")},e.prototype.setMyRecordsOnlyFilter=function(e){throw new Error("Not Replaced")},e.prototype.sendLookupRequest=function(e,t,r,i,a){throw new Error("Not Replaced")},e.prototype.runPreSearch=function(){throw new Error("Not Replaced")},e}(),h=r("EK3O"),f=r("HSdq"),m=r("re9F"),g=r("ktSr"),v=r("Ff8i"),b=r("T2Xs"),y=r("IUjT"),O=r("Y+aM"),_=r("7FCO"),P=r("qC0c"),S=r("z99Z"),w=r("cZkS"),I=r("VcAV"),j=r("/j9Z"),C=r("eYbs"),D=r("C8Q/"),E=r("EpyZ"),T=r("Ww2r"),N="CustomControlFramework.Models.Lookups.MultiEntityTypeLookupObjectWrapper",F=o.a.EMPTY,R=function(){function e(e,t){this._dataSetWrappers={},this._dataSetParameters={},this._viewSelectorItemsByTypeById={},this._viewIdByEtn={},this._targetEntityTypeNames=null,this._lookupMruWrapper=null,this._lookupConfigurationWrapper=null,this._propKey=e,this._contextToken=t,this._lookupMruWrapper=new m.a,this._lookupConfigurationWrapper=new g.a}return e.prototype.getPropKey=function(){return this._propKey},e.prototype.getLatestData=function(){return this.previousReturn},e.prototype.getLatestFieldData=function(){return this._previousFieldData},e.prototype.retrieveTargetEntityNames=function(e,t,r){var i=r;if(i.entityTypes&&i.entityTypes.length>0)return i.entityTypes;if(this._contextToken&&(this._contextToken.entityTypeName||r.entityTypeName)){var a=this._contextToken;a.entityTypeName=a.entityTypeName||r.entityTypeName;var n=t.configuration.Parameters[this.getPropKey()];if(0===n.Usage)return Object(f.Ob)(e,t.id,a,n.Value);if(3===n.Usage){var o=n;return o.Attributes&&o.Attributes.Targets}}return null},e.prototype.createParameterInstance=function(){return new p},e.prototype._generateDataSetKey=function(e,t){return t&&this._viewIdByEtn[e]!==t?e+":"+t:e+":"+F.guid},e.prototype.retrieveDataSetObject=function(e,t,r,i){var a,n=this,o={},p=!1,m=!1,g="",O="";if(this._pageId=t.id,this._pageEtn=i.entityTypeName,this._controlId=t.descriptor.parentFieldSectionItem?t.descriptor.parentFieldSectionItem:t.controlId,this._attributeName=Object(E.b)(r,this._propKey),this._shouldUseLookupService(e,r.CustomControlId)&&!this._entityMetadata){var _=Object(y.f)(e,this._pageEtn,this._attributeName,t.id);if(a=Object(C.b)(e,_))for(var P in this._entityMetadata={},this._entityDefaultViews={},a)this._entityMetadata[P]=this.convertEntityDescriptorToEntityMetadata(a[P].entity),this._entityDefaultViews[P]=a[P].view,p=!0}this._checkCustomViews(e,this.retrieveTargetEntityNames(e,t,i));var S,w=r.Parameters[this._propKey];if(null===(S=w.TargetEntityTypes?w.TargetEntityTypes:3===w.Usage&&w.Attributes?w.Attributes.Targets:this.retrieveTargetEntityNames(e,t,i))||0===S.length){var I=t?Object(d.l)(e,t.id):"",j=t&&t.configuration?Object(b.b)(e,t.configuration.CustomControlId)||Object(b.b)(e,t.configuration.Name):N,D=[{name:"EntityName",value:i&&i.entityTypeName},{name:"RecordId",value:i&&i.id&&i.id.guid},{name:"FieldName",value:t&&t.controlId},{name:"IsOffline",value:!Object(u.b)(e)},{name:"PageType",value:I}];b.a.warn(j+": No target entities found",D)}var F=Object(f.eb)(e,t.id,this._contextToken),R=w,A=function(a){var s=S[a],d=Object(l.a)(e,s,c.a.LOOKUP_VIEW),f=k._getDefaultView(s,F,k._controlId,k._entityDefaultViews,d,R,e,k._viewSelectorItemsByTypeById);f&&(k._viewIdByEtn[s]=f.guid),k._viewSelectorItemsByTypeById&&k._viewSelectorItemsByTypeById[s]&&Object.keys(k._viewSelectorItemsByTypeById[s]).length>0&&Object.keys(k._viewSelectorItemsByTypeById[s]).forEach((function(u){var l=n._generateDataSetKey(s,u);if(!n._dataSetWrappers[l]||!n._targetEntityTypeNames||S[a]!==n._targetEntityTypeNames[a]){var d=n._viewSelectorItemsByTypeById[s][u],f=d&&d.isUserView?c.b.userview:c.b.savedview;n._dataSetWrappers[l]=new h.a(s,n._propKey,n._contextToken,u,f),n._dataSetWrappers[l].updatePreviousOwnProps(t),n._dataSetParameters[l]=null}var m=n._dataSetWrappers[l];if(u){m.setViewId(u);var g=m.retrieveDataSetObject(e,t,r,i);g||(g=m.generateEmptyParam()),o[l]=g}else o[l]=m.generateEmptyParam(),n._dataSetParameters[l]&&n._dataSetParameters[l].error?o[l].error=!0:o[l].loading=!0;o[l]!==n._dataSetParameters[l]&&(n._dataSetParameters[l]=o[l],p=!0)}));var v=k._generateDataSetKey(s,k._viewIdByEtn[s]);k._dataSetWrappers[v]&&k._targetEntityTypeNames&&S[a]===k._targetEntityTypeNames[a]||(k._dataSetWrappers[v]=new h.a(s,k._propKey,k._contextToken),k._dataSetWrappers[v].updatePreviousOwnProps(t),k._dataSetParameters[v]=null);var b=k._dataSetWrappers[v];if(b&&b.queryBuilder){var y=b.queryBuilder.getFirstError();!y||Object(u.b)(e)&&y.offlineModeSpecific||(m=!0,g=y.message,O=y.parameter)}if(f){b.setViewId(f.guid);var _=b.retrieveDataSetObject(e,t,r,i);_||(_=b.generateEmptyParam()),o[v]=_}else b.savePreviousOwnProps(t),o[v]=b.generateEmptyParam(),k._dataSetParameters[v]&&k._dataSetParameters[v].error?o[v].error=!0:o[v].loading=!0;o[v]!==k._dataSetParameters[v]&&(k._dataSetParameters[v]=o[v],p=!0)},k=this;for(var M in S)A(M);if(this._targetEntityTypeNames=S,this._lookupConfigurationWrapper.updateConfiguration(w,t.descriptor),this._lookupMruWrapper.updateRecentItems(Object(v.h)(e),S,this._lookupConfigurationWrapper.getLookupConfiguration()),p&&(this.previousReturn=this.createParameterInstance(),this.previousReturn.getDataSetParameter=this.getDataSetParameter.bind(this),this.previousReturn.getTargetEntityNames=this.getTargetEntityNames.bind(this),this.previousReturn.entityMetadata=this._entityMetadata),m){if(this.previousReturn.error=!0,this.previousReturn.errorMessage=Object(T.b)(e,g),!this.previousReturn.errorMessage)return this.previousReturn.errorMessage=s.a.UnknownErrorMessage,this.previousReturn;O&&(this.previousReturn.errorMessage+=" "+O)}return this.previousReturn},e.prototype._checkCustomViews=function(e,t){if(e&&e.metadata&&e.metadata.views&&t){var r=[],a=[];for(var n in e.metadata.views){e.metadata.views[n].isCustomView&&a.push(n)}for(var o in a){n=a[o];r.push({id:n,name:e.metadata.views[n].title,queryType:c.a.CUSTOM_DEFINED_VIEW,isDefault:!1,isQuickFindQuery:!1,isUserView:!1,isPinned:!1,relatedEntityName:e.metadata.views[n].entityLogicalName,isAvailableInOffline:!0})}var s=function(e){var a=t[e],n=r.filter((function(e){return e.relatedEntityName===a})),o={};n&&n.length>0&&(n.forEach((function(e){o[e.id]=e})),u._viewSelectorItemsByTypeById[a]=Object(i.__assign)(Object(i.__assign)({},u._viewSelectorItemsByTypeById[a]),o))},u=this;for(var o in t)s(o)}},e.prototype._getDefaultView=function(e,t,r,i,a,n,s,u){var l,c=t&&t[r]&&t[r].parameters&&t[r].parameters.defaultviewid&&this._doesViewSupportEntity(s,e,t[r].parameters.defaultviewid)?new o.a(t[r].parameters.defaultviewid):null,d=i&&i[e]&&i[e].viewId?new o.a(i[e].viewId):null;return"string"==typeof(l=this._shouldUseLookupService()?d||c:c&&u[e]&&u[e][t[r].parameters.defaultviewid]?c:n&&n.ViewId&&this._doesViewSupportEntity(s,e,n.ViewId)?new o.a(n.ViewId):c||a)&&(l=new o.a(l)),l},e.prototype._doesViewSupportEntity=function(e,t,r){if(!e||!e.metadata||!e.metadata.views)return!0;var i=e.metadata.views[r];return!i||!i.entityLogicalName||i.entityLogicalName===t},e.prototype._queryBuilderHasErrors=function(){var e=this;return this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(t){if(e._dataSetWrappers[t].queryBuilder&&e._dataSetWrappers[t].queryBuilder.getFirstError())return!0})),!1},e.prototype.setControlReRender=function(e){var t=this;this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(r){t._dataSetWrappers[r].setControlReRender(e)}))},e.prototype.extendByFieldData=function(e,t){void 0===t&&(t=null);var r=this._queryBuilderHasErrors()&&this.previousReturn&&this.previousReturn.error,a=r?this.previousReturn.errorMessage:"";return null!==t&&this._previousFieldData!==t?(this._previousFieldData=t,this.previousReturn=Object(i.__assign)(Object(i.__assign)({},e),this._previousFieldData)):this.previousReturn=Object.assign(e,this._previousFieldData),this.previousReturn.entityMetadata=this._entityMetadata,r&&(this.previousReturn.error=r,this.previousReturn.errorMessage=a),this.previousReturn},e.prototype.linkToParameter=function(e,t){var r=this,i=t.refreshDataSetParameter;this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(e){r._dataSetWrappers[e].linkToParameter(r._dataSetParameters[e],t)})),e.refresh=this.refresh.bind(this,i),e.getRecentItems=this._lookupMruWrapper.getRecentItems.bind(this._lookupMruWrapper),e.getLookupConfiguration=this._lookupConfigurationWrapper.getLookupConfiguration.bind(this._lookupConfigurationWrapper),e.getAllViews=this.getAllViews.bind(this,{retrieveViewAction:t.retrieveViewAction,retrieveViewSelectorAction:t.retrieveViewSelectorAction}),e.getDefaultViewId=this.getDefaultViewId.bind(this),e.sendLookupRequest=this.searchLookup.bind(this,t),e.setMyRecordsOnlyFilter=this.setMyRecordsOnlyFilter.bind(this),e.runPreSearch=function(){r._contextToken&&t.runPreSearch(r._contextToken,r._controlId,r._pageId)},e.executeNotifyHandlersThatEventOccurred=this._executeNotifyHandlersThatEventOccurred.bind(this,t)},e.prototype._executeNotifyHandlersThatEventOccurred=function(e,t,r){return this._contextToken?e.executeNotifyHandlersThatEventOccurred({contextToken:this._contextToken,fieldName:this._controlId,pageId:this._pageId,record:r,eventName:t}):Promise.resolve(!1)},e.prototype.setMyRecordsOnlyFilter=function(e){var t=this;this._dataSetWrappers&&Object.keys(this._dataSetWrappers).forEach((function(r){t._dataSetWrappers[r].setMyRecordsOnlyFilter(e)}))},e.prototype.getDefaultViewId=function(e){return this._viewIdByEtn&&this._viewIdByEtn[e]?this._viewIdByEtn[e]:null},e.prototype.getAllViews=function(e,t,r){var a=this,n=[];if(!r){var o=e.retrieveViewAction(t,c.a.MAIN_APPLICATION_VIEW,c.b.savedview),s=e.retrieveViewAction(t,c.a.LOOKUP_VIEW,c.b.savedview);n=n.concat([o,s])}var u=this._dataSetWrappers[this._generateDataSetKey(t,this._viewIdByEtn[t])],l=u&&u.getAvailableViews()||[];if(u){var d=u.getMissingDescriptorIds();d&&d.forEach((function(t){n.push(u.retrieveView(t,e.retrieveViewAction))}))}return Promise.all(n).then((function(){var n=[],o=[];if(!r){var s=e.retrieveViewSelectorAction(t,c.a.LOOKUP_VIEW).then((function(e){var r=e.viewSelectors[t][c.a[c.a.LOOKUP_VIEW]];r&&(a._viewSelectorItemsByTypeById[t]=Object(i.__assign)(Object(i.__assign)({},a._viewSelectorItemsByTypeById[t]),r),Object.keys(r).forEach((function(e){(0===l.length||l.indexOf(e.toLocaleLowerCase())>-1)&&n.push({viewId:e,viewName:r[e]?r[e].name:null,isDefault:r[e]?r[e].isDefault:null,isAvailableInOffline:r[e]?r[e].isAvailableInOffline:null,isUserView:r[e]?r[e].isUserView:null,isPinned:r[e]?r[e].isPinned:null,relatedEntityName:r[e]?r[e].relatedEntityName:null})})))})),u=e.retrieveViewSelectorAction(t,c.a.MAIN_APPLICATION_VIEW).then((function(e){var r=e.viewSelectors[t][c.a[c.a.MAIN_APPLICATION_VIEW]];r&&(a._viewSelectorItemsByTypeById[t]=Object(i.__assign)(Object(i.__assign)({},a._viewSelectorItemsByTypeById[t]),r),Object.keys(r).forEach((function(e){(0===l.length||l.indexOf(e.toLocaleLowerCase())>-1)&&n.push({viewId:e,viewName:r[e]?r[e].name:null,isDefault:!1,isAvailableInOffline:r[e]?r[e].isAvailableInOffline:null,isUserView:r[e]?r[e].isUserView:null,isPinned:r[e]?r[e].isPinned:null,relatedEntityName:r[e]?r[e].relatedEntityName:null})})))}));o=o.concat([s,u])}var d=new Promise((function(e){for(var r in a._viewSelectorItemsByTypeById[t]){var i=a._viewSelectorItemsByTypeById[t][r];i.queryType===c.a.CUSTOM_DEFINED_VIEW&&n.push({viewId:r,viewName:i.name,isDefault:i.isDefault,isAvailableInOffline:i.isAvailableInOffline,isUserView:i.isUserView,isPinned:i.isPinned,relatedEntityName:i.relatedEntityName})}e()}));return o.push(d),Promise.all(o).then((function(){return n}))}))},e.prototype.refresh=function(e,t){var r,i=this;if(this._lookupServiceEnabled=!1,t)r=e(this._dataSetWrappers[this._generateDataSetKey(t,null)],this._contextToken);else{for(var a=[],n=0,o=this._targetEntityTypeNames;n<o.length;n++){var s=o[n],u=e(this._dataSetWrappers[this._generateDataSetKey(s,null)],this._contextToken);a.push(u)}r=Promise.all(a)}return r.then((function(){return i}))},e.prototype.getDataSetParameter=function(e,t){return this._dataSetParameters[this._generateDataSetKey(e,t)]},e.prototype.getTargetEntityNames=function(){return Object(i.__spreadArrays)(this._targetEntityTypeNames)},e.prototype.convertEntityDescriptorToEntityMetadata=function(e){return{IsReadOnlyInMobileClient:e.IsReadOnlyInMobileClient,IsEnabledInUnifiedInterface:e.IsEnabledInUnifiedInterface,DisplayName:e.DisplayName,PrimaryNameAttribute:e.PrimaryNameAttribute,LogicalName:e.EntityLogicalName,DisplayCollectionName:e.DisplayCollectionName,IconVectorName:e.IconVectorName,ObjectTypeCode:e.ObjectTypeCode,Attributes:null}},e.prototype.searchLookup=function(e,t,r,i,a,n){var s=this,u=[],l=!1;for(var c in t){var d="",p=this._dataSetWrappers[c+":"+t[c]]||this._dataSetWrappers[c+":"+o.a.EMPTYGUIDSTRING],h=p.getPagingObject(),f=new S.a(h.getPageLastIndex()+(i&&h.getHasNextPage()?1:0),h.getPageSize(),!0,null);if(d=(a&&a[c]?a[c]:null)||"",p.filteringObj){var m=p.filteringObj.getRootFilterExpression();if(m)d+=D.a.toLegacyFilterExpression(m).toFetchXml()||""}d||(d=null),u.push(new _.a(c,t[c]&&new o.a(t[c]),d,n,null,null,f)),i?h.getHasNextPage()&&(l=!0,p.updatePagingObject(),p.getLatestData().loading=!0,p.setRefreshingStart()):l=!0}if(l){var g=new O.a(u,null,null,null,r,!0);return e.sendLookupRequest(g,this._contextToken,this._pageId,this._pageEtn,this._controlId,this._attributeName).then((function(){for(var e in t){(s._dataSetWrappers[e+":"+t[e]]||s._dataSetWrappers[e+":"+o.a.EMPTYGUIDSTRING]).updateRefreshStatusToRequestBack()}})).catch((function(e){var r="Lookup Data Request encounters an exception";for(var i in t){(s._dataSetWrappers[i+":"+t[i]]||s._dataSetWrappers[i+":"+o.a.EMPTYGUIDSTRING]).setErrorStatus(r)}return b.a.error(N+": "+r,[{name:"APIName",value:N+".searchLookup"},{name:"error.Stack",value:JSON.stringify(e.stack)},{name:"controlId",value:s._controlId},{name:"entityTypeName",value:s._pageEtn}]),Promise.reject(new j.a(r))}))}return Promise.resolve(null)},e.prototype._shouldUseLookupService=function(e,t){return Object(I.c)(this._lookupServiceEnabled)&&(this._lookupServiceEnabled=Object(P.c)(e,w.mc),"MscrmControls.FieldControls.SimpleLookupControl"!==t&&(this._lookupServiceEnabled=!1)),this._lookupServiceEnabled},e}(),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(p),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.createParameterInstance=function(){return new A},t}(R),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(p),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.createParameterInstance=function(){return new M},t}(R),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(p),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.createParameterInstance=function(){return new V},t}(R),B=r("VZmd"),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(p),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.createParameterInstance=function(){return new U},t}(R),W="CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlLookupSelector";var q=r("RwQN"),G=r("2OIc"),Q=r("o5EQ"),H=r("S2mk");var K=r("QAhb"),X=r("F2uj"),Y=r("TCcM"),Z=r("yHpA"),J=r("G7N+"),$=function(){function e(e,t,r,i,a,n){void 0===i&&(i=null),void 0===a&&(a=null),void 0===n&&(n=null),this.status=0,this.formDescriptor=e,this.entityName=t,this.recordId=o.a.toString(r),this.associatedEntityLabel=i,this.associatedEntityRecordName=a,this.entityImageUrl=n}return e.prototype.getComponentNameByControlId=function(e){throw new Error("Not initialized")},e.prototype.getComponentPropsByControlId=function(e){throw new Error("Not initialized")},e.prototype.retrieveRecordDataForForm=function(e,t){throw new Error("Not initialized")},e}(),ee=r("i8/j"),te=r("lRv2"),re=r("lMVv"),ie=r("PQ2H"),ae=r("DgF7"),ne=r("NxDw"),oe=r("HHlV"),se=r("lovT"),ue=function(){function e(){this.objectWrapperType=4,this._formRequested=!1,this._entityRequested=!1,this._recordRequested=!1,this._formDependenciesLoaded=!0,this._actions=null,this._formType=null,this._wrapperStatus=-1,this._memoizedComponents={},this._entityPrimaryImageField=null,this._handleFetchFailure=this._handleFetchFailure.bind(this),this._checkForm=this._checkForm.bind(this),this._checkEntity=this._checkEntity.bind(this)}return e.prototype.getParameterManifestType=function(){return a.a.QuickForm},e.prototype.ensureDataInitialization=function(e){this._actions={retrieveForm:e.retrieveForm,retrieveEntityData:e.retrieveEntityData,retrieveRecordData:e.retrieveRecordForForm,forceUpdate:e.forceUpdate},this._fetchData()},e.prototype._fetchData=function(e){var t,r;if(this._actions){if(2!==this._wrapperStatus||this._entityRequested||(this._entityRequested=!0,this._actions.retrieveEntityData(this.previousFormParameter.entityName).then(this._checkEntity).catch(this._handleFetchFailure)),0===this._wrapperStatus&&!this._formRequested){this._formRequested=!0,this._formDependenciesLoaded=!1;var i=new K.a(this.previousFormParameter.entityName,o.a.tryParse(this.previousFormParameter.recordId));this._actions.retrieveForm(i,null===(r=null===(t=this.previousFormParameter.formDescriptor)||void 0===t?void 0:t.Id)||void 0===r?void 0:r.guid,this._formType).then(this._checkForm).catch(this._handleFetchFailure)}if(3===this._wrapperStatus&&!this._recordRequested){this._recordRequested=!0;i=new K.a(this.previousFormParameter.entityName,o.a.tryParse(this.previousFormParameter.recordId));this._actions.retrieveRecordData(i,this.previousFormParameter.formDescriptor.Id.guid,null,[],!0).catch(this._handleFetchFailure)}}},e.prototype._checkEntity=function(e){e&&e.entities&&e.entities.hasOwnProperty(this.previousFormParameter.entityName)||this._handleFetchFailure(null)},e.prototype._checkForm=function(e){!e||o.a.equals(o.a.EMPTY,e)?this._handleFetchFailure(null):this._formDependenciesLoaded=!0},e.prototype._handleFetchFailure=function(e){this._wrapperStatus=5;var t=this.previousFormParameter&&this.previousFormParameter.formDescriptor&&this.previousFormParameter.formDescriptor.Id?this.previousFormParameter.formDescriptor.Id:o.a.EMPTY,r=this.previousFormParameter&&this.previousFormParameter.entityName?this.previousFormParameter.entityName:null;this.retrieveErrorFormObject(t,r),this._actions.forceUpdate()},e._isControlDefaultMapping=function(e,t){var r=e.formDescriptor.Controls[t];return!r||!r.UniqueId||!e.formDescriptor.ControlConfigurations[r.UniqueId]},e._getDefaultControlConfiguration=function(e,t,r){var i=t.formDescriptor.Controls[r],a=t.entityName,n=Object(te.b)(e,a,i),s=i.ClassId&&o.a.toString(i.ClassId);return Object(H.q)(i.Id,i.DataFieldName,n,i,a,s)},e._createDummyFormDescriptor=function(e){return{initialized:J.a.Initializing,Tabs:[],Sections:{},Controls:{},ControlConfigurations:{},Id:e,Header:[],Footer:[],HiddenFields:[]}},e.prototype.retrieveErrorFormObject=function(t,r){this._wrapperStatus=5;var i=e._createDummyFormDescriptor(t);return this.previousFormParameter&&3===this.previousFormParameter.status||(this.previousFormParameter=new $(i,r,null,null,null,null),this.previousFormParameter.status=3),this.previousFormParameter},e.prototype.retrieveOfflineFormObject=function(t,r){if(!this.previousFormParameter||6!==this._wrapperStatus){this._wrapperStatus=6;var i=e._createDummyFormDescriptor(t);this.previousFormParameter=new $(i,r,null,null,null,null)}return this.previousFormParameter},e.prototype.retrieveFormObject=function(t,r,a,n,s,l,c,d,p,h){var m=this,g=this.previousFormParameter&&this.previousFormParameter.formDescriptor&&this.previousFormParameter.formDescriptor.initialized===J.a.Initialized&&o.a.equals(a,this.previousFormParameter.formDescriptor.Id)?this.previousFormParameter.formDescriptor:Object(ee.j)(t,a);if(this.previousFormParameter&&this.previousFormParameter.formDescriptor&&n===Object(ie.a)(6)){var v,y=this.previousFormParameter.formDescriptor.Controls?Object.keys(this.previousFormParameter.formDescriptor.Controls):null;if(y&&y.forEach((function(e){var a=Object(f.Mc)(t,{id:r.id,controlName:e},d),n=m.previousFormParameter.formDescriptor.Controls[e],o=a&&n.Visible!==a.visible,s=a&&n.Label!==a.label&&null!=a.label;a&&(o||s)&&(v||(v={}),v[e]=Object(i.__assign)(Object(i.__assign)({},n),{Visible:o?a.visible:n.Visible,Label:s?a.label:n.Label}))})),v){g=Object(i.__assign)({},this.previousFormParameter.formDescriptor);var O=Object(i.__assign)({},this.previousFormParameter.formDescriptor.Controls);Object.keys(v).forEach((function(e){O[e]=v[e]})),g.Controls=O}}this._formType=n,h&&(this._chartDataRequestType=h);var _=2,S=Object(re.h)(t,s);this._entityPrimaryImageField=S?S.PrimaryImageAttribute:null;var I=r.descriptor.ShowLabel&&r.descriptor.Label?r.descriptor.Label:S?S.DisplayName:"";if(g&&g.initialized===J.a.Error||5===this._wrapperStatus)return b.a.info("Form: retrieveFormObject encountered error",[{name:"formId",value:o.a.toString(a)},{name:"entityName",value:s},{name:"controlId",value:r?r.controlId:""}]),this.retrieveErrorFormObject(a,s);if(!Object(P.c)(t,w.Pc)&&!Object(u.b)(t))return this.retrieveOfflineFormObject(a,s);if(!(Object(u.b)(t)||this.previousFormParameter&&6===this._wrapperStatus)){var j=Object(f.Xb)(t);if(j&&!j.has(S.EntityLogicalName))return this._wrapperStatus=6,this.previousFormParameter=new $(null,s,null,null,null,null),this.previousFormParameter}if(o.a.equals(a,o.a.EMPTY)||!g||g.initialized===J.a.Initializing||g.initialized===J.a.Uninitialized||g.initialized===J.a.Initialized&&!this._formDependenciesLoaded){var C=g?g.initialized:null,D=!1;return(!this.previousFormParameter||0!==this.previousFormParameter.status||0!==this._wrapperStatus&&-1!==this._wrapperStatus)&&(this.previousFormParameter&&this.previousFormParameter.formDescriptor&&!o.a.equals(this.previousFormParameter.formDescriptor.Id,a)&&(D=!0),g=e._createDummyFormDescriptor(a),this.previousFormParameter=new $(g,s,null,I,null,null),this.previousFormParameter.status=0),this._wrapperStatus=o.a.equals(a,o.a.EMPTY)?-1:C!==J.a.Initializing||this._formRequested?0:1,D&&(this._wrapperStatus=0,this._formRequested=!1),this._fetchData(t),this.previousFormParameter}var E=p||this._getAssociatedRecordPrimaryAttributeValue(t,r.id,s,l,d);if(E||null==l||o.a.equals(l,o.a.EMPTY)?_=2:(this._wrapperStatus=S&&S.Initialized===J.a.Initialized?3:2,_=1),this.previousFormParameter&&this.previousFormParameter.formDescriptor===g&&this.previousFormParameter.formDescriptor&&this.previousFormParameter.formDescriptor.initialized===g.initialized&&o.a.equals(this.previousFormParameter.formDescriptor.Id,a)&&(null===this.previousFormParameter.recordId&&null===l||this.previousFormParameter.recordId===l.guid)&&this.previousFormParameter.entityImageUrl===c&&this.previousFormParameter.associatedEntityRecordName===E)return 1===_&&this._fetchData(t),this.previousFormParameter;var T=new $(g,s,l,I,E,c);return T.status=_,T.getComponentPropsByControlId=this.getComponentPropsByControlId.bind(this,t,T),T.getComponentNameByControlId=this.getComponentNameByControlId.bind(this,t,T),T.firstDataRequestType=this._getFirstDataRequestType(t,r,d),this.previousFormParameter=T,1===_&&this._fetchData(t),T},e.prototype.linkToParameter=function(e,t){var r=t.retrieveRecordDataForForm,i=e.formDescriptor&&e.formDescriptor.Id?e.formDescriptor.Id.guid:null,a=this._entityPrimaryImageField?[this._entityPrimaryImageField+"_url"]:null;e.retrieveRecordDataForForm=this._retrieveRecordDataForForm.bind(this,new K.a(e.entityName,o.a.tryParse(e.recordId)),i,r,null,a)},e.prototype.getComponentNameByControlId=function(t,r,i){var a=r.formDescriptor.Controls[i];if(!e._isControlDefaultMapping(r,i))return a.UniqueId;var n=e._getDefaultControlConfiguration(t,r,i);return Object(H.z)(n)},e.prototype.getComponentPropsByControlId=function(t,r,i,a){void 0===a&&(a=!1),this._memoizedComponents[i]||(this._memoizedComponents[i]={controlId:i});var n,s=this._memoizedComponents[i],u=r.entityName,l=r.formDescriptor.Controls[i];if(e._isControlDefaultMapping(r,i)||a)if(e._isQuickFormChart(t,l)){var c=!Object(P.a)(t,w.v,w.Lc,w.w);n=Object(H.w)(l.Parameters,this._chartDataRequestType,c)}else n=e._getDefaultControlConfiguration(t,r,i);else{n=r.formDescriptor.ControlConfigurations[l.UniqueId].CustomControls[0];var d=Object(ae.a)(t);if(Object(P.c)(t,w.ne)&&d!==ne.a.MailApp&&l.DataFieldName){var p=Object(G.e)(t,n.Name);p&&(n=Object(H.F)(n,p))}}var h,f=r.recordId,m=r.formDescriptor.Id;return h=s.nestedFormProps&&s.nestedFormProps.EntityName===u&&s.nestedFormProps.RecordId===f&&s.nestedFormProps===m?s.nestedFormProps:{EntityName:u,RecordId:r.recordId,FormId:o.a.toString(r.formDescriptor.Id)},n===s.configuration&&l===s.descriptor&&h===s.nestedFormProps||(s.configuration=n,s.descriptor=l,s.nestedFormProps=h,s.componentProps={configuration:n,descriptor:l,nestedFormProps:h}),Object(P.c)(t,w.jd)&&s.componentProps.configuration.CustomControlId===oe.a&&(s.componentProps.configuration=Object(se.a)(s.componentProps.configuration,u)),s.componentProps},e.prototype.getLatestData=function(){return this.previousFormParameter},e.prototype._getAssociatedRecordPrimaryAttributeValue=function(e,t,r,i,a){var n=Object(X.h)(e,r),s=new K.a(r,i||o.a.EMPTY),u=Object(f.ac)(e,t,a),l=Object(Z.d)(e,u,s,n);return l&&l.value?l.value:null},e.prototype._retrieveRecordDataForForm=function(e,t,r,i,a){r(e,t,i,a)},e._isQuickFormChart=function(e,t){var r;return Object(P.c)(e,w.z)&&!o.a.isNullOrEmpty(null===(r=null==t?void 0:t.Parameters)||void 0===r?void 0:r.VisualizationId)&&"Chart"===t.Parameters.ChartGridMode},e.prototype._getFirstDataRequestType=function(e,t,r){if(!r)return null;if(!Object(f.Tc)(e,t.id,t.descriptor))return null;var i=Object(f.ac)(e,t.id,r.parentContextToken);return Object(Z.b)(e,i)?null:1},e}();var le=r("WACO"),ce=r("EGsq"),de=r("aPRd"),pe=r("wV3W"),he=r("uQP8");function fe(e,t){return"web"===function(e){if(e<425)return"mobile";if(e<600)return"tablet";return"web"}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */(Object(de.c)(e))||!1!==t}function me(){var e;if(void 0===e){var t=window.document.getElementsByTagName("body")[0],r=window.getComputedStyle(t,null).getPropertyValue("font-size");e=parseInt(r.replace("px",""),10)}return e}var ge=function(e){Object.assign(this,e)};
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var ve=function(){function e(){this.previousReturn=new ge({IsMicrosoftFlowEnabled:!1,MicrosoftFlowFirstPartyIntegrationSiteUrl:"",MicrosoftFlowDestinationUrl:"",MicrosoftFlowEnvironmentId:""})}return e.prototype.retrieveMicrosoftFlowObject=function(e,t,r,i){var a=function(e){return{isMicrosoftFlowEnabled:e&&e.organization&&e.organization.organizationSettings&&e.organization.organizationSettings.isMicrosoftFlowEnabled,microsoftFlowFirstPartyIntegrationSiteUrl:e&&e.organization&&e.organization.organizationSettings&&e.organization.organizationSettings.microsoftFlowFirstPartyIntegrationSiteUrl,microsoftFlowDestinationUrl:e&&e.organization&&e.organization.organizationSettings&&e.organization.organizationSettings.microsoftFlowDestinationUrl,microsoftFlowEnvironmentId:e&&e.organization&&e.organization.organizationSettings&&e.organization.organizationSettings.microsoftFlowEnvironmentId}}(e),n={IsMicrosoftFlowEnabled:a.isMicrosoftFlowEnabled,MicrosoftFlowFirstPartyIntegrationSiteUrl:a.microsoftFlowFirstPartyIntegrationSiteUrl,MicrosoftFlowDestinationUrl:a.microsoftFlowDestinationUrl,MicrosoftFlowEnvironmentId:a.microsoftFlowEnvironmentId};return this.previousReturn=n,n},e}();
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function be(e,t,r,i,a){return i.Parameters[e].Value}var ye=r("r4Uk"),Oe=[a.a.Currency,a.a.DateAndTimeDateAndTime,a.a.DateAndTimeDateOnly,a.a.Decimal,a.a.FP,a.a.Multiple,a.a.OptionSet,a.a.SingleLineEmail,a.a.SingleLinePhone,a.a.SingleLineText,a.a.SingleLineTextArea,a.a.SingleLineTickerSymbol,a.a.SingleLineURL,a.a.TwoOptions,a.a.WholeDuration,a.a.WholeLanguage,a.a.WholeNone,a.a.WholeTimeZone],_e=[a.a.LookupSimple,a.a.LookupPartyList,a.a.LookupRegarding,a.a.LookupOwner,a.a.LookupCustomer,a.a.LookupMultiEntity],Pe=[0,1,2,3,4],Se={};
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function we(e,t,r){for(var i=0,a=t;i<a.length;i++){e[a[i]]=r}}function Ie(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0,a=t;i<a.length;i++){var n=a[i];Se.hasOwnProperty(n)||we(Se,[n],e)}}function je(){var e,t=null,r={},n={},o=(e={},function(t){return e[t]||(e[t]=t in Se?Se[t]():Se[a.a.SingleLineText]()),e[t]});return function(e,u,l,c,d,p){var h=l.configuration?l.configuration.CustomControlId:"";b.a.info(h+".CustomControlFramework.Selectors.CustomControlHostDynamicDataSelectors: createGetDynamicData started");var f=!1,m=!0,g={},v=[];if(e&&e.Parameters&&Object.keys(e.Parameters).length){var y=Object(G.e)(c,l.configuration.CustomControlId);for(var O in e.Parameters){var _=e.Parameters[O],P=o(_.Type)(O,c,l,e,d,p),S=P,w=!1;if(y&&P instanceof s.a||P instanceof Q.a)if(y.Properties.DataSetDefinitions[O]&&!P.isValidParameterConfiguration(_))continue;(null===P||(P instanceof s.a||P instanceof Q.a)&&P.getParameterManifestType()===a.a.Grid&&(!P.getLatestData().columns||0===P.getLatestData().columns.length)||S&&3===S.objectWrapperType&&P instanceof ye.a&&P.isLoading())&&(m=!!(P instanceof q.a&&P.getLatestData())),r.hasOwnProperty(O)&&r[O]===P||(g[O]=P,v.push(O),f=!0,w=!0);var I=!1;S&&(I=-1!==Pe.indexOf(S.objectWrapperType)),I||(I=P instanceof s.a||P instanceof Q.a||P instanceof R),I&&P.getLatestData()!==n[O]&&(g[O]=P,n[O]=P.getLatestData(),w||v.push(O),f=!0)}}else t&&t.response&&!Object.keys(t.response.parameters).length||(f=!0);return f?(v.push("parameters"),r=Object(i.__assign)(Object(i.__assign)({},r),g),t={response:{parameters:r,dataReady:m,updated:!0},updatedProperties:v}):(t.response.updated=!1,t.updatedProperties=v),b.a.info(h+".CustomControlFramework.Selectors.CustomControlHostDynamicDataSelectors: createGetDynamicData finished"),t}}we(Se,Oe,n.a),we(Se,_e,(function(){var e={},t={},r={},i=Object(n.a)(),s={};return function(n,u,l,c,d,p){b.a.info(l.controlId+"."+W+": createGetLookupData started");var h=!1,f=c.Parameters[n],m=i(n,u,l,c,d,p);if(!s.hasOwnProperty(n)||!s[n])switch(f.Type){case a.a.LookupCustomer:s[n]=new k(n,p);break;case a.a.LookupOwner:s[n]=new L(n,p);break;case a.a.LookupSimple:s[n]=new B.a(n,p);break;case a.a.LookupPartyList:s[n]=new x(n,p);break;case a.a.LookupRegarding:s[n]=new z(n,p);break;case a.a.LookupMultiEntity:s[n]=new R(n,p);break;default:throw new Error("Unknown parameter type")}var g=s[n],v=s[n].getLatestData(),y=f;if(v&&y&&v.getViewId&&!o.a.equals(o.a.fromExternalGuid(v.getViewId()),o.a.fromExternalGuid(y.ViewId))){var O=g;g=O.refreshingStatus&&0!==O.refreshingStatus?new B.a(n,p,!0):new B.a(n,p,!1),s[n]=g}var _=g;if(null===m)return b.a.info(l.controlId+"."+W+": createGetLookupData return null"),null;t.hasOwnProperty(n)&&t[n]===m||(t[n]=m,h=!0);var P=g.retrieveDataSetObject(u,l,c,d);if(r.hasOwnProperty(n)&&r[n]&&P===r[n]||(r[n]=P,h=!0),g instanceof B.a)g.extendByFieldData(P,m);else{if(!(g instanceof R))throw b.a.error(l.controlId+"."+W+": createGetLookupData encountered error, unknown Lookup parameter wrapper type"),new Error("Unknown Lookup parameter wrapper type");g.extendByFieldData(P,m)}return h&&(e[n]=_),b.a.info(l.controlId+"."+W+": createGetLookupData finished"),e[n]}})),we(Se,[a.a.Grid],(function(){var e={},t={},r={};return function(i,a,n,o,u,l){b.a.info(n.configuration.CustomControlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlDataSetDataSelector: createGetDataSetData started");var c=!1;if(!r.hasOwnProperty(i)||!r[i]){var d=o.Parameters[i],p=Object(G.e)(a,o.CustomControlId);d.ChartGridMode&&"Chart"===d.ChartGridMode?r[i]=new q.a(i,l):p&&Object(H.i)(p)?r[i]=new Q.a(i,null,l):r[i]=new s.a(i,null,l)}var h=r[i],f=h.retrieveDataSetObject(a,n,o,u);h instanceof Q.a&&h.updateControlMemoizedParameter(a,f,!1,null),t.hasOwnProperty(i)&&t[i]&&f===t[i]||(t[i]=f,c=!0);var m=h;return c&&(e[i]=m),b.a.info(n.configuration.CustomControlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlDataSetDataSelector: createGetDataSetData finished"),e[i]}})),we(Se,[a.a.WebResourceHtmlControl],(function(){var e={};return function(t,r,i,n,o){var s;b.a.info(i.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlWebResourcesSelector: createGetWebResourceHtmlData started");var u,l,c=n.Parameters[t],d=Object(le.l)(c),p=Object(le.g)(r,d);if(p){var h=c.Url;h=Object(ce.t)(r)+h;var f=fe(r,p.isEnabledForMobileClient);s={ControlId:c.ControlId,Title:c.Title,Url:h,Visible:f||c.Visible,ShowLabel:c.ShowLabel,Label:c.Label,Type:a.a.WebResourceHtmlControl,PageType:c.PageType,WebResourceType:c.WebResourceType?c.WebResourceType:-1,ControlParameters:c.ControlParameters}}else{var m=null,g=Object(he.a)(r,i.id);if(!(m=g&&g.webResourcePageDescriptor?g.webResourcePageDescriptor:Object(le.h)(r,i.descriptor)))return null;var v={};i.descriptor&&i.descriptor.Parameters&&(v=Object(le.i)(i.descriptor));f=!0;if("FullPage"===m.pageType){var y=function(e,t){if(e&&e.metadata&&e.metadata.webResourceDescriptorsByName)return e.metadata.webResourceDescriptorsByName[t];return null}(r,m.Name);y&&void 0!==y.isEnabledForMobileClient&&(f=fe(r,y.isEnabledForMobileClient))}var O=Object(pe.a)(r);s={ControlId:m.controlId,Title:m.title,Url:m.url,Visible:"FullPage"===m.pageType?f:m.visible,ShowLabel:m.showLabel,Label:m.label,Type:a.a.WebResourceHtmlControl,PageType:m.pageType,WebResourceType:m.webresourceType,CellHeight:(u=O.sizes.Section.cellHeightInRem,l=me(),u*l),ControlParameters:v,WebResourceName:m.Name?m.Name:""}}return e.hasOwnProperty(t)&&e[t].Url===s.Url||(e[t]=s),b.a.info(i.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlWebResourcesSelector: createGetWebResourceHtmlData finished"),e[t]}})),we(Se,[a.a.MicrosoftFlow],(function(){return function(e,t,r,i,a){b.a.info(r.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlMicrosoftFlowSelector: createGetMicrosoftFlowData started");var n=new ve;return n.retrieveMicrosoftFlowObject(t,r,i,a),b.a.info(r.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlMicrosoftFlowSelector: createGetMicrosoftFlowData finished"),n}})),we(Se,[a.a.QuickForm,"Form.Card"],(function(){var e={},t={},r={};return function(i,a,n,s,u,l){b.a.info(n.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlQuickFormSelector: createGetQuickFormData started");var c,d,p=!1,h=s.Parameters[i].Value.split("|");if(h.length<2)throw b.a.error(n.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlQuickFormSelector: createGetQuickFormData encountered error, invalid form configuration provided"),new Error("Invalid form configuration provided");var m=h[0],g=null;if(m.indexOf(":")>-1){var v=m.split(":");m=v[0],g=v[1]}g=g||Object(ie.a)(6);var y=h[1],O=o.a.EMPTY,_=null,P=y;if(h.length>=3){O=o.a.tryParse(h[2]);var S=P?Object(re.h)(a,P):null,w=!o.a.isNullOrEmpty(O)&&P?new K.a(P,O):null;_=(I=S&&w?Object(Y.j)(a,w,S.PrimaryImageAttribute+"_url"):null)?I.value:null}else{var I,j=new K.a(u.entityTypeName,o.a.isNullOrEmpty(u.id)?o.a.EMPTY:u.id),C=Object(f.ac)(a,n.id,l.parentContextToken);if(O=(w=(c=Object(Z.d)(a,C,j,y))?c.reference:null)&&w.id?w.id:o.a.EMPTY,d=c&&c.reference?c.reference.name:"",!(P=w?w.etn:null)){var D=Object(X.a)(a,u.entityTypeName,y),E=D?D.Targets:null;P=E&&E.length?E[0]:null}_=(I=(S=P?Object(re.h)(a,P):null)&&w?Object(Y.j)(a,w,S.PrimaryImageAttribute+"_url"):null)?I.value:null}r.hasOwnProperty(i)&&r[i]||(r[i]=new ue);var T=r[i],N=o.a.tryParse(m),F=s.Parameters[i].FirstDataRequestType,R=T.retrieveFormObject(a,n,N,g,P,O,_,l,d,F);t.hasOwnProperty(i)&&t[i]&&R===t[i]||(p=!0);var A=T;return p&&(t[i]=R,e[i]=A),b.a.info(n.controlId+".CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlQuickFormSelector: createGetQuickFormData finished"),e[i]}})),we(Se,["GroupDefinition"],(function(){return be}))},aUuu:function(e,t,r){"use strict";r.d(t,"b",(function(){return C})),r.d(t,"a",(function(){return D}));var i=r("9r0m"),a=r("gBKR"),n=r("ildB"),o=r("JWXX"),s=r("i8/j"),u=r("lMVv"),l=r("QAhb"),c=r("vYfn"),d=r("w1wa"),p=r("ME4N"),h=r("9uN/"),f=r("3OsR"),m=r("B3Il"),g=r("qC0c"),v=r("4tno"),b=r("T35U"),y=r("tvev");function O(e,t,r){return{type:"recentitemsbyentity.retrieve.async",execute:function(i,a){var o=i.dispatch,s=i.getState,u=a.DataSource,l=[];return l.push(e),function(e,t,r,i,a,o,s,u,l,c,d){var p=y.a.tryCreate(Object(v.i)(r));return e.getRecentItems(p,a,u,l,c,d,null).nativePromise().then(h,f);function h(e){var r=e.map(b.d),a=_(r,s,i,t,o);if(a&&t(Object(n.s)(o,a)),r&&r.length>0&&s&&s.entityTypeName){var u={};u[s.entityTypeName]=r,t(Object(n.r)(o,u))}return r}function f(e){return i.TraceManager.getTracer("Recents").error("Retrieving recent items from data source failed with error: "+e.get_Message()),Promise.reject(e)}}(u,o,s,a,l,t,r)}}}function _(e,t,r,i,a){if(e&&t&&t.id&&t.id.guid){var o=e.filter((function(e){return e.ObjectId.guid===t.id.guid}));if(1===o.length){if(o[0].LastAccessed){var s=new Date(o[0].LastAccessed);if(s)return s.toJSON()}}else o.length>1&&(i(Object(n.u)(a,!0)),Object(h.d)(null,r,"TimelineWall.getLastAccessedTimeStamp","recentitemsbyentity.retrieve.async","more than one recent item found for current record."))}return null}var P,S=r("PQ2H"),w=r("VWqI"),I={},j={};function C(e,t,r){return{type:"timelinewall.load.metadata.async",execute:function(v,b){var y=v.dispatch,C=v.getState,E=C();I[p.b.PostsEntity]=p.t.TimelineWallPosts,I[p.b.ActivityPointerEntity]=p.t.TimelineWallActivities,I[p.b.AnnotationEntity]=p.t.TimelineWallNotes,function(e){var t;for(t in I)j[t]=Object(g.b)(e,I[t])}(E),P=Object(g.b)(E,p.t.TimelineWall);var T=Object(g.b)(E,p.t.TimelineWallWhatsChanged);if(D())return Promise.resolve();var N=e,F=null,R=N.LabelId;y(Object(n.q)(R,Object(d.c)(E,R))),T&&null!==t&&null!==t.pageType&&t.pageType!==p.j&&null!=(F=_(r,t,b,y,R))&&y(Object(n.s)(R,F));var A=function(e,t,r,a){var o=Object(m.a)(t.Parameters[p.s.UClientActivityCardMap]),u=[];if(j[p.b.ActivityPointerEntity])for(var d=0;d<o.length;d++){var f=o[d],g=f.formId,v=f.logicalName;if(g&&v)try{var b=new i.a(g);if(!Object(s.j)(e,b)){var y=new l.a(v),O=r(Object(c.b)(y,b,Object(S.a)(11)));u.push(O)}}catch(e){r(Object(n.u)(t.LabelId,!0));var _=e.message;Object(h.d)(null,a,"TimelineWall.loadCardFormsMetadata","timelinewall.load.metadata",_)}}return Promise.all(u).then((function(){Promise.resolve()}),(function(e){r(Object(n.u)(t.LabelId,!0)),Object(h.d)(e,a,"TimelineWall.loadCardFormsMetadata","retrieveForm"),Promise.resolve()}))}(E,N,y,b),k=j[p.b.ActivityPointerEntity]&&!Object(h.c)(E)?function(e,t,r,i){var a=[],n=e.Parameters[p.s.UClientActivities];if(n){if(a=n.split(","),Object(h.a)(t,p.n.SecondStage)){for(var o=[],s=0,l=a;s<l.length;s++){d=l[s];Object(w.b)(t,d)&&o.push(d)}return o}}else{var c=Object(u.a)(t);if(c&&c!=={})for(var d in c)Object(w.b)(t,d)&&a.push(d)}return a}(e,E):[],M=function(e,t,r,i,n){return function(e,t,r,i){if(j[p.b.PostsEntity]&&!Object(h.c)(e)){Object(g.b)(e,p.t.TimelineWallUserPosts)&&r.push(p.l),r.push(o.a)}var n={};p.u.SupportedModules.forEach((function(t){var a=t.entityName;if(j[a]&&(!Object(h.c)(e)||a.indexOf(p.b.AnnotationEntity)>-1)){var o=function(e,t){switch(e.entityName.toLowerCase()){case p.b.AnnotationEntity:case p.b.PostsEntity:return[e.sortByPrimary];case p.b.ActivityPointerEntity:return[null!=t.Parameters[p.s.UClientSortActivitiesByValue]?t.Parameters[p.s.UClientSortActivitiesByValue]:e.sortByPrimary,e.sortBySecondary]}}(t,i);r.push(a),n[a]=o}}));var s=0,u=Object(h.a)(e,p.n.FirstStage),l=r.reduce((function(e,t){var r=u?p.r[t]:p.c[t];return t===o.a?e[t]=[o.c,o.b]:e[t]=null==r?u?[]:[p.b.ModifiedOn,p.b.Description,p.b.OwnerId]:r,null!==n[t]&&void 0!==n[t]&&(e[t]=e[t].concat(n[t])),s++,e}),{});if(s)return t(Object(a.e)(l));return Promise.resolve()}(e,t,r,i).then((function(){if(j[p.b.PostsEntity])return t(Object(o.f)(i));Promise.resolve()}),(function(e){Object(h.d)(e,n,"TimelineWall.loadTimelineConfigAndMetaData","timelinewall.load.metadata.async")}))}(E,y,k,N,b),L=function(e,t,r,i,a,o,s){var u=Promise.resolve();if(o&&null!==a&&null!==a.pageType&&a.pageType!==p.j&&null==s){var l=function(e,t,r){if(t&&t.entityTypeName){var i=Object(d.c)(e,r);if(i)return i[t.entityTypeName]||null}return null}(e,a,i);null==l?a&&a.entityTypeName&&(u=t(O(a.entityTypeName,i,a))):(s=_(l,a,r,t,i))&&t(Object(n.s)(i,s))}return u.catch((function(e){Object(h.d)(e,r,"TimelineWall.getRecentItemsForEntity","RETRIEVE_RECENT_ITEMS_BY_ENTITY_ACTION")}))}(C(),y,b,R,t,T,F);return Promise.all([A,M,L]).then((function(){y(Object(n.o)(R,f.a.Metadata,2,null))}),(function(e){y(Object(n.u)(R,!0)),Object(h.d)(e,b,"TimelineWall.loadTimelineConfigAndMetaData","timelinewall.load.metadata.async")}))}}}function D(){return!P||!function(){var e,t;for(t in e=!1,I)e=e||j[t];return e}()}},aqxQ:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i=function(){function e(e,t,r,i,a){Object.assign(this,e),this.getViewId=function(){return t},this.getTargetEntityType=function(){return i},this.getTitle=function(){return r},this.addColumn=a}return e.prototype.refresh=function(){throw new Error("Not Replaced")},e.prototype.getViewId=function(){throw new Error("Not Replaced")},e.prototype.getTargetEntityType=function(){throw new Error("Not Replaced")},e.prototype.setSelectedRecordIds=function(e){throw new Error("Not Replaced")},e.prototype.getSelectedRecordIds=function(){throw new Error("Not Replaced")},e.prototype.clearSelectedRecordIds=function(){throw new Error("Not Replaced")},e.prototype.retrieveRecordCommand=function(e,t,r,i,a){throw new Error("Not Replaced")},e.prototype.openDatasetItem=function(e){throw new Error("Not Replaced")},e.prototype.getTitle=function(){throw new Error("Not Replaced")},e.prototype.addColumn=function(e,t){throw new Error("Not Replaced")},e.prototype.getCellImageInfo=function(e,t){throw new Error("Not Replaced")},e}()},bIXa:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var i=r("HSdq"),a=r("VnpK"),n=r("C8Q/"),o=r("8xrh"),s=r("r0s4");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function u(e,t,r,n,u){var l=Object(i.C)(e,t,n,r),c=[],d=!1;if(l&&l.customFilter)for(var p=0,h=l.customFilter;p<h.length;p++){var f=h[p];if("START_FLAG"===f.customFilter)d=!0;else if("END_FLAG"===f.customFilter)d=!1;else if(d&&(!f.entityLogicalName||u===f.entityLogicalName)){var m=Object(a.i)(Object(s.CrmHtmlDecode)(f.customFilter));if(null!==m){var g=Object(o.n)(m,null);g&&c.push(g)}}}return c}function l(e,t,r,i,a){return u(e,t,r,i,a).map((function(e){return n.a.toLegacyFilterExpression(e).toFetchXml()||""})).join("")}},bKPb:function(e,t,r){"use strict";r.d(t,"W",(function(){return i})),r.d(t,"U",(function(){return a})),r.d(t,"n",(function(){return n})),r.d(t,"o",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"Q",(function(){return u})),r.d(t,"V",(function(){return l})),r.d(t,"i",(function(){return c})),r.d(t,"c",(function(){return d})),r.d(t,"h",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"a",(function(){return f})),r.d(t,"e",(function(){return m})),r.d(t,"d",(function(){return g})),r.d(t,"m",(function(){return v})),r.d(t,"j",(function(){return b})),r.d(t,"k",(function(){return y})),r.d(t,"l",(function(){return O})),r.d(t,"g",(function(){return _})),r.d(t,"T",(function(){return P})),r.d(t,"R",(function(){return S})),r.d(t,"S",(function(){return w})),r.d(t,"K",(function(){return I})),r.d(t,"O",(function(){return j})),r.d(t,"t",(function(){return C})),r.d(t,"s",(function(){return D})),r.d(t,"L",(function(){return E})),r.d(t,"F",(function(){return T})),r.d(t,"G",(function(){return N})),r.d(t,"N",(function(){return F})),r.d(t,"M",(function(){return R})),r.d(t,"I",(function(){return A})),r.d(t,"P",(function(){return k})),r.d(t,"J",(function(){return M})),r.d(t,"H",(function(){return L})),r.d(t,"r",(function(){return V})),r.d(t,"u",(function(){return x})),r.d(t,"w",(function(){return B})),r.d(t,"A",(function(){return U})),r.d(t,"y",(function(){return z})),r.d(t,"z",(function(){return W})),r.d(t,"x",(function(){return q})),r.d(t,"B",(function(){return G})),r.d(t,"v",(function(){return Q})),r.d(t,"D",(function(){return H})),r.d(t,"E",(function(){return K})),r.d(t,"C",(function(){return X})),r.d(t,"q",(function(){return Y})),r.d(t,"p",(function(){return Z})),r.d(t,"X",(function(){return J}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i="Search_Page_Title",a="Search_SearchWith_Label",n="Search_FilterWith_Label_No_Colon",o="Search_FilterOption_None",s="Web.Tools.personalsettings.dialogs.personalsettings.aspx_213",u="Web.Tools.personalsettings.dialogs.personalsettings.aspx_212",l="Search_Noresults_Message",c="Search_TextInput_Placeholder",d="Search.Accessibility.Multiple_CategorizedSearchResult",p="Search.Accessibility.Single_CategorizedSearchResult",h="Search.Accessibility.ResultLoading",f="Search_FilterWith_Label_No_Colon",m="Grid_ToolTip_PreviousPage",g="Grid_ToolTip_NextPage",v="Facet_RecordType",b="Facet_CreatedOn",y="Facet_ModifiedOn",O="Facet_Owner",_="ReportViewer_PageOf",P="Search.Accessibility.Search_box",S="Search.Accessibility.Scan_Barcode",w="Search.Accessibility.Barcode_Scanned",I="RelevanceSearch.SearchResults",j="RelevanceSearch.TopResults",C="RelevanceSearch.ErrorTitle",D="RelevanceSearch.ErrorSubtitle",E="RelevanceSearch.Retry",T="RelevanceSearch.Feedback",N="RelevanceSearch.Feedback.Provided",F="RelevanceSearch.ShowMore",R="RelevanceSearch.ShowLess",A="RelevanceSearch.NoResult",k="RelevanceSearch.TryDifferentKeyword",M="RelevanceSearch.NumberOfResultsBasedOnFields",L="RelevanceSearch.Filters",V="RelevanceSearch.ClearAll",x="RelevanceSearch.Facet.Clear",B="RelevanceSearch.Facet.DateRange.Oldest",U="RelevanceSearch.Facet.DateRange.OneYearAgo",z="RelevanceSearch.Facet.DateRange.OneMonthAgo",W="RelevanceSearch.Facet.DateRange.OneWeekAgo",q="RelevanceSearch.Facet.DateRange.OneDayAgo",G="RelevanceSearch.Facet.DateRange.Today",Q="RelevanceSearch.Facet.DateRange.Latest",H="RelevanceSearch.Facet.Range.From",K="RelevanceSearch.Facet.Range.To",X="RelevanceSearch.Facet.Owner.Me",Y="Button_Label_Yes",Z="Button_Label_No",J=[i,s,u,a,n,o,"Ribbon.AdvancedFind.Show.Results",l,c,d,p,h,f,v,b,y,O,_,P,S,w,m,g,I,j,"RelevanceSearch.ShowNumberOfResults",F,R,A,k,C,D,E,T,N,"RelevanceSearch.EntityNumberOfResults","RelevanceSearch.EntityNumberOfSingleResult",M,L,V,x,B,U,z,W,q,G,Q,X,H,K,Y,Z]},buKK:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var i=r("c/eZ"),a=r("9r0m"),n=r("/eNh"),o=r("HSdq"),s=r("yHpA"),u=r("Sscr"),l=r("OROb"),c=r("7WOp"),d=r("lMVv"),p=r("UGbr"),h=r("OTOS");function f(e,t,r){var f=[];return{type:"form.openManageDuplicatesDialog",execute:function(m,g,v){var b,y,O=m.dispatch,_=(0,m.getState)(),P=r?Object(s.c)(_,r):Object(s.b)(_,Object(o.ac)(_,e,Object(u.j)(_,e)));if(P&&P.identifier){var S=g.TraceManager.getTracer(p.b),w=Object(l.b)(_,P,S),I=void 0,j=void 0,C=w.get_identifier(),D=C.LogicalName;try{I=Object(c.b)(_,w),j=Object(i.__assign)({"@odata.type":"#Microsoft.Dynamics.CRM."+D},I)}catch(e){var E=[{name:"CorrelationId",value:v.correlationId},{name:"ContextId",value:v.contextId},{name:"ActionStack",value:v.stack}];return g.EventManager.ReportComponentFailure("Forms.OpenManageDuplicatesDialog",Error(JSON.stringify(e)),void 0,E),Promise.resolve({status:1,error:e})}if(!a.a.isNullOrEmpty(a.a.fromLegacyGuid(C.Id)))j[Object(d.h)(_,D).PrimaryKeyName]=C.Id.toString();var T=function(e){var t,r,i,a,n,o,s,u,l,c,d=function(e){var t,r=null===(t=null==e?void 0:e.errorFault)||void 0===t?void 0:t.get_innerFault();return null==r?void 0:r.get_message()}(e),p=d?null===(t=JSON.parse(d))||void 0===t?void 0:t.DuplicateAttributes:void 0,h=new DOMParser,f=p?h.parseFromString(p,"text/xml"):void 0;if((null===(a=null===(i=null===(r=null==f?void 0:f.getElementsByTagName("DuplicateValues"))||void 0===r?void 0:r[0])||void 0===i?void 0:i.children)||void 0===a?void 0:a.length)>0){for(var m={},g=f.getElementsByTagName("DuplicateValues")[0].children,v=0;v<g.length;v++){var b=null===(o=null===(n=g[v])||void 0===n?void 0:n.getAttribute("key"))||void 0===o?void 0:o.toString(),y=null===(c=null===(l=null===(u=null===(s=g[v])||void 0===s?void 0:s.childNodes)||void 0===u?void 0:u[0])||void 0===l?void 0:l.nodeValue)||void 0===c?void 0:c.toString();b&&y&&(m[b]=y)}return m}return{}}(t),N={entity_record:Object(i.__assign)(Object(i.__assign)({},j),T)},F=Object(h.b)(_,e);f.push({name:"formId",value:null===(b=null==F?void 0:F.guid)||void 0===b?void 0:b.toString()},{name:"entityName",value:D},{name:"entityId",value:null===(y=null==C?void 0:C.Id)||void 0===y?void 0:y.toString()}),g.EventManager.ReportComponentSuccess("Forms.OpenManageDuplicatesDialog",f);return O(Object(n.b)("ManageDuplicates",{height:"600px",width:"800px"},N,e)).then((function(e){return g.EventManager.ReportComponentSuccess("Forms.OpenManageDuplicatesDialog",f),e}))}f.push({name:"SnapshotExists",value:null!=P}),g.TraceManager.getTracer("Forms.OpenManageDuplicatesDialog").warn("Null/undefined snapshot or snapshot.identifier.",f)},getFailureParameters:function(e,t){return f}}}},"c3W+":function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var i=r("Sscr"),a=r("VEVe"),n=r("HSdq"),o=r("B188"),s=r("+Swy"),u=r("n47b"),l=r("exUJ"),c="form.SavingState.set";function d(e,t,r){return{type:"set.formSaving.sync",sync:!0,execute:function(d,p){var h=d.dispatch,f=d.getState,m=f(),g=Object(o.a)();if(2===r||1===r){var v=Object(n.mb)(m,{id:e},t),b=Object(n.Ab)(m,{id:e},t);v&&!b&&h(Object(a.c)(2===r?1:0))}if(h(function(e,t,r){var a=Object(i.v)(t);return{type:c,payload:{savingState:r},meta:{pageId:e,contextKey:a}}}(e,t,0===r)),g){var y=f(),O=void 0;switch(r){case 0:O="started";break;case 1:O="succeeded";break;case 2:O="failed";break;case 3:O="canceled"}var _=Object(l.b)(y,e);if(O="Save operation "+O+" "+Object(u.c)(y,e,t)+".",v=Object(n.jb)(y,_))Object(u.b)(_,s.b.onSave).push({message:O});else Object(u.a)(p,_,s.b.onSave,{message:O})}}}}},dUXI:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"v",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"y",(function(){return u})),r.d(t,"z",(function(){return l})),r.d(t,"w",(function(){return c})),r.d(t,"m",(function(){return d})),r.d(t,"o",(function(){return p})),r.d(t,"q",(function(){return h})),r.d(t,"r",(function(){return f})),r.d(t,"t",(function(){return m})),r.d(t,"s",(function(){return g})),r.d(t,"n",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return b})),r.d(t,"A",(function(){return E})),r.d(t,"u",(function(){return O})),r.d(t,"j",(function(){return _})),r.d(t,"a",(function(){return P})),r.d(t,"i",(function(){return S})),r.d(t,"x",(function(){return w})),r.d(t,"p",(function(){return I})),r.d(t,"h",(function(){return j})),r.d(t,"k",(function(){return C})),r.d(t,"l",(function(){return D}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i="Web.Visualization.AxisTitle",a="Web.Visualization.AxisTitle.DateGrouping",n="Web.Visualization.EmptyAxisLabel",o="Web.Visualization.AxisTitle.CurrencySymbol",s="Calendar_Short_Months",u="Web.Visualization.Year.Quarter",l="Web.Visualization.Year.Week",c="FiscalYear_Format_String_NoSpace",d="Chart_NoData_Message",p="Chart_NoReadPrivilege",h="Chart_Retrieve_Error_Message",f="Chart_UnavailableOffline",m="Chart_Unsupported_Title",g="Chart_Unsupported_Message",v="Visualization_EmptyGridMessage",b="Error_Message_0x80061721",y="ChartAttributeValueMissing",O="Error_Message_Generic_Mobile_Client",_="Visualization_QueryApiMessage",P="Error_Message_0x8004e023",S="Web.Visualization_Invalid_Attribute",w="Error_Message_Visualization_SQLArithmeticOverflow",I="Error_Message_Visualization_Not_Found",j="Web.Visualization_Invalid_Aggregate_Type",C="Error_Message_Visualization_Navigation",D="Error_Message_Visualization_Navigation_Detail",E=["ActivityContainerControl.SubjectEllipsesText",i,a,n,"Web.Visualization.AxisTitle.AVG","Web.Visualization.AxisTitle.SUM","Web.Visualization.AxisTitle.COUNT","Web.Visualization.AxisTitle.COUNTCOLUMN",o,"Web.Visualization.AxisTitle.DateGrouping.DAY","Web.Visualization.AxisTitle.DateGrouping.FISCALPERIOD","Web.Visualization.AxisTitle.DateGrouping.FISCALYEAR","Web.Visualization.AxisTitle.DateGrouping.MONTH","Web.Visualization.AxisTitle.DateGrouping.QUARTER","Web.Visualization.AxisTitle.DateGrouping.WEEK","Web.Visualization.AxisTitle.DateGrouping.YEAR",s,u,l,c,"PageLoadingMessage",d,p,h,f,"Chart_UnreadableDefinition_Title","Chart_UnreadableDefinition_Message",m,g,"CRM_Personal_Visualization_Group_Name","CRM_System_Visualization_Group_Name",v,y,b,"Error_Message_0x80040226","Error_Message_0x80048306",O,_,P,S,w,I,j,C,D]},gk6Q:function(e,t,r){"use strict";var i;function a(e){i=e}function n(e,t){return i?i.getProcessManager(e,t):null}function o(e){return i?i.getCurrentProcessManagerWithoutInit(e):null}r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}))},hCnb:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var i=r("Sscr"),a="form.invalidAttributes";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function n(e,t,r,n){var o=Object(i.v)(n);return{type:a,payload:{attributeName:t,isValid:r},meta:{pageId:e,attributeName:t,contextKey:o}}}},hl8w:function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function i(e,t){var r=[],i=e?e.split("|"):null;i&&i.forEach((function(e){r.push({attributeName:t,conditionOperator:6,value:e+"%"})}));var a={conditions:r,filterOperator:1,filters:[]};return JSON.stringify(a)}function a(e,t,r){var i=new DOMParser,a=i.parseFromString(e,"text/xml"),n=a.getElementsByTagName("entity");if(n.length>0){var o=n[0];if(o.hasAttribute("name")&&"systemuser"===o.attributes.getNamedItem("name").value){var s='<link-entity name="teammembership" to="systemuserid" from="systemuserid" link-type="inner">\n\t\t\t<link-entity name="team" to="teamid" from="teamid" link-type="inner">\n\t\t\t\t<filter type="and">\n\t\t\t\t<condition attribute="regardingobjectid" operator="eq" value="'+r+'"/>\n\t\t\t\t<condition attribute="teamtype" operator="eq" value="1" />\n\t\t\t\t<condition attribute="teamtemplateid" operator="eq" value="'+t+'"/>\n\t\t\t\t</filter>\n\t\t\t</link-entity>\n\t\t\t</link-entity>',u=i.parseFromString(s,"text/xml");if(u.hasChildNodes())return o.appendChild(u.firstChild),{updatedFetchXml:(new XMLSerializer).serializeToString(a.firstChild),filterString:s}}}return{updatedFetchXml:e,filterString:""}}function n(e,t,r){var i=r;if(e){var a=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("order");if(!a)return r;for(var n=0,s=0;s<a.length;s++)if(a[s].parentNode&&a[s].parentNode.localName&&"link-entity"!==a[s].parentNode.localName){n=s;break}if(s>=a.length)return r;var u=a[n];u&&(i=o(i=u.getAttribute("attribute"),t[i].Type,r))}return i}function o(e,t,r){return e=function(e,t){"customer"!==e&&"lookup"!==e&&"owner"!==e||(t+="name");return t}(t,e),function(e){switch(e){case"string":case"memo":case"customer":case"lookup":case"owner":return!0;default:return!1}}(t)||(e=r),e}r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o}))},"ib+O":function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i,a;function n(){return[{LinkEntity:"account",IdAttribute:"accountid",DisplayAttribute:"name"},{LinkEntity:"contact",IdAttribute:"contactid",DisplayAttribute:"name"}]}function o(){return{LinkEntity:"systemuser",IdAttribute:"systemuserid",DisplayAttribute:"fullname"}}function s(){return[]}r.d(t,"c",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),function(e){e[e.Header=0]="Header",e[e.Body=1]="Body",e[e.Footer=2]="Footer"}(i||(i={})),function(e){e[e.String=0]="String",e[e.Number=1]="Number",e[e.Boolean=2]="Boolean",e[e.DateTime=3]="DateTime",e[e.PartyList=4]="PartyList",e[e.UniqueIdentifier=5]="UniqueIdentifier",e[e.Virtual=6]="Virtual"}(a||(a={}))},"j+yI":function(e,t,r){"use strict";r.d(t,"a",(function(){return D})),r.d(t,"b",(function(){return T})),r.d(t,"c",(function(){return N})),r.d(t,"f",(function(){return E}));var i=r("qC0c"),a=r("9r0m"),n=r("HSdq"),o=r("yHpA"),s=r("g9bv"),u=r("Sscr"),l=r("jJRu"),c=r("cAHA"),d=r("QAhb"),p=r("lMVv"),h=r("TCcM"),f=r("lKeh"),m=r("nbQV"),g=r("sOTk"),v=r("gk6Q"),b=r("F2uj"),y=r("IfuP"),O=r("uwKl"),_=r("ed60"),P=r("l9h5"),S=r("GUnN"),w=r("gBKR"),I=r("InjE");r.d(t,"d",(function(){return I.a})),r.d(t,"e",(function(){return I.b}));var j=r("JlqV"),C=r("Ev4I");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function D(e,t,r,y,O){if(!(e&&t&&r&&y&&O))return null;var _=null;try{var P=Object(g.g)(t,O);if(!P)return r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId","page input is null."),null;if(!Object(n.Kb)(t,O)){var S=Object(v.b)(O,P);return S&&S.generateBPFInstanceSnapshotId()}if(!Object(i.c)(t,"FCB.SplitBPFEntityAndParticipatingEntityCreates"))return null;var D=Object(n.ac)(t,O,y),E=Object(o.b)(t,D);if(!E||!E.identifier||!E.identifier.etn)return r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId","primary entity snapshot is invalid."),null;var N=E.identifier.etn,F=E.identifier.id,R=Object(h.d)(t,N);if(a.a.isNullOrEmpty(R))return null;var A=Object(m.a)(t,R);if(!A)return r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId","The BPF unique name is null for processId - "+R+"."),null;if(A===N)return r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId","This is immersive BPF with processId - "+R+"."),null;if(!Object(j.b)(t)&&!Object(C.l)(t,A))return null;var k={processid:{id:a.a.EMPTY}};if(Object(I.b)(P)||Object(I.a)(t,E.identifier,O))return e(Object(s.b)(t,D,k)),null;a.a.isNullOrEmpty(F)?F=a.a.newGuid():r.EventManager.ReportComponentSuccess("ProcessManagerHelper.AlreadyPopulatePrimaryEntityId"),e(Object(s.b)(t,D,k,F));var M=Object(f.d)(t,R);if(a.a.isNullOrEmpty(M))return r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId","The first stage id is null."),null;(_=function(e,t,r,i,n,o,s,h,f){var m=function(e,t,r,i,a,n){if(!r||!i||!n)throw new Error("Primary entity and Active stage cannot be null or undefined.");var o={activestageid:{reference:new d.a("processstage",n),timestamp:new Date,validationResult:{isValueValid:!0,errorMessage:null,errorId:null,userInput:n.guid}},traversedpath:{value:n.guid.toString(),timestamp:new Date,validationResult:{isValueValid:!0,errorMessage:null,errorId:null,userInput:""}},processid:{reference:new d.a("workflow",i),timestamp:new Date,validationResult:{errorId:null,errorMessage:null,isValueValid:!0,userInput:null,isOfflineSyncError:!1}}};return function(e,t,r,i,a,n){if(!(e&&t&&r&&i&&a))return;var o=T(t,r,n);o&&(e[o.ReferencingAttribute]={reference:new d.a(r,i),timestamp:new Date,validationResult:{errorId:null,errorMessage:null,isValueValid:!0,userInput:null,isOfflineSyncError:!1}})}(o,e,t,r,i,a),o}(t,n,o,s,h,f);if(!function(e,t,r,i){if(!t||!r||!i)return!1;var a=Object(b.g)(e,r,Object.keys(i));if(a&&a.length>0)return t.EventManager.ReportComponentFailure("ProcessManagerHelper._validateBPFEntityAttributes","BPF("+r+") - These attributes are missing metadata: "+a.join()),!1;return!0}(t,r,h,m))return h&&e(Object(w.f)(h,!0,[])).then((function(){Object(p.h)(t,h)||r.EventManager.ReportComponentFailure("ProcessManagerHelper._createBPFEntitySnapshot","Retrieve BPF("+h+") failed.")})),null;var g=Object(u.x)(i),v=Object(l.b)(t,new d.a(h,a.a.EMPTY),m,g,c.a.Create),y=v.payload.snapshotId;return e(v),y}(e,t,r,y,N,F,R,A,M))?r.EventManager.ReportComponentSuccess("ProcessManagerHelper.generateBPFInstanceSnapshotId"):r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId","The BPF entity snapshot id is null.")}catch(e){r.EventManager.ReportComponentFailure("ProcessManagerHelper.generateBPFInstanceSnapshotId",e)}return _}function E(e,t,r,i){if(e&&i&&t&&r){var n={processid:{id:a.a.EMPTY}};i(Object(s.b)(e,t,n,r))}}function T(e,t,r){var i=Object(p.C)(e,t);if(!i)return null;for(var a in i){var n=i[a];if(n.ReferencedEntity===t&&n.ReferencingEntity===r)return n}return null}function N(e,t,r,n,o,s){var u=new d.a(n,a.a.EMPTY),l=Object(h.d)(e,n);return Object(i.c)(e,"FCB.SplitBPFEntityAndParticipatingEntityCreates")&&!a.a.equals(l,a.a.EMPTY)?t(Object(y.a)(a.a.EMPTY,u)).then((function(i){var n="";if(i&&i.businessProcessFlows){var c=i.businessProcessFlows[a.a.toString(l)];if(c&&(t(Object(O.b)(c.businessProcessFlowId,u)),t(Object(_.b)(a.a.EMPTY,u)),t(Object(P.b)(!1,u)),n=c.businessProcessFlowUniqueName)){var d=Object(b.g)(e,n,["activestageid","traversedpath","processid"]);d&&d.length>0&&t(Object(w.f)(n,!0,[])).then((function(){Object(p.h)(e,n)||r.EventManager.ReportComponentFailure("ProcessManagerHelper.retrieveBPFEntity","Retrieve BPF("+n+") failed.")}))}}return o&&o.info("retrieveBusinessProcessFlow completed.",s),r.EventManager.ReportComponentSuccess("ProcessManagerHelper.retrieveBusinessProcessFlow for "+a.a.toString(l)+"("+n+")"),Promise.resolve(i)})).catch((function(e){return s.push({name:"retrieveDefaultBPFForQuickCreateForm.Reason",value:Object(S.e)(e)}),r.EventManager.ReportComponentFailure("ProcessManagerHelper.retrieveBusinessProcessFlow",e,null,s),Promise.resolve(null)})):Promise.resolve(null)}},jm5F:function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return b}));var i=r("g9bv"),a=r("yHpA"),n=r("sOTk"),o=r("QAhb"),s=r("TCcM"),u=r("HSdq"),l=r("5jMY"),c=r("r454"),d=r("Sscr"),p=r("9r0m"),h=r("M6d0"),f=r("i8/j"),m=r("IQF2"),g=r("GHPx");function v(e,t){var r=[];return{type:"snapshot.update.async",execute:function(v,b,y){var O=v.dispatch,_=v.getState,P=b.TraceManager.getTracer("Forms.UpdateSnapshot"),S=_(),w=Object(d.j)(S,e),I={},j={},C=Object(n.g)(S,e),D=C.entityTypeName,E=C.id,T=C.processId;r.push({name:"entityTypeName",value:D},{name:"id",value:p.a.toString(E)},{name:"processId",value:T}),P.info("updateSnapshotWithOptions started.",r);var N=Object(u.ac)(S,e,w);if(!N)return r.push({name:"CorrelationId",value:y.correlationId},{name:"ContextId",value:y.contextId},{name:"ActionStack",value:y.stack}),P.warn("Null/undefined snapshotId",r),Promise.resolve({unboundAttributes:I,attributesPendingUpdate:j});r.push({name:"snapshotId",value:N});var F=Object(u.Pc)(S,e,w);F.length>0&&r.push({name:"updateFieldNames",value:F.slice(0,15).toString()}),function(e,t,r,a){var n;if(a){var o=((n={})[h.r]={id:p.a.tryParse(a)},n);e(Object(i.b)(t,r,o))}}(O,S,N,T);var R=[],A={},k=new o.a(D,E);return function(e,t,r,i,n,o,c,d,p){var h=Object(u.Ac)(e,t,i);if(null==h)d.warn("Null/undefined submitModesByFieldName",p);else if(0===Object.keys(h).length)d.warn("0 length submitModesByFieldName",p);else for(var f in p.push({name:"NumSubmitModesByFieldName",value:Object.keys(h).length}),h)if(h[f]===l.a.Always){if(Object(a.e)(e,r,f))continue;o[f]=Object(s.j)(e,n,f)}else h[f]===l.a.Never&&Object(a.e)(e,r,f)&&c.push(f)}(S,e,N,w,k,A,R,P,r),function(e,t,r,i,n,o,s){var u=Object(f.l)(e,t),l=new Set(Object(f.y)(e,t));u&&u.length>0&&l&&(u=u.filter((function(e){return!l.has(e)})));if(u&&u.length>0){s.push({name:"NumUnboundAttributes",value:u.length});for(var c=0,d=0;d<u.length;++d)if(Object(a.f)(e,r,u[d])){var p=Object(a.d)(e,r,i,u[d]);p&&(o[u[d]]=p),n.push(u[d]),++c}s.push({name:"NumUnboundAttributesProcessed",value:c})}}(S,t,N,k,R,I,r),function(e,t,r,i,n){var o=Array.from(m.a.getInstance().getAttributesPendingUpdate());if((null==o?void 0:o.length)>0)for(var s=0;s<o.length;++s)if(Object(a.f)(e,t,o[s])){var u=Object(a.d)(e,t,r,o[s]);u&&(n[o[s]]=u),i.push(o[s])}}(S,N,k,R,j),function(e,t,r){var i=Object(a.b)(e,t);if(i){var n=i.activeChanges&&Object.keys(i.activeChanges);if(null==n?void 0:n.length)for(var o=0,u=n;o<u.length;o++){var l=u[o],c=Object(s.j)(e,i.identifier,l),d=Object(a.d)(e,t,i.identifier,l);Object(g.b)(c,d)||r.push(l)}}}(S,N,R),Object.keys(A).length&&O(Object(i.b)(S,N,A)),R.length&&O(Object(c.b)(N,!0,R)),b.EventManager.ReportComponentSuccess("Forms.UpdateSnapshot",r),Promise.resolve({unboundAttributes:I,attributesPendingUpdate:j})},getFailureParameters:function(e,t){return r}}}function b(e,t,r){var o=t?Object.keys(t).length:0,s=r?Object.keys(r).length:0,l=[{name:"numUnboundAttributes",value:o}];return{type:"snapshot.update.addAttributesBack.async",execute:function(c,h,f){var m=c.dispatch,g=(0,c.getState)(),v=Object(d.j)(g,e),b=Object(n.g)(g,e),y=b.entityTypeName,O=b.id,_=b.processId;l.push({name:"entityTypeName",value:y},{name:"id",value:p.a.toString(O)},{name:"processId",value:_});var P=Object(u.ac)(g,e,v);if(l.push({name:"snapshotId",value:P}),P){if(o>0&&m(Object(i.b)(g,P,t)),s>0){var S=Object.keys(r).filter((function(e){return!Object(a.f)(g,P,e)}));if(S.length>0){var w={};S.forEach((function(e){w[e]=r[e]})),m(Object(i.b)(g,P,w))}}h.EventManager.ReportComponentSuccess("Forms.AddAttributesBackToSnapshot",l)}else l.push({name:"CorrelationId",value:f.correlationId},{name:"ContextId",value:f.contextId},{name:"ActionStack",value:f.stack}),h.EventManager.ReportComponentFailure("Forms.AddAttributesBackToSnapshot",new Error("Null/undefined snapshotId"),"Check Forms.UpdateSnapshot. If that succeeded, so should this.",l);return Promise.resolve()},getFailureParameters:function(e,t){return l}}}},jxko:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r("455M"),a=r("QJO/");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function n(e,t){switch("number"==typeof t&&(t=t.toString()),t=t.toUpperCase(),e=e.toUpperCase()){case"boolean".toUpperCase():return i.a.TwoOptions;case"customer".toUpperCase():return i.a.LookupCustomer;case"datetime".toUpperCase():return t===a.a.dateTime.toUpperCase()?i.a.DateAndTimeDateAndTime:i.a.DateAndTimeDateOnly;case"decimal".toUpperCase():return i.a.Decimal;case"double".toUpperCase():return i.a.FP;case"integer".toUpperCase():return t===a.a.duration.toUpperCase()||"1"===t?i.a.WholeDuration:t===a.a.language.toUpperCase()||"3"===t?i.a.WholeLanguage:t===a.a.timeZone.toUpperCase()||"2"===t?i.a.WholeTimeZone:i.a.WholeNone;case"lookup".toUpperCase():return t===a.a.regarding.toUpperCase()?i.a.LookupRegarding:i.a.LookupSimple;case"memo".toUpperCase():return i.a.Multiple;case"money".toUpperCase():return i.a.Currency;case"owner".toUpperCase():return i.a.LookupOwner;case"partylist".toUpperCase():return i.a.LookupPartyList;case"picklist".toUpperCase():case"status".toUpperCase():return i.a.OptionSet;case"multiselectpicklist".toUpperCase():return i.a.MultiSelectPicklist;case"string".toUpperCase():return t===a.a.email.toUpperCase()?i.a.SingleLineEmail:t===a.a.phone.toUpperCase()?i.a.SingleLinePhone:t===a.a.text.toUpperCase()?i.a.SingleLineText:t===a.a.textArea.toUpperCase()?i.a.SingleLineTextArea:t===a.a.tickerSymbol.toUpperCase()?i.a.SingleLineTickerSymbol:t===a.a.url.toUpperCase()?i.a.SingleLineURL:i.a.SingleLineText;case"entityname".toUpperCase():return i.a.EntityNameOptionSet;default:return""}}},"kk/C":function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s}));var i=r("Sscr"),a="userUpdatedFields.add",n="userUpdatedFields.clear";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function o(e,t,r){var n=Object(i.x)(t);return{type:a,payload:{fieldValues:r},meta:{pageId:e,contextKey:n}}}function s(e,t,r){var a=Object(i.x)(t);return{type:n,payload:{keepFields:r},meta:{pageId:e,contextKey:a}}}},kl3Z:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return c}));var i=r("455M"),a=r("RlP9"),n=r("2OIc"),o=r("9jP5"),s=r("U0B9");function u(e,t,r,a){var n=Object(s.b)(e);if(!(t&&t.CustomControls&&t.CustomControls[n]&&t.CustomControls[n].Parameters))return null;var o=t.CustomControls[n].Parameters,u=null;if(a&&o[a])(c=o[a]).Type===i.a.Grid&&(u=o[a]);else for(var l in o){var c;if((c=o[l]).Type===i.a.Grid){u=c;break}}if(u&&u.Columns){var d=u.Columns,p=[];for(var h in d){var f=d[h].Name;f&&-1===p.indexOf(f)&&-1===r.indexOf(f)&&p.push(f)}return p}return null}function l(e,t,r,i,o,s,l){var d=Object(a.c)(e,l);if(!(i||o||e&&d&&e.metadata&&e.metadata.formDefaults&&s&&e.metadata.formDefaults[s]))return null;var p=i||e.metadata.formDefaults[s][o].formId;return u(e,Object(n.b)(e,t,p),c(d),r)}function c(e){var t=d(e);return t?t.map((function(e){return e.name})):[]}function d(e){return e&&e.grid&&e.grid.rows&&e.grid.rows[0]&&e.grid.rows[0].cells?e.grid.rows[0].cells:[]}function p(e,t,r){var i=Object(a.c)(e,r);return i?u(e,Object(n.d)(e,t,o.a),c(i)):[]}},ktSr:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i=function(){function e(){}return e.prototype.updateConfiguration=function(e,t){var r,i,a,n;null!==(null==e?void 0:e.DisableMru)&&void 0!==(null==e?void 0:e.DisableMru)?this._disableMru="true"===e.DisableMru.toString():this._disableMru="true"===(null===(r=null==t?void 0:t.Parameters)||void 0===r?void 0:r.DisableMru),(null===(i=null==t?void 0:t.Parameters)||void 0===i?void 0:i.IsInlineNewEnabled)?this._disableInlineNewButton="false"===t.Parameters.IsInlineNewEnabled:this._disableInlineNewButton=!1,(null===(a=null==t?void 0:t.Parameters)||void 0===a?void 0:a.useMainFormDialogForCreate)?this._useMainFormDialogForCreate="true"===t.Parameters.useMainFormDialogForCreate:this._useMainFormDialogForCreate=!!(null==e?void 0:e.UseMainFormDialogForCreate),(null===(n=null==t?void 0:t.Parameters)||void 0===n?void 0:n.useMainFormDialogForEdit)?this._useMainFormDialogForEdit="true"===t.Parameters.useMainFormDialogForEdit:this._useMainFormDialogForEdit=!!(null==e?void 0:e.UseMainFormDialogForEdit)},e.prototype.getLookupConfiguration=function(){return this._memoizedLookupConfiguration&&this._memoizedLookupConfiguration.isMruDisabled===this._disableMru&&this._memoizedLookupConfiguration.isInlineNewButtonDisabled===this._disableInlineNewButton&&this._memoizedLookupConfiguration.useMainFormDialogForCreate===this._useMainFormDialogForCreate&&this._memoizedLookupConfiguration.useMainFormDialogForEdit===this._useMainFormDialogForEdit||(this._memoizedLookupConfiguration={isMruDisabled:this._disableMru,isInlineNewButtonDisabled:this._disableInlineNewButton,useMainFormDialogForCreate:this._useMainFormDialogForCreate,useMainFormDialogForEdit:this._useMainFormDialogForEdit}),this._memoizedLookupConfiguration},e}()},lGKN:function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i;r.d(t,"a",(function(){return i})),function(e){e.error="ERROR",e.recommendation="RECOMMENDATION",e.information="INFORMATION"}(i||(i={}))},lKeh:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"d",(function(){return d}));var i=r("9r0m"),a=r("WS0f"),n=r("nbQV");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function o(e,t,r){var a=Object(n.b)(e,t);if(!a||!a.businessProcessFlowEntities||0===a.businessProcessFlowEntities.length)return null;for(var o in a.businessProcessFlowEntities){var s=a.businessProcessFlowEntities[o];if(s.hasOwnProperty("stage")&&i.a.equals(s.stage.stageId,r))return s}return null}function s(e,t){var r=Object(n.b)(e,t);if(!r||!r.businessProcessFlowEntities||0===r.businessProcessFlowEntities.length)return null;var i=r.businessProcessFlowEntities[0];return i.relationships?i.relationships:null}function u(e,t,r){var i=null;if(Object(a.a)(e)||Object(a.a)(e.metadata)||Object(a.a)(e.metadata.forms))return i;var o=Object(n.b)(e,t);if(!o||!o.businessProcessFlowUniqueName){var s=[];return s.push({name:"ProcessId",value:t.guid}),r.error("BPF descriptor does not contain 'businessProcessFlowUniqueName'",s),i}return Object.keys(e.metadata.forms).forEach((function(t){e.metadata.forms[t].EntityLogicalName===o.businessProcessFlowUniqueName&&(i=e.metadata.forms[t])})),i}function l(e,t){var r={};if(Object(a.a)(e.Controls)){var n=[];return n.push({name:"BPF Entity FormId",value:e.Id.guid},{name:"BPF Entity Form Name",value:e.EntityLogicalName},{name:"BPF Entity Form Type",value:e.FormType}),t.info("BPF form descriptor does not contain any controls",n),r}var o=e.Controls;return Object.keys(o).forEach((function(e){Object(a.a)(o[e].UniqueId)||o[e].UniqueId===i.a.EMPTY.guid||(r[e]=o[e])})),r}function c(e,t,r,o){var s=Object(n.b)(e,t),u=r.Tabs,l=r.Sections,c=[];if(c.push({name:"BPF Entity FormId",value:r.Id.guid},{name:"BPF Entity Form Name",value:r.EntityLogicalName},{name:"BPF Entity Form Type",value:r.FormType}),Object(a.a)(u))return o.error("BPF form descriptor does not contain any tabs",c),!1;if(0===Object.keys(u).length)return o.error("BPF form descriptor contains an empty tab collection",c),!1;if(Object(a.a)(l))return o.error("BPF form descriptor does not contain any sections",c),!1;if(0===Object.keys(l).length)return o.error("BPF form descriptor contains an empty section collection",c),!1;var d=[],p=[],h=[],f=s.businessProcessFlowEntities;if(Object.keys(f).forEach((function(e){var t=f[e].stage;Object(a.a)(t)||Object(a.a)(t.stageId)||Object(a.a)(t.stageId.guid)||t.stageId.guid===i.a.EMPTY.guid||d.indexOf(t.stageId.guid)<0&&d.push(t.stageId.guid.toLowerCase())})),Object.keys(u).forEach((function(e){var t=u[e].RawTabId;!Object(a.a)(t)&&t!==i.a.EMPTY.guid&&p.indexOf(t.toLowerCase())<0&&p.push(new i.a(t).guid.toLowerCase())})),Object.keys(l).forEach((function(e){var t=l[e].Id;!Object(a.a)(t)&&t!==i.a.EMPTY&&h.indexOf(t.guid.toLowerCase())<0&&h.push(t.guid.toLowerCase())})),c.push({name:"BPF Stage Ids",value:d},{name:"BPF Entity Form Tab Ids ",value:p},{name:"BPF Entity Form Section Ids ",value:h}),d.length>p.length)return o.error("Number of stageIds in UIData is greater than the number of stageIds in the FormXML",c),!1;if(h.length!==p.length)return o.error("Number of tabs and sections do not match.",c),!1;for(var m=0;m<d.length;m++)if(p.indexOf(d[m])<0)return c.push({name:"Missing Stage Id in BPF Form descriptor",value:d[m]}),o.error("StageId missing from BPF form descriptor",c),!1;return!0}function d(e,t){var r=Object(n.b)(e,t);if(!r||!r.businessProcessFlowEntities||r.businessProcessFlowEntities.length<=1)return null;var i=r.businessProcessFlowEntities[0].relationships?r.businessProcessFlowEntities[1]:r.businessProcessFlowEntities[0];return i&&i.stage?i.stage.stageId:null}},n1Ju:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var i=r("UOiB"),a=r("Sscr"),n=r("krRo"),o=r("2p2B"),s=r("HSdq"),u=r("c7nC"),l=r("Srej"),c="control.notification.set";function d(e,t,r,d){return{type:"control.notification.set.clear.form.notification",sync:!0,execute:function(p,h){p.dispatch(function(e,t,r,o){var s;if(o&&o.contextTokenType&&o.contextTokenType===i.a.GridRow)return Object(n.d)(e,o,t,r);var u={};r?((s={})[r.uniqueId]=r,u=s):u=null;var l=Object(a.x)(o);return{type:c,payload:u,meta:{pageId:e,contextKey:l,controlName:t}}}(e,t,r,d)),Object(s.Sc)(p.getState(),e,d,t)||(p.dispatch(Object(u.b)(e,t,!0,d)),p.dispatch(Object(o.b)(d,e,Object(l.d)(e,t))))}}}},o5EQ:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i=r("c/eZ"),a=r("/SAa"),n=function(){function e(e,t,r){this.commanding={},this.hasError=e.error,this.errorMessage=e.errorMessage,this.innerError=e.innerError,this.working=e.loading,this.columns=r,this.sortedRecordIds=e.sortedRecordIds,this.records=t,this.sorting=e.sorting,this.filtering=e.filtering,this.linking=e.linking,this.paging=e.paging,this._dataSetParameter=e}return e.prototype.refresh=function(){throw new Error("Not Replaced")},e.prototype.generateAdditionalAttributes=function(){throw new Error("Not Replaced")},e.prototype.add_OnDataSetRecordChange=function(e){throw new Error("Not Replaced")},e.prototype.remove_OnDataSetRecordChange=function(e){throw new Error("Not Replaced")},e.prototype.addOnDataSetUpdated=function(e){throw new Error("Not Replaced")},e.prototype.removeOnDataSetUpdated=function(e){throw new Error("Not Replaced")},e.prototype.getTitle=function(){return this._dataSetParameter.getTitle()},e.prototype.getViewId=function(){return this._dataSetParameter.getViewId()},e.prototype.getTargetEntityType=function(){return this._dataSetParameter.getTargetEntityType()},e.prototype.getLookupDataSet=function(e){throw new Error("Not Replaced")},e.prototype.setSelectedRecordId=function(e,t){throw new Error("Not Replaced")},e.prototype.setSelectedRecords=function(e){throw new Error("Not Replaced")},e.prototype.clearSelectedRecord=function(){throw new Error("Not Replaced")},e.prototype.getSelectedRecord=function(){throw new Error("Not Replaced")},e.prototype.retrieveRecordCommand=function(e,t,r,i,a){throw new Error("Not Replaced")},e.prototype.openDatasetItem=function(e){throw new Error("Not Replaced")},e.prototype.setSelectedRecordIds=function(e){throw new Error("Not Replaced")},e.prototype.getSelectedRecordIds=function(){throw new Error("Not Replaced")},e.prototype.clearSelectedRecordIds=function(){throw new Error("Not Replaced")},e.prototype.getCellImageInfo=function(e,t){throw new Error("Not Replaced")},e.prototype.retrieveLookupRecordsBySearchString=function(e,t,r){throw new Error("Not Replaced")},e.prototype.retrieveLookupRecordsByIds=function(e,t,r){throw new Error("Not Replaced")},e}(),o=r("9r0m"),s=r("455M"),u=r("T0dC"),l=r("VcAV"),c=r("8xrh"),d=r("SSJn"),p=r("H9Ho"),h=function(){function e(e,t,r,i){this._errorMessage="",this._notifications={},this._columns=[],this._wrappedRecord=e,this._columnAliasNameMap=t,this._legacyRecordData=r,this._columns=i}return e.prototype.getWrappedRecord=function(){return this._wrappedRecord},e.prototype.getRecordId=function(){return this._wrappedRecord.getRecordId()},e.prototype.getNamedReference=function(){return this._wrappedRecord.getNamedReference()},e.prototype.getPrimaryEntityLogicalName=function(){return this.getNamedReference().LogicalName},e.prototype.getErrorMessage=function(){return this._errorMessage},e.prototype.setErrorMessage=function(e){this._errorMessage=e},e.prototype.getNotification=function(e){return this._notifications[e]?this._notifications[e]:this._wrappedRecord.getValidationError(e)},e.prototype.setNotification=function(e,t){this._notifications[e]=t},e.prototype._getColumnDataType=function(e){var t,r=l.b(this._columnAliasNameMap[e])?e:this._columnAliasNameMap[e],i=this._columns.find((function(e){return e.name===r}));return i&&(t=i.dataType),t},e.prototype.getValue=function(e){if(this._legacyRecordData){if(l.b(e))return null;if(l.b(this._columnAliasNameMap[e])||(e=this._columnAliasNameMap[e]),!this.getWrappedRecord().isValid(e)||null==this._legacyRecordData[e])return this._getColumnDataType(e)===s.a.LookupPartyList?Object(c.l)(this.getWrappedRecord().getValue(e)):this.getWrappedRecord().getValue(e);var t=this._legacyRecordData[e];if(t instanceof d.a){var r=this._getColumnDataType(e);if(r===s.a.OptionSet)return this._wrappedRecord.getValue(e);if(r===s.a.LookupSimple)return t.get_value()}return this._getColumnDataType(e)===s.a.LookupPartyList?Object(c.l)(this.getWrappedRecord().getValue(e)):this._getColumnDataType(e)===s.a.OptionSet?t.getValue("value"):t}return this._wrappedRecord.getValue(e)},e.prototype.getFormattedValue=function(e){return this._wrappedRecord.getFormattedValue(e)},e.prototype.setValue=function(e,t){throw new Error("Not replaced")},e.prototype.save=function(e){return this._wrappedRecord.save(e)},e.prototype.isDirty=function(){return this._wrappedRecord.isDirty()},e.prototype.isRecordValid=function(){return!this._errorMessage&&this._wrappedRecord.isRecordValid()},e.prototype.isEditable=function(e){return this._wrappedRecord.isEditable(e)},e.prototype.isSecured=function(e){return this._wrappedRecord.isSecured(e)},e.prototype.isReadable=function(e){return this._wrappedRecord.isReadable(e)},e.prototype.isValid=function(e){return this._wrappedRecord.isValid(e)},e.prototype.getFieldRequiredLevel=function(e){return this._wrappedRecord.getFieldRequiredLevel(e)},e.prototype.reformatValue=function(e){return this._wrappedRecord.reformatValue(e)},e.prototype.getCurrencyDecimalPrecision=function(e){return this._wrappedRecord.getCurrencyDecimalPrecision(e)},e.prototype.tryValidateColumns=function(e){var t,r=this;null===(t=this._columns)||void 0===t||t.forEach((function(t){var i;if(-1===(null===(i=t.name)||void 0===i?void 0:i.indexOf("."))&&t.name!==e&&!t.isHidden&&t.order>=0){var a=r.getValue(t.name);Object(p.b)(a)&&r._wrappedRecord.setValue(t.name,a)}}))},e}(),f=r("QAhb"),m=r("TCcM"),g=r("T2Xs"),v=r("j6Db"),b=r("Gemh"),y=r("yHpA"),O=r("qC0c"),_=r("cZkS"),P=v.a+".Models.DataSet.LegacyDataSetObjectWrapper",S=function(){function e(e,t,r){void 0===t&&(t=null),this._wrapper=null,this.previousDataSetParameter=null,this.previousLegacyDataSetParameter=null,this.controlMemoizedLegacyDataSetParameter=null,this._initializationActions=null,this._memoizedLookupWrappers={},this._recordChangeHandlers=[],this._dataSetChangeHandlers=[],this._previousRecords={},this._previousRowProperties={},this._previousHostOwnProps=null,this._previousPageInfo=null,this._isSetBlankValueValidationEnabled=!1,this.refreshDataSet=this.refreshDataSet.bind(this),this.gridRunOnLoad=this.gridRunOnLoad.bind(this),this._propKey=e,this._wrapper=new a.a(e,t,r),this._contextToken=r}return e.prototype._wrapDataSetRecords=function(e,t,r,i){var a={},n={};r&&r.forEach((function(e){n[e.alias]=e.name}));var s=this._previousHostOwnProps.configuration.Parameters[this._propKey],u=t.getTargetEntityType(),l=function(l){var c,d=void 0;if(s.DataProvider)d=t.records[l],c=new h(d,null,null,r);else{var p=(d=t.records[l]).getNamedReference(),g=new f.a(u,o.a.parse(p.id),p.name),v=i[l],b={};v&&r&&r.forEach((function(t){b[t.name]=Object(m.m)(e,g.etn,t.name,v.fields[t.name])})),c=new h(d,n,b,r)}r&&r.forEach((function(e){var t;if(e.alias){var r=e.alias;Object.assign(c,((t={})[r]=c.getValue(r),t))}})),a[l]=c};for(var c in t.records)l(c);return a},e.prototype.setLookupDataSetAttributes=function(e,t){this._wrapper.setLookupDataSetAttributes(e,t)},e.prototype.getPreviousQueryKey=function(){return this._wrapper.getPreviousQueryKey()},e.prototype.getUpdatedPropertiesDic=function(){return this._wrapper.getLegacyUpdatedPropertiesDic()},e.prototype.clearUpdatedPropertiesDic=function(){this._wrapper.clearLegacyUpdatedPropertiesDic()},e.prototype.isValidParameterConfiguration=function(e){return this._wrapper.isValidParameterConfiguration(e)},e.prototype.retrieveDataSetObject=function(e,t,r,a,o){try{this._isSetBlankValueValidationEnabled=Object(O.c)(e,_.zd),null!==t&&(this._previousHostOwnProps=t),null!==a&&(this._previousPageInfo=a);var l=this._wrapper.retrieveDataSetObject(e,this._previousHostOwnProps,this._previousHostOwnProps.configuration,this._previousPageInfo);if(this.previousDataSetParameter&&l===this.previousDataSetParameter)return this.controlMemoizedLegacyDataSetParameter||this.previousLegacyDataSetParameter&&this.previousLegacyDataSetParameter.working||(this.controlMemoizedLegacyDataSetParameter=this.previousLegacyDataSetParameter),this.previousLegacyDataSetParameter;this.previousDataSetParameter=l;var d=this._previousHostOwnProps.configuration.Parameters[this._propKey],p=Object(b.qb)(e,this._wrapper.getCurrentViewId(d),null==t?void 0:t.id),h=d.DataProvider&&!p,f=h||!this._wrapper.getIsColumnFirstMetadataReady()?l.columns:Object(c.m)(e,d,c.o,p,this._wrapper.getViewIdDocumentDic()),m=this._wrapper.getRecordsListById(e,this._previousHostOwnProps,this._previousHostOwnProps.configuration),g=this._wrapDataSetRecords(e,l,l.columns,m);this._dependentOptionSetColumnStatus=Object(b.y)(e,this._contextToken,this._previousHostOwnProps.id);var v=new n(l,g,f);if(l.columns&&!h)for(var y=function(r){var n=r.name,o=f.filter((function(e){return e.name===n}));if(!o||0===o.length){var l=Object(i.__assign)({},r);f.push(l)}if(S._wrapper.isEditableGrid(e))switch(r.dataType){case s.a.LookupSimple:S._memoizedLookupWrappers[n]||(S._memoizedLookupWrappers[n]=new u.a(n,S._contextToken,a));var c=S._memoizedLookupWrappers[n];c.updateParameterConfiguration(e,t,a,v),S._initializationActions&&c.ensureViewInitialization(S._initializationActions.retrieveViewAction)}},S=this,w=0,I=l.columns;w<I.length;w++){y(I[w])}return this.previousLegacyDataSetParameter=v,Object.defineProperty(this.previousLegacyDataSetParameter,"working",{get:function(){return l.loading},set:function(e){l.loading=e},enumerable:!0,configurable:!0}),this.previousLegacyDataSetParameter}catch(e){if(o){var j=this._previousHostOwnProps.configuration.CustomControlId.substring(this._previousHostOwnProps.configuration.CustomControlId.lastIndexOf(".")+1);o.EventManager.ReportComponentFailure(j,e,e.errorMessage,[{name:"APIName",value:P+".retrieveDataSetObject"},{name:"entityTypeName",value:this._previousPageInfo?this._previousPageInfo.entityTypeName:""},{name:"pageType",value:this._previousPageInfo?this._previousPageInfo.pageType:""},{name:"CustomControlId",value:this._previousHostOwnProps.configuration.CustomControlId},{name:"FormId",value:this._previousHostOwnProps&&this._previousHostOwnProps.formInfo?this._previousHostOwnProps.formInfo.FormId:""}])}throw e}},e.prototype.updateControlMemoizedParameter=function(e,t,r,i){this.controlMemoizedLegacyDataSetParameter?Object.assign(this.controlMemoizedLegacyDataSetParameter,t):t.working||(this.controlMemoizedLegacyDataSetParameter=t),this._triggerDataSetUpdatedEvents(e,t,r,i),(r||this.getUpdatedPropertiesDic().hasOwnProperty(a.b))&&this.triggerOnDataSetUpdated()},e.prototype._triggerDataSetUpdatedEvents=function(e,t,r,i){try{var n={},s=t.columns.map((function(e){return e.name}));for(var u in t.records)if(!r||!i||i.toUpperCase()===u.toUpperCase()){for(var l=t.records[u],d=l.getWrappedRecord(),p={},h={},f=0,m=s;f<m.length;f++){var v=m[f];d.isValid(v)||(p[v]=d.getValidationError(v)),h[v]={isValid:d.isValid(v),requiredLevel:this._wrapper.getRecordFieldRequiredLevel(e,d,v),isEditable:this._wrapper.getRecordFieldIsEditable(e,d,v)}}if(n[u]=h,this._previousRecords[u]){var b=this._previousRecords[u].getWrappedRecord();if(r){var O=this._previousRowProperties[u],_=Object(c.i)(e,this._wrapper,O,d,s);if(_.length){var S=this._createUpdateResult(2,l,_,p);this.triggerOnDataSetRecordChange(S)}var w=Object(c.h)(e,this._wrapper,O,d,s);if(w.length){var I=this._createUpdateResult(3,l,w,p);this.triggerOnDataSetRecordChange(I)}var j=Object(c.f)(O,d,s);if(j.length){var C=this._createUpdateResult(4,l,j,p);this.triggerOnDataSetRecordChange(C)}}var D=Object(c.g)(b,d,s);if(D.length){S=null;if(r)this._wrapper.getCurrentSnapshotIdMap().hasOwnProperty(u)?(S=this._createUpdateResult(1,l,D,p),this.triggerOnDataSetRecordChange(S)):(S=this._createUpdateResult(10,l,D,p),this.triggerOnDataSetRecordChange(S));else if(!r)if(this._wrapper.getCurrentSnapshotIdMap().hasOwnProperty(u)){var E=1;if(o.a.tryParseOrNull(u)){var T=this._wrapper.getRecordSnapshotId(e,this._previousHostOwnProps,this._wrapper.getEntityTypeName(),o.a.parse(u));if(T){var N=Object(y.b)(e,T);if(N.activeChanges)for(var F=0,R=D;F<R.length;F++){var A=R[F];if(!N.activeChanges.hasOwnProperty(A)){E=10;break}}else E=10}else E=10}S=this._createUpdateResult(E,l,D,p),this.triggerOnDataSetRecordChange(S),10===E&&(this._wrapper.setLegacyUpdatedPropertiesDic(a.b,!0),this._wrapper.setLegacyUpdatedPropertiesDic(""+a.c+u,!0))}else S=this._createUpdateResult(10,l,D,p),this.triggerOnDataSetRecordChange(S),this._wrapper.setLegacyUpdatedPropertiesDic(a.b,!0)}else if(b.isDirty()&&!d.isDirty()){S=this._createUpdateResult(10,l,D,p);this.triggerOnDataSetRecordChange(S)}}}this._wrapper.clearCurrentSnapshotIdMap(),this._previousRecords=t.records,this._previousRowProperties=n}catch(e){var k=[];k.push({name:"APIName",value:P},{name:"fromSetValue",value:r},{name:"fromSetRecordId",value:i}),g.a.error(P+": _triggerDataSetUpdatedEvents encountered error: "+e.message,k)}},e.prototype.setWrapperLoadingFlag=function(e){this._wrapper.getLatestData().loading=e,this._wrapper.setRefreshingStart()},e.prototype.getLatestData=function(){return this.previousLegacyDataSetParameter},e.prototype.setControlReRender=function(e){var t=this;this._wrapper.setControlReRender((function(){t.previousLegacyDataSetParameter.working=t._wrapper.getLatestData().loading,t.previousLegacyDataSetParameter.hasError=t._wrapper.getLatestData().error;var r=t._wrapper.getLatestData().errorMessage,i=r||"";r&&r.startsWith("0x")&&(i=r.substring(r.indexOf(" ")+1)),t.previousLegacyDataSetParameter.errorMessage=i,t.previousLegacyDataSetParameter.innerError=t._wrapper.getLatestData().innerError,e()}))},e.prototype.linkToParameter=function(e,t){var r=this,i=t.refreshDataSetParameter;for(var a in e.records){var n=e.records[a],o=n.getWrappedRecord();this._wrapper.linkRecordAPI(o,t),n.setValue=this._recordSetValueAPI.bind(this,o.setValue.bind(o),t,a,n.tryValidateColumns.bind(n))}e.refresh=function(){i(r,r._contextToken)},e.dependentOptionSetColumnStatus=this._dependentOptionSetColumnStatus,e.getLookupDataSet=this.getLookupDataSet.bind(this,e,t),e.generateAdditionalAttributes=this.generateAdditionalAttributes.bind(this),e.setSelectedRecordId=this._setSelectedRecordId.bind(this),e.setSelectedRecords=this._setSelectedRecords.bind(this),e.clearSelectedRecord=this._clearSelectedRecord.bind(this),e.getSelectedRecord=this._getSelectedRecord.bind(this,e),this._linkDataSetParameterEvents(e,t),e.openDatasetItem=t.openDatasetItem,e.setSelectedRecordIds=this._wrapper.setSelectedRecordIds.bind(this._wrapper),e.getSelectedRecordIds=this._wrapper.getSelectedRecordIds.bind(this._wrapper),e.clearSelectedRecordIds=this._wrapper.clearSelectedRecordIds.bind(this._wrapper);var s={},u=[];e.columns.forEach((function(e){s[e.name]=e,u.push(e.name)})),e.getCellImageInfo=this._getCellConditionalImage.bind(this,e.records,t.loadWebResource,s,u),e.addColumn=this._wrapper.addColumn.bind(this._wrapper),e.retrieveLookupRecordsBySearchString=this._retrieveLookupRecordsBySearchString.bind(this,t),e.retrieveLookupRecordsByIds=this._retrieveLookupRecordsByIds.bind(this,t),this._wrapper.linkPagingAPI(e.paging,t)},e.prototype._retrieveLookupRecordsBySearchString=function(e,t,r,i){return e.retrieveLookupRecordsBySearchString(t,r,i)},e.prototype._retrieveLookupRecordsByIds=function(e,t,r,i){return e.retrieveLookupRecordsByIds(t,r,i)},e.prototype._getCellConditionalImage=function(e,t,r,i,a,n,o){var s=r[a];return e&&e[n]&&s?this._wrapper.getConditionalImage(t,i,e[n],s.imageProviderWebresource,s.imageProviderFunctionName,o):Promise.resolve(null)},e.prototype._setSelectedRecordId=function(e,t){return this._wrapper.setSelectedRecordIds([e])},e.prototype._setSelectedRecords=function(e){var t=this;if(1===e.length&&this._memoizedLookupWrappers){var r={parentRecordId:e[0],parentRecordEntityTypeName:this.getEntityTypeName()};Object.keys(this._memoizedLookupWrappers).forEach((function(e){var i=t._memoizedLookupWrappers[e];i&&i.setParentRecordContext(r)}))}return this._wrapper.setSelectedRecordIds(e)},e.prototype._clearSelectedRecord=function(){return this._wrapper.clearSelectedRecordIds()},e.prototype._getSelectedRecord=function(e){return e.records[this._wrapper.getSelectedRecordIds()[0]]},e.prototype._recordSetValueAPI=function(e,t,r,i,a,n){return this._isSetBlankValueValidationEnabled&&i(a),e(a,n),t.updateControlMemoizedDataSet(this,t,r),Promise.resolve(!0)},e.prototype.generateAdditionalAttributes=function(){var e=Promise.resolve(!0);return e.always=function(t){return e.then(t,t)},e.done=function(t){return e.then(t)},e},e.prototype._linkDataSetParameterEvents=function(e,t){e.add_OnDataSetRecordChange=this.addOnDataSetRecordChange.bind(this),e.remove_OnDataSetRecordChange=this.removeOnDataSetRecordChange.bind(this),e.addOnDataSetUpdated=this.addOnDataSetUpdated.bind(this),e.removeOnDataSetUpdated=this.removeOnDataSetUpdated.bind(this)},e.prototype.addOnDataSetRecordChange=function(e){this._recordChangeHandlers.push(e)},e.prototype.removeOnDataSetRecordChange=function(e){for(var t=0;t<this._recordChangeHandlers.length;t++)this._recordChangeHandlers[t]===e&&this._recordChangeHandlers.splice(t,1)},e.prototype.triggerOnDataSetRecordChange=function(e){for(var t=0,r=this._recordChangeHandlers;t<r.length;t++){(0,r[t])(e)}},e.prototype.addOnDataSetUpdated=function(e){this._dataSetChangeHandlers.push(e)},e.prototype.removeOnDataSetUpdated=function(e){for(var t=0;t<this._dataSetChangeHandlers.length;t++)this._dataSetChangeHandlers[t]===e&&this._dataSetChangeHandlers.splice(t,1)},e.prototype.triggerOnDataSetUpdated=function(){for(var e=0,t=this._dataSetChangeHandlers;e<t.length;e++){(0,t[e])(this.getLatestData())}},e.prototype._createUpdateResult=function(e,t,r,i){var a=!0;return i&&Object.keys(i).length&&(a=!1),{resultType:e,recordId:t.getRecordId(),isSuccessful:a,isRecordSavedSuccessfully:a,affectedColumns:r,fieldErrorMessages:i||{},record:t}},e.prototype.resetControlMemoizedDataSet=function(){this.controlMemoizedLegacyDataSetParameter=null},e.prototype.getLookupDataSet=function(e,t,r){var i=this._memoizedLookupWrappers[r];return i.resetControlLockedDataSet(),t.retrieveDataSetLookupCellParameter(e,i,this._contextToken).then((function(e){return i.linkToParameter(e,t),e}))},e.prototype.gridRunOnLoad=function(e){this._wrapper.gridRunOnLoad(e)},e.prototype.refreshDataSet=function(e,t,r){var i=this;return this._wrapper.refreshDataSet(e,t,r).then((function(){return i}))},e.prototype.ensureDataInitialization=function(e){return this._initializationActions=e,this._wrapper.ensureDataInitialization(e)},e.prototype.applyDataSetInputs=function(e){return this._wrapper.applyDataSetInputs(e)},e.prototype.getParameterManifestType=function(){return this._wrapper.getParameterManifestType()},e.prototype.getEntityTypeName=function(){return this._wrapper.getEntityTypeName()},e.prototype.getUpdateFlag=function(){return this._wrapper.getUpdateFlag()},e}()},oj0s:function(e,t,r){"use strict";r.d(t,"b",(function(){return D})),r.d(t,"a",(function(){return E})),r.d(t,"d",(function(){return N})),r.d(t,"c",(function(){return C}));var i=r("9r0m"),a=r("i8/j"),n=r("Xlzu"),o=r("S2mk"),s=r("lRv2"),u=r("gBKR"),l=r("vYfn"),c=r("QAhb"),d=r("2OIc"),p=r("8aRo"),h=r("/j9Z"),f=r("PQ2H"),m=r("6q56"),g=r("cZkS"),v=r("qC0c"),b=r("+l2M"),y=r("U0B9"),O=r("zEjV"),_=r("HHlV"),P=r("JlqV"),S=r("HSdq"),w=r("lovT"),I=new i.a("06e9f7af-1f54-4681-8eec-1e21a1ceb465"),j=new i.a("e7a81278-8635-4d9e-8d4d-59480b391c5b");function C(e,t){var r=[{name:"formId",value:i.a.toString(e)},{name:"entityTypeName",value:t}];return{type:"loadFormDependencies.async",execute:function(i,n,o){var s=i.dispatch,l=i.getState,c=l(),d=Object(a.j)(c,e);return d?s(Object(u.f)(t,!1,Object(a.y)(c,e))).then((function(){var e=D(c=l(),s,d,t,n,o),r=s(Object(u.f)(t,!1,Object(p.b)(c,t,!1)));e.push(r);var i=function(e,t,r,i,a){var n=!0;null!=r.EntityLogicalName&&e&&e.metadata&&e.metadata.entities&&e.metadata.entities[r.EntityLogicalName]&&!e.metadata.entities[r.EntityLogicalName].IsBusinessProcessEnabled&&(n=!1);if(n){return T(e,t,["MscrmControls.Containers.ProcessBreadCrumb","MscrmControls.Containers.ProcessStageControl"],i,a)}return Promise.resolve()}(c,s,d,n,o);return e.push(i),Promise.all(e)})):(n.EventManager.ReportComponentFailure("Forms.LoadFormDependencies",Error("Invalid FormDescriptor in LoadFormDependencies"),void 0,r),Promise.reject(new h.a("No form descriptor found in state tree for specified formId.")))},getFailureParameters:function(e,t){return r}}}function D(e,t,r,a,n,o){var u=[];for(var l in r.Controls){var c=r.Controls[l];if(!i.a.isNullOrEmpty(c.ClassId)&&!i.a.equals(c.ClassId,b.G)){var d=E(e,t,r,l,c,Object(s.b)(e,a,c),c.ClassId&&i.a.toString(c.ClassId),n,o);u.push(d)}}return u}function E(e,t,r,a,n,s,l,c,d){var p,h,f=n.Parameters,b=Object(m.g)(e,r,n,f);if(Object(v.c)(e,g.y)&&b){var O=[T(e,t,[h="MscrmControls.Chart.ChartControl"],c,d)];return Promise.all(O)}if(n.UniqueId!==i.a.EMPTY.guid&&!i.a.equals(n.ClassId,I)){var P=r.ControlConfigurations[n.UniqueId],S=Object(y.b)(e);P&&P.CustomControls&&P.CustomControls[S]&&(h=(p=P.CustomControls[S]).Name)}p||(h="notescontrol"===(p=Object(o.q)(a,n.DataFieldName,s,n,r.EntityLogicalName,l)).Name?"MscrmControls.TimelineWallControl.TimelineWall":Object(o.z)(p));var C=[T(e,t,function(e,t){if(Object(v.c)(e,g.jd)&&t===_.a)return[t,_.g];if(Object(w.d)(e)&&t===_.f)return[t,_.g];return t===_.c?[t,_.b,_.h]:[t]}(e,h),c,d)];if(i.a.equals(new i.a(l),j)&&n.Parameters){var D=n.Parameters.TargetEntityType;C.push(t(Object(u.f)(D,!1,[])).catch((function(){})))}return Promise.all(C)}function T(e,t,r,i,a){for(var o=[],s=0,u=r;s<u.length;s++){var l=u[s];Object(d.e)(e,l)||o.push(l)}return o.length>0?t(Object(n.b)("customcontrol",null,null,null,!1,O.a.OnDemandWithoutContext,null,null,o,null)).catch((function(e){var t=[{name:"CorrelationId",value:a.correlationId},{name:"ContextId",value:a.contextId},{name:"ActionStack",value:a.stack}];i.TraceManager.getTracer("Forms.LoadFormDependencies").warn("Getting client metadata has failed.",t)})):Promise.resolve()}function N(e,t,r,i){var a,n=[];for(var o in t){var s=t[o],u=!Object(P.b)(r),d=void 0;d=u?Object(S.Xb)(r):new Set(Object.keys(s));var p=function(t){if(u&&d&&!d.has(t))return null===(a=i.TraceManager.getTracer("Forms.LoadFormDependencies"))||void 0===a||a.warn("Quick form entity is not included in offline profile.Skipping loading descriptor when offline ."),"continue";var r=s[t],o=e(Object(l.b)(new c.a(t),r,Object(f.a)(6))).then((function(){return e(C(r,t))}));n.push(o)};for(var h in s)p(h)}return Promise.all(n)}},"pOv+":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var i=r("9r0m").a.EMPTY;
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */},phfH:function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"h",(function(){return h}));var i=r("TCcM"),a=r("F2uj");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function n(e,t){return e&&e.businessProcessFlowData&&e.businessProcessFlowData.dataById&&e.businessProcessFlowData.dataById.hasOwnProperty(t.guid)?e.businessProcessFlowData.dataById[t.guid]:null}function o(e,t){var r=n(e,t);return r&&r.selectedStageId?r.selectedStageId:null}function s(e,t){var r=n(e,t);return r&&r.actionLogCollection?r.actionLogCollection:null}function u(e,t){var r=n(e,t);return r&&r.activePath?r.activePath:null}function l(e){return e&&e.businessProcessFlowData&&e.businessProcessFlowData.displayState?e.businessProcessFlowData.displayState:null}function c(e,t){var r=n(e,t);return r&&r.processNavigationBehavior&&r.processNavigationBehavior.navigationBehavior?r.processNavigationBehavior.navigationBehavior:null}function d(e,t){var r=n(e,t);return r&&r.processNavigationBehavior&&r.processNavigationBehavior.navigationBehaviorPageId?r.processNavigationBehavior.navigationBehaviorPageId:null}function p(e,t){var r=c(e,t);return r&&r.allowCreateNew?c(e,t).allowCreateNew:null}function h(e,t,r,n){var o=Object(a.a)(t,r,n);if(o)switch(o.Type){case"boolean":return!e||"1"!==e.valueString;default:return Object(i.z)(e,t,r,n)}return Object(i.z)(e,t,r,n)}},qFBg:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r("c/eZ"),a=r("Fas2"),n=r("3pZv"),o=r("e2pn"),s=r("RImw"),u=r("QAhb"),l=r("5ZFm"),c=r("QS6j"),d=r("pdGj"),p=r("nBkV");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function h(e,t,r,h,m,g,v,b,y,O,_,P){if(!e||!e.commands||void 0===e.commands[r]||null===e.commands[r])return Promise.reject(void 0);var S=Object(a.k)(e,r),w=Object(s.c)(e,r);b&&m.length>0&&1===m.length&&m.map((function(e){e.etn!==w.EntityLogicalName&&(w.EntityId=e.id,w.EntityLogicalName=e.etn)}));var I=Object(i.__assign)({},w);_&&(I.CustomControlType=_);var j=m.map((function(e){return{EntityReference:e}})),C=w.SelectedItems.map((function(e){return e.EntityReference})),D=!0===P||!1===P?P:!Object(l.a)(C,m,u.a.equals);return I.SelectedItems=j,function(e,t,r,i,n,o,s,u,l){if(i)return u(Object(c.e)(t,r,n,o,s)).then((function(t){return Object(a.c)(e,t,n,o,r.SelectedItems.length>0)}));var p=Object(d.d)(e,o);return Promise.resolve(Object(a.c)(e,p,n,o,r.SelectedItems.length>0))}(e,S,I,D,t,r,h,g).then((function(a){var s=[];if(v&&v.length>0)v.forEach((function(e){if(a[e]){var i=a[e].Priority;if(!y||null!=i){var n=Object(o.a)(S,I,a[e].CommandType,a[e].CommandId,a[e].ControlId,t,r,h),u={commandId:a[e].CommandId,commandButtonId:e,execute:n,label:a[e].LabelText,canExecute:a[e].CanExecute,shouldBeVisible:a[e].ShouldBeVisible,icon:a[e].Icon,tooltip:a[e].Tooltip,children:[]};s.push(u)}}}));else if(O){(function(e,t,r,a,n,o,s){var u=[],l=[],c=new Array;t.Layout.Tabs.Tab&&(c=c.concat(t.Layout.Tabs.Tab));t.Layout.ContextualTabs.Tab&&(c=c.concat(t.Layout.ContextualTabs.Tab));c.forEach((function(t){t&&t.Groups&&t.Groups.Group&&t.Groups.Group.forEach((function(t){t.Controls.Items.forEach((function(t){var r=Object(p.a)(e,o,t.Id);r&&((t=Object(i.__assign)({},t)).Menu=r),l.push(t)}))}))}));for(;l.length>0;){var d=f(l.pop(),r,t,a,n,o,s);d&&u.push(d)}return u})(e,S,a,I,t,r,h).forEach((function(e){s.push(e)}))}else for(var u in a)if(a[u].CanExecute){var l=a[u].Priority;if(!y||null!=l){var c=Object(o.a)(S,I,a[u].CommandType,a[u].CommandId,a[u].ControlId,t,r,h),d={commandId:a[u].CommandId,commandButtonId:u,execute:c,label:Object(n.b)(a[u].LabelText),canExecute:a[u].CanExecute,shouldBeVisible:a[u].ShouldBeVisible,icon:a[u].Icon,tooltip:a[u].Tooltip,children:[]};s.push(d)}}return y&&function(e,t){var r=[e];for(;r.length>0;){var i=r.pop();i.sort(t),i.forEach((function(e){e.children&&e.children.length>0&&r.push(e.children)}))}}(s,(function(e,t){var r=a[e.commandButtonId].Priority,i=a[t.commandButtonId].Priority;return r<i?-1:r>i?1:0})),s}))}function f(e,t,r,i,s,u,l){var c=null,d=e&&e.Id&&Object(a.i)(e.Id,null==i?void 0:i.ContextEntityLogicalName);if(e&&e.Id&&d&&t[d]){var p=Object(o.a)(r,i,t[d].CommandType,t[d].CommandId,t[d].ControlId,s,u,l);c={commandId:t[d].CommandId,commandButtonId:d,execute:p,label:Object(n.b)(t[d].LabelText),canExecute:t[d].CanExecute,shouldBeVisible:t[d].ShouldBeVisible,icon:t[d].Icon,tooltip:t[d].Tooltip,children:[],controlType:e.ControlType},"Menu"in e&&e.Menu&&e.Menu.MenuSection&&e.Menu.MenuSection.forEach((function(e){e.Item&&e.Item.Items&&e.Item.Items.forEach((function(e){var a=f(e,t,r,i,s,u,l);a&&c.children.push(a)}))}))}return c}},qYad:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r("Eoze"),a=r("Sscr"),n=r("yZTI"),o=r("2nMH"),s=r("HSdq");function u(e,t,r,u){var l=[{name:"pageId",value:e},{name:"numRefreshColumns",value:r?r.length:null}];return{type:"refreshdataandtriggeronchange.async",execute:function(c,d,p){var h=c.dispatch,f=c.getState,m=f();return h(Object(i.c)(t,r,u)).then((function(){var r=f();if(!Object(n.n)(r,e)||Object(s.Eb)(r,e)){var i=Object(a.j)(f(),e);return h(Object(o.a)(e,m,i,t.etn,t.id)).then((function(){return d.EventManager.ReportComponentSuccess("Forms.RefreshDataAndTriggerOnChange",l),Promise.resolve()}),(function(e){return l.push({name:"originalErrorForTriggerOnchangeHandlers",value:JSON.stringify(e)}),d.EventManager.ReportComponentFailure("Forms.RefreshDataAndTriggerOnChange",e,null,l),Promise.reject(e)}))}return d.EventManager.ReportComponentSuccess("Forms.RefreshDataAndTriggerOnChange",l),Promise.resolve()}),(function(e){return l.push({name:"originalErrorForRefreshRecordData",value:JSON.stringify(e)}),d.EventManager.ReportComponentFailure("Forms.RefreshDataAndTriggerOnChange",e,null,l),Promise.reject(e)}))},getFailureParameters:function(e,t){return l}}}},r4Uk:function(e,t,r){"use strict";r.d(t,"a",(function(){return ne}));var i=r("455M"),a=r("i8/j"),n=r("w1wa"),o=function(){function e(e){Object.assign(this,e)}return e.prototype.getTimelineWallData=function(){throw new Error("Not Replaced")},e.prototype.getCommands=function(){throw new Error("Not Replaced")},e.prototype.getEntityAttributes=function(){throw new Error("Not Replaced")},e}(),s=r("3OsR"),u=r("B3Il"),l=r("ME4N"),c=r("JlqV"),d=r("rcZN"),p=r("aUuu"),h=r("c56u"),f=r("qC0c"),m=r("ildB"),g=r("9uN/"),v=r("2IT6");function b(e){return{type:"SERIALIZE_RETRIEVE_PERSONAL_WALL_REQUEST_ASYNC",execute:function(t,r){t.dispatch;var i=t.getState,a=e.get_pageNumber(),n=e.get_pageSize(),o=i(),s=e.get_commentsPerPost(),u=e.get_startDate(),l=e.get_endDate(),c=e.get_type(),d=e.get_source(),p=e.get_sortDirection(),h=e.get_keyword()||null;return Promise.resolve(
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function(e,t,r,i,a,n,o,s,u,l){return{urlParameters:"posts/Microsoft.Dynamics.CRM.RetrievePersonalWall(PageNumber="+t+",PageSize="+r+",CommentsPerPost="+i+",StartDate="+a+",EndDate="+n+",Type="+o+",Source="+s+",SortDirection="+u+(Object(g.b)(e)&&l?",Keyword=@keyword)?@keyword="+encodeURIComponent("'"+l+"'"):")"),method:"GET",additionalHeaders:{Accept:v.a,"Content-Type":"application/json; charset=utf-8",Prefer:"odata.include-annotations=*","OData-MaxVersion":"4.0","OData-Version":"4.0"}}}(o,a,n,s,u,l,c,d,p,h))}}}var y=r("lMVv");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function O(e,t,r,i){return Object(g.b)(e)&&t?",Keyword=@keyword)?@tid="+_(r,i,e)+"&@keyword="+encodeURIComponent("'"+t+"'"):")?@tid="+_(r,i,e)}function _(e,t,r){return null===e||null===t?"null":"{'@odata.id':'"+Object(y.o)(r,t)+"("+e.toString()+")'}"}function P(e){return{type:"SERIALIZE_RETRIEVE_RECORD_WALL_REQUEST_ASYNC",execute:function(t,r){t.dispatch;var i=t.getState,a=e.get_pageNumber(),n=e.get_pageSize(),o=i(),s=e.get_commentsPerPost(),u=e.get_startDate(),l=e.get_endDate(),c=e.get_type(),d=e.get_source(),p=e.get_sortDirection(),h=e.get_entity(),f=e.get_keyword();return Promise.resolve(function(e,t,r,i,a,n,o,s,u,l,c){return{urlParameters:"posts/Microsoft.Dynamics.CRM.RetrieveRecordWall(Entity=@tid,PageNumber="+t+",PageSize="+r+",CommentsPerPost="+i+",StartDate="+a+",EndDate="+n+",Type="+o+",Source="+s+",SortDirection="+u+O(e,c,l.Id,l.LogicalName),method:"GET",additionalHeaders:{Accept:v.a,"Content-Type":"application/json; charset=utf-8",Prefer:"odata.include-annotations=*","OData-MaxVersion":"4.0","OData-Version":"4.0"}}}(o,a,n,s,u,l,c,d,p,h,f))}}}var S=r("r0s4");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function w(e,t,r,i){var a="null",n=!1;return t&&t.LogicalName&&(a=function(e,t,r){return null===e||null===t?"null":"{'@odata.id':'"+Object(y.o)(r,t)+"("+e.toString()+")'}"}(t.Id,t.LogicalName,e),e&&e.metadata&&e.metadata.entities&&e.metadata.entities[t.LogicalName]&&(n=e.metadata.entities[t.LogicalName].IsActivityParty)),{urlParameters:"activitypointers/Microsoft.Dynamics.CRM.RetrieveTimelineWallRecords(FetchXml=@xml,Target=@id,RollupType=@rollupType)?@id="+(-1===i&&n?null:a)+"&@xml='"+Object(S.CrmUrlEncode)(r)+"'&@rollupType="+i,method:"GET",additionalHeaders:{Accept:v.a,"Content-Type":"application/json; charset=utf-8",Prefer:"odata.include-annotations=*","OData-MaxVersion":"4.0","OData-Version":"4.0"}}}function I(e){return{type:"SERIALIZE_RETRIEVE_TIMELINE_WALL_RECORDS_REQUEST_ASYNC",execute:function(t,r){t.dispatch;var i=t.getState,a=e.get_target(),n=e.get_fetchXml(),o=i(),s=e.get_rollupType();return Promise.resolve(w(o,a,n,s))}}}var j=r("c/eZ"),C=r("Eno9"),D=function(e){function t(t){var r=e.call(this,"RetrievePersonalWall")||this;return r._entityCollection=t,r}return Object(j.__extends)(t,e),t.prototype.get_entityCollection=function(){return this._entityCollection},t}(C.a);function E(e,t){return{type:"DESERIALIZE_RETRIEVE_PERSONAL_WALL_RESPONSE_ASYNC",execute:function(t,r){t.dispatch,t.getState;return e.json().then((function(e){return new D(e.value)}))}}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var T=function(e){function t(t){var r=e.call(this,"RetrieveRecordWall")||this;return r._entityCollection=t,r}return Object(j.__extends)(t,e),t.prototype.get_entityCollection=function(){return this._entityCollection},t}(C.a);function N(e,t){return{type:"DESERIALIZE_RETRIEVE_RECORD_WALL_RESPONSE_ASYNC",execute:function(t,r){t.dispatch,t.getState;return e.json().then((function(e){return new T(e.value)}))}}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var F=function(e){function t(t){var r=e.call(this,"RetrieveTimelineWallRecords")||this;return r._timelineWallRecords=t,r}return Object(j.__extends)(t,e),t.prototype.get_timelineWallRecords=function(){return this._timelineWallRecords},t}(C.a);function R(e,t){return{type:"DESERIALIZE_RETRIEVE_TIMELINE_WALL_RECORDS_RESPONSE_ASYNC",execute:function(t,r){t.dispatch,t.getState;return Promise.resolve(e.json().then((function(e){return new F(e.TimelineWallRecords)})))}}}var A=r("tvev"),k=r("4+rf"),M=r("EFYa"),L=r("MSdU"),V=r("65mv"),x=r("kVdw"),B=function(e){function t(t,r,i){var a=e.call(this)||this;return a._fetchXml=null,a._rollupType=0,a._target=null,a._set_fetchXml(t),a._set_target(r),a._rollupType=i,a}return Object(j.__extends)(t,e),t.prototype.get_name=function(){return"RetrieveTimelineWallRecords"},t.prototype.get_xmlNamespace=function(){return"http://schemas.microsoft.com/xrm/7.1/Contracts"},t.prototype.get_target=function(){return this._target},t.prototype._set_target=function(e){return this._target=e,e},t.prototype.get_fetchXml=function(){return this._fetchXml},t.prototype._set_fetchXml=function(e){return this._fetchXml=e,e},t.prototype.get_rollupType=function(){return this._rollupType},t}(x.a),U=r("Ev4I"),z=function(e){function t(t,r,i,a,n,o,s,u,l,c){var d=e.call(this)||this;return d._entity=null,d._pageNumber=0,d._pageSize=0,d._commentsPerPost=0,d._startDate=null,d._endDate=null,d._type=0,d._source=0,d._sortDirection=!1,d._entity=t,d._pageNumber=r,d._pageSize=i,d._commentsPerPost=a,d._startDate=n,d._endDate=o,d._type=s,d._source=u,d._sortDirection=l,d._keyword=c,d}return Object(j.__extends)(t,e),t.prototype.get_name=function(){return"RetrieveRecordWall"},t.prototype.get_xmlNamespace=function(){return"http://schemas.microsoft.com/xrm/7.1/Contracts"},t.prototype.get_entity=function(){return this._entity},t.prototype.get_pageNumber=function(){return this._pageNumber},t.prototype.get_pageSize=function(){return this._pageSize},t.prototype.get_commentsPerPost=function(){return this._commentsPerPost},t.prototype.get_startDate=function(){return this._startDate},t.prototype.get_endDate=function(){return this._endDate},t.prototype.get_type=function(){return this._type},t.prototype.get_source=function(){return this._source},t.prototype.get_sortDirection=function(){return this._sortDirection},t.prototype.get_keyword=function(){return this._keyword},t}(x.a),W=function(e){function t(t,r,i,a,n,o,s,u,l){var c=e.call(this)||this;return c._pageNumber=0,c._pageSize=0,c._commentsPerPost=0,c._startDate=null,c._endDate=null,c._type=0,c._source=0,c._sortDirection=!1,c._keyword=null,c._set_pageNumber(t),c._set_pageSize(r),c._set_commentsPerPost(i),c._set_startDate(a),c._set_endDate(n),c._set_type(o),c._set_source(s),c._set_sortDirection(u),c._set_keyword(l),c}return Object(j.__extends)(t,e),t.prototype.get_name=function(){return"RetrievePersonalWall"},t.prototype.get_pageNumber=function(){return this._pageNumber},t.prototype._set_pageNumber=function(e){return this._pageNumber=e,e},t.prototype.get_pageSize=function(){return this._pageSize},t.prototype._set_pageSize=function(e){return this._pageSize=e,e},t.prototype.get_commentsPerPost=function(){return this._commentsPerPost},t.prototype._set_commentsPerPost=function(e){return this._commentsPerPost=e,e},t.prototype.get_startDate=function(){return this._startDate},t.prototype._set_startDate=function(e){return this._startDate=e,e},t.prototype.get_endDate=function(){return this._endDate},t.prototype._set_endDate=function(e){return this._endDate=e,e},t.prototype.get_type=function(){return this._type},t.prototype._set_type=function(e){return this._type=e,e},t.prototype.get_source=function(){return this._source},t.prototype._set_source=function(e){return this._source=e,e},t.prototype.get_sortDirection=function(){return this._sortDirection},t.prototype._set_sortDirection=function(e){return this._sortDirection=e,e},t.prototype.get_keyword=function(){return this._keyword},t.prototype._set_keyword=function(e){return this._keyword=e,e},t}(x.a);function q(e){return{type:"timelinewall.data.retrieve.async",execute:function(t,r){var i=t.dispatch,a=(t.getState,r.DataSource.get_WebAPIService()),n=s.a.Data;return void 0!==e.queueTypeToRequestMap[s.a.Filters]&&null!==e.queueTypeToRequestMap[s.a.Filters]?n=s.a.Filters:void 0!==e.queueTypeToRequestMap[s.a.WhatsChanged]&&null!==e.queueTypeToRequestMap[s.a.WhatsChanged]?n=s.a.WhatsChanged:void 0!==e.queueTypeToRequestMap[s.a.MoreEmails]&&null!==e.queueTypeToRequestMap[s.a.MoreEmails]&&(n=s.a.MoreEmails),i(Object(m.n)(e,n)),i(function(e,t,r){return{type:"timelinewall.data.retrieve.nextpage.async",execute:function(i,a){var n=i.dispatch,o=i.getState,u=a.DataSource,c=o(),d=t,p=Object.keys(d.queueTypeToRequestMap).sort(),h=[],f="FetchXML",v="FetchXMLs",b="PostImageFetchXml";if(r!==s.a.Data&&r!==s.a.MoreEmails&&(h=Object.keys(t.queueTypeToRequestMap[r].dataMap[v])),Object(g.c)(c)){if(Object(U.l)(c,l.b.Notes)&&Object(U.l)(c,l.b.User)&&d.queueTypeToRequestMap[m.g]&&d.queueTypeToRequestMap[m.g].isEnabled){var y=d.queueTypeToRequestMap[m.g].dataMap[f];return Xrm.WebApi.retrieveMultipleRecords(l.b.Notes,"?fetchXml="+y).then((function(e){n(Object(m.p)({isError:!1,errorMessage:"",errorLocalizedMessage:"",errorCode:"",dataResults:e.entities},t.controlId,m.g))}),(function(e){n(Object(m.p)({isError:!0,errorMessage:e.message,errorLocalizedMessage:"",errorCode:e.errorCode,dataResults:null},t.controlId,m.g))}))}return Promise.resolve()}for(var O=[],_="",P=0;P<p.length;P++){_=p[P];var S=d.queueTypeToRequestMap[_];if(S.isEnabled)if(r!==s.a.Data&&r!==s.a.MoreEmails)for(var w=0;w<h.length;w++){var I;(I=Q(e,S,_,c,A.a.tryCreate(t.recordId),t.recordEntityName,w,h))&&O.push(I)}else(I=Q(e,S,_,c,A.a.tryCreate(t.recordId),t.recordEntityName))&&O.push(I)}var j=!1;r!==s.a.WhatsChanged&&r!==s.a.Filters||(j=!0);var C=u.get_WebAPIService().Execute(new k.a(O,new M.a(j,!0)),null).then((function(i){var o=i.get_responses(),v={},y=!1,O="",P=function(i){var P=o[i];if(r!==s.a.Data&&r!==s.a.MoreEmails){if(_=h[i],(r===s.a.WhatsChanged||r===s.a.Filters)&&null===P.get_response()&&null!==P.get_fault())if(P.get_fault().get_errorCode()===l.a);else{try{P.get_fault().get_message()&&(O=P.get_fault().get_message())}catch(e){O=e.message}y=!0,Object(g.d)(P,a,"TimelineWall.retrieveTimelineWallData","timelinewall.data.retrieve.nextpage.async",O)}v[_]=P}else if((_=p[i])===l.k){var S=function(e){var t=[],r=[],i=e.get_response();if(i){var a=i.get_entityCollection();if(null!=a)for(var n=0,o=a;n<o.length;n++){var s=o[n];if(2===s.source){var u=s["_createdby_value"];-1===r.indexOf(u)&&r.push(u)}t.push(s.postid)}}return{userIds:r,postIds:t}}(P),w=S.userIds,I=function(e,t,r,i,a,n,o,s,u){var c=[];if(e&&e.length>0&&n.queueTypeToRequestMap[u].dataMap[r]&&null!==n.queueTypeToRequestMap[u].dataMap[r]){n.queueTypeToRequestMap[u].dataMap[r]=G(n.queueTypeToRequestMap[u].dataMap[r],e);var d=Q(a,n.queueTypeToRequestMap[u],l.l,o,A.a.tryCreate(s.recordId),s.recordEntityName);c.push(d)}if(t&&t.length>0&&n.queueTypeToRequestMap[u].dataMap[i]&&null!==n.queueTypeToRequestMap[u].dataMap[i]){n.queueTypeToRequestMap[u].dataMap[i]=G(n.queueTypeToRequestMap[u].dataMap[i],t);var p=Q(a,n.queueTypeToRequestMap[u],l.m,o,A.a.tryCreate(s.recordId),s.recordEntityName);c.push(p)}return c}(S.postIds,w,f,b,e,d,c,t,_);if(I.length>0)return{value:u.get_WebAPIService().Execute(new k.a(I,new M.a(!1,!0)),null).then((function(e){for(var r=e.get_responses(),i=[P.get_response()],a=0;a<r.length;a++)i.push(r[a].get_response());n(Object(m.p)({isError:!1,errorMessage:"",errorLocalizedMessage:"",errorCode:"",dataResults:i},t.controlId,_))}),(function(e){var r="";try{e&&e.reason&&(r=e.reason.get_localizedMessage())}catch(e){r=e.message}Object(g.d)(e,a,"TimelineWall.retrieveTimelineWallData","timelinewall.data.retrieve.nextpage.async",r),n(Object(m.p)({isError:!0,errorMessage:O,errorLocalizedMessage:"",errorCode:"",dataResults:null},t.controlId,_))}))};n(Object(m.p)({isError:!1,errorMessage:"",errorLocalizedMessage:"",errorCode:"",dataResults:P.get_response()},t.controlId,_))}else n(Object(m.p)({isError:!1,errorMessage:"",errorLocalizedMessage:"",errorCode:"",dataResults:P.get_response()},t.controlId,_))};for(var S in o){var w=P(S);if("object"==typeof w)return w.value}r!==s.a.Data&&r!==s.a.MoreEmails&&n(y?Object(m.p)({isError:!0,errorMessage:O,errorLocalizedMessage:"",errorCode:"",dataResults:null},t.controlId,r):Object(m.p)({isError:!1,errorMessage:"",errorLocalizedMessage:"",errorCode:"",dataResults:v},t.controlId,r))}),(function(e){var r="",i="",o="";try{if(e)if(e.reason)r=null!=e.reason.get_message()?e.reason.get_message():e.reason.get_organizationServiceFault().get_messages().get_Items().toString();else{r=null!=e.get_message()?e.get_message():"",i=null!=e.get_localizedMessage()?e.get_localizedMessage():"";var s=e.get_error()?JSON.parse(e.get_error()):"";o=s?s.error.code:""}}catch(e){r=e.message}Object(g.d)(e,a,"TimelineWall.retrieveTimelineWallData","timelinewall.data.retrieve.nextpage.async",r),n(Object(m.p)({isError:!0,errorMessage:r,errorLocalizedMessage:i,errorCode:o,dataResults:null},t.controlId,_))}));return Promise.resolve(C)}}}(a,e,n)).then((function(){i(Object(m.o)(e.controlId,n,2,e.requestId))})),Promise.resolve()}}}function G(e,t){for(var r,i=0;i<t.length;i++)r=void 0===r?"<value>"+t[i]+"</value>":r+"<value>"+t[i]+"</value>";return String.format(e,r)}function Q(e,t,r,i,a,n,o,u){var c;switch(r){case m.h:var d=!0===Object(f.b)(i,l.t.TimelineWallUserPosts)?t.dataMap.Source||null:1;return!0===t.dataMap.IsDashboardContext?(K(e,"RetrievePersonalWall",b,E),c={pageNumber:t.dataMap.PageNumber,pageSize:t.dataMap.PageSize,commentsPerPost:t.dataMap.CommentsPerPost,startDate:t.dataMap.StartDate,endDate:t.dataMap.EndDate,type:null,source:d,sortDirection:t.dataMap.SortDirection,keyword:t.dataMap.Keyword},new W(c.pageNumber,c.pageSize,c.commentsPerPost,c.startDate,c.endDate,c.type,c.source,c.sortDirection,c.keyword)):(K(e,"RetrieveRecordWall",P,N),function(e){return new z(e.entity,e.pageNumber,e.pageSize,e.commentsPerPost,e.startDate,e.endDate,e.type,e.source,e.sortDirection,e.keyword)}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */({entity:new L.a(n,a),pageNumber:t.dataMap.PageNumber,pageSize:t.dataMap.PageSize,commentsPerPost:t.dataMap.CommentsPerPost,startDate:t.dataMap.StartDate,endDate:t.dataMap.EndDate,type:null,source:d,sortDirection:t.dataMap.SortDirection,keyword:t.dataMap.Keyword}));case s.a.MoreEmails:case m.a:return H(e,t,t.dataMap.FetchXML,a,n);case m.g:var p="FetchXML",h=t.dataMap[p];return new V.a(h);case l.l:p="FetchXML",h=t.dataMap[p];return new V.a(h);case l.m:p="PostImageFetchXml",h=t.dataMap[p];return new V.a(h);case s.a.Filters:case s.a.WhatsChanged:p="FetchXMLs";var g=t.dataMap[p][u[o]];if(h=g.fetchXml){var v=g.requestType;if("RetrieveMultipleRequest"===v)return new V.a(h);if("RetrieveTimelineWallRecordsRequest"===v)return H(e,t,h,a,n)}return null}}function H(e,t,r,i,a){var n=t.dataMap.IsDashboardContext;K(e,"RetrieveTimelineWallRecords",I,R);var o=n?null:new L.a(a,i);return new B(r,o,t.dataMap.RollupType)}function K(e,t,r,i){e.requestSerializers.hasOwnProperty(t)||(e.requestSerializers[t]=r),e.responseDeserializers.hasOwnProperty(t)||(e.responseDeserializers[t]=i)}var X=r("qFBg"),Y=r("yrP7"),Z=r("sOTk"),J=r("j6Db"),$=r("OTOS"),ee=r("T4u8");var te=r("Sscr"),re=r("h82J");var ie=r("1GLu"),ae=r("lokH"),ne=function(){function e(e,t,r){this.objectWrapperType=3,this.previousReturn=new o({timelineWallData:null,timelineWallConfiguration:null,contextType:null,controlId:null,entitiesMetadata:null,getTimelineWallData:null,getCommands:null,getEntityAttributes:null,isMultiSessionNavigationType:null}),this._isServerAvailable=null,this._upSyncStatus=null,this._propKey=t,this._pageId=r,this._retrieveTimelineWallData=function(t){return e(q(t))},this._retrieveTimelineCommands=function(t,i,a,n,o){return e(function(e,t,r,i,a){return{type:"retrieve.timelineRecordCommand.async",execute:function(n,o){var s=n.dispatch,u=null,l=(0,n.getState)(),c=Object(Z.g)(l,e);if("dashboard"===c.pageType){var d=c.dashboardId;d||(d=c.etn?Object(ee.e)(l,c.etn):Object($.b)(l,e)),u=d.guid+":notescontrol"}else u=c.entityTypeName+":notescontrol";return Object(X.a)(l,e,t,u,r,s,i,!0,a).then((function(e){return Object(Y.d)(e,s)}),(function(e){var r="Retrieve Timeline record commands failure error message";o.EventManager.ReportComponentFailure("TimelineWall.CustomControl.retrieveTimelineCommands",{name:"error",message:r},r,[{name:"APIName",value:J.a+".Actions.RetrieveTimelineCommands"},{name:"Action",value:"retrieve.timelineRecordCommand.async"},{name:"CommandMangerId",value:t}])}))}}}(r,i,a,n,o))},this._getEntityAttributes=function(){return e((t=r,{type:"getentityattributes.async.action",execute:function(e,r,i){var a=e.dispatch,n=(0,e.getState)(),o=Object(te.j)(n,t);if(null!==t&&null!==o){var s=a(Object(re.b)(t,o));if(s&&s.data&&s.data.entity)return s.data.entity.attributes}return null},sync:!0}));var t}}return e.prototype.linkToParameter=function(e,t){e.getTimelineWallData=this._retrieveTimelineWallData,e.getCommands=this.executeRetrieveTimelineWallCommandAction.bind(this),e.getEntityAttributes=this._getEntityAttributes},e.prototype.retrieveTimelineWallObject=function(e,t,r,i,c){var d=r.Parameters[this._propKey];if(this.isParameterOfTimelineWallType(d)){var p=Object($.b)(e,t.id),h=Object(u.b)(i,t.controlId),f=Object(a.b)(e,t.id,p,h);t&&t.descriptor&&f.Label!==t.descriptor.Label&&(f.Parameters[l.s.Label]=t.descriptor.Label);var g=e.data;if(!i.isPreview||!g.timelineWalls||g.timelineWalls[f.LabelId]&&g.timelineWalls[f.LabelId].requestStatusMap){var v=Object(n.a)(e,f.LabelId),b=Object(u.c)(e,f,i,d,v,c);v.target&&(!v.target||v.target.etn&&v.target.id)||i.entityTypeName&&i.id&&(v.target={etn:i.entityTypeName,id:i.id.guid});var y=Object(ie.a)(e)===ae.a.MultiSession;y&&v&&v.target&&!v.target.isAPI&&i&&i.entityTypeName&&i.id&&(v.target={etn:i.entityTypeName,id:i.id.guid});var O=new o({timelineWallData:v,timelineWallConfiguration:b?b.TimelineWallConfiguration:null,contextType:b?b.ContextType:null,controlId:f.LabelId,entitiesMetadata:b?b.EntitiesMetadata:null,getTimelineWallData:null,getCommands:null,getEntityAttributes:null,isMultiSessionNavigationType:y});return this._hasStateChanged(this.previousReturn,O,e)&&(this.previousReturn=O),this.previousReturn}c(Object(m.q)(f.LabelId,null)),c(Object(m.o)(f.LabelId,s.a.Metadata,2,null))}},e.prototype._hasServerStateChanged=function(e){var t=null!==this._upSyncStatus&&Object(d.b)(e)!==this._upSyncStatus,r=null!==this._isServerAvailable&&Object(c.b)(e)!==this._isServerAvailable,i=r&&Object(c.b)(e)&&!Object(h.w)(e)||t&&Object(c.b)(e)||r&&!Object(c.b)(e);return this._isServerAvailable=Object(c.b)(e),this._upSyncStatus=Object(d.b)(e),i},e.prototype._hasTimelineWallStateChanged=function(e,t){if(!e.controlId||!e.timelineWallConfiguration&&t.timelineWallConfiguration||e.timelineWallConfiguration&&t.timelineWallConfiguration&&e.timelineWallConfiguration.Label!==t.timelineWallConfiguration.Label)return!0;for(var r=[s.a.Data,s.a.Filters,s.a.WhatsChanged,s.a.InitiateRefresh,s.a.MoreEmails,s.a.ContextualDialogEntity],i=r.length,a=0;a<i;a++)if(t.timelineWallData&&e.timelineWallData&&t.timelineWallData.requestStatusMap&&e.timelineWallData.requestStatusMap&&(e.timelineWallData.requestStatusMap[r[a]].requestId!==t.timelineWallData.requestStatusMap[r[a]].requestId||e.timelineWallData.requestStatusMap[r[a]].status!==t.timelineWallData.requestStatusMap[r[a]].status))return!0;return!1},e.prototype.getLatestData=function(){return this.previousReturn},e.prototype.isLoading=function(){return!(this.previousReturn&&this.previousReturn.timelineWallConfiguration||Object(p.a)())},e.prototype.isParameterOfTimelineWallType=function(e){return!!e&&e.Type===i.a.TimelineWall},e.prototype.executeRetrieveTimelineWallCommandAction=function(e,t){if(e[0]&&e[0].name&&this._activityCommandManagerId)return this._retrieveTimelineCommands(this._pageId,this._activityCommandManagerId,e,t)},e.prototype.getParameterManifestType=function(){return i.a.TimelineWall},e.prototype.ensureTimelinewallCommandsInitialization=function(e){this._ownProps=e,this._initializeCommandManager()},e.prototype._initializeCommandManager=function(){null==this._activityCommandManagerId&&(this._activityCommandManagerId=this._createHiddenCommandManager(this._ownProps,"activitypointer"))},e.prototype._createHiddenCommandManager=function(e,t){var r=e.id+":"+e.controlId+":"+t;return e.actions.registerNewControl(e.contextToken,e.id,e.controlId,e.descriptor.LabelId),e.actions.initializeCommandManager(e.id,e.contextToken,e.controlId,r,"SubGridStandard:activitypointer"),r},e.prototype._hasStateChanged=function(e,t,r){return this._hasTimelineWallStateChanged(e,t)||this._hasServerStateChanged(r)},e}()},re9F:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r("okRr"),a=r("9r0m"),n=function(){function e(){this._recentItems=[],this._targetEntityTypeNames=[]}return e.prototype.updateRecentItems=function(e,t,r){this._recentItems=e,t&&(this._targetEntityTypeNames=t),r&&(this._disableMru=r.isMruDisabled)},e.prototype.getRecentItems=function(e){var t=this;if(this._disableMru)return[];var r=this._recentItems?this._recentItems.map((function(r){return!(r&&r.RecordType===i.a.Entity&&r.EntityTypeName&&t._targetEntityTypeNames&&-1!==t._targetEntityTypeNames.indexOf(r.EntityTypeName))||e&&e.entityTypeNames&&-1===e.entityTypeNames.indexOf(r.EntityTypeName)?null:{lastAccessed:r.LastAccessed,entityTypeName:r.EntityTypeName,pinStatus:r.PinStatus,objectId:a.a.toString(r.ObjectId),title:r.Title,iconPath:r.IconPath}})):[];return r=r.filter((function(e){return null!==e}))},e}()},s2by:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var i=r("CIm2"),a=r("Ww2r");var n=r("7e/Z"),o=r("mGpW");function s(e,t){var r=e.dispatch,i=e.getState;return new Promise((function(e,t){var s=r(Object(o.e)(n.c));Promise.all([s]).then((function(){var t=function(e,t,r){var i=Object(a.e)(e,t),n={};if(r)for(var o in r)n[o]=Object(a.c)(i,r[o].filterLabel);return n}(i(),n.c,n.b),r=[];for(var o in n.b){var s={value:n.b[o].filterValue,text:t[o]};"all"===o&&(s.isDefault=!0),r.push(s)}e(r)}))}))}var u=r("LnR7"),l=r("otJc"),c=r("uO/V"),d=r("sRkF");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function p(e,t,r){var i,a,n=null;if(e)switch(e){default:case"All":break;case"Today":a=e,i="all";break;case"Overdue":case"Tomorrow":case"NextXDays;7":case"NextXDays;30":case"NextXDays;90":case"NextXMonths;6":case"NextXMonths;12":a=e,i="active"}if(a&&i){var o=function(e,t,r){if(!e||"All"===e)return null;var i=null,a=[],n="scheduledend";if("inactive"!==t){var o=r.formatInfoCultureName,s=r.numberFormatInfo,u=r.dateFormatInfo,c=new Sys.CultureInfo(o,s,u),p=Object(l.t)(new Date,c,d.a.UserLocal,r.timeZoneUtcOffsetMinutes,r.timeZoneAdjusters);a.push({attributeName:n,conditionOperator:26,value:p}),"Overdue"!==e&&a.push(h(n,e)),"Tomorrow"===e&&a.push(h(n,"Today")),a&&a.length>0&&(i={conditions:a,filterOperator:1})}return i}(a,i,t),s=function(e,t,r){if("All"===e)return null;var i=null,a=[],n={attributeName:"statecode",conditionOperator:0,value:"Open"},o={attributeName:"statecode",conditionOperator:0,value:"Completed"},s={attributeName:"statecode",conditionOperator:0,value:"Canceled"},u={attributeName:"statecode",conditionOperator:0,value:"Scheduled"};switch(t){default:case"active":switch(a.push(n),r){case"serviceappointment":case"appointment":case"recurringappointmentmaster":case c.a:a.push(u);break;case"email":a.push(o)}break;case"inactive":a.push(o),a.push(s);break;case"all":}a&&a.length>0&&(i={conditions:a,filterOperator:1});return i}(e,i,r),u=function(e,t){var r=null;if(t&&"All"!==t){var i=[h("actualend",t)];i&&i.length>0&&(r={conditions:i,filterOperator:0})}return r}(0,undefined),p=[];o&&p.push(o),s&&p.push(s),u&&p.push(u),n={filterOperator:0,conditions:null,filters:p}}else n={conditions:null,filterOperator:0,filters:[]};return n}function h(e,t){var r=t.split(";"),i=r.length>1?r[1]:"";return{attributeName:e,conditionOperator:f(r[0]),value:i}}function f(e){if(!e)return null;switch(e){case"Today":return 15;case"Tomorrow":return 16;case"Yesterday":return 14;case"NextXDays":return 34;case"NextXMonths":return 38;case"LastXDays":return 33;case"LastXMonths":return 37}}var m=r("+6eZ"),g=r("6FBX"),v=r("gBKR"),b=r("F2uj"),y=r("UOiB"),O=r("jigW"),_="GridFilterOptionsKeyForValueAll";function P(e,t,r,i){var s=e.dispatch,u=e.getState;if(i&&Object(O.h)(u(),i.relationshipName,i.contextTokenType===y.a.AssociatedGrid)){var l=s(Object(o.e)([n.a])),c=s(Object(v.f)(r,!1,["statecode"]));return Promise.all([l,c]).then((function(){var e=[],t=Object(b.a)(u(),r,"statecode");t&&t.OptionSet&&(e=t.OptionSet.map((function(e){return{value:e.Value.toString(),text:e.Label,isDefault:e.Value===t.DefaultValue}})));var i=Object(a.e)(u(),[n.a]);return e.push({value:_,text:Object(a.c)(i,n.a)}),e}))}return Promise.resolve([])}var S=r("perk"),w="queueid",I="statecode",j="scheduledend",C="statecode",D="msdyn_forecastdefinitionid";function E(e,t,r,a,n){if(!e)return null;var o=t&&t.guid,l=function(e,t){void 0===t&&(t=i.b);var r=t.replace(/-/g,"");return e.concat(r)},d=function(){return o||(o=t&&t.guid),o},h=function(e){return{filterOperator:1,hint:"union",conditions:[{attributeName:"queueviewtype",conditionOperator:0,value:"0",entityAliasName:l("Q_Internal_",e)},{attributeName:"systemuserid",conditionOperator:0,value:d(),entityAliasName:l("M_Internal_",e)}]}},f=function(e){var t=[];return t.push({name:"queue",from:"queueid",to:"queueid",alias:l("Q_Internal_",e),linkType:a?"inner":"outer"}),t.push({name:"queuemembership",from:"queueid",to:"queueid",alias:l("M_Internal_",e),linkType:"outer"}),t},v=function(e){if(!e)return null;var t=e.split(":");t.length>1&&(e=t[1]);var r=e.toString();if(r===i.a)return h(r);if(r===i.e)return{filterOperator:1,conditions:[{attributeName:"queueviewtype",conditionOperator:0,value:"0",entityAliasName:l("Q_Internal_",r)}]};if(r===i.d)return{filterOperator:0,conditions:[{attributeName:"queueviewtype",conditionOperator:0,value:"1",entityAliasName:l("Q_Internal_",r)},{attributeName:"systemuserid",conditionOperator:0,value:d(),entityAliasName:l("M_Internal_",r)}]};var a=[],n={conditions:[],filterOperator:0},o=e.split(i.c);if(o.length){var s={attributeName:"queueid",conditionOperator:8,value:o};n.conditions.push(s)}a.push(n);var u=h(i.a);return a.push(u),{filterOperator:0,conditions:[],filters:a}};if(n||e.toLowerCase()===c.a)return{getAdditionalColumns:function(){return[j,I]},getFilterOptionsAction:function(){return Object(i.i)(e,r,s)},getFilterExpression:function(e,t,r){var i=p(e,t,r);return i?JSON.stringify(i):""},getFilterAndLinkedEntities:function(e){return null},getFilterLabelResourceKey:function(){return S.ACTIVITY_DUE_DATE_FILTER_LABEL}};switch(e.toLowerCase()){case"queueitem":return{getAdditionalColumns:function(){return[w]},getFilterOptionsAction:function(){return Object(i.i)(e,r,i.j)},getFilterExpression:function(e){var t=v(e);return t?Object(m.b)(t):null},getFilterAndLinkedEntities:function(e,t){if(null!=e){var r,a=e.split(":"),n=(e=a.length>1?a[1]:a[0]).toString(),o=null;return t&&(o=v(n)),n===i.e?((r=[]).push({name:"queue",from:"queueid",to:"queueid",alias:l("Q_Internal_",n),linkType:"inner"}),{filter:o,linkEntities:r}):n===i.d?((r=[]).push({name:"queue",from:"queueid",to:"queueid",alias:l("Q_Internal_",n),linkType:"inner"}),r.push({name:"queuemembership",from:"queueid",to:"queueid",alias:l("M_Internal_",n),linkType:"inner"}),{filter:o,linkEntities:r}):{filter:o,linkEntities:f(i.a)}}return null},getFilterLabelResourceKey:function(){return S.QUEUE_FILTER_LABEL}};case u.a:return{getAdditionalColumns:function(){return[D]},getFilterOptionsAction:function(){return Object(i.i)(e,r,u.b)},getFilterExpression:function(e,t,r){if(!e)return null;var i=e.indexOf(":");-1!==i&&(e=e.substring(i+1));var a=Object(u.c)(e,t,r);return a?JSON.stringify(a):""},getFilterAndLinkedEntities:function(){return null},getFilterLabelResourceKey:function(){return S.QUEUE_FILTER_LABEL}};case g.ob:case g.ab:case g.bb:case g.Kb:case g.Cb:case g.C:return{getAdditionalColumns:function(){return[C]},getFilterOptionsAction:function(){return Object(i.i)(e,r,P)},getFilterExpression:function(e,t,r){if(!e)return null;var i=function(e,t,r){if(!e||e===_)return null;var i=null,a=[];return a.push({attributeName:"statecode",conditionOperator:0,value:e}),a&&a.length>0&&(i={conditions:a,filterOperator:1}),i}(e);return i?JSON.stringify(i):""},getFilterAndLinkedEntities:function(){return null},getFilterLabelResourceKey:function(){return S.GRID_FILTER_LABEL}};default:return{getAdditionalColumns:function(){return null},getFilterOptionsAction:function(){return Object(i.i)(e,r,i.g)},getFilterExpression:function(){return null},getFilterAndLinkedEntities:function(){return null},getFilterLabelResourceKey:function(){return null}}}}},sRzG:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return A}));var i=r("QAhb"),a=r("9r0m"),n=r("G7N+"),o=r("455M"),s=r("HSdq"),u=r("9rlF"),l=r("F2uj"),c=r("TCcM"),d=r("phfH"),p=r("i8/j"),h=r("yHpA"),f=r("EGsq"),m=r("sOTk"),g=r("7EJx"),v=r("EpyZ"),b=r("otJc"),y=r("Sscr"),O=r("uQP8");var _=r("lGKN"),P=r("m6bI");var S=r("VWqI"),w=r("8xrh"),I=r("T2Xs"),j=r("Ygmu"),C=r("+Xnp"),D=r("VcAV"),E=r("OTOS"),T=r("TV33"),N=r("YIHp"),F=r("IQF2"),R="CustomControlFramework.Selectors.DynamicDataSelectors.CustomControlFieldDataSelector";function A(e,t){var r=Object(p.j)(e,t);return!!r&&7===r.FormType}function k(){var e,t,r,w={},k={},x={},B={},U=[],z=null,W=null,q=function(e,i,a){var n=Object(s.A)(e,i,a);if(!n)return r=n,t=null,null;if(n===r)return t;for(var o=Object.keys(n),u=null,l=null,c=null,d=0;d<o.length;d++){var p=n[o[d]];u||p.notificationLevel!==_.a.error||(u=p),l||p.notificationLevel!==_.a.recommendation||(l=p),c||p.notificationLevel!==_.a.information||(c=p)}return r=n,t={error:u,recommendation:l,information:c}},G=null;return function(t,r,_,Q,H,K){var X;I.a.info(_.controlId+"."+R+": createGetFieldParameterData started");var Y,Z,J,$=Object(g.w)(r),ee=Object(f.x)(r),te=_.formInfo&&_.formInfo.FormId?new a.a(_.formInfo.FormId):Object(E.b)(r,_.id),re=function(e,t){var r=Object(p.j)(e,t);return!!r&&10===r.FormType}(r,te),ie=A(r,te),ae=_.id;_.formInfo&&_.formInfo.EntityName&&_.formInfo.RecordId?(Y=_.formInfo.EntityName,Z=new a.a(_.formInfo.RecordId)):(Y=H.entityTypeName,Z=H.id);var ne=!1,oe=new i.a(Y,H.id),se=Q.Parameters[t],ue={},le=0===se.Usage,ce=1===se.Usage,de=2===se.Usage;if(t.includes("isEmpty")){var pe=Q.Parameters.showStageGatingError,he=w.showStageGatingError;if(!!pe&&!!he&&pe.Value!==he.raw&&(!w.hasOwnProperty(t)||w[t].type!==se.Type)){var fe=Q.Parameters.value;if(fe){var me=fe.Value,ge=Object(s.ac)(r,ae,K),ve=Object(s.X)(r,ae,K,ge,oe,me),be=void 0;be=Object(D.c)(_)||Object(D.c)(_.descriptor)||Object(D.c)(_.descriptor.Id)||!_.descriptor.Id.startsWith("header_process_")?Object(c.z)(ve,r,Y,me):Object(d.h)(ve,r,Y,me),ne=!w[t]||be!==w[t].raw,J={type:se.Type,raw:be,formatted:null,attributes:ue,error:!1,errorMessage:null,security:{},isPropertyLoading:!1}}}}else if(3===se.Usage&&x[t]!==se){var ye=se;x[t]=ye,J={type:ye.Type,raw:ye.Value,formatted:ye.Attributes&&se.Value?Object(b.x)(se.Value,Object(b.z)(r,ye.Attributes)):null,error:!1,errorMessage:null,security:ye.Security||{secured:!1,editable:!0,readable:!0},attributes:ye.Attributes,isPropertyLoading:!1},ne=!0}else if(de)w.hasOwnProperty(t)&&w[t].type===se.Type||(J={type:se.Type,raw:null,formatted:null,attributes:ue,error:!1,errorMessage:null,security:{},isPropertyLoading:!1},ne=!0);else if(void 0===se.Value)w.hasOwnProperty(t)||(J={type:null,raw:null,formatted:null,attributes:ue,error:!1,errorMessage:null,security:{},isPropertyLoading:!1},ne=!0);else if(se.Static)w.hasOwnProperty(t)&&w[t].raw===se.Value||(J={type:se.Type,raw:se.Value,formatted:null,attributes:ue,error:!1,errorMessage:null,security:{},isPropertyLoading:!1},ne=!0);else if(ce&&se.ControlLinked){var Oe=se.Value,_e=
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function(e,t,r,i){var a=Object(O.a)(e,t),n=Object(y.v)(r);return a&&a.forms&&a.forms[n]&&a.forms[n].controlUnboundOutputs[i]?a.forms[n].controlUnboundOutputs[i]:null}(r,ae,K,Oe),Pe=_e?_e.value:null;if(!Pe){var Se=
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function(e,t,r){var i=Object(O.a)(e,t);return i&&i.formlessControlOutputs&&i.formlessControlOutputs[r]?i.formlessControlOutputs[r]:null}(r,ae,Oe);Pe=Se?Se.value:null}Pe!==B[Oe]&&(J={type:se.Type,raw:Pe,formatted:Pe,error:!1,errorMessage:null,security:{},attributes:{}},B[Oe]=Pe,ne=!0)}else{var we=se.Value;if(F.a.getInstance().getAttributesPendingUpdate().has(we))return w[t];var Ie=Object(c.b)(oe)(r,oe.etn);if(le&&!re&&!ie&&!a.a.isNullOrEmpty(Z)&&(!Ie||!Object(n.b)(Ie.initialized)))return I.a.info(_.controlId+"."+R+": createGetFieldParameterData return null"),null;var je=!1,Ce=k.hasOwnProperty(t)?k[t]:{timestamp:null,fieldName:null,rawAttributes:null,pageAttributes:null,finalAttributes:null},De=!!Ie&&(Ie.initialized===n.a.Initializing||Ie.initialized===n.a.Refreshing);(le||ce)&&w[t]&&De!==w[t].isPropertyLoading&&(je=!0);ge=Object(s.ac)(r,ae,K),ve=Object(s.X)(r,ae,K,ge,oe,we);var Ee=[];se.Type===o.a.SingleLineAddress&&(Ee=Object(N.d)(we)),ve&&(!Ce.fieldName||Ce.fieldName!==we||!Ce.timestamp||ve.timestamp>Ce.timestamp)?(je=!0,Ce.timestamp=ve.timestamp,Ce.fieldName=we,e=H):e&&!a.a.equals(e.id,Z)&&(je=!0,Ce.timestamp=ve?ve.timestamp:Ce.timestamp,Ce.fieldName=we,e=H);var Te=null,Ne={},Fe=Object(O.a)(r,_.id),Re=null,Ae=Object(y.v)(K);if(Fe&&Fe.metadata&&Fe.metadata[Ae]&&Fe.metadata[Ae].attributes&&Fe.metadata[Ae].attributes[we]&&(Re=Fe.metadata[Ae].attributes[we]),le){var ke=!0,Me=!0;if(Ee.length>0){var Le=Object(l.j)(r,Y,Ee);Object.keys(Le).forEach((function(e){var t=Le[e];ke=ke&&t.IsValidForUpdate,Me=Me&&t.IsValidForCreate}))}var Ve=Object(l.a)(r,Y,se.Value),xe=Object(f.g)(r),Be=null,Ue=null;if(se.Type===o.a.StatusOptionSet&&(Be=Object(h.d)(r,ge,oe,"statecode"),Ue=Object(h.d)(r,ge,oe,se.Value)),se.Type===o.a.File&&(Ve.IsValidForUpdate=!0),Ve!==Ce.rawAttributes||Ce.pageAttributes!==Re||V(Be,z)||V(Ue,W)||(se.Type===o.a.File||se.Type===o.a.Image)&&je){if(je=!0,Ce.rawAttributes=Ve,ue=function(e,t){if(!e)return null;return{DisplayName:e.DisplayName,LogicalName:e.LogicalName,Type:e.Type,IsSecured:e.IsSecured,RequiredLevel:e.RequiredLevel,MinValue:e.MinValue,MaxValue:e.MaxValue,ImeMode:e.ImeMode,MaxLength:e.MaxLength,EntityLogicalName:e.EntityLogicalName,Precision:e.Precision,Format:e.Format,Behavior:e.Behavior,Targets:e.Targets,Options:e.OptionSet,DefaultValue:e.DefaultValue,SourceType:e.SourceType,Description:e.Description,Timestamp:t}}(Ve,ve&&ve.timestamp?ve.timestamp.getTime():null),ue=Object(v.d)(ue,ee,$,se.Type,xe,Ve?Ve.SourceType:j.a.Unknown,r,Y,Z),Ce.finalAttributes=function(e,t){if(null==e)return t;var r=t;null!=e.OptionSet&&(r.Options=e.OptionSet);null!=e.Precision&&(r.Precision=e.Precision);null!=e.RequiredLevel&&(r.RequiredLevel=e.RequiredLevel);null!=e.Targets&&(r.Targets=e.Targets);null!=e.Format&&(r.Format=e.Format);return r}(Re,ue),se.Type===o.a.StatusOptionSet&&Be){var ze=Object(c.j)(r,oe,"statuscode"),We=Object(T.g)(ze),qe=parseInt(Be.valueString,10),Ge=Ue?parseInt(Ue.valueString,10):null,Qe=Object(P.a)(r,Ve.EntityLogicalName,qe,null!=We?We:Ge);null!=Qe&&Array.isArray(Qe)&&0===Qe.length&&(Qe=[Ge]);var He=ue.Options.filter((function(e,t,r){return I.a.info(_.controlId+"."+R+": createGetFieldParameterData return statusOptionValues.indexOf(element.Value) >= 0"),Qe.indexOf(e.Value)>=0}));z=Be,U=He,W=Ue,ue.Options=U}Ce.pageAttributes=Re,!Ve||Ve.SourceType!==j.a.Rollup&&Ve.SourceType!==j.a.Calculated||Object(v.a)(r,Y,Z,Ce.finalAttributes,ge)}else!Ve||Ve.SourceType!==j.a.Rollup&&Ve.SourceType!==j.a.Calculated||Object(v.a)(r,Y,Z,Ce.finalAttributes,ge)&&(je=!0);se.Type===o.a.DateAndTimeDateAndTime&&Object(u.j)(ve)?Te=Object(v.c)(ve,r,_,H,we,K):se.Type===o.a.WholeLanguage&&Object(u.j)(ve)?Te=Object(b.n)(ve.value,xe):se.Type===o.a.Currency&&Object(u.j)(ve)?Te=ve&&ve.validationResult&&!ve.validationResult.isValueValid?ve.validationResult.userInput&&(null===(X=ve.validationResult.userInput)||void 0===X?void 0:X.toString()):Object(u.c)(ve):se.Type===o.a.TwoOptions?(Te=Object(u.c)(ve),Object(D.b)(Te)&&(Te=Object(u.e)(ve))):Te=Object(u.c)(ve),je=je||w[t]&&Te!==w[t].formatted;var Ke=Object(m.m)(r,ae),Xe=!!Object(S.f)(r,Y,se.Value,Ke?C.a.CanCreate:C.a.CanUpdate,Z),Ye=!!Object(S.f)(r,Y,se.Value,C.a.CanRead,Z),Ze=void 0;Ze=se.Type===o.a.SingleLineAddress?!!Ve&&((Ke?Me:ke)&&Xe):!!Ve&&((Ke?Ve.IsValidForCreate:Ve.IsValidForUpdate)&&Xe);var Je=!!Ve&&(Ye&&Ve.IsValidForRead);Ne={secured:!!Ve&&Ve.IsSecured,editable:Ze,readable:Je},je=je||w[t]&&w[t].security&&(Ze!==w[t].security.editable||Je!==w[t].security.readable)}var $e=q(r,{controlName:L(_),id:ae},K);$e!==G&&(je=!0,G=$e);var et=!1,tt=null;if(je||$e){var rt=function(e,t){var r=!(!e||!e.validationResult)&&!e.validationResult.isValueValid,i=e&&e.validationResult?e.validationResult.errorMessage:null;r||(i=(r=!!(t&&t.error&&t.error.messages))&&t.error.messages[0]||null);return{error:r,errorMessage:i}}(ve,$e);et=rt.error,tt=rt.errorMessage,!w[t]||w[t].error===et&&w[t].errorMessage===tt||(je=!0)}if(je)k[t]=Ce,J={type:se.Type,raw:M(r,ge,oe,se),formatted:Te,attributes:k[t].finalAttributes,error:et,errorMessage:tt,notifications:$e,security:Ne,isPropertyLoading:De},ne=!0;else if(!w[t]){if(!ce)return I.a.info(_.controlId+"."+R+": createGetFieldParameterData return null"),null;J={type:se.Type,raw:null,formatted:null,attributes:ue,error:!1,errorMessage:null,notifications:null,security:Ne,isPropertyLoading:!1},ne=!0}}return ne&&(w[t]=J),I.a.info(_.controlId+"."+R+": createGetFieldParameterData finished"),w[t]}}function M(e,t,r,i){var a=Object(h.d)(e,t,r,i.Value);if(Object(u.j)(a)&&a.validationResult&&!a.validationResult.isValueValid)return a.validationResult.userInput;switch(i.Type){case o.a.OptionSet:return a&&a.valueString?parseInt(a.valueString,10):null;case o.a.TwoOptions:if(a){var n=a.value,s=Object(D.c)(n);if(s&&(n=a.valueString),!Object(D.c)(n))return s&&"-1"===n?null:"boolean"==typeof n?n:"0"!==n.toString()}return null;case o.a.LookupSimple:case o.a.LookupCustomer:case o.a.LookupOwner:case o.a.LookupRegarding:case o.a.LookupMultiEntity:var l=a&&a.validationResult&&!a.validationResult.isValueValid?a.validationResult.userInput:Object(c.y)(e,t,r,i.Value);return Object(w.j)(l);case o.a.LookupPartyList:return a&&a.validationResult&&!a.validationResult.isValueValid?a.validationResult.userInput:Object(w.k)(Object(c.y)(e,t,r,i.Value));case o.a.SingleLineText:if(a&&Object(u.g)(a)&&a.id)return a.id.guid;default:return Object(c.y)(e,t,r,i.Value)}}function L(e){var t=e.parentDefinedControlProps&&e.parentDefinedControlProps.parentFieldSectionItem,r=e.descriptor&&e.descriptor.Name;return t||r}function V(e,t){return!(e===t||t&&e&&e.label===t.label&&e.valueString===t.valueString)}},scgP:function(e,t,r){"use strict";r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"a",(function(){return m})),r.d(t,"g",(function(){return g})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return c}));var i=r("0ifx"),a=r("glw0"),n=r("otJc"),o=/(.*)(((0|#),)?(0|#)+,*(\.(0|#)+)?)(.*)/,s=/(((0|#),)?(0|#)+,*(\.(0|#)+)?)/,u=/^(c|C|d|D|f|F|n|N|p|P)\d*$/;function l(e,t,r,i){return r?d(r)?Object(a.b)(e,r,t):p(r)?m(e,g(r),t):void 0:i&&Object(n.C)(i)?("money"===i.controlAttributes.Type&&(i.controlAttributes.Type="float",i.controlAttributes.Precision=t.numberFormat.CurrencyDecimalDigits),Object(n.b)(e,i)):e.toString()}function c(e,t,r){return isNaN(e.valueOf())?"":Object(i.a)(e,r,t)}function d(e){return u.test(e)}function p(e){return o.test(e)}function h(e){if(p(e)){var t=v(e),r=t.prefix,i=t.suffix;return r.indexOf("%")>=0&&f(r).isSingleQuoted||i.indexOf("%")>=0&&f(i).isSingleQuoted}return!1}function f(e){if(!e)return{isSingleQuoted:!1};for(var t=[0,e.length-1],r=t[0],i=t[1];r<i;)if(" "!==e.charAt(r)){if(" "!==e.charAt(i)){if("'"===e.charAt(r)&&"'"===e.charAt(i))return{isSingleQuoted:!0,stripQuote:e.slice(0,r)+e.slice(r+1,i)+e.slice(i+1)};break}i--}else r++;return{isSingleQuoted:!1}}function m(e,t,r){if(!t||!r)return e.toString();var i=t.positiveValueFormat;if(e<0&&t.negativeValueFormat?i=t.negativeValueFormat:0===e&&t.zeroValueFormat&&(i=t.zeroValueFormat),!i||!r)return e.toString();e*=Math.pow(10,i.numberScalingFactor);var n,o,s,u,l,c=Object(a.a)(Math.abs(e),i.decimalPrecision,r.numberFormat.NumberGroupSizes,r.numberFormat.NumberGroupSeparator,r.numberFormat.NumberDecimalSeparator);return 0==+c&&(c="0",0===(i=t.zeroValueFormat?t.zeroValueFormat:i).minNumberOfIntegerDigits&&(c="")),i.integerZeroPlaceHolder&&i.minNumberOfIntegerDigits&&(n=""+c,o=i.minNumberOfIntegerDigits,s=n.split("."),u=s[0],c=null==(l=s[1])?Object(a.c)(u,o,!0):Object(a.c)(u,o,!0)+"."+l),c=function(e,t,r){var i=e.indexOf("."),a=-1===i?0:e.length-i-1,n=0;if(r)t-a>0&&(-1===i&&(e+="."),e+="0".repeat(t-a));else{for(var o=0;o<a&&"0"===e.charAt(e.length-1-o);o++)n++;"."===e.charAt(e.length-n-1)&&n++}return e.substring(0,e.length-n)}(c,i.decimalPrecision,i.decimalZeroPlaceholder),e<0&&i.addNegativeSymbol&&(c=r.numberFormat.NegativeSign+c),i.prefix+c+i.suffix}function g(e){if(!e||!p(e))return null;var t=e.split(";"),r={};return r.positiveValueFormat=b(t[0]),r.negativeValueFormat=b(t[1]),r.negativeValueFormat&&(r.negativeValueFormat.addNegativeSymbol=!1),r.zeroValueFormat=b(t[2]),r}function v(e){var t=e.replace(s,";").split(";"),r=t[0],i=t[1];return{prefix:r=r&&"#"!==r.trim()&&"0"!==r.trim()?r:"",suffix:i=i&&"#"!==i.trim()&&"0"!==i.trim()?i:""}}function b(e){if(null==e)return null;var t=!1,r=0,i=!1,a=0,n=0,o=!1,s=v(e),u=s.prefix,l=s.suffix;u&&(e=e.substring(u.length)),l&&(e=e.substring(0,e.length-l.length));for(var c=!1,d=0,p=!1,h=!1,m=0;m<e.length;m++){switch(e.charAt(m)){case"0":c||h&&(h=!1,d=0,t=!0),d++,p=!0;break;case"#":c?d++:h&&(h=!1,d=0,t=!0);break;case",":h=!0;break;case".":r=d,i=p,c=!0,p=!1,d=0;break;default:continue}0!==d&&c?(n=d,o=p):0!==d&&(r=d,i=p)}a=0;var g=e;c&&(g=e.split(/\.(.+)/)[0]);for(m=g.length-1;m>0&&","===g.charAt(m);m--)a+=-3;var b=f(u),y=b.isSingleQuoted,O=b.stripQuote;a+=y?0:2*(u.split("%").length-1);var _=f(l),P=_.isSingleQuoted,S=_.stripQuote;return{decimalPrecision:n,decimalZeroPlaceholder:o,useGroup:t,minNumberOfIntegerDigits:r,integerZeroPlaceHolder:i,numberScalingFactor:a+=P?0:2*(l.split("%").length-1),prefix:O||u,suffix:S||l,addNegativeSymbol:!0}}},vUcA:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u}));var i=r("c/eZ"),a=r("bKPb"),n=r("Ww2r"),o=r("Z46F");function s(){var e=null,t=Object(n.h)();return function(r,n){var o=a.X,s=n&&function(e){var t=[];for(var r in e){var i=u(e[r].errorCode);i&&-1===t.indexOf(i)&&t.push(i)}return t}(n);s&&s.length>0&&(o=Object(i.__spreadArrays)(a.X,s));var l=t(r,o);return e!==l&&(e=l),e}}function u(e){return 0===e?null:"Error_Message_0x"+o.a.getHexErrorCodeFromInt(e)}},w1wa:function(e,t,r){"use strict";
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function i(e,t){if(!e||!e.data||!t)return null;var r=e.data;if(!r.timelineWalls)return null;var i=r.timelineWalls[t];return i||null}function a(e,t,r){if(!e||!e.data||!t)return null;var i=e.data;if(!i.timelineWalls)return null;var a=i.timelineWalls[t];return a?a.requestStatusMap[r]?a.requestStatusMap[r].status:0:null}function n(e,t){if(!e||!e.data||!t)return{};var r=e.data;if(!r.timelineWalls)return{};var i=r.timelineWalls[t];return i&&i.entityRecentItems?i.entityRecentItems:{}}function o(e,t){if(!e||!e.data||!t)return!0;var r=e.data;if(!r.timelineWalls)return!0;var i=r.timelineWalls[t];return i?i.isMetadataRetrievalError:void 0}r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return o}))},wUng:function(e,t,r){"use strict";r.d(t,"b",(function(){return P})),r.d(t,"a",(function(){return j}));var i=r("sOTk"),a=r("UOiB"),n=r("Sscr"),o=r("F2uj"),s=r("E0SJ"),u=r("kr+h"),l=r("ObKm"),c=r("HSdq"),d=r("QAhb"),p=r("vq3o"),h=r("lGKN"),f=r("n1Ju"),m=r("Ww2r"),g=r("RndP"),v=r("txwV"),b=r("690X"),y=r("TiXY"),O=r("krRo"),_=r("Gemh");function P(e,t,r,n,s,u,p,h,f){return{type:"dependentFields.update.value",sync:!0,execute:function(m,g){var v,b=m.dispatch,y=(0,m.getState)(),O=Object(i.g)(y,e),_=null,w=Object(c.ac)(y,e,t);t.contextTokenType===a.a.RelatedEntity?(_=Object(c.T)(y,e,t.relationshipName),v=Object(c.oc)(y,{id:e},t)[t.relationshipName]):t.contextTokenType===a.a.GridRow?(_=t.entityTypeName,v=new d.a(_,t.recordId)):(_=O.entityTypeName,v=new d.a(_,O.id));var C=Object(o.e)(y,_,Object.keys(n));for(var D in n)for(var E=I(n[D],C[D]),T=0,N=S(y,b,e,t,v,D,E,C);T<N.length;T++){var F=N[T];if(!n.hasOwnProperty(F)){var R={},A=Object(o.a)(y,_,F),k=I(Object(c.X)(y,e,t,w,v,F),A);if(r)j(y,e,t,A,_,E,k)||(R[F]={fieldName:F,value:A.Type.toUpperCase()==="multiselectpicklist".toUpperCase()?[]:null},b(Object(l.a)(e,R,s,u,p,h,f,t.contextTokenType===a.a.GridRow?t.parentContextToken:t)));else{var M=Object(c.X)(y,e,t,w,v,F);R[F]=M||(A.Type.toUpperCase()==="multiselectpicklist".toUpperCase()?[]:null),b(P(e,t,r,R))}}}}}}function S(e,t,r,i,n,o,u,l){for(var c=l[o],d=i.contextTokenType!==a.a.GridRow?String.format(Object(m.b)(e,g.b),c.DisplayName):null,f=u||i.contextTokenType===a.a.GridRow?null:Object(y.b)(e,[d],h.a.information),v=c&&c.ChildPicklistLogicalNames?c.ChildPicklistLogicalNames:[],b=0,O=v;b<O.length;b++){var _=O[b];if(u&&i.contextTokenType!==a.a.GridRow){var P=Object(p.a)(e,n.etn,_,u);t(Object(s.b)(r,i,_,P))}w(e,t,r,i,n,_,u,f)}return v}function w(e,t,r,i,o,s,l,d){if(i.contextTokenType===a.a.GridRow){Object(_.O)(e,r,i,s)&&t(Object(O.c)(r,i,s,!l))}else{var p=Object(n.w)(i);Object(c.z)(e,r,p,s,i.relationshipName).forEach((function(a){var n=Object(c.s)(e,{id:r,controlName:a},p);n&&!n.Disabled&&(t(Object(u.b)(r,a,p,!l)),l?function(e,t,r,i,a,n){var o=Object(c.A)(e,{controlName:i,id:r},a);if(o){var s=Object.keys(o);if(s&&s.length>0)for(var u=0,l=s;u<l.length;u++){var d=l[u];if(o[d].notificationLevel===n){var p={uniqueId:d,messages:null,notificationLevel:null,actions:null};t(Object(f.b)(r,i,p,a))}}}}(e,t,r,a,i,h.a.information):t(Object(f.b)(r,a,d,i)),a.startsWith(v.b)&&t(Object(b.b)(o)))}))}}function I(e,t){var r=null;return"picklist"===t.Type&&e&&e.valueString?r=parseInt(e.valueString,10):"multiselectpicklist"===t.Type&&e&&e.value&&(r=e.value.split(",")),r}function j(e,t,r,i,a,n,o){if(i&&!i.ParentPicklistLogicalName||!o)return!0;var s=Object(p.a)(e,a,i.LogicalName,n);if(s&&s.length>0){if("picklist"===i.Type)return s.some((function(e){return e.Value===o}));if("multiselectpicklist"===i.Type)return o.every((function(e){return s.some((function(t){return t.Value===e}))}))}return!1}},yGoS:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a}));var i=r("70DF");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */function a(e){if(e<i.a.DAY||e>i.a.FISCAL_YEAR)throw new RangeError("Argunment out of range");return{groupingType:e}}function n(e){if(!e)return-1;switch(e){case"day":return i.a.DAY;case"week":return i.a.WEEK;case"month":return i.a.MONTH;case"year":return i.a.YEAR;case"quarter":return i.a.QUARTER;case"fiscal-period":return i.a.FISCAL_PERIOD;case"fiscal-year":return i.a.FISCAL_YEAR;default:return-1}}function o(e){switch(e){case i.a.DAY:return"day";case i.a.WEEK:return"week";case i.a.MONTH:return"month";case i.a.YEAR:return"year";case i.a.QUARTER:return"quarter";case i.a.FISCAL_PERIOD:return"fiscal-period";case i.a.FISCAL_YEAR:return"fiscal-year";default:return null}}},yrP7:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return c}));var i=r("qFBg"),a=r("QAhb"),n=r("9r0m"),o=r("Sscr"),s=r("j6Db"),u=r("RImw");function l(e,t,r,l,d,p,h,f,m,g){return{type:"retrieve.recordCommand.async",execute:function(v,b){var y=v.dispatch,O=v.getState,_=[];for(var P in t)if(-1!==d.indexOf(P)){var S=t[P].getNamedReference();_.push(new a.a(S.entityName,new n.a(S.id),S.name))}return Object(i.a)(O(),e,r,Object(o.v)(l),_,y,p,false,h,f,m,g).then((function(e){return c(e,y)}),(function(e){var t=Object(u.c)(O(),r),i=(t?t.CustomControlType:s.a)+".CustomControl.Commanding.retrieveRecordCommand";throw b.EventManager.ReportComponentFailure(i,e,"retrieveRecordCommand failure",[{name:"APIName",value:s.a+".Actions.retrieveRecordCommand"},{name:"commandManagerId",value:r},{name:"contextToken",value:JSON.stringify(l)},{name:"records",value:JSON.stringify(d)},{name:"commandButtonIds",value:JSON.stringify(p)},{name:"filterByPriority",value:h},{name:"useNestedFormat",value:JSON.stringify(f)},{name:"controlConstructorName",value:m},{name:"refreshAllRules",value:JSON.stringify(g)}]),e}))}}}function c(e,t){for(var r=[],i=function(i){var a=e[i];r.push({commandButtonId:a.commandButtonId,commandId:a.commandId,label:a.label,canExecute:a.canExecute,shouldBeVisible:a.shouldBeVisible,tooltip:a.tooltip,icon:a.icon,children:c(a.children,t),controlType:a.controlType,execute:function(){return t(a.execute)}})},a=0;a<e.length;a++)i(a);return r}function d(e,t,r,i,a){return{type:"initialize.customControl.command",payload:{contextKey:Object(o.v)(t),commandManagerId:i,controlId:r,ribbonId:a},meta:{pageId:e}}}function p(e,t,r,i){return{type:"pending.customControl.command",payload:{contextKey:Object(o.v)(t),commandManagerId:i,controlId:r},meta:{pageId:e}}}},zPLw:function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"f",(function(){return u}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
var i="SUCCESS",a="ERROR",n="WARNING",o="INFORMATION",s="LOCKED",u=new Set([s])},zXhH:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c}));var i=r("HSdq"),a=r("1Tfq"),n=r("UGbr"),o=r("sOTk"),s=r("YEEA"),u=r("vm7t");function l(e,t){var r=[];return{type:"configure.save.async",sync:!0,execute:function(l,c,f){var m=l.dispatch,g=l.getState,v=h(g(),e);p(r,v,f),v&&m(d(e,t)),c.Router.registerPreNavigationHandler((function(l){return new Promise((function(d){Object(u.g)(e);var p={id:e};!Object(i.Db)(l,p,t)&&Object(i.Nb)(l,p.id,t)?v&&!Object(o.m)(l,e)?m(Object(n.e)(e,2,!1)).then((function(t){d(!!t||m(Object(a.a)(e)))}),(function(t){Object(s.h)(g(),e,t,r,c,"Forms.ConfigureSave.Navigate.Save"),d(m(Object(a.a)(e)))})):d(m(Object(a.a)(e))):d(!0)}))}),e)},getFailureParameters:function(e,t){return Object(s.a)(e,r),r}}}function c(e,t){return{type:"configure.save.async",sync:!0,execute:function(r,i,a){var n=r.dispatch;h((0,r.getState)(),e)&&(n(Object(u.g)(e)),n(d(e,t)))}}}function d(e,t){var r=[];return{type:"configure.save.async",sync:!0,execute:function(a,o,l){var c=a.dispatch,d=a.getState;u.f[e]=setTimeout((function a(){if(Object(i.Nb)(d(),e,t)&&!Object(i.mb)(d(),{id:e},t)){var h=c(Object(n.c)(e));h&&h.then((function(e){}),(function(t){!function(e){return e&&(2200000004===e.errorCode||2200000005===e.errorCode||2200000006===e.errorCode||2200000007===e.errorCode)}(t)?c(Object(u.e)(e)):c(Object(u.g)(e));var a=Object(i.Qc)(d());p(r=[],a,l),Object(s.h)(d(),e,t,r,o,"Forms.ConfigureSave.AutoSave")}))}u.f[e]=setTimeout(a,Object(i.l)(d(),e))}),Object(i.l)(d(),e))}}}function p(e,t,r){e.push({name:"CorrelationId",value:r.correlationId},{name:"ContextId",value:r.contextId},{name:"ActionStack",value:r.stack},{name:"autoSaveEnabled",value:t})}function h(e,t){return Object(i.Qc)(e)&&!Object(i.Eb)(e,t)}}}]),window.bundleExecutionMarkers["scripts/es5/5.js?v=1.4.9962-v91onpremise"].end=window.performance.now(),window.reportBundleExecutionTimes&&window.reportBundleExecutionTimes();