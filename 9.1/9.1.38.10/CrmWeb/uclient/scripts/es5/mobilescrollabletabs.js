(window.bundleExecutionMarkers=window.bundleExecutionMarkers||{})["scripts/es5/mobilescrollabletabs.js?v=1.4.9962-v91onpremise"]={begin:performance.now()},(window.__wpJsonpUci=window.__wpJsonpUci||[]).push([[80],{"4buJ":function(e,t,i){"use strict";i.r(t),i.d(t,"MobileScrollableTabs",(function(){return x}));var s=i("c/eZ"),o=i("nuS9"),r=i("4fxQ"),l=i("zSKH"),a=i("jFO5"),n=i("4E+q"),d=i("ASFs"),p=i("HSdq"),c=i("ar+e"),h=i("s0Zj"),b=i("gvL4"),u=i("9rQ4"),y=i("ovDt"),f=i("sOTk"),v=i("aPRd"),m=i("Sscr"),g=i("ePaV"),_=i("wV3W"),S=i("/W63"),I=i("Ww2r"),O=i("5Hhq"),T=i("gPjR"),j=i("22IK"),E=i("lMVv"),w=i("eoKI"),F=i("Axwz"),R=i("OTOS"),C=i("YWpA"),L=i("VlhU"),N=i("Srej"),k=i("3JmW"),M=i("49kd"),W=i("TCzx"),H=function(e){function t(t){var i=e.call(this,t)||this;return i._dataId="tablist-",i._keyDownHandler=i._keyDownHandler.bind(i),i._selectRelatedEntityHandler=i._selectRelatedEntityHandler.bind(i),i._flyoutKeyDownHandler=i._flyoutKeyDownHandler.bind(i),i._ulRef=i._ulRef.bind(i),i._toggleFlyout=i._toggleFlyout.bind(i),i._closeFlyout=i._closeFlyout.bind(i),i.state={isFlyoutOpened:!1,retrieveMissingRelatedEntitiesFinished:!1},i._previousHeaderCollapsed=t.headerCollapsed,i}return Object(s.__extends)(t,e),t.prototype.componentDidMount=function(){this._previousHeaderCollapsed=this.props.headerCollapsed},t.prototype.componentDidUpdate=function(){var e,t;if(this._tabNavigatorList)if(null===(e=this.props.selectedRelatedEntity)||void 0===e?void 0:e.isSelected){for(var i=r.findDOMNode(this._tabNavigatorList),s=null==i?void 0:i.childNodes,o=void 0,l=0;l<this.props.tabItems.length;l++)this.props.tabItems[l].name===this.props.selectedRelatedEntity.id&&this.props.tabItems[l].id===k.a&&(o=this.props.tabItems[l].id);if(o){var a=void 0;for(l=0;l<s.length;l++)if(Object(k.g)(s[l].id,this.props.id)===o){a=l;break}if(s[a]&&this._previousFocusedItem!==s[a]){var n=s[a],d=n.getBoundingClientRect(),p=W.a.getInstance().get_IsAndroid();p&&(i.style.scrollBehavior="auto");var c=i.scrollWidth-i.clientWidth;this.props.isRTL&&(c=p?0:-1*c),i.scrollLeft=c,this.props.isRTL&&d.right>i.clientWidth?i.scrollLeft=i.scrollLeft+(d.right-i.clientWidth):d.left<0&&(i.scrollLeft=i.scrollLeft+d.left),this._previousScrolledTab=o,n.focus(),p&&(i.style.scrollBehavior="smooth"),this._previousFocusedItem=s[a],this.props.selectedTabId&&this.props.selectRelatedTab(this.props.selectedRelatedEntity,this.props.contextToken)}}}else{for(s=null===(t=r.findDOMNode(this._tabNavigatorList))||void 0===t?void 0:t.childNodes,a=void 0,l=0;l<s.length;l++)if(Object(k.g)(s[l].id,this.props.id)===this.props.selectedTabId){a=l;break}this._previousScrolledTab!==this.props.selectedTabId&&this._previousScrolledTab!==k.b&&this._updateScrollPosition(this.props.selectedTabId,this._previousScrolledTab),s[a]&&this._previousFocusedItem!==s[a]&&(s[a].focus(),this._previousFocusedItem=s[a])}this._previousHeaderCollapsed=this.props.headerCollapsed},t.prototype.componentWillReceiveProps=function(e){e.headerCollapsed!==this._previousHeaderCollapsed&&this.state.isFlyoutOpened&&this._toggleFlyout()},t.prototype.componentWillUnmount=function(){this.props.updateVisitedTabNames(this.props.selectedTabId)},t.prototype._renderAssociativeOrGanttGrid=function(){return o.createElement(M.a,{id:this.props.id,selectedRelatedEntity:this.props.selectedRelatedEntity,isAuditFeatureEnabled:this.props.isAuditFeatureEnabled,contextToken:this.props.contextToken,formId:this.props.formId.guid,entityName:this.props.entityTypeName,recordId:this.props.entityId.guid,style:this.props.associatedGridContainerStyle})},t.prototype._updateScrollPosition=function(e,t){var i,s=this,o=this.props.tabItems.findIndex((function(e){return e.id===(null!=t?t:s.props.selectedTabId)})),l=this.props.tabItems.findIndex((function(t){return t.id===e})),a=r.findDOMNode(this._tabNavigatorList);if((null==a?void 0:a.childNodes)&&(null==a?void 0:a.childNodes.length)>0)for(var n=0;n<a.childNodes.length;n++)if(Object(k.g)(a.childNodes[n].id,this.props.id)===e){i=n;break}var d=a?a.scrollWidth-a.clientWidth:0;if(i||0===i){var p,c=null==a?void 0:a.childNodes[i],h=c.getBoundingClientRect(),b=!1;if((this.props.isRTL?l>o:l<o)&&(h.left<.33*a.clientWidth||h.right>a.clientWidth)?(p=c.offsetLeft-(a.clientWidth-c.offsetWidth-40),b=!0):(this.props.isRTL?l<o:l>o)&&(h.right>.67*a.clientWidth||h.left<40)&&(p=c.offsetLeft-40),this.props.isRTL&&W.a.getInstance().get_IsAndroid()&&(p+=d),(p||0===p)&&W.a.getInstance().get_IsIOS()){var u,y=a.scrollLeft,f=p-y,v=function(e){u||(u=e);var t=e-u,i=y+t/300*f;a.scrollLeft=b?Math.max(i,p):Math.min(i,p),t<300&&window.requestAnimationFrame(v)};window.requestAnimationFrame(v)}else(p||0===p)&&(a.scrollLeft=p);this._previousScrolledTab=e}},t.prototype._createOnClick=function(e){var t=this;return function(){t._updateScrollPosition(e),e===k.b?(t.props.retrieveMissingRelatedEntities(t.props.entityTypeName).then((function(e){e&&t.setState({retrieveMissingRelatedEntitiesFinished:!0})})),t._toggleFlyout()):t.props.selectTab(e,t.props.contextToken,t.props.selectedRelatedEntity)}},t.prototype._keyDownHandler=function(e){var t,i,s=this,o=null===(t=e.target)||void 0===t?void 0:t.id;if(this._tabNavigatorList){var l=null===(i=r.findDOMNode(this._tabNavigatorList))||void 0===i?void 0:i.childNodes;if(l&&l.length>0){for(var a=void 0,n=0;n<l.length;n++)if(l[n].id===o){a=n;break}if(e.keyCode===u.a.LeftArrow)l[(a-1+l.length)%l.length].focus();else if(e.keyCode===u.a.RightArrow)l[(a+1+l.length)%l.length].focus();else if(e.keyCode===u.a.Enter||e.keyCode===u.a.Space)if(Object(k.g)(o,this.props.id)===k.b)this.props.retrieveMissingRelatedEntities(this.props.entityTypeName).then((function(e){e&&s.setState({retrieveMissingRelatedEntitiesFinished:!0})})),this._toggleFlyout();else{var d=this.props.tabItems.find((function(e){return e.id===Object(k.g)(o,s.props.id)})),p=null==d?void 0:d.id;this.props.selectTab(p,this.props.contextToken,this.props.selectedRelatedEntity)}}}},t.prototype._flyoutKeyDownHandler=function(e){var t,i,s=Object(k.g)(null===(t=e.target)||void 0===t?void 0:t.id,this.props.id);if(e.keyCode===u.a.Enter||e.keyCode===u.a.Space){var o=null===(i=this.props.tabItems.find((function(e){return e.id===s})))||void 0===i?void 0:i.id;this.props.selectTab(o,this.props.contextToken,this.props.selectedRelatedEntity),this._toggleFlyout()}},t.prototype._toggleFlyout=function(){this.setState({isFlyoutOpened:!this.state.isFlyoutOpened})},t.prototype._renderTabFlyout=function(){var e=this,t=k.b,i=this.props.headerCollapsed===this._previousHeaderCollapsed&&this.state.isFlyoutOpened;return o.createElement(y.a,{key:Object(N.g)(k.a,this.props.id),id:this.props.id,relativeElementId:Object(N.g)(t,this.props.id),isFlyoutOpened:i,selectTab:this._flyoutKeyDownHandler,selectRelatedEntity:this._selectRelatedEntityHandler,closeFlyout:function(t){return e._closeFlyout(t)},retrieveMissingRelatedEntitiesFinished:this.state.retrieveMissingRelatedEntitiesFinished,isInCreateMode:this.props.isInCreateMode,tabNavigatorList:this._tabNavigatorList})},t.prototype._renderTabList=function(e){var t=Object(I.c)(this.props.resourceStrings,O.b),i=t?String.format(t,this.props.entityDisplayName):"";return o.createElement(b.a,{id:Object(N.g)(k.c,this.props.id),key:k.c+(e&&e.length),role:"tablist",ref:this._ulRef,style:this.props.scrollableTabListStyle,onKeyDown:this._keyDownHandler,accessibilityLabel:i},e)},t.prototype._renderTabContent=function(){if(this.props.selectedTabId){for(var e=[],t=0,i=this.props.tabItems;t<i.length;t++){var r=i[t],a=this.props.selectedTabId===r.id;e.push(o.createElement(l.a,{renderHeaderFields:this.props.renderHeaderFields,renderFooterFields:this.props.renderFooterFields,key:"tab_"+r.id,id:this.props.id,tabId:r.id,tabName:r.name,showTab:a,labelledBy:r.id,columnStyle:this.props.columnStyle,sectionStyle:this.props.sectionStyle,cellStyle:this.props.cellStyle,cellContainerStyle:this.props.cellContainerStyle,style:Object(s.__assign)(Object(s.__assign)({},this.props.tabBasicStyle),a?this.props.selectedTabStyle:this.props.tabStyle),showFooterFieldsRenderInSection:this.props.showFooterFieldsRenderInSection,viewportElementId:this.props.viewportElementId}))}return o.createElement(C.a,{style:this.props.tabsContainerStyle},e)}return this.props.selectedRelatedEntity&&this.props.selectedRelatedEntity.isSelected?o.createElement(C.a,{style:this.props.containerStyle},this._renderAssociativeOrGanttGrid()):null},t.prototype.render=function(){for(var e=[],t=0;t<this.props.tabItems.length;t++){var i=this.props.tabItems[t].visible;if(this.props.tabItems[t].id!==k.b&&i){var s=this.props.tabItems[t].name,r=this.props.tabItems[t].label,l=this.props.tabItems[t].id,n=this.props.tabItems[t].previewId,d=this._createOnClick(l),p=this.props.selectedRelatedEntity&&this.props.selectedRelatedEntity.isSelected?k.a===l:this.props.selectedTabId===l;e.push(o.createElement(a.a,{key:s,tabName:s,label:r,isSelected:p,isScrollable:!0,relatedTabId:Object(N.g)(k.b,this.props.id),isFlyoutOpened:this.state.isFlyoutOpened,testhooks:Object(k.e)({id:this._dataId+s},n),id:Object(N.g)(l,this.props.id),tabLength:this.props.tabItems.length,onClick:d}))}}if(Object(k.d)(this.props.tabItems)){var c=Object(k.d)(this.props.tabItems),h=c.name,b=c.label,u=this.props.selectedTabId===k.b,y=c.previewId,f=this._createOnClick(k.b);e.push(o.createElement(a.a,{key:h,tabName:h,label:b,isSelected:u,isScrollable:!0,relatedTabId:Object(N.g)(k.b,this.props.id),isFlyoutOpened:this.state.isFlyoutOpened,testhooks:Object(k.e)({id:this._dataId+h},y),id:Object(N.g)(k.b,this.props.id),tabLength:this.props.tabItems.length,onClick:f}))}return this.props.returnTabsBody?this._renderTabContent():o.createElement(C.a,{style:this.props.headerStyle},this._renderTabList(e),this._renderTabFlyout())},t.prototype._closeFlyout=function(e){e&&e.target&&e.target.id!==k.b&&this._toggleFlyout()},t.prototype._ulRef=function(e){this._tabNavigatorList=e},t.prototype._selectRelatedEntityHandler=function(e){this._toggleFlyout(),this.props.selectRelatedTab(e,this.props.contextToken)},t}(o.Component);H.displayName="TabNavigator";var x=Object(n.a)((function(){var e=Object(k.f)(),t=Object(c.f)(),i=Object(g.a)(),o=Object(T.a)(),r=Object(I.h)(),l=null;return function(a,n){var h=r(a,O.f),b=Object(m.j)(a,n.id);Object(d.e)(l,b)||(l=b);for(var u=Object(f.g)(a,n.id),y=Object(v.c)(a),g=u,S=Object(f.m)(a,n.id),I=S?null:t(a,n),T=Object(c.e)(a,n,l),j=e(a,{props:n,resourceStrings:h,selectedRelatedEntity:T,isInCreateMode:S}),F=Object(p.wc)(a,n,l),C=!0,L=0,N=j;L<N.length;L++){F!==(W=N[L]).id||W.visible||(C=!1)}if(!C)for(var k=0,M=j;k<M.length;k++){var W;if((W=M[k]).visible){F=W.id;break}}var H=i(a,Object(s.__assign)(Object(s.__assign)({},n),{viewPortWidth:y}),n.headerCollapsed,n.enabledFormFCBs),x=Object(_.a)(a),D=Object(R.b)(a,n.id),A=o(a),B="",K=null,P=!0;g&&(B=g.entityTypeName,K=g.id,P=!g.bodyOnly);var Z=Object(w.a)(a,B),G=Object(E.h)(a,B);return{selectedTabId:F,relatedEntities:I,tabItems:j,selectedRelatedEntity:T,entityTypeName:B,entityId:K,tabListStyle:H.tabListStyle,scrollableTabListStyle:H.scrollableTabListStyle,tabBasicStyle:H.tabBasicStyle,containerStyle:H.containerStyle,tabsContainerStyle:H.tabsContainerStyle,headerStyle:H.headerStyle,cellContainerStyle:H.cellContainerStyle,selectedTabStyle:H.selectedTabStyle,semanticZoomListItemStyle:H.semanticZoomListItemStyle,customSemanticZoomButtonStyle:H.customSemanticZoomButtonStyle,overflowTabListItemStyle:H.overflowTabListItemStyle,contextToken:l,associatedGridContainerStyle:H.associatedGridContainerStyle,semanticZoomTabListItemWidthInEm:x.sizes.TabNavigator.SemanticZoomTabListItemWidthInEm,overflowtItemWidthInEm:x.sizes.TabNavigator.OverflowtItemWidthInEm,tabListItemStyles:A,formId:D,resourceStrings:h,isInCreateMode:S,entityDisplayName:G.DisplayName,showTabNavigator:P,viewportElementId:n.viewportElementId,isAuditFeatureEnabled:Z}}}),(function(e,t){return{selectTab:function(i,o,r){if(i===k.a){if(r){var l=Object(m.a)(o,r.relationshipName,r.ordinal),a=Object(s.__assign)(Object(s.__assign)({},r),{isSelected:!0});e(Object(h.b)(t.id,void 0,o)),e(Object(S.a)(t.id,l,a)),t.afterSelectTab()}}else{if(r&&r.isSelected){a=Object(s.__assign)(Object(s.__assign)({},r),{isSelected:!1});e(Object(L.b)(t.id,o,a))}e(Object(h.b)(t.id,i,o)),t.afterSelectTab()}},selectRelatedTab:function(i,o){if(i){var r=Object(m.a)(o,i.relationshipName,i.ordinal),l=Object(s.__assign)(Object(s.__assign)({},i),{isSelected:!0});e(Object(h.b)(t.id,void 0,o)),e(Object(S.a)(t.id,r,l)),t.afterSelectTab()}else e(Object(h.b)(t.id,void 0,o)),t.afterSelectTab()},updateVisitedTabNames:function(i){e(Object(F.b)(t.id,i))},retrieveMissingRelatedEntities:function(t){return e(Object(j.a)(t))}}}))(H)}}]),window.bundleExecutionMarkers["scripts/es5/mobilescrollabletabs.js?v=1.4.9962-v91onpremise"].end=window.performance.now(),window.reportBundleExecutionTimes&&window.reportBundleExecutionTimes();