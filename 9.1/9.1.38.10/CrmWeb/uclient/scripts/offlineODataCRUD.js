(window.bundleExecutionMarkers=window.bundleExecutionMarkers||{})["scripts/offlineODataCRUD.js?v=1.4.9962-v91onpremise"]={begin:performance.now()},(window.__wpJsonpUci=window.__wpJsonpUci||[]).push([[93],{jRuK:function(e,t,a){"use strict";a.r(t),a.d(t,"CREATE_ACTION_NAME",(function(){return j})),a.d(t,"oDataOfflineCreate",(function(){return k})),a.d(t,"transformPayload",(function(){return N}));var n=a("FZDd"),r=a("Uv1Y"),o=a("vSoM"),i=a("f07+"),c=a("a8zb"),s=a("iZ7K"),u=a("DRVD"),l=a.n(u),f=a("SZCI"),d=a("a8hT"),w=a("z+5+"),b=a("EXJz"),p=a("504W"),g=a("wHbR"),m=a("l3Ef"),O=a("d7fm"),y=a("0oMj"),h=a("TBkx"),v=a("/oKV");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
const j="xrmwebapi.offline.mdl.create",E=l.a.createEvent("XrmWebApiOfflineMDLCreate",f.w);function k(e,t,a=[]){return{type:j,execute:async({getState:s,dispatch:u},l)=>{var f,b,p;const g=E.startStopwatch(),m=l.TraceManager.getTracer("OfflineODataCRUD");try{N(s(),e,t,m),await u(Object(n.f)(e,!1,[]));let f=Object(o.a)(s(),l,[e],j);if(f)throw f;const b=new i.b(e,t);if(!Object(w.j)(s(),b))throw f=new r.a(b.getMetadata().operationName+" is not a supported MDL operation",-2147098612,null,null,null,null,null,[{name:"OfflineOperation",value:b.getMetadata().operationName}]),f;const p=await Object(d.b)();a.push({name:"CallingAction",value:j});const O=await u(p.executeOData(b,v.a.Local,a)),y=c.a.parseResponseAsEntityReference(O,e);return g(),y}catch(e){g(),m.error(null!==(f=e.message)&&void 0!==f?f:e);throw new r.a(null!==(b=e.message)&&void 0!==b?b:e,void 0,new Error(null!==(p=e.message)&&void 0!==p?p:e),e)}},getFailureParameters:(e,t)=>a}}function N(e,t,a,n){try{const o=Object(b.e)(Object.keys(a),t,e),i=[];Object.keys(o).forEach(c=>{if(!(c in a))return;const u=a[c],l=o[c];if(!Object(p.a)(u))switch(l){case"integer":case"bigint":const o=parseInt(u.toString(),10);if(isNaN(o))throw new r.a(Object(y.a)(-7005,[c]),-7005);a[c]=o;break;case"decimal":case"double":case"money":break;case"datetime":a[c]=u.toISOString();break;case"boolean":{const e=u.get_value();a[c]=0!==e;break}case"state":case"status":case"picklist":a[c]=u.get_value();break;case"uniqueidentifier":a[c]=u.toString();break;case"lookup":case"customer":case"owner":!function(e,t,a,n,o){const i=a[n],c=i.LogicalName,u=i.Id,l=Object(s.A)(e,t);let f=!1;for(const t in l)if((l[t].ReferencingAttribute===n||l[t].ReferencingEntityNavigationPropertyName===n)&&l[t].ReferencedEntity===c){f=!0;const r=Object(s.o)(e,c);a[l[t].ReferencingEntityNavigationPropertyName+"@odata.bind"]=`/${r}(${u})`,delete a[n]}if(!f){const e=`No navigation property found for attribute '${n}' with entity type '${c}'`,t=new r.a(e,-2147015424,new Error(e));throw o.error(`[${d||"OfflineODataCRUD"}] ${e}`),t}var d}(e,t,a,c,n);break;case"partylist":i.push(c);case"string":case"memo":case"unknown":case"entityname":break;default:throw new r.a(Object(y.a)(-7013,[c]),-7013)}}),function(e,t,a,n,r){if(0===n.length)return;const o=[];n.forEach(n=>{a[n].get_entities().forEach(a=>{const r=a.getValue(g.b.PartyId),i=Object(s.o)(e,r.LogicalName),c={};c[`${g.b.PartyId}_${r.LogicalName}@odata.bind`]=`/${i}(${r.Id.toString()})`,c[m.P]=Object(O.a)(t,n),o.push(c)}),delete a[n]});const i=Object(s.b)(e,t);a[i.ReferencedEntityNavigationPropertyName]=o}(e,t,a,i)}catch(e){throw n.error("Payload transformation failed with error: "+Object(h.e)(e)),e}}}}]),window.bundleExecutionMarkers["scripts/offlineODataCRUD.js?v=1.4.9962-v91onpremise"].end=window.performance.now(),window.reportBundleExecutionTimes&&window.reportBundleExecutionTimes();