Type.registerNamespace("Microsoft.Crm.Client.Application.PhoneApp");Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError=function(){};Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError.prototype={galleryNotAvailable:0,genericError:1,fileSizeBreached:2,userCanceled:3};Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError.registerEnum("Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError",!1);Microsoft.Crm.Client.Application.PhoneApp.StartPage=function(){this.$$d_$1j9=Function.createDelegate(this,this.$1j9);this.$$d_$289=Function.createDelegate(this,this.$289);this.$$d_$28A=Function.createDelegate(this,this.$28A);this.$$d_$2Bm=Function.createDelegate(this,this.$2Bm);this.$$d_$26d=Function.createDelegate(this,this.$26d);this.$$d_$2rx=Function.createDelegate(this,this.$2rx);this.$1hR=this.$$d_$2rx;this.$1hS=this.$$d_$26d;this.$nA=this.$$d_$2Bm;this.$Y1=!1};Microsoft.Crm.Client.Application.PhoneApp.StartPage.get_instance=function(){return Microsoft.Crm.Client.Application.PhoneApp.StartPage.$C};Microsoft.Crm.Client.Application.PhoneApp.StartPage.prototype={$1hR:null,$1hS:null,$nA:null,$Y1:!1,$WR:!1,$1XE:!1,$jc:!1,get_palEnabled:function(){return Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().get_PALEnabled()},get_hideCommandBar:function(){return Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$17.get_$2J().get_$2lg()},addNativeBridgeOnReadyOrNow:function(n){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().add_$15e(n)},getPhotoFromGallery:function(n,t,i){var r=Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$a5.get_$26a(),u,f;if(!r.get_$1wp()){i(0);return}u=this;f=this;Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$a5.$21R(!1,n,function(n){window.setTimeout(function(){var i={};i.FileName=n.get_$H7();i.FileContents=n.get_$H6();i.MimeType=n.get_$KR();t(i)},0)},function(n){window.setTimeout(function(){var f="MultimediaDispatcherErrorDomain",e="ImagePickerControllerError",t=n[Microsoft.Crm.Client.Core.Framework.ErrorConverter.$11f],r,u;if(t.startsWith(f))r=t.substr(f.length);else if(t.startsWith(e))r=t.substr(e.length);else{i(1);return}u=Number.parseInvariant(r);u===1?i(3):i(u===5?2:1)},0)})},saveAttachment:function(n,t,i,r,u,f){var e=new Microsoft.Crm.Client.Core.Framework.PAL.Dispatchers.$1i,o;e.set_$H6(n);e.set_$H7(t);e.set_$KR(i);e.set_$wf(r);o=this;Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$eM.$17K(e,function(n){e.set_$ju(n);u(e)},f)},openAttachment:function(n,t){Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$6g.$15k(n.get_$ju(),n.get_$H7(),n.get_$KR(),t)},setCommandBar:function(n,t,i){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_device().$36p(n,t,i)},setMasthead:function(n){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_device().setMasthead(n)},setServerVersion:function(n,t){var i,r;this.get_palEnabled()&&(i={},i.serverversion=n,i.databaseversion=t,this.$jc||(r=this,window.setTimeout(function(){r.setServerVersion(n,t)},10)),Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$2l(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$17,Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_$1y().get_$2V(),new Microsoft.Crm.Client.Core.Framework.PAL.Dispatchers.$4u(i)))},signOut:function(){this.get_palEnabled()&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Cp.$1ll()},bootstrap:function(n){this.get_palEnabled()&&this.$1qQ(n,!0,!1)},start:function(n){var t=window.applicationCache,i,r,u,f,o,e;if(!$0.$0(t)){this.$WR=!0;i=this;t.onupdateready=function(n){i.$lt(n);i.$WR=!1;t.status===4?(Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,"AppCache: SwapCache"),t.swapCache(),i.$nk(1,Microsoft.Crm.Client.Core.Framework.$7.$k("Appcache updated").$Oa(),0)):i.$nl()};r=this;t.onerror=function(n){r.$lt(n);r.$WR=!1;r.$nl()};u=this;t.onnoupdate=function(n){u.$lt(n);u.$WR=!1;u.$nl()};f=this;t.oncached=function(n){f.$lt(n);f.$WR=!1;f.$nl()};try{Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,"AppCache: Start Update");t.update()}catch(s){Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,"AppCache: Update threw exception");this.$WR=!1;this.$nl()}}o=this.$2hJ(n);e="liveid"in o;this.get_palEnabled()?this.$1qQ(n,e,!0):e?Microsoft.Crm.Client.Core.Framework.Trace.logError(97,"Unsupported client server configuration"):this.$1j9()},$lt:function(n){var t="ApplicationCacheObjectWasNull",i=window.applicationCache;if(!$0.$0(i))switch(i.status){case 2:t="Checking";break;case 3:t="Downloading";break;case 1:t="Idle";break;case 5:t="Obsolete";break;case 0:t="Uncached";break;case 4:t="UpdateReady"}try{Microsoft.Crm.Client.Core.Framework.Trace.logInfo(5,String.format("AppCache Event {0}. Status : {1}. Details : {2}",n.type,t,JSON.stringify(n)))}catch(r){}},$1qQ:function(n,t,i){Microsoft.Crm.Client.Core.Framework.Trace.set_$AC(!1);Microsoft.Crm.Client.Core.Framework.$u.set_$1Yu(0);Microsoft.Crm.Client.Core.Framework.$1D.set_$243(!1);Microsoft.Crm.Client.Core.Framework.AuthenticationManager.set_defaultInstance(Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$sM(n,t,i));this.addNativeBridgeOnReadyOrNow(i?this.$1hR:this.$1hS)},$2hJ:function(n){var f=Microsoft.Crm.Client.Core.Framework.Utils.$19.$Rc(n),r={},u=f,t,i;for(t in u)i={key:t,value:u[t]},r[i.key.toLowerCase()]=i.value.toLowerCase();return r},$2rx:function(){var n,t;if(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_$1y().get_$2IK()===1){n=Microsoft.Crm.Client.Core.Framework.$7.$k("");n.$m=-2147094014;this.$nk(0,n.$Oa(),0);return}t=this;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.add_$Oy(function(n,i){var r=i,u;Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"StartPage OnAuthenticated: FirstPageLoad. Arguments: "+JSON.stringify(r));u=n;r.$HN||u.get_$Ds()!==1?Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"StartPage OnAuthenticated: FirstPageLoad. Could not redirect because IsError is true OR AuthManager.Status is != Ready"):t.$1j9()});this.$26d()},$26d:function(){var t=this,n;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.add_$Oy(function(n,i){var r=i,u;Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"StartPage OnAuthenticated: SubsequentPageLoad. Arguments: "+JSON.stringify(r));u=n;r.$HN?t.$nk(0,r.$OE.$Oa(),r.$OE.$JN):u.get_$Ds()===1&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$17.$1ro()});Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().add_$28R(this.$$d_$28A);Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().add_$28G(this.$$d_$289);Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.$1Vy();n=this;window.setTimeout(function(){n.$1XE=!0;n.$nl()},0)},$28A:function(){this.$Y1&&(Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.$1Py(),Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.add_$Oy(this.$nA))},$2Bm:function(){Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.remove_$Oy(this.$nA);this.$Y1=!1},$289:function(){this.$Y1=!0},$nl:function(){this.$1XE&&!this.$WR&&(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1DM(null),this.$jc=!0)},$nk:function(n,t,i){i===1?Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Cp.$101(n,t):Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$17.$10a(n,t)},$1j9:function(){var n,t,i;if(this.$WR){Microsoft.Crm.Client.Core.Framework.Trace.logWarning(5,"Delaying RedirectToDefault since the AppCache update is still pending");window.setTimeout(this.$$d_$1j9,100);return}n=Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$C.$6o;t=n+"/m/default.aspx?client_type=MobileClient&HideMasthead=true";Microsoft.Crm.Client.Core.Framework.Trace.logInfo(159,"Do RedirectToDefaultPage");i=this;window.setTimeout(function(){window.location.replace(t)},100)}};Microsoft.Crm.Client.Application.PhoneApp.StartPage.registerClass("Microsoft.Crm.Client.Application.PhoneApp.StartPage");Microsoft.Crm.Client.Application.PhoneApp.StartPage.$C=new Microsoft.Crm.Client.Application.PhoneApp.StartPage
//# sourceMappingURL=../../../../../../../../../../Symbols/retail/amd64/jsmin/Microsoft.Crm.Client.Application.PhoneApp.js.srcmap
