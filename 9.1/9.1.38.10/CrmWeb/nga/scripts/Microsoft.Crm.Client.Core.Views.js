Type.registerNamespace("Microsoft.Crm.Client.Core.Commands");Microsoft.Crm.Client.Core.Commands.PinCommand=function(n,t){this.$$d_$2vZ=Function.createDelegate(this,this.$2vZ);this.$$d_$nr=Function.createDelegate(this,this.$nr);this.$$d_$2E=Function.createDelegate(this,this.$2E);Microsoft.Crm.Client.Core.Commands.PinCommand.initializeBase(this);var i=t.InitializationParameters;this.set_$1z(this.$$d_$2E);this.$9e=n;this.$T=i.TargetViewModel;this.$Hl=i.StartScreen?"{D04E4181-ED85-4305-A3DC-3DA59C00F25B}":Microsoft.Crm.Client.Core.Framework.Guid.get_empty().toString();this.$13q="IsBoundToScreen"in i&&i.IsBoundToScreen;this.$1PC=this.$9e.$1G;this.$1n7();this.get_CanExecute()&&(this.$nr(),Microsoft.Crm.Client.Core.ViewModels.ListComponentViewModel.isInstanceOfType(this.$T)&&(this.$ue=this.$$d_$nr,this.$T.add_$td(this.$ue)))};Microsoft.Crm.Client.Core.Commands.PinCommand.$$cctor=function(){Microsoft.Crm.Client.Core.ViewModels.CommandFactory.$1C("PinCommand",Microsoft.Crm.Client.Core.Commands.PinCommand.$n)};Microsoft.Crm.Client.Core.Commands.PinCommand.$1X0=function(){Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$2j4(function(n){Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.$nB(new Microsoft.Crm.Client.Core.Framework.Guid("{D04E4181-ED85-4305-A3DC-3DA59C00F25B}"),Microsoft.Crm.Client.Core.Commands.PinCommand.get_$Y()).done(function(t){for(var h,i,r=new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$38)),e=new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String)),o={},s=n,l=s.length,u=0;u<l;++u)h=s[u],o[h]=null;for(var c=t.$SA,a=c.length,f=0;f<a;++f)i=c[f],i.$Ci.toString()in o||(r.add(i),e.add(i.$Ci.toString()));r.get_Count()>0&&(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.$1Ef(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$56(new Microsoft.Crm.Client.Core.Framework.Guid("{D04E4181-ED85-4305-A3DC-3DA59C00F25B}"),r.toArray()),Microsoft.Crm.Client.Core.Commands.PinCommand.get_$Y()),Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$2Op(e.toArray()))})})};Microsoft.Crm.Client.Core.Commands.PinCommand.get_$Y=function(){return Microsoft.Crm.Client.Core.Framework.$q.$4t("","PinCommand")};Microsoft.Crm.Client.Core.Commands.PinCommand.$n=function(n,t){return new Microsoft.Crm.Client.Core.Commands.PinCommand(n,t)};Microsoft.Crm.Client.Core.Commands.PinCommand.$2Q8=function(n){var i=window.document.createElement("img"),t,r;return i.setAttribute("src",n),t=window.document.createElement("canvas"),t.width=i.getAttribute("width"),t.height=i.getAttribute("height"),t.getContext("2d").drawImage(i,0,0),r=t.toDataURL("image/png"),r.substr(22)};Microsoft.Crm.Client.Core.Commands.PinCommand.prototype={$9e:null,$T:null,$Hl:null,$13q:!1,$1PC:null,$ue:null,$2H:null,$1RI:null,$2vZ:function(n,t){this.$2H===t.$2H&&this.$nr()},$1qc:function(){var r=Microsoft.Crm.Client.Core.Framework.Guid.tryCreate(this.$Hl),u,h,f,c,i,e,o,s;if(!Microsoft.Crm.Client.Core.Framework.$3.$9(this.$T.get_$1u())&&Microsoft.Crm.Client.Core.ViewModels.ListComponentViewModel.isInstanceOfType(this.$T)&&(u=this.$T,!$0.$0(u.$q)))return Microsoft.Crm.Client.Core.Models.$3p.$X(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$38(r,this.$T.get_$1u(),new Microsoft.Crm.Client.Core.Framework.Guid(u.$q),1,u.$88));if(!$0.$0(this.$T.get_$1B()))return h=this.$T.get_$1B(),Microsoft.Crm.Client.Core.Models.$3p.$1Dv(r,h.$I);if(this.$T.$g===1&&(f=this.$T,!$0.$0(f.$q)))return c="IsPowerBIDashboard="+f.$14O.toString(),Microsoft.Crm.Client.Core.Models.$3p.$X(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$38(r,"Workspace".toUpperCase(),new Microsoft.Crm.Client.Core.Framework.Guid(f.$q),4,c));if(this.$T.$g===50){var l=this.$T.get_Root(),t=l.$CL.powerBIFullScreenComponent,n={};n.externalContextPowerBIUrl=t.$Po;n.groupId=t.$Sd;n.dashboardId=t.$Sc;n.tileId=t.$dM;n.reportId=t.$dL;n.reportEmbedUrl=t.$in;n.powerBIComponentType=t.$W2;i="";e=n;for(o in e)s={key:o,value:e[o]},i+=String.format("{0}={1}&",CrmEncodeDecode.CrmUrlEncode(s.key),CrmEncodeDecode.CrmUrlEncode(s.value));return i=i.substring(0,i.length-1),Microsoft.Crm.Client.Core.Models.$3p.$X(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$38(r,"PowerBIFullScreenPage".toUpperCase(),Microsoft.Crm.Client.Core.Framework.Guid.get_empty(),5,i))}return Microsoft.Crm.Client.Core.Framework.Trace.logError(1014,"Attempted to pin with unrecognized context."),Error.invalidOperation("Attempted to pin with unrecognized context."),null},$1n7:function(){var n,t;this.$13q&&this.$Hl!==Microsoft.Crm.Client.Core.Framework.Guid.get_empty().toString()?Error.argument("descriptor","Pin command must have empty ScreenId if it is bound to the pin screen."):!this.$13q&&Microsoft.Crm.Client.Core.Framework.$3.$9(this.$Hl)&&Error.argument("descriptor","Pin command must have non-empty ScreenId if not bound to the pin screen.");n=!$0.$0(this.$T);(this.$T.get_$1u()==="opportunityproduct"||this.$T.get_$1u()==="productpricelevel")&&(n=!1);this.$Hl!=="{D04E4181-ED85-4305-A3DC-3DA59C00F25B}"||Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$1U||(n=!1);this.$T.get_$BV()&&(n=!1);Microsoft.Crm.Client.Core.ViewModels.ListComponentViewModel.isInstanceOfType(this.$T)&&(t=this.$T,Microsoft.Crm.Client.Core.Framework.$3.$9(t.$88)||(n=!1),this.$13q&&(n=!1),!Microsoft.Crm.Client.Core.ViewModels.MultilineListViewModel.isInstanceOfType(t)||t.$fc||Microsoft.Crm.Client.Core.Framework.$6.get_$3A()||(n=!1));this.set_CanExecute(n)},$nr:function(){var t,n,i;this.$2h||(t=this.$1qc(),$0.$0(t))||($0.$0(this.$2H)&&(this.$2H=t.get_$25().get_$8a(),Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$5F().$1VM(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$38,this.$2H,this.$$d_$2vZ)),this.$Hl==="{D04E4181-ED85-4305-A3DC-3DA59C00F25B}"&&Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$1U&&this.$39W(1e3),n=this,i=this,t.$1rH().then(function(t){if(!$0.$0(n.$9e)){var i=n.$9e.$Ee;t?(n.$9e.set_Label(Microsoft.Crm.Client.Core.Framework.$3.$IY(Microsoft.Crm.Client.Core.Framework.Common.$2.$4("L_PinCommand_Unpin_Text"),n.$1PC)),i["data-pinned"]="1",Microsoft.Crm.Client.Core.ViewModels.$7n.isInstanceOfType(n.$9e)&&n.$9e.set_ImageName("Unpin")):(n.$9e.set_Label(Microsoft.Crm.Client.Core.Framework.$3.$IY(Microsoft.Crm.Client.Core.Framework.Common.$2.$4("L_PinCommand_Pin_Text"),n.$1PC)),i["data-pinned"]=null,Microsoft.Crm.Client.Core.ViewModels.$7n.isInstanceOfType(n.$9e)&&n.$9e.set_ImageName("Pin"));n.$9e.set_TestabilityAttributes(i)}},function(n){Error.create(String.format("PinCommand has failed in UpdateLabelAndIcon:\n\n {0}",n.$F))}))},$39W:function(n){var t=new Date;(!this.$1RI||t.getTime()-this.$1RI.getTime()>n)&&(this.$1RI=new Date,Microsoft.Crm.Client.Core.Commands.PinCommand.$1X0())},$2E:function(){var t=this.$1qc(),n=this,i=this;t.$1rH().then(function(i){if(i)n.$Hl==="{D04E4181-ED85-4305-A3DC-3DA59C00F25B}"?Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$2U9(t.get_$25().$Ci.toString(),n.$9e.$15v,n.$9e.$15w,Number.parseInvariant(n.$9e.$Ih.toString()),Number.parseInvariant(n.$9e.$FU.toString()),function(i){i&&(n.$r4(t.get_$25()),window.document.body.focus())}):n.$r4(t.get_$25());else if(n.$Hl==="{D04E4181-ED85-4305-A3DC-3DA59C00F25B}"){var e={forcerefresh:!0,pinnedtilemodel:t},f=new Microsoft.Crm.Client.Core.Models.Descriptors.ViewModel.QueryDescriptor("PopulateTileData",e),r,u;Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().$ld?(r=window.innerWidth/2-Number.parseInvariant(n.$9e.$FU.toString())/2,u=window.innerHeight/2):(r=n.$9e.$15v,u=n.$9e.$15w);f.OnSuccess=function(){var f=new Microsoft.Crm.Client.Core.Models.Tiles.Factories.$Kt,i=f.$1ts(t),e=n.$3AC("CRM "+i.get_LeftCornerText());Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$2T2(t.get_$25().$Ci.toString(),n.$2N2(t.get_$25()),e,i.get_$Ja(),r,u,Number.parseInvariant(n.$9e.$Ih.toString()),Number.parseInvariant(n.$9e.$FU.toString()),function(r,u){if(r){n.$2Cr(t.get_$25());var f=Microsoft.Crm.Client.Core.Commands.PinCommand.$2Q8(i.get_$1IT());Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$Pc.$34a(t.get_$25().$Ci.toString(),i.get_$38s(),i.get_$38t(),i.get_$19A(),i.get_$3D7(),f,u.length?"name":"none");Microsoft.Crm.Client.Core.ViewModels.ApplicationShellViewModel.get_instance().get_$10e().collapse()}})};Microsoft.Crm.Client.Core.ViewModels.ApplicationShellViewModel.get_instance().$1t("ActionProvider",n.$T,f)}else n.$2Cr(t.get_$25())},function(n){Error.create(String.format("PinCommand has failed in OnExecute:\n\n {0}",n.$F))})},$3AC:function(n){return Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().$gH&&n.length>15&&(n=n.substr(0,14)+"â€¦"),n},$2Cr:function(n){var t=this,i=this;Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.$1Dy(n).then(function(){Microsoft.Crm.Client.Core.Framework.$8.$1E("PinCommand_OnExecute_CreateTile_Success",1014,n.get_$8a());t.$nr();Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.$nB(n.$PJ,Microsoft.Crm.Client.Core.Commands.PinCommand.get_$Y())},function(n){Error.create(String.format("PinCommand has failed in CreatePinnedTile:\n\n {0}",n.$F))})},$r4:function(n){var t=this,i=this;Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.$1Ee(n).then(function(){Microsoft.Crm.Client.Core.Framework.$8.$1E("PinCommand_OnExecute_DeleteTile_Success",1014,n.get_$8a());t.$nr();Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.$nB(n.$PJ,Microsoft.Crm.Client.Core.Commands.PinCommand.get_$Y())},function(n){Error.create(String.format("PinCommand has failed in DeletePinnedTile:\n\n {0}",n.$F))})},$2N2:function(n){var t;switch(n.$FR){case 1:t="entitylist";break;case 4:t="dashboard";break;default:t="entityrecord"}return Microsoft.Crm.Client.Core.Framework.$3.$IY("{0}={1}&{2}={3}&{4}={5}","navetn",CrmEncodeDecode.CrmUrlEncode(n.$C8),"navid",CrmEncodeDecode.CrmUrlEncode(n.$Ci.toString()),"navpagetype",CrmEncodeDecode.CrmUrlEncode(t))},$Oh:function(){$0.$0(this.$ue)||$0.$0(this.$T)||(this.$T.remove_$td(this.$ue),this.$ue=null);this.$T=null;this.$9e=null;$0.$0(this.$2H)||Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$5F().$1jW(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$38,this.$2H,this.$$d_$2vZ);Microsoft.Crm.Client.Core.Framework.Binding.$2z.prototype.$Oh.call(this)}};Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand=function(){this.$$d_$2E=Function.createDelegate(this,this.$2E);Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.initializeBase(this);this.set_$1z(this.$$d_$2E)};Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.$$cctor=function(){Microsoft.Crm.Client.Core.ViewModels.CommandFactory.$1C("ShowPerformanceCommand",Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.$n)};Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.$n=function(){return new Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand};Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.prototype={$2E:function(){Microsoft.Crm.Client.Core.ViewModels.PerformanceReport.TogglePerformanceResultsVisibility()}};Microsoft.Crm.Client.Core.Commands.PinCommand.registerClass("Microsoft.Crm.Client.Core.Commands.PinCommand",Microsoft.Crm.Client.Core.Framework.Binding.$2z);Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.registerClass("Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand",Microsoft.Crm.Client.Core.Framework.Binding.$2z);Microsoft.Crm.Client.Core.Commands.PinCommand.$$cctor();Microsoft.Crm.Client.Core.Commands.ShowPerformanceCommand.$$cctor()
//# sourceMappingURL=../../../../../../../../../../Symbols/retail/amd64/jsmin/Microsoft.Crm.Client.Core.Views.js.srcmap
