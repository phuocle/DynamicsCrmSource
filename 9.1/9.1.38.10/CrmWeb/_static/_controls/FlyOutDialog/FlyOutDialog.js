Type.registerNamespace("Mscrm");Mscrm.IFlyOutContainer=function(){};Mscrm.IFlyOutContainer.registerInterface("Mscrm.IFlyOutContainer");Mscrm.ErrorFlyout=function(anchor,messageContainer,contentContainer){this.$$d_onPageResize=Function.createDelegate(this,this.onPageResize);Mscrm.CrmDebug.assert(!IsNull(anchor),"Parameter named 'anchor' is null or undefined!");Mscrm.CrmDebug.assert(!IsNull(messageContainer),"Parameter named 'messageContainer' is null or undefined!");Mscrm.CrmDebug.assert(!IsNull(contentContainer),"Parameter named 'contentContainer' is null or undefined!");if(!IsNull(anchor)&&!IsNull(messageContainer)){this._anchor=anchor;this._containerElement=messageContainer;this._contentContainer=contentContainer;this._forceFlipped=false;this._arrowIcon=$P_CRM("<span></span>").addClass("ms-crm-Inline-ErrorArrowIcon").append($P_CRM(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/arrow.png"))).attr("alt","")).hide().insertAfter(this._containerElement);$P_CRM(window).bind("resize",this.$$d_onPageResize)}};Mscrm.ErrorFlyout.prototype={_contentContainer:null,_arrowIcon:null,_anchor:null,_containerElement:null,_forceFlipped:false,get_forceFlipped:function(){return this._forceFlipped},set_forceFlipped:function(value){this._forceFlipped=value;return value},get_zIndex:function(){return Mscrm.Utilities.parseInt(this._arrowIcon.css("z-index"))},set_zIndex:function(value){this._arrowIcon.css("z-index",value.toString());this._containerElement.css("z-index",value.toString());return value},configureFlyoutPosition:function(anchor,messageContainer,errorArrowIcon){var $v_0=anchor.scrollParent,$v_1=!IsNull($v_0)?$v_0.call(anchor):this._contentContainer,$v_2=$v_1.offset(),$v_3=$v_1.outerWidth(false),$v_4=$v_1.outerHeight(false),$v_5=!IsNull($v_2)?$v_2.top:0,$v_6=!IsNull($v_2)?$v_2.left:0,$v_7=anchor.offset(),$v_8=anchor.outerWidth(false),$v_9=anchor.outerHeight(false),$v_A=$v_7.top,$v_B=$v_7.left+$v_8/2,$v_C=errorArrowIcon.outerWidth(false),$v_D=errorArrowIcon.outerHeight(false),$v_E=$v_B-$v_C/2,$v_F=0,$v_G=messageContainer.outerWidth(false),$v_H=messageContainer.outerHeight(false),$v_I=$v_B-$v_G/2,$v_J=0;if($v_I<$v_6)$v_I=$v_6;else{var $v_L=$v_I+$v_G-($v_6+$v_3);if($v_L>0)$v_I-=$v_L}var $v_K=this._forceFlipped?true:$v_A+$v_9+$v_D+$v_H>$v_5+$v_4;if($v_K){$v_F=$v_A-$v_D;$v_J=$v_F-$v_H;errorArrowIcon.addClass("ms-crm-VerticalFlipMargin");errorArrowIcon.children().addClass("ms-crm-VerticalFlip")}else{$v_F=$v_A+$v_9;$v_J=$v_F+$v_D;if(errorArrowIcon.hasClass("ms-crm-VerticalFlipMargin")){errorArrowIcon.removeClass("ms-crm-VerticalFlipMargin");errorArrowIcon.children().removeClass("ms-crm-VerticalFlip")}}errorArrowIcon.css({top:$v_F+"px",left:$v_E+"px"});messageContainer.css({top:$v_J+"px",left:$v_I+"px"})},showError:function(errorMessage){this._containerElement.text(errorMessage);var $$t_1=this;window.setTimeout(function(){$$t_1._arrowIcon.show();$$t_1._containerElement.show();$$t_1._anchor.show();$$t_1.configureFlyoutPosition($$t_1._anchor,$$t_1._containerElement,$$t_1._arrowIcon)},0)},hideError:function(hideAnchor){var $$t_1=this;window.setTimeout(function(){!IsNull(hideAnchor)&&hideAnchor&&$$t_1._anchor.hide();$$t_1._arrowIcon.hide();$$t_1._containerElement.hide()},0)},onPageResize:function(e){this.validationElementVisible(this._containerElement)&&this.configureFlyoutPosition(this._anchor,this._containerElement,this._arrowIcon)},validationElementVisible:function(messageContainer){return messageContainer.css("display")==="block"},dispose:function(){$P_CRM(window).unbind("resize",this.$$d_onPageResize)}};Mscrm.FlyOutButton=function(tooltip,click){this.$z_0=tooltip;this.$12_0=click};Mscrm.FlyOutButton.prototype={$z_0:null,$12_0:null,get_tooltip:function(){return this.$z_0},set_tooltip:function(value){this.$z_0=value;return value},get_click:function(){return this.$12_0}};Mscrm.FlyOutPosition=function(){};Mscrm.FlyOutDialogEventName=function(){};Mscrm.FlyOutButtonType=function(){};Mscrm.ErrorFlyOutConstant=function(){};Mscrm.FlyOutCssClassNames=function(){};Mscrm.FlyOutElementTemplate=function(){};Mscrm.SystemErrorCodes=function(){};Mscrm.FlyOutDialog=function(){this.$$d_onCancelButtonClick=Function.createDelegate(this,this.onCancelButtonClick);this.$$d_onConfirmButtonClick=Function.createDelegate(this,this.onConfirmButtonClick);this.$$d_$2A_0=Function.createDelegate(this,this.$2A_0);this.$7_0=$P_CRM(this);this.$0_0=new Mscrm.FlyOutOptions;this.$0_0.$5_0=true;this.$B_0="bottom"};Mscrm.FlyOutDialog.setupDialogButtonWithIcon=function(dialogChrome,buttonSelector,buttonTextSelector,imageUri,buttonId,tabIndex){var $v_0=$P_CRM(buttonSelector,dialogChrome),$v_1=$P_CRM(buttonTextSelector,$v_0),$v_2=$(document.getElementsByClassName("ms-crm-ProcessSwitcher-Subtitle"));if(!IsNull($v_0[0])&&$v_0[0].nodeName==="BUTTON"&&!IsNull($v_0[0].parentNode)){var $v_3=document.createElement("a");$v_3.setAttribute("href","#");$v_3.className="ui-dialog-titlebar-close ui-corner-all";$v_3.setAttribute("role","button");var $v_4=document.createElement("span");$v_4.innerHTML=$v_0[0].innerText;$v_4.className="ui-icon ui-icon-closethick";$v_3.appendChild($v_4);$v_0[0].parentNode.replaceChild($v_3,$v_0[0])}$v_0.length>0&&!isNullOrEmptyString(buttonId)&&$v_0.attr("id",buttonId);if($v_1.length>0){var $v_5=$v_1.text();$v_1.remove();var $v_6=$P_CRM(Mscrm.ImageStrip.getImage(imageUri));$v_6.attr("alt",$v_5);$v_6.attr("title",$v_5);$v_0.attr("tabIndex",tabIndex.toString());$v_0.append($v_6)}};Mscrm.FlyOutDialog.setupDialogButton=function(dialogChrome,buttonSelector,buttonId,tabIndex){var $v_0=$P_CRM(buttonSelector,dialogChrome);if($v_0.length>0&&!isNullOrEmptyString(buttonId)){$v_0.attr("id",buttonId);$v_0.attr("tabIndex",tabIndex.toString());$v_0.html("<div style=min-width:58px>"+$v_0.html()+"</div>")}};Mscrm.FlyOutDialog.get_$1p=function(){if(IsNull(Mscrm.FlyOutDialog.$G)){var $v_0=$P_CRM("<img></img>");$v_0.attr("src",Mscrm.CrmUri.create(window.CDNURL+"/_imgs/AdvFind/progress.gif").toString());Mscrm.FlyOutDialog.$G=$P_CRM("<div></div>");Mscrm.FlyOutDialog.$G.addClass("ms-crm-flyout-loadingcontent");Mscrm.FlyOutDialog.$G.append($v_0);Mscrm.FlyOutDialog.$G.appendTo(document.body)}return Mscrm.FlyOutDialog.$G};Mscrm.FlyOutDialog.prototype={$7_0:null,$0_0:null,$3_0:null,$J_0:null,$W_0:null,$b_0:false,$B_0:null,$6_0:null,$F_0:null,$1D_0:null,$y_0:true,$16_0:true,$N_0:0,$X_0:null,$1A_0:35,$Z_0:false,$p_0:false,$h_0:false,$1I_0:true,$1G_0:false,$17_0:null,$H_0:null,get_viewport:function(){return this.$F_0},set_viewport:function(value){this.$F_0=value;return value},$D_0:0,$P_0:0,get_options:function(){return this.$0_0},get_position:function(){return this.$B_0},set_position:function(value){this.$B_0=value;return value},get_visible:function(){return this.$b_0},get_coverCommandBarWithOverlay:function(){return this.$h_0},set_coverCommandBarWithOverlay:function(value){this.$h_0=value;return value},get_hideFlyOutOnConfirmClick:function(){return this.$y_0},set_hideFlyOutOnConfirmClick:function(value){this.$y_0=value;return value},get_hideFlyOutOnCancelClick:function(){return this.$16_0},set_hideFlyOutOnCancelClick:function(value){this.$16_0=value;return value},get_dialogLeft:function(){return this.$D_0},set_dialogLeft:function(value){this.$D_0=value;return value},get_actionDropDownHeightAdjustment:function(){return this.$1A_0},set_actionDropDownHeightAdjustment:function(value){this.$1A_0=value;return value},get_dialogTop:function(){return this.$P_0},set_dialogTop:function(value){this.$P_0=value;return value},get_id:function(){return this.$1D_0},get_buttonsInitialTabIndex:function(){return this.$N_0},set_buttonsInitialTabIndex:function(value){this.$N_0=value;return value},get_jQueryDialog:function(){return this.$3_0},set_jQueryDialog:function(value){this.$3_0=value;if(IsNull(value))this.$H_0=null;else{!IsNull(this.$H_0)&&this.$1R_0();this.$H_0=this.$3_0.parents(".ui-dialog").first();this.$1k_0(this.$H_0)}return value},get_isCompositeFlyOut:function(){return this.$Z_0},set_isCompositeFlyOut:function(value){this.$Z_0=value;return value},get_overflow:function(){return this.$p_0},set_overflow:function(value){this.$p_0=value;return value},$1Q_0:function($p0){var $v_0=$P_CRM("#"+this.$c_0($p0));if(!IsNull($v_0)&&$v_0.length>0)return true;else return false},$2A_0:function($p0){switch($p0.keyCode){case 27:if(this.$Z_0){this.$7_0.triggerHandler("flyout-confirming");this.$3_0.dialog("close");this.$7_0.triggerHandler("flyout-closed")}else this.$7_0.triggerHandler("flyout-canceled");$p0.stopPropagation();break;case 9:if(this.$0_0.$R_0)break;if($p0.shiftKey){var $v_0=$P_CRM($p0.target);if(IsNull($p0.target.getAttribute("data-attributename"))){var $v_1=$v_0.parents("div[data-attributename]");if(!IsNull($v_1))$v_0=$v_1.first()}$v_0[0]===this.get_firstTabAbleElement()&&$p0.preventDefault();this.$2N_0($v_0)}else($p0.target.id===this.$c_0("close")||$p0.target.id===this.$c_0("cancel")&&!this.$0_0.$T_0||!this.$1Q_0("cancel")&&$p0.target.id===this.$c_0("confirm"))&&this.$1g_0();break;default:break}},get_firstTabAbleElement:function(){if(IsNull(this.$X_0)){var $v_0=$P_CRM("div.ms-crm-Inline-Chrome",this.$J_0);if($v_0.length)this.$X_0=$v_0[0]}return this.$X_0},initializeForReuse:function(){this.$X_0=null;Mscrm.FlyOutDialog.$G=null},$1g_0:function(){if(!this.$0_0.$w_0)return;if(IsNull(this.get_firstTabAbleElement()))return;this.setFocusOnFirstElement()},setFocusOnFirstElement:function(){if(IsNull(this.get_firstTabAbleElement()))return;this.$1L_0($P_CRM(this.get_firstTabAbleElement()))},$2N_0:function($p0){if(!IsNull($p0)&&$p0.length>0){if(IsNull(this.get_firstTabAbleElement()))return;if($p0[0]===this.get_firstTabAbleElement()){var $v_0=null;if(this.$0_0.$T_0)$v_0=".ui-dialog-titlebar .ui-dialog-titlebar-close";else if(this.$1Q_0("cancel"))$v_0=String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",2);else $v_0=String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",1);this.$1L_0($P_CRM($v_0,this.dialogChrome()))}}},$1L_0:function($p0){if(!IsNull($p0)){var $$t_1=this;window.setTimeout(function(){$p0.focus()},0)}},show:function(anchor,viewport){this.$1q_0();if(IsNull(anchor)){Mscrm.CrmDebug.fail("anchor should not be null.");throw Error.argumentNull("anchor")}if(anchor.length!==1){Mscrm.CrmDebug.fail("anchor should only contain one element.");throw Error.argumentOutOfRange("anchor.Length",anchor.length)}this.$6_0=anchor;this.$0_0.$I_0&&this.$6_0.addClass("li-selectedflyoutbutton");this.configureDialogPosition();if(this.$F_0!==viewport){this.$F_0=viewport;if(!IsNull(viewport)){if(viewport.length!==1){Mscrm.CrmDebug.fail("viewport should only contain one element.");throw Error.argumentOutOfRange("viewport.Length",viewport.length)}this.dialogChrome().appendTo(viewport)}}if(!IsNull(this.$3_0.parent())&&!this.$Z_0){var $v_1=Mscrm.Utilities.get_isLeftToRight()?"calc("+this.$D_0+"px - 12%)":"calc("+this.$D_0+"px + 12%)",$v_2=anchor.hasClass("ms-crm-CommandBar-MoreMenu")||anchor.hasClass("ms-crm-ImageStrip-SearchFilter_Hover_16")?$v_1:this.$D_0+"px";this.$3_0.parent().css("top",this.$P_0+"px");this.$3_0.parent().css("left",$v_2);this.$3_0.parent().css("z-index","1002");this.$3_0.parent().css("position","fixed")}if(!IsNull(this.$3_0.parent())&&this.$Z_0){var $v_3=anchor[0].getAttribute("id").toString(),$v_4=window.top.document.getElementById("crmTopBar").offsetTop,$v_5=$get($v_3).offsetTop,$v_6=$v_5-$v_4,$v_7=$get("mainContainer").offsetLeft,$v_8=15,$v_9=0;if(window.LOCID_UI_DIR==="RTL")$v_9=this.$D_0-$v_7-8-$v_8;else $v_9=this.$D_0-$v_7-8;this.$3_0.parent().css("top",$v_6+"px");this.$3_0.parent().css("left",$v_9+"px");this.$3_0.parent().css("z-index","1002")}this.$3_0.dialog("open");this.$2M_0();this.$22_0();var $v_0=this.$b_0;this.$b_0=true;Mscrm.FlyOutDialog.currentDialog=this;if(IsNull(this.$J_0))this.$7_0.triggerHandler("flyout-loadcontent");else{this.$1j_0();this.$1g_0()}!$v_0&&this.$7_0.triggerHandler("flyout-visiblechanged");(window.UseTabletExperience||Mscrm.CrmBrowser.get_currentBrowser().get_isTouchEnabled())&&$P_CRM("body").addClass("AutoScrolling");if(this.$h_0)if(window.parent&&window.parent.document&&window.parent.document.getElementById("crmTopBar")){var $v_A=document.createElement("div");$v_A.setAttribute("class","ui-widget-overlay ui-widget-overlay-flyout ui-widget-overlay-flyout-dark rollup CommandBarOverlayFlyOut");$v_A.id="CommandBarOverlayDiv";window.parent.document.getElementById("crmTopBar").appendChild($v_A)}},hide:function(){if(!this.$b_0)return;Type.parse("Mscrm.InlineEditDataService")&&Mscrm.InlineEditDataService.set_blockAutoSave(false);if(Mscrm.Utilities.isIosDevice()||Mscrm.CrmBrowser.get_currentBrowser().get_isAndroid()){var $v_0=$P_CRM(".ui-widget-overlay");$v_0.remove()}this.$3_0.dialog("close");this.$1G_0&&this.$17_0&&setPerfMarkerTimestamp(this.$17_0);this.$7_0.triggerHandler("flyout-closed");(window.UseTabletExperience||Mscrm.CrmBrowser.get_currentBrowser().get_isTouchEnabled())&&$P_CRM("body").removeClass("AutoScrolling");Mscrm.FlyOutDialog.currentDialog=null},bind:function(eventName,eventHandler){this.$7_0.bind(eventName,eventHandler)},unbind:function(eventName,eventHandler){this.$7_0.unbind(eventName,eventHandler)},setContent:function(content){var $v_0=this.$b_0;$v_0&&this.hide();this.initialize(content);$v_0&&this.show(this.$6_0,this.$F_0)},_disposed:false,get_isDisposed:function(){return this._disposed},dispose:function(){if(this._disposed)return;if(!IsNull(Mscrm.FlyOutDialog.currentDialog))Mscrm.FlyOutDialog.currentDialog=null;if(!IsNull(this.$X_0))this.$X_0=null;Mscrm.Utilities.destroyObject(this.$0_0);this.$0_0=null;this.$1R_0();if(!IsNull(this.$J_0)){this.$J_0.dialog("destroy");this.$1b_0(this.$J_0);this.$J_0=null}if(!IsNull(Mscrm.FlyOutDialog.$G)){this.$1b_0(Mscrm.FlyOutDialog.$G);Mscrm.FlyOutDialog.$G=null}!IsNull(this.$3_0)&&this.set_jQueryDialog(null);this.$7_0.unbind();this.$7_0=null;this._disposed=true;Mscrm.Utilities.destroyObject(this)},$1R_0:function(){if(!IsNull(this.$H_0)){if(!IsNull(this.$H_0[0])){$removeHandler(this.$H_0[0],"keydown",this.$$d_$2A_0);$removeHandler(this.$H_0[0],"keypress",this.$$d_$2A_0)}this.$H_0.unbind()}},$1b_0:function($p0){$p0.unbind();$p0.empty();for(var $v_0=0;$v_0<$p0.length;$v_0++)$p0[$v_0].innerHTML="";$p0=null},get_shouldDisposeContent:function(){return this.$1I_0},set_shouldDisposeContent:function(value){this.$1I_0=value;return value},configureDialogOptions:function(){this.configureButtons()},configureButtons:function(){var $v_0=[];Array.add($v_0,new Mscrm.FlyOutButton(window.LOCID_FLYOUT_CONFIRM,this.$$d_onConfirmButtonClick));Array.add($v_0,new Mscrm.FlyOutButton(window.LOCID_FLYOUT_CANCEL,this.$$d_onCancelButtonClick));this.$0_0.setButtons($v_0)},configureDialogPosition:function(){var $v_0=this.$6_0.offset(),$v_1=0,$v_2=0;this.$p_0=false;switch(this.$B_0){case "right":if(Mscrm.Utilities.get_isLeftToRight()){var $v_4=!this.$0_0.$C_0?300:this.$0_0.$C_0;$v_1=$v_0.left+this.$6_0.outerWidth(true)+0+8;if($v_1+$v_4>=document.documentElement.clientWidth){$v_1=$v_0.left-$v_4-0-8-2;this.$p_0=true}}else{var $v_5=!this.$0_0.$C_0?300:this.$0_0.$C_0,$v_6=Number.parseInvariant(this.$6_0.css("marginLeft"));$v_6=isNaN($v_6)?0:$v_6;$v_1=$v_0.left-$v_5-0-8+$v_6-2;if($v_1<=0){$v_1=$v_0.left+this.$6_0.outerWidth(true)+0+8;this.$p_0=true}}$v_2=$v_0.top;$v_2-=this.$1A_0;break;case "left":$v_1=$v_0.left-0-this.$0_0.$C_0-18;$v_2=$v_0.top;break;case "custom":$v_1=this.$D_0;$v_2=this.$P_0;break;case "bottom":default:var $v_3=!this.$0_0.$C_0?300:this.$0_0.$C_0;if(Mscrm.Utilities.get_isLeftToRight())if(this.$6_0.selector==="#activityFilterButton")$v_1=$v_0.left-$v_3+12;else $v_1=$v_0.left;else if(this.$6_0.selector==="#activityFilterButton")$v_1=$v_0.left;else $v_1=$v_0.left-($v_3-this.$6_0.outerWidth(false))-2;$v_2=$v_0.top+this.$6_0.outerHeight(false)+0;break}if(this.$0_0.$5_0){this.$0_0.$B_0=[$v_1,$v_2];this.$2D_0()}else this.$3_0.dialog("option","position",[$v_1,$v_2]);this.$D_0=$v_1;this.$P_0=this.$6_0.hasClass("ms-crm-Inline-Chrome")||this.$6_0.hasClass("li-selectedflyoutbutton")||this.$6_0.hasClass("ms-crm-Lookup")?$v_2:this.$P_0},setupDialogButtons:function(){var $v_0=this.dialogChrome(),$v_1=0,$v_2=0,$v_3=0;if(this.$N_0>0){$v_3=this.$N_0+7;$v_2=this.$N_0+8;$v_1=this.$N_0+9}Mscrm.FlyOutDialog.setupDialogButtonWithIcon($v_0,".ui-dialog-titlebar .ui-dialog-titlebar-close",".ui-icon",Mscrm.CrmUri.create(window.CDNURL+"/_imgs/closeicon.png"),this.$c_0("close"),$v_1);Mscrm.FlyOutDialog.setupDialogButton($v_0,String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",1),this.$c_0("confirm"),$v_3);Mscrm.FlyOutDialog.setupDialogButton($v_0,String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",2),this.$c_0("cancel"),$v_2)},onConfirmButtonClick:function(){var $v_0=new Mscrm.FlyOutEventData;this.$7_0.triggerHandler("flyout-confirming",[$v_0]);if(!$v_0.$x_0){setPerfMarkerTimestamp("StartCloseFlyOutTimestamp");this.$1C_0(true,"FinishCloseFlyOutTimestamp");this.$7_0.triggerHandler("flyout-confirmed");this.$y_0&&this.hide();this.$1C_0(false,null)}},onCancelButtonClick:function(){var $v_0=new Mscrm.FlyOutEventData;this.$7_0.triggerHandler("flyout-canceling",[$v_0]);if(!$v_0.$x_0){setPerfMarkerTimestamp("StartCancelFlyOutTimestamp");this.$1C_0(true,"FinishCancelFlyOutTimestamp");this.$7_0.triggerHandler("flyout-canceled");this.$16_0&&this.hide();this.$1C_0(false,null)}},initialize:function(content){this.$J_0=content;if(IsNull(content))content=Mscrm.FlyOutDialog.get_$1p();if(this.$0_0.$5_0){this.configureDialogOptions();this.$0_0.$5_0=false}this.set_jQueryDialog(content.dialog(this.$0_0.toJQueryDialogOptions()));var $v_0=this.dialogChrome();$v_0.addClass("ui-flyout-dialog");var $v_1=content.attr("id");if(!IsNull($v_1)){$v_0.attr("id",$v_1.toString()+"_flyOut");this.$1D_0=$v_0.attr("id")}if(!IsNull(this.$F_0)){if(this.$F_0.length!==1){Mscrm.CrmDebug.fail("viewport should only contain one element.");throw Error.argumentOutOfRange("Viewport.Length",this.$F_0.length)}$v_0.appendTo(this.$F_0)}this.setupDialogButtons();this.setButtonsVisibility();this.$1f_0()},$1k_0:function($p0){$addHandler($p0[0],"keydown",this.$$d_$2A_0);$addHandler($p0[0],"keypress",this.$$d_$2A_0);var $$t_3=this;$p0.bind("dialogclose",function($p1_0){!$p0.is(":visible")&&$$t_3.$25_0()});var $$t_4=this;$p0.bind("dialogbeforeclose",function($p1_0){$$t_4.$1l_0()})},$1l_0:function(){if(this.$0_0.$L_0){var $v_0=$P_CRM(".ui-widget-overlay");if(this.$0_0.$M_0)$v_0.unbind("click");else $v_0.removeClass("ui-widget-overlay-flyout-dark")}},$25_0:function(){this.$b_0=false;this.$0_0.$I_0&&!IsNull(this.$6_0)&&this.$6_0.removeClass("li-selectedflyoutbutton");this.$1L_0(this.$6_0);this.$7_0.triggerHandler("flyout-visiblechanged");if(window.parent&&window.parent.document&&window.parent.document.getElementById("crmTopBar")&&this.$h_0){var $v_0=$P_CRM(window.parent.document.getElementById("crmTopBar")),$v_1=$v_0.find("#CommandBarOverlayDiv");$v_1&&$v_1.remove()}},$1q_0:function(){if(this.$0_0.$n_0)this.$W_0=this.$3_0.children().detach()},$1j_0:function(){if(this.$0_0.$n_0&&!IsNull(this.$W_0)){this.$W_0.hasClass("ms-crm-LinkControl-content")&&this.$W_0.removeClass("ms-crm-LinkControl-content");this.$W_0.appendTo(this.$3_0);this.$W_0=null}},$2M_0:function(){if(this.$0_0.$L_0){var $v_0=$P_CRM(".ui-widget-overlay");$v_0.addClass("ui-widget-overlay-flyout");$v_0.css("width","100%");$v_0.css("height","100%");$v_0.css("z-index","1001");if(Mscrm.Utilities.isIosDevice()||Mscrm.CrmBrowser.get_currentBrowser().get_isAndroid()){var $v_1=$v_0.clone(true);$v_0.remove();$v_1.insertAfter(this.dialogChrome());$v_0=$v_1}if(this.$0_0.$M_0){var $$t_2=this;$v_0.bind("click",function(){$$t_2.$7_0.triggerHandler("flyout-overlayclicked");$$t_2.$y_0&&$$t_2.hide()})}else{$v_0.addClass("ui-widget-overlay-flyout-dark");$v_0.css("width","100%");$v_0.css("height","100%")}}},$2D_0:function(){this.$3_0.dialog("option",this.$0_0.toJQueryDialogOptions());this.setupDialogButtons();this.setButtonsVisibility();this.$1f_0();this.$0_0.$5_0=false},dialogChrome:function(){return this.$H_0},setButtonsVisibility:function(){var $v_0=this.dialogChrome(),$v_1=$P_CRM(".ui-dialog-buttonpane",$v_0),$v_2=$P_CRM(".ui-dialog-titlebar .ui-dialog-titlebar-close",$v_0);if(this.$0_0.$r_0)$v_1.show();else{Mscrm.CrmBrowser.get_currentBrowser().get_isIE7()&&$v_1.removeClass("ui-dialog-buttonpane");$v_1.hide()}if(this.$0_0.$T_0)$v_2.show();else $v_2.hide()},$1f_0:function(){var $v_0=this.dialogChrome(),$v_1=$P_CRM(".ui-dialog-titlebar",$v_0);$v_1.hide();if(this.$0_0.$s_0)$v_1.show();else $v_1.hide()},$c_0:function($p0){var $v_0=null;if(!IsNull(this.$J_0)&&!isNullOrEmptyString($p0)){var $v_1=this.$J_0.attr("id");if(!isNullOrEmptyString($v_1))$v_0=$v_1+"-"+$p0}return $v_0},setFlyOutButtonDisplay:function(buttonType,value){var $v_0=this.dialogChrome(),$v_1=String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",buttonType),$v_2=$P_CRM($v_1,$v_0);if($v_2.length>0)if(value){$v_2.removeAttr("disabled");$v_2.removeClass("ui-state-disabled")}else{$v_2.attr("disabled","disabled");$v_2.addClass("ui-state-disabled")}},setFlyOutButtonFocus:function(flyOutButtonType){var $v_0=this.dialogChrome(),$v_1=String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",flyOutButtonType),$v_2=$P_CRM($v_1,$v_0);$v_2.focus()},setButtonTooltip:function(flyOutButtonType,tooltip){var $v_0=this.dialogChrome(),$v_1=String.format(".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})",flyOutButtonType),$v_2=$P_CRM($v_1,$v_0),$v_3=$P_CRM(".ui-button-text",$v_2);$v_2.addClass("ui-state-hover");$v_2[0].innerText=tooltip;!IsNull($v_3)&&$v_3.text(tooltip)},$1C_0:function($p0,$p1){this.$1G_0=$p0;this.$17_0=$p1},$22_0:function(){var $v_0=$P_CRM("#header_process_CaseResearch_LinkControl_flyoutLoadingArea-close");if(!IsNull($v_0)){var $$t_2=this;$v_0.click(function($p1_0){$$t_2.hide()})}}};Mscrm.FlyOutEventData=function(){};Mscrm.FlyOutEventData.prototype={$x_0:false,get_handled:function(){return this.$x_0},set_handled:function(value){this.$x_0=value;return value}};Mscrm.FlyOutMenu=function(){};Mscrm.FlyOutMenu.createFlyOut=function(flyOutMenuDescriptor){var $v_0=Mscrm.FlyOutMenu.createFlyOutContent(flyOutMenuDescriptor.menuSections),$v_1=new Mscrm.FlyOutDialog;$v_1.setContent($v_0);$v_1.$0_0.set_showButtonPane(false);$v_1.$0_0.set_closeOnEscape(true);$v_1.$0_0.$I_0=false;$v_1.$0_0.set_dialogClass(flyOutMenuDescriptor.cssClass);flyOutMenuDescriptor.width&&$v_1.$0_0.set_width(flyOutMenuDescriptor.width);return $v_1};Mscrm.FlyOutMenu.createFlyOutContent=function(menuSections){for(var $v_0=$P_CRM(document.createElement("div")),$$arr_2=menuSections,$$len_3=$$arr_2.length,$$idx_4=0;$$idx_4<$$len_3;++$$idx_4){var $v_1=$$arr_2[$$idx_4],$v_2=Mscrm.FlyOutMenu.createSection($v_1,$v_1.clickHandler);$v_0.append($v_2)}return $v_0};Mscrm.FlyOutMenu.createSection=function(menuSection,clickHandler){var $v_0=$P_CRM(document.createElement("div"));$v_0.addClass(menuSection.cssClass);!isNullOrEmptyString(menuSection.id)&&$v_0.attr("id",menuSection.id);if(!isNullOrEmptyString(menuSection.displayName)){var $v_1=$P_CRM(document.createElement("label"));$v_1.text(menuSection.displayName||"");$v_0.append($v_1)}if(IsNull(menuSection.menuListItems))return $v_0;for(var $$arr_4=menuSection.menuListItems,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_2=$$arr_4[$$idx_6];$v_0.append(Mscrm.FlyOutMenu.createMenuListItem($v_2,clickHandler))}return $v_0};Mscrm.FlyOutMenu.createMenuListItem=function(menuListItem,clickHandler){var $v_0=$P_CRM(document.createElement("div"));if(IsNull(menuListItem))return $v_0;!isNullOrEmptyString(menuListItem.id)&&$v_0.attr("id",menuListItem.id);!isNullOrEmptyString(menuListItem.cssClass)&&$v_0.addClass(menuListItem.cssClass);if(!IsNull(menuListItem.content))$v_0.append(menuListItem.content);else!isNullOrEmptyString(menuListItem.displayName)&&$v_0.text(menuListItem.displayName);!isNullOrEmptyString(menuListItem.title)&&$v_0.attr("title",menuListItem.title);!isNullOrEmptyString(menuListItem.tabIndex)&&$v_0.attr("tabindex",menuListItem.tabIndex);$v_0.bind("click",menuListItem.data,clickHandler);$v_0.bind("keydown",menuListItem.data,function($p1_0){var $v_1=$p1_0.keyCode===13;if($v_1){clickHandler($p1_0);$p1_0.preventDefault();$p1_0.stopPropagation()}});return $v_0};Mscrm.FlyOutMenuDescriptor=function(){};Mscrm.FlyOutMenuDescriptor.prototype={cssClass:null,width:0,menuSections:null};Mscrm.MenuListItemDescriptor=function(){};Mscrm.MenuListItemDescriptor.prototype={id:null,displayName:null,content:null,title:null,cssClass:null,data:null,tabIndex:null};Mscrm.MenuSectionDescriptor=function(){};Mscrm.MenuSectionDescriptor.prototype={id:null,displayName:null,cssClass:null,data:null,menuListItems:null,clickHandler:null};Mscrm.FlyOutOptions=function(){this.$5_0=false;this.$U_0=[];this.$g_0=window.LOCID_FLYOUT_CLOSE;this.$C_0=0;this.$Y_0=0;this.$T_0=false;this.$r_0=true;this.$s_0=false;this.$a_0=null;this.$l_0="";this.$f_0=true;this.$L_0=true;this.$M_0=true;this.$o_0=150;this.$I_0=true;this.$w_0=true;this.$R_0=false;this.$n_0=true};Mscrm.FlyOutOptions.prototype={$5_0:false,$U_0:null,$11_0:false,$g_0:null,$C_0:0,$Y_0:0,$o_0:0,$T_0:false,$r_0:false,$s_0:false,$a_0:null,$B_0:null,$l_0:null,$f_0:false,$L_0:false,$M_0:false,$14_0:false,$I_0:false,$w_0:false,$R_0:false,$n_0:false,get_isDirty:function(){return this.$5_0},set_isDirty:function(value){this.$5_0=value;return value},get_closeTooltip:function(){return this.$g_0},set_closeTooltip:function(value){if(this.$g_0!==value){this.$g_0=value;this.$5_0=true}return value},get_width:function(){return this.$C_0},set_width:function(value){if(this.$C_0!==value){this.$C_0=value;this.$5_0=true}return value},get_minHeight:function(){return this.$o_0},set_minHeight:function(value){if(this.$o_0!==value){this.$o_0=value;this.$5_0=true}return value},get_height:function(){return this.$Y_0},set_height:function(value){if(this.$Y_0!==value){this.$Y_0=value;this.$5_0=true}return value},get_showCloseButton:function(){return this.$T_0},set_showCloseButton:function(value){if(this.$T_0!==value){this.$T_0=value;this.$5_0=true}return value},get_showButtonPane:function(){return this.$r_0},set_showButtonPane:function(value){if(this.$r_0!==value){this.$r_0=value;this.$5_0=true}return value},get_showTitlePane:function(){return this.$s_0},set_showTitlePane:function(value){if(this.$s_0!==value){this.$s_0=value;this.$5_0=true}return value},get_title:function(){return this.$a_0},set_title:function(value){if(this.$a_0!==value){this.$a_0=value;this.$5_0=true}return value},get_position:function(){return this.$B_0},set_position:function(value){this.$B_0=value;return value},get_draggable:function(){return this.$14_0},set_draggable:function(value){this.$14_0=value;return value},get_modal:function(){return this.$L_0},set_modal:function(value){this.$L_0=value;return value},get_hideWithClickOnOverlay:function(){return this.$M_0},set_hideWithClickOnOverlay:function(value){this.$M_0=value;return value},get_focusOnFirstTabbable:function(){return this.$w_0},set_focusOnFirstTabbable:function(value){this.$w_0=value;return value},get_letjQueryHandleTabbing:function(){return this.$R_0},set_letjQueryHandleTabbing:function(value){this.$R_0=value;return value},get_isInDelayMode:function(){return this.$n_0},set_isInDelayMode:function(value){this.$n_0=value;return value},getButtons:function(){return Array.clone(this.$U_0)},setButtons:function(buttons){this.$11_0&&Mscrm.CrmDebug.assert(true,"Cannot reset the buttons of flyout once they are initialized");this.$U_0=buttons;this.$5_0=true},toJQueryDialogOptions:function(){var $v_0={};$v_0.autoOpen=false;$v_0.modal=this.$L_0;$v_0.draggable=this.$14_0;$v_0.resizable=false;$v_0.closeText=this.$g_0;$v_0.dialogClass=this.$l_0;$v_0.closeOnEscape=this.$f_0;$v_0.minHeight=this.$o_0;if(this.$C_0>0)$v_0.width=this.$C_0;if(this.$Y_0>0)$v_0.height=this.$Y_0;if(!isNullOrEmptyString(this.$a_0))$v_0.title=this.$a_0;if(!IsNull(this.$B_0))$v_0.position=this.$B_0;if(!this.$11_0){$v_0.buttons=[];for(var $v_1=0;$v_1<this.$U_0.length;$v_1++)Array.add($v_0.buttons,{text:this.$U_0[$v_1].$z_0,click:this.$U_0[$v_1].$12_0});this.$11_0=true}return $v_0},get_dialogClass:function(){return this.$l_0},set_dialogClass:function(value){if(this.$l_0!==value){this.$l_0=value;this.$5_0=true}return value},get_applyAnchorClassChange:function(){return this.$I_0},set_applyAnchorClassChange:function(value){this.$I_0=value;return value},get_closeOnEscape:function(){return this.$f_0},set_closeOnEscape:function(value){if(this.$f_0!==value){this.$f_0=value;this.$5_0=true}return value}};Mscrm.jQueryDialogOptionsImportHelper=function(){};Mscrm.jQueryDialogOptionsImportHelper.$$cctor=function(){Mscrm.jQueryDialogOptionsImportHelper.registerjQueryPluginOptions("jQueryDialogOptions")};Mscrm.jQueryDialogOptionsImportHelper.registerjQueryPluginOptions=function(pluginOptionsClassName){pluginOptionsClassName=Object.getName()};Mscrm.SwitchProcessFlyoutViewModel=function(currentEntityId,currentEntityTypeName){this.$V_0=currentEntityId;this.$i_0=currentEntityTypeName};Mscrm.SwitchProcessFlyoutViewModel.executeSwitchProcessRemoteCommand=function(currentEntityId,currentEntityTypeName,newProcessId,newProcessInstanceId,newStageId,newTraversedPath,callback){var $v_0=new RemoteCommand("ProcessControl","ChangeProcessAndStage",null);$v_0.SetParameter("currentEntityId",currentEntityId);$v_0.SetParameter("currentEntityTypeName",currentEntityTypeName);$v_0.SetParameter("newProcessId",newProcessId);$v_0.SetParameter("newProcessInstanceId",newProcessInstanceId);$v_0.SetParameter("newStageId",newStageId);$v_0.SetParameter("traversedPath",newTraversedPath);$v_0.Execute(callback)};Mscrm.SwitchProcessFlyoutViewModel.prototype={$V_0:null,$i_0:null,populateProcessInstanceandDefinitionList:function(){var $v_0=jQueryApi.jQueryDeferredFactory.Deferred(RemoteCommandResult,Mscrm.ErrorInformation),$v_1=new RemoteCommand("ProcessControl","RetrieveMultipleProcessInstances",null);$v_1.IncludeContextInPath=true;$v_1.SetParameter("currentEntityId",this.$V_0);$v_1.SetParameter("entityLogicalName",Xrm.Page.data.entity.getEntityName());var $$t_4=this;$v_1.Execute(function($p1_0,$p1_1){if($p1_0.Success)$v_0.resolve($p1_0.ReturnValue);else $v_0.reject($p1_0.ReturnValue)});return $v_0.promise()},switchProcess:function(newProcessId,newProcessInstanceId){var $v_0=jQueryApi.jQueryDeferredFactory.Deferred(RemoteCommandResult,Mscrm.ErrorInformation),$$t_5=this;Mscrm.SwitchProcessFlyoutViewModel.executeSwitchProcessRemoteCommand(this.$V_0,this.$i_0,newProcessId,newProcessInstanceId,"","",function($p1_0,$p1_1){if($p1_0.Success)$v_0.resolve($p1_0.ReturnValue);else $v_0.reject($p1_0.ReturnValue)});return $v_0.promise()}};Mscrm.InlineFlyOutDialog=function(){Mscrm.InlineFlyOutDialog.initializeBase(this)};Mscrm.InlineFlyOutDialog.prototype={setFocusOnFirstElement:function(){var $v_0=this.get_firstTabAbleElement().id,$v_1=Xrm.Page.ui.controls.get($v_0);if(!IsNull($v_1)){var $$t_2=this;window.setTimeout(function(){$v_1.setFocus()},0)}else Mscrm.FlyOutDialog.prototype.setFocusOnFirstElement.call(this)},configureButtons:function(){if(this.$Z_0){var $v_0=[];Array.add($v_0,new Mscrm.FlyOutButton(window.LOCID_FLYOUT_CONFIRM,this.$$d_onConfirmButtonClick));this.$0_0.setButtons($v_0)}else Mscrm.FlyOutDialog.prototype.configureButtons.call(this)}};Mscrm.NotificationFlyout=function(anchor,messageContainer,contentContainer){this.$$d_$28_1=Function.createDelegate(this,this.$28_1);this.$$d_$29_1=Function.createDelegate(this,this.$29_1);this.$$d_$24_1=Function.createDelegate(this,this.$24_1);Mscrm.NotificationFlyout.initializeBase(this,[anchor,messageContainer,contentContainer]);Mscrm.CrmDebug.assert(!IsNull(anchor),"Parameter named 'anchor' is null or undefined!");Mscrm.CrmDebug.assert(!IsNull(messageContainer),"Parameter named 'messageContainer' is null or undefined!");Mscrm.CrmDebug.assert(!IsNull(contentContainer),"Parameter named 'contentContainer' is null or undefined!");if(!IsNull(anchor)&&!IsNull(messageContainer)){this._anchor=anchor;this._containerElement=messageContainer;this._contentContainer=contentContainer;this._forceFlipped=false;this._arrowIcon=$P_CRM("<span></span>").addClass("ms-crm-Inline-ErrorArrowIcon").append($P_CRM(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/arrow.png"))).attr("alt","")).hide().insertAfter(this._containerElement);$P_CRM(window).bind("resize",this.$$d_onPageResize)}this.$13_1=this.$$d_$24_1;this.$1F_1=this.$$d_$29_1;this.$1E_1=this.$$d_$28_1;$addHandler(document.documentElement,"click",this.$13_1);$addHandler(window.parent.document,"click",this.$13_1)};Mscrm.NotificationFlyout.prototype={$t_1:null,$13_1:null,$1F_1:null,$1E_1:null,$24_1:function($p0){if($p0.target===this._anchor.get(0))return;if($p0.target!==this._containerElement.get(0)){for(var $v_0=0;$v_0<this._containerElement.children().length;++$v_0)if($p0.target===this._containerElement.children().get(0))return;this.hideNotifications()}},$29_1:function($p0){($p0.keyCode===9||$p0.keyCode===27)&&this.hideNotifications()},$28_1:function($p0){$p0.keyCode===27&&this.hideNotifications()},showNotifications:function(notificationMessage){if(!notificationMessage||notificationMessage.length<=0||!notificationMessage[0].messages)return;var $v_0=notificationMessage[0];if($v_0&&$v_0.messages.length>0){this._containerElement.text($v_0.messages[0]);if($v_0.actions&&$v_0.actions.length>0){this._containerElement.addClass("ms-crm-Inline-Recommendation");if($v_0.actions.length===1)this._containerElement.append(this.$1h_1($v_0.actions[0].message,$v_0.actions[0].actions));else for(var $v_1=0;$v_1<$v_0.actions.length;++$v_1){var $v_2=document.createElement("div");Sys.UI.DomElement.addCssClass($v_2,"ms-crm-Inline-multipleRecommendation");var $v_3=$P_CRM($v_2);$v_3.append(this.$1i_1($v_0.actions[$v_1].message,$v_0.actions[$v_1].actions));this._containerElement.append($v_3);this._containerElement.append(this.$1M_1())}}}var $$t_5=this;window.setTimeout(function(){$$t_5._arrowIcon.show();$$t_5._containerElement.show();$$t_5._anchor.show();$$t_5.configureFlyoutPosition($$t_5._anchor,$$t_5._containerElement,$$t_5._arrowIcon)},0)},$1h_1:function($p0,$p1){var $v_0=document.createElement("div");Sys.UI.DomElement.addCssClass($v_0,"ms-crm-Inline-RecommendationText");var $v_1=$P_CRM($v_0);$v_1.text($p0);var $v_2=document.createElement("div"),$v_3=$P_CRM($v_2);$v_3.append($v_1);$v_3.append(this.$1N_1($p1));$v_3.append(this.$1M_1());return $v_3},$1i_1:function($p0,$p1){var $v_0=document.createElement("div"),$v_1=document.createElement("div");Sys.UI.DomElement.addCssClass($v_1,"ms-crm-Inline-RecommendationText multipleRecommendation");var $v_2=$P_CRM($v_1);$v_2.text($p0);var $v_3=$P_CRM($v_0);$v_3.append($v_2);$v_3.append(this.$1N_1($p1));return $v_3},$1N_1:function($p0){var $v_0=window.LOCID_PBL_REC_APPLY_LABEL,$v_1=document.createElement("button"),$v_2=isNaN(parseInt(this._containerElement.parent().attr("TabIndex")))?0:parseInt(this._containerElement.parent().attr("TabIndex"));$v_1.setAttribute("tabindex",$v_2-4);Sys.UI.DomElement.addCssClass($v_1,"ms-crm-Inline-RecommendationApply");$addHandler($v_1,"keydown",this.$1E_1);var $v_3=$P_CRM($v_1),$$t_6=this;this.$t_1=function($p1_0){$p0[0]();$$t_6.hideNotifications()};$v_3.click(this.$t_1);$v_3.text($v_0);return $v_3},$1M_1:function(){var $v_0=window.LOCID_PBL_REC_DISMISS_LABEL,$v_1=document.createElement("button"),$v_2=isNaN(parseInt(this._containerElement.parent().attr("TabIndex")))?0:parseInt(this._containerElement.parent().attr("TabIndex"));$v_1.setAttribute("tabindex",$v_2-3);Sys.UI.DomElement.addCssClass($v_1,"ms-crm-Inline-RecommendationDismiss");$addHandler($v_1,"keydown",this.$1F_1);var $v_3=$P_CRM($v_1),$$t_5=this;this.$t_1=function($p1_0){$$t_5.hideNotifications()};$v_3.click(this.$t_1);$v_3.text($v_0);return $v_3},hideError:function(hideAnchor){this.hideNotifications(hideAnchor)},hideNotifications:function(hideAnchor){var $$t_1=this;window.setTimeout(function(){!IsNull(hideAnchor)&&hideAnchor&&$$t_1._anchor.hide();$$t_1._containerElement.removeClass("ms-crm-Inline-Recommendation");$$t_1._arrowIcon.hide();$$t_1._containerElement.hide()},0)}};Mscrm.RollupErrorFlyout=function(contentContainer){this.$O_0=contentContainer};Mscrm.RollupErrorFlyout.prototype={$1X_0:function(){var $v_0=new Mscrm.FlyOutDialog;$v_0.$0_0.set_showTitlePane(true);$v_0.$0_0.set_title(window.LOCID_ROLLUPERROR_TITLE);$v_0.$0_0.set_width(700);$v_0.$0_0.set_height(188);$v_0.$B_0="bottom";$v_0.$0_0.set_showButtonPane(true);$v_0.$0_0.set_showCloseButton(true);$v_0.$0_0.$L_0=true;$v_0.$0_0.$R_0=true;$v_0.$0_0.$M_0=false;$v_0.$0_0.$I_0=false;$v_0.$0_0.set_closeOnEscape(true);$v_0.$h_0=true;$v_0.setContent(this.$1c_0());$v_0.dialogChrome().addClass("rollupError");return $v_0},$1e_0:function($p0,$p1){var $v_0=$p0.find("#RollupErrorElementId");$v_0.html(CrmEncodeDecode.CrmHtmlEncode($p1));var $v_1=$p0.find("div.ui-dialog-buttonpane button");$v_1[0].id="rollup-errorok";XUI.Html.DomUtils.GetFirstChild($v_1[0]).innerHTML=window.LOCID_ROLLUP_DIALOG_OK;$v_1[0].title=window.LOCID_ROLLUP_DIALOG_OK;$v_1[1].style.display="none"},$1c_0:function(){var $v_0=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create(window.CDNURL+"/_imgs/businessruleeditor/erroricon.png")),$v_1=String.format("<div><div class='rollupRuntimeError-dialog-content'><div class='rollupRuntimeError-dialog-icon' title='{0}'><img src='{1}' class='{2}'></img></div><div class='rollupRuntimeError-dialog-area'><div class='rollupRuntimeError-dialog-detail rollupRuntimeError-dialog-detailAttribute' id='{3}'></div></div></div></div>",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_ROLLUPERROR_TITLE),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.source),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.cssClass),CrmEncodeDecode.CrmHtmlAttributeEncode("RollupErrorElementId")),$v_2=$P_CRM($v_1);return $v_2},show:function(errorMessage){if(!this.$2_0)this.$2_0=this.$1X_0();var $v_0=this.$2_0.dialogChrome(),$v_1=this.$O_0.outerHeight(),$v_2=Math.min($v_1,188);this.$2_0.$0_0.set_height($v_2);this.$2_0.show(this.$O_0);$v_0.css("top","50%");$v_0.css("left","50%");$v_0.css("margin-top","-"+($v_2/2).toString()+"px");$v_0.css("margin-left","-350px");this.$1e_0($v_0,errorMessage)},$O_0:null,$2_0:null};Mscrm.FormSectionNavigationFlyOut=function(element){this.$$d_$1v_1=Function.createDelegate(this,this.$1v_1);this.$$d_$1K_1=Function.createDelegate(this,this.$1K_1);this.$$d_$27_1=Function.createDelegate(this,this.$27_1);this.$$d_$1Z_1=Function.createDelegate(this,this.$1Z_1);this.$$d_$1x_1=Function.createDelegate(this,this.$1x_1);this.$$d_$26_1=Function.createDelegate(this,this.$26_1);this.$$d_$2B_1=Function.createDelegate(this,this.$2B_1);this.$$d_$2C_1=Function.createDelegate(this,this.$2C_1);this.$1S_1="<tr id='${id}' attribute-uniqueid='${uniqueIdentifier}'><td id='"+CrmEncodeDecode.CrmHtmlAttributeEncode("flyoutFormSection_Cell")+"'><a tabindex ='0' id='"+CrmEncodeDecode.CrmHtmlAttributeEncode("flyoutFormSection_Anchor")+"' class='ms-crm-FormSectionNavigation'>${label}</a></td></tr>";Mscrm.FormSectionNavigationFlyOut.initializeBase(this);this.$F_1=$P_CRM("#formContainer");this.$m_1=$P_CRM("#FormSecNavigationControl-Icon")};Mscrm.FormSectionNavigationFlyOut.prototype={$F_1:null,$m_1:null,$E_1:null,$v_1:null,$K_1:null,$Q_1:null,$d_1:null,$e_1:false,$1_1:null,$18_1:null,$S_1:0,dispose:function(){!IsNull(this.$K_1)&&this.$K_1.unbind();!IsNull(this.$1_1)&&this.$1_1.dispose();Mscrm.Utilities.destroyObject(this)},launch:function(){IsNull(this.$1_1)&&this.$1s_1();this.$1t_1();if(!this.$S_1)this.$1_1.$0_0.set_height(30);else this.$1_1.$0_0.set_height(this.$S_1<=10?this.$S_1*30:300);this.$2K_1();this.$S_1<=10&&$P_CRM("#flyoutFormSection_Container").css("overflow-y","hidden");this.$1_1.show(this.$m_1,this.$F_1);this.$K_1=$P_CRM("#flyoutFormSection_Container");this.$K_1.mouseleave(this.$$d_$2C_1);this.$K_1.mouseenter(this.$$d_$2B_1);this.$K_1.removeClass("ui-dialog-content");this.$K_1.addClass("ms-crm-FormSectionNavigationFlyout-Dialog-Content");this.$K_1.focusout(this.$$d_$26_1);this.$v_1=$P_CRM("#flyoutFormSection_Container_flyOut");this.$v_1.attr("tabindex","0");this.$d_1=$P_CRM("body");this.$d_1.click(this.$$d_$1x_1);this.$d_1.bind("touchstart",this.$$d_$1x_1);this.$v_1.removeClass("ui-flyout-dialog");this.$v_1.addClass("ms-crm-FormSectionNavigationFlyout-Dialog");this.$E_1=$P_CRM("td",this.$Q_1);if(!IsNull(this.$E_1))for(var $v_0=0;$v_0<this.$E_1.length;$v_0++){this.$E_1[$v_0].title=XUI.Html.GetText(this.$E_1[$v_0]);$P_CRM(this.$E_1[$v_0]).click(this.$$d_$1Z_1);$P_CRM(this.$E_1[$v_0]).keydown(this.$$d_$27_1);(this.$S_1>10||this.$E_1.length>10)&&$P_CRM("a",this.$E_1[$v_0]).length>0&&$P_CRM($P_CRM("a",this.$E_1[$v_0])[0]).addClass("ms-crm-FormSectionNavigation-On-Scroll")}this.$Q_1=$P_CRM("#flyoutFormSection_ContentTable")},$1x_1:function($p0){if(!IsNull(this.$1_1)&&$p0.target.id!=="#flyoutFormSection_Container_flyOut".substr(1)&&$p0.target.id!=="#flyoutFormSection_Container".substr(1)&&$p0.target.id!=="#flyoutFormSection_ContentTable".substr(1)&&$p0.target.id!=="flyoutFormSection_Anchor"&&$p0.target.id!=="flyoutFormSection_Cell"){this.$e_1=true;this.$1K_1();$p0.stopPropagation()}},$1Z_1:function($p0){if(!IsNull($p0.currentTarget)&&!IsNull($p0.currentTarget.parentNode)){var $v_0=$p0.currentTarget.parentNode,$v_1=$v_0.getAttribute("attribute-uniqueId"),$v_2=this.$18_1[$v_1];if(!IsNull($v_2)){var $v_3=window.top.document.getElementById("TabNode_tab0Tab-main");if(IsNull($v_3))$v_3=$get("tab0Tab");if(IsNull($v_3))return;else $v_3.click();var $$t_5=this;window.setTimeout(function(){$$t_5.$1_1.hide();$v_2.getDisplayState()==="collapsed"&&$v_2.setDisplayState("expanded");$v_2.setFocus()},200);$p0.stopPropagation()}}},$27_1:function($p0){if($p0.which===13){$p0.stopPropagation();$p0.preventDefault();this.$1Z_1($p0)}},$2C_1:function($p0){if(window.UseTabletExperience)return;this.$e_1=true;window.setTimeout(this.$$d_$1K_1,600)},$2B_1:function($p0){this.$e_1=false},$26_1:function($p0){window.setTimeout(this.$$d_$1v_1,0)},$1v_1:function(){if(this.$K_1.closest("#flyoutFormSection_Container").has(":focus").length<=0){this.$e_1=true;this.$1K_1()}},$1K_1:function(){if(this.$e_1){this.$1_1.hide();this.$E_1.unbind("clicK");this.$E_1.unbind("keydown");this.$d_1.unbind("click");this.$d_1.unbind("touchstart")}},$1s_1:function(){this.$1_1=new Mscrm.FlyOutDialog;this.$1_1.$0_0.set_showButtonPane(false);this.$1_1.$0_0.set_showCloseButton(false);this.$1_1.$0_0.set_closeOnEscape(true);this.$1_1.$0_0.set_showTitlePane(false);this.$1_1.$0_0.$L_0=false;this.$1_1.$0_0.$M_0=false;this.$1_1.$0_0.$I_0=false;this.$1_1.$N_0=0;this.$1_1.$0_0.set_width(246);this.$1_1.$B_0="custom";this.$1_1.$0_0.$R_0=true;var $v_0=$P_CRM("<div id='flyoutFormSection_Container'><table id='flyoutFormSection_ContentTable' class='ms-crm-FlyoutContentTableWidth'></table></div>");this.$1_1.setContent($v_0);this.$1_1.setButtonTooltip(1,"");this.$1_1.setButtonTooltip(2,"")},$1t_1:function(){if(IsNull(this.$Q_1))this.$Q_1=$P_CRM("#flyoutFormSection_ContentTable");this.$Q_1.html("");var $v_0=this.$1w_1();if($v_0.length>0)$P_CRM.tmpl(this.$1S_1,$v_0).appendTo(this.$Q_1);else $P_CRM.tmpl("<div id='flyoutFormSection_ContentDiv_No_Tabs'>${label}</div>",new Mscrm.TemplateData(Xrm.Internal.getResourceString("Form_Section_No_Tabs"),null,null)).appendTo(this.$Q_1)},$2K_1:function(){var $v_0=this.$m_1.width();this.$1_1.$D_0=this.$m_1.offset().left+$v_0;if(window.LOCID_UI_DIR==="RTL")this.$1_1.$D_0=this.$1_1.$D_0-(250+$v_0);this.$1_1.$P_0=this.$m_1.offset().top+28},$1w_1:function(){var $v_0=[],$v_1,$v_2=Xrm.Page.ui.tabs;this.$18_1={};this.$S_1=0;for(var $v_3=$v_2.get(),$v_4=0;$v_4<$v_3.length;$v_4++){var $v_5=$v_3[$v_4];if($v_5.getVisible()&&!isNullOrEmptyString($v_5.getLabel())){if(Xrm.Internal.isTurboForm()){var $v_6=$v_5;if(!$v_6.getLabelVisible())continue}$v_1=Microsoft.Crm.Client.Core.Framework.Guid.newGuid().toString();Array.add($v_0,new Mscrm.TemplateData(CrmEncodeDecode.CrmHtmlEncode($v_5.getLabel()),CrmEncodeDecode.CrmHtmlAttributeEncode("flyoutFormSection_"+$v_5.getName()),$v_1));this.$18_1[$v_1]=$v_5;this.$S_1++}}return $v_0}};Mscrm.TemplateData=function($p0,$p1,$p2){this.label=$p0;this.id=$p1;this.uniqueIdentifier=$p2};Mscrm.TemplateData.prototype={label:null,id:null,uniqueIdentifier:null};Mscrm.SwitchProcessFlyOut=function(contentContainer,currentEntityId,currentEntityTypeName){this.$$d_$1y_0=Function.createDelegate(this,this.$1y_0);this.$1Y_0=Mscrm.FeatureControl.get_Current().isFeatureEnabled(Mscrm.FeatureNames.ProcessUnification);this.$15_0=new Sys.EventHandlerList;this.$1H_0=-1;this.$O_0=contentContainer;this.$V_0=currentEntityId;this.$i_0=currentEntityTypeName;this.$19_0=new Mscrm.SwitchProcessFlyoutViewModel(this.$V_0,this.$i_0)};Mscrm.SwitchProcessFlyOut.prototype={$8_0:false,$19_0:null,$V_0:null,$i_0:null,$O_0:null,$2_0:null,$j_0:null,$k_0:null,$u_0:true,$q_0:null,$4_0:null,get_$A_0:function(){return this.$2_0.dialogChrome().find(".ms-crm-ProcessSwitcher-ProcessList")},get_$1T_0:function(){return this.$2_0.dialogChrome().find(".ui-dialog-titlebar").outerHeight()+this.$2_0.dialogChrome().find(".ui-dialog-buttonpane").outerHeight()},$1X_0:function(){this.$4_0=new Mscrm.FlyOutDialog;this.$4_0.setContent(this.$1c_0());this.$4_0.$0_0.set_showTitlePane(true);this.$4_0.$0_0.set_title(this.$8_0?window.LOCID_PROC_ARCSWITCH_TITLE:window.LOCID_PROCESS_SWITCH_TITLE);this.$4_0.$0_0.set_width(600);this.$4_0.$0_0.set_height(600);this.$4_0.$B_0="bottom";this.$4_0.$0_0.set_showCloseButton(true);this.$4_0.$0_0.set_showButtonPane(true);this.$4_0.$0_0.$L_0=true;this.$4_0.$0_0.$R_0=true;this.$4_0.$0_0.$M_0=false;this.$4_0.$0_0.$I_0=false;var $$t_3=this;this.$4_0.bind("flyout-confirmed",function($p1_0){var $v_0=$$t_3.$4_0.dialogChrome().find("input:checked").data("process").toString(),$v_1=$$t_3.$4_0.dialogChrome().find("input:checked").data("processinstance").toString();$$t_3.$k_0=Xrm.Page.data.process.getInstanceId();($v_0!==$$t_3.$j_0||$v_1!==$$t_3.$k_0)&&$$t_3.$2O_0($v_0,$v_1)});return this.$4_0},$1e_0:function($p0){var $v_0=$p0.find(".ui-dialog-titlebar-close");$v_0[0].id="SwitchProcess-Close";var $v_1=$p0.find("div.ui-dialog-buttonpane button");if($v_1.length===2){$v_1[0].id="SwitchProcess-Select";var $v_2=$v_1.first();$v_2.children("div").text(window.LOCID_PROCESS_SWITCH_SELECT);$v_1[1].id="SwitchProcess-Cancel";$v_2=$v_1.last();$v_2.children("div").text(this.$8_0?window.LOCID_PROC_ARCSWITCH_BACK:window.LOCID_PROCESS_SWITCH_CANCEL);this.$2E_0($v_2)}for(var $v_3=0;$v_3<$v_1.length;$v_3++)$v_1[$v_3].title=XUI.Html.GetText($v_1[$v_3]);this.$2F_0($p0)},$2E_0:function($p0){if(this.$8_0){var $$t_2=this;$p0.click(function($p1_0){$$t_2.openSwitchProcessView()})}},$2F_0:function($p0){var $v_0=$P_CRM(".ui-dialog-titlebar .ui-dialog-titlebar-close",$p0),$$t_3=this;$v_0.click(function($p1_0){$$t_3.$8_0=false;$$t_3.$1W_0()})},$1W_0:function(){this.$2_0.hide();this.$2_0=null},$1c_0:function(){var $v_0=String.format("\r\n\t\t\t<div>\r\n\t\t\t\t<div class='ms-crm-ProcessSwitcher-Subtitle' title='{1}'>{0}</div>\r\n\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessList' role='Radiogroup'></div>\r\n\t\t\t</div>",CrmEncodeDecode.CrmHtmlEncode(this.$8_0?window.LOCID_PROC_ARCSWITCH_SUBTITLE:window.LOCID_PROCESS_SWITCH_SUBTITLE),CrmEncodeDecode.CrmHtmlAttributeEncode(this.$8_0?window.LOCID_PROC_ARCSWITCH_SUBTITLE:window.LOCID_PROCESS_SWITCH_SUBTITLE)),$v_1=$P_CRM($v_0);this.$1a_0();return $v_1},$1a_0:function(){if(!this.$1Y_0){var $$t_6=this,$v_0=function($p1_0){$$t_6.$1z_0($p1_0)},$$t_7=this,$v_1=function($p1_0){$$t_7.$21_0($p1_0)};Xrm.Internal.messages.retrieveFilteredProcesses(Xrm.Page.data.entity.getEntityName()).then($v_0,$v_1)}else{var $$t_8=this,$$t_9=this;$P_CRM.when(this.$19_0.populateProcessInstanceandDefinitionList()).done(function($p1_0){$$t_8.$20_0($p1_0)}).fail(function($p1_0){})}},$20_0:function($p0){this.get_$A_0().empty();var $v_0=this.get_$A_0();this.$j_0=this.$1V_0();this.$k_0=Xrm.Page.data.process.getInstanceId();var $v_1=null;if(!IsNull($p0.toString()))$v_1=JSON.parse($p0.toString());if(!$v_1||!$v_1.ProcessInstances&&!$v_1.ProcessDefinitions||!$v_1.ProcessInstances.length&&!$v_1.ProcessDefinitions.length){this.get_$A_0().append("<p>"+CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PROCESS_SWITCH_NONE_FOUND)+"</p>");this.$10_0(true);return}else{for(var $v_2=true,$$arr_4=$v_1.ProcessInstances,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_3=$$arr_4[$$idx_6];if($v_3.StatusCodeName==="Active"&&!this.$8_0||$v_3.StatusCodeName!=="Active"&&this.$8_0){$v_2=false;break}}if($v_1.ProcessDefinitions.length&&($v_1.ProcessDefinitions&&!this.$8_0))$v_2=false;$v_2&&this.get_$A_0().append("<p>"+CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PROCESS_SWITCH_NONE_FOUND)+"</p>")}for(var $$arr_8=$v_1.ProcessInstances,$$len_9=$$arr_8.length,$$idx_A=0;$$idx_A<$$len_9;++$$idx_A){var $v_4=$$arr_8[$$idx_A];if(!this.$8_0&&!$v_4.CurrentProcessInstanceState||this.$8_0&&$v_4.CurrentProcessInstanceState===1){var $v_5=this.$2J_0($v_4),$v_6=$P_CRM($v_5);$v_0.append($v_6);this.$j_0===$v_4.ProcessDefinitionId&&this.$k_0===$v_4.ProcessInstanceId&&$v_6.find("input").attr("checked","checked");this.$1J_0($v_6);this.$1P_0($v_6)}}if(!this.$8_0){for(var $$arr_E=$v_1.ProcessDefinitions,$$len_F=$$arr_E.length,$$idx_G=0;$$idx_G<$$len_F;++$$idx_G){var $v_9=$$arr_E[$$idx_G],$v_A=this.$2I_0($v_9),$v_B=$P_CRM($v_A);$v_0.append($v_B);this.$1J_0($v_B);this.$1P_0($v_B)}var $v_7=this.$2G_0(),$v_8=$P_CRM($v_7);$v_0.append($v_8);this.$1n_0($v_8);this.$1m_0($v_8)}this.$10_0(true);this.$1O_0();this.$1B_0($v_0)},$21_0:function($p0){this.get_$A_0().empty();this.$10_0(true);if(!IsNull($p0.get_organizationServiceFault()))switch($p0.get_organizationServiceFault().get_errorCode()){case -2147220960:this.get_$A_0().text(window.LOCID_PROCESS_SWITCH_NONE_FOUND);break;default:this.get_$A_0().text($p0.get_localizedMessage());break}else this.get_$A_0().text($p0.get_localizedMessage())},$1z_0:function($p0){this.get_$A_0().empty();var $v_0=this.get_$A_0();this.$j_0=this.$1V_0();for(var $v_1=0;$v_1<$p0.processes.get_count();$v_1++){var $v_2=this.$2H_0($p0.processes.get_item($v_1)),$v_3=$P_CRM($v_2);$v_0.append($v_3);this.$j_0===$p0.processes.get_item($v_1).getValue("workflowid").toString()&&$v_3.find("input").attr("checked","checked");this.$1J_0($v_3)}this.$10_0(true);if(!$p0.processes.get_count()){this.get_$A_0().append("<p>"+CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PROCESS_SWITCH_NONE_FOUND)+"</p>");return}this.$1O_0();this.$1B_0($v_0)},$1V_0:function(){if(!IsNull(Xrm.Page.data.process)){var $v_0=Xrm.Page.data.process.getActiveProcess();if(!IsNull($v_0))return $v_0.getId()}return null},$1J_0:function($p0){var $$t_2=this;$p0.click(function($p1_0){$p0.find("input").attr("checked","checked");$$t_2.$1B_0($$t_2.get_$A_0())})},$1O_0:function(){this.$q_0=this.get_$A_0().find("input");var $$t_1=this;this.$q_0.bind("change",function($p1_0){$$t_1.$1B_0($$t_1.get_$A_0())})},$1n_0:function($p0){var $$t_2=this;$p0.click(function($p1_0){$$t_2.openArchivedProcessView()})},$1m_0:function($p0){$p0.keydown(this.$$d_$1y_0)},$1y_0:function($p0){$p0.which===13&&$p0.target.click()},$1P_0:function($p0){$p0.keydown(this.$$d_$1y_0)},openArchivedProcessView:function(){this.selectView(true)},openSwitchProcessView:function(){this.selectView(false)},selectView:function(selectArchivedProcessView){this.$8_0!==selectArchivedProcessView&&this.$2_0&&this.$1W_0();this.$8_0=selectArchivedProcessView;this.show()},$2H_0:function($p0){var $v_0=$p0.getValue("name").toString(),$v_1=window.LOCID_PROCESS_NEW_PROCESS;return String.format("<div class='ms-crm-ProcessSwitcher-Process' tabindex='0' role='radio' aria-checked='false'>\r\n\t\t\t\t\t<input type='radio' name='processSwitcherProcess' data-process='{6}' data-processinstance='{7}' value='{0}'\r\n\t\t\t\t\t\tid='SwitchProcess-Process-{0}'\r\n\t\t\t\t\t\tclass='ms-crm-ProcessSwitcher-Radio' title='{4}' {3} tabindex='-1'/>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessTitle' title='{4}'>{1}</div>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessDescription' title='{5}'>{2}</div>\r\n\t\t\t\t</div>",CrmEncodeDecode.CrmHtmlAttributeEncode($p0.getValue("workflowid").toString()),CrmEncodeDecode.CrmHtmlEncode($v_0),CrmEncodeDecode.CrmHtmlEncode($v_1),"",CrmEncodeDecode.CrmHtmlAttributeEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode($p0.getValue("workflowid").toString()),CrmEncodeDecode.CrmHtmlAttributeEncode(""))},$2J_0:function($p0){var $v_0=$p0.Title,$v_1=this.$8_0?$p0.StatusCodeName:"";if($v_1!=="Active")if($v_1==="Aborted")$v_1=window.LOCID_PROCESS_ABORTED_LABEL;else if($v_1==="Finished")$v_1=window.LOCID_PROCESS_FINISHED_LABEL;return String.format("<div class='ms-crm-ProcessSwitcher-Process' tabindex='0' role='radio' aria-checked='false'>\r\n\t\t\t\t\t<input type='radio' name='processSwitcherProcess' data-process='{6}' data-processinstance='{7}' value='{0}'\r\n\t\t\t\t\t\tid='SwitchProcess-Process-{0}'\r\n\t\t\t\t\t\tclass='ms-crm-ProcessSwitcher-Radio' title='{4}' {3} tabindex='-1'/>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessTitle' title='{4}'>{1}</div>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessDescription' title='{5}'>{2}</div>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessDescription' title='{5}'>{8} {10} {9}</div>\r\n\t\t\t\t</div>",CrmEncodeDecode.CrmHtmlAttributeEncode($p0.ProcessInstanceId.toString()),CrmEncodeDecode.CrmHtmlEncode($v_0),CrmEncodeDecode.CrmHtmlEncode($v_1),"",CrmEncodeDecode.CrmHtmlAttributeEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode($p0.ProcessDefinitionId.toString()),CrmEncodeDecode.CrmHtmlAttributeEncode($p0.ProcessInstanceId.toString()),CrmEncodeDecode.CrmHtmlEncode($p0.ModifiedOn),CrmEncodeDecode.CrmHtmlEncode(this.getModifiedByName($p0)),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PROCESS_BY_LABEL))},$2I_0:function($p0){var $v_0=$p0.DefinitionName;return String.format("<div class='ms-crm-ProcessSwitcher-Process' tabindex='0' role='radio' aria-checked='false'>\r\n\t\t\t\t\t<input type='radio' name='processSwitcherProcess' data-process='{6}' data-processinstance='{7}' value='{0}'\r\n\t\t\t\t\t\tid='SwitchProcess-Process-{0}'\r\n\t\t\t\t\t\tclass='ms-crm-ProcessSwitcher-Radio' title='{4}' {3} tabindex='-1'/>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessTitle' title='{4}'>{1}</div>\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessDescription' title='{5}'>{2}</div>\r\n\t\t\t\t</div>",CrmEncodeDecode.CrmHtmlAttributeEncode($p0.DefinitionId.toString()),CrmEncodeDecode.CrmHtmlEncode($v_0),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PROCESS_NEW_PROCESS),"",CrmEncodeDecode.CrmHtmlAttributeEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode($p0.DefinitionId.toString()),CrmEncodeDecode.CrmHtmlAttributeEncode(""))},$2G_0:function(){return String.format("<div class='ms-crm-ProcessSwitcher-Process' id='{1}'>\t\t\t\t\t\r\n\t\t\t\t\t<div class='ms-crm-ProcessSwitcher-ProcessTitle' role='link' title='{0}' tabindex='0'>{0} >></div>\t\t\t\t\t\r\n\t\t\t\t</div>",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PROC_ARCSWITCH_LINKTITLE),CrmEncodeDecode.CrmHtmlAttributeEncode("ArchivedLink"))},add_processSwitched:function(value){this.$15_0.addHandler("FlyoutProcessSwitchCompleted",value)},remove_processSwitched:function(value){this.$15_0.removeHandler("FlyoutProcessSwitchCompleted",value)},getModifiedByName:function(processInstance){if(!IsNull(processInstance.ModifiedByName)&&processInstance.ModifiedByName.toLowerCase()!=="system".toLowerCase())return processInstance.ModifiedByName;else if(!IsNull(processInstance.ModifiedOnBehalfByName)&&processInstance.ModifiedOnBehalfByName.toLowerCase()!=="system".toLowerCase())return processInstance.ModifiedOnBehalfByName;else return processInstance.ModifiedByName},$1B_0:function($p0){var $v_0=$p0.find(".ms-crm-ProcessSwitcher-Process");$v_0.removeClass("ms-crm-ProcessSwitcher-Process-Selected");var $v_1=$p0.find("input:checked").parents(".ms-crm-ProcessSwitcher-Process");$v_1.addClass("ms-crm-ProcessSwitcher-Process-Selected");var $v_2=$p0.find("input").parents("[aria-checked=true]");!IsNull($v_2)&&$v_2.attr("aria-checked","false");if(!IsNull($v_1)&&$v_1.length>0){$v_1[0].setAttribute("aria-checked","true");$v_1.focus()}var $v_3=$v_1.children("input").attr("value");if(isNullOrEmptyString($v_3)||$v_3===this.$k_0)this.$10_0(false);else this.$1r_0()},$1r_0:function(){if(!this.$u_0){this.$2_0.setFlyOutButtonDisplay(1,true);this.$u_0=true}},$10_0:function($p0){if(this.$u_0){this.$2_0.setFlyOutButtonDisplay(1,false);this.$u_0=false}$p0&&this.$2_0.setFlyOutButtonFocus(2)},$2O_0:function($p0,$p1){var $$t_4=this,$$t_5=this;$P_CRM.when(this.$19_0.switchProcess($p0,$p1)).then(function($p1_0){$$t_4.$23_0()},function($p1_0){})},$23_0:function(){var $v_0=this.$15_0.getHandler("FlyoutProcessSwitchCompleted");$v_0&&$v_0(this,Sys.EventArgs.Empty)},$1o_0:function($p0){var $$t_1=this;$P_CRM(window).resize(function(){window.clearTimeout($$t_1.$1H_0);$$t_1.$1H_0=window.setTimeout(function(){$$t_1.$1d_0($p0)},100)})},$1d_0:function($p0){var $v_0=Math.min(this.$O_0.outerHeight(),600);$p0.find(".ui-dialog-content").height($v_0-this.get_$1T_0());$p0.css("margin-top","-"+($v_0/2).toString()+"px");this.$2L_0($p0,$v_0)},$2L_0:function($p0,$p1){var $v_0=$p0.find(".ms-crm-ProcessSwitcher-Subtitle").outerHeight(),$v_1=$p1-$v_0-50-this.get_$1T_0();$p0.find(".ms-crm-ProcessSwitcher-ProcessList").height($v_1)},show:function(){if(!this.$2_0){this.$2_0=this.$1X_0();this.$1o_0(this.$2_0.dialogChrome())}else this.$1a_0();var $v_0=this.$2_0.dialogChrome();this.$2_0.show(this.$O_0);$v_0.css("top","");$v_0.css("left","");$v_0.addClass("ms-crm-ProcessSwitcher-Flyout");$v_0.attr("id","processSwitcherFlyout");this.$1d_0($v_0);this.$1e_0($v_0)},dispose:function(){this.$q_0=this.get_$A_0().find("input");!IsNull(this.$q_0)&&this.$q_0.unbind();!IsNull(this.$4_0)&&this.$4_0.unbind()}};Type.registerNamespace("Mscrm.ProcessControlShared.ObjectModels");Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceState=function(){};Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceState.prototype={Active:0,InActive:1};Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceState.registerEnum("Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceState",false);Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceStatus=function(){};Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceStatus.prototype={Active:1,Finished:2,Aborted:3};Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceStatus.registerEnum("Mscrm.ProcessControlShared.ObjectModels.ProcessInstanceStatus",false);Mscrm.ProcessControlShared.ObjectModels.BusinessProcessFlow=function(){};Mscrm.ProcessControlShared.ObjectModels.BusinessProcessFlow.prototype={ProcessDefinitions:null,ProcessInstances:null};Mscrm.ProcessControlShared.ObjectModels.ProcessInstance=function(){};Mscrm.ProcessControlShared.ObjectModels.ProcessInstance.prototype={Title:null,ProcessInstanceId:null,ProcessDefinitionId:null,ProcessDefinitionName:null,CurrentProcessInstanceState:0,CurrentProcessInstanceStatus:0,CurrentActiveStageId:null,TraversedPath:null,StatusCodeName:null,ModifiedOn:null,CreatedOn:null,ModifiedByName:null,ModifiedOnBehalfByName:null};Mscrm.ProcessControlShared.ObjectModels.ProcessDefinition=function(){};Mscrm.ProcessControlShared.ObjectModels.ProcessDefinition.prototype={DefinitionName:null,DefinitionId:null};Mscrm.ErrorFlyout.registerClass("Mscrm.ErrorFlyout",null,Sys.IDisposable);Mscrm.FlyOutButton.registerClass("Mscrm.FlyOutButton");Mscrm.FlyOutPosition.registerClass("Mscrm.FlyOutPosition");Mscrm.FlyOutDialogEventName.registerClass("Mscrm.FlyOutDialogEventName");Mscrm.FlyOutButtonType.registerClass("Mscrm.FlyOutButtonType");Mscrm.ErrorFlyOutConstant.registerClass("Mscrm.ErrorFlyOutConstant");Mscrm.FlyOutCssClassNames.registerClass("Mscrm.FlyOutCssClassNames");Mscrm.FlyOutElementTemplate.registerClass("Mscrm.FlyOutElementTemplate");Mscrm.SystemErrorCodes.registerClass("Mscrm.SystemErrorCodes");Mscrm.FlyOutDialog.registerClass("Mscrm.FlyOutDialog");Mscrm.FlyOutEventData.registerClass("Mscrm.FlyOutEventData");Mscrm.FlyOutMenu.registerClass("Mscrm.FlyOutMenu");Mscrm.FlyOutMenuDescriptor.registerClass("Mscrm.FlyOutMenuDescriptor");Mscrm.MenuListItemDescriptor.registerClass("Mscrm.MenuListItemDescriptor");Mscrm.MenuSectionDescriptor.registerClass("Mscrm.MenuSectionDescriptor");Mscrm.FlyOutOptions.registerClass("Mscrm.FlyOutOptions");Mscrm.jQueryDialogOptionsImportHelper.registerClass("Mscrm.jQueryDialogOptionsImportHelper");Mscrm.SwitchProcessFlyoutViewModel.registerClass("Mscrm.SwitchProcessFlyoutViewModel");Mscrm.InlineFlyOutDialog.registerClass("Mscrm.InlineFlyOutDialog",Mscrm.FlyOutDialog);Mscrm.NotificationFlyout.registerClass("Mscrm.NotificationFlyout",Mscrm.ErrorFlyout);Mscrm.RollupErrorFlyout.registerClass("Mscrm.RollupErrorFlyout");Mscrm.FormSectionNavigationFlyOut.registerClass("Mscrm.FormSectionNavigationFlyOut",Sys.Component);Mscrm.TemplateData.registerClass("Mscrm.TemplateData");Mscrm.SwitchProcessFlyOut.registerClass("Mscrm.SwitchProcessFlyOut");Mscrm.ProcessControlShared.ObjectModels.BusinessProcessFlow.registerClass("Mscrm.ProcessControlShared.ObjectModels.BusinessProcessFlow");Mscrm.ProcessControlShared.ObjectModels.ProcessInstance.registerClass("Mscrm.ProcessControlShared.ObjectModels.ProcessInstance");Mscrm.ProcessControlShared.ObjectModels.ProcessDefinition.registerClass("Mscrm.ProcessControlShared.ObjectModels.ProcessDefinition");Mscrm.FlyOutPosition.right="right";Mscrm.FlyOutPosition.left="left";Mscrm.FlyOutPosition.bottom="bottom";Mscrm.FlyOutPosition.custom="custom";Mscrm.FlyOutDialogEventName.loadContent="flyout-loadcontent";Mscrm.FlyOutDialogEventName.visibleChanged="flyout-visiblechanged";Mscrm.FlyOutDialogEventName.confirming="flyout-confirming";Mscrm.FlyOutDialogEventName.confirmed="flyout-confirmed";Mscrm.FlyOutDialogEventName.canceling="flyout-canceling";Mscrm.FlyOutDialogEventName.canceled="flyout-canceled";Mscrm.FlyOutDialogEventName.overlayClicked="flyout-overlayclicked";Mscrm.FlyOutDialogEventName.closed="flyout-closed";Mscrm.FlyOutButtonType.confirm=1;Mscrm.FlyOutButtonType.cancel=2;Mscrm.ErrorFlyOutConstant.flyOutMargin=7;Mscrm.FlyOutCssClassNames.chromeElement="ms-crm-Inline-Chrome";Mscrm.FlyOutCssClassNames.flyOutDialog="ui-flyout-dialog";Mscrm.FlyOutCssClassNames.flyOutSelectButton="li-selectedflyoutbutton";Mscrm.FlyOutCssClassNames.commandBarOverlay="ui-widget-overlay ui-widget-overlay-flyout ui-widget-overlay-flyout-dark rollup CommandBarOverlayFlyOut";Mscrm.FlyOutElementTemplate.div="<div></div>";Mscrm.FlyOutElementTemplate.image="<img></img>";Mscrm.SystemErrorCodes.privilegeDenied=-2147220960;Mscrm.FlyOutDialog.buttonSelector=".ui-dialog-buttonpane .ui-dialog-buttonset button:nth-child({0})";Mscrm.FlyOutDialog.buttonTextSelector=".ui-button-text";Mscrm.FlyOutDialog.$G=null;Mscrm.FlyOutDialog.currentDialog=null;Mscrm.jQueryDialogOptionsImportHelper.$$cctor()