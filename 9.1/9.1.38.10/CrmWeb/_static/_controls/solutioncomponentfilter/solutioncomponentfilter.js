Type.registerNamespace("Mscrm");Mscrm.SolutionComponentFilter=function(element){this.$$d_$3_3=Function.createDelegate(this,this.$3_3);this.$$d_$4_3=Function.createDelegate(this,this.$4_3);Mscrm.SolutionComponentFilter.initializeBase(this,[element])};Mscrm.SolutionComponentFilter.prototype={$1_3:null,$0_3:null,filterMode:null,initialize:function(){Mscrm.CrmUIControl.prototype.initialize.call(this);this.$1_3=this.$$d_$4_3;this.$0_3=this.$$d_$3_3;this.$5_3()},dispose:function(){if(this.get_isDisposed())return;var $v_0=$get(this.get_element().id+"_typefilter");!IsNull($v_0)&&$removeHandler($v_0,"change",this.$1_3);var $v_1=$get(this.get_element().id+"_subfilter");!IsNull($v_1)&&$removeHandler($v_1,"change",this.$0_3);Mscrm.CrmUIControl.prototype.dispose.call(this)},$5_3:function(){var $v_0=$get(this.get_element().id+"_typefilter");!IsNull($v_0)&&$addHandler($v_0,"change",this.$1_3);var $v_1=$get(this.get_element().id+"_subfilter");!IsNull($v_1)&&$addHandler($v_1,"change",this.$0_3)},$4_3:function($p0){var $v_0=false,$v_1=$get(this.get_element().id+"_typefilter");if($v_1.options[$v_1.selectedIndex].value.indexOf("_")>0)$v_0=true;var $v_2,$v_3=$v_1.options[$v_1.selectedIndex].value;if($v_0)$v_2=Mscrm.ComponentTypeSubcode.getComponentTypeFromString($v_3);else $v_2=Number.parseInvariant($v_3);if(this.filterMode==="submit"){var $v_4=Mscrm.CrmUri.create(window.location.toString()),$v_5=$get(this.get_element().id+"_mappingSelect");if(!$v_2)window.self.Mscrm.TreeNavControl.navigateToNode();else for(var $v_6=0;$v_6<$v_5.options.length;$v_6++){var $v_7=Number.parseInvariant($v_5.options[$v_6].text);if($v_7===$v_2){var $v_8=$v_5.options[$v_6].value,$v_9=$v_0?$v_8+"_"+Mscrm.ComponentTypeSubcode.getSubcomponentNumberFromString($v_3):$v_8;window.self.Mscrm.TreeNavControl.navigateToNode($v_9);break}}}else{var $v_A=$get(this.get_element().id+"_subfilter"),$v_B=$get("div_"+this.get_element().id+"_subfilter");while($v_A.options.length>0)$v_A.remove(0);if($v_2){var $v_D=this.$2_3($v_2);if(!IsNull($v_D)&&$v_D.indexOf("<option")>=0){if($v_D.indexOf("SELECTED")>0&&$v_D.indexOf("SELECTED=")<0&&$v_D.indexOf("SELECTED =")<0)$v_D=$v_D.replace("SELECTED","");for(var $v_E=XUI.Xml.LoadXml("<select>"+$v_D+"</select>"),$v_F="/select/option",$v_G=XUI.Xml.SelectNodes($v_E,$v_F,null),$v_H=0;$v_H<$v_G.length;$v_H++){var $v_I=document.createElement("OPTION");$v_I.value=$v_G[$v_H].attributes.getNamedItem("value").value;$v_I.text=XUI.Xml.GetText($v_G[$v_H]);$v_A.add($v_I)}}}if($v_A.options.length>0){$v_A.selectedIndex=0;$v_B.style.display="block"}else $v_B.style.display="none";var $v_C=$find(this.get_element().getAttribute("gridid"));$v_C.SetParameter("componentTypeFilter",$v_3);$v_A.selectedIndex>=0&&$v_C.SetParameter("componentSubFilter",$v_A.options[$v_A.selectedIndex].value);$v_C.refresh()}},$3_3:function($p0){var $v_0=$get(this.get_element().id+"_subfilter"),$v_1=$get(this.get_element().id+"_typefilter"),$v_2=$v_1.options[$v_1.selectedIndex].value,$v_3=$v_0.options[$v_0.selectedIndex].value,$v_4=$find(this.get_element().getAttribute("gridid"));$v_4.SetParameter("componentTypeFilter",$v_2);$v_4.SetParameter("componentSubFilter",$v_3);$v_4.refresh()},$2_3:function($p0){var $v_0=new RemoteCommand("Solution","CreateSubFilterHtml",null);$v_0.SetParameter("componentType",$p0);var $v_1=$v_0.Execute(null);if(!IsNull($v_1)&&!isNullOrEmptyString($v_1.ReturnValue))return $v_1.ReturnValue;return null}};Mscrm.SolutionComponentFilter.registerClass("Mscrm.SolutionComponentFilter",Mscrm.CrmUIControl)