Type.registerNamespace("Mscrm.Caching");Mscrm.Caching.IKeyValueCache$2=function(){};Mscrm.Caching.IKeyValueCache$2.$$=function(TKey,TValue){var $$cn="IKeyValueCache$2$"+TKey.getName().replace(/\./g,"_")+"$"+TValue.getName().replace(/\./g,"_");if(!Mscrm.Caching[$$cn]){var $$ccr=Mscrm.Caching[$$cn]=function(){};$$ccr.registerInterface("Mscrm.Caching."+$$cn)}return Mscrm.Caching[$$cn]};Mscrm.Caching.IKeyValueCache$2.registerInterface("Mscrm.Caching.IKeyValueCache$2");Mscrm.Caching.IStringCache=function(){};Mscrm.Caching.IStringCache.registerInterface("Mscrm.Caching.IStringCache");Mscrm.Caching.CacheWithExpiration=function(cache,expiration){if(!cache)throw Error.argumentNull("cache");if(typeof expiration==="undefined"||!expiration)expiration=3.6e6;this.$3_0=cache;this.$2_0=expiration};Mscrm.Caching.CacheWithExpiration.prototype={$3_0:null,$2_0:0,get_expiration:function(){return this.$2_0},set_expiration:function(value){this.$2_0=value;return value},$1_0:0,get_cacheMisses:function(){return this.$1_0},set_cacheMisses:function(value){this.$1_0=value;return value},$4_0:0,get_cacheHits:function(){return this.$4_0},set_cacheHits:function(value){this.$4_0=value;return value},get_item:function(key){var $v_0=this.$3_0.get_item(key);if(!$v_0){this.$1_0++;return null}var $v_1=this.$9_0($v_0);!$v_1&&this.$3_0.set_item(key,null);return $v_1},set_item:function(key,value){var $v_0=(new Date).getTime(),$v_1=$v_0+this.$2_0,$v_2=String.format("Exp:{0};{1}",$v_1,value);this.$3_0.set_item(key,$v_2);return value},$9_0:function($p0){var $v_0=$p0.indexOf(";"),$v_1=$p0.substring(4,$v_0),$v_2=Number.parseInvariant($v_1);if($v_2<(new Date).getTime()){this.$1_0++;return null}else{this.$4_0++;return $p0.substr($v_0+1)}}};Mscrm.Caching.CompoundKeyCache$3=function(keyTransformer,innerCache){if(!keyTransformer)throw Error.argumentNull("keyTransformer");if(!innerCache)throw Error.argumentNull("innerCache");this.$6_0=keyTransformer;this.$5_0=innerCache};Mscrm.Caching.CompoundKeyCache$3.$$=function(TKey,TInnerKey,TValue){var $$cn="CompoundKeyCache$3$"+TKey.getName().replace(/\./g,"_")+"$"+TInnerKey.getName().replace(/\./g,"_")+"$"+TValue.getName().replace(/\./g,"_");if(!Mscrm.Caching[$$cn]){var $$ccr=Mscrm.Caching[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.Caching.CompoundKeyCache$3"]={TKey:TKey,TInnerKey:TInnerKey,TValue:TValue};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.Caching.CompoundKeyCache$3.apply(this,$v_0)};$$ccr.registerClass("Mscrm.Caching."+$$cn,null,Mscrm.Caching.IKeyValueCache$2.$$(TKey,TValue));var $$dict_7=Mscrm.Caching.CompoundKeyCache$3.prototype;for(var $$key_8 in $$dict_7){var $$entry_9={key:$$key_8,value:$$dict_7[$$key_8]};if("constructor"!==$$entry_9.key)$$ccr.prototype[$$entry_9.key]=$$entry_9.value}}return Mscrm.Caching[$$cn]};Mscrm.Caching.CompoundKeyCache$3.prototype={$6_0:null,$5_0:null,get_item:function(key){var $v_0=this.$6_0(key);return this.$5_0.get_item($v_0)},set_item:function(key,value){var $v_0=this.$6_0(key);this.$5_0.set_item($v_0,value);return value}};Mscrm.Caching.LocalCaches=function(){};Mscrm.Caching.LocalCaches.$$cctor=function(){try{Mscrm.Caching.LocalCaches.sipIDs=new Mscrm.Caching.CacheWithExpiration(new Mscrm.Caching.LocalStorageCache("Presence/SipIDs"),7.2e6)}catch($$e_0){}};Mscrm.Caching.LocalStorageCache=function(cacheNamespace){if(!cacheNamespace||cacheNamespace==="")throw Error.argumentNull("cacheNamespace");this.$7_0="LocalStorageCache/"+cacheNamespace+"/";try{this.$0_0=Mscrm.CrmCrossBrowser.getLocalStorage(window.self)}catch($$e_1){this.$0_0=new Mscrm.Caching.FallbackStorage}};Mscrm.Caching.LocalStorageCache.getEntityMetadataCache=function(entityLogicalName){if(!entityLogicalName||entityLogicalName==="")throw Error.argumentNull("entityLogicalName");return new Mscrm.Caching.LocalStorageCache("Metadata/"+entityLogicalName)};Mscrm.Caching.LocalStorageCache.prototype={$7_0:null,$0_0:null,$8_0:function($p0){return this.$7_0+$p0},get_item:function(key){return this.$0_0.getItem(this.$8_0(key))},set_item:function(key,value){this.$0_0.setItem(this.$8_0(key),value);return value}};Mscrm.Caching.FallbackStorage=function(){};Mscrm.Caching.FallbackStorage.prototype={clear:function(){Mscrm.Caching.FallbackStorage.$0={}},getItem:function($p0){return Mscrm.Caching.FallbackStorage.$0[$p0]},removeItem:function($p0){delete Mscrm.Caching.FallbackStorage.$0[$p0]},setItem:function($p0,$p1){Mscrm.Caching.FallbackStorage.$0[$p0]=$p1}};Mscrm.Caching.CacheWithExpiration.registerClass("Mscrm.Caching.CacheWithExpiration",null,Mscrm.Caching.IStringCache,Mscrm.Caching.IKeyValueCache$2.$$(String,String));Mscrm.Caching.LocalCaches.registerClass("Mscrm.Caching.LocalCaches");Mscrm.Caching.LocalStorageCache.registerClass("Mscrm.Caching.LocalStorageCache",null,Mscrm.Caching.IStringCache,Mscrm.Caching.IKeyValueCache$2.$$(String,String));Mscrm.Caching.FallbackStorage.registerClass("Mscrm.Caching.FallbackStorage",null,Mscrm.IBrowserStorage);Mscrm.Caching.CacheWithExpiration.defaultExpirationTime=3.6e6;Mscrm.Caching.LocalCaches.sipIDs=null;Mscrm.Caching.LocalCaches.$$cctor();Mscrm.Caching.LocalStorageCache.namespacePrefix="LocalStorageCache/";Mscrm.Caching.FallbackStorage.$0={}