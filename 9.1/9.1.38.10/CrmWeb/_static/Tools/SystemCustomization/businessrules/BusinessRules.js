Type.registerNamespace("Mscrm");Mscrm.BusinessRuleErrorFlyout=function(contentContainer){this.$4P_0=contentContainer};Mscrm.BusinessRuleErrorFlyout.prototype={$AY_0:function(){var $v_0=new Mscrm.FlyOutDialog;$v_0.get_options().set_showTitlePane(true);$v_0.get_options().set_title(window.LOCID_PBLERROR_TITLE);$v_0.get_options().set_width(400);$v_0.get_options().set_height(188);$v_0.set_position("bottom");$v_0.get_options().set_showButtonPane(true);$v_0.get_options().set_showCloseButton(true);$v_0.get_options().set_modal(true);$v_0.get_options().set_letjQueryHandleTabbing(true);$v_0.get_options().set_hideWithClickOnOverlay(false);$v_0.get_options().set_applyAnchorClassChange(false);$v_0.get_options().set_closeOnEscape(true);$v_0.setContent(this.$B1_0());return $v_0},$BA_0:function($p0,$p1){var $v_0=$P_CRM("#PblErrorElementId");$v_0.html(CrmEncodeDecode.CrmHtmlEncode($p1));var $v_1=$p0.find("div.ui-dialog-buttonpane button");$v_1[0].id="pbleditor-errorok";XUI.Html.DomUtils.GetFirstChild($v_1[0]).innerHTML=window.LOCID_PBLDIALOG_OK;$v_1[0].title=window.LOCID_PBLDIALOG_OK;$v_1[1].style.display="none"},$B1_0:function(){var $v_0=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create(window.CDNURL+"/_imgs/businessruleeditor/erroricon.png")),$v_1=String.format("<div><table class='pbleditor-dialog-content'><tbody><tr><td class='pbleditor-dialog-icon' title='{0}'><img src='{1}' class='{2}'></img></td><td class='pbleditor-dialog-area pbleditor-dialog-errorFlyout'><span class='pbleditor-dialog-detail pbleditor-dialog-detailAttribute' tabindex='0' id='{3}'></span></td></tr></tbody></table></div>",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLERROR_TITLE),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.source),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.cssClass),CrmEncodeDecode.CrmHtmlAttributeEncode("PblErrorElementId")),$v_2=$P_CRM($v_1);return $v_2},show:function(errorMessage){if(!this.$2I_0)this.$2I_0=this.$AY_0();var $v_0=this.$2I_0.dialogChrome(),$v_1=this.$4P_0.outerHeight(),$v_2=Math.min($v_1,188);this.$2I_0.get_options().set_height($v_2);this.$2I_0.show(this.$4P_0);$v_0.css("top","50%");$v_0.css("left","50%");$v_0.css("margin-top","-"+($v_2/2).toString()+"px");$v_0.css("margin-left","-200px");this.$BA_0($v_0,errorMessage)},$4P_0:null,$2I_0:null};Mscrm.BusinessRuleConfirmFlyout=function($p0,$p1,$p2){this.$4P_0=$p0;this.$75_0=$p1;this.$70_0=$p2};Mscrm.BusinessRuleConfirmFlyout.prototype={$AY_0:function($p0,$p1){var $v_0=new Mscrm.FlyOutDialog;$v_0.setContent(this.$B1_0($p1));$v_0.get_options().set_showTitlePane(true);$v_0.get_options().set_title($p0);$v_0.get_options().set_width(496);$v_0.get_options().set_height(200);$v_0.set_position("bottom");$v_0.get_options().set_showButtonPane(true);$v_0.get_options().set_modal(true);$v_0.get_options().set_letjQueryHandleTabbing(true);$v_0.get_options().set_hideWithClickOnOverlay(false);$v_0.get_options().set_applyAnchorClassChange(false);$v_0.get_options().set_showCloseButton(true);$v_0.get_options().set_closeOnEscape(true);var $$t_5=this;$v_0.bind("flyout-confirmed",function($p1_0){$$t_5.$75_0&&$$t_5.$75_0($p1_0)});var $$t_6=this;$v_0.bind("flyout-canceled",function($p1_0){$$t_6.$70_0&&$$t_6.$70_0($p1_0)});return $v_0},$BA_0:function($p0,$p1){var $v_0=$P_CRM("#PblConfirmElementId");$v_0.html(CrmEncodeDecode.CrmHtmlEncode($p1));var $v_1=$p0.find("div.ui-dialog-buttonpane button");$v_1[0].id="pbleditor-confirm-ok";XUI.Html.DomUtils.GetFirstChild($v_1[0]).innerHTML=window.LOCID_PBLDIALOG_OK;$v_1[0].title=window.LOCID_PBLDIALOG_OK;$v_1[1].id="pbleditor-confirm-cancel";XUI.Html.DomUtils.GetFirstChild($v_1[1]).innerHTML=window.LOCID_PBLDIALOG_CANCEL;$v_1[1].title=window.LOCID_PBLDIALOG_CANCEL},$B1_0:function($p0){var $v_0=String.format("<div><div class='pbleditor-dialog-content'><div class='pbleditor-dialog-area'><div class='pbleditor-dialog-body' tabindex='0'>{0}</div><div class='pbleditor-dialog-detail' id='{1}'></div></div></div></div>",CrmEncodeDecode.CrmHtmlEncode($p0),CrmEncodeDecode.CrmHtmlAttributeEncode("PblConfirmElementId")),$v_1=$P_CRM($v_0);return $v_1},show:function($p0,$p1,$p2){if(!this.$2I_0)this.$2I_0=this.$AY_0($p0,$p1);var $v_0=this.$2I_0.dialogChrome();this.$2I_0.get_options().set_height(200);this.$2I_0.show(this.$4P_0);$v_0.css("top","50%");$v_0.css("left","50%");$v_0.css("margin-top","-100px");$v_0.css("margin-left","-248px");this.$BA_0($v_0,$p2)},$4P_0:null,$2I_0:null,$75_0:null,$70_0:null};Mscrm.MaskPanel=function(){this.$$d_$Br_0=Function.createDelegate(this,this.$Br_0);this.$$d_$Dx_0=Function.createDelegate(this,this.$Dx_0);this.$$d_$CP_0=Function.createDelegate(this,this.$CP_0);this.$8X_0=$P_CRM("body")};Mscrm.MaskPanel.get_instance=function(){if(!Mscrm.MaskPanel.$7S)Mscrm.MaskPanel.$7S=new Mscrm.MaskPanel;return Mscrm.MaskPanel.$7S};Mscrm.MaskPanel.prototype={showMaskPanel:function(currentInlineEditView){if(IsNull(currentInlineEditView))return;this.$28_0=currentInlineEditView;$P_CRM(window).bind("keydown",this.$$d_$CP_0);this.$Bo_0(this.$28_0.get_editElementWrapper());this.$9K_0()},$9K_0:function(){var $v_0=this.$28_0.get_editElementWrapper().offset(),$v_1=this.$28_0.get_editElementWrapper().outerHeight(false),$v_2=this.get_$6j_0().scrollTop(),$v_3=0,$$t_A=this;this.get_$6j_0().children().not(".maskPanel").each(function($p1_0,$p1_1){$v_3+=$P_CRM($p1_1).height()});var $v_4=this.get_$DG_0().outerHeight(false),$v_5=this.get_$CQ_0().outerHeight(false),$v_6=$v_0.top-$v_4+$v_2,$v_7=this.get_$6j_0()[0].scrollWidth;if(!this.$2z_0||!this.$2x_0||!this.$37_0||!this.$2X_0){this.$2z_0=$P_CRM(Mscrm.MaskPanel.$6F);this.$2z_0.attr("id","headerMaskPanel");this.$2z_0.css("top","0px");this.$4E_0(this.$2z_0,$v_7,$v_4);this.$2x_0=$P_CRM(Mscrm.MaskPanel.$6F);this.$2x_0.attr("id","footerMaskPanel");this.$2x_0.css("bottom","0px");this.$4E_0(this.$2x_0,$v_7,$v_5);this.$37_0=$P_CRM(Mscrm.MaskPanel.$6F);this.$37_0.attr("id","upMaskPanel");this.$37_0.css("top","0px");this.$4E_0(this.$37_0,$v_7,$v_6);this.$2X_0=$P_CRM(Mscrm.MaskPanel.$6F);this.$2X_0.attr("id","downMaskPanel");this.$2X_0.css("top",$v_6+$v_1+"px");this.$4E_0(this.$2X_0,$v_7,$v_3-($v_6+$v_1));this.$8X_0.prepend(this.$2x_0);this.$8X_0.prepend(this.$2z_0);this.get_$6j_0().prepend(this.$2X_0);this.get_$6j_0().prepend(this.$37_0)}else{this.$4E_0(this.$2z_0,$v_7,$v_4);this.$4E_0(this.$2x_0,$v_7,$v_5);this.$4E_0(this.$37_0,$v_7,$v_6);this.$2X_0.css("top",$v_6+$v_1+"px");this.$4E_0(this.$2X_0,$v_7,$v_3-($v_6+$v_1));this.$2z_0.show();this.$2x_0.show();this.$37_0.show();this.$2X_0.show()}this.$4T_0=true},$4E_0:function($p0,$p1,$p2){$p0.css("width",$p1+"px");$p0.css("height",$p2+"px");$p0.unbind("click");$p0.click(this.$$d_$Dx_0)},hideMaskPanel:function(){if(!this.$28_0)return;$P_CRM(window).unbind("keydown",this.$$d_$CP_0);this.$EW_0(this.$28_0.get_editElementWrapper());this.$28_0=null;this.$2z_0.hide();this.$2x_0.hide();this.$37_0.hide();this.$2X_0.hide();this.$4T_0=false},$CP_0:function($p0){if($p0.which===9){var $v_0=$P_CRM(":focus",this.$28_0.get_chromeElement());if(IsNull($v_0)||!$v_0.length){this.$28_0.setFocus();$p0.preventDefault()}}},get_isDisplayed:function(){return this.$4T_0},blinkEditViewElement:function(){var $v_0=this.$AN_0();if(!$v_0.length||!this.$4T_0)return;$v_0.addClass("blink");window.setTimeout(this.$$d_$Br_0,50)},$Dx_0:function($p0){this.blinkEditViewElement()},$Br_0:function(){var $v_0=this.$AN_0();$v_0.removeClass("blink")},$AN_0:function(){var $v_0=$P_CRM(".editexpressionandtoolbarcontainer",this.$28_0.get_editElementWrapper());if(!$v_0.length)$v_0=$P_CRM(".editstepandtoolbarcontainer",this.$28_0.get_editElementWrapper());return $v_0},$Bo_0:function($p0){$P_CRM(".resize-sensor",$p0).remove();var $v_0=$P_CRM(Mscrm.MaskPanel.$9d);if($p0.css("position")==="static"){$p0.css("position","relative");$v_0.data("ResetPosition",true)}$p0.append($v_0);this.$9N_0($p0,$v_0);this.$9n_0($p0,$v_0,true);this.$9n_0($p0,$v_0,false)},$9n_0:function($p0,$p1,$p2){if($p2){var $v_0=$p1.children(".resize-expand"),$$t_7=this;$v_0.bind("scroll",function($p1_0){($p0.outerWidth(false)>$$t_7.$7O_0||$p0.outerHeight(false)>$$t_7.$7N_0)&&$$t_7.$9K_0();$$t_7.$9N_0($p0,$p1)})}else{var $v_1=$p1.children(".resize-shrink"),$$t_8=this;$v_1.bind("scroll",function($p1_0){($p0.outerWidth(false)<$$t_8.$7O_0||$p0.outerHeight(false)<$$t_8.$7N_0)&&$$t_8.$9K_0();$$t_8.$9N_0($p0,$p1)})}},$9N_0:function($p0,$p1){var $v_0=$p1.children(".resize-expand")[0],$v_1=$p1.children(".resize-shrink")[0],$v_2=$p1.children(".resize-expand").find("div")[0];$v_2.style.width=$v_0.offsetWidth+10+"px";$v_2.style.height=$v_0.offsetHeight+10+"px";$v_0.scrollLeft=$v_0.scrollWidth;$v_0.scrollTop=$v_0.scrollHeight;$v_1.scrollLeft=$v_1.scrollWidth;$v_1.scrollTop=$v_1.scrollHeight;this.$7O_0=$p0[0].offsetWidth;this.$7N_0=$p0[0].offsetHeight},$EW_0:function($p0){var $v_0=$P_CRM(".resize-sensor",$p0),$v_1=$v_0.data("ResetPosition");!IsNull($v_1)&&$v_1&&$p0.css("position","static");var $v_2=$v_0.children(".resize-expand");$v_2.unbind("scroll");var $v_3=$v_0.children(".resize-shrink");$v_3.unbind("scroll");$v_0.remove()},get_$6j_0:function(){if(!this.$r_0)this.$r_0=$P_CRM("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId());return this.$r_0},get_$DG_0:function(){if(!this.$7I_0)this.$7I_0=$P_CRM("#"+Mscrm.BusinessRules.Constants.get_headerViewContainerId());return this.$7I_0},get_$CQ_0:function(){if(!this.$7E_0)this.$7E_0=$P_CRM("#"+Mscrm.BusinessRules.Constants.get_footerViewContainerId());return this.$7E_0},$28_0:null,$r_0:null,$7I_0:null,$7E_0:null,$2z_0:null,$37_0:null,$2X_0:null,$2x_0:null,$7O_0:0,$7N_0:0,$4T_0:false};Mscrm.BusinessRulesGrid=function(){};Mscrm.BusinessRulesGrid.get_gridBusinessRules=function(){if(!Mscrm.BusinessRulesGrid.$63){Mscrm.BusinessRulesGrid.$63=$find("gridBusinessRules");if(!Mscrm.BusinessRulesGrid.$63)throw Error.argumentNull("gridControl is null")}return Mscrm.BusinessRulesGrid.$63};Mscrm.BusinessRulesGrid.onFormsGridClick=function(sender,args){if(sender){Mscrm.BusinessRulesGrid.editExistingBusinessRule(sender,args);args.breakEvent=true}};Mscrm.BusinessRulesGrid.editExistingBusinessRule=function(sender,args){if(sender){Mscrm.BusinessRulesGrid.$A1(args.objectID);args.breakEvent=true}};Mscrm.BusinessRulesGrid.editExistingRuleFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length!==1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}var $v_0=Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds()[0];Mscrm.BusinessRulesGrid.$A1($v_0)};Mscrm.BusinessRulesGrid.createNewBusinessRule=function(templateId){var $v_0=Mscrm.BusinessRulesGrid.$9y(),$v_1,$v_2=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("appSolutionId")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("appSolutionId"),$v_3=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("etc")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("etc"),$v_4=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("formId")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("formId"),$v_5=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("attributeId")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("attributeId");$v_0.get_query()["appSolutionId"]=$v_2;$v_0.get_query()["otc"]=$v_3;$v_0.get_query()["templateId"]=templateId;if($v_4.length>0)$v_0.get_query()["formId"]=$v_4;if($v_5.length>0)$v_0.get_query()["attributeId"]=$v_5;$v_0.get_query()["BRlaunchpoint"]="BRGrid";if(Mscrm.CrmBrowser.get_currentBrowser().get_agent()===4)$v_1=openStdDlg($v_0,null,1024,768,false);else if(Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){$v_1=openStdWin($v_0,"PortableBusinessLogicEditor",window.screen.availWidth,window.screen.availHeight,null,"");$v_1.moveTo(0,0);$v_1.resizeTo(window.screen.availWidth,window.screen.availHeight)}else $v_1=openStdWin($v_0,"PortableBusinessLogicEditor",1024,768,null,"");!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&Mscrm.BusinessRulesGrid.$BB($v_1,"New")};Mscrm.BusinessRulesGrid.$A1=function($p0){var $v_0=Mscrm.BusinessRulesGrid.$9y(),$v_1,$v_2=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("appSolutionId")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("appSolutionId");$v_0.get_query()["appSolutionId"]=$v_2;$v_0.get_query()["id"]=$p0;$v_0.get_query()["BRlaunchpoint"]="BRGrid";if(Mscrm.CrmBrowser.get_currentBrowser().get_agent()===4&&!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner"))$v_1=openStdDlg($v_0,null,1024,768,false);else{$v_1=openStdWin($v_0,buildWinName($p0),window.screen.availWidth,window.screen.availHeight,null,"");$v_1.moveTo(0,0);$v_1.resizeTo(window.screen.availWidth,window.screen.availHeight)}!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&Mscrm.BusinessRulesGrid.$BB($v_1,"Edit")};Mscrm.BusinessRulesGrid.$BB=function($p0,$p1){window.setTimeout(function(){$p0.clientType="WebClient"},1e3);window.setTimeout(function(){$p0.launchMode=$p1},1e3);var $v_0=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("entityLogicalName")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("entityLogicalName");window.setTimeout(function(){$p0.entityLogicalName=$v_0},1e3);var $v_1=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("pblLaunchPoint")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("pblLaunchPoint");window.setTimeout(function(){$p0.launchPoint=$v_1},1e3);var $v_2=!Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("formId")?"":Mscrm.BusinessRulesGrid.get_gridBusinessRules().GetParameter("formId");window.setTimeout(function(){$p0.formId=$v_2},1e3);window.setTimeout(function(){$p0.formType=""},1e3)};Mscrm.BusinessRulesGrid.activateRuleFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length<1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}Mscrm.GridCommandActions.activate(Mscrm.BusinessRulesGrid.get_gridBusinessRules(),Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedRecords(),Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_entityTypeCode())};Mscrm.BusinessRulesGrid.deactivateRuleFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length<1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}Mscrm.GridCommandActions.deactivate(Mscrm.BusinessRulesGrid.get_gridBusinessRules(),Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedRecords(),Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_entityTypeCode())};Mscrm.BusinessRulesGrid.deleteRuleFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length<1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}Mscrm.GridRibbonActions.deleteRecords(Mscrm.BusinessRulesGrid.get_gridBusinessRules(),Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedRecords(),Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_entityTypeCode())};Mscrm.BusinessRulesGrid.managePropertiesFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length!==1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}var $v_0=Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds()[0];Mscrm.ManagedPropertyUtil.launchManagedPropertyDlg(4703,$v_0)};Mscrm.BusinessRulesGrid.viewDependenciesFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length!==1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}var $v_0=Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds()[0];Mscrm.Dependency.launchDependencyDlg(4703,$v_0)};Mscrm.BusinessRulesGrid.viewComponentHistoryFromGridCommand=function(){if(Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds().length!==1){alert(window.LOCID_ACTION_SELECTONEBUSINESSRULE);return}var $v_0=Mscrm.BusinessRulesGrid.get_gridBusinessRules().get_selectedIds()[0];Mscrm.SolutionComponentList.launchComponentHistoryDlg("Workflow",$v_0)};Mscrm.BusinessRulesGrid.$9y=function(){var $v_0=null;if(Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner"))$v_0=Mscrm.CrmUri.create("/tools/systemcustomization/businessrules/businessRulesDesigner.aspx?");else $v_0=Mscrm.CrmUri.create("/tools/systemcustomization/businessrules/manageBusinessRules.aspx?");return $v_0};Mscrm.BusinessRule=function(){};Mscrm.BusinessRule.prototype={BusinessRuleId:null,Name:null,Description:null,PrimaryEntityTypeCode:0,FormId:null,Scope:null,WorkflowStepJson:null,Xaml:null};Mscrm.ProcessTrigger=function(){};Mscrm.ProcessTrigger.prototype={EventType:null,ControlName:null,ControlType:0,FormId:null,Scope:null,PipelineStage:null,ProcessTriggerId:null,MethodId:null,EntityName:null};Mscrm.BusinessRuleEditorDataJsonWrapper=function(){};Mscrm.BusinessRuleEditorDataJsonWrapper.prototype={EntityMetadata:null,EntityBpfMetadata:null,HierarchicalRelationshipName:null,RelatedEntityMetadata:null,DisplayModePicklistOptions:null,VisibilityPicklistOptions:null,RequiredLevelPicklistOptions:null,ConditionOperators:null,ArithmeticOperators:null,OperandType:null,ScopeSelectorData:null,CalculatedField:null,FunctionOperators:null,OneToManyRelationEntities:null,AggregateFunctions:null,RelatedLinkedEntities:null};Mscrm.EditorEntityMetadataJsonWrapper=function(){this.EntityTypeCode=-1};Mscrm.EditorEntityMetadataJsonWrapper.prototype={Fields:null,EntityLogicalName:"",DisplayName:"",PluralName:"",PrimaryAttributeLogicName:"",HierarchyType:0,IsActivity:false};Mscrm.EditorEntityBpfMetadataJsonWrapper=function(){this.EntityTypeCode=-1};Mscrm.EditorEntityBpfMetadataJsonWrapper.prototype={BusinessProcessFlows:null,StageCategories:null,Stages:null,IsBusinessProcessEnabled:false};Mscrm.EditorEntityLabelJsonWrapper=function(){this.LCID=-1};Mscrm.EditorEntityLabelJsonWrapper.prototype={Description:"",TypeLabel:null};Mscrm.EditorEntityFieldMetadataJsonWrapper=function(){};Mscrm.EditorEntityFieldMetadataJsonWrapper.prototype={LogicalName:"",Label:null,Type:0,AttributeDateTimeBehaviorType:0,AdditionalMetadata:null,IsManaged:false,IsCustomizable:false,IsFieldLevelSecurityEnabled:false,IsBaseCurrency:false};Mscrm.BpfAttributeMetadataJsonWrapper=function(){};Mscrm.BpfAttributeMetadataJsonWrapper.prototype={Options:null,Ids:null,BpfAttributeType:null,BpfStageEntityNames:null};Mscrm.EditorScopeSelectorDataJsonWrapper=function(){};Mscrm.EditorScopeSelectorDataJsonWrapper.prototype={Options:null,FormIds:null,Scopes:null};Mscrm.RelationshipEntityMetadataJsonWrapper=function(){};Mscrm.RelationshipEntityMetadataJsonWrapper.prototype={RelationshipName:null,RelationshipAttribute:null,RelationshipEntity:null};Type.registerNamespace("Mscrm.BusinessRules");Mscrm.BusinessRules.ParseResultType=function(){};Mscrm.BusinessRules.ParseResultType.prototype={parseSuccess:0,lexicalNoTokenFound:1,lexicalUnknownToken:2,lexicalWrongNumberFormat:3,lexicalWrongStringFormat:4,lexicalWrongIdentifierFormat:5,syntaxNoTokenFound:6,syntaxMultipleStatements:7,syntaxWrongStatement:8,syntaxWrongBasicExpression:9,syntaxUnexpectedToken:10,buildWorkflowSetFormulaError:11,buildWorkflowExpressionError:12};Mscrm.BusinessRules.ParseResultType.registerEnum("Mscrm.BusinessRules.ParseResultType",false);Mscrm.BusinessRules.TokenType=function(){};Mscrm.BusinessRules.TokenType.prototype={identifier:0,number:1,string:2,comma:3,plus:4,minus:5,multiple:6,divide:7,and:8,or:9,not:10,equal:11,notEqual:12,greater:13,greaterEqual:14,less:15,lessEqual:16,leftParenthesis:17,rightParenthesis:18,ifToken:19,elseToken:20,trueToken:21,falseToken:22};Mscrm.BusinessRules.TokenType.registerEnum("Mscrm.BusinessRules.TokenType",false);Mscrm.BusinessRules.IBusinessRuleStepChromeStateData=function(){};Mscrm.BusinessRules.IBusinessRuleStepChromeStateData.registerInterface("Mscrm.BusinessRules.IBusinessRuleStepChromeStateData");Mscrm.BusinessRules.IEditOperandContext=function(){};Mscrm.BusinessRules.IEditOperandContext.registerInterface("Mscrm.BusinessRules.IEditOperandContext");Mscrm.BusinessRules.IMultiValueExpression=function(){};Mscrm.BusinessRules.IMultiValueExpression.registerInterface("Mscrm.BusinessRules.IMultiValueExpression");Mscrm.BusinessRules.IValueExpressionAdapter=function(){};Mscrm.BusinessRules.IValueExpressionAdapter.registerInterface("Mscrm.BusinessRules.IValueExpressionAdapter");Mscrm.BusinessRules.IAttributeFilter=function(){};Mscrm.BusinessRules.IAttributeFilter.registerInterface("Mscrm.BusinessRules.IAttributeFilter");Mscrm.BusinessRules.IBusinessRuleEntityManager=function(){};Mscrm.BusinessRules.IBusinessRuleEntityManager.registerInterface("Mscrm.BusinessRules.IBusinessRuleEntityManager");Mscrm.BusinessRules.IEntityMetadataManager=function(){};Mscrm.BusinessRules.IEntityMetadataManager.registerInterface("Mscrm.BusinessRules.IEntityMetadataManager");Mscrm.BusinessRules.EditorPageType=function(){};Mscrm.BusinessRules.EditorPageType.prototype={pblRule:0,calculatedField:1,rollupField:2,bpfRule:3,tbfRule:4};Mscrm.BusinessRules.EditorPageType.registerEnum("Mscrm.BusinessRules.EditorPageType",false);Mscrm.BusinessRules.FilterSectionType=function(){};Mscrm.BusinessRules.FilterSectionType.prototype={sourceFilterSection:0,relatedFilterSection:1,relatedLinkedFilterSection:2};Mscrm.BusinessRules.FilterSectionType.registerEnum("Mscrm.BusinessRules.FilterSectionType",false);Mscrm.BusinessRules.PblEditorPageType=function(){};Mscrm.BusinessRules.PblEditorPageType.prototype={pblStandard:0,tbxPbl:1};Mscrm.BusinessRules.PblEditorPageType.registerEnum("Mscrm.BusinessRules.PblEditorPageType",false);Mscrm.BusinessRules.BranchingExpressionInlineEditChromeBehavior=function($p0){this.$$d_$EB_6=Function.createDelegate(this,this.$EB_6);this.$$d_$EA_6=Function.createDelegate(this,this.$EA_6);Mscrm.BusinessRules.BranchingExpressionInlineEditChromeBehavior.initializeBase(this,[$p0])};Mscrm.BusinessRules.BranchingExpressionInlineEditChromeBehavior.prototype={$6e_6:null,$39_6:null,$2G_6:null,transitionToState:function($p0){switch($p0){case 0:case 1:case 3:this.get_warningIcon().removeClass("hide-branching-warning-EditState");break;case 2:this.get_warningIcon().addClass("hide-branching-warning-EditState");break}Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior.prototype.transitionToState.call(this,$p0)},dispose:function(){if(this.get_isDisposed())return;!IsNull(this.$2G_6)&&this.$2G_6.dispose();if(!IsNull(this.$39_6)){this.$39_6.unbind("mouseenter",this.$$d_$EA_6);this.$39_6.unbind("mouseleave",this.$$d_$EB_6)}Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior.prototype.dispose.call(this)},get_warningIcon:function(){if(IsNull(this.$39_6)){this.$39_6=$P_CRM("<span></span>").addClass("ms-crm-Inline-WarningIcon").addClass("branching-warning").addClass("hidecontrol").append($P_CRM(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/warning.png"))).attr("alt",window.LOCID_WARNINGICON_ALTTEXT).attr("id",this.get_$7t_6().get_controlId()+"_warn")).append($P_CRM("<div></div>").attr("id",this.get_$7t_6().get_warningElementId()).addClass("ms-crm-Hidden-NoBehavior")).attr("title","");this.get_$7t_6().get_chromeElement().append(this.$39_6);this.$39_6.bind("mouseenter",this.$$d_$EA_6);this.$39_6.bind("mouseleave",this.$$d_$EB_6)}return this.$39_6},$EA_6:function($p0){this.get_$CN_6().showError(window.LOCID_PBLEXPRESSION_INVALID)},$EB_6:function($p0){!IsNull(this.$2G_6)&&this.$2G_6.hideError(false)},get_$CN_6:function(){if(IsNull(this.$2G_6))this.$2G_6=new Mscrm.ErrorFlyout(this.get_warningIcon(),this.get_$FC_6(),this.get_$A0_6());return this.$2G_6},get_$FC_6:function(){if(IsNull(this.$6e_6)){this.$6e_6=$P_CRM("<div></div>").addClass("ms-crm-Inline-Validation").hide().attr("id",this.get_$7t_6().get_controlId()+"_err");this.get_$A0_6().append(this.$6e_6)}return this.$6e_6},get_$A0_6:function(){return $P_CRM("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},get_$7t_6:function(){return this.get_view()}};Mscrm.BusinessRules.BranchingExpressionLayout=function($p0){Mscrm.BusinessRules.BranchingExpressionLayout.initializeBase(this,[$p0])};Mscrm.BusinessRules.BranchingExpressionLayout.prototype={get_chromeBehaviorType:function(){return Mscrm.BusinessRules.BranchingExpressionInlineEditChromeBehavior}};Mscrm.BusinessRules.ExpressionBuilder=function(){};Mscrm.BusinessRules.ExpressionBuilder.buildPrimitiveExpression=function(workflow,value,type){var $v_0=type;if(String.isInstanceOfType(value)&&$v_0!==14&&$v_0!==10){var $v_1=value;if($v_1.indexOf(".")<0){if(Mscrm.BusinessRules.ExpressionBuilder.$Ez($v_1))$v_0=5;else if(Mscrm.BusinessRules.ExpressionBuilder.$BK($v_1))$v_0=3}else if(Mscrm.BusinessRules.ExpressionBuilder.$BK($v_1))$v_0=3}return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(workflow,value,$v_0)};Mscrm.BusinessRules.ExpressionBuilder.$Ez=function($p0){var $v_0=false;try{var $v_1=parseInt($p0);if($v_1<=2147483647&&$v_1>=-2147483648)$v_0=true}catch($$e_3){}return $v_0};Mscrm.BusinessRules.ExpressionBuilder.$BK=function($p0){var $v_0=false;try{var $v_1=parseFloat($p0);if($v_1<=1e13&&$v_1>=-1e13)$v_0=true}catch($$e_3){}return $v_0};Mscrm.BusinessRules.ExpressionBuilder.buildMethodCallEvaluateExpression=function(workflow,parameters){var $v_0=new Array(parameters.length);if(String.isInstanceOfType(parameters[0]))$v_0[0]=Mscrm.BusinessRules.ExpressionBuilder.$C7(parameters[0]);else $v_0[0]=parameters[0];for(var $v_1=null,$v_3=1;$v_3<parameters.length;$v_3++){var $v_4=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression(workflow,0,[parameters[$v_3]]);$v_1=new Microsoft.Crm.Workflow.Validators.MethodCallExpressionValidator($v_4);$v_1.validate();$v_0[$v_3]=$v_4}var $v_2=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression(workflow,3,$v_0);$v_1=new Microsoft.Crm.Workflow.Validators.MethodCallExpressionValidator($v_2);$v_1.validate();return $v_2};Mscrm.BusinessRules.ExpressionBuilder.buildBinaryExpression=function(workflow,binaryOperator,leftExpression,rightExpression){return new Microsoft.Crm.Workflow.Expressions.BinaryExpression(workflow,binaryOperator,leftExpression,[rightExpression])};Mscrm.BusinessRules.ExpressionBuilder.buildEntityAttributeExpression=function(workflow,primaryAttributeName,relatedAttributeName){if(IsNull(relatedAttributeName))return Mscrm.BusinessRules.ExpressionBuilder.$Bw(workflow,primaryAttributeName);else return Mscrm.BusinessRules.ExpressionBuilder.$By(workflow,primaryAttributeName,relatedAttributeName)};Mscrm.BusinessRules.ExpressionBuilder.$Bw=function($p0,$p1){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName(),$p1);if(IsNull($v_0))throw Mscrm.BusinessRules.SharedMethods.createException(String.format(window.LOCID_CF_ERR_INVALIDREFERENCE,$p1));var $v_1=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity($p0),$v_2=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_1,$p1);$v_2.set_type($v_0.Type);$v_2.set_behavior($v_0.AttributeDateTimeBehaviorType);return $v_2};Mscrm.BusinessRules.ExpressionBuilder.$By=function($p0,$p1,$p2){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getEntityByTypeCode(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),Mscrm.BusinessRules.MetadataUtility.lookupToTypeCode($p1));if(IsNull($v_0)){var $v_4=String.format("{0}.{1}",$p1,$p2);throw Mscrm.BusinessRules.SharedMethods.createException(String.format(window.LOCID_CF_ERR_INVALIDREFERENCE,$v_4))}var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_0.EntityLogicalName,$p2);if(IsNull($v_1)){var $v_5=String.format("{0}.{1}",$p1,$p2);throw Mscrm.BusinessRules.SharedMethods.createException(String.format(window.LOCID_CF_ERR_INVALIDREFERENCE,$v_5))}var $v_2=new Microsoft.Crm.Workflow.Expressions.RelatedEntity($p0,$p1,$v_0.EntityLogicalName),$v_3=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_2,$p2);$v_3.set_type($v_1.Type);$v_3.set_behavior($v_1.AttributeDateTimeBehaviorType);return $v_3};Mscrm.BusinessRules.ExpressionBuilder.$C7=function($p0){$p0=$p0.toUpperCase();if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(22).toUpperCase())return 22;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(24).toUpperCase())return 24;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(23).toUpperCase())return 23;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(27).toUpperCase())return 27;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(25).toUpperCase())return 25;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(31).toUpperCase())return 31;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(29).toUpperCase())return 29;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(33).toUpperCase())return 33;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(28).toUpperCase())return 28;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(26).toUpperCase())return 26;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(32).toUpperCase())return 32;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(30).toUpperCase())return 30;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(34).toUpperCase())return 34;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(42).toUpperCase())return 42;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(48).toUpperCase())return 48;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(43).toUpperCase())return 43;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(44).toUpperCase())return 44;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(45).toUpperCase())return 45;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(46).toUpperCase())return 46;else if($p0===Microsoft.Crm.Workflow.Activities.ExpressionOperator.toString(47).toUpperCase())return 47;throw Mscrm.BusinessRules.SharedMethods.createException(String.format(window.LOCID_CF_ERR_NONEXISTINGFUNCTION,$p0))};Mscrm.BusinessRules.FormulaParser=function(rootStep,calculatedFieldMetadata){this.$43_0=rootStep;this.$3G_0=calculatedFieldMetadata;this.$9M_0()};Mscrm.BusinessRules.FormulaParser.prototype={$43_0:null,$3G_0:null,$7X_0:null,get_parseResults:function(){return this.$7X_0},parse:function(formula){var $v_0=null;this.$9M_0();var $v_1=new Mscrm.BusinessRules.LexicalAnalysis(false);if($v_1.parse(formula)){var $v_2=new Mscrm.BusinessRules.SyntaxAnalysis(this.$43_0,this.$3G_0);$v_0=$v_2.parse($v_1.$t_0);this.$7X_0.addRange($v_2.$C_0.toArray())}return $v_0},$9M_0:function(){this.$7X_0=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.ParseResult)}};Mscrm.BusinessRules.LexicalAnalysis=function(isSupportCondition){this.$7M_0=isSupportCondition;this.reset()};Mscrm.BusinessRules.LexicalAnalysis.isWhiteSpace=function(current){var $v_0=new RegExp("\\s");return $v_0.test(current.toString())};Mscrm.BusinessRules.LexicalAnalysis.isLetter=function(current){if(current>="a"&&current<="z"||current>="A"&&current<="Z"||current==="_")return true;return false};Mscrm.BusinessRules.LexicalAnalysis.isDigit=function(current){if(current>="0"&&current<="9")return true;return false};Mscrm.BusinessRules.LexicalAnalysis.prototype={$R_0:"",$F_0:0,$7M_0:false,$t_0:null,get_tokens:function(){return this.$t_0},$1A_0:null,get_result:function(){return this.$1A_0},reset:function(){this.$R_0="";this.$F_0=0;this.$t_0=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.Token);this.$1A_0=null},parse:function(formula){if(isNullOrEmptyString(formula)){this.$1A_0=this.$1F_0(1,this.$F_0,this.$F_0);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_GENERIC)}this.reset();this.$R_0=formula;while(this.$F_0<this.$R_0.length){if(Mscrm.BusinessRules.LexicalAnalysis.isWhiteSpace(this.$R_0.charAt(this.$F_0))){this.$F_0++;continue}if(this.parseSymbolToken())continue;if(this.parseKeywordToken())continue;if(this.parseNumberToken())continue;if(this.parseIdentifierToken())continue;if(this.parseStringToken())continue;this.$1A_0=this.$1F_0(2,this.$F_0,this.$F_0);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_INVALIDCHARACTERS)}return true},parseSymbolToken:function(){var $v_0=this.$23_0(3,",")||this.$23_0(4,"+")||this.$23_0(5,"-")||this.$23_0(6,"*")||this.$23_0(7,"/")||this.$23_0(17,"(")||this.$23_0(18,")");if(this.$7M_0)$v_0=$v_0||this.$23_0(11,"=")||this.$23_0(12,"<>")||this.$23_0(16,"<=")||this.$23_0(15,"<")||this.$23_0(14,">=")||this.$23_0(13,">");return $v_0},$23_0:function($p0,$p1){if(isNullOrEmptyString($p1))return false;if($p1.length>this.$R_0.length-this.$F_0)return false;var $v_0=this.$R_0.substr(this.$F_0,$p1.length);if($p1.toLowerCase()===$v_0.toLowerCase()){this.$6h_0($p0,$p1,this.$F_0,$p1.length);this.$F_0+=$p1.length;return true}return false},parseKeywordToken:function(){var $v_0=false;if(this.$7M_0)$v_0=$v_0||this.$4p_0(19,"if")||this.$4p_0(20,"else")||this.$4p_0(21,"true")||this.$4p_0(22,"false")||this.$4p_0(8,"and")||this.$4p_0(9,"or")||this.$4p_0(10,"not");return $v_0},$4p_0:function($p0,$p1){if(isNullOrEmptyString($p1))return false;if($p1.length>this.$R_0.length-this.$F_0)return false;var $v_0=this.$R_0.substr(this.$F_0,$p1.length);if($p1.toLowerCase()===$v_0.toLowerCase()){var $v_1=$p1.length+this.$F_0;if($v_1<this.$R_0.length){var $v_2=this.$R_0.charAt($v_1);if(Mscrm.BusinessRules.LexicalAnalysis.isDigit($v_2)||Mscrm.BusinessRules.LexicalAnalysis.isLetter($v_2)||$v_2===".")return false}this.$6h_0($p0,$p1,this.$F_0,$p1.length);this.$F_0+=$p1.length;return true}return false},parseNumberToken:function(){var $v_0=this.$F_0,$v_1=0;while($v_0<this.$R_0.length)if(!$v_1)if(Mscrm.BusinessRules.LexicalAnalysis.isDigit(this.$R_0.charAt($v_0))){$v_1=1;$v_0++}else if(this.$R_0.charAt($v_0)==="."){$v_1=2;$v_0++}else return false;else if($v_1===1)if(Mscrm.BusinessRules.LexicalAnalysis.isDigit(this.$R_0.charAt($v_0)))$v_0++;else if(this.$R_0.charAt($v_0)==="."){$v_1=3;$v_0++}else if(Mscrm.BusinessRules.LexicalAnalysis.isLetter(this.$R_0.charAt($v_0))){this.$1A_0=this.$1F_0(3,this.$F_0,$v_0);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_NUMBERFORMAT)}else break;else if($v_1===2)if(Mscrm.BusinessRules.LexicalAnalysis.isDigit(this.$R_0.charAt($v_0))){$v_1=3;$v_0++}else{this.$1A_0=this.$1F_0(3,this.$F_0,$v_0);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_NUMBERFORMAT)}else if($v_1===3)if(Mscrm.BusinessRules.LexicalAnalysis.isDigit(this.$R_0.charAt($v_0)))$v_0++;else if(Mscrm.BusinessRules.LexicalAnalysis.isLetter(this.$R_0.charAt($v_0))||"."===this.$R_0.charAt($v_0)){this.$1A_0=this.$1F_0(3,this.$F_0,$v_0);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_NUMBERFORMAT)}else break;if($v_1===1||$v_1===3){this.$6h_0(1,this.$R_0.substr(this.$F_0,$v_0-this.$F_0),this.$F_0,$v_0-this.$F_0);this.$F_0=$v_0;return true}return false},parseIdentifierToken:function(){var $v_0=this.$F_0,$v_1=0;while($v_0<this.$R_0.length)if(!$v_1)if(Mscrm.BusinessRules.LexicalAnalysis.isLetter(this.$R_0.charAt($v_0))){$v_1=4;$v_0++}else return false;else if($v_1===4)if(Mscrm.BusinessRules.LexicalAnalysis.isLetter(this.$R_0.charAt($v_0))||Mscrm.BusinessRules.LexicalAnalysis.isDigit(this.$R_0.charAt($v_0)))$v_0++;else if(this.$R_0.charAt($v_0)==="."){$v_1=5;$v_0++}else break;else if($v_1===5)if(Mscrm.BusinessRules.LexicalAnalysis.isLetter(this.$R_0.charAt($v_0))){$v_1=6;$v_0++}else{this.$1A_0=this.$1F_0(5,this.$F_0,$v_0);throw Mscrm.BusinessRules.SharedMethods.createException(String.format(window.LOCID_CF_ERR_INVALIDREFERENCE,this.$1A_0.$4Q_0))}else if($v_1===6)if(Mscrm.BusinessRules.LexicalAnalysis.isLetter(this.$R_0.charAt($v_0))||Mscrm.BusinessRules.LexicalAnalysis.isDigit(this.$R_0.charAt($v_0)))$v_0++;else if(this.$Dn_0(this.$R_0.charAt($v_0))){this.$1A_0=this.$1F_0(5,this.$F_0,$v_0);throw Mscrm.BusinessRules.SharedMethods.createException(String.format(window.LOCID_CF_ERR_INVALIDREFERENCE,this.$1A_0.$4Q_0))}else break;if($v_1===4||$v_1===6){this.$6h_0(0,this.$R_0.substr(this.$F_0,$v_0-this.$F_0),this.$F_0,$v_0-this.$F_0);this.$F_0=$v_0;return true}return false},parseStringToken:function(){if(this.$F_0>=this.$R_0.length)return false;var $v_0=this.$F_0,$v_1=0;while($v_0<this.$R_0.length)if(!$v_1)if(this.$R_0.charAt($v_0)==='"'){$v_1=7;$v_0++}else return false;else if($v_1===7)if(this.$R_0.charAt($v_0)==="\\"){$v_1=8;$v_0++}else if(this.$R_0.charAt($v_0)==='"'){$v_0++;var $v_2=new RegExp("\\\\\\\\","g"),$v_3=new RegExp('\\\\"',"g");this.$6h_0(2,this.$R_0.substr(this.$F_0+1,$v_0-this.$F_0-2).replace($v_3,'"').replace($v_2,"\\"),this.$F_0,$v_0-this.$F_0);this.$F_0=$v_0;return true}else $v_0++;else if($v_1===8)if(this.$R_0.charAt($v_0)==="\\"||this.$R_0.charAt($v_0)==='"'){$v_1=7;$v_0++}else{this.$1A_0=this.$1F_0(4,this.$F_0,$v_0);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_INVALIDCHARACTERS)}this.$1A_0=this.$1F_0(4,this.$F_0,this.$R_0.length-1);throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_INVALIDCHARACTERS)},$6h_0:function($p0,$p1,$p2,$p3){var $v_0=new Mscrm.BusinessRules.Token;$v_0.$v_0=$p0;$v_0.$2p_0=$p1;$v_0.$F_0=$p2;$v_0.$7R_0=$p3;this.$t_0.add($v_0)},$1F_0:function($p0,$p1,$p2){var $v_0=new Mscrm.BusinessRules.ParseResult;$v_0.$2l_0=$p0;$v_0.$4Q_0=null;$v_0.$5t_0=$p1;$v_0.$5x_0=$p2;var $v_1=new Sys.StringBuilder;$v_1.append(Mscrm.BusinessRules.ParseResultType.toString($p0));var $v_2=null;if(!isNullOrEmptyString(this.$R_0))$v_2=this.$R_0.substr($p1,1);if($v_2){$v_1.append(" - ");$v_1.append($v_2)}$v_0.$5Q_0=$v_1.toString();return $v_0},$Dn_0:function($p0){if($p0===".")return true;return false}};Mscrm.BusinessRules.StepBuilder=function(){};Mscrm.BusinessRules.StepBuilder.buildConditionStep=function(workflow){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.ConditionStep(workflow);$v_0.set_workflow(workflow);return $v_0};Mscrm.BusinessRules.StepBuilder.buildConditionBranchStep=function(workflow,conditionStep,conditionExpression){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.ConditionBranchStep(conditionStep,conditionExpression);$v_0.set_workflow(workflow);return $v_0};Mscrm.BusinessRules.StepBuilder.buildSetAttributeValueStep=function(workflow,calculatedFieldName,evaluationExpression){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep(workflow,new Microsoft.Crm.Workflow.Expressions.PropertySpecification(calculatedFieldName,evaluationExpression));$v_0.set_workflow(workflow);$v_0.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(workflow));$v_0.setJQueryFriendlyNameAndId(workflow.get_currentStepId());var $v_1=new Microsoft.Crm.Workflow.Validators.SetAttributeValueStepValidator;$v_1.validateAssignmentApplicability(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.AttributeDateTimeBehaviorType,evaluationExpression);return $v_0};Mscrm.BusinessRules.SyntaxAnalysis=function(rootStep,calculatedFieldMetadata){this.$1E_0=rootStep;this.$3G_0=calculatedFieldMetadata};Mscrm.BusinessRules.SyntaxAnalysis.prototype={$F_0:0,$I_0:null,$t_0:null,$1E_0:null,$3G_0:null,$C_0:null,get_results:function(){return this.$C_0},parse:function(tokens){var $v_0=null;this.$9M_0();if(!tokens||!tokens.get_count()){this.$C_0.add(this.$1F_0(6,null,0,null));throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_GENERIC)}this.$t_0=tokens;this.$4q_0();$v_0=this.$9C_0();if(this.$I_0){this.$C_0.add(this.$1F_0(7,this.$I_0,this.$I_0.$F_0,null));throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_GENERIC)}return $v_0},$9C_0:function(){var $v_0=null,$v_1=this.$I_0;if(this.$21_0(19)){var $v_2=Mscrm.BusinessRules.StepBuilder.buildConditionStep(this.$1E_0);this.$5h_0(17,8,$v_1);var $v_3=this.$5j_0();this.$5h_0(18,8,$v_1);var $v_4=this.$9C_0(),$v_5=Mscrm.BusinessRules.StepBuilder.buildConditionBranchStep(this.$1E_0,$v_2,$v_3);$v_5.appendStep($v_4);$v_2.appendStep($v_5);if(this.$21_0(20)){var $v_6=this.$9C_0(),$v_7=Mscrm.BusinessRules.StepBuilder.buildConditionBranchStep(this.$1E_0,$v_2,null);$v_7.appendStep($v_6);$v_2.appendStep($v_7)}$v_0=$v_2}else{var $v_8=this.$5j_0();$v_0=this.$Bz_0($v_8)}return $v_0},$5j_0:function(){var $v_0=this.$I_0,$v_1=this.$AU_0();while(this.$21_0(9)){var $v_2=this.$AU_0();$v_1=this.$4D_0(3,$v_1,$v_2,$v_0)}return $v_1},$AU_0:function(){var $v_0=this.$I_0,$v_1=this.$AT_0();while(this.$21_0(8)){var $v_2=this.$AT_0();$v_1=this.$4D_0(2,$v_1,$v_2,$v_0)}return $v_1},$AT_0:function(){var $v_0=this.$I_0,$v_1=this.$AS_0();while(this.$I_0&&(this.$I_0.$v_0===15||this.$I_0.$v_0===16||this.$I_0.$v_0===13||this.$I_0.$v_0===14||this.$I_0.$v_0===11||this.$I_0.$v_0===12)){var $v_2=this.$I_0.$v_0;this.$4q_0();var $v_3=this.$AS_0();switch($v_2){case 15:$v_1=this.$4D_0(16,$v_1,$v_3,$v_0);break;case 16:$v_1=this.$4D_0(17,$v_1,$v_3,$v_0);break;case 13:$v_1=this.$4D_0(14,$v_1,$v_3,$v_0);break;case 14:$v_1=this.$4D_0(15,$v_1,$v_3,$v_0);break;case 11:$v_1=this.$4D_0(6,$v_1,$v_3,$v_0);break;case 12:$v_1=this.$4D_0(7,$v_1,$v_3,$v_0);break}}return $v_1},$AS_0:function(){var $v_0=this.$I_0,$v_1=this.$D3_0();while(this.$I_0&&(this.$I_0.$v_0===4||this.$I_0.$v_0===5)){var $v_2=this.$I_0.$v_0;this.$4q_0();var $v_3=this.$9D_0();if($v_2===4)$v_1=this.$3c_0([0,$v_1,$v_3],$v_0);else $v_1=this.$3c_0([1,$v_1,$v_3],$v_0)}return $v_1},$D3_0:function(){var $v_0=this.$I_0,$v_1=null;if(this.$I_0&&(this.$I_0.$v_0===4||this.$I_0.$v_0===5)){var $v_2=this.$I_0.$v_0;this.$4q_0();var $v_3=this.$9D_0(),$v_4=this.$6k_0(0,5,$v_0);if($v_2===5)$v_1=this.$3c_0([1,$v_4,$v_3],$v_0);else $v_1=this.$3c_0([0,$v_4,$v_3],$v_0)}else $v_1=this.$9D_0();return $v_1},$9D_0:function(){var $v_0=this.$I_0,$v_1=this.$AR_0();while(this.$I_0&&(this.$I_0.$v_0===6||this.$I_0.$v_0===7)){var $v_2=this.$I_0.$v_0;this.$4q_0();var $v_3=this.$AR_0();if($v_2===6)$v_1=this.$3c_0([2,$v_1,$v_3],$v_0);else $v_1=this.$3c_0([3,$v_1,$v_3],$v_0)}return $v_1},$AR_0:function(){var $v_0=null,$v_1=this.$I_0;if(this.$21_0(1))$v_0=this.$6k_0($v_1.$2p_0,5,$v_1);else if(this.$21_0(2))$v_0=this.$6k_0($v_1.$2p_0,14,$v_1);else if(this.$I_0&&(this.$I_0.$v_0===21||this.$I_0.$v_0===22)){var $v_2=this.$I_0.$v_0;this.$4q_0();if($v_2===21)$v_0=this.$6k_0(true,0,$v_1);else $v_0=this.$6k_0(false,0,$v_1)}else if(this.$21_0(17)){$v_0=this.$5j_0();this.$5h_0(18,9,$v_1)}else if(this.$21_0(10)){this.$5h_0(17,9,$v_1);var $v_3=this.$5j_0();this.$5h_0(18,9,$v_1);$v_0=this.$3c_0([Mscrm.BusinessRules.TokenType.toString(10),$v_3],$v_1)}else if(this.$21_0(0))if(this.$21_0(17))if(this.$21_0(18))$v_0=this.$3c_0([$v_1.$2p_0],$v_1);else{var $v_4=Mscrm.BusinessRules.SharedMethods.getList(Object);$v_4.add($v_1.$2p_0);$v_4.add(this.$5j_0());while(this.$21_0(3))$v_4.add(this.$5j_0());this.$5h_0(18,9,$v_1);$v_0=this.$3c_0($v_4.toArray(),$v_1)}else{var $v_5=$v_1.$2p_0.split(".");if($v_5.length>1)$v_0=this.$9p_0($v_5[0],$v_5[1],$v_1);else $v_0=this.$9p_0($v_1.$2p_0,null,$v_1)}else{if(!this.$I_0)this.$C_0.add(this.$1F_0(10,this.$t_0.get_item(this.$t_0.get_count()-1),this.$t_0.get_item(this.$t_0.get_count()-1).$F_0,null));else this.$C_0.add(this.$1F_0(10,$v_1,this.$I_0.$F_0,null));throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_GENERIC)}return $v_0},$4q_0:function(){if(this.$F_0<this.$t_0.get_count())this.$I_0=this.$t_0.get_item(this.$F_0++);else this.$I_0=null},$21_0:function($p0){if(this.$I_0&&this.$I_0.$v_0===$p0){this.$4q_0();return true}return false},$5h_0:function($p0,$p1,$p2){if(this.$21_0($p0))return;this.$C_0.add(this.$1F_0($p1,$p2,!this.$I_0?this.$t_0.get_item(this.$t_0.get_count()-1).$F_0:this.$I_0.$F_0,null));throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_ERR_SYNTAXERROR)},$9M_0:function(){this.$t_0=null;this.$F_0=0;this.$I_0=null;this.$C_0=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.ParseResult)},$Bz_0:function($p0){try{return Mscrm.BusinessRules.StepBuilder.buildSetAttributeValueStep(this.$1E_0,this.$3G_0.LogicalName,$p0)}catch($v_0){this.$C_0.add(this.$1F_0(11,this.$t_0.get_item(0),0,$v_0.message));throw Mscrm.BusinessRules.SharedMethods.createException($v_0.message)}},$6k_0:function($p0,$p1,$p2){try{return Mscrm.BusinessRules.ExpressionBuilder.buildPrimitiveExpression(this.$1E_0,$p0,$p1)}catch($v_0){this.$C_0.add(this.$1F_0(12,$p2,!this.$I_0?this.$t_0.get_item(this.$t_0.get_count()-1).$F_0:this.$I_0.$F_0,$v_0.message));throw Mscrm.BusinessRules.SharedMethods.createException($v_0.message)}},$3c_0:function($p0,$p1){try{return Mscrm.BusinessRules.ExpressionBuilder.buildMethodCallEvaluateExpression(this.$1E_0,$p0)}catch($v_0){this.$C_0.add(this.$1F_0(12,$p1,!this.$I_0?this.$t_0.get_item(this.$t_0.get_count()-1).$F_0:this.$I_0.$F_0,$v_0.message));throw Mscrm.BusinessRules.SharedMethods.createException($v_0.message)}},$4D_0:function($p0,$p1,$p2,$p3){try{return Mscrm.BusinessRules.ExpressionBuilder.buildBinaryExpression(this.$1E_0,$p0,$p1,$p2)}catch($v_0){this.$C_0.add(this.$1F_0(12,$p3,!this.$I_0?this.$t_0.get_item(this.$t_0.get_count()-1).$F_0:this.$I_0.$F_0,$v_0.message));throw Mscrm.BusinessRules.SharedMethods.createException($v_0.message)}},$9p_0:function($p0,$p1,$p2){try{return Mscrm.BusinessRules.ExpressionBuilder.buildEntityAttributeExpression(this.$1E_0,$p0,$p1)}catch($v_0){this.$C_0.add(this.$1F_0(12,$p2,!this.$I_0?this.$t_0.get_item(this.$t_0.get_count()-1).$F_0:this.$I_0.$F_0,$v_0.message));throw Mscrm.BusinessRules.SharedMethods.createException($v_0.message)}},$1F_0:function($p0,$p1,$p2,$p3){var $v_0=new Mscrm.BusinessRules.ParseResult;$v_0.$2l_0=$p0;$v_0.$4Q_0=$p1;$v_0.$5t_0=!$p1?0:$p1.$F_0;$v_0.$5x_0=$p2;if(isNullOrEmptyString($p3)){var $v_1=new Sys.StringBuilder;$v_1.append(Mscrm.BusinessRules.ParseResultType.toString($p0));if($p1){$v_1.append(" - ");$v_1.append($p1.$2p_0)}$v_0.$5Q_0=$v_1.toString()}else $v_0.$5Q_0=$p3;return $v_0}};Mscrm.BusinessRules.ParseResult=function(){};Mscrm.BusinessRules.ParseResult.prototype={$2l_0:0,get_resultType:function(){return this.$2l_0},set_resultType:function(value){this.$2l_0=value;return value},$4Q_0:null,get_errorToken:function(){return this.$4Q_0},set_errorToken:function(value){this.$4Q_0=value;return value},$5t_0:0,get_codeIndex:function(){return this.$5t_0},set_codeIndex:function(value){this.$5t_0=value;return value},$5x_0:0,get_detailedCodeIndex:function(){return this.$5x_0},set_detailedCodeIndex:function(value){this.$5x_0=value;return value},$5Q_0:null,get_resultInfo:function(){return this.$5Q_0},set_resultInfo:function(value){this.$5Q_0=value;return value}};Mscrm.BusinessRules.Token=function(){};Mscrm.BusinessRules.Token.prototype={$v_0:0,get_tokenType:function(){return this.$v_0},set_tokenType:function(value){this.$v_0=value;return value},$2p_0:null,get_value:function(){return this.$2p_0},set_value:function(value){this.$2p_0=value;return value},$F_0:0,get_index:function(){return this.$F_0},set_index:function(value){this.$F_0=value;return value},$7R_0:0,get_length:function(){return this.$7R_0},set_length:function(value){this.$7R_0=value;return value}};Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior=function($p0){this.$$d_onValueElementClicked=Function.createDelegate(this,this.onValueElementClicked);this.$$d_$E8_4=Function.createDelegate(this,this.$E8_4);Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior.initializeBase(this,[$p0]);this.set_chromeStateDataBuilder(new Mscrm.BusinessRules.Builders.ChromeStateDataBuilder)};Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior.prototype={$73_4:null,$h_4:null,initialize:function(){var $v_0=[];Array.add($v_0,this.get_chromeStateFactory().createEditHintState());Array.add($v_0,this.get_chromeStateFactory().createEditState());Array.add($v_0,this.get_chromeStateFactory().createSelectedState());Array.add($v_0,this.get_chromeStateFactory().createReadState());this.get_chromeStateMachine().set_chromeStates($v_0);Mscrm.InlineEditChromeBehaviorBase$1.prototype.initialize.call(this);this.$EQ_4()},transitionToState:function($p0){this.$68_4=Mscrm.BusinessRules.BusinessRuleInitializer.$5F;$p0!==3&&this.get_view().get_chromeElement().removeClass("selected");switch($p0){case 0:this.transitionToReadState();break;case 1:!this.$68_4&&this.transitionToEditHintState();break;case 2:if(!this.$68_4){this.get_view().tryCompleteOnDemandInitialization();this.transitionToEditState()}break;case 3:!this.$68_4&&this.$Ex_4();break}},transitionToReadState:function(){Mscrm.InlineEditChromeBehaviorBase$1.prototype.transitionToReadState.call(this);this.get_view().get_chromeElement().blur()},onEditElementWrapperStateChange:function($p0){if($p0.target!==$p0.currentTarget)return;Mscrm.InlineEditChromeBehaviorBase$1.prototype.onEditElementWrapperStateChange.call(this,$p0)},registerReadEvents:function(){Mscrm.InlineEditChromeBehaviorBase$1.prototype.registerReadEvents.call(this);this.get_view().get_chromeElement().mouseleave(this.$$d_onChromeMouseOut||(this.$$d_onChromeMouseOut=Function.createDelegate(this,this.onChromeMouseOut)))},registerEditEvents:function(){var $v_0=new Mscrm.Proxies.JQueryObjectProxy(this.get_view().get_chromeElement()),$v_1=new Mscrm.BusinessRules.Commands.StepChromeElementKeyDownCommand;$v_1.$5s_0=this.get_stateData();$v_1.$l_0=this.get_view().get_readToolBarView().get_dataContext();this.get_view().get_bindingsMediator().addKeyDownBinding($v_0,$v_1);this.registerChromeElementKeyPress();this.get_view().get_stepValueContent().click(this.$$d_$E8_4)},onValueElementClicked:function($p0){this.get_view().get_chromeElement().focus()},$Ex_4:function(){this.get_view().get_chromeElement().addClass("selected");this.get_view().get_valueElement().addClass("ms-crm-Inline-EditHintState")},$E8_4:function($p0){$p0.stopPropagation();var $v_0=this.get_stateData();$v_0.set_stepValueContentClicked(true)},$EQ_4:function(){this.get_view().get_valueElement().click(this.$$d_onValueElementClicked);this.get_view().get_chromeElement().focus(this.$$d_onChromeElementFocus||(this.$$d_onChromeElementFocus=Function.createDelegate(this,this.onChromeElementFocus)))},get_chromeStateFactory:function(){return this.$73_4||(this.$73_4=new Mscrm.BusinessRules.ChromeStateFactory)},set_chromeStateFactory:function($p0){this.$73_4=$p0;return $p0},get_jQueryProxy:function(){return this.$h_4||(this.$h_4=new Mscrm.Proxies.JQueryProxy)},set_jQueryProxy:function($p0){this.$h_4=$p0;return $p0},$68_4:false};Mscrm.BusinessRules.BusinessRuleInlineEditFactory=function(){};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getExpressionInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.ExpressionLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineExpressionView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getBranchingExpressionInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.BranchingExpressionLayout($p0),$v_1=new Mscrm.BusinessRules.Views.InlineBranchingExpressionView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetDisplayModeStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetDisplayModeStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetFormulaStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetFormulaStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetRequiredLevelStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetAttributeValueStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetAttributeValueStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetVisibilityStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetVisibilityStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetDefaultValueStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetDefaultValueStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetMessageStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineSetMessageStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getRunScriptStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineRunScriptStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getUseSourceHierarchyStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getTargetEntityStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineTargetEntityStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getTargetLinkedEntityStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getAggregateStepInlineView=function($p0,$p1){var $v_0=new Mscrm.BusinessRules.StepLayoutBase($p0),$v_1=new Mscrm.BusinessRules.Views.InlineAggregateSectionStepView($v_0);$v_1.set_dataContext($p1);return $v_1};Mscrm.BusinessRules.BusinessRuleLayoutBase=function($p0){Mscrm.BusinessRules.BusinessRuleLayoutBase.initializeBase(this,[$p0])};Mscrm.BusinessRules.BusinessRuleLayoutBase.prototype={get_chromeBehaviorType:function(){return Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior},renderForRead:function(){},renderForEdit:function(){}};Mscrm.BusinessRules.BusinessRuleStepChromeStateData=function(){Mscrm.BusinessRules.BusinessRuleStepChromeStateData.initializeBase(this)};Mscrm.BusinessRules.BusinessRuleStepChromeStateData.prototype={$7n_2:false,get_stepValueContentClicked:function(){return this.$7n_2},set_stepValueContentClicked:function(value){this.$7n_2=value;Sys.Component.prototype.raisePropertyChanged.call(this,"StepValueContentClicked");this.$7n_2=false;return value}};Mscrm.BusinessRules.BusinessRuleStepEditChromeState=function(){};Mscrm.BusinessRules.BusinessRuleStepEditChromeState.prototype={handleTransition:function(stateData){var $v_0=stateData,$v_1=stateData.get_currentState()===1||stateData.get_currentState()===3,$v_2=!stateData.get_currentState()||stateData.get_currentState()===1||stateData.get_currentState()===3;if(stateData.get_elementEnterKeyPressed()&&$v_1||$v_0.get_stepValueContentClicked()&&$v_2)return true;return false},get_state:function(){return 2}};Mscrm.BusinessRules.BusinessRuleStepEditHintChromeState=function(){};Mscrm.BusinessRules.BusinessRuleStepEditHintChromeState.prototype={handleTransition:function(stateData){if(stateData.get_chromeMouseOver()&&stateData.get_chromeMouseOverTimeoutTriggered()&&!stateData.get_currentState())return true;return false},get_state:function(){return 1}};Mscrm.BusinessRules.BusinessRuleStepReadChromeState=function(){};Mscrm.BusinessRules.BusinessRuleStepReadChromeState.prototype={handleTransition:function(stateData){var $v_0=stateData.get_currentState()===1||stateData.get_currentState()===3;if(!stateData.get_chromeElementHasFocus()&&!stateData.get_chromeMouseOver()&&$v_0||stateData.get_editElementDiscarded()&&stateData.get_currentState()===2||stateData.get_editElementCommitted()&&stateData.get_currentState()===2)return true;return false},get_state:function(){return 0}};Mscrm.BusinessRules.BusinessRuleStepSelectedChromeState=function(){};Mscrm.BusinessRules.BusinessRuleStepSelectedChromeState.prototype={handleTransition:function(stateData){if(stateData.get_chromeElementHasFocus()&&(!stateData.get_currentState()||stateData.get_currentState()===1))return true;return false},get_state:function(){return 3}};Mscrm.BusinessRules.ChromeStateFactory=function(){};Mscrm.BusinessRules.ChromeStateFactory.prototype={createEditHintState:function(){return new Mscrm.BusinessRules.BusinessRuleStepEditHintChromeState},createEditState:function(){return new Mscrm.BusinessRules.BusinessRuleStepEditChromeState},createSelectedState:function(){return new Mscrm.BusinessRules.BusinessRuleStepSelectedChromeState},createReadState:function(){return new Mscrm.BusinessRules.BusinessRuleStepReadChromeState}};Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior=function($p0){this.$$d_$An_5=Function.createDelegate(this,this.$An_5);Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior.initializeBase(this,[$p0])};Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior.prototype={initializeForEditElement:function(){Mscrm.InlineEditChromeBehaviorBase$1.prototype.initializeForEditElement.call(this);var $v_0=this.get_view().get_editView().get_editElementWrapper();$v_0.bind("state-commit",this.$$d_$An_5);$v_0.bind("state-discard",this.$$d_$An_5)},$An_5:function($p0){if($p0.target!==$p0.currentTarget)return;var $v_0=this.get_view().$E_1,$v_1=$v_0.get_parent(),$v_2=$v_1.get_expressions();$v_1.setFocusOnExpression(this.$Cu_5($v_0,$v_2));var $v_3=(new Mscrm.Proxies.JQueryProxy).selectElement("#AddExpressionButton");if($v_3&&$v_3.get_length()>0){var $v_4=$v_1.$E_0.get_parent();if(!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())if($v_4.get_stepViews().get_count()<10)if($v_4.get_stepViews().last().get_dataContext().hasConditionExpressions())$v_3.removeClass("preventadd");else $v_3.addClass("preventadd");else $v_3.addClass("preventadd");else if($v_4.get_stepViews().last().get_dataContext().hasConditionExpressions())$v_3.removeClass("preventadd");else $v_3.addClass("preventadd");var $v_5=$v_1.get_expressions().last().get_parent().get_parent().$1_1.children(":first-child").children(":first-child");if($v_4.get_stepViews().get_count()>1&&$v_5.getAttribute("title")!==window.LOCID_CALCULATEDFIELD_EXPRESSION){$v_5.attribute("title",window.LOCID_CALCULATEDFIELD_ELSEIF);$v_5.children(":nth-child(2)").set_text(window.LOCID_CALCULATEDFIELD_ELSEIF)}}},$Cu_5:function($p0,$p1){var $v_0=$p1.indexOf($p0,0);if($v_0===-1||$v_0===$p1.get_count()-1)return null;return $p1.get_item($v_0+1)},dispose:function(){if(this.get_isDisposed())return;if(this.get_view().get_isEditControlInitialized()&&!this.get_view().get_isDisposed()&&!IsNull(this.get_view().get_editView())){var $v_0=this.get_view().get_editView().get_editElementWrapper();$v_0.unbind("state-commit",this.$$d_$An_5);$v_0.unbind("state-discard",this.$$d_$An_5)}Mscrm.InlineEditChromeBehaviorBase$1.prototype.dispose.call(this)}};Mscrm.BusinessRules.ExpressionLayoutBase=function($p0){Mscrm.BusinessRules.ExpressionLayoutBase.initializeBase(this,[$p0])};Mscrm.BusinessRules.ExpressionLayoutBase.prototype={get_chromeBehaviorType:function(){return Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior}};Mscrm.BusinessRules.StepInlineEditChromeBehavior=function($p0){this.$$d_$An_5=Function.createDelegate(this,this.$An_5);Mscrm.BusinessRules.StepInlineEditChromeBehavior.initializeBase(this,[$p0])};Mscrm.BusinessRules.StepInlineEditChromeBehavior.prototype={initializeForEditElement:function(){Mscrm.InlineEditChromeBehaviorBase$1.prototype.initializeForEditElement.call(this);var $v_0=this.get_view().get_editView().get_editElementWrapper();$v_0.bind("state-commit",this.$$d_$An_5);$v_0.bind("state-discard",this.$$d_$An_5)},$An_5:function($p0){if($p0.target!==$p0.currentTarget)return;this.$BF_5()},$BF_5:function(){var $v_0=this.get_view().$E_1;$v_0.shiftFocus($v_0)},dispose:function(){if(this.get_isDisposed())return;if(this.get_view().get_isEditControlInitialized()&&!IsNull(this.get_view().get_editView())){var $v_0=this.get_view().get_editView().get_editElementWrapper();$v_0.unbind("state-commit",this.$$d_$An_5);$v_0.unbind("state-discard",this.$$d_$An_5)}Mscrm.InlineEditChromeBehaviorBase$1.prototype.dispose.call(this)}};Mscrm.BusinessRules.StepLayoutBase=function($p0){Mscrm.BusinessRules.StepLayoutBase.initializeBase(this,[$p0])};Mscrm.BusinessRules.StepLayoutBase.prototype={get_chromeBehaviorType:function(){return Mscrm.BusinessRules.StepInlineEditChromeBehavior}};Mscrm.BusinessRules.EditOperandContext=function(){};Mscrm.BusinessRules.EditOperandContext.prototype={$8l_0:false,get_supportRelationshipSelf:function(){return this.$8l_0},set_supportRelationshipSelf:function(value){this.$8l_0=value;return value}};Mscrm.BusinessRules.MultiValueExpression=function(expressions,rootStep,attributeMetadata){Mscrm.BusinessRules.MultiValueExpression.initializeBase(this,[rootStep]);this.$w_1=new Array(0);this.$1s_1=new Array(0);this.$3j_1=attributeMetadata;for(var $v_0=0;$v_0<expressions.get_count();$v_0++){Array.add(this.$w_1,Mscrm.BusinessRules.ValueExpressionAdapterFactory.getValueExpression(expressions.get_item($v_0),this.$3j_1).getValue(expressions.get_item($v_0)));Array.add(this.$1s_1,expressions.get_item($v_0))}};Mscrm.BusinessRules.MultiValueExpression.prototype={get_values:function(){return this.$w_1},set_values:function(value){this.$w_1=value;return value},get_innerExpressions:function(){return this.$1s_1},set_innerExpressions:function(value){this.$1s_1=value;return value},get_displayValue:function(){for(var $v_0=new Mscrm.BusinessRules.ValueDisplayFormatProvider(this.$1s_1[0],this.$1s_1[0].get_type()),$v_1="",$v_2=0;$v_2<this.$w_1.length;$v_2++){if($v_2>0)$v_1=$v_1+window.LOCID_PBLEXPRESSION_COMMA+" ";$v_1=$v_1+$v_0.getDisplayText(this.$w_1[$v_2])}return $v_1},get_displayFormat:function(){var $v_0=new Mscrm.BusinessRules.ValueDisplayFormatProvider(this.$1s_1[0],this.$1s_1[0].get_type());return $v_0.get_displayFormat()},accept:function(visitor){},get_attributeMetadata:function(){return this.$3j_1},$w_1:null,$1s_1:null,$3j_1:null};Mscrm.BusinessRules.ValueDisplayFormatProvider=function(expression,type){this.$S_0=expression;this.$A_0=type};Mscrm.BusinessRules.ValueDisplayFormatProvider.prototype={getDisplayText:function(value){if(Microsoft.Crm.Workflow.Expressions.TimeSpanExpression.isInstanceOfType(this.$S_0))return value.toString();switch(this.$A_0){case 2:var $v_0=IsNull(value)?new Date:value;return $v_0.localeFormat("");case 0:case 10:case 12:case 13:case 20:case 19:case 21:var $v_1=value;return IsNull($v_1)?window.LOCID_PBLERROR_TITLE:$v_1.Label;case 6:case 1:case 8:var $v_2=value;return $v_2.name;default:return value.toString()}},get_displayFormat:function(){var $v_0;switch(this.$A_0){case 4:case 3:case 5:case 7:$v_0="{0}";break;default:$v_0=Microsoft.Crm.Workflow.Expressions.TimeSpanExpression.isInstanceOfType(this.$S_0)?String.format('"{{0}}" {0}',window.LOCID_PBLEXPRESSION_DAYSVALUE.toLowerCase()):'"{0}"';break}return $v_0},$A_0:0,$S_0:null};Mscrm.BusinessRules.ValueExpressionAdapterFactory=function(){};Mscrm.BusinessRules.ValueExpressionAdapterFactory.getValueExpression=function(expression,attributeMetadata){if(Microsoft.Crm.Workflow.Expressions.LookupExpression.isInstanceOfType(expression))return new Mscrm.BusinessRules.LookupValueExpressionAdapter(expression.get_type());if(Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType(expression))switch(expression.get_type()){case 2:if(!IsNull(attributeMetadata)&&attributeMetadata.Format==="date")return new Mscrm.BusinessRules.DateValueExpressionAdapter(expression.get_type(),attributeMetadata);return new Mscrm.BusinessRules.DateTimeValueExpressionAdapter(expression.get_type(),attributeMetadata);case 0:case 10:case 12:case 13:return new Mscrm.BusinessRules.OptionSetValueExpressionAdapter(expression.get_type(),attributeMetadata);case 19:case 20:case 21:return new Mscrm.BusinessRules.BpfValueExpressionAdapter(expression.get_type());default:return new Mscrm.BusinessRules.PrimitiveValueExpressionAdapter(expression.get_type())}if(Microsoft.Crm.Workflow.Expressions.TimeSpanExpression.isInstanceOfType(expression))return new Mscrm.BusinessRules.TimeSpanExpressionAdapter;throw Error.create("Unsupported")};Mscrm.BusinessRules.ValueExpressionAdapterFactory.getDefaultExpressionAdapterForType=function(type,attributeMetadata){switch(type){case 2:if(!IsNull(attributeMetadata)&&attributeMetadata.Format==="date")return new Mscrm.BusinessRules.DateValueExpressionAdapter(type,attributeMetadata);return new Mscrm.BusinessRules.DateTimeValueExpressionAdapter(type,attributeMetadata);case 0:case 10:case 12:case 13:case 20:return new Mscrm.BusinessRules.OptionSetValueExpressionAdapter(type,attributeMetadata);case 6:case 1:case 8:return new Mscrm.BusinessRules.LookupValueExpressionAdapter(type);case 19:case 21:return new Mscrm.BusinessRules.BpfValueExpressionAdapter(type);default:return new Mscrm.BusinessRules.PrimitiveValueExpressionAdapter(type)}};Mscrm.BusinessRules.PrimitiveValueExpressionAdapter=function(type){this.$A_0=type};Mscrm.BusinessRules.PrimitiveValueExpressionAdapter.prototype={getValue:function(expression){return expression.get_value()},getExpression:function(rootStep,value){return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,value,this.$A_0)},$A_0:0};Mscrm.BusinessRules.DateTimeValueExpressionAdapter=function(type,attributeMetadata){Mscrm.BusinessRules.DateTimeValueExpressionAdapter.initializeBase(this,[type,attributeMetadata]);this.$A_1=type};Mscrm.BusinessRules.DateTimeValueExpressionAdapter.$82=function($p0){return ($p0.getTimezoneOffset()+window.ORG_TIMEZONE_OFFSET)*6e4};Mscrm.BusinessRules.DateTimeValueExpressionAdapter.$AO=function($p0){var $v_0=new Date($p0.getTime()-$p0.getTimezoneOffset()*6e4),$v_1=$v_0.toUTCString();return $v_1.replace("UTC","").replace("GMT","")};Mscrm.BusinessRules.DateTimeValueExpressionAdapter.prototype={getValue:function(expression){var $v_0=expression.get_value();if(isNullOrEmptyString($v_0))return null;var $v_1;if(this.$4L_0.DateTimeBehavior===3&&!IsNull(Date.parseInvariant($v_0)))$v_1=Date.parseInvariant($v_0);else $v_1=new Date($v_0);var $v_2=$v_1.getTime(),$v_3=Mscrm.BusinessRules.DateTimeValueExpressionAdapter.$82($v_1),$v_4=new Date($v_2+$v_3);return $v_4},getExpression:function(rootStep,value){if(!IsNull(value)){var $v_0=value,$v_1=$v_0.getTime(),$v_2=Mscrm.BusinessRules.DateTimeValueExpressionAdapter.$82($v_0),$v_3=new Date($v_1-$v_2);if(this.$4L_0.DateTimeBehavior===1)return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,Mscrm.BusinessRules.DateValueExpressionAdapter.getUtcStringInGmtFormat($v_3),this.$A_1);return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,Mscrm.BusinessRules.DateTimeValueExpressionAdapter.$AO($v_3),this.$A_1)}else return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,null,this.$A_1)},$A_1:0};Mscrm.BusinessRules.DateValueExpressionAdapter=function(type,attributeMetadata){this.$A_0=type;this.$4L_0=attributeMetadata};Mscrm.BusinessRules.DateValueExpressionAdapter.getUtcStringInGmtFormat=function(utcTime){return utcTime.toUTCString().replace("UTC","GMT")};Mscrm.BusinessRules.DateValueExpressionAdapter.$AO=function($p0){return $p0.toUTCString().replace("UTC","").replace("GMT","")};Mscrm.BusinessRules.DateValueExpressionAdapter.prototype={getValue:function(expression){return Date.parseInvariant(expression.get_value())},getExpression:function(rootStep,value){if(!IsNull(value)){var $v_0=value,$v_1=Date.UTC($v_0.getFullYear(),$v_0.getMonth(),$v_0.getDate());if(this.$4L_0.DateTimeBehavior===1)return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,Mscrm.BusinessRules.DateValueExpressionAdapter.getUtcStringInGmtFormat(new Date($v_1)),this.$A_0);return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,Mscrm.BusinessRules.DateValueExpressionAdapter.$AO(new Date($v_1)),this.$A_0)}else return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,null,this.$A_0)},$A_0:0,$4L_0:null,get_attributeMetadata:function(){return this.$4L_0},set_attributeMetadata:function(value){this.$4L_0=value;return value}};Mscrm.BusinessRules.BpfValueExpressionAdapter=function(type){this.$A_0=type};Mscrm.BusinessRules.BpfValueExpressionAdapter.prototype={getValue:function(expression){if(expression.get_type()===19)return this.$Cm_0(expression);else if(expression.get_type()===21)return this.$Co_0(expression);else if(expression.get_type()===20)return this.$Cn_0(expression);return null},$Cm_0:function($p0){var $v_0=$p0.get_value().toString();if(!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata)&&!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows)){var $v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows;if(!IsNull($v_1.Ids))for(var $v_2=0;$v_2<$v_1.Ids.length;$v_2++)if($v_1.Ids[$v_2]===Microsoft.Crm.Client.Core.Framework.Guid.formatToUpper($v_0))return $v_1.Options[$v_2]}return null},$Co_0:function($p0){var $v_0=$p0.get_value().toString();if(!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata)&&!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows)&&!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages))for(var $v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages,$$arr_3=$v_1,$$len_4=$$arr_3.length,$$idx_5=0;$$idx_5<$$len_4;++$$idx_5){var $v_2=$$arr_3[$$idx_5];if(!IsNull($v_2)&&!IsNull($v_2.Ids)&&!IsNull($v_2.Options))for(var $v_3=0;$v_3<$v_2.Ids.length;$v_3++)if(Mscrm.Utilities.compareGuids($v_2.Ids[$v_3],$v_0))return $v_2.Options[$v_3]}return ""},$Cn_0:function($p0){var $v_0=$p0.get_value().toString(),$v_1=Mscrm.Utilities.parseInt($v_0,0),$v_2=new Mscrm.EnumOptionJsonWrapper;$v_2.Value=$v_1;if(!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata))for(var $$arr_4=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.StageCategories.Options,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_3=$$arr_4[$$idx_6];if($v_3.Value===$v_1){$v_2.Label=$v_3.Label;break}}if(isNullOrEmptyString($v_2.Label))$v_2.Label=window.LOCID_PBLERROR_TITLE;return $v_2},getExpression:function(rootStep,value,index){index=IsNull(index)?0:index;if(value){var $v_0=value;switch(this.$A_0){case 19:return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Ids[$v_0.Value],this.$A_0);case 20:return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,$v_0.Value,this.$A_0);case 21:return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[index].Ids[$v_0.Value],this.$A_0);default:throw Error.create("Unsupported")}}return null},$A_0:0};Mscrm.BusinessRules.OptionSetValueExpressionAdapter=function(type,attributeMetadata){this.$A_0=type;this.$3j_0=attributeMetadata};Mscrm.BusinessRules.OptionSetValueExpressionAdapter.prototype={getValue:function(expression){var $v_0=expression.get_value().toString(),$v_1=Mscrm.Utilities.parseInt($v_0,0),$v_2=new Mscrm.EnumOptionJsonWrapper;$v_2.Value=$v_1;if(!IsNull(this.$3j_0))for(var $$arr_4=this.$3j_0.Options,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_3=$$arr_4[$$idx_6];if($v_3.Value===$v_1){$v_2.Label=$v_3.Label;break}}return $v_2},getExpression:function(rootStep,value){if(!IsNull(value)){var $v_0=value;return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,$v_0.Value,this.$A_0)}else return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,null,this.$A_0)},$A_0:0,$3j_0:null};Mscrm.BusinessRules.LookupValueExpressionAdapter=function(type){this.$A_0=type};Mscrm.BusinessRules.LookupValueExpressionAdapter.prototype={getValue:function(expression){var $v_0=expression,$v_1={};if(IsNull($v_0.get_value()))return null;$v_1.name=$v_0.get_label();$v_1.typename=$v_0.get_entityType();$v_1.id=$v_0.get_value().get_value();return $v_1},getExpression:function(rootStep,value){if(!IsNull(value)){var $v_0=value,$v_1=$v_0.name,$v_2=(new Mscrm.BusinessRules.PrimitiveValueExpressionAdapter(15)).getExpression(rootStep,$v_0.id),$v_3=$v_0.typename;return new Microsoft.Crm.Workflow.Expressions.LookupExpression(rootStep,$v_2,this.$A_0,$v_3,$v_1)}else return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,null,this.$A_0)},$A_0:0};Mscrm.BusinessRules.TimeSpanExpressionAdapter=function(){};Mscrm.BusinessRules.TimeSpanExpressionAdapter.prototype={getValue:function(expression){var $v_0=expression;return $v_0.get_value().get_days()},getExpression:function(rootStep,value){var $v_0=parseInt(value);return new Microsoft.Crm.Workflow.Expressions.TimeSpanExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),new Microsoft.Crm.Workflow.CrmTimeSpan(0,0,$v_0,0,0))}};Mscrm.BusinessRules.BusinessRuleEntityManager=function(){this.$2k_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata||new Mscrm.EditorEntityMetadataJsonWrapper;this.$3G_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField;this.$8W_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().HierarchicalRelationshipName;this.$2m_0={};this.$4A_0={};this.$7g_0={};this.$5X_0={};this.$EH_0()};Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance=function(){if(IsNull(Mscrm.BusinessRules.BusinessRuleEntityManager._instance))Mscrm.BusinessRules.BusinessRuleEntityManager._instance=new Mscrm.BusinessRules.BusinessRuleEntityManager;return Mscrm.BusinessRules.BusinessRuleEntityManager._instance};Mscrm.BusinessRules.BusinessRuleEntityManager.getRelatedAttributeByIndexAndTypeCode=function(businessRuleEntityManager,entityTypeCode,index){return businessRuleEntityManager.getRelatedAttributeByIndex(businessRuleEntityManager.get_entityMetadataManager().getLogicalNameFromTypeCode(entityTypeCode),index)};Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName=function(businessRuleEntityManager,attributeName){if(isNullOrEmptyString(attributeName))return "";var $v_0=businessRuleEntityManager.getAttributeByName(attributeName);if(IsNull($v_0))return attributeName;return $v_0.Label.Description};Mscrm.BusinessRules.BusinessRuleEntityManager.getEntityByTypeCode=function(businessRuleEntityManager,typeCode){if(!businessRuleEntityManager.get_entityMetadataManager().containsTypeCode(typeCode))return null;return businessRuleEntityManager.get_entityMetadataManager().getEntityFromTypeCode(typeCode)};Mscrm.BusinessRules.BusinessRuleEntityManager.createRelationshipField=function(entityWrapper){var $v_0=new Mscrm.EditorEntityFieldMetadataJsonWrapper;$v_0.LogicalName=entityWrapper.PrimaryAttributeLogicName;$v_0.Type=15;$v_0.Label=new Mscrm.EditorEntityLabelJsonWrapper;$v_0.Label.Description=entityWrapper.DisplayName;$v_0.Label.LCID=entityWrapper.Fields[0].Label.LCID;$v_0.AdditionalMetadata={};$v_0.AdditionalMetadata.SourceTypeMask=1;return $v_0};Mscrm.BusinessRules.BusinessRuleEntityManager.prototype={$EH_0:function(){for(var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedEntityMetadata||new Array(0),$$arr_1=$v_0,$$len_2=$$arr_1.length,$$idx_3=0;$$idx_3<$$len_2;++$$idx_3){var $v_2=$$arr_1[$$idx_3];this.get_entityMetadataManager().addEntityMetadataEntry($v_2);if(Mscrm.BusinessRules.BusinessRuleInitializer.$x===3||Mscrm.BusinessRules.BusinessRuleInitializer.$x===4||Mscrm.BusinessRules.BusinessRuleInitializer.get_$84()||Mscrm.BusinessRules.BusinessRuleInitializer.get_isProcessUnificationDebugMode())this.$2m_0[$v_2.EntityLogicalName]=1}if(!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities))for(var $$arr_5=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities,$$len_6=$$arr_5.length,$$idx_7=0;$$idx_7<$$len_6;++$$idx_7){var $v_3=$$arr_5[$$idx_7];this.$Aj_0($v_3.RelationshipEntity.EntityLogicalName)!==1&&this.get_entityMetadataManager().addEntityMetadataEntry($v_3.RelationshipEntity)}for(var $v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities||new Array(0),$$arr_A=$v_1,$$len_B=$$arr_A.length,$$idx_C=0;$$idx_C<$$len_B;++$$idx_C){var $v_4=$$arr_A[$$idx_C];if(this.$Aj_0($v_4.RelationshipEntity.EntityLogicalName)!==1){this.get_entityMetadataManager().addEntityMetadataEntry($v_4.RelationshipEntity);if(Mscrm.BusinessRules.BusinessRuleInitializer.$x===2)this.$2m_0[$v_4.RelationshipEntity.EntityLogicalName]=1}this.get_entityMetadataManager().addRelationshipEntityMetadataEntry($v_4.RelationshipName,$v_4)}this.$BT_0()},$Aj_0:function($p0){var $v_0=0;if(Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Number,this.$2m_0,$p0))$v_0=this.$2m_0[$p0];return $v_0},$BT_0:function(){var $v_0=this.$2k_0;if(this.get_entityMetadataManager().containsLogicalName($v_0.EntityLogicalName))$v_0.PluralName=this.get_entityMetadataManager().getEntityFromLogicalName($v_0.EntityLogicalName).PluralName;this.get_entityMetadataManager().addEntityMetadataEntry($v_0);this.$2m_0[$v_0.EntityLogicalName]=1},get_getAllAttributes:function(){return this.$2k_0.Fields},$Cl_0:function($p0){return this.get_$Bb_0()[$p0]},$Cy_0:function($p0,$p1){var $v_0=null,$v_1=this.$81_0($p0);if(!IsNull($v_1))$v_0=$v_1[$p1];return $v_0},getAttributeByName:function(attributeName){var $v_0=this.$Cl_0(attributeName);if(!IsNull($v_0))return $v_0;if(!IsNull(this.get_calculatedFieldMetadata())&&this.get_calculatedFieldMetadata().LogicalName===attributeName)return this.get_calculatedFieldMetadata();return null},getAttributeByEntityAndName:function(entityName,attributeName){return this.$5k_0(entityName)?this.getAttributeByName(attributeName):this.getRelatedAttributeByName(entityName,attributeName)},$Dp_0:function($p0){return !isNullOrEmptyString($p0)&&$p0===this.$2k_0.EntityLogicalName},$5k_0:function($p0){return isNullOrEmptyString($p0)||this.$Dp_0($p0)},getRelatedAttributeByName:function(entityName,attributeName){return this.$Cy_0(entityName,attributeName)},getAttributeByIndex:function(index){return this.getRelatedAttributeByIndex(this.$2k_0.EntityLogicalName,index)},getAttributeByEntityAndIndex:function(entityName,index){return this.$5k_0(entityName)?this.getAttributeByIndex(index):this.getRelatedAttributeByIndex(entityName,index)},getRelatedAttributeByIndex:function(entityName,index){var $v_0=this.getEntity(entityName);return !IsNull($v_0)&&$v_0.Fields.length>index?$v_0.Fields[index]:null},getAttributeIndexFromEntity:function(entityName,attributeName){return this.$5k_0(entityName)?this.getAttributeIndex(attributeName):this.getRelatedAttributeIndex(entityName,attributeName)},getAttributeIndex:function(name){return this.get_$Ba_0().indexOf(name,0)},getRelatedAttributeIndex:function(entityName,attributeName){var $v_0=this.$Cz_0(entityName);return IsNull($v_0)?-1:$v_0.indexOf(attributeName,0)},getAttributeType:function(attributeName){var $v_0=this.getAttributeByName(attributeName);return !IsNull($v_0)?$v_0.Type:-1},getBpfAttributeType:function(attributeName){attributeName=IsNull(attributeName)?"":Mscrm.Utilities.trim(attributeName,['"']);switch(attributeName){case "BpfProcess":return 19;case "ActiveStage":case "SelectedStage":return 21;case "ActiveStageCategory":case "SelectedStageCategory":return 20;default:throw Error.create("Unsupported")}},generateMethodCallParameters:function(bpfAttributeName,workflowStep){var $v_0=null,$v_1=null;switch(bpfAttributeName){case "BpfProcess":$v_1=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(workflowStep);$v_0="processid";break;case "ActiveStage":case "SelectedStage":$v_1=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(workflowStep);$v_0="stageid";break;case "ActiveStageCategory":case "SelectedStageCategory":$v_1=new Microsoft.Crm.Workflow.Expressions.RelatedEntity(workflowStep,"stageid","processstage");$v_0="stagecategory";break;default:throw Error.create("Unsupported Bpf Attribute Name")}return ["",new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_1,$v_0)]},getBpfAttributeLocalizedName:function(bpfAttribute){switch(bpfAttribute){case "BpfProcess":return window.LOCID_BUSINESS_PROCESS;case "ActiveStage":return window.LOCID_ACTIVE_STAGE;case "SelectedStage":return window.LOCID_SELECTED_STAGE;case "ActiveStageCategory":return window.LOCID_ACTIVE_STAGE_CATEGORY;case "SelectedStageCategory":return window.LOCID_SELECTED_STAGE_CATEGORY;default:throw Error.create("Unsupported")}},getRelatedAttributeType:function(entityName,attributeName){if(this.$5k_0(entityName))return this.getAttributeType(attributeName);else{var $v_0=null,$v_1=this.$81_0(entityName);if(!IsNull($v_1))$v_0=$v_1[attributeName];return !IsNull($v_0)?$v_0.Type:-1}},getAttributeLocalizedNameFromEntity:function(entityName,attributeName){return this.$5k_0(entityName)?Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(this,attributeName):this.getRelatedAttributeLocalizedName(entityName,attributeName)},getRelatedAttributeLocalizedName:function(entityName,attributeName){if(isNullOrEmptyString(attributeName)||isNullOrEmptyString(entityName))return "";var $v_0=this.$81_0(entityName),$v_1=null;if(!IsNull($v_0))$v_1=$v_0[attributeName];return !IsNull($v_1)&&!isNullOrEmptyString($v_1.Label.Description)?$v_1.Label.Description:attributeName},getAllAttributesByEntity:function(entityName){return this.$5k_0(entityName)?this.get_getAllAttributes():this.$Ck_0(entityName)},$Ck_0:function($p0){var $v_0=this.getEntity($p0);return IsNull($v_0)?null:$v_0.Fields},get_calculatedFieldMetadata:function(){return this.$3G_0},get_hierarchyName:function(){return this.$8W_0},requestAll:function(){var $v_0=jQueryApi.jQueryDeferredFactory.Deferred(Number,Object),$v_1=this.get_entityMetadataManager().get_allTypeCodes();if($v_1.get_count()<=Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetKeys(String,Number,this.$2m_0).get_count()+Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetKeys(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity,this.$4A_0).get_count())$v_0.resolve(0);else for(var $v_2=0,$v_3=0,$v_4=0;$v_4<$v_1.get_count();$v_4++){var $v_5=Number.parseInvariant($v_1.get_item($v_4));if(Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Number,this.$2m_0,this.get_entityMetadataManager().getLogicalNameFromTypeCode($v_5))||Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity,this.$4A_0,this.get_entityMetadataManager().getLogicalNameFromTypeCode($v_5)))continue;$v_2++;var $$t_6=this;this.requestAttributes(this.get_entityMetadataManager().getLogicalNameFromTypeCode($v_5)).always(function(){$v_3++;$v_3===$v_2&&$v_0.resolve($v_3)})}return $v_0.promise()},requestAttributes:function(entityLogicalName){var $v_0=jQueryApi.jQueryDeferredFactory.Deferred(Mscrm.EditorEntityMetadataJsonWrapper,Object);if(Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Number,this.$2m_0,entityLogicalName))$v_0.resolve(this.getEntity(entityLogicalName));else if(Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity,this.$4A_0,entityLogicalName))return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity,this.$4A_0,entityLogicalName).$3p_0;else{Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryAdd(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity,this.$4A_0,entityLogicalName,new Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity($v_0));var $$t_5=this;this.get_businessRuleServiceProxy().getEntityMetadata(Mscrm.BusinessRules.BusinessRuleInitializer.$x,entityLogicalName,null,function($p1_0,$p1_1){if($p1_0.Success){var $v_1=$$t_5.$Ev_0($p1_0,entityLogicalName);$$t_5.$2m_0[entityLogicalName]=1;$v_0.resolve($v_1)}else $v_0.reject("Could not retrieve metadata");$v_0.always(function(){delete $$t_5.$4A_0[entityLogicalName]})})}return $v_0.promise()},requestOneToManyRelationships:function(relatedEntityLogicalName){var $v_0=jQueryApi.jQueryDeferredFactory.Deferred(Array,Object);if(Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Number,this.$7g_0,relatedEntityLogicalName))$v_0.resolve(this.getRelatedEntities(relatedEntityLogicalName));else if(Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities,this.$5X_0,relatedEntityLogicalName))return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities,this.$5X_0,relatedEntityLogicalName).$3p_0;else{Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryAdd(String,Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities,this.$5X_0,relatedEntityLogicalName,new Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities($v_0));var $$t_5=this;this.get_businessRuleServiceProxy().getOneToManyRelationships(Mscrm.BusinessRules.BusinessRuleInitializer.$x,relatedEntityLogicalName,null,function($p1_0,$p1_1){if($p1_0.Success){var $v_1=$$t_5.$Ew_0($p1_0,relatedEntityLogicalName);$$t_5.$7g_0[relatedEntityLogicalName]=1;$v_0.resolve($v_1)}else $v_0.reject("Could not retrieve metadata");$v_0.always(function(){delete $$t_5.$5X_0[relatedEntityLogicalName]})})}return $v_0.promise()},$Ev_0:function($p0,$p1){var $v_0=$p0.ReturnValue.toString(),$v_1=$v_0.toString().replace("for(;;);",""),$v_2=Sys.Serialization.JavaScriptSerializer.deserialize($v_1.trim());if(!this.get_entityMetadataManager().containsLogicalName($p1)){this.get_entityMetadataManager().addEntityMetadataEntry($v_2);return $v_2}else{var $v_3=this.get_entityMetadataManager().getEntityFromLogicalName($p1);$v_3.Fields=$v_2.Fields;return $v_3}},$Ew_0:function($p0,$p1){var $v_0=$p0.ReturnValue.toString(),$v_1=$v_0.toString().replace("for(;;);",""),$v_2=Sys.Serialization.JavaScriptSerializer.deserialize($v_1.trim());!this.get_entityMetadataManager().containsRelatedEntitiesLogicalName($p1)&&this.get_entityMetadataManager().addRelatedEntityMetadataEntry($p1,$v_2);return $v_2},get_entityLogicalName:function(){return this.$2k_0.EntityLogicalName},get_entityDisplayName:function(){return this.$2k_0.DisplayName},get_$Ba_0:function(){if(IsNull(this.$7a_0))this.$7a_0=this.$AF_0(this.$2k_0);return this.$7a_0},$Cz_0:function($p0){return this.$AF_0(this.getEntity($p0))},get_$Bb_0:function(){return this.$81_0(this.$2k_0.EntityLogicalName)},$81_0:function($p0){$p0=isNullOrEmptyString($p0)?this.$2k_0.EntityLogicalName:$p0;var $v_0=this.getEntity($p0);if(IsNull($v_0))return null;return this.generateAttributeDictionary($v_0)},getEntity:function(entityName){if(isNullOrEmptyString(entityName))return null;return this.get_entityMetadataManager().containsLogicalName(entityName)?this.get_entityMetadataManager().getEntityFromLogicalName(entityName):null},getRelatedEntities:function(entityName){if(isNullOrEmptyString(entityName))return null;return this.get_entityMetadataManager().containsRelatedEntitiesLogicalName(entityName)?this.get_entityMetadataManager().getRelatedEntityFromLogicalName(entityName):null},generateAttributeDictionary:function(entity){var $v_0={};if(!IsNull(entity.Fields))for(var $v_1=entity.Fields,$v_2=0;$v_2<$v_1.length;$v_2++)$v_0[$v_1[$v_2].LogicalName]=$v_1[$v_2];if(!isNullOrEmptyString(entity.PrimaryAttributeLogicName)&&!Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Mscrm.EditorEntityFieldMetadataJsonWrapper,$v_0,entity.PrimaryAttributeLogicName))$v_0[entity.PrimaryAttributeLogicName]=Mscrm.BusinessRules.BusinessRuleEntityManager.createRelationshipField(entity);return $v_0},getProcessStageInfoAndCache:function(processId,selectedBpfId,cacheResult){cacheResult=IsNull(cacheResult)||cacheResult;if(!isNullOrEmptyString(processId)){var $v_0=this.$EV_0(this.$Cx_0(processId));cacheResult&&this.$C1_0($v_0,selectedBpfId);return $v_0}return null},$C1_0:function($p0,$p1){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Ids.length;if($p1>=0&&$p1<$v_0){if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages)Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages=new Array($v_0);Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[$p1]=$p0}},$EV_0:function($p0){for(var $v_0=$p0.Options.length,$v_1=$v_0-1;$v_1>=0;$v_1--)if($p0&&$v_0>0&&Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata)if($p0.BpfStageEntityNames[$v_1].toString()!==Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName){$p0.Ids.splice($v_1,1);$p0.BpfStageEntityNames.splice($v_1,1);for(var $v_2=$v_1+1;$v_2<$p0.Options.length;$v_2++)$p0.Options[$v_2].Value-=1;$p0.Options.splice($v_1,1)}return $p0},$Cx_0:function($p0){var $v_0=this.get_businessRuleServiceProxy().getProcessStageMetadata($p0).get_returnValue().toString(),$v_1=$v_0.replace("for(;;);","");return Sys.Serialization.JavaScriptSerializer.deserialize($v_1.trim())},get_businessRuleServiceProxy:function(){if(!this.$1b_0)this.$1b_0=new Mscrm.BusinessRules.Proxies.BusinessRuleServiceProxy;return this.$1b_0},set_businessRuleServiceProxy:function(value){this.$1b_0=value;return value},get_entityMetadataManager:function(){if(!this.$61_0)this.$61_0=new Mscrm.BusinessRules.EntityMetadataManager;return this.$61_0},set_entityMetadataManager:function(value){this.$61_0=value;return value},$AF_0:function($p0){for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(String),$v_1=$p0.Fields||new Array(0),$$arr_3=$v_1,$$len_4=$$arr_3.length,$$idx_5=0;$$idx_5<$$len_4;++$$idx_5){var $v_2=$$arr_3[$$idx_5];$v_0.add($v_2.LogicalName)}return $v_0},$2m_0:null,$4A_0:null,$7g_0:null,$5X_0:null,$2k_0:null,$3G_0:null,$8W_0:null,$7a_0:null,$1b_0:null,$61_0:null};Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity=function($p0){this.$3p_0=$p0};Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity.prototype={$3p_0:null,get_deferredObject:function(){return this.$3p_0}};Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities=function($p0){this.$3p_0=$p0};Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities.prototype={$3p_0:null,get_deferredObject:function(){return this.$3p_0}};Mscrm.BusinessRules.AttributeFilterBase=function(attributeFilter){this.$4O_0=attributeFilter};Mscrm.BusinessRules.AttributeFilterBase.prototype={$4O_0:null,$5r_0:null,get_attributeFilter:function(){return this.$4O_0},set_attributeFilter:function(value){this.$4O_0=value;return value},get_attributePreFilter:function(){return this.$5r_0},set_attributePreFilter:function(value){this.$5r_0=value;return value},get_$CK_0:function(){var $$t_2=this,$$t_3=this;return IsNull(this.$5r_0)?function($p1_0){return $$t_2.$4O_0($p1_0)}:function($p1_0){return $$t_3.$5r_0.isValidField($p1_0)&&$$t_3.$4O_0($p1_0)}},applyIndexFilter:function(fields){for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(Number),$v_1=0;$v_1<fields.length;$v_1++)this.isValidField(fields[$v_1])&&$v_0.add($v_1);return $v_0.toArray()},applyFieldFilter:function(fields){for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.EditorEntityFieldMetadataJsonWrapper),$v_1=0;$v_1<fields.length;$v_1++)this.isValidField(fields[$v_1])&&$v_0.add(fields[$v_1]);return $v_0.toArray()},applyFilterOnFilteredArray:function(fields,previouslyFiltered){if(IsNull(previouslyFiltered))return new Array(0);if(IsNull(this.$4O_0))return previouslyFiltered;for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(Number),$v_1=0;$v_1<previouslyFiltered.length;$v_1++){var $v_2=previouslyFiltered[$v_1];if(!this.$Dm_0($v_2,fields))continue;var $v_3=fields[$v_2];this.isValidField($v_3)&&$v_0.add($v_2)}return $v_0.toArray()},$Dm_0:function($p0,$p1){return !IsNull($p0)&&$p0<$p1.length&&$p0>=0},firstValidField:function(fields){for(var $v_0=0;$v_0<fields.length;$v_0++)if(this.isValidField(fields[$v_0]))return fields[$v_0];return null},isValidField:function(field){return this.get_$CK_0()(field)}};Mscrm.BusinessRules.PersistentAttributesFilter=function(){Mscrm.BusinessRules.PersistentAttributesFilter.initializeBase(this,[Mscrm.BusinessRules.PersistentAttributesFilter.get_$7w()])};Mscrm.BusinessRules.PersistentAttributesFilter.get_$7w=function(){return function($p1_0){return !IsNull($p1_0)&&!IsNull($p1_0.AdditionalMetadata)&&!$p1_0.AdditionalMetadata.SourceType}};Mscrm.BusinessRules.PersistentAttributesFilter.instance=function(){return new Mscrm.BusinessRules.PersistentAttributesFilter};Mscrm.BusinessRules.NullAttributesFilter=function(){Mscrm.BusinessRules.NullAttributesFilter.initializeBase(this,[Mscrm.BusinessRules.NullAttributesFilter.get_$7w()])};Mscrm.BusinessRules.NullAttributesFilter.get_$7w=function(){return function($p1_0){return true}};Mscrm.BusinessRules.NullAttributesFilter.instance=function(){return new Mscrm.BusinessRules.NullAttributesFilter};Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter=function(){Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.initializeBase(this,[Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.get_$7w()])};Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.get_$7w=function(){return function($p1_0){if($p1_0.AdditionalMetadata.SourceType===1&&$p1_0.AdditionalMetadata.SourceTypeMask!==1)return false;return true}};Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.instance=function(){return new Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter};Mscrm.BusinessRules.SourceTypeMaskAttributesFilter=function(){Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.initializeBase(this,[Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.get_$7w()])};Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.get_$7w=function(){return function($p1_0){if($p1_0.AdditionalMetadata.SourceTypeMask===32)return false;return true}};Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.instance=function(){return new Mscrm.BusinessRules.SourceTypeMaskAttributesFilter};Mscrm.BusinessRules.EntityMetadataManager=function(){this.$4j_0={};this.$6B_0={};this.$6C_0={};this.$6L_0={}};Mscrm.BusinessRules.EntityMetadataManager.prototype={getEntityFromLogicalName:function(entityLogicalName){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(String,Mscrm.EditorEntityMetadataJsonWrapper,this.$6B_0,entityLogicalName)},getEntityFromTypeCode:function(entityTypeCode){var $v_0=entityTypeCode.toString(),$v_1=Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(String,String,this.$4j_0,$v_0);return this.getEntityFromLogicalName($v_1)},containsLogicalName:function(entityLogicalName){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Mscrm.EditorEntityMetadataJsonWrapper,this.$6B_0,entityLogicalName)},containsTypeCode:function(entityTypeCode){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,String,this.$4j_0,entityTypeCode.toString())},addEntityMetadataEntry:function(entity){this.$4j_0[entity.EntityTypeCode.toString()]=entity.EntityLogicalName;this.$6B_0[entity.EntityLogicalName]=entity},get_allTypeCodes:function(){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetKeys(String,String,this.$4j_0)},getLogicalNameFromTypeCode:function(entityTypeCode){return this.$4j_0[entityTypeCode.toString()].toString()},containsRelatedEntitiesLogicalName:function(relatedEntityLogicalName){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Array,this.$6C_0,relatedEntityLogicalName)},addRelatedEntityMetadataEntry:function(relatedEntityLogicalName,relatedEntities){this.$6C_0[relatedEntityLogicalName]=relatedEntities},getRelatedEntityFromLogicalName:function(relatedEntityLogicalName){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(String,Array,this.$6C_0,relatedEntityLogicalName)},containsRelationshipName:function(relationshipName){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(String,Mscrm.RelationshipEntityMetadataJsonWrapper,this.$6L_0,relationshipName)},addRelationshipEntityMetadataEntry:function(relationshipName,relationshipEntities){this.$6L_0[relationshipName]=relationshipEntities},getRelationshipEntityFromRelationshipName:function(relationshipName){return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(String,Mscrm.RelationshipEntityMetadataJsonWrapper,this.$6L_0,relationshipName)},$6B_0:null,$4j_0:null,$6C_0:null,$6L_0:null};Mscrm.BusinessRules.MetadataUtility=function(){};Mscrm.BusinessRules.MetadataUtility.singleEntityLookupsMetadataFromMetadata=function(metadata){for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.EditorEntityFieldMetadataJsonWrapper),$v_1=0;$v_1<metadata.Fields.length;$v_1++){var $v_2=metadata.Fields[$v_1];Mscrm.BusinessRules.MetadataUtility.$Dl($v_2)&&$v_0.add($v_2)}return $v_0.toArray()};Mscrm.BusinessRules.MetadataUtility.lookupToEntity=function(lookupAttribute){var $v_0=Mscrm.BusinessRules.MetadataUtility.lookupToTypeCode(lookupAttribute);if($v_0===-1)return null;return Mscrm.BusinessRules.BusinessRuleEntityManager.getEntityByTypeCode(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),$v_0).EntityLogicalName};Mscrm.BusinessRules.MetadataUtility.lookupToTypeCode=function(attribute){if(!Mscrm.BusinessRules.MetadataUtility.isLookupToSingleEntity(attribute))return -1;var $v_0=Mscrm.BusinessRules.MetadataUtility.$AJ(attribute);if(IsNull($v_0))return -1;var $v_1=$v_0.LookupTypes.split(",");return isNullOrEmptyString($v_1[0])?-1:Number.parseInvariant($v_1[0])};Mscrm.BusinessRules.MetadataUtility.isLookupToSingleEntity=function(attribute){if(isNullOrEmptyString(attribute))return false;var $v_0=Mscrm.BusinessRules.MetadataUtility.$AJ(attribute);return Mscrm.BusinessRules.MetadataUtility.$Ah($v_0)};Mscrm.BusinessRules.MetadataUtility.relationshipToEntity=function(relationshipName){if(isNullOrEmptyString(relationshipName))return null;var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().containsRelationshipName(relationshipName)?Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getRelationshipEntityFromRelationshipName(relationshipName):null;if(!IsNull($v_0))return $v_0.RelationshipEntity.EntityLogicalName;return null};Mscrm.BusinessRules.MetadataUtility.$Dl=function($p0){return !IsNull($p0)&&$p0.AdditionalMetadata.AttributeType==="lookup"&&Mscrm.BusinessRules.MetadataUtility.$Ah($p0.AdditionalMetadata)};Mscrm.BusinessRules.MetadataUtility.$Ah=function($p0){return !IsNull($p0)&&$p0.AttributeType==="lookup"&&$p0.LookupTypes.indexOf(",",1)===-1};Mscrm.BusinessRules.MetadataUtility.$AJ=function($p0){var $v_0=Mscrm.BusinessRules.MetadataUtility.$Cs($p0);return IsNull($v_0)?null:$v_0.AdditionalMetadata};Mscrm.BusinessRules.MetadataUtility.$Cs=function($p0){return Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName($p0)};Mscrm.BusinessRules.BusinessRuleInitializer=function(){};Mscrm.BusinessRules.BusinessRuleInitializer.initialize=function(editorType,pblEditorType){Mscrm.BusinessRules.BusinessRuleInitializer.$x=editorType;Mscrm.BusinessRules.BusinessRuleInitializer.$6I=pblEditorType;switch(editorType){case 2:if(!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.Rollups"))throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_FCBDISABLED_ERR);break;case 1:if(!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.CalculatedFields"))throw Mscrm.BusinessRules.SharedMethods.createException(window.LOCID_CF_FCBDISABLED_ERR);break}Mscrm.BusinessRules.BusinessRuleInitializer.$DX()};Mscrm.BusinessRules.BusinessRuleInitializer.initializeViewContainerIds=function(headerViewContainerId,bodyViewContainerId,footerViewContainerId){if(!IsNull(headerViewContainerId))Mscrm.BusinessRules.Constants.$5D=headerViewContainerId;if(!IsNull(bodyViewContainerId))Mscrm.BusinessRules.Constants.$2V=bodyViewContainerId;if(!IsNull(footerViewContainerId))Mscrm.BusinessRules.Constants.$5A=footerViewContainerId};Mscrm.BusinessRules.BusinessRuleInitializer.get_isProcessUnificationDebugMode=function(){var $v_0=Mscrm.CrmUri.create(window.location.href).get_query()["IsProcessUnificationDebugMode"];if(!IsNull($v_0))if($v_0.toString().trim().toLowerCase()==="true")return true;return false};Mscrm.BusinessRules.BusinessRuleInitializer.get_editorType=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$x};Mscrm.BusinessRules.BusinessRuleInitializer.set_editorType=function(value){Mscrm.BusinessRules.BusinessRuleInitializer.$x=value;return value};Mscrm.BusinessRules.BusinessRuleInitializer.get_pblEditorType=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$6I};Mscrm.BusinessRules.BusinessRuleInitializer.set_pblEditorType=function(value){Mscrm.BusinessRules.BusinessRuleInitializer.$6I=value;return value};Mscrm.BusinessRules.BusinessRuleInitializer.get_readOnly=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$5F};Mscrm.BusinessRules.BusinessRuleInitializer.set_readOnly=function(value){Mscrm.BusinessRules.BusinessRuleInitializer.$5F=value;return value};Mscrm.BusinessRules.BusinessRuleInitializer.get_mainBusinessRuleViewModel=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$32};Mscrm.BusinessRules.BusinessRuleInitializer.get_$g=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$x===1||Mscrm.BusinessRules.BusinessRuleInitializer.$x===2};Mscrm.BusinessRules.BusinessRuleInitializer.get_$84=function(){return !Mscrm.BusinessRules.BusinessRuleInitializer.$x&&Mscrm.BusinessRules.BusinessRuleInitializer.$6I===1};Mscrm.BusinessRules.BusinessRuleInitializer.get_$9R=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$x===1||Mscrm.BusinessRules.BusinessRuleInitializer.$x===4||Mscrm.BusinessRules.BusinessRuleInitializer.get_$84()||Mscrm.BusinessRules.BusinessRuleInitializer.get_isProcessUnificationDebugMode()};Mscrm.BusinessRules.BusinessRuleInitializer.get_$24=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$x===4||Mscrm.BusinessRules.BusinessRuleInitializer.get_$84()||Mscrm.BusinessRules.BusinessRuleInitializer.get_isProcessUnificationDebugMode()};Mscrm.BusinessRules.BusinessRuleInitializer.$DX=function(){window.self._HasInlineEditSupport="true";try{Mscrm.BusinessRules.BusinessRuleInitializer.$32=Mscrm.BusinessRules.BusinessRuleInitializer.$CF()}catch($$e_0){Mscrm.BusinessRules.BusinessRuleInitializer.$32=new Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel(new Microsoft.Crm.Workflow.ObjectModel.WorkflowStep("account",3))}Mscrm.BusinessRules.BusinessRuleInitializer.$5F=Mscrm.BusinessRules.BusinessRuleInitializer.$32.get_readOnly();Mscrm.BusinessRules.Views.ConditionReadToolBarView.$2V=Mscrm.BusinessRules.Constants.get_bodyViewContainerId();Mscrm.BusinessRules.BusinessRuleInitializer.$T=Mscrm.BusinessRules.BusinessRuleInitializer.$CE();Mscrm.BusinessRules.BusinessRuleInitializer.$T.set_dataContext(Mscrm.BusinessRules.BusinessRuleInitializer.$32);Mscrm.BusinessRules.BusinessRuleInitializer.$T.initialize();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()};Mscrm.BusinessRules.BusinessRuleInitializer.$CF=function(){var $v_0=null,$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();switch(Mscrm.BusinessRules.BusinessRuleInitializer.$x){case 0:$v_0=new Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel($v_1);break;case 1:$v_0=new Mscrm.BusinessRules.ViewModels.ManageCalculatedFieldViewModel($v_1);break;case 2:$v_0=new Mscrm.BusinessRules.ViewModels.ManageRollupFieldViewModel($v_1);break}return $v_0};Mscrm.BusinessRules.BusinessRuleInitializer.$CE=function(){var $v_0=null;switch(Mscrm.BusinessRules.BusinessRuleInitializer.$x){case 0:$v_0=new Mscrm.BusinessRules.Views.ManageBusinessRuleView;break;case 1:$v_0=new Mscrm.BusinessRules.Views.ManageCalculatedFieldView;break;case 2:$v_0=new Mscrm.BusinessRules.Views.ManageRollupFieldView;break}return $v_0};Mscrm.BusinessRules.BusinessRuleManager=function(){};Mscrm.BusinessRules.BusinessRuleManager.get_instance=function(){if(IsNull(Mscrm.BusinessRules.BusinessRuleManager.$2L))Mscrm.BusinessRules.BusinessRuleManager.$2L=new Mscrm.BusinessRules.BusinessRuleManager;return Mscrm.BusinessRules.BusinessRuleManager.$2L};Mscrm.BusinessRules.BusinessRuleManager.prototype={get_rootWorkflowStep:function(){if(IsNull(this.$1E_0)){var $v_0=Mscrm.Proxies.JQueryProxy.parseJson(window._BusinessRuleJsonData);this.$1E_0=new Microsoft.Crm.Workflow.ObjectModel.WorkflowStep(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName(),4);this.$1E_0.initializeFromDynamic($v_0)}return this.$1E_0},set_rootWorkflowStep:function(value){this.$1E_0=value;return value},$1E_0:null};Mscrm.BusinessRules.TriggerScope=function(){};Mscrm.BusinessRules.TriggerScope.prototype={$3t_0:null,$4c_0:null,get_formId:function(){return this.$3t_0},set_formId:function(value){this.$3t_0=value;return value},get_scope:function(){return this.$4c_0},set_scope:function(value){this.$4c_0=value;return value}};Mscrm.BusinessRules.Constants=function(){};Mscrm.BusinessRules.Constants.get_headerViewContainerId=function(){if(!Mscrm.BusinessRules.Constants.$5D)Mscrm.BusinessRules.Constants.$5D="HeaderViewContainer";return Mscrm.BusinessRules.Constants.$5D};Mscrm.BusinessRules.Constants.set_headerViewContainerId=function(value){Mscrm.BusinessRules.Constants.$5D=value;return value};Mscrm.BusinessRules.Constants.get_bodyViewContainerId=function(){if(!Mscrm.BusinessRules.Constants.$2V)Mscrm.BusinessRules.Constants.$2V="BodyViewContainer";return Mscrm.BusinessRules.Constants.$2V};Mscrm.BusinessRules.Constants.set_bodyViewContainerId=function(value){Mscrm.BusinessRules.Constants.$2V=value;return value};Mscrm.BusinessRules.Constants.get_footerViewContainerId=function(){if(!Mscrm.BusinessRules.Constants.$5A)Mscrm.BusinessRules.Constants.$5A="FooterViewContainer";return Mscrm.BusinessRules.Constants.$5A};Mscrm.BusinessRules.Constants.set_footerViewContainerId=function(value){Mscrm.BusinessRules.Constants.$5A=value;return value};Mscrm.BusinessRules.Scopes=function(){};Mscrm.BusinessRules.ClientVariable=function(){};Mscrm.BusinessRules.CssClassName=function(){};Mscrm.BusinessRules.HtmlFormat=function(){};Mscrm.BusinessRules.HtmlElementNames=function(){};Mscrm.BusinessRules.HtmlAttributeNames=function(){};Mscrm.BusinessRules.BpfAttributeType=function(){};Mscrm.BusinessRules.BpfAttributeName=function(){};Mscrm.BusinessRules.FieldType=function(){};Mscrm.BusinessRules.ImageUri=function(){};Mscrm.BusinessRules.PBLEditorIds=function(){};Mscrm.BusinessRules.RollupEditorIds=function(){};Mscrm.BusinessRules.ActionMenuCommands=function(){};Mscrm.BusinessRules.SharedMethods=function(){};Mscrm.BusinessRules.SharedMethods.createException=function(message){return Error.create(message)};Mscrm.BusinessRules.SharedMethods.formatTemplate=function(template){for(var parameters=[],$$pai_2=1;$$pai_2<arguments.length;++$$pai_2)parameters[$$pai_2-1]=arguments[$$pai_2];return String.format.apply(null,[template].concat(parameters))};Mscrm.BusinessRules.SharedMethods.getList=function(T){var $v_0=new Sales.Common.Framework.List$1.$$(T);return $v_0=new $v_0};Type.registerNamespace("Mscrm.BusinessRules.Bindings");Mscrm.BusinessRules.Bindings.IBinding=function(){};Mscrm.BusinessRules.Bindings.IBinding.registerInterface("Mscrm.BusinessRules.Bindings.IBinding");Mscrm.BusinessRules.Bindings.IClickBinding=function(){};Mscrm.BusinessRules.Bindings.IClickBinding.registerInterface("Mscrm.BusinessRules.Bindings.IClickBinding");Mscrm.BusinessRules.Bindings.IDataContextValueChangeBinding=function(){};Mscrm.BusinessRules.Bindings.IDataContextValueChangeBinding.registerInterface("Mscrm.BusinessRules.Bindings.IDataContextValueChangeBinding");Mscrm.BusinessRules.Bindings.IKeyDownBinding=function(){};Mscrm.BusinessRules.Bindings.IKeyDownBinding.registerInterface("Mscrm.BusinessRules.Bindings.IKeyDownBinding");Mscrm.BusinessRules.Bindings.IInlineControlFieldValueChangeBinding=function(){};Mscrm.BusinessRules.Bindings.IInlineControlFieldValueChangeBinding.registerInterface("Mscrm.BusinessRules.Bindings.IInlineControlFieldValueChangeBinding");Mscrm.BusinessRules.Bindings.ITextInputValueChangeBinding=function(){};Mscrm.BusinessRules.Bindings.ITextInputValueChangeBinding.registerInterface("Mscrm.BusinessRules.Bindings.ITextInputValueChangeBinding");Mscrm.BusinessRules.Bindings.IValueBinding=function(){};Mscrm.BusinessRules.Bindings.IValueBinding.registerInterface("Mscrm.BusinessRules.Bindings.IValueBinding");Mscrm.BusinessRules.Bindings.IValueChangeBinding=function(){};Mscrm.BusinessRules.Bindings.IValueChangeBinding.registerInterface("Mscrm.BusinessRules.Bindings.IValueChangeBinding");Mscrm.BusinessRules.Bindings.ClickBinding=function(){this.$$d_$A3_0=Function.createDelegate(this,this.$A3_0)};Mscrm.BusinessRules.Bindings.ClickBinding.prototype={$1_0:null,$J_0:null,$A3_0:function($p0){if(IsNull(this.$J_0))throw Error.argumentNull("Command");this.$J_0.execute()},dispose:function(){!IsNull(this.$1_0)&&this.$1_0.unbind("click",this.$$d_$A3_0);this.$1_0=null;!IsNull(this.$J_0)&&this.$J_0.dispose();this.$J_0=null},bind:function(){if(IsNull(this.$1_0))throw Error.argumentNull("Element");this.$1_0.bind("click",this.$$d_$A3_0)},get_element:function(){return this.$1_0},set_element:function(value){this.$1_0=value;return value},get_command:function(){return this.$J_0},set_command:function(value){this.$J_0=value;return value}};Mscrm.BusinessRules.Bindings.DataContextValueChangeBinding=function(){this.$$d_$CJ_0=Function.createDelegate(this,this.$CJ_0)};Mscrm.BusinessRules.Bindings.DataContextValueChangeBinding.prototype={$J_0:null,$7F_0:null,$7h_0:null,$2W_0:null,$7c_0:null,$CJ_0:function($p0,$p1){if($p1.get_propertyName()===this.$7c_0){if(IsNull(this.$J_0))throw Error.argumentNull("Command");this.$J_0.execute()}},dispose:function(){this.$J_0=null;this.$7F_0=null;this.$7h_0=null;!IsNull(this.$2W_0)&&this.$2W_0.remove_propertyChanged(this.$$d_$CJ_0);this.$2W_0=null},bind:function(){if(IsNull(this.$2W_0))throw Error.argumentNull("DataContext");this.$2W_0.add_propertyChanged(this.$$d_$CJ_0)},get_command:function(){return this.$J_0},set_command:function(value){this.$J_0=value;return value},get_getValueDelegate:function(){return this.$7F_0},set_getValueDelegate:function(value){this.$7F_0=value;return value},get_setValueDelegate:function(){return this.$7h_0},set_setValueDelegate:function(value){this.$7h_0=value;return value},get_dataContext:function(){return this.$2W_0},set_dataContext:function(value){this.$2W_0=value;return value},get_propertyName:function(){return this.$7c_0},set_propertyName:function(value){this.$7c_0=value;return value}};Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding=function(){this.$$d_$BE_0=Function.createDelegate(this,this.$BE_0);this.$$d_$AQ_0=Function.createDelegate(this,this.$AQ_0);this.$$d_$BP_0=Function.createDelegate(this,this.$BP_0)};Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue=function(view,value){var $v_0=$find(view.get_dataContext().get_attribute().get_dataAttributeId());$v_0.resetValue(value);$v_0.fireOnChange()};Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue=function(view){return view.get_editView().get_dataContext().get_attribute().get_rawValue()};Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.prototype={$J_0:null,$T_0:null,$BE_0:function($p0){Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$T_0,$p0)},$AQ_0:function(){return Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$T_0)},$BP_0:function($p0){if(IsNull(this.$J_0))throw Error.argumentNull("Command");this.$J_0.execute()},dispose:function(){!IsNull(this.$T_0)&&this.$T_0.get_editView().get_editElementWrapper().unbind("state-commit",this.$$d_$BP_0);!IsNull(this.$J_0)&&this.$J_0.dispose();this.$J_0=null},bind:function(){if(IsNull(this.$T_0))throw Error.argumentNull("TextInputElement");this.$T_0.get_editView().get_editElementWrapper().bind("state-commit",this.$$d_$BP_0)},get_command:function(){return this.$J_0},set_command:function(value){this.$J_0=value;return value},get_getValueDelegate:function(){return this.$$d_$AQ_0},set_getValueDelegate:function(value){throw Error.notImplemented("The method or operation is not implemented.");return value},get_setValueDelegate:function(){return this.$$d_$BE_0},set_setValueDelegate:function(value){throw Error.notImplemented("The method or operation is not implemented.");return value},get_view:function(){return this.$T_0},set_view:function(value){this.$T_0=value;return value}};Mscrm.BusinessRules.Bindings.KeyDownBinding=function(){this.$$d_$A3_0=Function.createDelegate(this,this.$A3_0)};Mscrm.BusinessRules.Bindings.KeyDownBinding.prototype={$1_0:null,$J_0:null,$A3_0:function($p0){if(IsNull(this.$J_0))throw Error.argumentNull("Command");this.$Ey_0($p0);this.$J_0.execute();this.$F0_0($p0);this.$F1_0($p0)},$Ey_0:function($p0){if(Mscrm.BusinessRules.Commands.IEventAdapter.isInstanceOfType(this.$J_0)){var $v_0=this.$J_0,$v_1=$p0.shiftKey;$v_0.set_shiftKey($v_1);var $v_2=$p0.keyCode;$v_0.set_keyCode($v_2)}},$F0_0:function($p0){if(Mscrm.BusinessRules.Commands.IEventAdapter.isInstanceOfType(this.$J_0)){var $v_0=this.$J_0;$v_0.get_preventDefault()&&$p0.preventDefault()}},$F1_0:function($p0){if(Mscrm.BusinessRules.Commands.IEventAdapter.isInstanceOfType(this.$J_0)){var $v_0=this.$J_0;if($v_0.get_stopPropagation()){$p0.stopImmediatePropagation();$p0.stopPropagation()}}},dispose:function(){if(!IsNull(this.$1_0)){this.$1_0.unbind("keydown",this.$$d_$A3_0);this.$1_0=null}if(!IsNull(this.$J_0)){this.$J_0.dispose();this.$J_0=null}},bind:function(){if(IsNull(this.$1_0))throw Error.argumentNull("Element");this.$1_0.bind("keydown",this.$$d_$A3_0)},get_element:function(){return this.$1_0},set_element:function(value){this.$1_0=value;return value},get_command:function(){return this.$J_0},set_command:function(value){this.$J_0=value;return value}};Mscrm.BusinessRules.Bindings.TextInputValueChangeBinding=function(){this.$$d_$BE_0=Function.createDelegate(this,this.$BE_0);this.$$d_$AQ_0=Function.createDelegate(this,this.$AQ_0);this.$$d_$BP_0=Function.createDelegate(this,this.$BP_0)};Mscrm.BusinessRules.Bindings.TextInputValueChangeBinding.prototype={$J_0:null,$36_0:null,$BE_0:function($p0){this.$36_0.set_value($p0.toString())},$AQ_0:function(){return this.$36_0.get_value()},$BP_0:function($p0){if(IsNull(this.$J_0))throw Error.argumentNull("Command");this.$J_0.execute()},dispose:function(){!IsNull(this.$36_0)&&this.$36_0.unbind("change",this.$$d_$BP_0);this.$36_0=null;!IsNull(this.$J_0)&&this.$J_0.dispose();this.$J_0=null},bind:function(){if(IsNull(this.$36_0))throw Error.argumentNull("TextInputElement");this.$36_0.bind("change",this.$$d_$BP_0)},get_command:function(){return this.$J_0},set_command:function(value){this.$J_0=value;return value},get_getValueDelegate:function(){return this.$$d_$AQ_0},set_getValueDelegate:function(value){throw Error.notImplemented("The method or operation is not implemented.");return value},get_setValueDelegate:function(){return this.$$d_$BE_0},set_setValueDelegate:function(value){throw Error.notImplemented("The method or operation is not implemented.");return value},get_textInputElement:function(){return this.$36_0},set_textInputElement:function(value){this.$36_0=value;return value}};Mscrm.BusinessRules.Bindings.ValueBinding=function(){};Mscrm.BusinessRules.Bindings.ValueBinding.prototype={$3x_0:null,$42_0:null,dispose:function(){!IsNull(this.$3x_0)&&this.$3x_0.dispose();this.$3x_0=null;!IsNull(this.$42_0)&&this.$42_0.dispose();this.$42_0=null},bind:function(){if(IsNull(this.$3x_0))throw Error.argumentNull("LhsValueChangeBinding");if(IsNull(this.$42_0))throw Error.argumentNull("RhsValueChangeBinding");this.$3x_0.bind();this.$42_0.bind()},get_lhsValueChangeBinding:function(){return this.$3x_0},set_lhsValueChangeBinding:function(value){this.$3x_0=value;return value},get_rhsValueChangeBinding:function(){return this.$42_0},set_rhsValueChangeBinding:function(value){this.$42_0=value;return value}};Type.registerNamespace("Mscrm.BusinessRules.ViewModels");Mscrm.BusinessRules.ViewModels.IBranchingConditionBranchSectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.IBranchingConditionBranchSectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IBranchingConditionBranchSectionViewModel");Mscrm.BusinessRules.ViewModels.IBranchingConditionsViewModel=function(){};Mscrm.BusinessRules.ViewModels.IBranchingConditionsViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IBranchingConditionsViewModel");Mscrm.BusinessRules.ViewModels.IRollupFieldReadToolBarViewModel=function(){};Mscrm.BusinessRules.ViewModels.IRollupFieldReadToolBarViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IRollupFieldReadToolBarViewModel");Mscrm.BusinessRules.ViewModels.IExpressionComponentStateManager=function(){};Mscrm.BusinessRules.ViewModels.IExpressionComponentStateManager.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionComponentStateManager");Mscrm.BusinessRules.ViewModels.IExpressionStateManager=function(){};Mscrm.BusinessRules.ViewModels.IExpressionStateManager.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionStateManager");Mscrm.BusinessRules.ViewModels.ILeftOperandStateManager=function(){};Mscrm.BusinessRules.ViewModels.ILeftOperandStateManager.registerInterface("Mscrm.BusinessRules.ViewModels.ILeftOperandStateManager");Mscrm.BusinessRules.ViewModels.IRightInnerOperandStateManager=function(){};Mscrm.BusinessRules.ViewModels.IRightInnerOperandStateManager.registerInterface("Mscrm.BusinessRules.ViewModels.IRightInnerOperandStateManager");Mscrm.BusinessRules.ViewModels.IRightOperandMetadataCalculator=function(){};Mscrm.BusinessRules.ViewModels.IRightOperandMetadataCalculator.registerInterface("Mscrm.BusinessRules.ViewModels.IRightOperandMetadataCalculator");Mscrm.BusinessRules.ViewModels.IExpressionTypeMapping=function(){};Mscrm.BusinessRules.ViewModels.IExpressionTypeMapping.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionTypeMapping");Mscrm.BusinessRules.ViewModels.IExpressionTypeMappingCache=function(){};Mscrm.BusinessRules.ViewModels.IExpressionTypeMappingCache.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionTypeMappingCache");Mscrm.BusinessRules.ViewModels.IValueOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IValueOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IValueOperandEditViewModel");Mscrm.BusinessRules.ViewModels.IValueOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.IValueOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IValueOperandViewModel");Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel");Mscrm.BusinessRules.ViewModels.INullOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.INullOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.INullOperandEditViewModel");Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel");Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandEditViewModel");Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandViewModel");Mscrm.BusinessRules.ViewModels.IConditionExpressionViewModel=function(){};Mscrm.BusinessRules.ViewModels.IConditionExpressionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IConditionExpressionViewModel");Mscrm.BusinessRules.ViewModels.IExpressionViewModel=function(){};Mscrm.BusinessRules.ViewModels.IExpressionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionViewModel");Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel");Mscrm.BusinessRules.ViewModels.IOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.IOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IOperandViewModel");Mscrm.BusinessRules.ViewModels.ILeftOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.ILeftOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ILeftOperandViewModel");Mscrm.BusinessRules.ViewModels.ILeftOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.ILeftOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ILeftOperandEditViewModel");Mscrm.BusinessRules.ViewModels.IOperandTypeViewModel=function(){};Mscrm.BusinessRules.ViewModels.IOperandTypeViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IOperandTypeViewModel");Mscrm.BusinessRules.ViewModels.IOperandTypeEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IOperandTypeEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IOperandTypeEditViewModel");Mscrm.BusinessRules.ViewModels.IOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IOperandEditViewModel");Mscrm.BusinessRules.ViewModels.IOperatorEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IOperatorEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IOperatorEditViewModel");Mscrm.BusinessRules.ViewModels.IOperatorViewModel=function(){};Mscrm.BusinessRules.ViewModels.IOperatorViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IOperatorViewModel");Mscrm.BusinessRules.ViewModels.IRightOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.IRightOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IRightOperandViewModel");Mscrm.BusinessRules.ViewModels.IRightOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IRightOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IRightOperandEditViewModel");Mscrm.BusinessRules.ViewModels.IAndOrViewModel=function(){};Mscrm.BusinessRules.ViewModels.IAndOrViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IAndOrViewModel");Mscrm.BusinessRules.ViewModels.IAndOrEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IAndOrEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IAndOrEditViewModel");Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandViewModel=function(){};Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandViewModel");Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandEditViewModel");Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionEditViewModel");Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionViewModel");Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionEditViewModel=function(){};Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionEditViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionEditViewModel");Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionViewModel");Mscrm.BusinessRules.ViewModels.IDescriptionSectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.IDescriptionSectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IDescriptionSectionViewModel");Mscrm.BusinessRules.ViewModels.IStepSectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.IStepSectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IStepSectionViewModel");Mscrm.BusinessRules.ViewModels.IRootStepSectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.IRootStepSectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IRootStepSectionViewModel");Mscrm.BusinessRules.ViewModels.IActionReadToolBarViewModel=function(){};Mscrm.BusinessRules.ViewModels.IActionReadToolBarViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IActionReadToolBarViewModel");Mscrm.BusinessRules.ViewModels.IConditionReadToolBarViewModel=function(){};Mscrm.BusinessRules.ViewModels.IConditionReadToolBarViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IConditionReadToolBarViewModel");Mscrm.BusinessRules.ViewModels.IExpressionReadToolBarViewModel=function(){};Mscrm.BusinessRules.ViewModels.IExpressionReadToolBarViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionReadToolBarViewModel");Mscrm.BusinessRules.ViewModels.IReadToolBarButtonViewModel=function(){};Mscrm.BusinessRules.ViewModels.IReadToolBarButtonViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IReadToolBarButtonViewModel");Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel=function(){};Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel");Mscrm.BusinessRules.ViewModels.IFormBodyViewModel=function(){};Mscrm.BusinessRules.ViewModels.IFormBodyViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IFormBodyViewModel");Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator=function(){};Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator.registerInterface("Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator");Mscrm.BusinessRules.ViewModels.IManageBusinessRuleViewModel=function(){};Mscrm.BusinessRules.ViewModels.IManageBusinessRuleViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IManageBusinessRuleViewModel");Mscrm.BusinessRules.ViewModels.IViewModel=function(){};Mscrm.BusinessRules.ViewModels.IViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.IViewModel");Mscrm.BusinessRules.ViewModels.IExpressionAdaptor=function(){};Mscrm.BusinessRules.ViewModels.IExpressionAdaptor.registerInterface("Mscrm.BusinessRules.ViewModels.IExpressionAdaptor");Mscrm.BusinessRules.ViewModels.ISectionViewModel=function(){};Mscrm.BusinessRules.ViewModels.ISectionViewModel.registerInterface("Mscrm.BusinessRules.ViewModels.ISectionViewModel");Mscrm.BusinessRules.ViewModels.BranchingConditionBranchSectionViewModel=function(step,entityLogicName){Mscrm.BusinessRules.ViewModels.BranchingConditionBranchSectionViewModel.initializeBase(this,[step]);this.$k_4=new Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel(this);this.set_entityLogicName(entityLogicName)};Mscrm.BusinessRules.ViewModels.BranchingConditionBranchSectionViewModel.prototype={$60_5:null,get_entityLogicName:function(){return this.$60_5},set_entityLogicName:function(value){this.$60_5=value;this.$k_4.set_entityName(this.$60_5);return value},get_usePlaceholderTextForEmptyCondition:function(){return this.get_$9o_5().get_usePlaceholderTextForEmptyCondition()},set_usePlaceholderTextForEmptyCondition:function(value){this.get_$9o_5().set_usePlaceholderTextForEmptyCondition(value);return value},$8e_5:null,get_placeholderTextForEmptyCondition:function(){return this.$8e_5},set_placeholderTextForEmptyCondition:function(value){this.$8e_5=value;return value},get_$9o_5:function(){return this.$k_4}};Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel=function($p0){Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel.initializeBase(this,[$p0.get_step().get_conditionBranchDisplayMode(),$p0.get_step().get_conditionExpression(),$p0.get_stepId()]);this.$E_0=$p0};Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel.prototype={createDefaultConditionExpression:function($p0){return null},get_conditionBranchDisplayMode:function(){return Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.get_conditionBranchDisplayMode.call(this)},set_conditionBranchDisplayMode:function($p0){var $v_0=this.get_conditionBranchDisplayMode();if($v_0===2&&$p0!==2){this.$BS_2();this.set_disableAddButton(false)}else if($v_0===1&&$p0===2){this.$EU_2();this.set_disableAddButton(true)}Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.set_conditionBranchDisplayMode.call(this,$p0);return $p0},buildAndAddElseExpressionViewModel:function(){var $v_0=this.$E_0;this.set_entityName($v_0.$60_5);var $v_1=new Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder,$v_2=$v_1.buildExpressionViewModel(true,2,Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.get_instance().getNextUniqueId($v_0.get_stepId()),this);this.$i_1.add($v_2)},get_entityName:function(){return Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.get_entityName.call(this)},set_entityName:function($p0){Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.set_entityName.call(this,$p0);var $$t_1=this;Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($p0).done(function(){$$t_1.raisePropertyChanged("EntityChangedProperty")});return $p0},get_canRemoveCondition:function(){var $v_0=false,$v_1=this.get_$4K_2().get_parent();if($v_1.get_Steps().get_Count()>0)if(this.get_$4K_2().get_conditionBranchDisplayMode()===1&&this.get_$4K_2()===$v_1.get_Steps().get_item($v_1.get_Steps().get_Count()-1))$v_0=true;return $v_0},$6b_2:false,get_usePlaceholderTextForEmptyCondition:function(){return this.$6b_2},set_usePlaceholderTextForEmptyCondition:function($p0){this.$6b_2=$p0;return $p0},$BS_2:function(){var $v_0=this.get_$4K_2().get_parent();if($v_0.get_Steps().get_Count()>0){var $v_1=$v_0.get_Steps().get_item($v_0.get_Steps().get_Count()-1);if($v_1.get_conditionBranchDisplayMode()===2&&$v_1===this.get_$4K_2()){$v_1.set_conditionExpression(new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(this.get_$4K_2().get_workflow(),true,0));$v_0.set_containsElseBranch(false)}}},$EU_2:function(){var $v_0=this.get_$4K_2().get_parent();if($v_0.get_Steps().get_Count()>0){var $v_1=$v_0.get_Steps().get_item($v_0.get_Steps().get_Count()-1);if($v_1.get_conditionBranchDisplayMode()===1&&$v_1===this.get_$4K_2()){$v_1.set_conditionExpression(null);$v_0.set_containsElseBranch(true)}}},get_$4K_2:function(){return this.$E_0.get_step()}};Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel.initializeBase(this,["",$p0])};Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel.prototype={$3u_3:null,get_formulaExpression:function(){return this.getFormulaExpressionDelegate()},set_formulaExpression:function($p0){this.setFormulaExpressionDelegate($p0);return $p0},getFormulaExpressionDelegate:function(){return this.get_step().get_propertySpec()},setFormulaExpressionDelegate:function($p0){this.get_step().set_propertySpec($p0);this.raisePropertyChanged("formulaExpressionProperty")},get_helpCommand:function(){if(IsNull(this.$3u_3))this.$3u_3=new Mscrm.BusinessRules.Commands.ActionFormulaHelpCommand;return this.$3u_3}};Mscrm.BusinessRules.ViewModels.ManageCalculatedFieldViewModel=function(workflowStep){Mscrm.BusinessRules.ViewModels.ManageCalculatedFieldViewModel.initializeBase(this,[workflowStep])};Mscrm.BusinessRules.ViewModels.ManageCalculatedFieldViewModel.prototype={saveRule:function(callback){if(!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.CalculatedFields"))return;var $v_0=this.validate();if(!$v_0.isValid){var $v_3=new Mscrm.BusinessRules.Commands.SaveCommandResult($v_0);callback($v_3);return}var $v_1=this.$2g_1.serialize(this.createBusinessRule()),$v_2="",$$t_A=this,$$t_B=this;this.$1b_1.updateCalculatedField($v_1,this.$5z_1,this.$5q_1,function($p1_0,$p1_1){$v_2=$$t_A.extractServerErrorMessage($p1_1)},function($p1_0,$p1_1){var $v_4=$$t_B.handleUpdateAttributeResponse($p1_0,$v_2);callback($v_4)})},createBusinessRule:function(){var $v_0=new Mscrm.BusinessRule;$v_0.BusinessRuleId=this.get_businessRuleId();$v_0.Name=this.get_businessRuleName();$v_0.PrimaryEntityTypeCode=this.get_entityTypeCode();if(this.get_businessRule())$v_0.WorkflowStepJson=this.get_businessRule().toJson();else $v_0.Xaml=this.get_businessRuleXaml();return $v_0}};Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel=function(step){this.$6T_3=-1;Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.initializeBase(this,["",step]);this.$3J_3=this.get_$B7_3();this.$Q_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity(this.$3J_3);var $$t_1=this;Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes(this.$3J_3).done(function(){$$t_1.$Q_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($$t_1.$3J_3)})};Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.getSupportedFunctionOptions=function(){if(IsNull(Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel._supportedFunctionOptions)){for(var $v_0=new Array(0),$v_1=0;$v_1<Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions.length;$v_1++){var $v_2=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[$v_1],$v_3=$v_2.Value;switch(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type){case 7:if($v_3===36)continue;break;case 2:if($v_3===36||$v_3===37||$v_3===35)continue;break;case 5:break}var $v_4=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption($v_2.Label,$v_1);Array.add($v_0,$v_4)}Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel._supportedFunctionOptions=$v_0}return Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel._supportedFunctionOptions};Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.prototype={$3J_3:null,$Q_3:null,$5v_3:true,get_currentEntityName:function(){return this.$Q_3.EntityLogicalName},get_currentUseSourceEntity:function(){return this.$5v_3},get_$B7_3:function(){var $v_0=null;if(this.get_step().get_targetRelationship()){this.$5v_3=false;$v_0=this.get_step().get_targetRelationship().get_entityName()}else{this.$5v_3=true;$v_0=this.get_step().get_workflow().get_primaryEntityName()}return $v_0},requestEntityMetadata:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes(this.get_$B7_3()),$$t_2=this;$v_0.done(function($p1_0){$$t_2.$Q_3=$p1_0;$$t_2.$4w_3=null;$$t_2.buildAttributesArray();$$t_2.raisePropertyChanged("AggregatedAttributeListProperty")});if($v_0.state()==="pending"){this.raisePropertyChanged("TargetEntityLoadCommenced");var $$t_3=this;$v_0.always(function(){$$t_3.raisePropertyChanged("TargetEntityLoadCompleted")})}},getReadDisplayFormat:function(){return window.LOCID_ROLLUPFIELD_USEAGGFORMAT},$1y_3:0,get_selectedIndexAggregateFunction:function(){return this.$1y_3},set_selectedIndexAggregateFunction:function(value){this.$1y_3=value;var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[this.$1y_3].Value;this.get_step().get_aggregate().getParameters()[0]=$v_0;$v_0===36&&this.set_selectedIndexAggregateField(0);this.raisePropertyChanged("SelectedIndexAggregateFunction");return value},get_aggregateFunctionDisplayName:function(){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[this.$1y_3].Label;return $v_0},get_aggregateFunctions:function(){var $v_0=35,$v_1=this.get_step().get_aggregate().getParameters();if($v_1&&$v_1.length===2)$v_0=$v_1[0];for(var $v_2=0;$v_2<Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions.length;$v_2++){var $v_3=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[$v_2];if($v_3.Value===$v_0){this.$1y_3=$v_2;break}}return Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.getSupportedFunctionOptions()},get_aggregatedFieldDisplayName:function(){var $v_0="";if(this.get_selectedIndexAggregateField()<0)return $v_0;var $v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[this.$1y_3].Value;if($v_1===36)$v_0=this.$Q_3.DisplayName;else $v_0=this.$Q_3.Fields[this.get_selectedIndexAggregateField()].Label.Description;return $v_0},getAggregatedAttributeTitle:function(){if(this.get_step().get_targetRelationship())return window.LOCID_ROLLUP_AGGREGATERELATED;else return window.LOCID_ROLLUP_AGGREGATESOURCE},selectFirstField:function(){var $v_0=this.get_step().get_aggregate().getParameters(),$v_1=$v_0[0];if($v_1===36)this.$1x_3=0;else{var $v_2=this.$Cq_3(this.$Q_3.Fields);this.set_selectedIndexAggregateField($v_2)}},isCurrentAttributePrimaryKey:function(){var $v_0=this.get_step().get_aggregate().getParameters()[1].get_attributeName();return $v_0===this.$Q_3.PrimaryAttributeLogicName},$1x_3:-1,get_selectedIndexAggregateField:function(){if(IsNull(this.$1x_3))this.$1x_3=-1;return this.$1x_3},set_selectedIndexAggregateField:function(value){this.$1x_3=value;var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[this.$1y_3].Value;if($v_0===36){this.get_step().get_aggregate().getParameters()[1].set_attributeName(this.$Q_3.PrimaryAttributeLogicName);this.get_step().get_aggregate().getParameters()[1].get_entity().set_entityName(!this.get_step().get_targetRelationship()?this.get_step().get_workflow().get_primaryEntityName():this.get_step().get_targetRelationship().get_entityName());this.get_step().get_aggregate().getParameters()[1].set_type(15)}else if(this.$1x_3>=0){this.get_step().get_aggregate().getParameters()[1].set_attributeName(this.$Q_3.Fields[this.$1x_3].LogicalName);this.get_step().get_aggregate().getParameters()[1].get_entity().set_entityName(!this.get_step().get_targetRelationship()?this.get_step().get_workflow().get_primaryEntityName():this.get_step().get_targetRelationship().get_entityName());this.get_step().get_aggregate().getParameters()[1].set_type(this.$Q_3.Fields[this.$1x_3].Type)}this.raisePropertyChanged("SelectedIndexAggregateField");return value},buildAttributesArray:function(){var $v_0=new Array(0),$v_1=this.get_step().get_aggregate().getParameters(),$v_2=35;if($v_1&&$v_1.length===2)$v_2=$v_1[0];if($v_2===36)$v_0=this.buildCountAttributeList();else $v_0=this.buildAggregatedAttributeList();return $v_0},buildCountAttributeList:function(){var $v_0=new Array(0);if(this.get_selectedIndexAggregateField()>=0)this.$6T_3=this.get_selectedIndexAggregateField();this.$4w_3=null;this.$1x_3=0;var $v_1=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption(this.$Q_3.DisplayName,this.$1x_3);Array.add($v_0,$v_1);return $v_0},$4w_3:null,buildAggregatedAttributeList:function(){if(IsNull(this.$4w_3)){var $v_0=null;if(!IsNull(this.$Q_3.Fields)){$v_0=new Array(0);var $v_1=this.get_step().get_aggregate().getParameters(),$v_2=null;if($v_1&&$v_1.length===2)$v_2=$v_1[1];for(var $v_3=0;$v_3<this.$Q_3.Fields.length;$v_3++){var $v_4=this.$Q_3.Fields[$v_3];if(!this.$Ak_3($v_4))continue;if(this.$6T_3>=0){this.$1x_3=this.$6T_3;this.$6T_3=-1}else if($v_2.get_entity().get_entityName()===this.$3J_3&&$v_2.get_attributeName()===$v_4.LogicalName)this.$1x_3=$v_3;var $v_5=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption(String.format("({0}) {1}",this.$Q_3.DisplayName,$v_4.Label.Description),$v_3);Array.add($v_0,$v_5)}}this.$4w_3=$v_0}return this.$4w_3},$Cq_3:function($p0){if(!IsNull($p0))for(var $v_0=0;$v_0<$p0.length;$v_0++){var $v_1=$p0[$v_0];if(this.$Ak_3($v_1))return $v_0}return -1},$Ak_3:function($p0){switch(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type){case 3:if(!($p0.Type===3||$p0.Type===4||$p0.Type===5))return false;break;case 7:if($p0.Type!==7||$p0.IsBaseCurrency)return false;break;case 2:if($p0.Type!==2||$p0.AttributeDateTimeBehaviorType!==Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.AttributeDateTimeBehaviorType)return false;break;case 5:if($p0.Type!==5)return false;break}return Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.instance().isValidField($p0)}};Mscrm.BusinessRules.ViewModels.FilterSectionViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.FilterSectionViewModel.initializeBase(this,["",$p0]);this.$3s_3=$p1;this.$k_3=new Mscrm.BusinessRules.ViewModels.FilterConditionsViewModel(this.get_filterExpression(),this.get_stepId(),$p1,$p0)};Mscrm.BusinessRules.ViewModels.FilterSectionViewModel.prototype={get_filterExpression:function(){var $v_0=null;switch(this.$3s_3){case 0:$v_0=this.get_step().get_sourceFilter();break;case 1:$v_0=this.get_step().get_targetFilter();break;case 2:$v_0=this.get_step().get_targetLinkedFilter();break}return $v_0},set_filterExpression:function($p0){switch(this.$3s_3){case 0:this.get_step().set_sourceFilter($p0);break;case 1:this.get_step().set_targetFilter($p0);break;case 2:this.get_step().set_targetLinkedFilter($p0);break}return $p0},$3s_3:0,$k_3:null,get_conditions:function(){return this.$k_3},validate:function(){var $v_0=Mscrm.BusinessRules.ViewModels.ViewModel.prototype.validate.call(this);$v_0.isValid&&this.set_filterExpression(this.$k_3.get_updatedExpression());return $v_0}};Mscrm.BusinessRules.ViewModels.FilterConditionsViewModel=function($p0,$p1,$p2,$p3){Mscrm.BusinessRules.ViewModels.FilterConditionsViewModel.initializeBase(this,[0,$p0,$p1]);this.$5S_2=$p3;this.$3s_2=$p2;this.setEntityName()};Mscrm.BusinessRules.ViewModels.FilterConditionsViewModel.prototype={$5S_2:null,$3s_2:0,get_currentEntityName:function(){return Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.get_entityName.call(this)},get_entityName:function(){this.setEntityName();return Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.get_entityName.call(this)},set_entityName:function($p0){Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype.set_entityName.call(this,$p0);return $p0},setEntityName:function(){if(this.$3s_2===1&&this.$5S_2.get_targetRelationship())this.set_entityName(this.$5S_2.get_targetRelationship().get_entityName());else this.$3s_2===2&&this.$5S_2.get_targetRelationshipLinked()&&this.set_entityName(this.$5S_2.get_targetRelationshipLinked().get_entityName())},createDefaultConditionExpression:function($p0){return null}};Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel.initializeBase(this,["",$p0]);this.$4d_3=new Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel($p0);this.$4e_3=new Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel($p0);this.$6U_3=new Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel($p0)};Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel.prototype={$4d_3:null,get_setSourceStepSection:function(){return this.$4d_3},$4e_3:null,get_setTargetStepSection:function(){return this.$4e_3},$6U_3:null,get_setAggregateStepSection:function(){return this.$6U_3},validate:function(){var $v_0=this.$4d_3.validate();if(!$v_0.isValid)return $v_0;$v_0=this.$4e_3.validate();if(!$v_0.isValid)return $v_0;$v_0=this.$6U_3.validate();return $v_0}};Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel=function(step){Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel.initializeBase(this,["",step]);this.createAggregationStepSectionViewModel(this.get_step().get_aggregate())};Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel.prototype={$25_3:null,get_aggregateStepSectionViewModel:function(){return this.$25_3},set_aggregateStepSectionViewModel:function(value){this.$25_3=value;return value},createAggregationStepSectionViewModel:function(aggregate){if(aggregate){this.get_step().set_aggregate(aggregate);this.$25_3=new Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel(this.get_step())}},validate:function(){return Mscrm.BusinessRules.ViewModels.ViewModel.prototype.validate.call(this)}};Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel.initializeBase(this,["",$p0]);this.$2o_3=new Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel($p0);this.$6V_3=new Mscrm.BusinessRules.ViewModels.FilterSectionViewModel($p0,0)};Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel.prototype={$2o_3:null,get_useSourceHierarchyStepSectionViewModel:function(){return this.$2o_3},$6V_3:null,get_sourceFilterSection:function(){return this.$6V_3},validate:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName(),$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($v_0).HierarchyType;if(!this.$2o_3.get_useSourceHierarchy())return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(true,null);if(!$v_1)return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,String.format(window.LOCID_ROLLUP_NONHIERARCHY_ERR,$v_0));if($v_1===2)return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,String.format(window.LOCID_ROLLUP_MULTIHIERARCHY_ERR,$v_0));if(this.$2o_3.get_hierarchicalRelationshipName()!==Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_hierarchyName()){var $v_2=String.format(window.LOCID_ROLLUP_NOT_HIERARCHICAL,this.$2o_3.get_hierarchicalRelationshipName());return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,$v_2)}return this.$6V_3.validate()}};Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel.initializeBase(this,["",$p0]);this.createTargetEntityViewModel(this.get_step().get_targetRelationship());this.$6Y_3=new Mscrm.BusinessRules.ViewModels.FilterSectionViewModel($p0,1);this.$5Y_3=new Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel($p0)};Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel.prototype={$6Y_3:null,get_targetFilterSection:function(){return this.$6Y_3},$1z_3:null,get_targetEntityViewModel:function(){return this.$1z_3},set_targetEntityViewModel:function($p0){this.$1z_3=$p0;return $p0},$5Y_3:null,get_setTargetEntityLinkedViewSection:function(){return this.$5Y_3},createTargetEntityViewModel:function($p0){if($p0){this.get_step().set_targetRelationship($p0);this.$1z_3=new Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel(this.get_step())}},validate:function(){var $v_0=this.$6Y_3.validate();if(!$v_0.isValid)return $v_0;return this.$5Y_3.validate()}};Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel.initializeBase(this,["",$p0]);this.createTargetLinkedEntityViewModel(this.get_step().get_targetRelationshipLinked());this.$6Z_3=new Mscrm.BusinessRules.ViewModels.FilterSectionViewModel($p0,2)};Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel.prototype={$6Z_3:null,get_targetLinkedFilterSection:function(){return this.$6Z_3},$1D_3:null,get_targetLinkedEntityViewModel:function(){return this.$1D_3},set_targetLinkedEntityViewModel:function($p0){this.$1D_3=$p0;return $p0},$5W_3:null,get_selectedMainRelatedEntityLogicalName:function(){return this.$5W_3},set_selectedMainRelatedEntityLogicalName:function($p0){this.$5W_3=$p0;return $p0},$6H_3:null,get_oneToManyRelationships:function(){return this.$6H_3},set_oneToManyRelationships:function($p0){this.$6H_3=$p0;return $p0},createTargetLinkedEntityViewModel:function($p0){if($p0){this.get_step().set_targetRelationshipLinked($p0);this.$1D_3=new Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel(this.get_step())}},validate:function(){return this.$6Z_3.validate()}};Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel.initializeBase(this,["",$p0])};Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel.prototype={getReadDisplayFormat:function(){return window.LOCID_ROLLUP_USEHIERARCHYFORMAT},get_useSourceHierarchy:function(){return this.getUseSourceHierarchy()},set_useSourceHierarchy:function($p0){this.get_step().set_hierarchicalRelationshipName($p0?Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_hierarchyName():null);this.raisePropertyChanged("UseSourceHierarchyProperty");this.raisePropertyChanged("SourceHierarchyNameProperty");return $p0},get_hierarchicalRelationshipName:function(){return this.get_step().get_hierarchicalRelationshipName()},getUseSourceHierarchy:function(){return this.get_step().get_isHierarchical()},validateHierarchy:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance(),$v_1=new Microsoft.Crm.Workflow.ObjectModel.WorkflowStep(this.get_step().get_workflow().get_primaryEntityName(),0),$v_2=new Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep($v_1);$v_2.set_workflow($v_1);$v_2.set_hierarchicalRelationshipName(this.get_step().get_hierarchicalRelationshipName());$v_0.$BO_2($v_2);return $v_0._results}};Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel=function(step){Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel.initializeBase(this,["",step])};Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel.prototype={$41_3:null,$j_3:-1,get_selectedRelatedEntityDisplayName:function(){if(this.$j_3===-1)return "";return Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities[this.$j_3].RelationshipEntity.PluralName},get_selectedRelatedEntityAttributeDisplayName:function(){if(this.$j_3===-1)return "";return Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities[this.$j_3].RelationshipAttribute.Label.Description},get_selectedIndex:function(){return this.$j_3},set_selectedIndex:function(value){this.$j_3=value;if(this.$j_3>=0){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities,$v_1=$v_0[this.$j_3];this.get_step().set_targetRelationship(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_step().get_workflow(),$v_1.RelationshipAttribute.LogicalName,$v_1.RelationshipEntity.EntityLogicalName,$v_1.RelationshipName))}else this.get_step().set_targetRelationship(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_step().get_workflow(),"",Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName,""));this.raisePropertyChanged("SelectedIndexTargetEntity");return value},get_relatedEntityList:function(){if(!this.$41_3){for(var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities,$v_1=new Array($v_0.length),$v_2=null,$v_3=0,$$arr_4=$v_0,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_4=$$arr_4[$$idx_6];$v_2=new Mscrm.EnumOptionJsonWrapper;$v_2.Value=$v_3;$v_2.Label=String.format("{0} ({1})",$v_4.RelationshipEntity.PluralName,$v_4.RelationshipAttribute.Label.Description);$v_1[$v_3]=$v_2;if(this.get_step().get_targetRelationship().get_entityName()===$v_4.RelationshipEntity.EntityLogicalName&&this.get_step().get_targetRelationship().get_relatedAttributeName()===$v_4.RelationshipAttribute.LogicalName)this.$j_3=$v_3;$v_3++}this.$41_3=$v_1}return this.$41_3}};Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel=function(step){Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel.initializeBase(this,["",step])};Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel.prototype={$41_3:null,$j_3:-1,$6G_3:null,get_selectedRelatedLinkedEntityDisplayName:function(){if(this.$j_3===-1)return "";return this.get_oneToManyRelatedEntities()[this.$j_3].RelationshipEntity.PluralName},get_selectedRelatedLinkedEntityAttributeDisplayName:function(){if(this.$j_3===-1)return "";return this.get_oneToManyRelatedEntities()[this.$j_3].RelationshipAttribute.Label.Description},get_oneToManyRelatedEntities:function(){return this.$6G_3||Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities},set_oneToManyRelatedEntities:function(value){this.$6G_3=value;return value},get_selectedIndex:function(){return this.$j_3},set_selectedIndex:function(value){this.$j_3=value;if(this.$j_3>=0){var $v_0=this.get_oneToManyRelatedEntities(),$v_1=$v_0[this.$j_3];this.get_step().set_targetRelationshipLinked(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_step().get_workflow(),$v_1.RelationshipAttribute.LogicalName,$v_1.RelationshipEntity.EntityLogicalName,$v_1.RelationshipName))}else this.get_step().set_targetRelationshipLinked(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_step().get_workflow(),"",Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName,""));this.raisePropertyChanged("SelectedIndexTargetLinkedEntity");return value},get_relatedLinkedEntityList:function(){if(!this.$41_3){for(var $v_0=this.get_oneToManyRelatedEntities(),$v_1=new Array($v_0.length),$v_2=null,$v_3=0,$$arr_4=$v_0,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_4=$$arr_4[$$idx_6];$v_2=new Mscrm.EnumOptionJsonWrapper;$v_2.Value=$v_3;$v_2.Label=String.format("{0} ({1})",$v_4.RelationshipEntity.PluralName,$v_4.RelationshipAttribute.Label.Description);$v_1[$v_3]=$v_2;if(this.get_step().get_targetRelationshipLinked().get_entityName()===$v_4.RelationshipEntity.EntityLogicalName&&this.get_step().get_targetRelationshipLinked().get_relatedAttributeName()===$v_4.RelationshipAttribute.LogicalName)this.$j_3=$v_3;$v_3++}this.$41_3=$v_1}return this.$41_3}};Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel=function(){Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel.initializeBase(this);var $v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel;$v_0.set_command(this.get_deleteCommand());$v_0.set_iconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/delete.png"));$v_0.set_hoverIconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hoverdelete.png"));$v_0.set_titleText(window.LOCID_DELETE_BUTTON);this.get_buttonViewModels().add($v_0)};Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel.prototype={$n_2:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$n_2)){this.$n_2.dispose();this.$n_2=null}Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.prototype.dispose.call(this)},get_deleteCommand:function(){return this.$n_2||(this.$n_2=new Mscrm.BusinessRules.Commands.DeleteCommand)},set_deleteCommand:function($p0){this.$n_2=$p0;return $p0}};Mscrm.BusinessRules.ViewModels.ManageRollupFieldViewModel=function(workflowStep){Mscrm.BusinessRules.ViewModels.ManageRollupFieldViewModel.initializeBase(this,[workflowStep])};Mscrm.BusinessRules.ViewModels.ManageRollupFieldViewModel.prototype={createFormBodyViewModel:function(){return new Mscrm.BusinessRules.ViewModels.RollupFieldFormBodyViewModel(this.get_businessRule())},saveRule:function(callback){var $v_0=this.validate();if(!$v_0.isValid){var $v_3=new Mscrm.BusinessRules.Commands.SaveCommandResult($v_0);callback($v_3);return}var $v_1=this.$2g_1.serialize(this.createBusinessRule()),$v_2="",$$t_A=this,$$t_B=this;this.$1b_1.updateRollupField($v_1,this.$5z_1,this.$5q_1,function($p1_0,$p1_1){$v_2=$$t_A.extractServerErrorMessage($p1_1)},function($p1_0,$p1_1){var $v_4=$$t_B.handleUpdateAttributeResponse($p1_0,$v_2);callback($v_4)})},createBusinessRule:function(){var $v_0=new Mscrm.BusinessRule;$v_0.BusinessRuleId=this.get_businessRuleId();$v_0.Name=this.get_businessRuleName();$v_0.PrimaryEntityTypeCode=this.get_entityTypeCode();if(this.get_businessRule())$v_0.WorkflowStepJson=this.get_businessRule().toJson();return $v_0}};Mscrm.BusinessRules.ViewModels.RollupFieldFormBodyViewModel=function($p0){Mscrm.BusinessRules.ViewModels.RollupFieldFormBodyViewModel.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ArithmeticLeftOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.ArithmeticLeftOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ArithmeticLeftOperandStateManager.prototype={initialize:function(){this.$DP_2();Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.prototype.initialize.call(this)},reinitialize:function(){this.$EG_2(this.$D_0.get_operandWorkflowAttributeType());var $v_0=this.$D_0.get_leftOperand().get_innerOperand(),$v_1=Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.isInstanceOfType($v_0)||Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandEditViewModel.isInstanceOfType($v_0)?$v_0.get_filteredAttributes():new Array(0),$v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeIndexFromEntity($v_0.get_selectedEntity(),$v_0.get_selectedAttribute());!Array.contains($v_1,$v_2)&&$v_0.set_selectedAttribute(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex($v_0.get_selectedEntity(),$v_1[0]).LogicalName);Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.prototype.reinitialize.call(this)},get_mappingCache:function(){if(IsNull(this.$3S_2))this.$3S_2=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance();return this.$3S_2},$EG_2:function($p0){var $v_0=this.$D_0.get_leftOperand().get_innerOperand();if(IsNull($v_0))return;if($p0===-1){$v_0.set_filteredAttributes(new Array(0));return}var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_0.get_selectedEntity(),$v_0.get_selectedAttribute()).AdditionalMetadata;$v_0.set_filteredAttributes(this.get_mappingCache().getAttributesForAttributeType($p0,$v_0.get_selectedEntity(),$v_1))},$DP_2:function(){if(this.$3O_1===-1)return;var $v_0=this.$D_0.get_leftOperand().get_innerOperand();if(IsNull($v_0))return;var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_0.get_selectedEntity(),$v_0.get_selectedAttribute()).AdditionalMetadata,$v_2=this.get_mappingCache().getAttributesForAttributeType(this.$3O_1,$v_0.get_selectedEntity(),$v_1);isNullOrEmptyString($v_0.get_selectedAttribute())&&$v_0.set_selectedAttribute(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex($v_0.get_selectedEntity(),$v_2[0]).LogicalName);$v_0.set_filteredAttributes($v_2)},$3S_2:null};Mscrm.BusinessRules.ViewModels.ArithmeticOperandTypeStateManager=function(expressionViewModel){this.$9T_2=[1,0];this.$9V_2=[1];Mscrm.BusinessRules.ViewModels.ArithmeticOperandTypeStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.ArithmeticOperandTypeStateManager.prototype={populateOperandTypeOptions:function(){var $v_0=Number.parseInvariant(this.$D_0.get_expressionOperator().get_operation());if($v_0===-1){this.$D_0.get_operandType().set_filteredOperandTypes(new Array(0));return}var $v_1=this.$D_0.get_leftOperand().get_operandWorkflowAttributeType();switch($v_1){case 2:this.$D_0.get_operandType().set_filteredOperandTypes(this.$9V_2);break;default:this.$D_0.get_operandType().set_filteredOperandTypes(this.$9T_2);break}}};Mscrm.BusinessRules.ViewModels.ArithmeticOperatorStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ArithmeticOperatorStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.ArithmeticOperatorStateManager.prototype={get_defaultOperator:function(){return 0},populateOperatorListBasedOnOperandType:function(){var $v_0=this.$D_0.get_leftOperand().get_operandWorkflowAttributeType();if($v_0===-1){this.$D_0.get_expressionOperator().set_filteredOperators(new Array(0));return}this.$D_0.get_expressionOperator().set_filteredOperators(this.get_mappingCache().getArithmeticOperatorForAttributeType($v_0))}};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandStateManager.initializeBase(this,[expressionViewModel]);this.$2q_1=new Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager(expressionViewModel);this.$2c_1=new Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager(expressionViewModel);this.$2v_1=new Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager(expressionViewModel)};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandStateManager.prototype={getRightValueOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager(viewModel)},getRightFieldOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager(viewModel)}};Mscrm.BusinessRules.ViewModels.ArithmeticExpressionStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ArithmeticExpressionStateManager.initializeBase(this,[expressionViewModel]);this.$1j_0=new Mscrm.BusinessRules.ViewModels.ArithmeticLeftOperandStateManager(expressionViewModel);this.$1l_0=new Mscrm.BusinessRules.ViewModels.ArithmeticOperatorStateManager(expressionViewModel);this.$1S_0=new Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandStateManager(expressionViewModel);this.$1k_0=new Mscrm.BusinessRules.ViewModels.ArithmeticOperandTypeStateManager(expressionViewModel)};Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager.prototype={getValueOperandInlineControlMetadata:function(){var $v_0=Number.parseInvariant(this.$8_0.get_expressionOperator().get_operation()),$v_1=this.$8_0.get_leftOperand().get_innerOperand();return (new Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator($v_1.get_selectedEntity(),$v_1.get_selectedAttribute(),$v_0)).getRightOperandMetadata()},getValueExpressionBuilder:function($p0,$p1){var $v_0=this.$8_0.get_leftOperand().get_operandWorkflowAttributeType();switch($v_0){case 2:return new Mscrm.BusinessRules.TimeSpanExpressionAdapter;default:return Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype.getValueExpressionBuilder.call(this,$p0,$p1)}},get_label:function(){var $v_0=this.$8_0.get_leftOperand().get_operandWorkflowAttributeType();switch($v_0){case 2:return window.LOCID_PBLEXPRESSION_DAYSVALUE;default:return Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype.get_label.call(this)}}};Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager.prototype={getFieldOperandOptions:function(){var $v_0=null,$v_1=null,$v_2=this.$8_0.get_leftOperand().get_innerOperand(),$v_3=this.$8_0.get_rightOperand().getInnerOperandOfType(0);if(Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType($v_2))$v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_2.get_selectedEntity(),$v_2.get_selectedAttribute()).AdditionalMetadata;if(Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType($v_3))$v_1=$v_3.get_selectedEntity();return Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getAttributesForAttributeType(this.$8_0.get_leftOperand().get_operandWorkflowAttributeType(),$v_1,$v_0)}};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator=function(leftEntityLogicalName,leftAttributeLogicalName,expressionOperator){Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator.initializeBase(this,[leftEntityLogicalName,leftAttributeLogicalName,expressionOperator])};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator.prototype={getRightOperandMetadata:function(){var $v_0=this.get_leftAttributeMetadata().AdditionalMetadata;switch(this.get_leftAttributeMetadata().Type){case 2:var $v_1={};$v_1.AttributeType="int";$v_1.CanCreate=true;$v_1.CanRead=true;$v_1.CanUpdate=true;$v_1.Format="none";$v_1.LogicalName=$v_0.LogicalName;$v_1.MaxValue=2147483647;$v_1.MinValue=0;$v_1.Precision=0;$v_1.RequiredLevel=0;return $v_1;default:return $v_0}}};Mscrm.BusinessRules.ViewModels.BpfStageLeftOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageLeftOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.BpfStageLeftOperandStateManager.prototype={initialize:function(){Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.prototype.initialize.call(this)},reinitialize:function(){Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.prototype.reinitialize.call(this)}};Mscrm.BusinessRules.ViewModels.BpfStageOperandTypeStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.BpfStageOperandTypeStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.BpfStageOperandTypeStateManager.prototype={populateOperandTypeOptions:function(){this.$D_0.get_operandType().set_filteredOperandTypes([1])}};Mscrm.BusinessRules.ViewModels.BpfStageOperatorStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.BpfStageOperatorStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.BpfStageOperatorStateManager.prototype={get_defaultOperator:function(){return 6},populateOperatorListBasedOnOperandType:function(){this.$D_0.get_expressionOperator().set_filteredOperators([6,7])}};Mscrm.BusinessRules.ViewModels.BpfStageRightOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.BpfStageRightOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.BpfStageRightOperandStateManager.prototype={getRightValueOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.BpfStageRightValueOperandStateManager(viewModel)},getRightFieldOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.BpfStageRightFieldOperandStateManager(viewModel)}};Mscrm.BusinessRules.ViewModels.BpfStageExpressionStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.BpfStageExpressionStateManager.initializeBase(this,[expressionViewModel]);this.$1j_0=new Mscrm.BusinessRules.ViewModels.BpfStageLeftOperandStateManager(expressionViewModel);this.$1k_0=new Mscrm.BusinessRules.ViewModels.BpfStageOperandTypeStateManager(expressionViewModel);this.$1l_0=new Mscrm.BusinessRules.ViewModels.BpfStageOperatorStateManager(expressionViewModel);this.$1S_0=new Mscrm.BusinessRules.ViewModels.BpfStageRightOperandStateManager(expressionViewModel);this.$1J_1=-1};Mscrm.BusinessRules.ViewModels.BpfStageExpressionStateManager.prototype={get_selectedBpfProcessIndex:function(){return this.$1J_1},set_selectedBpfProcessIndex:function(value){this.$1J_1=value;return value},$1J_1:0};Mscrm.BusinessRules.ViewModels.BpfStageRightValueOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageRightValueOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.BpfStageRightValueOperandStateManager.prototype={getValueOperandInlineControlMetadata:function(){var $v_0={};return $v_0},getValueExpressionBuilder:function($p0,$p1){return Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype.getValueExpressionBuilder.call(this,$p0,$p1)},get_label:function(){return Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype.get_label.call(this)},getBpfValueOperandInlineControlMetadata:function(){return {}}};Mscrm.BusinessRules.ViewModels.BpfStageRightFieldOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageRightFieldOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.BpfStageRightFieldOperandStateManager.prototype={getFieldOperandOptions:function(){return new Array(0)}};Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager=function(expressionViewModel){this.$D_0=expressionViewModel;this.$56_0=new Sys.EventHandlerList};Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.prototype={add_stateChanged:function(value){this.$56_0.addHandler("StateChanged",value)},remove_stateChanged:function(value){this.$56_0.removeHandler("StateChanged",value)},raiseStateChangedEvent:function(){var $v_0=this.$56_0.getHandler("StateChanged");!IsNull($v_0)&&$v_0(this,null)},hide:function(){},dispose:function(){this.$56_0=null},get_expressionViewModel:function(){return this.$D_0},$D_0:null,$56_0:null};Mscrm.BusinessRules.ViewModels.LeftOperandStateManager=function($p0){this.$$d_$Dw_1=Function.createDelegate(this,this.$Dw_1);Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.prototype={get_initializingType:function(){return this.$3O_1},set_initializingType:function($p0){this.$3O_1=$p0;return $p0},initialize:function(){this.$D_0.get_leftOperand().add_propertyChanged(this.$$d_$Dw_1)},reinitialize:function(){},dispose:function(){this.$D_0.get_leftOperand().remove_propertyChanged(this.$$d_$Dw_1);Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.prototype.dispose.call(this)},$Dw_1:function($p0,$p1){if($p1.get_propertyName()!=="OperandChangedProperty")return;var $v_0=this.$D_0.get_leftOperand().get_innerOperand();if(Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel.isInstanceOfType(this.$D_0)&&$v_0.get_operandWorkflowAttributeType()===21)return;this.raiseStateChangedEvent()},$3O_1:0};Mscrm.BusinessRules.ViewModels.OperandTypeStateManager=function(expressionViewModel){this.$$d_$EC_1=Function.createDelegate(this,this.$EC_1);Mscrm.BusinessRules.ViewModels.OperandTypeStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.OperandTypeStateManager.prototype={initialize:function(){this.$At_1();this.$D_0.get_operandType().add_propertyChanged(this.$$d_$EC_1)},reinitialize:function(){this.$At_1()},$At_1:function(){this.populateOperandTypeOptions();var $v_0=Number.parseInvariant(this.$D_0.get_operandType().get_operandType()),$v_1=this.$D_0.get_operandType().get_filteredOperandTypes();if(!Array.contains($v_1,$v_0)){var $v_2=$v_1.length>0?Array.contains($v_1,1)?1:0:-1;this.$D_0.get_operandType().set_operandType($v_2.toString())}},get_typeMapping:function(){if(IsNull(this.$6a_1))this.$6a_1=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance();return this.$6a_1},set_typeMapping:function(value){this.$6a_1=value;return value},dispose:function(){this.$D_0.get_expressionOperator().remove_propertyChanged(this.$$d_$EC_1);Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.prototype.dispose.call(this)},$EC_1:function($p0,$p1){if($p1.get_propertyName()!=="OperandTypeValue")return;this.raiseStateChangedEvent()},$6a_1:null};Mscrm.BusinessRules.ViewModels.OperatorStateManager=function(expressionViewModel){this.$$d_$ED_1=Function.createDelegate(this,this.$ED_1);Mscrm.BusinessRules.ViewModels.OperatorStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.OperatorStateManager.prototype={initialize:function(){this.populateOperatorListBasedOnOperandType();this.$D_0.get_expressionOperator().add_propertyChanged(this.$$d_$ED_1)},reinitialize:function(){this.populateOperatorListBasedOnOperandType();var $v_0=Number.parseInvariant(this.$D_0.get_expressionOperator().get_operation()),$v_1=this.$D_0.get_expressionOperator().get_filteredOperators();if($v_1.length>0&&!Array.contains($v_1,$v_0))if(Array.contains($v_1,this.get_defaultOperator()))this.$D_0.get_expressionOperator().set_operation(this.get_defaultOperator().toString());else this.$D_0.get_expressionOperator().set_operation($v_1[0].toString())},get_mappingCache:function(){if(IsNull(this.$3S_1))this.$3S_1=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance();return this.$3S_1},set_mappingCache:function(value){this.$3S_1=value;return value},dispose:function(){this.$D_0.get_expressionOperator().add_propertyChanged(this.$$d_$ED_1);Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.prototype.dispose.call(this)},$ED_1:function($p0,$p1){if($p1.get_propertyName()!=="OperatorProperty")return;this.raiseStateChangedEvent()},$3S_1:null};Mscrm.BusinessRules.ViewModels.RightOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.RightOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.RightOperandStateManager.$D1=function($p0){var $v_0=$p0.get_leftOperand().get_operandWorkflowAttributeType(),$v_1=Number.parseInvariant($p0.get_expressionOperator().get_operation());if($v_0===-1||$v_1===-1)throw Error.create("Invalid LeftOperand and Operator Selected");return Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getRightOperandType($v_0,$v_1)};Mscrm.BusinessRules.ViewModels.RightOperandStateManager.prototype={initialize:function(){this.get_fieldComponentStateManager().initialize();this.get_valueComponentStateManager().initialize();this.get_expressionComponentStateManager().initialize();this.get_nullComponentStateManager().initialize()},reinitialize:function(){var $v_0=Number.parseInvariant(this.$D_0.get_operandType().get_operandType()),$v_1=this.$D_0.get_rightOperand().get_rightOperandType();this.$D_0.get_rightOperand().set_rightOperandType($v_0);if($v_0===-1){!IsNull(this.$D_0.get_rightOperand().get_currentInnerOperand())&&Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType(this.$D_0.get_rightOperand().get_currentInnerOperand())&&this.$D_0.get_rightOperand().get_currentInnerOperand().clearValidation();this.$D_0.get_rightOperand().set_currentInnerOperand(null);return}this.$2c_1.reinitialize($v_1,$v_0);this.$2q_1.reinitialize($v_1,$v_0);this.$2v_1.reinitialize($v_1,$v_0);this.$3y_1.reinitialize($v_1,$v_0)},hide:function(){Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.prototype.hide.call(this);this.get_fieldComponentStateManager().hide();this.get_valueComponentStateManager().hide();this.get_expressionComponentStateManager().hide();this.get_nullComponentStateManager().hide()},get_valueComponentStateManager:function(){if(IsNull(this.$2q_1))this.$2q_1=this.getRightValueOperandStateManager(this.$D_0);return this.$2q_1},set_valueComponentStateManager:function(value){this.$2q_1=value;return value},get_fieldComponentStateManager:function(){if(IsNull(this.$2c_1))this.$2c_1=this.getRightFieldOperandStateManager(this.$D_0);return this.$2c_1},set_fieldComponentStateManager:function(value){this.$2c_1=value;return value},get_expressionComponentStateManager:function(){if(IsNull(this.$2v_1))this.$2v_1=new Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager(this.$D_0);return this.$2v_1},set_expressionComponentStateManager:function(value){this.$2v_1=value;return value},get_nullComponentStateManager:function(){if(IsNull(this.$3y_1))this.$3y_1=new Mscrm.BusinessRules.ViewModels.RightNullOperandStateManager(this.$D_0);return this.$3y_1},set_nullComponentStateManager:function(value){this.$3y_1=value;return value},dispose:function(){!IsNull(this.$2c_1)&&this.$2c_1.dispose();!IsNull(this.$2q_1)&&this.$2q_1.dispose();!IsNull(this.$2v_1)&&this.$2v_1.dispose();!IsNull(this.$3y_1)&&this.$3y_1.dispose();Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.prototype.dispose.call(this)},$2q_1:null,$2c_1:null,$2v_1:null,$3y_1:null};Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase=function(expressionViewModel){this.$$d_operandTypeStateChanged=Function.createDelegate(this,this.operandTypeStateChanged);this.$$d_conditionOperatorStateChanged=Function.createDelegate(this,this.conditionOperatorStateChanged);this.$$d_leftOperandStateChanged=Function.createDelegate(this,this.leftOperandStateChanged);this.$3O_0=-1;this.$D_0=expressionViewModel};Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase.prototype={get_initializingType:function(){return this.$3O_0},set_initializingType:function(value){this.$3O_0=value;return value},initialize:function(){this.$1j_0.set_initializingType(this.$3O_0);this.$1j_0.initialize();this.$1j_0.add_stateChanged(this.$$d_leftOperandStateChanged);this.$1l_0.initialize();this.$1l_0.add_stateChanged(this.$$d_conditionOperatorStateChanged);this.$1S_0.initialize();this.$1k_0.initialize();this.$1k_0.add_stateChanged(this.$$d_operandTypeStateChanged)},reinitialize:function(){this.$1j_0.reinitialize();this.$1l_0.reinitialize();this.$1S_0.reinitialize()},hide:function(){this.$1j_0.hide();this.$1l_0.hide();this.$1S_0.hide();this.$1k_0.hide()},leftOperandStateChanged:function(sender,args){this.$1l_0.reinitialize();this.$1k_0.reinitialize();this.$1S_0.reinitialize()},conditionOperatorStateChanged:function(sender,args){this.$1k_0.reinitialize();this.$1S_0.reinitialize()},operandTypeStateChanged:function(sender,args){this.$1S_0.reinitialize()},get_leftOperandStateManager:function(){return this.$1j_0},set_leftOperandStateManager:function(value){this.$1j_0=value;return value},get_operatorStateManager:function(){return this.$1l_0},set_operatorStateManager:function(value){this.$1l_0=value;return value},get_rightOperandStateManager:function(){return this.$1S_0},set_rightOperandStateManager:function(value){this.$1S_0=value;return value},get_operandTypeStateManager:function(){return this.$1k_0},set_operandTypeStateManager:function(value){this.$1k_0=value;return value},dispose:function(){this.$1j_0.remove_stateChanged(this.$$d_leftOperandStateChanged);this.$1l_0.remove_stateChanged(this.$$d_conditionOperatorStateChanged);this.$1k_0.remove_stateChanged(this.$$d_operandTypeStateChanged);this.$1j_0.dispose();this.$1l_0.dispose();this.$1S_0.dispose();this.$1k_0.dispose()},get_expressionViewModel:function(){return this.$D_0},$1j_0:null,$1l_0:null,$1S_0:null,$1k_0:null,$D_0:null};Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager=function(expressionViewModel){this.$8_0=expressionViewModel};Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager.prototype={hide:function(){},show:function(){},get_entityManager:function(){if(IsNull(this.$2Y_0))this.$2Y_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance();return this.$2Y_0},set_entityManager:function(value){this.$2Y_0=value;return value},get_entityMappingCache:function(){if(IsNull(this.$2Z_0))this.$2Z_0=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance();return this.$2Z_0},set_entityMappingCache:function(value){this.$2Z_0=value;return value},get_expressionViewModel:function(){return this.$8_0},dispose:function(){},$8_0:null,$2Y_0:null,$2Z_0:null};Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype={initialize:function(){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());if($v_0===4&&!IsNull(this.$8_0.get_rightOperand().getInnerOperandOfType(4))){this.$X_1=this.$8_0.get_rightOperand().getInnerOperandOfType(1);this.$X_1.set_label(this.get_label())}else{if($v_0!==1)return;this.$X_1=this.$8_0.get_rightOperand().get_currentInnerOperand();this.$X_1.set_label(this.get_label());var $v_1=this.getValueOperandInlineControlMetadata(),$v_2=this.$8_0.get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType();this.$X_1.set_valueExpressionBuilder(this.getValueExpressionBuilder($v_1,$v_2));this.$X_1.set_metadata($v_1);this.$X_1.set_operandWorkflowAttributeType(this.getValueAttributeType($v_1,$v_2))}},reinitialize:function(oldInnerOperandType,newInnerOperandType){if(newInnerOperandType!==1&&oldInnerOperandType!==1)return;var $v_0=this.$8_0.get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType(),$v_1=null;if(this.$Af_1($v_0)){this.getBpfValueOperandInlineControlMetadata();$v_1={}}else $v_1=this.getValueOperandInlineControlMetadata();var $v_2=this.getValueAttributeType($v_1,$v_0);!IsNull(this.$X_1)&&Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType(this.$X_1)&&this.$X_1.clearValidation();if(oldInnerOperandType===4&&newInnerOperandType!==4)if(Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel.isInstanceOfType(this.$8_0.get_rightOperand().get_currentInnerOperand())){var $v_3=this.$8_0.get_rightOperand().get_currentInnerOperand();Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType($v_3.$3_1.get_currentInnerOperand())&&$v_3.$3_1.get_currentInnerOperand().clearValidation()}if(oldInnerOperandType!==1&&newInnerOperandType===1)this.$DE_1($v_2,$v_0,$v_1);else if(oldInnerOperandType===1&&newInnerOperandType!==1&&!this.$Ag_1($v_0,$v_2,oldInnerOperandType,newInnerOperandType))this.hide();else if(oldInnerOperandType===1&&newInnerOperandType===1){var $v_4=this.$X_1.get_metadata();this.show();if(this.$Af_1($v_0)&&!this.$Ag_1($v_0,$v_2,oldInnerOperandType,newInnerOperandType))this.$ER_1($v_2,$v_0,$v_1);else if($v_1&&($v_1.LogicalName!==$v_4.LogicalName||$v_1.AttributeType!==$v_4.AttributeType||$v_1.Format!==$v_4.Format))this.$ES_1($v_2,$v_0,$v_1);else if($v_4!==$v_1)this.$X_1.set_metadata($v_1);else this.$8_0.get_rightOperand().set_currentInnerOperand(this.$X_1)}},retrieveSingleSelectedIdForRightOperand:function(){var $v_0=-1;if(!IsNull(this.$X_1)&&!IsNull(this.$X_1.get_values())&&!IsNull(this.$X_1.get_values()[0])&&!IsNull(this.$X_1.get_values()[0].Value))$v_0=this.$X_1.get_values()[0].Value;return $v_0},$ER_1:function($p0,$p1,$p2){this.$X_1=this.prepareInnerOperand($p0,null);this.$X_1.set_label(this.get_label());this.$X_1.set_operandWorkflowAttributeType($p0);this.$X_1.set_metadata($p2);this.$8_0.get_rightOperand().set_currentInnerOperand(this.$X_1);this.$X_1.set_valueExpressionBuilder(this.getValueExpressionBuilder(null,$p1))},$ES_1:function($p0,$p1,$p2){this.$X_1.set_valueExpressionBuilder(this.getValueExpressionBuilder($p2,$p1));this.$X_1.set_operandWorkflowAttributeType($p0);this.$X_1.set_metadata($p2);this.$8_0.get_rightOperand().set_rightOperandMetadata($p2);this.$8_0.get_rightOperand().set_currentInnerOperand(this.$X_1)},$DE_1:function($p0,$p1,$p2){this.$X_1=this.prepareInnerOperand($p0,$p2);this.$X_1.set_label(this.get_label());this.$X_1.set_valueExpressionBuilder(this.getValueExpressionBuilder($p2,$p1));this.$X_1.set_operandWorkflowAttributeType($p0);this.$X_1.set_metadata($p2);this.$8_0.get_rightOperand().set_rightOperandMetadata($p2);this.$8_0.get_rightOperand().set_currentInnerOperand(this.$X_1)},$Af_1:function($p0){return $p0===19||$p0===20||$p0===21},$Ag_1:function($p0,$p1,$p2,$p3){var $v_0=$p0===19&&$p1===19||$p0===21&&$p1===21,$v_1=$p2===1&&$p3===4||$p2===4&&$p3===1;return $v_0&&$v_1},hide:function(){var $v_0=this.$8_0.get_rightOperand().getInnerOperandOfType(1);!IsNull($v_0)&&$v_0.hide()},show:function(){this.$X_1.show()},prepareInnerOperand:function(newAttributeType,metadata){return this.$8_0.get_rightOperand().prepareInnerOperand(1,newAttributeType,metadata)},getBpfValueOperandInlineControlMetadata:function(){throw Error.notImplemented("The method or operation is not implemented.")},getValueExpressionBuilder:function(valueMetadata,leftOperandType){return Mscrm.BusinessRules.ValueExpressionAdapterFactory.getDefaultExpressionAdapterForType(this.getValueAttributeType(valueMetadata,leftOperandType),valueMetadata)},getValueAttributeType:function(valueMetadata,leftOperandType){switch(leftOperandType){case 10:case 12:case 13:case 6:case 8:case 1:case 11:if(valueMetadata.AttributeType==="nvarchar")return 14;break}return leftOperandType},get_valueOperandEditViewModel:function(){return this.$X_1},get_label:function(){return window.LOCID_PBLEXPRESSION_VALUETYPE},$X_1:null};Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager=function(expressionViewModel){this.$$d_$B2_1=Function.createDelegate(this,this.$B2_1);Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager.prototype={initialize:function(){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());if($v_0)return;this.$14_1=this.$8_0.get_rightOperand().get_currentInnerOperand();this.$14_1.set_filteredAttributes(this.getFieldOperandOptions());this.$14_1.set_useAttributeFiltering(true);this.$8_0.get_rightOperand().get_currentInnerOperand().add_propertyChanged(this.$$d_$B2_1)},$B2_1:function($p0,$p1){if($p1.get_propertyName()==="AttributesListValue"||$p1.get_propertyName()==="AttributeSelectedValue"){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType()),$v_1=this.$8_0.get_rightOperand().get_rightOperandType();this.reinitialize($v_1,$v_0)}},reinitialize:function(oldInnerOperandType,newInnerOperandType){if(Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel.isInstanceOfType(this.$8_0)||Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel.isInstanceOfType(this.$8_0))if(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.isInstanceOfType(this.$8_0.get_rightOperand().get_currentInnerOperand()))this.$8_0.get_rightOperand().get_currentInnerOperand().clearValidation();else if(Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel.isInstanceOfType(this.$8_0.get_rightOperand().get_currentInnerOperand()))Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType(this.$8_0.get_rightOperand().get_currentInnerOperand().$3_1.get_currentInnerOperand())&&this.$8_0.get_rightOperand().get_currentInnerOperand().$3_1.get_currentInnerOperand().clearValidation();if(newInnerOperandType)return;if(!(!oldInnerOperandType&&!newInnerOperandType))this.$14_1=this.$8_0.get_rightOperand().prepareInnerOperand(0,-1,null);this.$14_1.remove_propertyChanged(this.$$d_$B2_1);var $v_0=this.getFieldOperandOptions();if(!$v_0.length){var $v_1=[];Array.add($v_1,-1);this.$14_1.set_filteredAttributes($v_1);this.$14_1.set_selectedAttribute("")}else if(oldInnerOperandType)this.$DD_1($v_0);else this.$Es_1($v_0);this.$8_0.get_rightOperand().set_currentInnerOperand(this.$14_1);this.$14_1.add_propertyChanged(this.$$d_$B2_1)},$DD_1:function($p0){this.$14_1.set_filteredAttributes($p0);this.$14_1.set_selectedAttribute(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex(this.$14_1.get_selectedEntity(),$p0[0]).LogicalName)},$Es_1:function($p0){this.$14_1.set_filteredAttributes($p0);var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeIndexFromEntity(this.$14_1.get_selectedEntity(),this.$14_1.get_selectedAttribute());!Array.contains($p0,$v_0)&&this.$14_1.set_selectedAttribute(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex(this.$14_1.get_selectedEntity(),$p0[0]).LogicalName)},dispose:function(){!IsNull(this.$14_1)&&this.$14_1.remove_propertyChanged(this.$$d_$B2_1);Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager.prototype.dispose.call(this)},$14_1:null};Mscrm.BusinessRules.ViewModels.RightNullOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.RightNullOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.RightNullOperandStateManager.prototype={get_valueOperandInlineControlMetadata:function(){var $v_0=this.$8_0.get_leftOperand().get_innerOperand(),$v_1=this.get_entityManager().getAttributeByEntityAndName($v_0.get_selectedEntity(),$v_0.get_selectedAttribute()),$v_2;$v_2=$v_1.AdditionalMetadata;var $v_3=Number.parseInvariant(this.$8_0.get_expressionOperator().get_operation());return this.get_entityMappingCache().getPrimitiveRightOperandMetadata(this.$8_0.get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType(),$v_2,$v_3)},initialize:function(){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());if($v_0!==3)return;this.$11_1=this.$8_0.get_rightOperand().get_currentInnerOperand();var $v_1=this.get_valueOperandInlineControlMetadata(),$v_2=this.$8_0.get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType();this.$11_1.set_valueExpressionBuilder(this.getValueExpressionBuilder($v_1,$v_2));this.$11_1.set_metadata($v_1);this.$11_1.set_operandWorkflowAttributeType(this.getValueAttributeType($v_1,$v_2))},reinitialize:function(oldInnerOperandType,newInnerOperandType){if(newInnerOperandType!==3)return;var $v_0=this.$8_0.get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType(),$v_1=this.get_valueOperandInlineControlMetadata(),$v_2=this.getValueAttributeType($v_1,$v_0);!IsNull(this.$11_1)&&Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.isInstanceOfType(this.$11_1)&&this.$11_1.clearValidation();if(oldInnerOperandType!==3){this.$11_1=this.prepareInnerOperand($v_2,$v_1);this.$11_1.set_valueExpressionBuilder(this.getValueExpressionBuilder($v_1,$v_0));this.$11_1.set_metadata($v_1);this.$11_1.set_operandWorkflowAttributeType($v_2);this.$8_0.get_rightOperand().set_rightOperandMetadata($v_1);this.$8_0.get_rightOperand().set_currentInnerOperand(this.$11_1)}else if(oldInnerOperandType===1&&newInnerOperandType!==1)this.hide();else if(oldInnerOperandType===3&&newInnerOperandType===3)this.$8_0.get_rightOperand().set_currentInnerOperand(this.$11_1);else if(oldInnerOperandType===1&&newInnerOperandType===3){var $v_3=this.$11_1.get_metadata();this.show();if($v_1.LogicalName!==$v_3.LogicalName||$v_1.AttributeType!==$v_3.AttributeType||$v_1.Format!==$v_3.Format){this.$11_1=this.prepareInnerOperand($v_2,$v_1);this.$11_1.set_valueExpressionBuilder(this.getValueExpressionBuilder($v_1,$v_0));this.$11_1.set_metadata($v_1);this.$11_1.set_operandWorkflowAttributeType($v_2);this.$8_0.get_rightOperand().set_rightOperandMetadata($v_1);this.$8_0.get_rightOperand().set_currentInnerOperand(this.$11_1)}else this.$11_1.set_metadata($v_1)}},prepareInnerOperand:function(newAttributeType,metadata){return this.$8_0.get_rightOperand().prepareInnerOperand(3,newAttributeType,metadata)},getValueExpressionBuilder:function(valueMetadata,leftOperandType){return Mscrm.BusinessRules.ValueExpressionAdapterFactory.getDefaultExpressionAdapterForType(this.getValueAttributeType(valueMetadata,leftOperandType),valueMetadata)},getValueAttributeType:function(valueMetadata,leftOperandType){switch(leftOperandType){case 10:case 12:case 13:case 6:case 8:case 1:case 11:if(valueMetadata.AttributeType==="nvarchar")return 14;break}return leftOperandType},$11_1:null};Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager.prototype={initialize:function(){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());if($v_0!==2&&$v_0!==4)return;var $v_1=this.$8_0.get_leftOperand().get_operandWorkflowAttributeType();this.$2S_1=this.$8_0.get_rightOperand().get_currentInnerOperand();this.$1v_1=this.$2S_1.get_stateManager();this.$1v_1.set_initializingType($v_1);this.$1v_1.initialize()},reinitialize:function(oldInnerOperandType,newInnerOperandType){if(!this.$4I_1(newInnerOperandType)&&!this.$4I_1(oldInnerOperandType))return;var $v_0=this.$8_0.get_leftOperand().get_operandWorkflowAttributeType();$v_0===19&&oldInnerOperandType===4&&newInnerOperandType===1&&this.$8_0.get_expressionOperator().set_filteredOperators(this.filteredOperatorsForValueAndValueWithStage(true));if(newInnerOperandType===4)$v_0=21;var $v_1=this.$8_0.get_rightOperand().prepareInnerOperand(newInnerOperandType,$v_0,null);if(!Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel.isInstanceOfType($v_1)){!IsNull(this.$1v_1)&&this.$1v_1.hide();return}this.$2S_1=$v_1;this.$1v_1=this.$2S_1.get_stateManager();if(newInnerOperandType===4){var $v_3=this.retrieveSelectedIndexFromRightValueOperand();this.$1v_1.$1J_1=$v_3;this.$2S_1.get_rightOperand().$1J_3=$v_3}var $v_2=this.$2S_1.get_leftOperand().get_operandWorkflowAttributeType();if(!this.$4I_1(oldInnerOperandType)&&this.$4I_1(newInnerOperandType)){this.$2S_1.set_operandWorkflowAttributeType($v_0);this.$1v_1.reinitialize();this.$8_0.get_rightOperand().set_currentInnerOperand(this.$2S_1)}else if(this.$4I_1(oldInnerOperandType)&&!this.$4I_1(newInnerOperandType))this.$1v_1.hide();else if(this.$4I_1(oldInnerOperandType)&&this.$4I_1(newInnerOperandType))if($v_0!==$v_2){this.$2S_1.set_operandWorkflowAttributeType($v_0);this.$1v_1.reinitialize();this.$8_0.get_rightOperand().set_currentInnerOperand(this.$2S_1)}oldInnerOperandType===1&&newInnerOperandType===4&&this.$8_0.get_expressionOperator().set_filteredOperators(this.filteredOperatorsForValueAndValueWithStage(false))},filteredOperatorsForValueAndValueWithStage:function(isNotEqualsOperatorPermitted){var $v_0=this.$2S_1.get_expressionOperator().get_filteredOperators();if(isNotEqualsOperatorPermitted)return $v_0;else{var $v_1=Mscrm.BusinessRules.SharedMethods.getList(Number);$v_1.addRange($v_0);$v_1.remove(7);this.$8_0.get_expressionOperator().setOperationDelegate((6).toString());return $v_1.toArray()}},retrieveSelectedIndexFromRightValueOperand:function(){var $v_0=this.$8_0.get_stateManager();if(!IsNull($v_0)){var $v_1=$v_0.$1S_0;if(!IsNull($v_1)){var $v_2=$v_1.get_valueComponentStateManager();if(!IsNull($v_2))return $v_2.retrieveSingleSelectedIdForRightOperand()}}return -1},get_expressionStateManager:function(){return this.$1v_1},$4I_1:function($p0){return $p0===2||$p0===4},$2S_1:null,$1v_1:null};Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator=function(leftEntityLogicalName,leftAttributeLogicalName,expressionOperator){this.$7C_0=expressionOperator;this.$7P_0=leftAttributeLogicalName;this.$8b_0=leftEntityLogicalName};Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator.prototype={getRightOperandMetadata:function(){var $v_0=this.get_leftAttributeMetadata().AdditionalMetadata;return this.get_entityMappingCache().getPrimitiveRightOperandMetadata(this.get_leftAttributeMetadata().Type,$v_0,this.$7C_0)},get_expressionOperator:function(){return this.$7C_0},get_leftAttributeMetadata:function(){var $v_0=this.get_entityManager().getAttributeByEntityAndName(this.$8b_0,this.$7P_0);if(!$v_0){var $v_1=null;if(this.$7P_0==="BpfProcess"){var $v_2=false,$v_3=0;while(!$v_2){$v_1=this.get_entityManager().getAttributeByIndex($v_3++);if(IsNull($v_1))throw Error.create("Couldn't find attribute with valid expresion mapping");$v_2=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().hasExpressionTypeMapping($v_1.Type)}}else $v_1=this.get_entityManager().getAttributeByIndex(0);return this.get_entityManager().getAttributeByName($v_1.LogicalName)}return $v_0},get_entityMappingCache:function(){if(IsNull(this.$2Z_0))this.$2Z_0=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance();return this.$2Z_0},set_entityMappingCache:function(value){this.$2Z_0=value;return value},get_entityManager:function(){if(IsNull(this.$2Y_0))this.$2Y_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance();return this.$2Y_0},set_entityManager:function(value){this.$2Y_0=value;return value},$7P_0:null,$8b_0:null,$7C_0:0,$2Y_0:null,$2Z_0:null};Mscrm.BusinessRules.ViewModels.ConditionLeftOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.ConditionLeftOperandStateManager.initializeBase(this,[$p0]);var $v_0=$p0.get_leftOperand().get_innerOperand();$v_0.set_operandContext(new Mscrm.BusinessRules.EditOperandContext);$v_0.get_operandContext().set_supportRelationshipSelf(true)};Mscrm.BusinessRules.ViewModels.ConditionOperandTypeStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ConditionOperandTypeStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.ConditionOperandTypeStateManager.prototype={populateOperandTypeOptions:function(){var $v_0=Number.parseInvariant(this.$D_0.get_expressionOperator().get_operation());if($v_0===-1){this.$D_0.get_operandType().set_filteredOperandTypes(new Array(0));return}var $v_1=$v_0;switch($v_1){case 0:case 1:this.$D_0.get_operandType().set_filteredOperandTypes(new Array(0));break;default:var $v_2=this.$D_0.get_leftOperand().get_operandWorkflowAttributeType();if($v_2===-1)return;var $v_3=this.get_typeMapping().getOperandTypeForAttributeType($v_2);this.$D_0.get_operandType().set_filteredOperandTypes($v_3);break}}};Mscrm.BusinessRules.ViewModels.ConditionOperatorStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ConditionOperatorStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.ConditionOperatorStateManager.prototype={get_defaultOperator:function(){return 6},populateOperatorListBasedOnOperandType:function(){var $v_0=this.$D_0.get_leftOperand().get_operandWorkflowAttributeType();if($v_0===-1){this.$D_0.get_expressionOperator().set_filteredOperators(new Array(0));return}this.$D_0.get_expressionOperator().set_filteredOperators(this.get_mappingCache().getConditionOperatorForAttributeType($v_0))}};Mscrm.BusinessRules.ViewModels.ConditionRightOperandStateManager=function(expressionViewModel){this.$$d_$B2_2=Function.createDelegate(this,this.$B2_2);Mscrm.BusinessRules.ViewModels.ConditionRightOperandStateManager.initializeBase(this,[expressionViewModel]);this.$2q_1=new Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager(expressionViewModel);this.$2c_1=new Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager(expressionViewModel);if(!IsNull(this.$D_0.get_rightOperand())&&!IsNull(this.$D_0.get_rightOperand().get_currentInnerOperand()))if(this.$D_0.get_rightOperand().get_rightOperandType()===4&&!IsNull(this.$D_0.get_rightOperand().getInnerOperandOfType(1)))this.$D_0.get_rightOperand().getInnerOperandOfType(1).add_propertyChanged(this.$$d_$B2_2);else this.$D_0.get_rightOperand().get_currentInnerOperand().add_propertyChanged(this.$$d_$B2_2)};Mscrm.BusinessRules.ViewModels.ConditionRightOperandStateManager.prototype={$B2_2:function($p0,$p1){var $v_0=Number.parseInvariant(this.$D_0.get_operandType().get_operandType());if($v_0!==4)return;if($p1.get_propertyName()==="ValueChanged")if($v_0===4){this.get_valueComponentStateManager().reinitializeForBpfProcessSelectionChange();var $v_1=this.get_expressionComponentStateManager().$1v_1;if(!IsNull($v_1)){$v_1.$D_0.get_rightOperand().$1J_3=this.get_valueComponentStateManager().retrieveSingleSelectedIdForRightOperand();$v_1.$1S_0.reinitialize()}}},dispose:function(){!IsNull(this.$D_0.get_rightOperand())&&!IsNull(this.$D_0.get_rightOperand().get_currentInnerOperand())&&this.$D_0.get_rightOperand().get_currentInnerOperand().remove_propertyChanged(this.$$d_$B2_2);Mscrm.BusinessRules.ViewModels.RightOperandStateManager.prototype.dispose.call(this)},getRightValueOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager(viewModel)},getRightFieldOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager(viewModel)}};Mscrm.BusinessRules.ViewModels.ConditionExpressionStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ConditionExpressionStateManager.initializeBase(this,[expressionViewModel]);this.$1j_0=new Mscrm.BusinessRules.ViewModels.ConditionLeftOperandStateManager(expressionViewModel);this.$1l_0=new Mscrm.BusinessRules.ViewModels.ConditionOperatorStateManager(expressionViewModel);this.$1S_0=new Mscrm.BusinessRules.ViewModels.ConditionRightOperandStateManager(expressionViewModel);this.$1k_0=new Mscrm.BusinessRules.ViewModels.ConditionOperandTypeStateManager(expressionViewModel)};Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager.prototype={reinitializeForBpfProcessSelectionChange:function(){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());$v_0===4&&this.getBpfValueOperandInlineControlMetadata()},getValueOperandInlineControlMetadata:function(){var $v_0=Number.parseInvariant(this.$8_0.get_expressionOperator().get_operation()),$v_1=this.$8_0.get_leftOperand().get_innerOperand(),$v_2=new Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator($v_1.get_selectedEntity(),$v_1.get_selectedAttribute(),$v_0);$v_2.$2Y_0=this.get_entityManager();$v_2.$2Z_0=this.get_entityMappingCache();return $v_2.getRightOperandMetadata()},getBpfValueOperandInlineControlMetadata:function(){if(!this.$Dr_2())return null;var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows,$v_1=this.retrieveSingleSelectedIdForRightOperand();if($v_1===-1)return null;var $v_2=$v_0.Ids[$v_1],$v_3;if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages||!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[$v_1])$v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getProcessStageInfoAndCache($v_2,$v_1);else $v_3=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[$v_1];return $v_3},$Dr_2:function(){var $v_0=this.$8_0.get_leftOperand().get_operandWorkflowAttributeType(),$v_1=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());return $v_0===19&&$v_1===4}};Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager.prototype={getFieldOperandOptions:function(){var $v_0=Mscrm.BusinessRules.ViewModels.RightOperandStateManager.$D1(this.$8_0),$v_1=null,$v_2=this.$8_0.get_rightOperand().getInnerOperandOfType(0);if(Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType($v_2))$v_1=$v_2.get_selectedEntity();return this.get_entityMappingCache().getAttributesForAttributeType($v_0,$v_1,null)}};Mscrm.BusinessRules.ViewModels.SetAttributeValueExpressionStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.SetAttributeValueExpressionStateManager.initializeBase(this,[expressionViewModel]);this.$1j_0=new Mscrm.BusinessRules.ViewModels.SetAttributeValueLeftOperandStateManager(expressionViewModel);this.$1l_0=new Mscrm.BusinessRules.ViewModels.SetAttributeValueOperatorStateManager(expressionViewModel);this.$1S_0=new Mscrm.BusinessRules.ViewModels.SetAttributeValueRightOperandStateManager(expressionViewModel);this.$1k_0=new Mscrm.BusinessRules.ViewModels.SetAttributeValueOperandTypeStateManager(expressionViewModel)};Mscrm.BusinessRules.ViewModels.SetAttributeValueLeftOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.SetAttributeValueLeftOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.SetAttributeValueOperandTypeStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.SetAttributeValueOperandTypeStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.SetAttributeValueOperandTypeStateManager.prototype={populateOperandTypeOptions:function(){var $v_0=this.$D_0.get_leftOperand().get_operandWorkflowAttributeType();if(Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel.isInstanceOfType(this.$D_0)){var $v_2=this.$D_0.get_leftOperand().get_innerOperand();this.get_typeMapping().addNullOperandType($v_0,$v_2.get_selectedEntity(),$v_2.get_selectedAttribute())}else this.get_typeMapping().removeNullOperandForAllTypes();var $v_1=this.get_typeMapping().getOperandTypeForAttributeType($v_0);this.$D_0.get_operandType().set_filteredOperandTypes($v_1)}};Mscrm.BusinessRules.ViewModels.SetAttributeValueOperatorStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.SetAttributeValueOperatorStateManager.initializeBase(this,[expressionViewModel])};Mscrm.BusinessRules.ViewModels.SetAttributeValueOperatorStateManager.prototype={get_defaultOperator:function(){return -1},initialize:function(){},reinitialize:function(){},populateOperatorListBasedOnOperandType:function(){}};Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager.prototype={getFieldOperandOptions:function(){var $v_0=null,$v_1=null,$v_2=this.$8_0.get_leftOperand().get_innerOperand(),$v_3=this.$8_0.get_rightOperand().getInnerOperandOfType(0);if(Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType($v_2))$v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_2.get_selectedEntity(),$v_2.get_selectedAttribute()).AdditionalMetadata;if(Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType($v_3))$v_1=$v_3.get_selectedEntity();return this.get_entityMappingCache().getAttributesForAttributeType(this.$8_0.get_leftOperand().get_operandWorkflowAttributeType(),$v_1,$v_0)}};Mscrm.BusinessRules.ViewModels.SetAttributeValueRightValueOperandStateManager=function($p0){Mscrm.BusinessRules.ViewModels.SetAttributeValueRightValueOperandStateManager.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.SetAttributeValueRightValueOperandStateManager.prototype={getValueOperandInlineControlMetadata:function(){var $v_0=this.$8_0.get_leftOperand().get_innerOperand(),$v_1=this.get_entityManager().getAttributeByEntityAndName($v_0.get_selectedEntity(),$v_0.get_selectedAttribute()),$v_2;if($v_1)$v_2=$v_1.AdditionalMetadata;else $v_2=this.get_entityManager().get_getAllAttributes()[0].AdditionalMetadata;var $v_3=Number.parseInvariant(this.$8_0.get_expressionOperator().get_operation());return this.get_entityMappingCache().getPrimitiveRightOperandMetadata(this.$8_0.get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType(),$v_2,$v_3)},initialize:function(){var $v_0=Number.parseInvariant(this.$8_0.get_operandType().get_operandType());if($v_0!==1)return;var $v_1=this.$8_0.get_rightOperand().get_currentInnerOperand();$v_1.set_canHaveMultipleValues(false);Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype.initialize.call(this)},prepareInnerOperand:function($p0,$p1){var $v_0=Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.prototype.prepareInnerOperand.call(this,$p0,$p1);$v_0.set_canHaveMultipleValues(false);return $v_0}};Mscrm.BusinessRules.ViewModels.SetAttributeValueRightOperandStateManager=function(expressionViewModel){Mscrm.BusinessRules.ViewModels.SetAttributeValueRightOperandStateManager.initializeBase(this,[expressionViewModel]);this.$2q_1=new Mscrm.BusinessRules.ViewModels.SetAttributeValueRightValueOperandStateManager(expressionViewModel);this.$2c_1=new Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager(expressionViewModel);this.$2v_1=new Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager(expressionViewModel)};Mscrm.BusinessRules.ViewModels.SetAttributeValueRightOperandStateManager.prototype={getRightValueOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager(viewModel)},getRightFieldOperandStateManager:function(viewModel){return new Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager(viewModel)}};Mscrm.BusinessRules.ViewModels.BooleanExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.BooleanExpressionMapping.initializeBase(this,[0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())return;this.$G_0.clear();this.$G_0.add(6);this.$G_0.add(7)};Mscrm.BusinessRules.ViewModels.BooleanExpressionMapping.prototype={get_getSimilarAttributeType:function(){return [0]}};Mscrm.BusinessRules.ViewModels.BpfProcessExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.BpfProcessExpressionMapping.initializeBase(this,[19]);this.$G_0.clear();this.$G_0.add(6);this.$G_0.add(7);this.$1d_0.add(4)};Mscrm.BusinessRules.ViewModels.BpfProcessExpressionMapping.prototype={getRightOperandType:function($p0){return 19},get_getSimilarAttributeType:function(){return [19]}};Mscrm.BusinessRules.ViewModels.BpfStageCategoryExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.BpfStageCategoryExpressionMapping.initializeBase(this,[20]);this.$G_0.clear();this.$G_0.add(6);this.$G_0.add(7)};Mscrm.BusinessRules.ViewModels.BpfStageCategoryExpressionMapping.prototype={getRightOperandType:function($p0){return 20},get_getSimilarAttributeType:function(){return [20]}};Mscrm.BusinessRules.ViewModels.BpfStageExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.BpfStageExpressionMapping.initializeBase(this,[21]);this.$G_0.clear();this.$G_0.add(6)};Mscrm.BusinessRules.ViewModels.BpfStageExpressionMapping.prototype={getRightOperandType:function($p0){return 21},get_getSimilarAttributeType:function(){return [21]}};Mscrm.BusinessRules.ViewModels.DateTimeExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.DateTimeExpressionMapping.initializeBase(this,[2]);this.$G_0.add(14);this.$G_0.add(15);this.$G_0.add(16);this.$G_0.add(17);if(!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){this.$1d_0.add(2);this.$G_0.add(20);this.$G_0.add(21);this.$1g_0.add(0);this.$1g_0.add(1)}};Mscrm.BusinessRules.ViewModels.DateTimeExpressionMapping.prototype={getRightOperandType:function($p0){switch($p0){case 14:case 15:case 16:case 17:case 20:case 21:return this.$2b_0}return Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype.getRightOperandType.call(this,$p0)},getRightOperandMetadata:function($p0,$p1){switch($p1){case 20:case 21:return this.$Cv_1($p0);default:return Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype.getRightOperandMetadata.call(this,$p0,$p1)}},$Cv_1:function($p0){var $v_0={};$v_0.AttributeType="date";$v_0.CanCreate=true;$v_0.CanRead=true;$v_0.CanUpdate=true;$v_0.Format="date";$v_0.LogicalName=$p0.LogicalName;$v_0.RequiredLevel=0;return $v_0},get_getSimilarAttributeType:function(){return [2]}};Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping=function($p0){this.$1g_0=Mscrm.BusinessRules.SharedMethods.getList(Number);this.$2b_0=$p0;this.$G_0=Mscrm.BusinessRules.SharedMethods.getList(Number);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){var $v_0=(new Microsoft.Crm.Workflow.Validators.UnaryExpressionValidator(null)).applicableOperatorsDictionary,$v_1=Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(Microsoft.Crm.Workflow.Expressions.WorkflowAttributeType,Sales.Common.Framework.IList$1.$$(Microsoft.Crm.Workflow.Expressions.WorkflowConditionOperator),$v_0,$p0);this.$G_0.clear();if($v_1)for(var $$arr_3=$v_1.get_items(),$$len_4=$$arr_3.length,$$idx_5=0;$$idx_5<$$len_4;++$$idx_5){var $v_3=$$arr_3[$$idx_5];this.$G_0.add($v_3)}var $v_2=(new Microsoft.Crm.Workflow.Validators.BinaryExpressionValidator(null)).getTypeDictionary($p0);if($v_2)for(var $v_4=Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetKeys(Microsoft.Crm.Workflow.Expressions.WorkflowConditionOperator,Sales.Common.Framework.List$1.$$(Microsoft.Crm.Workflow.Expressions.WorkflowConditionOperator),$v_2),$v_5=0;$v_5<$v_4.get_count();$v_5++)this.$G_0.add(Number.parseInvariant($v_4.get_item($v_5)))}else{this.$G_0.add(0);this.$G_0.add(1);this.$G_0.add(6);this.$G_0.add(7)}this.$1d_0=Mscrm.BusinessRules.SharedMethods.getList(Number);this.$1d_0.add(1);(this.$2b_0!==10&&this.$2b_0!==19&&this.$2b_0!==20&&this.$2b_0!==21||this.attributesList(null,null).get_count()>0)&&this.$1d_0.add(0)};Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype={addNullOperandType:function($p0,$p1){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($p0,$p1).AdditionalMetadata;if(!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&(!$v_0.RequiredLevel||$v_0.RequiredLevel===3))!this.$1d_0.contains(3)&&this.$1d_0.add(3);else this.removeNullOperandType()},removeNullOperandType:function(){this.$1d_0.contains(3)&&this.$1d_0.remove(3)},getOperators:function(){return this.$G_0.toArray()},getArithmeticOperators:function(){if(!this.$1g_0.get_count())throw Error.create("Arithmetic operation not supported for this type");return this.$1g_0.toArray()},getOperandTypes:function(){return this.$1d_0.toArray()},getAttributes:function($p0,$p1){return this.attributesList($p0,$p1).toArray()},getRightOperandType:function($p0){switch($p0){case 0:case 1:return -1;case 6:case 7:return this.$2b_0}return 14},getRightOperandMetadata:function($p0,$p1){switch($p1){case 0:case 1:return null;default:return $p0}},get_operatorList:function(){return this.$G_0},get_arithmeticOperatorList:function(){return this.$1g_0},get_operandTypeList:function(){return this.$1d_0},attributesList:function($p0,$p1){this.$4x_0=Mscrm.BusinessRules.SharedMethods.getList(Number);for(var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAllAttributesByEntity($p0)||new Array(0),$v_1=0;$v_1<$v_0.length;$v_1++)if(Array.contains(this.get_getSimilarAttributeType(),$v_0[$v_1].Type))if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())if($v_0[$v_1].Type===10&&$p1&&$v_0[$v_1].AdditionalMetadata)$v_0[$v_1].AdditionalMetadata.OptionSetId===$p1.OptionSetId&&this.$4x_0.add($v_1);else this.$4x_0.add($v_1);else this.$4x_0.add($v_1);return this.$4x_0},get_expressionType:function(){return this.$2b_0},createTextMetadata:function($p0){var $v_0={};$v_0.AttributeType="nvarchar";$v_0.CanCreate=true;$v_0.CanRead=true;$v_0.CanUpdate=true;$v_0.Format="text";$v_0.LogicalName=$p0.LogicalName;$v_0.MaxLength=100;$v_0.RequiredLevel=0;return $v_0},$G_0:null,$2b_0:0,$1d_0:null,$4x_0:null};Mscrm.BusinessRules.ViewModels.TextExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.TextExpressionMapping.initializeBase(this,[14]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())return;this.$G_0.add(8);this.$G_0.add(9);this.$G_0.add(10);this.$G_0.add(11);this.$G_0.add(12);this.$G_0.add(13)};Mscrm.BusinessRules.ViewModels.TextExpressionMapping.prototype={get_getSimilarAttributeType:function(){return [14]}};Mscrm.BusinessRules.ViewModels.OptionSetOperatorList=function($p0){Mscrm.BusinessRules.ViewModels.OptionSetOperatorList.initializeBase(this,[$p0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())return;this.$G_0.add(8);this.$G_0.add(9);this.$G_0.add(10);this.$G_0.add(11);this.$G_0.add(12);this.$G_0.add(13)};Mscrm.BusinessRules.ViewModels.OptionSetOperatorList.prototype={getRightOperandMetadata:function($p0,$p1){switch($p1){case 8:case 9:case 10:case 11:case 12:case 13:return this.createTextMetadata($p0);default:return Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype.getRightOperandMetadata.call(this,$p0,$p1)}}};Mscrm.BusinessRules.ViewModels.PicklistExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.PicklistExpressionMapping.initializeBase(this,[10])};Mscrm.BusinessRules.ViewModels.PicklistExpressionMapping.prototype={get_getSimilarAttributeType:function(){return [10]}};Mscrm.BusinessRules.ViewModels.StateExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.StateExpressionMapping.initializeBase(this,[12])};Mscrm.BusinessRules.ViewModels.StateExpressionMapping.prototype={get_getSimilarAttributeType:function(){return [12]}};Mscrm.BusinessRules.ViewModels.StatusExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.StatusExpressionMapping.initializeBase(this,[13])};Mscrm.BusinessRules.ViewModels.StatusExpressionMapping.prototype={get_getSimilarAttributeType:function(){return [13]}};Mscrm.BusinessRules.ViewModels.NumberExpressionMapping=function($p0){Mscrm.BusinessRules.ViewModels.NumberExpressionMapping.initializeBase(this,[$p0]);this.$1g_0.add(0);this.$1g_0.add(1);this.$1g_0.add(3);this.$1g_0.add(2);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())return;this.$G_0.add(14);this.$G_0.add(15);this.$G_0.add(16);this.$G_0.add(17);this.$1d_0.add(2)};Mscrm.BusinessRules.ViewModels.NumberExpressionMapping.prototype={getRightOperandType:function($p0){switch($p0){case 14:case 15:case 16:case 17:return this.$2b_0}return Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype.getRightOperandType.call(this,$p0)},get_getSimilarAttributeType:function(){return [3,5,4,7]}};Mscrm.BusinessRules.ViewModels.IntegerExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.IntegerExpressionMapping.initializeBase(this,[5])};Mscrm.BusinessRules.ViewModels.DecimalExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.DecimalExpressionMapping.initializeBase(this,[3])};Mscrm.BusinessRules.ViewModels.FloatExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.FloatExpressionMapping.initializeBase(this,[4])};Mscrm.BusinessRules.ViewModels.MoneyExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.MoneyExpressionMapping.initializeBase(this,[7]);this.$1g_0.add(0);this.$1g_0.add(1);this.$1g_0.add(3);this.$1g_0.add(2);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())return;this.$G_0.add(14);this.$G_0.add(15);this.$G_0.add(16);this.$G_0.add(17);this.$1d_0.add(2)};Mscrm.BusinessRules.ViewModels.MoneyExpressionMapping.prototype={getRightOperandType:function($p0){switch($p0){case 14:case 15:case 16:case 17:return this.$2b_0}return Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype.getRightOperandType.call(this,$p0)},get_getSimilarAttributeType:function(){return [3,5,4,7]}};Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache=function(){this.$W_0={};this.$W_0[(0).toString()]=new Mscrm.BusinessRules.ViewModels.BooleanExpressionMapping;this.$W_0[(14).toString()]=new Mscrm.BusinessRules.ViewModels.TextExpressionMapping;this.$W_0[(10).toString()]=new Mscrm.BusinessRules.ViewModels.PicklistExpressionMapping;this.$W_0[(12).toString()]=new Mscrm.BusinessRules.ViewModels.StateExpressionMapping;this.$W_0[(13).toString()]=new Mscrm.BusinessRules.ViewModels.StatusExpressionMapping;this.$W_0[(6).toString()]=new Mscrm.BusinessRules.ViewModels.LookupExpressionMapping;this.$W_0[(1).toString()]=new Mscrm.BusinessRules.ViewModels.CustomerExpressionMapping;this.$W_0[(11).toString()]=new Mscrm.BusinessRules.ViewModels.KeyExpressionMapping;this.$W_0[(8).toString()]=new Mscrm.BusinessRules.ViewModels.OwnerExpressionMapping;this.$W_0[(3).toString()]=new Mscrm.BusinessRules.ViewModels.DecimalExpressionMapping;this.$W_0[(4).toString()]=new Mscrm.BusinessRules.ViewModels.FloatExpressionMapping;this.$W_0[(5).toString()]=new Mscrm.BusinessRules.ViewModels.IntegerExpressionMapping;this.$W_0[(7).toString()]=new Mscrm.BusinessRules.ViewModels.MoneyExpressionMapping;this.$W_0[(2).toString()]=new Mscrm.BusinessRules.ViewModels.DateTimeExpressionMapping;this.$W_0[(19).toString()]=new Mscrm.BusinessRules.ViewModels.BpfProcessExpressionMapping;this.$W_0[(20).toString()]=new Mscrm.BusinessRules.ViewModels.BpfStageCategoryExpressionMapping;this.$W_0[(21).toString()]=new Mscrm.BusinessRules.ViewModels.BpfStageExpressionMapping;this.$W_0[(15).toString()]=new Mscrm.BusinessRules.ViewModels.UniqueIdentifierExpressionTypeMapping};Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance=function(){if(!Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.$2L)Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.$2L=new Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache;return Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.$2L};Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.prototype={getConditionOperatorForAttributeType:function(type){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");return $v_0.getOperators()},getArithmeticOperatorForAttributeType:function(type){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");return $v_0.getArithmeticOperators()},getOperandTypeForAttributeType:function(type){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");return $v_0.getOperandTypes()},getRightOperandType:function(type,conditionOperator){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");return $v_0.getRightOperandType(conditionOperator)},getAttributesForAttributeType:function(type,targetEntity,leftMetadata){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");if(type===5||type===4||type===3){var $v_1=new Array(0);$v_0=this.$W_0[(5).toString()];Array.addRange($v_1,[$v_0.getAttributes(targetEntity,leftMetadata)]);$v_0=this.$W_0[(4).toString()];Array.addRange($v_1,[$v_0.getAttributes(targetEntity,leftMetadata)]);$v_0=this.$W_0[(3).toString()];Array.addRange($v_1,[$v_0.getAttributes(targetEntity,leftMetadata)])}return $v_0.getAttributes(targetEntity,leftMetadata)},getPrimitiveRightOperandMetadata:function(type,leftMetadata,conditionOperator){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");return $v_0.getRightOperandMetadata(leftMetadata,conditionOperator)},hasExpressionTypeMapping:function(type){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))return false;return true},addNullOperandType:function(type,entityName,attributeName){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");if(type===5||type===4||type===3||type===7||type===14||type===2||type===10||type===6)$v_0.addNullOperandType(entityName,attributeName);else $v_0.removeNullOperandType()},removeNullOperandForAllTypes:function(){this.$W_0[(5).toString()].removeNullOperandType();this.$W_0[(4).toString()].removeNullOperandType();this.$W_0[(3).toString()].removeNullOperandType();this.$W_0[(7).toString()].removeNullOperandType();this.$W_0[(14).toString()].removeNullOperandType();this.$W_0[(2).toString()].removeNullOperandType();this.$W_0[(10).toString()].removeNullOperandType();this.$W_0[(6).toString()].removeNullOperandType()},removeNullOperandType:function(type){var $v_0=this.$W_0[type.toString()];if(IsNull($v_0))throw Error.create("Unsupported type");$v_0.removeNullOperandType()}};Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase=function($p0){Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase.initializeBase(this,[$p0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())return;this.$G_0.add(8);this.$G_0.add(9);this.$G_0.add(10);this.$G_0.add(11);this.$G_0.add(12);this.$G_0.add(13)};Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase.prototype={getRightOperandMetadata:function($p0,$p1){switch($p1){case 8:case 9:case 10:case 11:case 12:case 13:return this.createTextMetadata($p0);default:return Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.prototype.getRightOperandMetadata.call(this,$p0,$p1)}},get_getSimilarAttributeType:function(){return [6,1,8]}};Mscrm.BusinessRules.ViewModels.LookupExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.LookupExpressionMapping.initializeBase(this,[6])};Mscrm.BusinessRules.ViewModels.CustomerExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.CustomerExpressionMapping.initializeBase(this,[1])};Mscrm.BusinessRules.ViewModels.OwnerExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.OwnerExpressionMapping.initializeBase(this,[8])};Mscrm.BusinessRules.ViewModels.OwnerExpressionMapping.prototype={attributesList:function($p0,$p1){for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(Number),$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAllAttributesByEntity($p0)||new Array(0),$v_2=0;$v_2<$v_1.length;$v_2++)if(Array.contains(this.get_getSimilarAttributeType(),$v_1[$v_2].Type))if($v_1[$v_2].Type===6)$v_1[$v_2].AdditionalMetadata.LookupTypes===(8).toString()&&$v_0.add($v_2);else $v_0.add($v_2);return $v_0}};Mscrm.BusinessRules.ViewModels.KeyExpressionMapping=function(){Mscrm.BusinessRules.ViewModels.KeyExpressionMapping.initializeBase(this,[11])};Mscrm.BusinessRules.ViewModels.UniqueIdentifierExpressionTypeMapping=function(){Mscrm.BusinessRules.ViewModels.UniqueIdentifierExpressionTypeMapping.initializeBase(this,[15]);this.$G_0.clear();this.$G_0.add(0);this.$G_0.add(1);this.$1d_0.clear()};Mscrm.BusinessRules.ViewModels.UniqueIdentifierExpressionTypeMapping.prototype={get_getSimilarAttributeType:function(){return []}};Mscrm.BusinessRules.ViewModels.DefaultValueExpressionBuilder=function(){};Mscrm.BusinessRules.ViewModels.DefaultValueExpressionBuilder.getDefaultValueExpression=function($p0){switch($p0){case 6:case 1:case 8:return new Microsoft.Crm.Workflow.Expressions.LookupExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),null,$p0,null,null);default:return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),"",$p0)}};Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel=function(viewModel){Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.initializeBase(this,[viewModel]);this.$1h_2=viewModel.get_operandWorkflowAttributeType();this.$w_2=viewModel.get_values();this.$71_2=true};Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.prototype={get_metadata:function(){return this.$4X_2},set_metadata:function(value){this.$4X_2=value;this.raisePropertyChanged("ValueMetadataChanged");return value},get_currentEditExpression:function(){return new Mscrm.BusinessRules.MultiValueExpression(new Microsoft.Crm.Workflow.Expressions.ExpressionCollection(this.$8w_2(this.$w_2),true),this.$0_1.get_expression().get_workflow(),this.$4X_2)},get_operandWorkflowAttributeType:function(){return this.$1h_2},set_operandWorkflowAttributeType:function(value){this.$1h_2=value;return value},get_values:function(){return this.getValuesDelegate()},set_values:function(value){this.setValuesDelegate(value);return value},get_canHaveMultipleValues:function(){return this.$71_2},set_canHaveMultipleValues:function(value){this.$71_2=value;return value},clearValidation:function(){this.raisePropertyChanged("ClearValidation")},confirm:function(){this.$0_1.set_values(this.$w_2);this.$0_1.setAttributeType(this.get_operandWorkflowAttributeType());if(Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel.isInstanceOfType(this.$0_1.get_parent())&&Mscrm.BusinessRules.BpfValueExpressionAdapter.isInstanceOfType(this.$2a_2)){var $v_0=this.$0_1.get_parent().$1J_3;this.$0_1.set_valueExpressions(this.$C8_2(this.$w_2,$v_0))}else this.$0_1.set_valueExpressions(this.$8w_2(this.$w_2))},isValid:function(){return this.get_values().length>0&&!IsNull(this.get_values()[0])&&!IsNull(this.get_values()[0].Label)&&this.get_values()[0].Label!==window.LOCID_NO_PROCESSES_DEFINED},$8w_2:function($p0){for(var $v_0=new Array(0),$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_2=0;$v_2<$p0.length;$v_2++)!IsNull($p0[$v_2])&&Array.add($v_0,this.$2a_2.getExpression($v_1,$p0[$v_2]));return $v_0},$C8_2:function($p0,$p1){for(var $v_0=new Array(0),$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_2=0;$v_2<$p0.length;$v_2++)!IsNull($p0[$v_2])&&Array.add($v_0,this.$2a_2.getExpression($v_1,$p0[$v_2],$p1));return $v_0},discard:function(){this.set_values(this.$0_1.get_values());this.$1h_2=this.$0_1.get_operandWorkflowAttributeType()},hide:function(){this.raisePropertyChanged("HideControl")},show:function(){this.raisePropertyChanged("ShowControl")},getValuesDelegate:function(){return this.$w_2},setValuesDelegate:function(value){this.$w_2=value;this.raisePropertyChanged("ValueChanged")},get_label:function(){return this.$3w_2},set_label:function(value){this.$3w_2=value;return value},get_valueExpressionBuilder:function(){return this.$2a_2},set_valueExpressionBuilder:function(value){this.$2a_2=value;return value},$4X_2:null,$1h_2:0,$w_2:null,$71_2:false,$3w_2:null,$2a_2:null};Mscrm.BusinessRules.ViewModels.ValueOperandViewModel=function(expression,id){Mscrm.BusinessRules.ViewModels.ValueOperandViewModel.initializeBase(this,[expression,id]);this.$S_2=expression};Mscrm.BusinessRules.ViewModels.ValueOperandViewModel.prototype={get_displayValue:function(){return String.format(this.$S_2.get_displayFormat(),this.$S_2.get_displayValue())},getEditViewModel:function(){if(IsNull(this.$2_2))this.$2_2=new Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel(this);return this.$2_2},get_operandWorkflowAttributeType:function(){return this.$S_2.get_type()},setAttributeType:function(type){this.$S_2.set_type(type)},get_values:function(){return this.$S_2.$w_1},set_values:function(value){this.$S_2.$w_1=value;return value},get_valueExpressions:function(){return this.$S_2.$1s_1},set_valueExpressions:function(value){this.$S_2.$1s_1=value;return value},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_2)&&this.$2_2.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$S_2:null,$2_2:null};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandViewModel=function($p0,$p1,$p2){Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandViewModel.initializeBase(this,[$p0,$p1,$p2]);this.$DN_2($p0)};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandViewModel.prototype={$DN_2:function($p0){if(!$p0||!$p0.get_count()){this.$5_1=-1;return}if(Microsoft.Crm.Workflow.Expressions.TimeSpanExpression.isInstanceOfType($p0.get_item(0))){this.$5_1=1;var $v_0=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();this.$a_1=new Mscrm.BusinessRules.ViewModels.ValueOperandViewModel(new Mscrm.BusinessRules.MultiValueExpression($p0,$v_0,this.$1m_1),String.format("{0}_{1}",this.$H_1,"primitiveEx"))}},initializeAndGetEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel.prototype={prepareValueInnerOperand:function($p0){switch($p0){case 2:var $v_0=new Microsoft.Crm.Workflow.CrmTimeSpan(0,0,0,0,0);return new Microsoft.Crm.Workflow.Expressions.TimeSpanExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_0);default:return Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.prototype.prepareValueInnerOperand.call(this,$p0)}}};Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel=function(viewModel){Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.initializeBase(this,[viewModel]);this.$1n_2=viewModel.get_selectedAttribute();this.$A_2=viewModel.get_operandWorkflowAttributeType()};Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.prototype={get_selectedAttribute:function(){return this.getSelectedAttributeDelegate()},set_selectedAttribute:function(value){this.setSelectedAttributeDelegate(value);return value},get_selectedEntity:function(){return this.$0_1.get_expression().get_entity().get_entityName()},getSelectedEntityDelegate:function(){return this.get_selectedEntity()},get_filteredAttributes:function(){return this.getFilteredAttributesDelegate()},set_filteredAttributes:function(value){this.setFilteredAttributesDelegate(value);return value},get_useAttributeFiltering:function(){return this.$5b_2},set_useAttributeFiltering:function(value){this.$5b_2=value;return value},get_operandWorkflowAttributeType:function(){return this.$A_2},get_currentEditExpression:function(){var $v_0=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.$0_1.get_expression().get_workflow());$v_0.set_entityName(this.get_selectedEntity());return new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_0,this.get_selectedAttribute())},getSelectedAttributeDelegate:function(){return this.$1n_2},setSelectedAttributeDelegate:function(attribute){this.$1n_2=attribute;this.updateAttributeType();this.raisePropertyChanged("AttributeSelectedValue")},getFilteredAttributesDelegate:function(){return this.$57_2},setFilteredAttributesDelegate:function(attributes){this.$57_2=attributes;this.raisePropertyChanged("FilteredAttributesValue")},confirm:function(){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype.confirm.call(this);!IsNull(this.$1n_2)&&this.$0_1.set_selectedAttribute(this.$1n_2)},discard:function(){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype.discard.call(this);this.set_selectedAttribute(this.$0_1.get_selectedAttribute());this.raisePropertyChanged("EditViewModelDiscardedValue")},updateAttributeType:function(){this.$A_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getRelatedAttributeType(this.get_selectedEntity(),this.get_selectedAttribute())},get_operandContext:function(){return this.$5M_2},set_operandContext:function(value){this.$5M_2=value;return value},$5M_2:null,$1n_2:null,$A_2:0,$57_2:null,$5b_2:false,get_selectedField:function(){return this.$1n_2},set_selectedField:function(value){this.$1n_2=value;return value},get_attributeType:function(){return this.$A_2},set_attributeType:function(value){this.$A_2=value;return value}};Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.initializeBase(this,[$p0]);this.$1h_2=$p0.get_operandWorkflowAttributeType();this.$w_2=$p0.get_values()};Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.prototype={get_metadata:function(){return this.$4X_2},set_metadata:function($p0){this.$4X_2=$p0;this.raisePropertyChanged("ValueMetadataChanged");return $p0},get_operandWorkflowAttributeType:function(){return this.$1h_2},set_operandWorkflowAttributeType:function($p0){this.$1h_2=$p0;return $p0},get_value:function(){return null},clearValidation:function(){this.raisePropertyChanged("ClearValidation")},confirm:function(){this.$0_1.set_values(this.$w_2);this.$0_1.setAttributeType(this.get_operandWorkflowAttributeType());this.$0_1.set_valueExpressions(this.$8w_2(this.$w_2))},$8w_2:function($p0){for(var $v_0=new Array(0),$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_2=0;$v_2<$p0.length;$v_2++)Array.add($v_0,this.$2a_2.getExpression($v_1,null));return $v_0},get_valueExpressionBuilder:function(){return this.$2a_2},set_valueExpressionBuilder:function($p0){this.$2a_2=$p0;return $p0},discard:function(){this.$1h_2=this.$0_1.get_operandWorkflowAttributeType()},$4X_2:null,$1h_2:0,$2a_2:null,$w_2:null};Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel=function(expression,id){Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel.initializeBase(this,[expression,id]);this.$1n_2=expression.get_attributeName();this.$A_2=expression.get_type()};Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel.prototype={get_selectedAttribute:function(){return this.$1n_2},set_selectedAttribute:function(value){this.$1n_2=value;this.$A_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getRelatedAttributeType(this.get_selectedEntity(),value);this.get_expression().set_attributeName(value);this.get_expression().set_type(this.$A_2);return value},get_selectedEntity:function(){return this.get_expression().get_entity().get_entityName()},set_selectedEntity:function(value){return value},get_operandWorkflowAttributeType:function(){return this.$A_2},get_displayValue:function(){return Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeLocalizedNameFromEntity(this.get_selectedEntity(),this.$1n_2)},getEditViewModel:function(){if(IsNull(this.$2_2))this.$2_2=new Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel(this);return this.$2_2},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_2)&&this.$2_2.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$1n_2:null,$A_2:0,$2_2:null};Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel=function(viewModel){Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel.initializeBase(this,[viewModel]);this.$5U_3=viewModel.get_selectedBpfAttribute();this.$1C_3=viewModel.get_selectedType()};Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel.prototype={get_selectedBpfAttribute:function(){return this.getSelectedBpfAttributeDelegate()},set_selectedBpfAttribute:function(value){this.setSelectedBpfAttributeDelegate(value);return value},getSelectedEntityDelegate:function(){return Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName},get_selectedType:function(){return this.$1C_3},set_selectedType:function(value){this.$1C_3=value;return value},get_selectedEntity:function(){return this.getSelectedEntityDelegate()},get_operandWorkflowAttributeType:function(){return this.$A_2},get_currentEditExpression:function(){if(this.$1C_3===1)return new Microsoft.Crm.Workflow.Expressions.MethodCallExpression(this.$0_1.get_expression().get_workflow(),23,[1]);else return new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.$0_1.get_expression().get_workflow()),this.get_selectedAttribute())},getSelectedBpfAttributeDelegate:function(){return this.$5U_3},setSelectedAttributeDelegate:function(attribute){this.$5U_3="";Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.prototype.setSelectedAttributeDelegate.call(this,attribute);this.$1C_3=0},setSelectedBpfAttributeDelegate:function(attribute){this.$5U_3=attribute;this.$A_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeType(attribute);this.$1C_3=1;this.raisePropertyChanged("AttributeSelectedValue")},handleAttributesChangedDelegate:function(entityName){this.raisePropertyChanged("AttributesListValue")},confirm:function(){Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.prototype.confirm.call(this);if(this.$1C_3===1)this.$0_1.set_selectedBpfAttribute(this.$5U_3);else this.$0_1.set_selectedAttribute(this.$1n_2);this.$0_1.set_selectedType(this.$1C_3)},discard:function(){this.$1C_3=this.$0_1.get_selectedType();if(this.$1C_3===1)this.set_selectedBpfAttribute(this.$0_1.get_selectedBpfAttribute());else Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.prototype.discard.call(this);this.raisePropertyChanged("EditViewModelDiscardedValue")},$1C_3:0,$5U_3:null};Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel=function(expression,id){Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel.initializeBase(this,[expression,id]);if(Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression.isInstanceOfType(expression)){var $v_0=expression;this.$49_2=$v_0.get_attributeName();this.$u_2=$v_0.get_entity().get_entityName();this.$1C_2=0;this.$54_2=$v_0;this.$A_2=$v_0.get_type()}else{var $v_1=expression;this.$2N_2=this.$Eb_2($v_1);this.$u_2=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName;this.$1C_2=1;this.$4Y_2=$v_1;this.get_$4J_2().set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeType(this.$2N_2));this.$A_2=this.get_$4J_2().get_type()}};Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel.prototype={get_expression:function(){return !this.$1C_2?this.get_$3d_2():this.get_$4J_2()},set_expression:function(value){if(Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression.isInstanceOfType(value))this.$54_2=value;else if(Microsoft.Crm.Workflow.Expressions.MethodCallExpression.isInstanceOfType(value))this.$4Y_2=value;else throw Error.create("Unsupported Expression Type");return value},get_selectedAttribute:function(){return this.$49_2},set_selectedAttribute:function(value){this.$49_2=value;this.get_$3d_2().set_attributeName(this.$49_2);this.get_$3d_2().set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(this.$u_2,this.$49_2).Type);if(this.get_$3d_2().get_type()>0)this.$A_2=this.get_$3d_2().get_type();return value},get_selectedBpfAttribute:function(){return this.$2N_2},set_selectedBpfAttribute:function(value){this.$2N_2=value;if(this.get_$4J_2().getParameters().length<2){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().generateMethodCallParameters(this.$2N_2,this.get_$3d_2().get_workflow());this.$4Y_2=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression(this.get_$3d_2().get_workflow(),23,$v_0)}this.get_$4J_2().getParameters()[0]='"'+this.$2N_2+'"';this.get_$4J_2().set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeType(this.$2N_2));this.$A_2=this.get_$4J_2().get_type();return value},get_selectedEntity:function(){return this.$u_2},set_selectedEntity:function(value){this.$u_2=value;return value},get_operandWorkflowAttributeType:function(){return this.$A_2},get_$3d_2:function(){if(!this.$54_2)this.$54_2=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.get_$4J_2().get_workflow()),this.$49_2);return this.$54_2},get_$4J_2:function(){if(!this.$4Y_2){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().generateMethodCallParameters(this.$2N_2,this.get_$3d_2().get_workflow());this.$4Y_2=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression(this.get_$3d_2().get_workflow(),23,$v_0)}return this.$4Y_2},get_displayValue:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getRelatedAttributeLocalizedName(this.$u_2,this.$49_2);return !this.$1C_2?$v_0:Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeLocalizedName(this.$2N_2)},get_selectedType:function(){return this.$1C_2},set_selectedType:function(value){this.$1C_2=value;return value},getEditViewModel:function(){if(IsNull(this.$2_2))this.$2_2=new Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel(this);return this.$2_2},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_2)&&this.$2_2.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$Eb_2:function($p0){if(!IsNull($p0)&&!IsNull($p0.getParameters())&&!IsNull($p0.getParameters()[0])){var $v_0=$p0.getParameters()[0];if(String.isInstanceOfType($v_0)&&!isNullOrEmptyString($v_0))$v_0=Mscrm.Utilities.trim($v_0,['"']);return $v_0}throw Error.create("Unsupported Bpf Attribute Enum")},$49_2:null,$u_2:null,$A_2:0,$2_2:null,$2N_2:null,$1C_2:0,$54_2:null,$4Y_2:null};Mscrm.BusinessRules.ViewModels.BpfStageRightOperandViewModel=function($p0,$p1,$p2){Mscrm.BusinessRules.ViewModels.BpfStageRightOperandViewModel.initializeBase(this,[$p0,$p1,$p2])};Mscrm.BusinessRules.ViewModels.BpfStageRightOperandViewModel.prototype={initializeAndGetEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel.initializeBase(this,[$p0]);this.$1J_3=-1};Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel.prototype={get_selectedBpfProcessIndex:function(){return this.$1J_3},set_selectedBpfProcessIndex:function($p0){this.$1J_3=$p0;return $p0},$1J_3:0};Mscrm.BusinessRules.ViewModels.NullOperandViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.NullOperandViewModel.initializeBase(this,[$p0,$p1]);this.$S_2=$p0};Mscrm.BusinessRules.ViewModels.NullOperandViewModel.prototype={get_displayValue:function(){return ""},get_values:function(){return this.$S_2.$w_1},set_values:function($p0){this.$S_2.$w_1=$p0;return $p0},getEditViewModel:function(){if(IsNull(this.$2_2))this.$2_2=new Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel(this);return this.$2_2},get_operandWorkflowAttributeType:function(){return this.$S_2.get_type()},setAttributeType:function($p0){this.$S_2.set_type($p0)},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_2)&&this.$2_2.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_valueExpressions:function(){return this.$S_2.$1s_1},set_valueExpressions:function($p0){this.$S_2.$1s_1=$p0;return $p0},$S_2:null,$2_2:null};Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel=function(rightExpressions,id,rightOperandMetadata){Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel.initializeBase(this,[rightExpressions,id,rightOperandMetadata]);this.$DU_2(rightExpressions)};Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel.prototype={$2U_2:null,get_innerValueOperand:function(){return this.$2U_2},set_innerValueOperand:function(value){this.$2U_2=value;return value},get_displayValue:function(){if(this.$5_1===4){var $v_0=!IsNull(this.$2U_2)?this.$2U_2.get_displayValue():null,$v_1=!IsNull(this.$a_1)?this.$a_1.get_displayValue():null;if($v_0&&$v_1)return $v_0}else return !IsNull(this.$a_1)?this.$a_1.get_displayValue():null;return null},$DU_2:function($p0){if(!$p0||!$p0.get_count()){this.$5_1=-1;return}if(Microsoft.Crm.Workflow.Expressions.LookupExpression.isInstanceOfType($p0.get_item(0))){this.$5_1=1;var $v_0=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();this.$a_1=new Mscrm.BusinessRules.ViewModels.ValueOperandViewModel(new Mscrm.BusinessRules.MultiValueExpression($p0,$v_0,this.$1m_1),String.format("{0}_{1}",this.$H_1,"primitiveEx"));return}if(Microsoft.Crm.Workflow.Expressions.MethodCallExpression.isInstanceOfType($p0.get_item(0))){this.$5_1=2;this.$a_1=new Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel(Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($p0.get_item(0)),String.format("{0}_{1}",this.$H_1,"subExpression"))}if(Microsoft.Crm.Workflow.Expressions.BinaryExpression.isInstanceOfType($p0.get_item(0))&&this.$1m_1.LabelName==="BpfProcess"){this.$5_1=4;var $v_1=Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($p0.get_item(0)),$v_2=new Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel($v_1,String.format("{0}_{1}",this.$H_1,"subExpression"));$v_2.$L_1.set_operation($v_1.get_expressionOperator().toString());this.$a_1=$v_2}},initializeAndGetEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel.prototype={confirm:function(){if(IsNull(this.$z_2)){this.$0_1.$a_1=null;return}this.$z_2.confirm();this.$0_1.$a_1=this.$z_2.get_viewModel();this.$0_1.$5_1=this.$2A_2;if(this.$2A_2===4){this.getInnerOperandOfType(1).confirm();if(!IsNull(this.getInnerOperandOfType(1)))this.$0_1.$2U_2=this.getInnerOperandOfType(1).get_viewModel()}this.$0_1.confirm()}};Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel.initializeBase(this);this.$0_1=$p0;this.$4_1=$p0.get_leftOperand().get_editViewModel();this.$L_1=$p0.get_expressionOperator().get_editViewModel();this.$3_1=$p0.get_rightOperand().get_editViewModel();this.$5_1=$p0.get_operandType().get_editViewModel();this.$A_1=$p0.get_operandWorkflowAttributeType()};Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel.prototype={get_leftOperand:function(){return this.$4_1},set_leftOperand:function($p0){this.$4_1=$p0;return $p0},get_expressionOperator:function(){return this.$L_1},set_expressionOperator:function($p0){this.$L_1=$p0;return $p0},get_operandType:function(){return this.$5_1},set_operandType:function($p0){this.$5_1=$p0;return $p0},get_rightOperand:function(){return this.$3_1},set_rightOperand:function($p0){this.$3_1=$p0;return $p0},get_operandWorkflowAttributeType:function(){return this.$A_1},set_operandWorkflowAttributeType:function($p0){this.$A_1=$p0;return $p0},get_currentEditExpression:function(){throw Mscrm.BusinessRules.SharedMethods.createException("Not Implemented")},get_viewModel:function(){return this.$0_1},confirm:function(){this.$4_1.confirm();this.$L_1.confirm();this.$5_1.confirm();this.$3_1.confirm();this.$0_1.confirm()},discard:function(){this.$4_1.discard();this.$L_1.discard();this.$5_1.discard();this.$3_1.discard()},dispose:function(){if(this.$9_0)return;this.$s_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_stateManager:function(){return this.$s_1},set_stateManager:function($p0){this.$s_1=$p0;return $p0},$4_1:null,$L_1:null,$5_1:null,$3_1:null,$s_1:null,$0_1:null,$A_1:0};Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel.initializeBase(this,[$p0]);this.$s_1=new Mscrm.BusinessRules.ViewModels.ConditionExpressionStateManager(this);this.$s_1.initialize();var $v_0=$p0;if($v_0)this.$y_2=$v_0.$y_2.get_editViewModel()};Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel.prototype={get_andOrOperator:function(){return this.$y_2},set_andOrOperator:function($p0){this.$y_2=$p0;return $p0},confirm:function(){this.$y_2.confirm();Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel.prototype.confirm.call(this)},discard:function(){this.$y_2.discard();Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel.prototype.discard.call(this)},$y_2:null};Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel.initializeBase(this,[$p0]);this.$4_1.get_innerOperand().set_useAttributeFiltering(true);this.$s_1=new Mscrm.BusinessRules.ViewModels.ArithmeticExpressionStateManager(this);this.$s_1.initialize()};Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel.prototype={get_currentEditExpression:function(){return Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.$9B(this.$0_1.get_expression().get_workflow(),Number.parseInvariant(this.$L_1.get_operation()),this.$4_1.get_innerOperand().get_currentEditExpression(),this.$3_1.get_currentInnerOperand().get_currentEditExpression())}};Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel.initializeBase(this,[$p0]);this.$s_1=new Mscrm.BusinessRules.ViewModels.BpfStageExpressionStateManager(this);this.$s_1.initialize()};Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel.prototype={get_currentEditExpression:function(){return null}};Mscrm.BusinessRules.ViewModels.ExpressionViewModel=function(expression,expressionId){Mscrm.BusinessRules.ViewModels.ExpressionViewModel.initializeBase(this);this.$H_1=expressionId;this.$S_1=expression.get_expression()};Mscrm.BusinessRules.ViewModels.ExpressionViewModel.prototype={get_leftOperand:function(){return this.$4_1},set_leftOperand:function(value){this.$4_1=value;return value},get_expressionOperator:function(){return this.$L_1},set_expressionOperator:function(value){this.$L_1=value;return value},get_operandType:function(){return this.$5_1},set_operandType:function(value){this.$5_1=value;return value},get_rightOperand:function(){return this.$3_1},set_rightOperand:function(value){this.$3_1=value;return value},get_expressionPrefix:function(){return ""},get_id:function(){return this.$H_1},get_expression:function(){return this.$S_1},set_expression:function(value){this.$S_1=value;return value},get_displayValue:function(){return ""},get_operandWorkflowAttributeType:function(){return this.$A_1},set_operandWorkflowAttributeType:function(value){this.$A_1=value;return value},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=this.initializeEditViewModel();return this.$2_1},confirm:function(){var $v_0=this.$4_1.get_expression(),$v_1=this.$3_1.get_expressions(),$v_2=parseInt(this.$L_1.get_operation());if(!IsNull(this.$3_1.get_expression())){if(this.$3_1.get_innerOperand().get_operandWorkflowAttributeType()===21&&Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel.isInstanceOfType(this.$3_1)&&!IsNull(this.$3_1.$2U_2)){var $v_3=this.$3_1.$2U_2;$v_0=new Microsoft.Crm.Workflow.Expressions.BinaryExpression(this.$S_1.get_workflow(),$v_2,$v_0,$v_3.get_valueExpressions());this.$S_1=new Microsoft.Crm.Workflow.Expressions.BinaryExpression(this.$S_1.get_workflow(),2,$v_0,$v_1)}else this.$S_1=new Microsoft.Crm.Workflow.Expressions.BinaryExpression(this.$S_1.get_workflow(),$v_2,$v_0,$v_1);return}this.$S_1=new Microsoft.Crm.Workflow.Expressions.UnaryExpression(this.$S_1.get_workflow(),$v_2,$v_0)},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_1)&&this.$2_1.dispose();this.$4_1.dispose();this.$L_1.dispose();this.$3_1.dispose();this.$5_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$4_1:null,$L_1:null,$3_1:null,$5_1:null,$H_1:null,$2_1:null,$S_1:null,$A_1:0};Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel=function(logicalOperator,expression,expressionId,parentViewModel){Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.initializeBase(this,[expression,expressionId]);this.$E_0=parentViewModel;this.$4_1=new Mscrm.BusinessRules.ViewModels.LeftOperandViewModel(expression.get_leftOperand(),String.format("{0}_leftInner",this.$H_1));this.$L_1=new Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel(expression.get_expressionOperator(),String.format("{0}_operator",this.$H_1));var $v_0=Number.parseInvariant(this.$L_1.get_operation()),$v_1=this.$4_1.get_innerOperand(),$v_2;if(Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel.isInstanceOfType(this.$4_1.get_innerOperand())&&this.$4_1.get_innerOperand().$1C_2===1){$v_2=(new Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator($v_1.get_selectedEntity(),this.$4_1.get_innerOperand().$2N_2,$v_0)).getRightOperandMetadata();if(this.$4_1.get_innerOperand().$2N_2==="BpfProcess")$v_2.LabelName="BpfProcess"}else $v_2=(new Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator($v_1.get_selectedEntity(),$v_1.get_selectedAttribute(),$v_0)).getRightOperandMetadata();this.$3_1=new Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel(expression.get_rightOperands(),String.format("{0}_rightInner",this.$H_1),$v_2);Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression.isInstanceOfType(expression.get_leftOperand())&&this.$3_1.set_targetEntityName(expression.get_leftOperand().get_entity().get_entityName());this.$5_1=new Mscrm.BusinessRules.ViewModels.OperandTypeViewModel(this.$3_1.get_rightOperandType(),String.format("{0}_operandType",this.$H_1));this.$A_1=0;this.$y_2=new Mscrm.BusinessRules.ViewModels.AndOrViewModel(this.get_conditionBranchDisplayMode(),logicalOperator,this.$H_1);if(this.$4_1.get_innerOperand().get_operandWorkflowAttributeType()===20)this.checkStageCategoryDeleted();else this.$4_1.get_innerOperand().get_operandWorkflowAttributeType()===19&&this.checkInvalidProcess()};Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.getConditionBranchDisplayModeDisplayName=function(conditionBranchMode){var $v_0=window.LOCID_PBLEXPRESSION_IF;if(Mscrm.BusinessRules.BusinessRuleInitializer.$x===3||Mscrm.BusinessRules.BusinessRuleInitializer.$x===4)if(!conditionBranchMode)$v_0=window.LOCID_PBLEXPRESSION_IF;else $v_0=window.LOCID_PBLEXPRESSION_ELSEIF;return $v_0};Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.getLogicalAndOrDisplayName=function(logicalOperator){var $v_0=0,$v_1=Mscrm.Utilities.parseInt(logicalOperator,$v_0)===$v_0?window.LOCID_PBLEXPRESSION_AND:window.LOCID_PBLEXPRESSION_OR;return $v_1};Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.prototype={checkInvalidProcess:function(){var $v_0=this.$3_1.get_expressions();if($v_0.length!==1)return true;else if(!Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType($v_0[0])||$v_0[0].get_type()!==19)return !Microsoft.Crm.Workflow.Expressions.BinaryExpression.isInstanceOfType($v_0[0]);for(var $v_1=false,$v_2=$v_0[0].get_value(),$v_3=0;$v_3<Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Ids.length;$v_3++)if(Mscrm.Utilities.compareGuids($v_2,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Ids[$v_3])){$v_1=true;break}if(!$v_1){this.set_showWarning(true);return true}this.set_showWarning(false);return false},checkStageCategoryDeleted:function(){for(var $v_0=this.$3_1.get_expressions(),$v_1=0;$v_1<$v_0.length;$v_1++){for(var $v_2=false,$v_3=$v_0[$v_1].get_value(),$v_4=String.isInstanceOfType($v_3)?Number.parseInvariant($v_3):$v_3,$v_5=0;$v_5<Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.StageCategories.Options.length&&!$v_2;$v_5++)if($v_4===Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.StageCategories.Options[$v_5].Value)$v_2=true;if(!$v_2){this.set_showWarning(true);return true}}this.set_showWarning(false);return false},get_expressionPrefix:function(){var $v_0="";if(this.$3Q_2)$v_0=Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.getConditionBranchDisplayModeDisplayName(this.get_conditionBranchDisplayMode());else $v_0=Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.getLogicalAndOrDisplayName(this.$y_2.get_logicalOperator());return $v_0},get_andOrOperator:function(){return this.$y_2},set_andOrOperator:function(value){this.$y_2=value;return value},get_isFirstCondition:function(){return this.$3Q_2},set_isFirstCondition:function(value){this.$3Q_2=value;return value},get_conditionBranchDisplayMode:function(){return this.$E_0.get_conditionBranchDisplayMode()},set_conditionBranchDisplayMode:function(value){this.$E_0.set_conditionBranchDisplayMode(value);return value},initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel(this)},checkIsStageConditionValid:function(selectedBpfIndex){Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel.isInstanceOfType(this.$3_1.get_innerOperand())&&this.set_showWarning(this.$3_1.get_innerOperand().isBpfStageInvalid(selectedBpfIndex))},dispose:function(){this.$y_2.dispose();Mscrm.BusinessRules.ViewModels.ExpressionViewModel.prototype.dispose.call(this)},$4f_2:false,get_showWarning:function(){return this.$4f_2},set_showWarning:function(value){this.$4f_2=value;this.raisePropertyChanged("ShowWarningProperty");return value},$5p_2:false,get_alwaysShowWarning:function(){return this.$5p_2},set_alwaysShowWarning:function(value){this.$5p_2=value;return value},$3Q_2:false,$y_2:null};Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.initializeBase(this,[$p0,$p1]);this.$4_1=new Mscrm.BusinessRules.ViewModels.LeftOperandViewModel($p0.get_leftOperand(),String.format("{0}_leftInner",this.$H_1));this.$L_1=new Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel($p0.get_expressionOperator(),String.format("{0}_operator",this.$H_1));var $v_0=Number.parseInvariant(this.$L_1.get_operation()),$v_1=this.$4_1.get_innerOperand(),$v_2=(new Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator($v_1.get_selectedEntity(),$v_1.get_selectedAttribute(),$v_0)).getRightOperandMetadata();this.$3_1=new Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandViewModel($p0.get_rightOperands(),String.format("{0}_rightInner",this.$H_1),$v_2);this.$5_1=new Mscrm.BusinessRules.ViewModels.OperandTypeViewModel(this.$3_1.get_rightOperandType(),String.format("{0}_operandType",this.$H_1));this.$A_1=this.$S_1.get_type()};Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.$9B=function($p0,$p1,$p2,$p3){var $v_0=new Array(3);$v_0[0]=$p1;$v_0[1]=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression($p0,0,[$p2]);$v_0[2]=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression($p0,0,[$p3]);return new Microsoft.Crm.Workflow.Expressions.MethodCallExpression($p0,3,$v_0)};Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.prototype={get_displayValue:function(){return String.format(window.LOCID_PBLEXPRESSION_ARITFORMAT,this.$4_1.get_displayValue(),this.$L_1.get_displayName(),this.$3_1.get_displayValue())},confirm:function(){var $v_0=this.$4_1.get_expression(),$v_1=this.$3_1.get_expressions()[0],$v_2=parseInt(this.$L_1.get_operation());this.$S_1=Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.$9B(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_2,$v_0,$v_1)},initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.ExpressionConverter=function(){};Mscrm.BusinessRules.ViewModels.ExpressionConverter.prototype={convertToEditorExpressionFormat:function($p0){this.$3z_0=null;this.$o_0=Mscrm.BusinessRules.SharedMethods.getList(Microsoft.Crm.Workflow.Expressions.ExpressionBase);$p0.accept(this);return this.$o_0},visitBinaryExpression:function($p0){this.$3z_0=$p0;$p0.get_leftOperand().accept(this);$p0.get_rightOperands().get_count()>0&&$p0.get_rightOperands().get_item(0).accept(this)},visitUnaryExpression:function($p0){this.$3z_0=$p0;$p0.get_operand().accept(this)},visitEntityAttributeExpression:function($p0){!this.$o_0.contains(this.$3z_0)&&this.$o_0.add(this.$3z_0)},visitPrimitiveExpression:function($p0){!this.$o_0.contains(this.$3z_0)&&this.$o_0.add(this.$3z_0)},visitLookupExpression:function($p0){},visitTimeSpanExpression:function($p0){},visitMethodCallExpression:function($p0){},visitNullExpression:function($p0){},visitPropertySpecification:function($p0){},visitEntitySpecification:function($p0){},$3z_0:null,$o_0:null};Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel.initializeBase(this,[$p0,$p1]);this.$4_1=new Mscrm.BusinessRules.ViewModels.LeftOperandViewModel($p0.get_leftOperand(),String.format("{0}_leftInner",this.$H_1));this.$L_1=new Mscrm.BusinessRules.ViewModels.BpfStageOperatorViewModel(String.format("{0}_operator",this.$H_1));this.$3_1=new Mscrm.BusinessRules.ViewModels.BpfStageRightOperandViewModel($p0.get_rightOperands(),String.format("{0}_rightInner",this.$H_1),{});this.$5_1=new Mscrm.BusinessRules.ViewModels.OperandTypeViewModel(this.$3_1.get_rightOperandType(),String.format("{0}_operandType",this.$H_1));this.$A_1=21};Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel.prototype={$5H_2:false,get_displayValue:function(){return String.format(window.LOCID_PBLEXPRESSION_ARITFORMAT,this.$4_1.get_displayValue(),this.$L_1.get_displayName(),this.$3_1.get_displayValue())},get_isStageDeleted:function(){return this.$5H_2},set_isStageDeleted:function($p0){this.$5H_2=$p0;return $p0},initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel(this)},isBpfStageInvalid:function($p0){for(var $v_0=Mscrm.BusinessRules.SharedMethods.getList(String),$v_6=0;$v_6<this.$3_1.get_expressions().length;$v_6++){var $v_7=this.$3_1.get_expressions()[$v_6].get_value().toString();$v_0.add($v_7)}var $v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows,$v_2=$v_1.Ids[$p0],$v_3;if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages||!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[$p0])$v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getProcessStageInfoAndCache($v_2,$p0);else $v_3=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[$p0];for(var $v_4=$v_3.Ids,$v_5=Mscrm.BusinessRules.SharedMethods.getList(String),$$arr_9=$v_4,$$len_A=$$arr_9.length,$$idx_B=0;$$idx_B<$$len_A;++$$idx_B){var $v_8=$$arr_9[$$idx_B];$v_5.add($v_8)}for(var $v_9=0;$v_9<$v_0.get_count();$v_9++)if(!$v_5.contains($v_0.get_item($v_9))){this.$5H_2=true;break}return this.$5H_2}};Mscrm.BusinessRules.ViewModels.LeftOperandViewModel=function(leftExpression,id){Mscrm.BusinessRules.ViewModels.LeftOperandViewModel.initializeBase(this);this.$b_1=Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.$3B(leftExpression,id)};Mscrm.BusinessRules.ViewModels.LeftOperandViewModel.prototype={get_id:function(){return this.$b_1.get_id()},get_innerOperand:function(){return this.$b_1},get_operandWorkflowAttributeType:function(){return !this.$b_1?-1:this.$b_1.get_operandWorkflowAttributeType()},get_expression:function(){return this.$b_1.get_expression()},get_displayValue:function(){return this.$b_1.get_displayValue()},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=new Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel(this);return this.$2_1},confirm:function(){this.$b_1.confirm()},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_1)&&this.$2_1.dispose();this.$b_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$b_1:null,$2_1:null};Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel=function($p0){this.$$d_$Dj_2=Function.createDelegate(this,this.$Dj_2);Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel.initializeBase(this,[$p0]);this.$b_2=$p0.get_innerOperand().get_editViewModel();this.$b_2.add_propertyChanged(this.$$d_$Dj_2)};Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel.prototype={get_innerOperand:function(){return this.$b_2},get_operandWorkflowAttributeType:function(){return !this.$b_2?-1:this.$b_2.get_operandWorkflowAttributeType()},confirm:function(){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype.confirm.call(this);!IsNull(this.$b_2)&&this.$b_2.confirm();this.$0_1.confirm()},discard:function(){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype.discard.call(this);!IsNull(this.$b_2)&&this.$b_2.discard()},dispose:function(){if(this.$9_0)return;this.$b_2.remove_propertyChanged(this.$$d_$Dj_2);Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$Dj_2:function($p0,$p1){($p1.get_propertyName()==="AttributeSelectedValue"||$p1.get_propertyName()==="AttributeSelectedValue")&&this.raisePropertyChanged("OperandChangedProperty")},$b_2:null};Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel.initializeBase(this,[$p0,$p1])};Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel.prototype={get_displayName:function(){return ""},initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.NullOperatorEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.NullOperatorEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.NullOperatorEditViewModel.initializeBase(this,[$p0]);this.$4b_1=[]};Mscrm.BusinessRules.ViewModels.OperandType=function(){};Mscrm.BusinessRules.ViewModels.OperandTypeViewModel=function(rightOperandType,id){Mscrm.BusinessRules.ViewModels.OperandTypeViewModel.initializeBase(this);this.$H_1=id;this.$5_1=rightOperandType};Mscrm.BusinessRules.ViewModels.OperandTypeViewModel.prototype={get_operandType:function(){return this.$5_1.toString()},set_operandType:function(value){this.$5_1=Number.parseInvariant(value);return value},get_id:function(){return this.$H_1},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=new Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel(this);return this.$2_1},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_1)&&this.$2_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$5_1:0,$H_1:null,$2_1:null};Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel.initializeBase(this);this.$0_1=$p0;this.$5_1=Number.parseInvariant($p0.get_operandType());this.$7U_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OperandType};Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel.prototype={get_operandType:function(){return this.getOperandTypeDelegate()},set_operandType:function($p0){this.setOperandTypeDelegate($p0);return $p0},get_operandTypes:function(){return this.$7U_1},set_operandTypes:function($p0){this.$7U_1=$p0;return $p0},get_viewModel:function(){return this.$0_1},get_filteredOperandTypes:function(){return this.getFilteredOperandTypesDelegate()},set_filteredOperandTypes:function($p0){this.setFilteredOperandTypesDelegate($p0);return $p0},getOperandTypeDelegate:function(){return this.$5_1.toString()},setOperandTypeDelegate:function($p0){this.$5_1=Number.parseInvariant($p0);this.raisePropertyChanged("OperandTypeValue")},getFilteredOperandTypesDelegate:function(){return this.$8R_1},setFilteredOperandTypesDelegate:function($p0){this.$8R_1=$p0;this.raisePropertyChanged("FilteredOperandTypeList")},confirm:function(){this.$0_1.set_operandType(this.$5_1.toString())},discard:function(){this.set_operandType(this.$0_1.get_operandType())},$7U_1:null,$8R_1:null,$5_1:0,$0_1:null};Mscrm.BusinessRules.ViewModels.OperandEditViewModel=function(viewModel){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.initializeBase(this);this.$0_1=viewModel;this.$1h_1=viewModel.get_operandWorkflowAttributeType()};Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype={get_viewModel:function(){return this.$0_1},get_currentEditExpression:function(){throw Mscrm.BusinessRules.SharedMethods.createException("Not Implemented")},get_operandWorkflowAttributeType:function(){return this.$1h_1},set_operandWorkflowAttributeType:function(value){this.$1h_1=value;return value},confirm:function(){},discard:function(){},$0_1:null,$1h_1:0};Mscrm.BusinessRules.ViewModels.OperandViewModel=function(expression,id){Mscrm.BusinessRules.ViewModels.OperandViewModel.initializeBase(this);this.$S_1=expression;this.$H_1=id};Mscrm.BusinessRules.ViewModels.OperandViewModel.prototype={get_expression:function(){return this.$S_1},set_expression:function(value){this.$S_1=value;return value},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=this.getEditViewModel();return this.$2_1},get_id:function(){return this.$H_1},confirm:function(){},$S_1:null,$2_1:null,$H_1:null};Mscrm.BusinessRules.ViewModels.OperandViewModelFactory=function(){};Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.$3B=function($p0,$p1){if(Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression.isInstanceOfType($p0))if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$9R())return new Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel($p0,$p1,Mscrm.BusinessRules.BusinessRuleInitializer.get_$24());else if(!Mscrm.BusinessRules.BusinessRuleInitializer.$x&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.BPFBusinessRuleConditions")&&Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.IsBusinessProcessEnabled)return new Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel($p0,$p1);else return new Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel($p0,$p1);if(Microsoft.Crm.Workflow.Expressions.MethodCallExpression.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel($p0,$p1);if(Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.ValueOperandViewModel($p0,$p1);throw Error.create("Unsupported Exception")};Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase=function($p0){Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase.initializeBase(this);this.$0_1=$p0;this.$3l_1=Number.parseInvariant($p0.get_operation())};Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase.prototype={get_operators:function(){return this.$4b_1},set_operators:function($p0){this.$4b_1=$p0;return $p0},get_filteredOperators:function(){return this.getFilteredOperatorsDelegate()},set_filteredOperators:function($p0){this.setFilteredOperatorsDelegate($p0);return $p0},get_operation:function(){return this.getOperationDelegate()},set_operation:function($p0){this.setOperationDelegate($p0);return $p0},get_viewModel:function(){return this.$0_1},set_viewModel:function($p0){this.$0_1=$p0;return $p0},confirm:function(){this.$0_1.set_operation(this.get_operation())},discard:function(){this.set_operation(this.$0_1.get_operation())},getOperationDelegate:function(){return this.$3l_1.toString()},setOperationDelegate:function($p0){this.$3l_1=Number.parseInvariant($p0);this.raisePropertyChanged("OperatorProperty")},getFilteredOperatorsDelegate:function(){return this.$8T_1},setFilteredOperatorsDelegate:function($p0){this.$8T_1=$p0;this.raisePropertyChanged("FilteredOperatorListProperty")},$3l_1:0,$4b_1:null,$8T_1:null,$0_1:null};Mscrm.BusinessRules.ViewModels.ConditionOperatorEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ConditionOperatorEditViewModel.initializeBase(this,[$p0]);this.$4b_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ConditionOperators};Mscrm.BusinessRules.ViewModels.ArithmeticOperatorEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ArithmeticOperatorEditViewModel.initializeBase(this,[$p0]);this.$4b_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ArithmeticOperators};Mscrm.BusinessRules.ViewModels.BpfStageOperatorEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageOperatorEditViewModel.initializeBase(this,[$p0]);this.$4b_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ConditionOperators};Mscrm.BusinessRules.ViewModels.OperatorViewModelBase=function(conditionOperator,id){Mscrm.BusinessRules.ViewModels.OperatorViewModelBase.initializeBase(this);this.$3l_1=conditionOperator;this.$H_1=id};Mscrm.BusinessRules.ViewModels.OperatorViewModelBase.prototype={get_id:function(){return this.$H_1},get_operation:function(){return this.$3l_1.toString()},set_operation:function(value){this.$3l_1=Number.parseInvariant(value);return value},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=this.initializeEditViewModel();return this.$2_1},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_1)&&this.$2_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$3l_1:0,$H_1:null,$2_1:null};Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel=function(conditionOperator,id){Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.initializeBase(this,[conditionOperator,id])};Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.get_$Aq=function(){if(IsNull(Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.$33)){Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.$33={};for(var $$arr_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ConditionOperators,$$len_1=$$arr_0.length,$$idx_2=0;$$idx_2<$$len_1;++$$idx_2){var $v_0=$$arr_0[$$idx_2];Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.$33[$v_0.Value.toString()]=$v_0.Label}}return Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.$33};Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.prototype={get_displayName:function(){return Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.get_$Aq()[this.get_operation()].toLowerCase()},initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.ConditionOperatorEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.initializeBase(this,[$p0,$p1])};Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.get_$Aq=function(){if(IsNull(Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.$33)){Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.$33={};for(var $$arr_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ArithmeticOperators,$$len_1=$$arr_0.length,$$idx_2=0;$$idx_2<$$len_1;++$$idx_2){var $v_0=$$arr_0[$$idx_2];Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.$33[$v_0.Value.toString()]=$v_0.Label}}return Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.$33};Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.prototype={get_displayName:function(){return Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.get_$Aq()[this.get_operation()].toLowerCase()},initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.ArithmeticOperatorEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.BpfStageOperatorViewModel=function($p0){Mscrm.BusinessRules.ViewModels.BpfStageOperatorViewModel.initializeBase(this,[41,$p0])};Mscrm.BusinessRules.ViewModels.BpfStageOperatorViewModel.prototype={initializeEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.BpfStageOperatorEditViewModel(this)},get_displayName:function(){for(var $$arr_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ConditionOperators,$$len_1=$$arr_0.length,$$idx_2=0;$$idx_2<$$len_1;++$$idx_2){var $v_0=$$arr_0[$$idx_2];if($v_0.Value.toString()===this.get_operation())return $v_0.Label.toLowerCase()}return ""}};Mscrm.BusinessRules.ViewModels.RightOperandViewModel=function(rightExpressions,id,rightOperandMetadata){Mscrm.BusinessRules.ViewModels.RightOperandViewModel.initializeBase(this);this.$H_1=id;this.$1m_1=rightOperandMetadata;if(!IsNull(rightExpressions)){this.$o_1=new Array(rightExpressions.get_count());for(var $v_0=0;$v_0<rightExpressions.get_count();$v_0++)this.$o_1[$v_0]=rightExpressions.get_item($v_0)}this.$Dg_1(rightExpressions)};Mscrm.BusinessRules.ViewModels.RightOperandViewModel.prototype={get_innerOperand:function(){return this.$a_1},set_innerOperand:function(value){this.$a_1=value;return value},get_operandWorkflowAttributeType:function(){return !this.$a_1?-1:this.$a_1.get_operandWorkflowAttributeType()},get_rightOperandType:function(){return this.$5_1},set_rightOperandType:function(value){this.$5_1=value;return value},get_expression:function(){return !IsNull(this.$a_1)?this.$a_1.get_expression():null},get_displayValue:function(){return !IsNull(this.$a_1)?this.$a_1.get_displayValue():null},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=this.initializeAndGetEditViewModel();return this.$2_1},get_id:function(){return this.$H_1},get_expressions:function(){return this.$o_1},get_rightOperandMetadata:function(){return this.$1m_1},set_rightOperandMetadata:function(value){this.$1m_1=value;return value},confirm:function(){if(IsNull(this.$a_1))this.$o_1=null;switch(this.$5_1){case 1:this.$o_1=this.$a_1.get_valueExpressions();break;case 3:this.$o_1=this.$a_1.get_valueExpressions();break;default:this.$a_1.confirm();this.$o_1=[this.$a_1.get_expression()];break}},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_1)&&this.$2_1.dispose();!IsNull(this.$a_1)&&this.$a_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_targetEntityName:function(){return this.$8m_1},set_targetEntityName:function(value){this.$8m_1=value;return value},$Dg_1:function($p0){if(!$p0||!$p0.get_count()){this.$5_1=-1;return}if(Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression.isInstanceOfType($p0.get_item(0))){this.$5_1=0;this.$a_1=Mscrm.BusinessRules.BusinessRuleInitializer.get_$9R()?new Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel($p0.get_item(0),String.format("{0}_{1}",this.$H_1,"attributeEx"),Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()):new Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel($p0.get_item(0),String.format("{0}_{1}",this.$H_1,"attributeEx"));this.$a_1.get_editViewModel().set_useAttributeFiltering(true);return}if(Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType($p0.get_item(0))){var $v_0=$p0.get_item(0).get_value(),$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();if(IsNull($v_0)&&!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){this.$5_1=3;this.$a_1=new Mscrm.BusinessRules.ViewModels.NullOperandViewModel(new Mscrm.BusinessRules.MultiValueExpression($p0,$v_1,this.$1m_1),String.format("{0}_{1}",this.$H_1,"primitiveEx"))}else{this.$5_1=1;this.$a_1=new Mscrm.BusinessRules.ViewModels.ValueOperandViewModel(new Mscrm.BusinessRules.MultiValueExpression($p0,$v_1,this.$1m_1),String.format("{0}_{1}",this.$H_1,"primitiveEx"))}return}},$a_1:null,$5_1:0,$H_1:null,$2_1:null,$o_1:null,$1m_1:null,$8m_1:null};Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel=function(viewModel){Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.initializeBase(this,[viewModel]);if(Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel.isInstanceOfType(viewModel)&&!IsNull(viewModel.get_rightOperandMetadata())&&viewModel.get_rightOperandMetadata().LabelName==="BpfProcess"){var $v_0=viewModel.$a_1.get_editViewModel();Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType($v_0)&&IsNull($v_0.get_values()[0])&&Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Options.length>0&&$v_0.setValuesDelegate([Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Options[0]])}this.$2e_2={};this.$z_2=!IsNull(viewModel.get_innerOperand())?viewModel.get_innerOperand().get_editViewModel():null;if(Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel.isInstanceOfType(viewModel)&&Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel.isInstanceOfType(this.$z_2)){var $v_1=this.$z_2,$v_2=viewModel.$2U_2,$v_3=$v_2.get_values()[0].Value;$v_1.$s_1.$1J_1=$v_3;$v_1.$3_1.$1J_3=$v_3;$v_2.getEditViewModel().$2a_2=Mscrm.BusinessRules.ValueExpressionAdapterFactory.getValueExpression($v_2.get_valueExpressions()[0],null);this.$2e_2["1"]=$v_2}this.$2A_2=viewModel.get_rightOperandType();this.$1m_2=viewModel.get_rightOperandMetadata();this.$2e_2[this.$2A_2.toString()]=!IsNull(this.$z_2)?this.$z_2.get_viewModel():null};Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.prototype={get_currentInnerOperand:function(){return this.$z_2},set_currentInnerOperand:function(value){this.$z_2=value;this.raisePropertyChanged("OperandChangedPropertyValue");return value},prepareInnerOperand:function(operandType,attributeType,metadata){var $v_0=this.$2e_2[operandType.toString()];if(IsNull($v_0)){var $v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();switch(operandType){case 1:case 4:var $v_2=new Microsoft.Crm.Workflow.Expressions.ExpressionCollection,$v_3=null;if(attributeType===10){var $v_A=metadata;if(!IsNull($v_A)){var $v_B=this.prepareValueInnerOperand(attributeType);if(!IsNull($v_B)){if(!$v_A.Options.length&&Mscrm.BusinessRules.Views.ViewHelper.getDefaultOptionValue().length>0)$v_B.set_value(Mscrm.BusinessRules.Views.ViewHelper.getDefaultOptionValue()[0].Value);else $v_B.set_value($v_A.Options[0].Value);$v_3=$v_B}}}else $v_3=this.prepareValueInnerOperand(attributeType);$v_2.add($v_3);var $v_4=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();if(operandType===4){var $v_C=this.$CB_2(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),attributeType),$v_D=Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($v_C),$v_E=String.format("{0}_{1}",this.$0_1.get_id(),"subExpression");$v_0=new Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel($v_D,$v_E)}else{$v_0=new Mscrm.BusinessRules.ViewModels.ValueOperandViewModel(new Mscrm.BusinessRules.MultiValueExpression($v_2,$v_4,metadata),String.format("{0}_{1}",this.$0_1.get_id(),"primitiveEx"));$v_0.set_parent(this)}break;case 0:$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();var $v_5=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity($v_1),$v_6=this.$0_1.get_targetEntityName();!IsNull($v_6)&&$v_5.set_entityName($v_6);var $v_7=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_5,"");$v_0=Mscrm.BusinessRules.BusinessRuleInitializer.get_$9R()?new Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel($v_7,String.format("{0}_{1}",this.$0_1.get_id(),"attributeEx"),Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()):new Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel($v_7,String.format("{0}_{1}",this.$0_1.get_id(),"attributeEx"));$v_0.get_editViewModel().set_useAttributeFiltering(true);break;case 3:var $v_8=new Microsoft.Crm.Workflow.Expressions.ExpressionCollection;$v_8.add(this.prepareValueInnerOperand(attributeType));var $v_9=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();$v_0=new Mscrm.BusinessRules.ViewModels.NullOperandViewModel(new Mscrm.BusinessRules.MultiValueExpression($v_8,$v_9,metadata),String.format("{0}_{1}",this.$0_1.get_id(),"primitiveEx"));break;case 2:$v_1=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep();$v_0=new Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel(Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H(this.$CC_2($v_1,attributeType)),String.format("{0}_{1}",this.$0_1.get_id(),"subExpression"));break}this.$2e_2[operandType.toString()]=$v_0}else $v_0.set_parent(this);return $v_0.get_editViewModel()},getInnerOperandOfType:function(operandType){var $v_0=this.$2e_2[operandType.toString()];if(IsNull($v_0))return null;return $v_0.get_editViewModel()},prepareValueInnerOperand:function(attributeType){return Mscrm.BusinessRules.ViewModels.DefaultValueExpressionBuilder.getDefaultValueExpression(attributeType)},$CC_2:function($p0,$p1){var $v_0=this.$0_1.get_targetEntityName(),$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex($v_0,Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getAttributesForAttributeType($p1,$v_0,null)[0]).LogicalName,$v_2=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A($v_1,$p1,$v_0),$v_3=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A($v_1,$p1,$v_0),$v_4=Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.$9B($p0,0,$v_2,$v_3);$v_4.set_type($p1);return $v_4},$CB_2:function($p0,$p1){var $v_0=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression($p0,23,["ActiveStage"]),$v_1=new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression($p0,"",$p1),$v_2=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression($p0,23,[$v_0,$v_1]);$v_2.set_type($p1);return $v_2},get_operandWorkflowAttributeType:function(){return !this.$z_2?-1:this.$z_2.get_operandWorkflowAttributeType()},get_rightOperandType:function(){return this.$2A_2},set_rightOperandType:function(value){this.$2A_2=value;return value},get_rightOperandMetadata:function(){return this.$1m_2},set_rightOperandMetadata:function(value){this.$1m_2=value;return value},confirm:function(){if(IsNull(this.$z_2)){this.$0_1.$a_1=null;return}this.$z_2.confirm();this.$0_1.$a_1=this.$z_2.get_viewModel();this.$0_1.$5_1=this.$2A_2;this.$0_1.confirm()},discard:function(){if(IsNull(this.$z_2))return;this.$z_2.discard();this.$2A_2=this.$0_1.$5_1;if(this.$Do_2(this.$2A_2,this.$z_2))this.$2e_2[this.$2A_2.toString()]=this.$z_2.get_viewModel();else{var $v_0=this.$2A_2.toString();if($v_0 in this.$2e_2)this.$z_2=this.$2e_2[$v_0].get_editViewModel()}},$Do_2:function($p0,$p1){switch($p0){case 0:if(Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.isInstanceOfType($p1))return true;break;case 1:if(Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType($p1))return true;break;case 2:if(Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel.isInstanceOfType($p1)||Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel.isInstanceOfType($p1))return true;break;case 3:if(Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.isInstanceOfType($p1))return true;break}return false},dispose:function(){if(this.$9_0)return;var $$dict_1=this.$2e_2;for(var $$key_2 in $$dict_1){var $v_0={key:$$key_2,value:$$dict_1[$$key_2]};!IsNull($v_0.value)&&$v_0.value.dispose()}Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$z_2:null,$2e_2:null,$2A_2:0,$1m_2:null};Mscrm.BusinessRules.ViewModels.SetValueRightOperandViewModel=function($p0,$p1,$p2){Mscrm.BusinessRules.ViewModels.SetValueRightOperandViewModel.initializeBase(this,[$p0,$p1,$p2])};Mscrm.BusinessRules.ViewModels.SetValueRightOperandViewModel.prototype={initializeAndGetEditViewModel:function(){return new Mscrm.BusinessRules.ViewModels.SetValueRightOperandEditViewModel(this)}};Mscrm.BusinessRules.ViewModels.SetValueRightOperandEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetValueRightOperandEditViewModel.initializeBase(this,[$p0])};Mscrm.BusinessRules.ViewModels.SetValueRightOperandEditViewModel.prototype={prepareValueInnerOperand:function($p0){switch($p0){case 0:case 10:case 13:case 12:return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),"0",$p0);default:return Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.prototype.prepareValueInnerOperand.call(this,$p0)}}};Mscrm.BusinessRules.ViewModels.AndOrViewModel=function($p0,$p1,$p2){Mscrm.BusinessRules.ViewModels.AndOrViewModel.initializeBase(this);this.$3k_1=$p0;this.$H_1=$p2;if($p1===3)this.$2h_1=1;else this.$2h_1=0};Mscrm.BusinessRules.ViewModels.AndOrViewModel.prototype={get_logicalOperator:function(){return this.$2h_1.toString()},set_logicalOperator:function($p0){this.$2h_1=Number.parseInvariant($p0);return $p0},get_id:function(){return this.$H_1},get_conditionBranchDisplayMode:function(){return this.$3k_1},set_conditionBranchDisplayMode:function($p0){this.$3k_1=$p0;return $p0},get_displayValue:function(){switch(this.$2h_1){case 0:return window.LOCID_PBLEXPRESSION_AND;default:return window.LOCID_PBLEXPRESSION_OR}},get_editViewModel:function(){if(IsNull(this.$2_1))this.$2_1=new Mscrm.BusinessRules.ViewModels.AndOrEditViewModel(this);return this.$2_1},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_1)&&this.$2_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$2h_1:0,$H_1:null,$2_1:null,$3k_1:0};Mscrm.BusinessRules.ViewModels.AndOrEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.AndOrEditViewModel.initializeBase(this);this.$0_1=$p0;this.$2h_1=Number.parseInvariant($p0.get_logicalOperator());var $v_0=new Array(2);$v_0[0]=new Mscrm.EnumOptionJsonWrapper;$v_0[0].Label=window.LOCID_PBLEXPRESSION_AND;$v_0[0].Value=0;$v_0[1]=new Mscrm.EnumOptionJsonWrapper;$v_0[1].Label=window.LOCID_PBLEXPRESSION_OR;$v_0[1].Value=1;this.$6D_1=$v_0};Mscrm.BusinessRules.ViewModels.AndOrEditViewModel.prototype={get_logicalOperator:function(){return this.getLogicalOperatorDelegate()},set_logicalOperator:function($p0){this.setLogicalOperatorDelegate($p0);return $p0},get_logicalOperatorList:function(){return this.$6D_1},set_logicalOperatorList:function($p0){this.$6D_1=$p0;return $p0},get_viewModel:function(){return this.$0_1},getLogicalOperatorDelegate:function(){return this.$2h_1.toString()},setLogicalOperatorDelegate:function($p0){this.$2h_1=Number.parseInvariant($p0)},confirm:function(){this.confirmRaiseProperty(true)},confirmRaiseProperty:function($p0){this.raisePropertyChanged("OperandTypeValue");this.$0_1.set_logicalOperator(this.$2h_1.toString());$p0&&this.raisePropertyChanged("AndOrOperatorConfirm")},discard:function(){this.set_logicalOperator(this.$0_1.get_logicalOperator());this.raisePropertyChanged("AndOrOperatorDiscard")},$6D_1:null,$2h_1:0,$0_1:null};Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel=function($p0,$p1,$p2){Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.initializeBase(this,[$p0,$p1]);var $v_0=$p0;this.$5G_2=$p2;this.$A_2=$v_0.get_type();this.$u_2=$v_0.get_entity().get_entityName();this.$1B_2=$v_0.get_attributeName();this.$m_2="";if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($v_0.get_entity())){var $v_1=$v_0.get_entity();this.$m_2=$v_0.get_entity().get_relationshipName();if($v_0.get_type()===11){$v_0.set_type(15);this.$A_2=$v_0.get_type()}}else if(Microsoft.Crm.Workflow.Expressions.RelatedEntity.isInstanceOfType($v_0.get_entity()))this.$m_2=$v_0.get_entity().get_relatedAttributeName()};Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.prototype={get_isRelationshipEntity:function(){return this.$5G_2},get_selectedAttribute:function(){return this.$1B_2},set_selectedAttribute:function($p0){this.$1B_2=$p0;this.get_entityAttributeExpression().set_attributeName(this.$1B_2);this.get_entityAttributeExpression().set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(this.$u_2,this.$1B_2).Type);this.$A_2=this.get_expression().get_type();return $p0},get_selectedEntity:function(){return this.$u_2},set_selectedEntity:function($p0){this.$u_2=$p0;if(this.$5G_2&&!isNullOrEmptyString(this.$m_2)&&this.$m_2!=="#CurrentEntity"){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getRelationshipEntityFromRelationshipName(this.$m_2);!IsNull($v_0)&&this.set_expression(new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_expression().get_workflow(),$v_0.RelationshipAttribute.LogicalName,this.$u_2,$v_0.RelationshipName),this.$1B_2))}else if(!this.$5G_2&&!isNullOrEmptyString(this.$m_2)&&this.$m_2!==window.LOCID_CALCFIELD_CURRENTENTITY)this.set_expression(new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression(new Microsoft.Crm.Workflow.Expressions.RelatedEntity(this.get_expression().get_workflow(),this.$m_2,this.$u_2),this.$1B_2));else this.set_expression(new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.get_expression().get_workflow()),this.$1B_2));return $p0},get_selectedEntityAttribute:function(){return this.$m_2},set_selectedEntityAttribute:function($p0){this.$m_2=$p0;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType(this.get_entityAttributeExpression().get_entity()))this.get_entityAttributeExpression().get_entity().set_relationshipName(this.$m_2);else Microsoft.Crm.Workflow.Expressions.RelatedEntity.isInstanceOfType(this.get_entityAttributeExpression().get_entity())&&this.get_entityAttributeExpression().get_entity().set_relatedAttributeName(this.$m_2);return $p0},get_operandWorkflowAttributeType:function(){return this.$A_2},get_entityAttributeExpression:function(){return this.get_expression()},get_displayValue:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeLocalizedNameFromEntity(this.$u_2,this.$1B_2),$v_1=null;if(this.$5G_2){if(!isNullOrEmptyString(this.$m_2)&&this.$m_2!=="#CurrentEntity"){var $v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getRelationshipEntityFromRelationshipName(this.$m_2);$v_1=$v_2.RelationshipAttribute.Label.Description}}else $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeLocalizedNameFromEntity(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName,this.$m_2);return isNullOrEmptyString($v_1)?$v_0:String.format("({0}) {1}",$v_1,$v_0)},getEditViewModel:function(){if(IsNull(this.$2_2))this.$2_2=new Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel(this);return this.$2_2},dispose:function(){if(this.$9_0)return;!IsNull(this.$2_2)&&this.$2_2.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},$5G_2:false,$1B_2:null,$m_2:null,$u_2:null,$A_2:0,$2_2:null};Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.initializeBase(this,[$p0]);this.$1B_2=$p0.get_selectedAttribute();this.$m_2=$p0.get_selectedEntityAttribute();this.set_filteredAttributes(null);this.$A_2=$p0.get_operandWorkflowAttributeType()};Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.prototype={get_operandContext:function(){return this.$5M_2},set_operandContext:function($p0){this.$5M_2=$p0;return $p0},get_selectedAttribute:function(){return this.getSelectedAttributeDelegate()},set_selectedAttribute:function($p0){this.setSelectedAttributeDelegate($p0);return $p0},get_selectedEntityAttribute:function(){return this.getSelectedEntityAttributeDelegate()},set_selectedEntityAttribute:function($p0){this.setSelectedEntityAttributeDelegate($p0);return $p0},getSelectedEntityDelegate:function(){if(this.$0_1.get_isRelationshipEntity())if(isNullOrEmptyString(this.get_selectedEntityAttribute())||this.get_selectedEntityAttribute()==="#CurrentEntity")return Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName;else return Mscrm.BusinessRules.MetadataUtility.relationshipToEntity(this.get_selectedEntityAttribute());else if(isNullOrEmptyString(this.get_selectedEntityAttribute())||this.get_selectedEntityAttribute()===window.LOCID_CALCFIELD_CURRENTENTITY)return Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName;else return Mscrm.BusinessRules.MetadataUtility.lookupToEntity(this.get_selectedEntityAttribute())},get_filteredAttributes:function(){return this.getFilteredAttributesDelegate()},set_filteredAttributes:function($p0){this.setFilteredAttributesDelegate($p0);return $p0},get_selectedEntity:function(){return this.getSelectedEntityDelegate()},get_filteredEntityAttributes:function(){return this.getFilteredEntityAttributesDelegate()},set_filteredEntityAttributes:function($p0){this.setFilteredEntityAttributesDelegate($p0);return $p0},get_useAttributeFiltering:function(){return this.$5b_2},set_useAttributeFiltering:function($p0){this.$5b_2=$p0;return $p0},get_operandWorkflowAttributeType:function(){return this.$A_2},get_currentEditExpression:function(){return new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression(this.get_selectedEntity()===Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName?new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.$0_1.get_expression().get_workflow()):new Microsoft.Crm.Workflow.Expressions.RelatedEntity(this.$0_1.get_expression().get_workflow(),this.get_selectedEntity(),this.get_selectedEntityAttribute()),this.get_selectedAttribute())},getSelectedAttributeDelegate:function(){return this.$1B_2},getSelectedEntityAttributeDelegate:function(){return this.$m_2},setSelectedAttributeDelegate:function($p0){this.$1B_2=$p0;this.$A_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getRelatedAttributeType(this.get_selectedEntity(),this.get_selectedAttribute());this.raisePropertyChanged("AttributeSelectedValue")},setSelectedEntityAttributeDelegate:function($p0){this.$m_2=$p0;this.raisePropertyChanged("EntityAttributeSelectedValue")},getFilteredAttributesDelegate:function(){return this.$57_2},getFilteredEntityAttributesDelegate:function(){return this.$8Q_2},setFilteredAttributesDelegate:function($p0){this.$57_2=$p0;this.raisePropertyChanged("FilteredAttributesValue")},setFilteredEntityAttributesDelegate:function($p0){this.$8Q_2=$p0;this.raisePropertyChanged("FilteredEntityAttributeValue")},handleAttributesChangedDelegate:function($p0){this.raisePropertyChanged("AttributesListValue")},confirm:function(){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype.confirm.call(this);this.$0_1.set_selectedEntityAttribute(this.$m_2);this.$0_1.set_selectedEntity(this.get_selectedEntity());this.$0_1.set_selectedAttribute(this.$1B_2)},discard:function(){Mscrm.BusinessRules.ViewModels.OperandEditViewModel.prototype.discard.call(this);this.set_selectedEntityAttribute(this.$0_1.get_selectedEntityAttribute());this.set_selectedAttribute(this.$0_1.get_selectedAttribute());this.raisePropertyChanged("EditViewModelDiscardedValue")},clearValidation:function(){this.raisePropertyChanged("EditViewModelDiscardedValue")},$5M_2:null,$1B_2:null,$m_2:null,$A_2:0,$57_2:null,$8Q_2:null,$5b_2:false};Mscrm.BusinessRules.ViewModels.ConditionsViewModel=function(conditionBranchMode,expression,parentStepId){Mscrm.BusinessRules.ViewModels.ConditionsViewModel.initializeBase(this);this.$3k_1=conditionBranchMode;this.$i_1=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.ViewModels.IExpressionViewModel);if(IsNull(expression))return;var $v_0=2;if(Object.getType(expression)===Microsoft.Crm.Workflow.Expressions.BinaryExpression)$v_0=expression.get_operator();for(var $v_1=(new Mscrm.BusinessRules.ViewModels.ExpressionConverter).convertToEditorExpressionFormat(expression),$v_2=0;$v_2<$v_1.get_count();$v_2++){var $v_3=$v_1.get_item($v_2),$v_4;if(!(Microsoft.Crm.Workflow.Expressions.BinaryExpression.isInstanceOfType($v_3)||Microsoft.Crm.Workflow.Expressions.UnaryExpression.isInstanceOfType($v_3)))continue;if($v_2<$v_1.get_count()-1){var $v_6=$v_1.get_item($v_2+1);if(this.$C2_1($v_3,$v_6)){$v_4=this.$Cp_1($v_3,$v_6,parentStepId,$v_0);$v_4.$3Q_2=!$v_2;$v_2++;this.$i_1.add($v_4);continue}}var $v_5=Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.get_instance().getNextUniqueId(parentStepId);$v_4=new Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel($v_0,Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($v_1.get_item($v_2)),$v_5,this);$v_4.$3Q_2=!$v_2;this.$i_1.add($v_4)}};Mscrm.BusinessRules.ViewModels.ConditionsViewModel.prototype={$Cp_1:function($p0,$p1,$p2,$p3){if(IsNull($p0)||IsNull($p1)||IsNull($p2))throw Error.create("GetBpfWithStageConditionViewModel : Null Arguments");var $v_0=$p0,$v_1=this.$C4_1($v_0,$p1);if(IsNull($v_1))throw Error.create("GetBpfWithStageConditionViewModel : Null combinedExpression");var $v_2=$v_0.get_rightOperands().get_item(0),$v_3=Mscrm.BusinessRules.ValueExpressionAdapterFactory.getValueExpression($v_2,null).getValue($v_2),$v_4=Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.get_instance().getNextUniqueId($p2),$v_5;if(!IsNull($v_3)){Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getProcessStageInfoAndCache($v_2.get_value(),$v_3.Value);$v_5=new Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel($p3,Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($v_1),$v_4,this);$v_5.checkIsStageConditionValid($v_3.Value)}else{$v_5=new Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel($p3,Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($p0),$v_4,this);return $v_5}if(IsNull($v_5))throw Error.create("GetBpfWithStageConditionViewModel : Null viewModel");var $v_6=new Microsoft.Crm.Workflow.Expressions.ExpressionCollection;$v_6.add($v_0.get_rightOperands().get_item(0));var $v_7=new Mscrm.BusinessRules.MultiValueExpression($v_6,Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_5.$3_1.$1m_1),$v_8=new Mscrm.BusinessRules.ViewModels.ValueOperandViewModel($v_7,$v_4);$v_8.setAttributeType(19);$v_5.$3_1.$2U_2=$v_8;$v_5.confirm();return $v_5},$C4_1:function($p0,$p1){var $v_0=[$p1];return new Microsoft.Crm.Workflow.Expressions.BinaryExpression($p0.get_workflow(),$p0.get_operator(),$p0.get_leftOperand(),$v_0)},$C2_1:function($p0,$p1){var $v_0=$p0,$v_1=$p1;return !IsNull($v_0)&&Microsoft.Crm.Workflow.Expressions.BinaryExpression.isInstanceOfType($v_0)&&$v_0.get_leftOperand().get_type()===19&&!IsNull($v_1)&&Microsoft.Crm.Workflow.Expressions.BinaryExpression.isInstanceOfType($v_0)&&$v_1.get_leftOperand().get_type()===21},get_entityName:function(){return this.$3J_1},set_entityName:function(value){this.$3J_1=value;return value},get_conditionBranchDisplayMode:function(){return this.$3k_1},set_conditionBranchDisplayMode:function(value){this.$3k_1=value;return value},get_expressionViewModels:function(){return this.$i_1},addExpression:function(expressionViewModel){this.$i_1.add(expressionViewModel);this.raisePropertyChanged("ChildExpressionChanged")},removeExpression:function(expressionViewModel){this.$i_1.remove(expressionViewModel);this.raisePropertyChanged("ChildExpressionChanged")},get_disableAddButton:function(){return this.$5y_1},set_disableAddButton:function(value){if(value!==this.$5y_1){this.$5y_1=value;this.raisePropertyChanged("DisableAddConditionProperty")}return value},get_updatedExpression:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_1=this.$i_1;if(!$v_1.get_count())return this.createDefaultConditionExpression($v_0);if($v_1.get_count()===1)return $v_1.get_item(0).get_expression();var $v_2=2;if($v_1.get_item(1).$y_2.get_logicalOperator()!==(0).toString())$v_2=3;for(var $v_3=new Microsoft.Crm.Workflow.Expressions.BinaryExpression($v_0,$v_2,$v_1.get_item(0).get_expression(),[$v_1.get_item(1).get_expression()]),$v_4=2;$v_4<$v_1.get_count();$v_4++){var $v_5=2;if($v_1.get_item($v_4).$y_2.get_logicalOperator()!==(0).toString())$v_5=3;$v_3=new Microsoft.Crm.Workflow.Expressions.BinaryExpression($v_0,$v_5,$v_3,[$v_1.get_item($v_4).get_expression()])}return $v_3},createDefaultConditionExpression:function(rootStep){return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(rootStep,true,0)},$i_1:null,$3k_1:0,$3J_1:null,$5y_1:false};Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator=function(){};Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.get_instance=function(){if(IsNull(Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.$2L))Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.$2L=new Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator;return Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.$2L};Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.prototype={getNextUniqueId:function(parentStepId){return Mscrm.BusinessRules.SharedMethods.formatTemplate.apply(null,["{0}_{1}_expression"].concat([parentStepId,this.$9U_0++]))},$9U_0:0};Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel.initializeBase(this);this.$0_1=$p0;this.$4_1=$p0.get_leftOperand().get_editViewModel();this.$3_1=$p0.get_rightOperand().get_editViewModel();this.$5_1=$p0.get_operandType().get_editViewModel();this.$L_1=$p0.get_expressionOperator().get_editViewModel();this.$s_1=new Mscrm.BusinessRules.ViewModels.SetAttributeValueExpressionStateManager(this);this.$s_1.initialize()};Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel.prototype={get_leftOperand:function(){return this.$4_1},set_leftOperand:function($p0){this.$4_1=$p0;return $p0},get_expressionOperator:function(){return this.$L_1},set_expressionOperator:function($p0){this.$L_1=$p0;return $p0},get_operandType:function(){return this.$5_1},set_operandType:function($p0){this.$5_1=$p0;return $p0},get_rightOperand:function(){return this.$3_1},set_rightOperand:function($p0){this.$3_1=$p0;return $p0},get_viewModel:function(){return this.$0_1},get_currentEditExpression:function(){throw Mscrm.BusinessRules.SharedMethods.createException("Not Implemented")},confirm:function(){this.$4_1.confirm();this.$5_1.confirm();this.$3_1.confirm();this.$0_1.confirm()},discard:function(){this.$3_1.discard();this.$5_1.discard();Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&this.$4_1.get_operandWorkflowAttributeType()!==10&&this.$4_1.discard()},dispose:function(){if(this.$9_0)return;this.$s_1.dispose();this.$s_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_stateManager:function(){return this.$s_1},set_stateManager:function($p0){this.$s_1=$p0;return $p0},get_operandWorkflowAttributeType:function(){return -1},set_operandWorkflowAttributeType:function($p0){return $p0},$4_1:null,$L_1:null,$5_1:null,$3_1:null,$s_1:null,$0_1:null};Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel=function($p0,$p1){Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel.initializeBase(this,["",$p0]);this.$3Z_3=$p1;this.$Z_3=$p0.get_propertySpec();var $v_0=null;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($p0.get_entity())&&Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(this.get_step().get_entity().get_entityName(),this.$Z_3.get_name())){$v_0=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($p0.get_entity(),this.$Z_3.get_name());$v_0.set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(this.get_step().get_entity().get_entityName(),this.$Z_3.get_name()).Type)}else if(!Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName(this.$Z_3.get_name()))$v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A(this.$Z_3.get_name(),14,null);else $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A(this.$Z_3.get_name(),Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeType(this.$Z_3.get_name()),null);this.$4_3=new Mscrm.BusinessRules.ViewModels.LeftOperandViewModel($v_0,String.format("{0}_lefopcon",$p0.get_Id(),"subExpression"));var $v_1=this.$4_3.get_operandWorkflowAttributeType(),$v_2=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getOperandTypeForAttributeType($v_1),$v_3=new Microsoft.Crm.Workflow.Expressions.ExpressionCollection,$v_4=Number.parseInvariant(this.get_expressionOperator().get_operation()),$v_5=this.$4_3.get_innerOperand(),$v_6=(new Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator($v_5.get_selectedEntity(),$v_5.get_selectedAttribute(),$v_4)).getRightOperandMetadata(),$v_7=Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel.$Cw($v_6,this.$Z_3);if(Array.contains($v_2,0)){var $v_8="";if(!IsNull($v_7)&&$v_7.Options.length>0){$v_8=$v_7.Options[0].Value.toString();var $v_9=Mscrm.BusinessRules.ExpressionBuilder.buildPrimitiveExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_8,$v_1),$v_A=new Microsoft.Crm.Workflow.Expressions.PropertySpecification($v_0.get_attributeName(),$v_9);$v_3.add($v_A.get_value())}else $v_3.add(this.$Z_3.get_value())}else if(Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType(this.$Z_3.get_value()))$v_3.add(this.$Z_3.get_value());else{var $v_B="";if(!IsNull($v_7))$v_B=$v_7.Options[0].Value.toString();var $v_C=Mscrm.BusinessRules.ExpressionBuilder.buildPrimitiveExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_B,$v_1),$v_D=new Microsoft.Crm.Workflow.Expressions.PropertySpecification($v_0.get_attributeName(),$v_C);$v_3.add($v_D.get_value())}this.$3_3=new Mscrm.BusinessRules.ViewModels.SetValueRightOperandViewModel($v_3,String.format("{0}_{1}",$p0.get_Id(),"subExpression"),$v_6);this.$5_3=new Mscrm.BusinessRules.ViewModels.OperandTypeViewModel(this.$3_3.get_rightOperandType(),String.format("{0}_operandType",$p0.get_Id()))};Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel.$Cw=function($p0,$p1){var $v_0=null;if($p0.AttributeType===Microsoft.Crm.Workflow.Expressions.WorkflowAttributeType.toString(10))if($p1&&Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType($p1.get_value())){$v_0=$p0;if(!$v_0.Options.length)$v_0.Options=Mscrm.BusinessRules.Views.ViewHelper.getDefaultOptionValue();else{var $v_1=$p1.get_value();if(!IsNull($v_1.get_value()))for(var $$arr_4=$v_0.Options,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_2=$$arr_4[$$idx_6];if($v_2.Value.toString()===$v_1.get_value().toString()){$v_0=null;break}}}}return $v_0};Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel.prototype={get_readDisplayFormat:function(){return window.LOCID_BUSINESSRULE_SETATTRVALUE},get_attributeName:function(){return this.$Z_3.get_name()},get_editViewModel:function(){if(IsNull(this.$2_3))this.$2_3=new Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel(this);return this.$2_3},get_leftOperand:function(){return this.$4_3},set_leftOperand:function($p0){this.$4_3=$p0;return $p0},get_expressionOperator:function(){return new Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel(-1,"")},set_expressionOperator:function($p0){return $p0},get_propertySpec:function(){return this.$Z_3},get_rightOperand:function(){return this.$3_3},set_rightOperand:function($p0){this.$3_3=$p0;return $p0},get_operandType:function(){return this.$5_3},set_operandType:function($p0){this.$5_3=$p0;return $p0},get_expressionPrefix:function(){return ""},confirm:function(){if(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.isInstanceOfType(this.$4_3.get_innerOperand())){var $v_0=this.$4_3.get_innerOperand();if(isNullOrEmptyString($v_0.$u_2)||$v_0.$u_2===this.get_step().get_workflow().get_primaryEntityName())this.get_step().set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.get_step().get_workflow()));else{var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getRelationshipEntityFromRelationshipName($v_0.$m_2);this.get_step().set_entity(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_step().get_workflow(),$v_1.RelationshipAttribute.LogicalName,$v_0.$u_2,$v_0.$m_2))}}this.get_step().get_propertySpec().set_name(this.$4_3.get_innerOperand().get_selectedAttribute());this.get_step().get_propertySpec().set_value(this.$3_3.get_expressions()[0])},get_id:function(){return this.get_step().get_Id()},get_expression:function(){return null},get_displayValue:function(){return null},get_operandWorkflowAttributeType:function(){return -1},get_useForCalculatedField:function(){return this.$3Z_3},get_isLeftOperandRelatedEntityLinked:function(){if(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.isInstanceOfType(this.$4_3.get_innerOperand())){var $v_0=this.$4_3.get_innerOperand();return !!$v_0.get_entityAttributeExpression()&&Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($v_0.get_entityAttributeExpression().get_entity())}return false},$Z_3:null,$3_3:null,$5_3:null,$2_3:null,$4_3:null,$3Z_3:false};Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionEditViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionEditViewModel.initializeBase(this);this.$0_1=$p0;this.$4_1=$p0.get_leftOperand().get_editViewModel();this.$3_1=$p0.get_rightOperand().get_editViewModel();this.$5_1=$p0.get_operandType().get_editViewModel();this.$L_1=$p0.get_expressionOperator().get_editViewModel();this.$s_1=new Mscrm.BusinessRules.ViewModels.SetAttributeValueExpressionStateManager(this);this.$s_1.initialize()};Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionEditViewModel.prototype={get_leftOperand:function(){return this.$4_1},set_leftOperand:function($p0){this.$4_1=$p0;return $p0},get_expressionOperator:function(){return this.$L_1},set_expressionOperator:function($p0){this.$L_1=$p0;return $p0},get_operandType:function(){return this.$5_1},set_operandType:function($p0){this.$5_1=$p0;return $p0},get_rightOperand:function(){return this.$3_1},set_rightOperand:function($p0){this.$3_1=$p0;return $p0},get_viewModel:function(){return this.$0_1},get_currentEditExpression:function(){throw Mscrm.BusinessRules.SharedMethods.createException("Not Implemented")},confirm:function(){this.$4_1.confirm();this.$5_1.confirm();this.$3_1.confirm();this.$0_1.confirm()},discard:function(){this.$4_1.discard();this.$5_1.discard();this.$3_1.discard()},dispose:function(){this.$s_1.dispose();this.$s_1.dispose();Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_stateManager:function(){return this.$s_1},set_stateManager:function($p0){this.$s_1=$p0;return $p0},get_operandWorkflowAttributeType:function(){return -1},set_operandWorkflowAttributeType:function($p0){return $p0},$4_1:null,$L_1:null,$5_1:null,$3_1:null,$s_1:null,$0_1:null};Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel.initializeBase(this,["",$p0]);this.$Z_3=$p0.get_propertySpec();var $v_0=null;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($p0.get_entity())&&Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(this.get_step().get_entity().get_entityName(),this.$Z_3.get_name())){$v_0=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($p0.get_entity(),this.$Z_3.get_name());$v_0.set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName(this.get_step().get_entity().get_entityName(),this.$Z_3.get_name()).Type)}else if(!Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName(this.$Z_3.get_name()))$v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A(this.$Z_3.get_name(),14,null);else $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A(this.$Z_3.get_name(),Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeType(this.$Z_3.get_name()),null);this.$4_3=new Mscrm.BusinessRules.ViewModels.LeftOperandViewModel($v_0,String.format("{0}_lefopcon",$p0.get_Id(),"subExpression"));var $v_1=new Microsoft.Crm.Workflow.Expressions.ExpressionCollection,$v_2=this.$4_3.get_operandWorkflowAttributeType(),$v_3=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getOperandTypeForAttributeType($v_2);if(Array.contains($v_3,0))$v_1.add(this.$Z_3.get_value());else if(Microsoft.Crm.Workflow.Expressions.PrimitiveExpression.isInstanceOfType(this.$Z_3.get_value()))$v_1.add(this.$Z_3.get_value());else{var $v_7=Mscrm.BusinessRules.ExpressionBuilder.buildPrimitiveExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),"",$v_2),$v_8=new Microsoft.Crm.Workflow.Expressions.PropertySpecification($v_0.get_attributeName(),$v_7);$v_1.add($v_8.get_value())}var $v_4=Number.parseInvariant(this.get_expressionOperator().get_operation()),$v_5=this.$4_3.get_innerOperand(),$v_6=(new Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator($v_5.get_selectedEntity(),$v_5.get_selectedAttribute(),$v_4)).getRightOperandMetadata();if($v_6.AttributeType===Microsoft.Crm.Workflow.Expressions.WorkflowAttributeType.toString(10)){var $v_9=$v_6;if(!$v_9.Options.length)$v_9.Options=Mscrm.BusinessRules.Views.ViewHelper.getDefaultOptionValue()}this.$3_3=new Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel($v_1,String.format("{0}_{1}",$p0.get_Id(),"subExpression"),$v_6);this.$5_3=new Mscrm.BusinessRules.ViewModels.OperandTypeViewModel(this.$3_3.get_rightOperandType(),$p0.get_Id()+"_operandType")};Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel.prototype={get_readDisplayFormat:function(){return window.LOCID_BUSINESSRULE_SETDFLTVALUE},get_attributeName:function(){return this.$Z_3.get_name()},get_editViewModel:function(){if(IsNull(this.$2_3))this.$2_3=new Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionEditViewModel(this);return this.$2_3},get_leftOperand:function(){return this.$4_3},set_leftOperand:function($p0){this.$4_3=$p0;return $p0},get_expressionOperator:function(){return new Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel(-1,"")},set_expressionOperator:function($p0){return $p0},get_propertySpec:function(){return this.$Z_3},get_rightOperand:function(){return this.$3_3},set_rightOperand:function($p0){this.$3_3=$p0;return $p0},get_operandType:function(){return this.$5_3},set_operandType:function($p0){this.$5_3=$p0;return $p0},get_expressionPrefix:function(){return ""},confirm:function(){if(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.isInstanceOfType(this.$4_3.get_innerOperand())){var $v_0=this.$4_3.get_innerOperand();if(isNullOrEmptyString($v_0.$u_2)||$v_0.$u_2===this.get_step().get_workflow().get_primaryEntityName())this.get_step().set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.get_step().get_workflow()));else{var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getRelationshipEntityFromRelationshipName($v_0.$m_2);this.get_step().set_entity(new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.get_step().get_workflow(),$v_1.RelationshipAttribute.LogicalName,$v_0.$u_2,$v_0.$m_2))}}this.get_step().get_propertySpec().set_name(this.$4_3.get_innerOperand().get_selectedAttribute());this.get_step().get_propertySpec().set_value(this.$3_3.get_expressions()[0])},get_id:function(){return this.get_step().get_Id()},get_expression:function(){return null},get_displayValue:function(){return null},get_operandWorkflowAttributeType:function(){return -1},get_isLeftOperandRelatedEntityLinked:function(){if(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.isInstanceOfType(this.$4_3.get_innerOperand())){var $v_0=this.$4_3.get_innerOperand();return !!$v_0.get_entityAttributeExpression()&&Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($v_0.get_entityAttributeExpression().get_entity())}return false},$Z_3:null,$3_3:null,$5_3:null,$2_3:null,$4_3:null};Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel=function(step){Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel.initializeBase(this,["",step]);this.$k_4=new Mscrm.BusinessRules.ViewModels.ConditionsViewModel(this.get_step().get_conditionBranchDisplayMode(),this.get_step().get_conditionExpression(),this.get_stepId())};Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel.prototype={get_conditions:function(){return this.$k_4},set_conditions:function(value){this.$k_4=value;return value},get_isLast:function(){var $v_0=this.get_step().get_parent();if($v_0&&$v_0.get_Steps().get_Count()>0)if(this.get_stepId()===$v_0.get_Steps().get_item($v_0.get_Steps().get_Count()-1).get_Id())return true;return false},validate:function(){var $v_0=Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.prototype.validate.call(this);if($v_0.isValid){this.get_step().get_conditionBranchDisplayMode()!==2&&this.get_step().set_conditionExpression(this.$k_4.get_updatedExpression());if(this.hasStageCategoryDeleted()||this.$DF_4()||this.hasStageDeleted())return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,window.LOCID_BUSINESSRULE_STAGEDELETED);if(!this.hasConditionExpressions()&&!this.get_isLast())return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,window.LOCID_BUSINESSRULE_MULTIPLEELSE);if(!this.get_stepViewModels().get_count())return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,window.LOCID_SAVEERROR_ZEROACTION)}return $v_0},$DF_4:function(){for(var $v_0=false,$v_1=0;$v_1<this.$k_4.$i_1.get_count();$v_1++)if(!IsNull(this.$k_4.$i_1.get_item($v_1))&&this.$k_4.$i_1.get_item($v_1).get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType()===19){var $v_2=this.$k_4.$i_1.get_item($v_1),$v_3=$v_2.checkInvalidProcess();if($v_3)$v_0=true}return $v_0},hasConditionExpressions:function(){return !!this.$k_4.$i_1.get_count()},hasStageCategoryDeleted:function(){for(var $v_0=false,$v_1=0;$v_1<this.$k_4.$i_1.get_count();$v_1++)if(!IsNull(this.$k_4.$i_1.get_item($v_1))&&this.$k_4.$i_1.get_item($v_1).get_leftOperand().get_innerOperand().get_operandWorkflowAttributeType()===20){var $v_2=this.$k_4.$i_1.get_item($v_1),$v_3=$v_2.checkStageCategoryDeleted();if($v_3)$v_0=true}return $v_0},hasStageDeleted:function(){for(var $v_0=0;$v_0<this.$k_4.$i_1.get_count();$v_0++)if(!IsNull(this.$k_4.$i_1.get_item($v_0))&&!IsNull(this.$k_4.$i_1.get_item($v_0).get_rightOperand())&&!IsNull(this.$k_4.$i_1.get_item($v_0).get_rightOperand().get_innerOperand())&&Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel.isInstanceOfType(this.$k_4.$i_1.get_item($v_0).get_rightOperand().get_innerOperand())){var $v_1=this.$k_4.$i_1.get_item($v_0),$v_2=$v_1.$3_1.get_innerOperand(),$v_3=$v_1.$3_1.$2U_2.get_expression(),$v_4=$v_3.$1s_1[0],$v_5=Mscrm.BusinessRules.ValueExpressionAdapterFactory.getValueExpression($v_4,null).getValue($v_4);$v_2.$5H_2=false;$v_1.set_showWarning(IsNull($v_5)?true:$v_2.isBpfStageInvalid($v_5.Value));if($v_1.$4f_2)return true}return false},$k_4:null};Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel.initializeBase(this,["Description"]);this.$77_2=$p0};Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel.prototype={get_description:function(){return this.getDescriptionDelegate()},set_description:function($p0){this.setDescriptionDelegate($p0);return $p0},getDescriptionDelegate:function(){return this.$77_2},setDescriptionDelegate:function($p0){this.$77_2=$p0;this.raisePropertyChanged("descriptionproperty")},$77_2:null};Mscrm.BusinessRules.ViewModels.RootStepSectionViewModel=function(step){Mscrm.BusinessRules.ViewModels.RootStepSectionViewModel.initializeBase(this,["",step])};Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel.initializeBase(this,["",$p0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()){this.set_controlId($p0.get_controlId());var $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$7x(this.get_step().get_entity(),this.get_controlId());this.$P_3=Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.$3B($v_0,$p0.get_Id())}};Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel.prototype={get_isAttributeOperand:function(){return !!this.$P_3},getReadDisplayFormat:function(){return window.LOCID_BUSINESSRULE_SETTO},get_sourceEntity:function(){return this.getSourceEntityDelegate()},set_sourceEntity:function($p0){this.setSourceEntityDelegate($p0);return $p0},get_controlId:function(){return this.getControlIdDelegate()},set_controlId:function($p0){this.setControlIdDelegate($p0);return $p0},get_isReadOnly:function(){return this.getIsReadOnlyDelegate()},set_isReadOnly:function($p0){this.get_step().set_isReadOnly($p0);this.raisePropertyChanged("IsReadOnlyProperty");return $p0},getSourceEntityDelegate:function(){return this.get_step().get_entity()},setSourceEntityDelegate:function($p0){this.get_step().set_entity($p0)},getControlIdDelegate:function(){return this.get_step().get_controlId()},setControlIdDelegate:function($p0){this.get_step().set_controlId($p0);this.raisePropertyChanged("ControlIdProperty")},getIsReadOnlyDelegate:function(){return this.get_step().get_isReadOnly()},get_relatedAttributeOperand:function(){return this.$P_3},set_relatedAttributeOperand:function($p0){this.$P_3=$p0;return $p0},$P_3:null};Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel.initializeBase(this,["",$p0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()){this.set_controlId($p0.get_controlId());var $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$7x(this.get_step().get_entity(),this.get_controlId());this.$P_3=Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.$3B($v_0,$p0.get_Id())}};Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel.prototype={get_isAttributeOperand:function(){return !!this.$P_3},getReadDisplayFormat:function(){return window.LOCID_BUSINESSRULE_SETAS},get_sourceEntity:function(){return this.getSourceEntityDelegate()},set_sourceEntity:function($p0){this.setSourceEntityDelegate($p0);return $p0},get_controlId:function(){return this.getControlIdDelegate()},set_controlId:function($p0){this.setControlIdDelegate($p0);return $p0},get_requiredLevel:function(){return this.getRequiredLevelDelegate()},set_requiredLevel:function($p0){this.setRequiredLevelDelegate($p0);return $p0},getSourceEntityDelegate:function(){return this.get_step().get_entity()},setSourceEntityDelegate:function($p0){this.get_step().set_entity($p0)},getControlIdDelegate:function(){return this.get_step().get_controlId()},setControlIdDelegate:function($p0){this.get_step().set_controlId($p0);this.raisePropertyChanged("ControlIdProperty")},getRequiredLevelDelegate:function(){return this.get_step().get_requiredLevel()},setRequiredLevelDelegate:function($p0){this.get_step().set_requiredLevel($p0);this.raisePropertyChanged("RequiredLevel")},get_relatedAttributeOperand:function(){return this.$P_3},set_relatedAttributeOperand:function($p0){this.$P_3=$p0;return $p0},$P_3:null};Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel.initializeBase(this,["",$p0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()){this.set_controlId($p0.get_controlId());var $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$7x(this.get_step().get_entity(),this.get_controlId());this.$P_3=Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.$3B($v_0,$p0.get_Id())}};Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel.prototype={get_isAttributeOperand:function(){return !!this.$P_3},getVisibleFormat:function(){return window.LOCID_BUSINESSRULE_SETTOVISIBLE},get_sourceEntity:function(){return this.getSourceEntityDelegate()},set_sourceEntity:function($p0){this.setSourceEntityDelegate($p0);return $p0},get_controlId:function(){return this.getControlIdDelegate()},set_controlId:function($p0){this.setControlIdDelegate($p0);return $p0},get_isVisible:function(){return this.getIsVisibleDelegate()},set_isVisible:function($p0){this.setIsVisibleDelegate($p0);return $p0},getSourceEntityDelegate:function(){return this.get_step().get_entity()},setSourceEntityDelegate:function($p0){this.get_step().set_entity($p0)},getControlIdDelegate:function(){return this.get_step().get_controlId()},setControlIdDelegate:function($p0){this.get_step().set_controlId($p0);this.raisePropertyChanged("ControlIdProperty")},getIsVisibleDelegate:function(){return this.get_step().get_isVisible()},setIsVisibleDelegate:function($p0){this.get_step().set_isVisible($p0);this.raisePropertyChanged("IsVisibleProperty")},get_relatedAttributeOperand:function(){return this.$P_3},set_relatedAttributeOperand:function($p0){this.$P_3=$p0;return $p0},$P_3:null};Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel.initializeBase(this,["",$p0]);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()){this.set_controlId($p0.get_controlId());var $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$7x(this.get_step().get_entity(),this.get_controlId());this.$P_3=Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.$3B($v_0,$p0.get_Id())}};Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel.prototype={get_isAttributeOperand:function(){return !!this.$P_3},getReadDisplayFormat:function(){return window.LOCID_BUSINESSRULE_SETDISPLAYMSG},get_sourceEntity:function(){return this.getSourceEntityDelegate()},set_sourceEntity:function($p0){this.setSourceEntityDelegate($p0);return $p0},get_controlId:function(){return this.getControlIdDelegate()},set_controlId:function($p0){this.setControlIdDelegate($p0);return $p0},get_message:function(){return this.getMessageDelegate()},set_message:function($p0){this.setMessageDelegate($p0);return $p0},getSourceEntityDelegate:function(){return this.get_step().get_entity()},setSourceEntityDelegate:function($p0){this.get_step().set_entity($p0)},getControlIdDelegate:function(){return this.get_step().get_controlId()},setControlIdDelegate:function($p0){this.get_step().set_controlId($p0);this.raisePropertyChanged("ControlIdProperty")},getMessageDelegate:function(){return this.get_step().get_stepLabels().get_item(0).get_description()},setMessageDelegate:function($p0){this.get_step().get_stepLabels().get_item(0).set_description($p0);this.raisePropertyChanged("MessageProperty")},get_relatedAttributeOperand:function(){return this.$P_3},set_relatedAttributeOperand:function($p0){this.$P_3=$p0;return $p0},$P_3:null};Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel.initializeBase(this,["",$p0])};Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel.prototype={getReadDisplayFormat:function(){return window.LOCID_BUSINESSRULE_SCRIPTMESSAGE},get_javascript:function(){return this.getJavascriptDelegate()},set_javascript:function($p0){this.setJavascriptDelegate($p0);return $p0},getJavascriptDelegate:function(){return this.get_step().get_javascript()},setJavascriptDelegate:function($p0){this.get_step().set_javascript($p0);this.raisePropertyChanged("JavascriptProperty")}};Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel=function(){Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel.initializeBase(this);var $v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel;$v_0.set_command(this.get_moveUpCommand());$v_0.set_iconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/moveup.png"));$v_0.set_hoverIconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hovermoveup.png"));$v_0.set_titleText(window.LOCID_MOVE_UP_BUTTON);this.get_buttonViewModels().add($v_0);$v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel;$v_0.set_command(this.get_moveDownCommand());$v_0.set_iconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/movedown.png"));$v_0.set_hoverIconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hovermovedown.png"));$v_0.set_titleText(window.LOCID_MOVE_DOWN_BUTTON);this.get_buttonViewModels().add($v_0);$v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel;$v_0.set_command(this.get_deleteCommand());$v_0.set_iconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/delete.png"));$v_0.set_hoverIconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hoverdelete.png"));$v_0.set_titleText(window.LOCID_DELETE_BUTTON);this.get_buttonViewModels().add($v_0)};Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel.prototype={$4a_2:null,$4Z_2:null,$n_2:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$4a_2)){this.$4a_2.dispose();this.$4a_2=null}if(!IsNull(this.$4Z_2)){this.$4Z_2.dispose();this.$4Z_2=null}if(!IsNull(this.$n_2)){this.$n_2.dispose();this.$n_2=null}Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.prototype.dispose.call(this)},get_moveUpCommand:function(){return this.$4a_2||(this.$4a_2=new Mscrm.BusinessRules.Commands.MoveUpCommand)},set_moveUpCommand:function($p0){this.$4a_2=$p0;return $p0},get_moveDownCommand:function(){return this.$4Z_2||(this.$4Z_2=new Mscrm.BusinessRules.Commands.MoveDownCommand)},set_moveDownCommand:function($p0){this.$4Z_2=$p0;return $p0},get_deleteCommand:function(){return this.$n_2||(this.$n_2=new Mscrm.BusinessRules.Commands.DeleteCommand)},set_deleteCommand:function($p0){this.$n_2=$p0;return $p0}};Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel=function(){Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel.initializeBase(this);var $v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel;$v_0.set_command(this.get_deleteCommand());$v_0.set_iconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/delete.png"));$v_0.set_hoverIconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hoverdelete.png"));$v_0.set_titleText(window.LOCID_DELETE_BUTTON);this.get_buttonViewModels().add($v_0)};Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel.prototype={$n_2:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$n_2)){this.$n_2.dispose();this.$n_2=null}Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.prototype.dispose.call(this)},get_deleteCommand:function(){return this.$n_2||(this.$n_2=new Mscrm.BusinessRules.Commands.DeleteCommand)},set_deleteCommand:function($p0){this.$n_2=$p0;return $p0}};Mscrm.BusinessRules.ViewModels.ExpressionReadToolBarViewModel=function(){Mscrm.BusinessRules.ViewModels.ExpressionReadToolBarViewModel.initializeBase(this);var $v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel;$v_0.set_command(this.get_deleteCommand());$v_0.set_iconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/delete.png"));$v_0.set_hoverIconUrl(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hoverdelete.png"));$v_0.set_titleText(window.LOCID_DELETE_BUTTON);this.get_buttonViewModels().add($v_0)};Mscrm.BusinessRules.ViewModels.ExpressionReadToolBarViewModel.prototype={$n_2:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$n_2)){this.$n_2.dispose();this.$n_2=null}Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.prototype.dispose.call(this)},get_deleteCommand:function(){return this.$n_2||(this.$n_2=new Mscrm.BusinessRules.Commands.DeleteCommand)},set_deleteCommand:function($p0){this.$n_2=$p0;return $p0}};Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel=function(){Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel.initializeBase(this)};Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel.prototype={$J_1:null,$H_1:null,$8n_1:null,$8j_1:false,$65_1:null,$64_1:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$J_1)){this.$J_1.dispose();this.$J_1=null}if(!IsNull(this.$65_1))this.$65_1=null;if(!IsNull(this.$64_1))this.$64_1=null;Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_command:function(){return this.$J_1},set_command:function($p0){this.$J_1=$p0;return $p0},get_id:function(){return this.$H_1},set_id:function($p0){this.$H_1=String.format("{0}_ReadToolBarButton",$p0);return $p0},get_titleText:function(){return this.$8n_1},set_titleText:function($p0){this.$8n_1=$p0;return $p0},get_selected:function(){return this.$8j_1},set_selected:function($p0){this.$8j_1=$p0;this.raisePropertyChanged("Selected");return $p0},get_iconUrl:function(){return this.$65_1},set_iconUrl:function($p0){this.$65_1=$p0;return $p0},get_hoverIconUrl:function(){return this.$64_1},set_hoverIconUrl:function($p0){this.$64_1=$p0;return $p0}};Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel=function(){Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.initializeBase(this)};Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.prototype={$H_1:null,$3E_1:null,$6S_1:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$3E_1)){for(var $v_0=0;$v_0<this.$3E_1.get_count();$v_0++){var $v_1=this.$3E_1.get_item($v_0);$v_1.dispose()}this.$3E_1.clear();this.$3E_1=null}if(!IsNull(this.$6S_1))this.$6S_1=null;Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this)},get_id:function(){return this.$H_1},set_id:function($p0){this.$H_1=String.format("{0}_ReadToolBar",$p0);if(!IsNull(this.get_buttonViewModels())&&this.get_buttonViewModels().get_count()>0)for(var $v_0=0;$v_0<this.get_buttonViewModels().get_count();$v_0++){var $v_1=this.get_buttonViewModels().get_item($v_0);$v_1.set_id(this.$H_1+$v_0)}return $p0},get_buttonViewModels:function(){return this.$3E_1||(this.$3E_1=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.ViewModels.IReadToolBarButtonViewModel))},set_buttonViewModels:function($p0){this.$3E_1=$p0;return $p0},get_selectedButtonViewModel:function(){return this.$6S_1},set_selectedButtonViewModel:function($p0){this.$6S_1=$p0;this.raisePropertyChanged("SelectedButtonViewModel");return $p0}};Mscrm.BusinessRules.ViewModels.FormBodyViewModel=function($p0){Mscrm.BusinessRules.ViewModels.FormBodyViewModel.initializeBase(this,[""]);this.$1E_2=$p0;this.$6Q_2=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.ViewModels.ISectionViewModel);if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())this.$9k_2();else this.$BQ_2()};Mscrm.BusinessRules.ViewModels.FormBodyViewModel.prototype={validate:function(){var $v_0=Mscrm.BusinessRules.ViewModels.ViewModel.prototype.validate.call(this);if($v_0.isValid)return this.$7r_2.validate();return $v_0},get_descriptionSection:function(){return this.$78_2},get_sections:function(){return this.$6Q_2},$BQ_2:function(){this.$BR_2();this.$9k_2()},$9k_2:function(){this.$7r_2=new Mscrm.BusinessRules.ViewModels.RootStepSectionViewModel(this.$1E_2);this.$6Q_2.add(this.$7r_2)},$BR_2:function(){this.$78_2=new Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel("");this.$6Q_2.add(this.$78_2)},$6Q_2:null,$78_2:null,$1E_2:null,$7r_2:null};Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel=function(workflowStep){this.$$d_activateRule=Function.createDelegate(this,this.activateRule);this.$$d_saveAsRule=Function.createDelegate(this,this.saveAsRule);this.$$d_validateRule=Function.createDelegate(this,this.validateRule);this.$$d_saveRule=Function.createDelegate(this,this.saveRule);Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel.initializeBase(this);this.set_businessRule(workflowStep);this.$2g_1=new Mscrm.BusinessRules.Proxies.JavaScriptSerializerProxy;this.$1b_1=new Mscrm.BusinessRules.Proxies.BusinessRuleServiceProxy;if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){var $v_0=Mscrm.CrmUri.create(window.location.href);if($v_0.get_query()["attributeId"])this.$5q_1=$v_0.get_query()["attributeId"].toString();if($v_0.get_query()["entityId"])this.$5z_1=$v_0.get_query()["entityId"].toString();this.$5N_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.IsManaged&&!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.IsCustomizable||Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.IsBaseCurrency}else{this.$5n_1=Boolean.parse($P_CRM("#footerActivatedState").val());this.$5N_1=Boolean.parse($P_CRM("#footerReadOnlyState").val());this.$2n_1=new Mscrm.BusinessRules.TriggerScope}};Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel.prototype={$2g_1:null,$1b_1:null,$5B_1:null,$5q_1:null,$5z_1:null,$8O_1:0,$8D_1:0,$3D_1:null,$8C_1:null,$8B_1:null,$8E_1:null,$5n_1:false,$5N_1:false,$8r_1:null,$2n_1:null,$8q_1:null,$8o_1:null,$8p_1:0,$8A_1:null,$46_1:null,$5c_1:null,$6O_1:null,$6P_1:null,$3i_1:null,$3u_1:null,$6R_1:null,$62_1:null,$8h_1:null,$7G_1:false,add_onValidation:function(value){this.$2H_0.addHandler("OnValidation",value)},remove_onValidation:function(value){this.$2H_0.removeHandler("OnValidation",value)},$EN_1:function($p0,$p1){var $v_0=this.$2H_0.getHandler($p0);!IsNull($v_0)&&$v_0(this,$p1)},setBusinessRuleNameDelegate:function(name){this.$8C_1=name;this.raisePropertyChanged("BusinessRuleName")},getBusinessRuleNameDelegate:function(){return this.$8C_1},setBusinessRuleDescriptionDelegate:function(description){this.$8B_1=description;this.get_$90_1().get_descriptionSection().set_description(description);this.raisePropertyChanged("BusinessRuleDescription")},getBusinessRuleDescriptionDelegate:function(){return this.$8B_1},getBusinessRuleIdDelegate:function(){return this.$3D_1},setBusinessRuleIdDelegate:function(id){this.$3D_1=id;this.raisePropertyChanged("BusinessRuleId")},getBusinessRuleXamlDelegate:function(){return this.$8E_1},getBusinessRuleDelegate:function(){return this.$8A_1},$Ee_1:function($p0){this.$8A_1=$p0;this.raisePropertyChanged("BusinessRule")},setBusinessRuleXamlDelegate:function(xaml){this.$8E_1=xaml;this.raisePropertyChanged("BusinessRuleXaml")},getFormIdIndexDelegate:function(){return Array.indexOf(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.FormIds,this.$8r_1).toString()},setFormIdIndexDelegate:function(formIdIndex){this.$8r_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.FormIds[Number.parseInvariant(formIdIndex)];this.raisePropertyChanged("TriggerFormId")},getTriggerScopeIndexDelegate:function(){if(isNullOrEmptyString(this.$2n_1.$3t_0))return Array.indexOf(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.Scopes,this.$2n_1.$4c_0).toString();else return Array.indexOf(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.FormIds,this.$2n_1.$3t_0).toString()},setTriggerScopeIndexDelegate:function(triggerScopeIndex){var $v_0=Number.parseInvariant(triggerScopeIndex);this.$2n_1.$3t_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.FormIds[$v_0];this.$2n_1.$4c_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.Scopes[$v_0];var $v_1=window.designerTriggerScope;if(!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){var $v_2=[];$v_2.push(this.$2n_1.$3t_0);$v_2.push(this.$2n_1.$4c_0);window.designerTriggerScope($v_2)}this.raisePropertyChanged("TriggerFormId")},getEventNameDelegate:function(){return this.$8q_1},setEventNameDelegate:function(eventName){this.$8q_1=eventName;this.raisePropertyChanged("TriggerEventName")},getControlNameDelegate:function(){return this.$8o_1},setControlNameDelegate:function(controlName){this.$8o_1=controlName;this.raisePropertyChanged("TriggerControlName")},getPrimaryEntityTypeCodeDelegate:function(){return this.$8O_1},setPrimaryEntityTypeCodeDelegate:function(entityTypeCode){this.$8O_1=entityTypeCode;this.raisePropertyChanged("EntityTypeCode")},get_primaryFieldId:function(){return this.$5q_1},get_entityId:function(){return this.$5z_1},get_$90_1:function(){if(!this.$5B_1)this.$5B_1=this.createFormBodyViewModel();return this.$5B_1},createFormBodyViewModel:function(){return new Mscrm.BusinessRules.ViewModels.FormBodyViewModel(this.get_businessRule())},get_businessRuleState:function(){return this.$8D_1},set_businessRuleState:function(value){this.$8D_1=value;return value},get_businessRuleId:function(){return this.getBusinessRuleIdDelegate()},set_businessRuleId:function(value){this.setBusinessRuleIdDelegate(value);return value},get_entityTypeCode:function(){return this.getPrimaryEntityTypeCodeDelegate()},set_entityTypeCode:function(value){this.setPrimaryEntityTypeCodeDelegate(value);return value},get_businessRuleName:function(){return this.getBusinessRuleNameDelegate()},set_businessRuleName:function(value){this.setBusinessRuleNameDelegate(value);return value},get_businessRuleDescription:function(){return this.$5B_1.get_descriptionSection().get_description()},set_businessRuleDescription:function(value){this.$5B_1.get_descriptionSection().set_description(value);return value},get_businessRuleXaml:function(){return this.getBusinessRuleXamlDelegate()},set_businessRuleXaml:function(value){this.setBusinessRuleXamlDelegate(value);return value},get_activated:function(){return this.$5n_1},set_activated:function(value){this.$5n_1=value;return value},get_readOnly:function(){return this.$5N_1},set_readOnly:function(value){this.$5N_1=value;return value},get_businessRule:function(){return this.getBusinessRuleDelegate()},set_businessRule:function(value){this.$Ee_1(value);return value},get_triggerEventName:function(){return this.getEventNameDelegate()},set_triggerEventName:function(value){this.setEventNameDelegate(value);return value},get_triggerControlType:function(){return this.$8p_1},set_triggerControlType:function(value){this.$8p_1=value;this.raisePropertyChanged("TriggerControlType");return value},get_triggerControlName:function(){return this.getControlNameDelegate()},set_triggerControlName:function(value){this.setControlNameDelegate(value);return value},validate:function(){var $v_0=null,$v_1=window.designerLoaded;if(!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){var $v_2=window.designerValidate(),$v_3=$v_2?null:"";$v_0=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult($v_2,$v_3)}else{$v_0=Mscrm.BusinessRules.ViewModels.ViewModel.prototype.validate.call(this);$v_0=$v_0.isValid?this.get_$90_1().validate():$v_0}$v_0=$v_0.isValid?this.$F7_1():$v_0;this.$EN_1("OnValidation",$v_0);return $v_0},validateRule:function(callback){var $v_0=window.designerLoaded;if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch=new GenericWorkflowDesigner.Stopwatch;GenericWorkflowDesigner.StaticStopwatch.reset();GenericWorkflowDesigner.StaticStopwatch.start()}var $v_1="",$v_2=window.designerValidationMode;if(!IsNull($v_2)){var $v_3=this.$5c_1.get_isValidationOn();window.designerValidationMode($v_3);$v_1=$v_3?"PBL_ValidateOn":"PBL_ValidateOff"}callback(this.validate());if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch.stop();var $v_4=GenericWorkflowDesigner.StaticStopwatch.elapsedMilliseconds;localStorage.setItem($v_1,$v_4)}},$F7_1:function(){if(isNullOrEmptyString(this.get_businessRuleName())&&!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){var $v_0=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,null);$v_0.$2l_1=0;return $v_0}return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(true,null)},saveRule:function(callback){var $v_0=window.designerLoaded;if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch=new GenericWorkflowDesigner.Stopwatch;GenericWorkflowDesigner.StaticStopwatch.reset();GenericWorkflowDesigner.StaticStopwatch.start()}Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSetAction("Save");var $v_1=this.validate();if(!$v_1.isValid){var $v_5=new Mscrm.BusinessRules.Commands.SaveCommandResult($v_1);callback($v_5);return}var $v_2=this.$2g_1.serialize(this.createBusinessRule()),$v_3="";if(isNullOrEmptyString(this.get_businessRuleId())){var $$t_K=this,$$t_L=this;this.$1b_1.createRule($v_2,function($p1_0,$p1_1){$v_3=$$t_K.extractServerErrorMessage($p1_1)},function($p1_0,$p1_1){var $v_6=$$t_L.handleSaveResponse($p1_0,$v_3);callback($v_6);if(!IsNull($p1_0)&&$p1_0.Success){var $v_7=window.designerSaveDone;!IsNull($v_7)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSaveDone();var $v_8=window.location.href;window.location.replace($v_8+"&id="+CrmEncodeDecode.CrmUrlEncode($v_6.$3D_0))}})}else{var $$t_M=this,$$t_N=this;this.$1b_1.updateRule($v_2,function($p1_0,$p1_1){$v_3=$$t_M.extractServerErrorMessage($p1_1)},function($p1_0,$p1_1){var $v_9=$$t_N.handleSaveResponse($p1_0,$v_3);callback($v_9);if(!IsNull($p1_0)&&$p1_0.Success){var $v_A=window.designerSaveDone;!IsNull($v_A)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSaveDone()}})}var $v_4=$P_CRM("#BusinessRuleName input").val();if($v_4&&$v_4!==""){$P_CRM("div#ProcessTitle").text($v_4);$P_CRM("div#ProcessTitle").attr("title",$v_4)}},saveAsRule:function(callback){var $v_0=window.designerLoaded;if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch=new GenericWorkflowDesigner.Stopwatch;GenericWorkflowDesigner.StaticStopwatch.reset();GenericWorkflowDesigner.StaticStopwatch.start()}Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSetAction("SaveAs");var $v_1=this.validate();if(!$v_1.isValid){var $v_6=new Mscrm.BusinessRules.Commands.SaveCommandResult($v_1);callback($v_6);return}var $v_2=this.createBusinessRule(),$v_3=String.format(window.LOCID_SAVEAS_NAMEFORMAT,$v_2.Name);if($v_3.length>100){var $v_7=String.format(window.LOCID_BUSINESSRULE_NAMELENOVR,100);$v_1=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,$v_7);var $v_8=new Mscrm.BusinessRules.Commands.SaveCommandResult($v_1);callback($v_8);return}$v_2.BusinessRuleId="";$v_2.Name=$v_3;var $v_4=this.$2g_1.serialize($v_2),$v_5="",$$t_F=this,$$t_G=this;this.$1b_1.copyRule($v_4,function($p1_0,$p1_1){$v_5=$$t_F.extractServerErrorMessage($p1_1)},function($p1_0,$p1_1){var $v_9=$$t_G.handleSaveResponse($p1_0,$v_5);callback($v_9)})},handleUpdateAttributeResponse:function(result,message){if(!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.CalculatedFields"))return null;this.$7G_1=result.Success;Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();result.Success&&this.saveSnapshot();var $v_0=new Mscrm.BusinessRules.Commands.SaveCommandResult(new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(result.Success,isNullOrEmptyString(message)?null:message));return $v_0},handleSaveResponse:function(result,message){var $v_0=window.designerLoaded;if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch.stop();var $v_2=GenericWorkflowDesigner.StaticStopwatch.elapsedMilliseconds;localStorage.setItem(result.RemoteCommand.Command==="CopyRule"?"PBL_SaveAsBussinessRule":"PBL_SaveBussinessRule",$v_2)}if(result.Success){var $v_3=result.ReturnValue.string;!IsNull($v_3)&&this.set_businessRuleId(isArray($v_3)?$v_3[0]:$v_3);this.saveSnapshot()}var $v_1=new Mscrm.BusinessRules.Commands.SaveCommandResult(new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(result.Success,isNullOrEmptyString(message)?null:message));$v_1.$3D_0=this.get_businessRuleId();return $v_1},extractServerErrorMessage:function(responseXml){if(IsNull(responseXml))return null;var $v_0=Sys.Serialization.JavaScriptSerializer.deserialize(Mscrm.RemoteCommandXml.getErrorMessage(responseXml));if(!IsNull($v_0)&&!IsNull($v_0["_error"])){var $v_1=window.designerLoaded;if(!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&!isNullOrEmptyString($v_0["_error"].Description))return $v_0["_error"].Description;else return $v_0["_error"].DisplayText}return null},createBusinessRule:function(){var $v_0=new Mscrm.BusinessRule;$v_0.BusinessRuleId=this.get_businessRuleId();$v_0.Name=this.get_businessRuleName();$v_0.Description=this.get_businessRuleDescription();$v_0.FormId=this.$2n_1.$3t_0;$v_0.Scope=this.$2n_1.$4c_0;$v_0.PrimaryEntityTypeCode=this.get_entityTypeCode();if(this.get_businessRule()){var $v_1=window.designerLoaded;if(!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner"))$v_0.WorkflowStepJson=window.designerToJson();else $v_0.WorkflowStepJson=this.get_businessRule().toJson()}else $v_0.Xaml=this.get_businessRuleXaml();return $v_0},activateRule:function(){var $v_0=window.designerLoaded;if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch=new GenericWorkflowDesigner.Stopwatch;GenericWorkflowDesigner.StaticStopwatch.reset();GenericWorkflowDesigner.StaticStopwatch.start()}if(this.$5n_1){Mscrm.FormAction.changeState("deactivate",4703,5,1);if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch.stop();var $v_1=GenericWorkflowDesigner.StaticStopwatch.elapsedMilliseconds;localStorage.setItem("PBL_DeactivateBussinessRule",$v_1)}}else{Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSetAction("Activate");var $v_2=new Mscrm.BusinessRules.Commands.SaveCommand;$v_2.$1O_0=this.$$d_saveRule;var $$t_5=this;$v_2.$50_0=function($p1_0){if(!$p1_0.get_success())return;Mscrm.FormAction.changeState("activate",4703,6,1);if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){GenericWorkflowDesigner.StaticStopwatch.stop();var $v_3=GenericWorkflowDesigner.StaticStopwatch.elapsedMilliseconds;localStorage.setItem("PBL_ActivateBussinessRule",$v_3)}};$v_2.execute()}return true},get_javaScriptSerializerProxy:function(){return this.$2g_1},set_javaScriptSerializerProxy:function(value){this.$2g_1=value;return value},get_businessRuleServiceProxy:function(){return this.$1b_1},set_businessRuleServiceProxy:function(value){this.$1b_1=value;return value},get_saveCommand:function(){if(IsNull(this.$46_1)){this.$46_1=new Mscrm.BusinessRules.Commands.SaveCommand;this.$46_1.set_saveDelegate(this.$$d_saveRule)}return this.$46_1},get_validateCommand:function(){if(IsNull(this.$5c_1)){this.$5c_1=new Mscrm.BusinessRules.Commands.ValidateCommand;this.$5c_1.set_validateDelegate(this.$$d_validateRule)}return this.$5c_1},get_saveAndCloseCommand:function(){if(IsNull(this.$6O_1)){this.$6O_1=new Mscrm.BusinessRules.Commands.SaveAndCloseCommand;this.$6O_1.set_saveDelegate(this.$$d_saveRule)}return this.$6O_1},get_saveAsCommand:function(){if(IsNull(this.$6P_1)){this.$6P_1=new Mscrm.BusinessRules.Commands.SaveAsCommand;this.$6P_1.set_saveDelegate(this.$$d_saveAsRule)}return this.$6P_1},get_securityLearnMoreCommand:function(){if(IsNull(this.$6R_1))this.$6R_1=new Mscrm.BusinessRules.Commands.SecurityLearnMoreCommand;return this.$6R_1},get_genericXamlLearnMoreCommand:function(){if(IsNull(this.$62_1))this.$62_1=new Mscrm.BusinessRules.Commands.GenericXamlLearnMoreCommand;return this.$62_1},get_helpCommand:function(){if(IsNull(this.$3u_1))this.$3u_1=new Mscrm.BusinessRules.Commands.HelpCommand;return this.$3u_1},get_activateCommand:function(){if(IsNull(this.$3i_1)){this.$3i_1=new Mscrm.BusinessRules.Commands.ActivateCommand;this.$3i_1.set_activateDelegate(this.$$d_activateRule)}return this.$3i_1},saveSnapshot:function(){this.$8h_1=this.$2g_1.serialize(this.createBusinessRule())},get_isDirty:function(){if(this.$5N_1)return false;var $v_0=window.designerLoaded;if(!IsNull($v_0)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){var $v_1=window.designerDirty();return $v_1}else{var $v_2=this.validate();if(!$v_2.isValid&&$v_2.errorText!==window.LOCID_SAVEERROR_ZEROACTION)return true;var $v_3=this.$2g_1.serialize(this.createBusinessRule());return $v_3!==this.$8h_1}},get_hadSaveSucceeded:function(){return this.$7G_1},set_hadSaveSucceeded:function(value){this.$7G_1=value;return value},dispose:function(){if(this.$9_0)return;!IsNull(this.$46_1)&&this.$46_1.set_saveDelegate(null);!IsNull(this.$3i_1)&&this.$3i_1.set_activateDelegate(null);Mscrm.BusinessRules.ViewModels.ViewModel.prototype.dispose.call(this);this.$46_1=null;this.$3i_1=null;this.$6R_1=null;this.$62_1=null;this.$1b_1=null;this.$2g_1=null}};Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel=function(entityMetadata){Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel.initializeBase(this,[entityMetadata])};Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel.prototype={populateLookupFields:function(currentEntityMetadata,lookupFields){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption(currentEntityMetadata.DisplayName,0);Array.add(lookupFields,$v_0);if(!IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities))for(var $v_1=0;$v_1<Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities.length;$v_1++){var $v_2=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities[$v_1],$v_3=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption(String.format("{0} ({1})",$v_2.RelationshipAttribute.Label.Description,$v_2.RelationshipEntity.DisplayName),$v_1+1);Array.add(lookupFields,$v_3)}},getSelectedFieldIndexDelegate:function(){var $v_0=this.get_selectedFieldLogicalName();if(isNullOrEmptyString($v_0)||$v_0==="#CurrentEntity")return "0";for(var $v_1=0;$v_1<this.get_lookupFields().length;$v_1++)if($v_0===Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities[$v_1].RelationshipName)return ($v_1+1).toString();return "-1"},setSelectedFieldIndexDelegate:function(index){if(index==="-1"){this.set_selectedFieldLogicalName("");return}if(index==="0"){this.set_selectedFieldLogicalName("#CurrentEntity");return}var $v_0=Number.parseInvariant(index),$v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities[$v_0-1].RelationshipName;this.set_selectedFieldLogicalName($v_1)}};Mscrm.BusinessRules.ViewModels.RelatedEntityControlViewModelFactory=function(){};Mscrm.BusinessRules.ViewModels.RelatedEntityControlViewModelFactory.$D0=function($p0,$p1){if($p1)return new Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel($p0);else return new Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel($p0)};Mscrm.BusinessRules.ViewModels.ViewModel=function(){this.$2H_0=new Sys.EventHandlerList};Mscrm.BusinessRules.ViewModels.ViewModel.prototype={add_propertyChanged:function(value){!IsNull(this.$2H_0)&&this.$2H_0.addHandler("PropertyChanged",value)},remove_propertyChanged:function(value){!IsNull(this.$2H_0)&&this.$2H_0.removeHandler("PropertyChanged",value)},get_parent:function(){return this.$E_0},set_parent:function(value){this.$E_0=value;return value},setPropertyWithoutRaisingEvent:function(propertyName,value){},validate:function(){return new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(true,null)},dispose:function(){if(this.$9_0)return;this.$2H_0=null;this.$9_0=true},raisePropertyChanged:function(propertyName){var $v_0=this.$2H_0.getHandler("PropertyChanged");if($v_0){var $v_1=new Sys.PropertyChangedEventArgs(propertyName);$v_0(this,$v_1)}},get_eventHandlers:function(){return this.$2H_0},get_isDisposed:function(){return this.$9_0},$2H_0:null,$9_0:false,$E_0:null};Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel=function(entityMetadata,showEntityAttributes){this.$$d_getAttributesDelegate=Function.createDelegate(this,this.getAttributesDelegate);this.$$d_setSelectedFieldIndexDelegate=Function.createDelegate(this,this.setSelectedFieldIndexDelegate);this.$$d_getSelectedFieldIndexDelegate=Function.createDelegate(this,this.getSelectedFieldIndexDelegate);this.$$d_getFilteredAttributesDelegate=Function.createDelegate(this,this.getFilteredAttributesDelegate);this.$$d_getSelectedBpfFieldDelegate=Function.createDelegate(this,this.getSelectedBpfFieldDelegate);this.$$d_getSelectedFieldLogicalNameDelegate=Function.createDelegate(this,this.getSelectedFieldLogicalNameDelegate);this.$$d_getEntityLogicalNameDelegate=Function.createDelegate(this,this.getEntityLogicalNameDelegate);this.$$d_setFilteredAttributesDelegate=Function.createDelegate(this,this.setFilteredAttributesDelegate);Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.initializeBase(this);this.$Q_1=entityMetadata;this.$3L_1=new Array(0);this.$8k_1=showEntityAttributes;this.$8Y_1={};this.$2u_1={}};Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.prototype={$Q_1:null,$1w_1:null,$1r_1:false,$2w_1:null,$8Y_1:null,$2u_1:null,$8k_1:false,set_$A2_1:function($p0){this.$Q_1=$p0;var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getLogicalNameFromTypeCode(this.$Q_1.EntityTypeCode),$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_0),$$t_5=this;$v_1.done(function($p1_0){$$t_5.$5e_1($p1_0.Fields);$$t_5.raisePropertyChanged("EntityProperty");$$t_5.raisePropertyChanged("AttributeListProperty");var $v_2=$$t_5.getSelectedFieldIndexDelegate();if($v_2==="-1")$v_2=$$t_5.get_$9z_1();$$t_5.setSelectedFieldIndexDelegate($v_2)});if($v_1.state()==="pending"){this.raisePropertyChanged("EntityLoadCommenced");var $$t_6=this;$v_1.always(function(){$$t_6.raisePropertyChanged("EntityLoadCompleted")})}return $p0},get_$9z_1:function(){return this.getFilteredAttributesDelegate().length>0?this.getFilteredAttributesDelegate()[0].toString():this.get_attributes().length>0?"0":"-1"},get_attributes:function(){IsNull(this.$1H_1)&&this.$5e_1(this.$Q_1.Fields);return this.$1H_1},get_filter:function(){if(IsNull(this.$2w_1))this.$2w_1=Mscrm.BusinessRules.NullAttributesFilter.instance();return this.$2w_1},set_filter:function(value){this.$2w_1=value;this.set_filteredAttributes(this.get_filter().applyIndexFilter(this.$Q_1.Fields));this.$1r_1=true;return value},$5e_1:function($p0){this.$1H_1=new Array(0);var $v_0=0;if(!IsNull($p0)&&this.$8k_1)for($v_0=0;$v_0<$p0.length;$v_0++)Array.add(this.$1H_1,this.$5f_1($v_0,$p0[$v_0].Label.Description,0));if(this.$2f_1){$v_0=$p0.length;this.$2u_1["ActiveStage"]=$v_0;Array.add(this.$1H_1,this.$5f_1($v_0++,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeLocalizedName("ActiveStage"),1));this.$2u_1["SelectedStage"]=$v_0;Array.add(this.$1H_1,this.$5f_1($v_0,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeLocalizedName("SelectedStage"),1))}else{this.$2u_1["BpfProcess"]=$v_0;Array.add(this.$1H_1,this.$5f_1($v_0++,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeLocalizedName("BpfProcess"),1));this.$2u_1["ActiveStageCategory"]=$v_0;Array.add(this.$1H_1,this.$5f_1($v_0++,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeLocalizedName("ActiveStageCategory"),1));this.$2u_1["SelectedStageCategory"]=$v_0;Array.add(this.$1H_1,this.$5f_1($v_0,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getBpfAttributeLocalizedName("SelectedStageCategory"),1))}},$5f_1:function($p0,$p1,$p2){this.$8Y_1[$p0.toString()]=$p2;var $v_0=new Mscrm.EnumOptionJsonWrapper;$v_0.Value=$p0;$v_0.Label=$p1;return $v_0},get_filteredAttributes:function(){return this.getFilteredAttributesDelegate()},set_filteredAttributes:function(value){this.setFilteredAttributesDelegate(value);return value},get_useOptionsFiltering:function(){return this.$1r_1},set_useOptionsFiltering:function(value){this.$1r_1=value;return value},get_selectedFieldLogicalName:function(){return this.getSelectedFieldLogicalNameDelegate()},set_selectedFieldLogicalName:function(value){this.setSelectedFieldLogicalNameDelegate(value);return value},get_selectedFieldIndex:function(){return this.getSelectedFieldIndexDelegate()},set_selectedFieldIndex:function(value){this.setSelectedFieldIndexDelegate(value);return value},getSelectedFieldIndexDelegate:function(){if(isNullOrEmptyString(this.$1w_1)&&isNullOrEmptyString(this.$5V_1)||IsNull(this.$Q_1.Fields))return "-1";var $v_0=this.$Q_1.Fields;!this.$1H_1&&this.$5e_1($v_0);if(this.$1o_1===1){if(this.$2u_1[this.$5V_1])return this.$2u_1[this.$5V_1]}else for(var $v_1=0;$v_1<$v_0.length;$v_1++)if($v_0[$v_1].LogicalName===this.$1w_1)return $v_1.toString();return "-1"},getAttributesDelegate:function(){return this.get_attributes()},setSelectedFieldIndexDelegate:function(index){if(index==="-1"){this.set_selectedFieldLogicalName("");this.$1o_1=0;return}else if(Number.parseInvariant(index)>=this.$Q_1.Fields.length){var $$dict_2=this.$2u_1;for(var $$key_3 in $$dict_2){var $v_0={key:$$key_3,value:$$dict_2[$$key_3]};$v_0.value===parseInt(index)&&this.set_selectedBpfField($v_0.key)}this.$1o_1=1}else{this.$1o_1=0;this.set_selectedFieldLogicalName(this.$Q_1.Fields[Number.parseInvariant(index)].LogicalName)}},get_selectedFieldType:function(){return this.$1o_1},set_selectedFieldType:function(value){this.$1o_1=value;return value},get_selectedBpfField:function(){return this.getSelectedBpfFieldDelegate()},set_selectedBpfField:function(value){this.setSelectedBpfFieldDelegate(value);return value},getSelectedFieldLogicalNameDelegate:function(){return this.$1w_1},getEntityLogicalNameDelegate:function(){return this.$Q_1.EntityLogicalName},setEntityMetadataDelegate:function(newEntity){this.set_$A2_1(newEntity)},setSelectedFieldLogicalNameDelegate:function(name){this.$1w_1=name;this.raisePropertyChanged("FieldChangedProperty")},getSelectedBpfFieldDelegate:function(){return this.$5V_1},setSelectedBpfFieldDelegate:function(name){this.$5V_1=name;this.raisePropertyChanged("BpfFieldChangedPropertyValue")},getFilteredAttributesDelegate:function(){return this.$3L_1},setFilteredAttributesDelegate:function(attributes){this.$3L_1=this.get_filter().applyFilterOnFilteredArray(this.$Q_1.Fields,attributes);this.raisePropertyChanged("FilteredAttributeListProperty")},get_isBpfStageFieldControl:function(){return this.$2f_1},set_isBpfStageFieldControl:function(value){this.$2f_1=value;return value},$1H_1:null,$3L_1:null,$1o_1:0,$5V_1:null,$2f_1:false};Mscrm.BusinessRules.ViewModels.FieldControlViewModel=function(entityMetadata){this.$$d_getAttributesDelegate=Function.createDelegate(this,this.getAttributesDelegate);this.$$d_setSelectedFieldIndexDelegate=Function.createDelegate(this,this.setSelectedFieldIndexDelegate);this.$$d_getSelectedFieldIndexDelegate=Function.createDelegate(this,this.getSelectedFieldIndexDelegate);this.$$d_getFilteredAttributesDelegate=Function.createDelegate(this,this.getFilteredAttributesDelegate);this.$$d_getEntityLogicalNameDelegate=Function.createDelegate(this,this.getEntityLogicalNameDelegate);this.$$d_getSelectedFieldLogicalNameDelegate=Function.createDelegate(this,this.getSelectedFieldLogicalNameDelegate);this.$$d_setFilteredAttributesDelegate=Function.createDelegate(this,this.setFilteredAttributesDelegate);Mscrm.BusinessRules.ViewModels.FieldControlViewModel.initializeBase(this);this.$Q_1=entityMetadata;this.$3L_1=Mscrm.BusinessRules.NullAttributesFilter.instance().applyIndexFilter(this.$5i_1(this.$Q_1));this.$6J_1=this.$3L_1};Mscrm.BusinessRules.ViewModels.FieldControlViewModel.prototype={$Q_1:null,$1w_1:null,$1r_1:false,$2w_1:null,$4V_1:false,set_$A2_1:function($p0){var $v_0=this.$Q_1.EntityLogicalName,$v_1=this.$1w_1;this.$Q_1=$p0;var $v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getLogicalNameFromTypeCode(this.$Q_1.EntityTypeCode),$v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_2),$$t_8=this;$v_3.done(function($p1_0){$$t_8.$5e_1($p1_0);$$t_8.raisePropertyChanged("EntityProperty");$$t_8.raisePropertyChanged("AttributeListProperty");if($$t_8.$6K_1&&!isNullOrEmptyString($v_0)&&!isNullOrEmptyString($v_1)){var $v_5=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_0,$v_1).Type;$$t_8.$6K_1=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getAttributesForAttributeType($v_5,$v_2,null)}$$t_8.setFilteredAttributesDelegate($$t_8.$6K_1);var $v_4=$$t_8.getSelectedFieldIndexDelegate();if($v_4==="-1")$v_4=$$t_8.get_$9z_1();$$t_8.setSelectedFieldIndexDelegate($v_4)});if($v_3.state()==="pending"){this.raisePropertyChanged("EntityLoadCommenced");var $$t_9=this;$v_3.always(function(){$$t_9.raisePropertyChanged("EntityLoadCompleted")})}return $p0},get_$9z_1:function(){return this.getFilteredAttributesDelegate().length>0?this.getFilteredAttributesDelegate()[0].toString():this.get_attributes().length>0&&!this.$1r_1?"0":"-1"},get_attributes:function(){IsNull(this.$1H_1)&&this.$5e_1(this.$Q_1);if(IsNull(this.$1H_1)||this.$1H_1.length!==this.$5i_1(this.$Q_1).length){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getLogicalNameFromTypeCode(this.$Q_1.EntityTypeCode),$$t_2=this;Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_0).done(function($p1_0){$$t_2.$5e_1($p1_0);$$t_2.setEntityMetadataDelegate($$t_2.$Q_1)})}return this.$1H_1},get_filter:function(){if(IsNull(this.$2w_1))this.$2w_1=Mscrm.BusinessRules.NullAttributesFilter.instance();return this.$2w_1},set_filter:function(value){this.$2w_1=value;this.setFilteredAttributesDelegate(this.$6J_1);this.$1r_1=true;return value},$5e_1:function($p0){this.$1H_1=new Array(0);var $v_0=this.$5i_1($p0);if(!IsNull($v_0))for(var $v_1=0;$v_1<$v_0.length;$v_1++){var $v_2=new Mscrm.EnumOptionJsonWrapper;$v_2.Value=$v_1;$v_2.Label=$v_0[$v_1].Label.Description;Array.add(this.$1H_1,$v_2)}},get_useOptionsFiltering:function(){return this.$1r_1},set_useOptionsFiltering:function(value){this.$1r_1=value;return value},get_isRelationshipFieldList:function(){return this.$4V_1},set_isRelationshipFieldList:function(value){this.$4V_1=value;return value},get_filteredAttributes:function(){return this.getFilteredAttributesDelegate()},set_filteredAttributes:function(value){this.setFilteredAttributesDelegate(value);return value},getFilteredAttributesDelegate:function(){return this.$3L_1},setFilteredAttributesDelegate:function(attributes){this.$6K_1=attributes;var $v_0=this.$5i_1(this.$Q_1);this.$6J_1=IsNull(attributes)?Mscrm.BusinessRules.NullAttributesFilter.instance().applyIndexFilter($v_0):attributes;this.$3L_1=this.get_filter().applyFilterOnFilteredArray($v_0,this.$6J_1);this.raisePropertyChanged("FilteredAttributeListProperty")},get_selectedFieldLogicalName:function(){return this.getSelectedFieldLogicalNameDelegate()},set_selectedFieldLogicalName:function(value){this.setSelectedFieldLogicalNameDelegate(value);return value},getSelectedFieldLogicalNameDelegate:function(){return this.$1w_1},setSelectedFieldLogicalNameDelegate:function(name){this.$1w_1=name;this.raisePropertyChanged("FieldChangedProperty")},get_selectedFieldIndex:function(){return this.getSelectedFieldIndexDelegate()},set_selectedFieldIndex:function(value){this.setSelectedFieldIndexDelegate(value);return value},getSelectedFieldIndexDelegate:function(){var $v_0=this.$5i_1(this.$Q_1);if(isNullOrEmptyString(this.get_selectedFieldLogicalName())||IsNull($v_0))return "-1";for(var $v_1=0;$v_1<$v_0.length;$v_1++)if($v_0[$v_1].LogicalName===this.get_selectedFieldLogicalName())return $v_1.toString();return "-1"},setSelectedFieldIndexDelegate:function(index){if(index==="-1"){this.set_selectedFieldLogicalName("");return}this.set_selectedFieldLogicalName(this.$5i_1(this.$Q_1)[Number.parseInvariant(index)].LogicalName)},getAttributesDelegate:function(){return this.get_attributes()},getEntityLogicalNameDelegate:function(){return this.$Q_1.EntityLogicalName},setEntityMetadataDelegate:function(newEntity){this.set_$A2_1(newEntity)},$5i_1:function($p0){var $v_0=new Array(0);if(this.$4V_1){var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.createRelationshipField($p0);Array.add($v_0,$v_1)}Array.addRange($v_0,$p0.Fields);return $v_0},$1H_1:null,$6K_1:null,$3L_1:null,$6J_1:null};Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel=function(entityMetadata){this.$$d_setSelectedFieldIndexDelegate=Function.createDelegate(this,this.setSelectedFieldIndexDelegate);this.$$d_getSelectedFieldIndexDelegate=Function.createDelegate(this,this.getSelectedFieldIndexDelegate);this.$$d_getSelectedFieldLogicalNameDelegate=Function.createDelegate(this,this.getSelectedFieldLogicalNameDelegate);this.$76_1=window.LOCID_CALCFIELD_CURRENTENTITY;Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.initializeBase(this);this.$8F_1=entityMetadata};Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.prototype={$8F_1:null,$1w_1:null,$6E_1:null,$4W_1:null,get_lookupFields:function(){if(IsNull(this.$6E_1)){this.$6E_1=new Array(0);this.$4W_1=Mscrm.BusinessRules.SharedMethods.getList(String);this.populateLookupFields(this.$8F_1,this.$6E_1)}return this.$6E_1},populateLookupFields:function(currentEntityMetadata,lookupFields){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption(String.format("{0} ({1})",this.$76_1,currentEntityMetadata.DisplayName),0);Array.add(lookupFields,$v_0);this.$4W_1.add(this.$76_1);var $v_1=Mscrm.BusinessRules.MetadataUtility.singleEntityLookupsMetadataFromMetadata(currentEntityMetadata);if(!IsNull($v_1))for(var $v_2=0;$v_2<$v_1.length;$v_2++){var $v_3=Mscrm.BusinessRules.MetadataUtility.lookupToEntity($v_1[$v_2].LogicalName);if(isNullOrEmptyString($v_3))continue;var $v_4=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($v_3).DisplayName,$v_5=Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption(String.format("{0} ({1})",$v_1[$v_2].Label.Description,$v_4),$v_2+1);Array.add(lookupFields,$v_5);this.$4W_1.add($v_1[$v_2].LogicalName)}},get_selectedFieldLogicalName:function(){return this.getSelectedFieldLogicalNameDelegate()},set_selectedFieldLogicalName:function(value){this.setSelectedFieldLogicalNameDelegate(value);return value},get_selectedFieldIndex:function(){return this.getSelectedFieldIndexDelegate()},set_selectedFieldIndex:function(value){this.setSelectedFieldIndexDelegate(value);return value},getSelectedFieldIndexDelegate:function(){var $v_0=this.get_selectedFieldLogicalName();if(isNullOrEmptyString($v_0)||$v_0===this.$76_1)return "0";for(var $v_1=0;$v_1<this.get_lookupFields().length;$v_1++)if($v_0===this.$4W_1.get_item($v_1))return $v_1.toString();return "-1"},setSelectedFieldIndexDelegate:function(index){if(index==="-1"){this.set_selectedFieldLogicalName("");return}if(index==="0"){this.set_selectedFieldLogicalName(this.$4W_1.get_item(0));return}var $v_0=Number.parseInvariant(index),$v_1=this.$4W_1.get_item($v_0);this.set_selectedFieldLogicalName($v_1)},getSelectedFieldLogicalNameDelegate:function(){return this.$1w_1},setSelectedFieldLogicalNameDelegate:function(name){var $v_0=this.$1w_1;this.$1w_1=name;$v_0!==name&&this.raisePropertyChanged("FieldChangedProperty")}};Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory=function(){};Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H=function($p0){if(Microsoft.Crm.Workflow.Expressions.BinaryExpression.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.BinaryExpressionAdaptor($p0);if(Microsoft.Crm.Workflow.Expressions.UnaryExpression.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.UnaryExpressionAdaptor($p0);if(Microsoft.Crm.Workflow.Expressions.MethodCallExpression.isInstanceOfType($p0)){if($p0.get_method()===23)return new Mscrm.BusinessRules.ViewModels.BpfStageExpressionAdapter($p0);return new Mscrm.BusinessRules.ViewModels.ArithmeticMethodCallExpressionAdaptor($p0)}throw Mscrm.BusinessRules.SharedMethods.createException("Unsupported Expression")};Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1=function(expression){this.$S_0=expression};Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.$$=function(TExpression){var $$cn="ExpressionAdaptorBase$1$"+TExpression.getName().replace(/\./g,"_");if(!Mscrm.BusinessRules.ViewModels[$$cn]){var $$ccr=Mscrm.BusinessRules.ViewModels[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1"]={TExpression:TExpression};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.apply(this,$v_0)};$$ccr.registerClass("Mscrm.BusinessRules.ViewModels."+$$cn,null,Mscrm.BusinessRules.ViewModels.IExpressionAdaptor);var $$dict_5=Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.prototype;for(var $$key_6 in $$dict_5){var $$entry_7={key:$$key_6,value:$$dict_5[$$key_6]};if("constructor"!==$$entry_7.key)$$ccr.prototype[$$entry_7.key]=$$entry_7.value}}return Mscrm.BusinessRules.ViewModels[$$cn]};Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.prototype={get_leftOperand:function(){return this.$4_0},set_leftOperand:function(value){this.$4_0=value;return value},get_expressionOperator:function(){return this.$L_0},set_expressionOperator:function(value){this.$L_0=value;return value},get_rightOperands:function(){return this.$8g_0},set_rightOperands:function(value){this.$8g_0=value;return value},get_expression:function(){return this.$S_0},$4_0:null,$L_0:0,$8g_0:null,$S_0:null};Mscrm.BusinessRules.ViewModels.BinaryExpressionAdaptor=function(expression){Mscrm.BusinessRules.ViewModels.BinaryExpressionAdaptor.initializeBase(this,[expression]);this.set_leftOperand(expression.get_leftOperand());this.set_expressionOperator(expression.get_operator());this.set_rightOperands(expression.get_rightOperands())};Mscrm.BusinessRules.ViewModels.UnaryExpressionAdaptor=function(expression){Mscrm.BusinessRules.ViewModels.UnaryExpressionAdaptor.initializeBase(this,[expression]);this.set_leftOperand(expression.get_operand());this.set_expressionOperator(expression.get_operator());this.set_rightOperands(null)};Mscrm.BusinessRules.ViewModels.ArithmeticMethodCallExpressionAdaptor=function(expression){Mscrm.BusinessRules.ViewModels.ArithmeticMethodCallExpressionAdaptor.initializeBase(this,[expression]);var $v_0=expression.getParameters();if(!$v_0||$v_0.length!==3)throw Mscrm.BusinessRules.SharedMethods.createException("Method call expression for arithmetic calculation is not in correct format");this.set_leftOperand(this.$AH_1($v_0[1]));this.set_rightOperands(new Microsoft.Crm.Workflow.Expressions.ExpressionCollection);this.get_rightOperands().add(this.$AH_1($v_0[2]));this.set_expressionOperator($v_0[0])};Mscrm.BusinessRules.ViewModels.ArithmeticMethodCallExpressionAdaptor.prototype={$AH_1:function($p0){var $v_0=$p0,$v_1=$v_0.getParameters();if(!$v_1||$v_1.length!==1)throw Mscrm.BusinessRules.SharedMethods.createException("Method call expression for arithmetic calculation is not in correct format");return $v_1[0]}};Mscrm.BusinessRules.ViewModels.BpfStageExpressionAdapter=function(expression){Mscrm.BusinessRules.ViewModels.BpfStageExpressionAdapter.initializeBase(this,[expression]);var $v_0=expression.getParameters();if(!$v_0)throw Mscrm.BusinessRules.SharedMethods.createException("Incorrect format for BPF stage method call subexpression.");this.set_leftOperand($v_0[0]);this.set_rightOperands(new Microsoft.Crm.Workflow.Expressions.ExpressionCollection);this.get_rightOperands().add($v_0[1])};Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1=function(sectionName,step){Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.$$(this.$$gta["Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1"]["TStep"]).initializeBase(this,[sectionName,step]);this.$5a_3=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.ViewModels.ISectionViewModel);for(var $v_0=0;$v_0<this.get_step().get_Steps().get_Count();$v_0++){if(Microsoft.Crm.Workflow.ObjectModel.SetNextStageStep.isInstanceOfType(this.get_step().get_Steps().get_item($v_0)))continue;this.$5a_3.add(Mscrm.BusinessRules.ViewModels.StepSectionViewModelFactory.$AM(this.get_step().get_Steps().get_item($v_0)))}};Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.$$=function(TStep){var $$cn="CompositeStepSectionViewModel$1$"+TStep.getName().replace(/\./g,"_");if(!Mscrm.BusinessRules.ViewModels[$$cn]){var $$ccr=Mscrm.BusinessRules.ViewModels[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1"]={TStep:TStep};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.apply(this,$v_0)};$$ccr.registerClass("Mscrm.BusinessRules.ViewModels."+$$cn,Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(TStep));var $$dict_5=Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.prototype;for(var $$key_6 in $$dict_5){var $$entry_7={key:$$key_6,value:$$dict_5[$$key_6]};if("constructor"!==$$entry_7.key)$$ccr.prototype[$$entry_7.key]=$$entry_7.value}}return Mscrm.BusinessRules.ViewModels[$$cn]};Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.prototype={get_stepViewModels:function(){return this.$5a_3},validate:function(){var $v_0=Mscrm.BusinessRules.ViewModels.ViewModel.prototype.validate.call(this);if($v_0.isValid)for(var $v_1=0;$v_1<this.$5a_3.get_count();$v_1++){var $v_2=this.$5a_3.get_item($v_1).validate();if(!$v_2.isValid)return $v_2}return $v_0},$5a_3:null};Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel=function($p0){Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel.initializeBase(this,["Conditions",$p0]);var $v_0=$p0.get_Steps().get_item(0);if($v_0.get_conditionBranchDisplayMode())throw Mscrm.BusinessRules.SharedMethods.createException("Incorrect Branch. Expecting only If")};Mscrm.BusinessRules.ViewModels.SectionViewModel=function(sectionName){Mscrm.BusinessRules.ViewModels.SectionViewModel.initializeBase(this);this.$8i_1=sectionName};Mscrm.BusinessRules.ViewModels.SectionViewModel.prototype={get_sectionName:function(){return this.$8i_1},$8i_1:null};Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1=function(sectionName,step){Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(this.$$gta["Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1"]["TStep"]).initializeBase(this,[sectionName]);this.$4g_2=step;this.$H_2=step.get_Id()};Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$=function(TStep){var $$cn="StepSectionViewModel$1$"+TStep.getName().replace(/\./g,"_");if(!Mscrm.BusinessRules.ViewModels[$$cn]){var $$ccr=Mscrm.BusinessRules.ViewModels[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1"]={TStep:TStep};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.apply(this,$v_0)};$$ccr.registerClass("Mscrm.BusinessRules.ViewModels."+$$cn,Mscrm.BusinessRules.ViewModels.SectionViewModel,Mscrm.BusinessRules.ViewModels.IStepSectionViewModel);var $$dict_5=Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.prototype;for(var $$key_6 in $$dict_5){var $$entry_7={key:$$key_6,value:$$dict_5[$$key_6]};if("constructor"!==$$entry_7.key)$$ccr.prototype[$$entry_7.key]=$$entry_7.value}}return Mscrm.BusinessRules.ViewModels[$$cn]};Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.prototype={get_stepId:function(){return this.$H_2},get_step:function(){return this.$4g_2},$H_2:null,$4g_2:null};Mscrm.BusinessRules.ViewModels.StepSectionViewModelFactory=function(){};Mscrm.BusinessRules.ViewModels.StepSectionViewModelFactory.$AM=function($p0){if(Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep.isInstanceOfType($p0))if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type||Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type===10)return new Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel($p0,true);else return new Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel($p0);else return new Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel($p0,false);if(Microsoft.Crm.Workflow.ObjectModel.SetDisplayModeStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.SetFieldRequiredLevelStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.SetVisibilityStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.SetDefaultValueStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.SetMessageStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.CustomJavascriptStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.ConditionBranchStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.ConditionStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel($p0);if(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep.isInstanceOfType($p0))return new Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel($p0);throw Mscrm.BusinessRules.SharedMethods.createException("Unsupported Exception")};Type.registerNamespace("Mscrm.BusinessRules.Views");Mscrm.BusinessRules.Views.IBranchingExpressionView=function(){};Mscrm.BusinessRules.Views.IBranchingExpressionView.registerInterface("Mscrm.BusinessRules.Views.IBranchingExpressionView");Mscrm.BusinessRules.Views.IBranchingConditionsSectionsView=function(){};Mscrm.BusinessRules.Views.IBranchingConditionsSectionsView.registerInterface("Mscrm.BusinessRules.Views.IBranchingConditionsSectionsView");Mscrm.BusinessRules.Views.IBusinessRuleStepInlineViewBase=function(){};Mscrm.BusinessRules.Views.IBusinessRuleStepInlineViewBase.registerInterface("Mscrm.BusinessRules.Views.IBusinessRuleStepInlineViewBase");Mscrm.BusinessRules.Views.IRollupFieldReadToolBarView=function(){};Mscrm.BusinessRules.Views.IRollupFieldReadToolBarView.registerInterface("Mscrm.BusinessRules.Views.IRollupFieldReadToolBarView");Mscrm.BusinessRules.Views.IInlineExpressionView=function(){};Mscrm.BusinessRules.Views.IInlineExpressionView.registerInterface("Mscrm.BusinessRules.Views.IInlineExpressionView");Mscrm.BusinessRules.Views.IAttributeOperandView=function(){};Mscrm.BusinessRules.Views.IAttributeOperandView.registerInterface("Mscrm.BusinessRules.Views.IAttributeOperandView");Mscrm.BusinessRules.Views.INullOperandView=function(){};Mscrm.BusinessRules.Views.INullOperandView.registerInterface("Mscrm.BusinessRules.Views.INullOperandView");Mscrm.BusinessRules.Views.IExpressionView=function(){};Mscrm.BusinessRules.Views.IExpressionView.registerInterface("Mscrm.BusinessRules.Views.IExpressionView");Mscrm.BusinessRules.Views.IOperandView=function(){};Mscrm.BusinessRules.Views.IOperandView.registerInterface("Mscrm.BusinessRules.Views.IOperandView");Mscrm.BusinessRules.Views.IResetFocus=function(){};Mscrm.BusinessRules.Views.IResetFocus.registerInterface("Mscrm.BusinessRules.Views.IResetFocus");Mscrm.BusinessRules.Views.IOperatorView=function(){};Mscrm.BusinessRules.Views.IOperatorView.registerInterface("Mscrm.BusinessRules.Views.IOperatorView");Mscrm.BusinessRules.Views.ILeftOperandView=function(){};Mscrm.BusinessRules.Views.ILeftOperandView.registerInterface("Mscrm.BusinessRules.Views.ILeftOperandView");Mscrm.BusinessRules.Views.IRightOperandView=function(){};Mscrm.BusinessRules.Views.IRightOperandView.registerInterface("Mscrm.BusinessRules.Views.IRightOperandView");Mscrm.BusinessRules.Views.IOperandTypeView=function(){};Mscrm.BusinessRules.Views.IOperandTypeView.registerInterface("Mscrm.BusinessRules.Views.IOperandTypeView");Mscrm.BusinessRules.Views.IAndOrView=function(){};Mscrm.BusinessRules.Views.IAndOrView.registerInterface("Mscrm.BusinessRules.Views.IAndOrView");Mscrm.BusinessRules.Views.IValueInlineControl=function(){};Mscrm.BusinessRules.Views.IValueInlineControl.registerInterface("Mscrm.BusinessRules.Views.IValueInlineControl");Mscrm.BusinessRules.Views.IValueInlineControlRepository=function(){};Mscrm.BusinessRules.Views.IValueInlineControlRepository.registerInterface("Mscrm.BusinessRules.Views.IValueInlineControlRepository");Mscrm.BusinessRules.Views.IConditionsSectionsView=function(){};Mscrm.BusinessRules.Views.IConditionsSectionsView.registerInterface("Mscrm.BusinessRules.Views.IConditionsSectionsView");Mscrm.BusinessRules.Views.ISectionView=function(){};Mscrm.BusinessRules.Views.ISectionView.registerInterface("Mscrm.BusinessRules.Views.ISectionView");Mscrm.BusinessRules.Views.IStepSectionView=function(){};Mscrm.BusinessRules.Views.IStepSectionView.registerInterface("Mscrm.BusinessRules.Views.IStepSectionView");Mscrm.BusinessRules.Views.IReadToolBarButtonView=function(){};Mscrm.BusinessRules.Views.IReadToolBarButtonView.registerInterface("Mscrm.BusinessRules.Views.IReadToolBarButtonView");Mscrm.BusinessRules.Views.IReadToolBarView=function(){};Mscrm.BusinessRules.Views.IReadToolBarView.registerInterface("Mscrm.BusinessRules.Views.IReadToolBarView");Mscrm.BusinessRules.Views.IActionReadToolBarView=function(){};Mscrm.BusinessRules.Views.IActionReadToolBarView.registerInterface("Mscrm.BusinessRules.Views.IActionReadToolBarView");Mscrm.BusinessRules.Views.IConditionReadToolBarView=function(){};Mscrm.BusinessRules.Views.IConditionReadToolBarView.registerInterface("Mscrm.BusinessRules.Views.IConditionReadToolBarView");Mscrm.BusinessRules.Views.IExpressionReadToolBarView=function(){};Mscrm.BusinessRules.Views.IExpressionReadToolBarView.registerInterface("Mscrm.BusinessRules.Views.IExpressionReadToolBarView");Mscrm.BusinessRules.Views.IEditToolBarView=function(){};Mscrm.BusinessRules.Views.IEditToolBarView.registerInterface("Mscrm.BusinessRules.Views.IEditToolBarView");Mscrm.BusinessRules.Views.HierarchyType=function(){};Mscrm.BusinessRules.Views.HierarchyType.prototype={none:0,single:1,multiple:2};Mscrm.BusinessRules.Views.HierarchyType.registerEnum("Mscrm.BusinessRules.Views.HierarchyType",false);Mscrm.BusinessRules.Views.ICompositeResultsView=function(){};Mscrm.BusinessRules.Views.ICompositeResultsView.registerInterface("Mscrm.BusinessRules.Views.ICompositeResultsView");Mscrm.BusinessRules.Views.IFormBodyView=function(){};Mscrm.BusinessRules.Views.IFormBodyView.registerInterface("Mscrm.BusinessRules.Views.IFormBodyView");Mscrm.BusinessRules.Views.IHeaderView=function(){};Mscrm.BusinessRules.Views.IHeaderView.registerInterface("Mscrm.BusinessRules.Views.IHeaderView");Mscrm.BusinessRules.Views.IInlineEditControlMediatorProvider=function(){};Mscrm.BusinessRules.Views.IInlineEditControlMediatorProvider.registerInterface("Mscrm.BusinessRules.Views.IInlineEditControlMediatorProvider");Mscrm.BusinessRules.Views.IManageBusinessRuleView=function(){};Mscrm.BusinessRules.Views.IManageBusinessRuleView.registerInterface("Mscrm.BusinessRules.Views.IManageBusinessRuleView");Mscrm.BusinessRules.Views.IView=function(){};Mscrm.BusinessRules.Views.IView.registerInterface("Mscrm.BusinessRules.Views.IView");Mscrm.BusinessRules.Views.IResults=function(){};Mscrm.BusinessRules.Views.IResults.registerInterface("Mscrm.BusinessRules.Views.IResults");Mscrm.BusinessRules.Views.IWarningView=function(){};Mscrm.BusinessRules.Views.IWarningView.registerInterface("Mscrm.BusinessRules.Views.IWarningView");Mscrm.BusinessRules.Views.MessageLevel=function(){};Mscrm.BusinessRules.Views.MessageLevel.prototype={warning:0,error:1};Mscrm.BusinessRules.Views.MessageLevel.registerEnum("Mscrm.BusinessRules.Views.MessageLevel",false);Mscrm.BusinessRules.Views.ResultType=function(){};Mscrm.BusinessRules.Views.ResultType.prototype={fieldLevelSecurityWarning:0,invalidAttribute:1,invalidOption:2,nonhierarchical:3,multipleHierarchical:4,invalidFormulaDefinition:5,noLongerHierarchical:6};Mscrm.BusinessRules.Views.ResultType.registerEnum("Mscrm.BusinessRules.Views.ResultType",false);Mscrm.BusinessRules.Views.IEntityAttributeVisitorResults=function(){};Mscrm.BusinessRules.Views.IEntityAttributeVisitorResults.registerInterface("Mscrm.BusinessRules.Views.IEntityAttributeVisitorResults");Mscrm.BusinessRules.Views.BranchingExpressionView=function(element){Mscrm.BusinessRules.Views.BranchingExpressionView.initializeBase(this,[element])};Mscrm.BusinessRules.Views.BranchingExpressionView.prototype={createInlineView:function(){var $v_0;$v_0=Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getBranchingExpressionInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.$0_1);$v_0.set_parent(this);return $v_0},$7T_2:false,get_isPromoteToIf:function(){return this.$7T_2},set_isPromoteToIf:function(value){this.$7T_2=value;return value}};Mscrm.BusinessRules.Views.InlineBranchingExpressionEditView=function($p0){Mscrm.BusinessRules.Views.InlineBranchingExpressionEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineBranchingExpressionEditView.prototype={updateAttribute:function(){Mscrm.BusinessRules.Views.InlineExpressionEditView.prototype.updateAttribute.call(this);var $v_0=this.$2_2.get_viewModel();$v_0.set_showWarning(false);$v_0.$5p_2=false},discard:function($p0){var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;if($v_1.$4U_1&&$v_1.$7T_2){var $$t_5=this,$v_2=new Mscrm.BusinessRuleConfirmFlyout(this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Views.ConditionReadToolBarView.get_bodyViewContainerId()).get_jQueryObject(),function($p1_0){Mscrm.BusinessRules.Views.InlineExpressionEditView.prototype.discard.call($$t_5,$p0)},null);$v_2.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBL_DELETE_ERROR_MESSAGE,"")}else Mscrm.BusinessRules.Views.InlineExpressionEditView.prototype.discard.call(this,$p0)}};Mscrm.BusinessRules.Views.InlineBranchingExpressionView=function($p0){this.$$d_$DC_3=Function.createDelegate(this,this.$DC_3);Mscrm.BusinessRules.Views.InlineBranchingExpressionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineBranchingExpressionView.prototype={get_controlId:function(){return this.get_chromeElement().attr("id")},get_warningElementId:function(){return this.get_chromeElement().attr("id")+"_w"},get_warningIcon:function(){return this.get_$Bs_3().get_warningIcon()},resetEditMode:function(){this.set_initializationState(this.get_initializationState()&~2)},bindEvent:function(){this.get_$7_3().add_propertyChanged(this.$$d_$DC_3)},unbindEvent:function(){this.get_$7_3().remove_propertyChanged(this.$$d_$DC_3)},get_$Bs_3:function(){return this.get_chromeBehavior()},get_$7_3:function(){return this.get_dataContext()},renderForRead:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.renderForRead.call(this);this.bindEvent()},dispose:function(){if(this.get_isDisposed())return;Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.dispose.call(this);this.unbindEvent()},$DC_3:function($p0,$p1){switch($p1.get_propertyName()){case "ShowWarningProperty":if(this.get_$7_3().$4f_2)this.get_warningIcon().removeClass("hidecontrol");else this.get_warningIcon().addClass("hidecontrol");break}},get_getEditViewObject:function(){var $v_0=new Mscrm.BusinessRules.Views.InlineBranchingExpressionEditView(this);$v_0.$2_2=this.get_$7_3().get_editViewModel();return $v_0},updateReadModeExpression:function(){if(this.get_$6s_3().get_conditionBranchDisplayMode()!==2){Mscrm.BusinessRules.Views.InlineExpressionView.prototype.updateValueElement.call(this);this.get_$6s_3().$y_2.set_conditionBranchDisplayMode(this.get_$6s_3().get_conditionBranchDisplayMode());!IsNull(this.get_editView())&&this.get_editView().$4M_2.updateFirstConditionDisplayText()}else{this.get_stepValueContent().html(String.format(Mscrm.BusinessRules.HtmlFormat.elseConditionFormat,CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PBLEXPRESSION_ELSEDISPLAY)));this.get_$7_3().set_showWarning(false)}},updateValueElement:function(){this.get_$6s_3().get_conditionBranchDisplayMode()===2&&this.get_$6s_3().set_conditionBranchDisplayMode(1);Mscrm.BusinessRules.Views.InlineExpressionView.prototype.updateValueElement.call(this)},get_$6s_3:function(){return this.$E_1.get_dataContext()}};Mscrm.BusinessRules.Views.BranchingConditionsSectionsView=function(element){this.$$d_$E9_3=Function.createDelegate(this,this.$E9_3);Mscrm.BusinessRules.Views.BranchingConditionsSectionsView.initializeBase(this,[element])};Mscrm.BusinessRules.Views.BranchingConditionsSectionsView.prototype={$7p_3:0,$5w_3:null,get_deleteHandler:function(){return this.$5w_3},set_deleteHandler:function(value){this.$5w_3=value;return value},initialize:function(){Mscrm.BusinessRules.Views.ConditionsSectionsView.prototype.initialize.call(this);this.get_$7_3().add_propertyChanged(this.$$d_$E9_3);this.get_$7_3().get_conditionBranchDisplayMode()===2&&this.get_$7_3().set_disableAddButton(true);this.get_$Ar_3().initialize()},dispose:function(){if(this.$9_0)return;this.get_$7_3().remove_propertyChanged(this.$$d_$E9_3);this.get_$7_3().$6b_2&&this.get_$8t_3().unbindAll();this.get_$Ar_3().dispose();Mscrm.BusinessRules.Views.ConditionsSectionsView.prototype.dispose.call(this)},enableAddConditionEvent:function(){Mscrm.BusinessRules.Views.ConditionsSectionsView.prototype.enableAddConditionEvent.call(this);if(this.get_$7_3().$6b_2){this.get_$8t_3().click(this.$$d_addNewExpressions);var $$t_1=this;this.get_$8t_3().bind("keydown",function($p1_0){$p1_0.which===13&&$$t_1.addNewExpressions($p1_0)})}},$E9_3:function($p0,$p1){switch($p1.get_propertyName()){case "EntityChangedProperty":this.$D6_3();break;case "DisableAddConditionProperty":this.$D4_3();break}},$D6_3:function(){for(var $v_0=new Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder,$v_1=this.$7p_3+1,$v_2=0;$v_2<this.get_expressions().get_count();$v_2++){var $v_3=this.get_expressions().get_item($v_2).get_dataContext(),$v_4=this.get_expressions().get_item($v_2).get_inlineView();$v_4.unbindEvent();var $v_5=$v_3.$H_1.length,$v_6=String.format("_{0}",this.$7p_3);if($v_3.$H_1.endsWith($v_6))$v_5=$v_5-$v_6.length;var $v_7=$v_3.$H_1.substring(0,$v_5)+String.format("_{0}",$v_1),$v_8=$v_0.buildExpressionViewModel($v_3.$3Q_2,2,$v_7,this.get_$7_3());$v_8.$5p_2=true;$v_4.resetEditMode();if(!IsNull($v_4.get_editView())){$v_4.get_editView().get_editElementWrapper().remove();$v_4.get_editView().dispose();$v_4.get_editView().$2_2.dispose();$v_4.set_editView(null)}this.get_$7_3().$i_1.set_item($v_2,$v_8);this.get_expressions().get_item($v_2).set_dataContext($v_8);this.get_expressions().get_item($v_2).get_inlineView().set_dataContext($v_8);$v_4.bindEvent();$v_3.dispose()}this.$7p_3=$v_1},$D4_3:function(){if(this.get_$7_3().$5y_1)this.disableAddConditionEvent();else this.enableAddConditionEvent()},createImageBehavior:function(){return new Mscrm.BusinessRules.Views.BranchingAddImageBehavior(this.get_addControl())},initializeChildExpressions:function(parentElement){var $v_0=parentElement.children("*"),$v_1=this.get_$7_3().$i_1;this.get_$7_3().get_conditionBranchDisplayMode()===2&&$v_0.get_length()===1&&!$v_1.get_count()&&this.get_$7_3().buildAndAddElseExpressionViewModel();Mscrm.BusinessRules.Views.ConditionsSectionsView.prototype.initializeChildExpressions.call(this,parentElement)},get_needDeleteConditionBranch:function(){return this.get_expressions().get_count()<=1},get_canRemoveCondition:function(){return this.get_$7_3().get_canRemoveCondition()},deleteView:function(){!IsNull(this.$5w_3)&&this.$5w_3(this)},createExpressionView:function(expressionViewModel,expressionViewElement){var $v_0=new Mscrm.BusinessRules.Views.BranchingExpressionView(expressionViewElement);$v_0.set_dataContext(expressionViewModel);$v_0.set_parent(this);$v_0.initialize();return $v_0},addNewExpressionInternal:function(){if(this.get_$7_3().get_conditionBranchDisplayMode()!==2)Mscrm.BusinessRules.Views.ConditionsSectionsView.prototype.addNewExpressionInternal.call(this);else{var $v_0=new Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder,$v_1=$v_0.buildExpressionViewModel(!this.get_$7_3().$i_1.get_count(),2,Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.get_instance().getNextUniqueId(this.$1_1.getAttribute("id")),this.get_$7_3()),$v_2=this.$EX_3($v_1),$v_3=this.createExpressionView($v_1,$v_2);$v_3.set_isNewCreated(false);$v_1.confirm();this.get_$7_3().addExpression($v_1);this.get_expressions().add($v_3);$v_3.setFocus();this.scrollIntoView($v_3)}},scrollIntoView:function(view){},$7Y_3:null,get_$Ar_3:function(){if(IsNull(this.$7Y_3))this.$7Y_3=new Mscrm.BusinessRules.Views.AddPlaceholderStateBehavior(this.$1_1,this.get_$7_3());return this.$7Y_3},$6w_3:null,get_$8t_3:function(){if(IsNull(this.$6w_3))this.$6w_3=this.get_jQueryProxy().selectInElement(".addconditionplaceholder",this.$1_1);return this.$6w_3},$EX_3:function($p0){var $v_0=new Sys.StringBuilder,$v_1=new Mscrm.BusinessRules.Builders.ExpressionElementHtmlBuilder;$v_1.buildElseConditionHtml($v_0,$p0);var $v_2=this.get_jQueryProxy().fromHtml($v_0.toString());this.get_expressionContainer().append($v_2);return $v_2},get_$7_3:function(){return this.get_dataContext()}};Mscrm.BusinessRules.Views.AddPlaceholderStateBehavior=function($p0,$p1){this.$$d_$C5_0=Function.createDelegate(this,this.$C5_0);this.$74_0=$p0;this.$0_0=$p1};Mscrm.BusinessRules.Views.AddPlaceholderStateBehavior.prototype={initialize:function(){if(!this.$0_0.get_usePlaceholderTextForEmptyCondition())return;this.$0_0.add_propertyChanged(this.$$d_$C5_0);this.showPlaceholderForEmptyConditions()},showPlaceholderForEmptyConditions:function(){if(!this.$0_0.get_expressionViewModels().get_count()){this.get_$9g_0().hide();this.get_$9j_0().show()}else{this.get_$9g_0().show();this.get_$9j_0().hide()}},$C5_0:function($p0,$p1){if($p1.get_propertyName()!=="ChildExpressionChanged")return;this.showPlaceholderForEmptyConditions()},get_$9v_0:function(){return this.$0_0.get_parent().get_stepId()},dispose:function(){if(!IsNull(this.$0_0)){if(!this.$0_0.get_usePlaceholderTextForEmptyCondition())return;this.$0_0.remove_propertyChanged(this.$$d_$C5_0)}},get_$9g_0:function(){if(!this.$6u_0)this.$6u_0=this.$74_0.find(String.format("#{0}_{1}","AddConditionButton",this.get_$9v_0()));return this.$6u_0},get_$9j_0:function(){if(!this.$6y_0)this.$6y_0=this.$74_0.find(String.format("#{0}_{1}","AddConditionPlaceholder",this.get_$9v_0()));return this.$6y_0},$74_0:null,$0_0:null,$6u_0:null,$6y_0:null};Mscrm.BusinessRules.Views.BranchingAddImageBehavior=function(addControl){Mscrm.BusinessRules.Views.BranchingAddImageBehavior.initializeBase(this,[addControl]);this.$B_1=addControl;this.$18_1=addControl.children(":first-child")};Mscrm.BusinessRules.Views.BranchingAddImageBehavior.prototype={initialize:function(){if(!IsNull(this.$18_1)){var $$t_0=this;this.$B_1.bind("mouseenter",function(){$$t_0.$18_1.addClass("button-cursor")});var $$t_1=this;this.$B_1.bind("mouseleave",function(){$$t_1.$18_1.removeClass("button-cursor")})}},unbindEvent:function(){if(!IsNull(this.$18_1)){this.$B_1.unbind("mouseenter",null);this.$B_1.unbind("mouseleave",null)}},dispose:function(){if(!IsNull(this.$B_1)){this.$B_1.unbind("mouseenter",null);this.$B_1.unbind("mouseleave",null);this.$B_1=null}},$B_1:null,$18_1:null};Mscrm.BusinessRules.Views.SetFormulaStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetFormulaStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetFormulaStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetFormulaStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().$C_3},set_results:function($p0){this.get_inlineView().$C_3=$p0;return $p0}};Mscrm.BusinessRules.Views.InlineSetFormulaStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetFormulaStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetFormulaStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "formulaExpressionProperty":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();if(!this.get_viewModel().get_formulaExpression())return;this.get_viewModel().get_formulaExpression().accept($v_0);this.$C_3=$v_0._results},buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildActionWithCondition(this.$E_1,$v_0);return $v_1},$2s_3:function(){var $$t_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),$v_0=new Microsoft.Crm.Workflow.FormulaDisplayVisitor(true,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Label.Description,$$t_2.$$d_getAttributeLocalizedNameFromEntity||($$t_2.$$d_getAttributeLocalizedNameFromEntity=Function.createDelegate($$t_2,$$t_2.getAttributeLocalizedNameFromEntity)));$v_0.visitSetAttributeValueStep(this.get_viewModel().get_step());var $v_1=$v_0.get_outputString();this.get_stepValueContent().html($v_1)},renderForRead:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.renderForRead.call(this);this.$2s_3()},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView(this)}};Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView.$16++;Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView.prototype={setFocus:function(){this.get_$3e_3().get(0).focus()},dispose:function(){this.get_$3e_3().unbind();this.$1P_3.dispose();Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.dispose.call(this)},get_isValid:function(){return true},setNewCreatedFlag:function(){},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);var $v_0=this.$3M_3.get_editView().get_editElement().val();if(this.get_$3e_3().hasClass("placeholder")||isNullOrEmptyString($v_0))return;var $v_1=new Mscrm.BusinessRules.FormulaParser(this.get_inlineView().get_viewModel().get_step().get_workflow(),Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField),$v_2=null;try{$v_2=$v_1.parse($v_0)}catch($v_4){this.$1P_3.displayView($v_4.message,1);return}Microsoft.Crm.Workflow.Utils.ExceptionUtility.assert(!!$v_2,"step is null");Microsoft.Crm.Workflow.Utils.ExceptionUtility.assert(Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep.isInstanceOfType($v_2),"step is not a SetAttributeValueStep");this.$1P_3.clearView();var $v_3=$v_2;this.get_inlineView().get_viewModel().set_formulaExpression($v_3.get_propertySpec());this.get_$9Q_3().attribute("title",$v_0);Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.setNewCreatedFlag.call(this);this.get_editElementWrapper().trigger("state-commit")},get_$9Q_3:function(){return this.get_jQueryProxy().selectElement("#stepFormulaContainer"+this.$K_3)},get_$3e_3:function(){return $P_CRM("TEXTAREA",this.$3M_3.get_chromeElement())},discard:function($p0){this.$1P_3.clearView();var $v_0=this.$AP_3();this.$3M_3.get_editView().set_editElementValue($v_0);this.get_$9Q_3().attribute("title",$v_0);Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format("<div class='{0}'>\r\n\t<div>\r\n\t\t{10}\r\n\t\t<div class='{1}'>{2}</div>\r\n\t\t<div class='{3}'>({4})</div>\r\n\t</div>\r\n\t<div class='{7}'>{8}</div>\r\n\t<div id='stepFormulaContainer{5}' class='{6}'>\r\n\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t</div>\r\n\t<div id='{9}'/>\r\n</div>\r\n{11}","editstepcontainer","sectionheader",CrmEncodeDecode.CrmHtmlEncode(String.format(window.LOCID_CALCULATEDFIELD_SETFORMULA,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Label.Description)),"formulareturntype",CrmEncodeDecode.CrmHtmlEncode(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata().Label.TypeLabel),this.$K_3,"formulasteptextarea","formulaequalto",window.LOCID_CALCFIELD_FORMULAEQUALTO,String.format("warningview{0}",this.$K_3),String.format("<div class='{0}' {1} id='{2}'>\r\n\t<ul class='{3} {4}'>\r\n\t\t<li class='{5} {6}' title='{7}' id='{8}'>\r\n\t\t\t<span class='{9}'>\r\n\t\t\t\t<img src='{10}' alt='{7}' tabindex='0' class='ms-crm-actionhelpimage'>\r\n\t\t\t\t<span style='display:none'>{7}</span></span>\r\n\t\t</li>\r\n\t</ul>\r\n</div>","scopeselector","data-scopevalue","scopecontainer","commandBarMenu","ruledisplayhelp","ms-crm-Menu-ReadForm","commandBarMenuItem",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_HELPTOOLTIP),"formulaEditorHelpButton","ms-crm-Menu-Label",Mscrm.CrmUri.create("/_imgs/ribbon/help_16.png")),String.format("<span class='{0}'><img src='{1}' /></span>","processing",Mscrm.CrmUri.create("/_imgs/wallcontrol/progress.gif"))))},$BY_3:function(){this.$7L_3=new Mscrm.BusinessRules.Views.IntellisenseControlDecorator(this.$3M_3.get_editView());this.$7L_3.attachIntellisenseDecorator();var $v_0=this.get_$3e_3();if($v_0){$v_0.height("40px");$v_0.attr("spellcheck","false")}},$AP_3:function(){var $$t_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),$v_0=new Microsoft.Crm.Workflow.FormulaDisplayVisitor(false,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Label.Description,$$t_1.$$d_getAttributeLocalizedNameFromEntity||($$t_1.$$d_getAttributeLocalizedNameFromEntity=Function.createDelegate($$t_1,$$t_1.getAttributeLocalizedNameFromEntity)));$v_0.visitSetAttributeValueStep(this.get_inlineView().get_viewModel().get_step());return $v_0.get_outputString()},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);var $v_0=this.get_$9Q_3(),$v_1=this.$AP_3(),$v_2={};$v_2["value"]=CrmEncodeDecode.CrmHtmlEncode(CrmEncodeDecode.CrmHtmlEncode($v_1));this.$3M_3=this.get_inlineEditControlMediator().createMultilineTextControl($v_0,$v_0.get_item(0).id,2e3,$v_2,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit");this.$1P_3=new Mscrm.BusinessRules.Views.WarningView(null,this.get_jQueryProxy().selectInElement("#"+String.format("warningview{0}",this.$K_3),new Mscrm.Proxies.JQueryObjectProxy(this.get_chromeElement())));this.$Bp_3();this.$Dk_3($v_1);this.$BY_3();this.$3M_3.get_dataContext().set_labelValue(window.LOCID_BUSINESSRULE_MESSAGE);var $v_3=$find(this.$3M_3.get_dataContext().get_attribute().get_dataAttributeId());$v_3.get_controls().add(this.$3M_3);var $v_4=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAll();if($v_4.state()==="pending"){this.get_editElement().addClass("currentlyprocessing");var $$t_5=this;$v_4.always(function(){$$t_5.get_editElement().removeClass("currentlyprocessing");$$t_5.setFocus()})}},$Dk_3:function($p0){this.get_$3e_3().addClass("ms-crm-Inline-Edit");this.get_$3e_3().addClass("formulatextarea");if(isNullOrEmptyString($p0)){this.get_$3e_3().val(window.LOCID_CALCFIELD_FORMULA_DEFAULT);this.get_$3e_3().addClass("placeholder")}},$Bp_3:function(){var $v_0=this.get_$3e_3(),$$t_5=this;$v_0.bind("focusin",function(){if($v_0.hasClass("placeholder")){$v_0.val("");$v_0.removeClass("placeholder");$$t_5.$7L_3.get_$6i_0().autocomplete("search","")}});var $$t_6=this;$v_0.blur(function($p1_0){if(!isNullOrEmptyString($v_0.val()))return;var $v_1=$$t_6.get_jQueryProxy().selectElement(":focus");if($v_1.get_length()>0&&$v_1.get_item(0).id==="ui-active-menuitem")return;$v_0.val(window.LOCID_CALCFIELD_FORMULA_DEFAULT);$v_0.addClass("placeholder")});var $$t_7=this;$v_0.keydown(function($p1_0){var $v_2=$p1_0;if($p1_0.which===9&&!IsNull($v_2)&&$v_2.shiftKey){$$t_7.$1R_3=$$t_7.get_jQueryProxy().selectInElement("#formulaEditorHelpButton",$$t_7.get_jQueryProxy().fromObject($$t_7.get_chromeElement()));$$t_7.$1R_3.children(":first-child").attribute("class","ms-crm-Menu-Label-Hovered")}})},postCreateEditElement:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.postCreateEditElement.call(this);this.$Bn_3()},$Bn_3:function(){this.$1R_3=this.get_jQueryProxy().selectInElement("#formulaEditorHelpButton",this.get_jQueryProxy().fromObject(this.get_chromeElement()));if(!IsNull(this.$1R_3)){var $$t_3=this;this.$1R_3.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_3.get_inlineView().get_viewModel().get_helpCommand().execute()});var $$t_4=this;this.$1R_3.bind("click",function($p1_0){$$t_4.get_inlineView().get_viewModel().get_helpCommand().execute()})}var $v_0=this.$1R_3.children(":first-child");$v_0.attribute("onmouseover",String.format("this.className='{0}'","ms-crm-Menu-Label-Hovered"));$v_0.attribute("onmouseout",String.format("this.className='{0}'","ms-crm-Menu-Label"));$v_0.attribute("onfocus",String.format("this.className='{0}'","ms-crm-Menu-Label-Hovered"));$v_0.attribute("onfocusout",String.format("this.className='{0}'","ms-crm-Menu-Label"))},get_firstInnerEditElement:function(){return this.$1R_3},selectFirstElement:function(){var $v_0=this.get_jQueryProxy().fromObject(this.get_editElement());this.get_jQueryProxy().selectInElement(".ms-crm-actionhelpimage",$v_0).setFocus();this.$1R_3.children(":first-child").attribute("class","ms-crm-Menu-Label-Hovered")},$7L_3:null,$3M_3:null,$1R_3:null,$1P_3:null};Mscrm.BusinessRules.Views.CalculatedFieldHeaderView=function(){Mscrm.BusinessRules.Views.CalculatedFieldHeaderView.initializeBase(this)};Mscrm.BusinessRules.Views.CalculatedFieldHeaderView.prototype={initialize:function(){this.ruleEntityLabel=window.LOCID_CALCULATEDFIELD_NAMESTRING;var $v_0=this.get_jQueryProxy().selectElement("#BusinessRuleName");$v_0.get_jQueryObject().text(String.format(window.LOCID_CALCULATEDFIELD_SETFORMULA,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Label.Description));$v_0.addClass("ruletitlecontent");$v_0.removeAttribute("tabindex");Mscrm.BusinessRules.Views.HeaderView.prototype.initialize.call(this);this.$AV_2()},$AV_2:function(){if(!this.get_businessRuleViewModel().get_readOnly())return;Mscrm.BusinessRules.Views.HeaderView.prototype.unbindSaveButtons.call(this)}};Mscrm.BusinessRules.Views.IntellisenseControlDecorator=function(editView){this.$$d_$Bg_0=Function.createDelegate(this,this.$Bg_0);this.$$d_$Bf_0=Function.createDelegate(this,this.$Bf_0);this.$$d_$Be_0=Function.createDelegate(this,this.$Be_0);this.$$d_$Bd_0=Function.createDelegate(this,this.$Bd_0);this.$$d_$EM_0=Function.createDelegate(this,this.$EM_0);this.$$d_$Ay_0=Function.createDelegate(this,this.$Ay_0);this.$Ad_0=String.format("<a title='{{0}}'><span class='{0}'><span class='{1}'>{{1}}</span><span class='{2}'>{{2}}</span></span><span class='{3}'>{{3}}</span></a>",CrmEncodeDecode.CrmHtmlAttributeEncode("intellisenseleftcolumn"),CrmEncodeDecode.CrmHtmlAttributeEncode("intellisenselogicalname"),CrmEncodeDecode.CrmHtmlAttributeEncode("intellisensetypelabel"),CrmEncodeDecode.CrmHtmlAttributeEncode("intellisensedisplayname"));this.$8H_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityTypeCode;this.$3n_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityTypeCode;this.$3I_0=editView};Mscrm.BusinessRules.Views.IntellisenseControlDecorator.$Ae=function($p0,$p1){var $v_0=$p0.value.toUpperCase(),$v_1=$p1.value.toUpperCase();return $v_0.localeCompare($v_1)};Mscrm.BusinessRules.Views.IntellisenseControlDecorator.prototype={dispose:function(){this.$3U_0=null;this.get_$6i_0().unbind("autocompleteopen")},attachIntellisenseDecorator:function(){this.$BX_0();this.$Aw_0();if(window.LOCID_UI_DIR==="RTL"){var $v_0=this.$3I_0.get_editElement(),$$t_1=this;this.get_$6i_0().bind("autocompleteopen",function(){$P_CRM(".ui-autocomplete.ui-menu.ui-widget.ui-widget-content.ui-corner-all:visible").position({of:$v_0,my:"right top",at:"right bottom"})})}},$EJ_0:function($p0){for(var $$arr_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().FunctionOperators,$$len_2=$$arr_1.length,$$idx_3=0;$$idx_3<$$len_2;++$$idx_3){var $v_0=$$arr_1[$$idx_3],$v_1=new Mscrm.BusinessRules.Views.IntellisenseOption;$v_1.value=$v_0.Label;$v_1.label="";$v_1.rawValue=$p0.toString();Array.add(this.$3U_0,$v_1);$p0++}},$EL_0:function(){this.$3U_0=new Array(0);var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getLogicalNameFromTypeCode(this.$3n_0),$$t_2=this;return Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_0).done(function($p1_0){$$t_2.$Au_0($$t_2.$$d_$Ay_0,$p1_0.Fields);$$t_2.$5E_0=false;$$t_2.$3U_0.sort(Mscrm.BusinessRules.Views.IntellisenseControlDecorator.$Ae)})},$Ay_0:function($p0){return ($p0.AdditionalMetadata.AttributeType==="date"||$p0.AdditionalMetadata.AttributeType==="datetime"||$p0.AdditionalMetadata.AttributeType==="decimal"||$p0.AdditionalMetadata.AttributeType==="int"||$p0.AdditionalMetadata.AttributeType==="money"||$p0.AdditionalMetadata.AttributeType==="nvarchar")&&Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.instance().isValidField($p0)},$EM_0:function($p0){return this.$Ay_0($p0)||($p0.AdditionalMetadata.AttributeType==="lookup"||$p0.AdditionalMetadata.AttributeType==="owner"||$p0.AdditionalMetadata.AttributeType==="customer"||$p0.AdditionalMetadata.AttributeType==="uniqueidentifier")&&Mscrm.BusinessRules.MetadataUtility.isLookupToSingleEntity($p0.LogicalName)},$Aw_0:function(){this.$3U_0=new Array(0);var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getLogicalNameFromTypeCode(this.$3n_0),$$t_3=this;return Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_0).done(function($p1_0){var $v_1=$$t_3.$Au_0($$t_3.$$d_$EM_0,$p1_0.Fields);$$t_3.$5E_0=true;$$t_3.$EJ_0($v_1);$$t_3.$3U_0.sort(Mscrm.BusinessRules.Views.IntellisenseControlDecorator.$Ae)})},$Au_0:function($p0,$p1){var $v_0=0;if(IsNull($p1))return $v_0;for(var $$arr_3=$p1,$$len_4=$$arr_3.length,$$idx_5=0;$$idx_5<$$len_4;++$$idx_5){var $v_1=$$arr_3[$$idx_5];if($p0($v_1)){var $v_2=new Mscrm.BusinessRules.Views.IntellisenseOption;$v_2.value=$v_1.LogicalName;$v_2.label=$v_1.Label.Description;$v_2.rawValue=$v_0.toString();Array.add(this.$3U_0,$v_2)}$v_0++}return $v_0},get_$6i_0:function(){return this.$3I_0.get_editElement()},$BX_0:function(){this.get_$6i_0().autocomplete(this.$C6_0());this.get_$6i_0().data("uiAutocomplete")._renderItem=this.$$d_$Bd_0},$C6_0:function(){var $v_0={};$v_0.source=this.$$d_$Be_0;$v_0.focus=this.$$d_$Bf_0;$v_0.select=this.$$d_$Bg_0;$v_0.autoFocus=true;$v_0.minLength=0;return $v_0},$Be_0:function($p0,$p1){var $v_0=this.$A4_0($p0.term),$v_1=new Array(0),$$t_A=this;this.$EO_0($v_0,false).done(function(){var $v_2=$v_0.get_currentTerm().term.toLowerCase();if(!IsNull($p0.term))for(var $$arr_5=$$t_A.$3U_0,$$len_6=$$arr_5.length,$$idx_7=0;$$idx_7<$$len_6;++$$idx_7){var $v_3=$$arr_5[$$idx_7];if($v_3.value.toLowerCase().indexOf($v_2)>=0||$v_3.label.toLowerCase().indexOf($v_2)>=0){var $v_4={};$v_4.label=$v_3.label;$v_4.value=$v_3.value;$v_4.rawValue=$v_3.rawValue;Array.add($v_1,$v_4)}}$p1($v_1)})},$EO_0:function($p0,$p1){var $v_0=$p0.subTermIndex===1,$v_1=$p1;if($v_0){var $v_2=$p0.get_previousTerm().term.toLowerCase(),$v_3=Mscrm.BusinessRules.MetadataUtility.lookupToTypeCode($v_2);if($v_3===-1){if(!this.$5E_0){this.$3n_0=this.$8H_0;$v_1=true}}else{var $v_4=this.$3n_0;if(this.$5E_0||$v_3!==$v_4){$v_1=true;this.$3n_0=$v_3}}}else if(!this.$5E_0){this.$3n_0=this.$8H_0;$v_1=true}!$v_1&&jQueryApi.jQueryDeferredFactory.Deferred(Array,Object).resolve(null);if($v_0)return this.$EL_0();else return this.$Aw_0()},$Bf_0:function($p0,$p1){return false},$Bg_0:function($p0,$p1){var $v_0=$p0;if($p0.which===9&&!IsNull($v_0)&&$v_0.shiftKey)return false;var $v_1=this.$CU_0($p1.item);if(!isNullOrEmptyString($v_1)){var $v_2=this.$3I_0.get_editElementValue(),$v_3=this.$A4_0($v_2),$v_4=$v_3.get_currentTerm(),$v_5=$v_4.endIndex+1,$v_6=$v_2.substring(0,$v_4.startIndex)+$v_1+$v_2.substring($v_5,$v_2.length);this.$3I_0.set_editElementValue($v_6);var $v_7=$v_1.endsWith("()")?$v_1.length-1:$v_1.length;SetCaretPosition(this.$3I_0.get_editElement()[0],$v_4.startIndex+$v_7);if($p0.which===9){$p0.preventDefault();$p0.stopPropagation()}}return false},$Bd_0:function($p0,$p1){var $v_0="({0})",$v_1=this.$Al_0($p1),$v_2=!$v_1?"":String.format($v_0,$v_1.Label.TypeLabel),$v_3=String.format(this.$Ad_0,CrmEncodeDecode.CrmHtmlAttributeEncode($p1.value),CrmEncodeDecode.CrmHtmlEncode($p1.value),CrmEncodeDecode.CrmHtmlEncode($v_2),CrmEncodeDecode.CrmHtmlEncode($p1.label));return $P_CRM("<li></li>").data("item.autocomplete",$p1).append($v_3).appendTo($p0)},$Al_0:function($p0){var $v_0=Number.parseInvariant($p0.rawValue);return Mscrm.BusinessRules.BusinessRuleEntityManager.getRelatedAttributeByIndexAndTypeCode(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.$3n_0,$v_0)},$A4_0:function($p0){var $v_0=new Mscrm.BusinessRules.Views.SearchTerm,$v_1=GetCaretPosition(this.$3I_0.get_editElement()[0]);if($v_1>=0&&!isNullOrEmptyString($p0)){$v_0.startIndex=$v_1;$v_0.endIndex=$v_1;if(this.$83_0($p0.charAt($v_1-1))||Mscrm.BusinessRules.LexicalAnalysis.isWhiteSpace($p0.charAt($v_1-1))||$v_1<$p0.length&&this.$83_0($p0.charAt($v_1))){for(var $v_2=0,$v_3=$v_1-1,$v_2=$v_1-1;$v_2>=0;$v_2--)if(!(this.$83_0($p0.charAt($v_2))||Mscrm.BusinessRules.LexicalAnalysis.isWhiteSpace($p0.charAt($v_2)))){$v_3=$v_2+1;break}if($v_2<0)$v_0.startIndex=0;else $v_0.startIndex=$v_3;$v_3=$v_1-1;for($v_2=$v_1;$v_2<$p0.length;$v_2++)if(!this.$83_0($p0.charAt($v_2))){$v_3=$v_2-1;break}if($v_2===$p0.length)$v_0.endIndex=$p0.length-1;else $v_0.endIndex=$v_3;$v_0.term=$p0.substring($v_0.startIndex,$v_0.endIndex+1);if(isNullOrEmptyString($v_0.term.trim())){$v_0.startIndex=$v_1;$v_0.endIndex=$v_1;$v_0.term=""}else{$v_0.endIndex=$v_0.startIndex+$v_0.term.trimEnd().length-1;$v_0.startIndex=$v_0.startIndex+$v_0.term.length-$v_0.term.trimStart().length;$v_0.term=$p0.substring($v_0.startIndex,$v_0.endIndex+1)}}this.$CV_0($v_0)}return $v_0},$CV_0:function($p0){$p0.subTerms=[];for(var $v_0=$p0.term.split("."),$v_1=$p0.startIndex,$v_2=$p0.startIndex,$v_3=false,$v_4=GetCaretPosition(this.$3I_0.get_editElement()[0]),$v_5=0;$v_5<$v_0.length;$v_5++){var $v_6=$v_0[$v_5];if($v_5>0)$v_1++;$v_2=$v_1;$v_1+=$v_6.length;var $v_7=new Mscrm.BusinessRules.Views.BaseTerm;$v_7.startIndex=$v_2;$v_7.endIndex=$v_1-1;$v_7.term=$v_6;Array.add($p0.subTerms,$v_7);if(!$v_3){$p0.subTermIndex=$v_5;$v_3=$v_1>=$v_4}}},$CU_0:function($p0){var $v_0="\\s\\(.*?\\)",$v_1="()",$v_2=this.$Al_0($p0);return $v_2?$v_2.LogicalName:$p0.value.replace(new RegExp($v_0),$v_1)},$83_0:function($p0){return Mscrm.BusinessRules.LexicalAnalysis.isLetter($p0)||$p0==="."||Mscrm.BusinessRules.LexicalAnalysis.isDigit($p0)},$3I_0:null,$3U_0:null,$5E_0:true};Mscrm.BusinessRules.Views.SearchTerm=function(){this.subTerms=[];Mscrm.BusinessRules.Views.SearchTerm.initializeBase(this)};Mscrm.BusinessRules.Views.SearchTerm.prototype={subTermIndex:0,get_currentTerm:function(){if(this.subTermIndex>=0&&this.subTermIndex<this.subTerms.length)return this.subTerms[this.subTermIndex];return this},get_previousTerm:function(){if(this.subTermIndex>0&&this.subTermIndex<=this.subTerms.length)return this.subTerms[this.subTermIndex-1];return this}};Mscrm.BusinessRules.Views.BaseTerm=function(){};Mscrm.BusinessRules.Views.BaseTerm.prototype={term:"",startIndex:0,endIndex:0};Mscrm.BusinessRules.Views.IntellisenseOption=function(){};Mscrm.BusinessRules.Views.IntellisenseOption.prototype={label:"",rawValue:"0",value:""};Mscrm.BusinessRules.Views.ManageCalculatedFieldView=function(){Mscrm.BusinessRules.Views.ManageCalculatedFieldView.initializeBase(this)};Mscrm.BusinessRules.Views.ManageCalculatedFieldView.prototype={createHeaderView:function(){return new Mscrm.BusinessRules.Views.CalculatedFieldHeaderView}};Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView=function(view){this.$$d_$E2_1=Function.createDelegate(this,this.$E2_1);this.$9c_1=String.format("<div class='{0}'><div class='{1}'><div class='{2}'><img src='{3}' class='{4}' tabindex='0' title='{8}'></img></div><div class='{5}'><img src='{6}' class='{7}' tabindex='0' title='{9}'></img></div></div></div>","edittoolbarcontainer","edittoolbar","editdoneimage","{0}","{1}","editdiscardimage","{2}","{3}",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_DONETOOLTIP),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_DISCRDTOOLTIP));Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.initializeBase(this,[view])};Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype={setFocus:function(){if(IsNull(this.get_firstInnerEditElement())||!this.get_firstInnerEditElement().get_length())return;this.get_firstInnerEditElement().get_jQueryObject().select()},render:function(){this.createAndAppendEditElementToDom();this.get_inlineView().get_layout().renderForEdit();this.attachBehaviors();this.initializeInputBehavior();this.postCreateEditElement();this.$Dc_1()},confirm:function(){if(this.get_inlineView().get_isValid())Mscrm.InlineEditViewBase.prototype.confirm.call(this);else this.discard(false)},createAndAppendEditElementToDom:function(){this.set_editElement(this.createEditElement());this.set_editElementWrapper($P_CRM("<div></div>").append(this.get_editElement()).addClass("ms-crm-Inline-Edit"));this.get_editElementWrapper().hide();this.get_chromeElement().append(this.get_editElementWrapper())},postCreateEditElement:function(){Mscrm.InlineEditViewBase.prototype.postCreateEditElement.call(this);this.$DK_1()},attachBehaviors:function(){this.get_businessRuleView().get_chromeBehavior().initializeForEditElement()},$DK_1:function(){this.$20_1=this.initializeEditToolBar(new Mscrm.Proxies.JQueryObjectProxy(this.get_editElement().find(".edittoolbar")));this.$20_1.initialize();var $$t_5=this;this.$20_1.get_discardButton().click(function($p1_0){$$t_5.discard(false)});var $$t_6=this;this.$20_1.get_doneButton().click(function($p1_0){$$t_6.confirm()});var $$t_7=this;this.$20_1.get_discardButton().keyDown(function($p1_0){var $v_0=$p1_0;$p1_0.which===13&&$$t_7.discard(false);if($p1_0.which===9&&!IsNull($v_0)&&!$v_0.shiftKey){$p1_0.preventDefault();$$t_7.selectFirstElement()}});var $$t_8=this;this.$20_1.get_doneButton().keyDown(function($p1_0){$p1_0.which===13&&$$t_8.confirm()})},selectFirstElement:function(){this.get_firstInnerEditElement().get_jQueryObject().select()},$Dc_1:function(){this.get_firstInnerEditElement().bind("keydown",this.$$d_$E2_1)},bindPageClick:function(){},unbindPageClick:function(){},onPageClick:function(eventObject){},onEditElementWrapperStateChanged:function(eventObject){if(eventObject.target!==eventObject.currentTarget)return;Mscrm.InlineEditViewBase.prototype.onEditElementWrapperStateChanged.call(this,eventObject)},showEditElement:function(){Mscrm.InlineEditViewBase.prototype.showEditElement.call(this);Mscrm.MaskPanel.get_instance().showMaskPanel(this);this.get_chromeElement().bind("keydown",this.$$d_$E2_1);this.$72_1=false},hideEditElement:function(){Mscrm.MaskPanel.get_instance().hideMaskPanel();Mscrm.InlineEditViewBase.prototype.hideEditElement.call(this)},get_businessRuleView:function(){return this.get_inlineView()},initializeEditToolBar:function(element){return Mscrm.BusinessRules.Views.ToolBarFactory.instance().createEditToolBarView(this,element)},createToolBarHtml:function(builder){var $v_0=Mscrm.BusinessRules.Views.ToolBarFactory.instance().createEditToolBarView(this,null);builder.append(String.format(this.$9c_1,CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.get_doneImage().source),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.get_doneImage().cssClass),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.get_closeImage().source),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0.get_closeImage().cssClass)))},dispose:function(){this.$20_1.get_discardButton().unbind("click",null);this.$20_1.get_discardButton().unbind("keydown",null);this.$20_1.get_doneButton().unbind("click",null);this.$20_1.get_doneButton().unbind("keydown",null);this.$20_1.dispose();if(!this.$8V_1){this.get_firstInnerEditElement().unbind("keydown",this.$$d_$E2_1);this.$8V_1=true}if(!IsNull(this.$15_1)){this.$15_1.dispose();this.$15_1=null}Mscrm.InlineEditViewBase.prototype.dispose.call(this)},get_jQueryProxy:function(){if(IsNull(this.$h_1))this.$h_1=new Mscrm.Proxies.JQueryProxy;return this.$h_1},get_firstInnerEditElement:function(){var $v_0=String.format("{0}:visible,{1}:visible","INPUT","TEXTAREA");if(!this.$59_1||!this.$59_1.get_length())this.$59_1=new Mscrm.Proxies.JQueryObjectProxy(this.get_editElement().find($v_0).first());this.$59_1.keyDown(this.$$d_$E2_1);return this.$59_1},$E2_1:function($p0){if($p0.which===9){if(!this.$72_1){this.get_chromeElement().unbind("keydown",this.$$d_$E2_1);this.$72_1=true}var $v_0=$p0;if(!IsNull($v_0)&&$v_0.shiftKey){$p0.preventDefault();this.$20_1.get_discardButton().get_jQueryObject().focus()}}},get_inlineEditControlMediator:function(){if(IsNull(this.$3P_1))this.$3P_1=new Mscrm.BusinessRules.Mediators.InlineEditControlMediator;return this.$3P_1},get_bindingsMediator:function(){if(IsNull(this.$15_1))this.$15_1=new Mscrm.BusinessRules.Mediators.BindingsMediator;return this.$15_1},set_bindingsMediator:function(value){this.$15_1=value;return value},$3P_1:null,$15_1:null,$20_1:null,$h_1:null,$59_1:null,$72_1:false,$8V_1:false};Mscrm.BusinessRules.Views.InlineStepEditViewBase=function($p0){this.$9b_2=String.format("<div class='{0}'>","editstepandtoolbarcontainer");this.$1I_2=String.format("<div class='{0}'>Here comes the edit content</div>","editstepcontainer");Mscrm.BusinessRules.Views.InlineStepEditViewBase.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype={createEditElement:function(){var $v_0=document.createElement("div");$v_0.innerHTML=this.createEditHtml();return $P_CRM($v_0)},discard:function($p0){Mscrm.InlineEditViewBase.prototype.discard.call(this,$p0);this.discardNewCreatedStep()},confirm:function(){if(this.get_isValid()){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.confirm.call(this);this.setNewCreatedFlag()}},get_attributeSupportsRelatedEntities:function(){return false},discardNewCreatedStep:function(){var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;$v_1.get_isNewCreated()&&Mscrm.BusinessRules.Views.ActionReadToolBarView.deleteAction($v_0.$E_1)},setNewCreatedFlag:function(){var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;$v_1.set_isNewCreated(false)},createEditHtml:function(){var $v_0=new Sys.StringBuilder;$v_0.append(this.$9b_2);this.createStepHtml($v_0);this.createToolBarHtml($v_0);$v_0.append(this.$9a_2);return $v_0.toString()},createStepHtml:function($p0){$p0.append(this.$1I_2)},initFieldControl:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.ViewModels.FieldControlViewModel(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata);$v_0.set_filter(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));var $v_1=$P_CRM($p0),$v_2=new Mscrm.BusinessRules.Views.FieldControlView(new Mscrm.Proxies.JQueryObjectProxy($v_1));$v_2.set_dataContext($v_0);$v_2.$0_1.set_selectedFieldLogicalName($p1);$v_2.initialize();return $v_2},initAttributeOperand:function($p0,$p1,$p2){var $v_0=String.format($p0),$v_1=this.get_jQueryProxy().selectElement("#"+$v_0),$v_2=Mscrm.BusinessRules.Views.OperandViewFactory.$AG($p2,$v_1,false);$v_2.set_dataContext($p1);Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType($v_2.get_dataContext())&&$v_2.get_dataContext().set_useAttributeFiltering(true);$v_2.initialize();Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType($v_2)&&$v_2.applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));return $v_2},getUpdatedSourceEntity:function($p0,$p1){if(isNullOrEmptyString($p0.$u_2)||$p0.$u_2===$p1.get_primaryEntityName())return new Microsoft.Crm.Workflow.Expressions.PrimaryEntity($p1);else{var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().getRelationshipEntityFromRelationshipName($p0.$m_2);return new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked($p1,$v_0.RelationshipAttribute.LogicalName,$p0.$u_2,$p0.$m_2)}},$9a_2:"</div>"};Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase=function(layout){this.$$d_$E7_1=Function.createDelegate(this,this.$E7_1);this.$$d_dataContextOnPropertyChanged=Function.createDelegate(this,this.dataContextOnPropertyChanged);Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.initializeBase(this,[layout])};Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype={get_dataContext:function(){return this.$0_1},set_dataContext:function(value){this.$0_1=value;this.$0_1.add_propertyChanged(this.$$d_dataContextOnPropertyChanged);return value},get_parent:function(){return this.$E_1},set_parent:function(value){this.$E_1=value;return value},get_bindingsMediator:function(){return this.$15_1||(this.$15_1=new Mscrm.BusinessRules.Mediators.BindingsMediator)},set_bindingsMediator:function(value){this.$15_1=value;return value},setFocus:function(){var $v_0=this.get_state().get_currentState();if(IsNull(this.get_editView()))return;switch($v_0){case 0:this.get_state().set_currentState(1);break;case 2:var $v_1=this.get_editView();$v_1.setFocus();break}},$E7_1:function($p0,$p1){switch($p1.get_propertyName()){case "SelectedButtonViewModel":this.$D7_1();break}},$D7_1:function(){var $v_0=this.get_readToolBarView().get_dataContext();if(IsNull($v_0.get_selectedButtonViewModel()))this.get_chromeElement().removeAttr("aria-activedescendant");else this.get_chromeElement().attr("aria-activedescendant",$v_0.get_selectedButtonViewModel().get_id())},renderForRead:function(){this.get_layout().renderForRead();if(IsNull(this.get_readToolBarView())){this.set_readToolBarView(this.buildReadToolBarView());var $v_0=this.get_readToolBarView().get_dataContext();$v_0.add_propertyChanged(this.$$d_$E7_1);this.get_chromeElement().attr("role","toolbar");for(var $v_1=new Sys.StringBuilder,$v_3=0;$v_3<$v_0.get_buttonViewModels().get_count();$v_3++){var $v_4=$v_0.get_buttonViewModels().get_item($v_3);$v_1.append($v_4.get_id()+" ")}var $v_2=$v_1.toString().trim();this.get_chromeElement().attr("aria-owns",$v_2);this.get_valueElement().append(this.get_readToolBarView().get_element().get_jQueryObject());this.get_readToolBarView().initialize()}this.attachBehaviors()},tryCompleteOnDemandInitialization:function(){if(!this.get_isEditControlInitialized()){this.set_editView(this.get_getEditViewObject());this.set_initializationState(2);this.get_editView().render()}},dispose:function(){if(this.get_isDisposed())return;Mscrm.InlineViewBase.prototype.dispose.call(this);this.$0_1.remove_propertyChanged(this.$$d_dataContextOnPropertyChanged)},handleModelToViewBinding:function(sender,propertyChangedEventArgs){},dataContextOnPropertyChanged:function(sender,propertyChangedEventArgs){this.handleModelToViewBinding(sender,propertyChangedEventArgs)},$0_1:null,$E_1:null,$15_1:null};Mscrm.BusinessRules.Views.InlineStepViewBase$2=function($p0){Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(this.$$gta["Mscrm.BusinessRules.Views.InlineStepViewBase$2"]["TViewModel"],this.$$gta["Mscrm.BusinessRules.Views.InlineStepViewBase$2"]["TModel"]).initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$=function($p0,$p1){var $$cn="InlineStepViewBase$2$"+$p0.getName().replace(/\./g,"_")+"$"+$p1.getName().replace(/\./g,"_");if(!Mscrm.BusinessRules.Views[$$cn]){var $$ccr=Mscrm.BusinessRules.Views[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.BusinessRules.Views.InlineStepViewBase$2"]={TViewModel:$p0,TModel:$p1};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.BusinessRules.Views.InlineStepViewBase$2.apply(this,$v_0)};$$ccr.registerClass("Mscrm.BusinessRules.Views."+$$cn,Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase);var $$dict_6=Mscrm.BusinessRules.Views.InlineStepViewBase$2.prototype;for(var $$key_7 in $$dict_6){var $$entry_8={key:$$key_7,value:$$dict_6[$$key_7]};if("constructor"!==$$entry_8.key)$$ccr.prototype[$$entry_8.key]=$$entry_8.value}}return Mscrm.BusinessRules.Views[$$cn]};Mscrm.BusinessRules.Views.InlineStepViewBase$2.prototype={buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel;$v_0.set_id(this.$0_2.get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildAction(this.$E_1,$v_0);return $v_1},get_dataContext:function(){return Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.get_dataContext.call(this)},set_dataContext:function($p0){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.set_dataContext.call(this,$p0);this.$0_2=$p0;return $p0},get_stepValueContent:function(){return this.$7l_2||(this.$7l_2=new Mscrm.Proxies.JQueryObjectProxy(this.get_valueElement().children(".actioncontent")))},set_stepValueContent:function($p0){this.$7l_2=$p0;return $p0},get_readToolBarView:function(){return this.$5P_2},set_readToolBarView:function($p0){this.$5P_2=$p0;return $p0},get_readToolBarViewBuilder:function(){return this.$40_2||(this.$40_2=new Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder)},set_readToolBarViewBuilder:function($p0){this.$40_2=$p0;return $p0},get_viewModel:function(){return this.$0_2},$0_2:null,$7l_2:null,$5P_2:null,$40_2:null};Mscrm.BusinessRules.Views.AggregationStepSectionView=function($p0){Mscrm.BusinessRules.Views.AggregationStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.AggregationStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getAggregateStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();!this.get_viewModel().isCurrentAttributePrimaryKey()&&this.generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0}};Mscrm.BusinessRules.Views.InlineAggregateSectionStepView=function($p0){Mscrm.BusinessRules.Views.InlineAggregateSectionStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineAggregateSectionStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance(),$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex(this.get_viewModel().get_currentEntityName(),this.get_viewModel().get_selectedIndexAggregateField()),$v_2=IsNull($v_1)?this.get_viewModel().get_step().get_aggregate().getParameters()[1].get_attributeName():$v_1.LogicalName;$v_0.$88_2(this.get_viewModel().get_currentEntityName(),$v_2);this.$C_3=$v_0._results},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "SelectedIndexAggregateField":case "SelectedIndexAggregateFunction":this.$2s_3();if(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[this.get_viewModel().$1y_3].Value!==36){this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()}break}},$2s_3:function(){var $v_0=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_aggregateFunctionDisplayName())),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_aggregatedFieldDisplayName())));this.get_stepValueContent().html($v_0)},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineAggregateStepEditView(this)},buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildAggregationReadToolBar(this.$E_1,$v_0);return $v_1}};Mscrm.BusinessRules.Views.InlineAggregateStepEditView=function($p0){this.$$d_$B9_3=Function.createDelegate(this,this.$B9_3);this.$$d_$Cj_3=Function.createDelegate(this,this.$Cj_3);this.$$d_$Dz_3=Function.createDelegate(this,this.$Dz_3);this.$K_3=Mscrm.BusinessRules.Views.InlineAggregateStepEditView.$16++;Mscrm.BusinessRules.Views.InlineAggregateStepEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineAggregateStepEditView.prototype={dispose:function(){this.get_$1K_3().remove_propertyChanged(this.$$d_$Dz_3);this.get_bindingsMediator().disposeValueBinding(this.$12_3);this.$4k_3.dispose();this.$4k_3=null;this.$1Z_3.dispose();this.$1Z_3=null;Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.dispose.call(this)},get_isValid:function(){if(this.$1Z_3.get_isValid())return true;else return false},get_$1K_3:function(){return this.get_inlineView().get_viewModel()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);var $v_0=Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$4k_3);$v_0>=0&&this.get_$1K_3().set_selectedIndexAggregateFunction($v_0);var $v_1=Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$1Z_3);!IsNull($v_1)&&$v_1>=0&&this.get_$1K_3().set_selectedIndexAggregateField($v_1);this.get_editElementWrapper().trigger("state-commit")},confirm:function(){this.get_isValid()&&Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this);if(!this.$BV_3()){var $v_0=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,String.format(window.LOCID_ROLLUP_NO_AGGREGATE,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata().AdditionalMetadata.AttributeType));this.$1Z_3.tryReplaceAndShowValidationResult($v_0)}},discard:function($p0){this.$1Z_3.clearValidation();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$4k_3,this.get_$1K_3().$1y_3.toString());this.$B9_3(this.get_$1K_3().$1y_3.toString());Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},discardNewCreatedStep:function(){var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;if($v_1.get_isNewCreated()){Mscrm.BusinessRules.Views.AggregationReadToolBarView.deleteAction($v_0.$E_1);this.get_jQueryProxy().selectElement("#AddAggregationButton").removeClass("preventadd")}},createStepHtml:function($p0){var $v_0=this.get_inlineView().get_viewModel().getAggregatedAttributeTitle();$p0.append(String.format(this.$1I_3,this.$K_3,"editstepcontainer","sectionheader","sectioncell","celllabel","cellvalue","",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_ROLLUPFIELD_USEAGGREGATE),CrmEncodeDecode.CrmHtmlEncode($v_0),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_ROLLUPFIELD_USEAGGREGATE),CrmEncodeDecode.CrmHtmlAttributeEncode($v_0)))},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);var $v_0=$P_CRM("#useAggregateStepContainer"+this.$K_3);this.$4k_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,this.get_$1K_3().get_aggregateFunctions(),this.get_$1K_3().$1y_3.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL);var $v_1=$P_CRM("#useAggregateAttributeContainer"+this.$K_3);this.$1Z_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_1),$v_1[0].id,this.get_$1K_3().buildAttributesArray(),this.get_$1K_3().get_selectedIndexAggregateField()>=0?this.get_$1K_3().get_selectedIndexAggregateField().toString():"",Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,"aggregated field");$v_1.append($P_CRM(String.format("<span class='{0}'><img src='{1}' /></span>","processing",Mscrm.CrmUri.create("/_imgs/ico/16_progress.gif"))));this.$Bh_3();this.get_$1K_3().requestEntityMetadata()},$Bh_3:function(){this.get_$1K_3().add_propertyChanged(this.$$d_$Dz_3);this.$12_3=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$4k_3,this.get_$1K_3(),"AggregateFunctionChanged",this.$$d_$Cj_3,this.$$d_$B9_3)},$Dz_3:function($p0,$p1){switch($p1.get_propertyName()){case "AggregatedAttributeListProperty":var $v_0=this.$1Z_3.get_dataContext();$v_0.setOptions(this.get_$1K_3().buildAttributesArray());break;case "TargetEntityLoadCommenced":this.$1Z_3.get_chromeElement().addClass("currentlyprocessing");break;case "TargetEntityLoadCompleted":this.$1Z_3.get_chromeElement().removeClass("currentlyprocessing");break}},$Cj_3:function(){return this.get_$1K_3().$1y_3.toString()},$B9_3:function($p0){var $v_0=Mscrm.Utilities.parseInt($p0,0),$v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[$v_0].Value,$v_2=null;if($v_1===36)$v_2=this.get_$1K_3().buildCountAttributeList();else $v_2=this.get_$1K_3().buildAggregatedAttributeList();var $v_3=this.$1Z_3.get_dataContext();$v_3.setOptions($v_2);this.$1Z_3.get_editView().set_editElementValue("");Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$1Z_3,this.get_$1K_3().get_selectedIndexAggregateField().toString())},$BV_3:function(){var $v_0=true,$v_1=Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$1Z_3);if(IsNull($v_1)||$v_1<0)$v_0=false;return $v_0},$1Z_3:null,$4k_3:null,$12_3:null,$1I_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{9}'>{7}</div>\r\n\t\t<div id='useAggregateStepContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='useAggregateAttributeContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.FilterSectionView=function($p0){Mscrm.BusinessRules.Views.FilterSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.FilterSectionView.prototype={$q_3:null,get_results:function(){return this.$q_3.get_results()},initialize:function(){this.$AX_3()},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$q_3)){this.$q_3.dispose();this.$q_3=null}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},get_conditionsView:function(){return this.$q_3},setFocus:function(){this.get_jQueryProxy().selectInElement(".sectionheadercontainer",this.$1_1).setFocus()},$AX_3:function(){this.$q_3=new Mscrm.BusinessRules.Views.FilterConditionsSectionsView(this.$1_1);this.$q_3.set_dataContext(this.get_viewModel().$k_3);this.$q_3.initialize();this.$q_3.$E_0=this}};Mscrm.BusinessRules.Views.FilterConditionsSectionsView=function($p0){Mscrm.BusinessRules.Views.FilterConditionsSectionsView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.FilterConditionsSectionsView.prototype={scrollIntoView:function($p0){}};Mscrm.BusinessRules.Views.RollupRuleStepSectionView=function($p0){Mscrm.BusinessRules.Views.RollupRuleStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.RollupRuleStepSectionView.get_rollupRuleStepView=function(){return Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_formBodyView().get_sectionViews().get_item(0).get_stepViews().get_item(0)};Mscrm.BusinessRules.Views.RollupRuleStepSectionView.prototype={$2R_3:null,$1e_3:null,$2Q_3:null,dispose:function(){if(this.$9_0)return;this.unbindEventForTargetEntity();this.unbindEventForUseSourceHierarchy();if(!IsNull(this.$2R_3)){this.$2R_3.dispose();this.$2R_3=null}if(!IsNull(this.$1e_3)){this.$1e_3.dispose();this.$1e_3=null}if(!IsNull(this.$2Q_3)){this.$2Q_3.dispose();this.$2Q_3=null}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},initialize:function(){this.$Aa_3();this.$9G_3();this.$AZ_3();this.bindEventForTargetEntity();this.bindEventForUseSourceHierarchy()},bindEventForTargetEntity:function(){var $v_0=this.get_viewModel().$4e_3.$1z_3;if(!IsNull($v_0)){$v_0.add_propertyChanged(this.$2Q_3.$$d_onTargetEntityPropertyChanged);$v_0.add_propertyChanged(this.$1e_3.$$d_onTargetEntityPropertyChanged)}},unbindEventForTargetEntity:function(){var $v_0=this.get_viewModel().$4e_3.$1z_3;if(!IsNull($v_0)){$v_0.remove_propertyChanged(this.$2Q_3.$$d_onTargetEntityPropertyChanged);$v_0.remove_propertyChanged(this.$1e_3.$$d_onTargetEntityPropertyChanged)}},bindEventForUseSourceHierarchy:function(){var $v_0=this.get_viewModel().$4d_3.$2o_3;if(!IsNull($v_0)){$v_0.add_propertyChanged(this.$2R_3.$$d_onUseSourceHierarchyPropertyChanged);$v_0.add_propertyChanged(this.$1e_3.$$d_onUseSourceHierarchyPropertyChanged)}},unbindEventForUseSourceHierarchy:function(){var $v_0=this.get_viewModel().$4d_3.$2o_3;if(!IsNull($v_0)){$v_0.remove_propertyChanged(this.$2R_3.$$d_onUseSourceHierarchyPropertyChanged);$v_0.remove_propertyChanged(this.$1e_3.$$d_onUseSourceHierarchyPropertyChanged)}},shiftFocus:function($p0){Mscrm.BusinessRules.Views.SetSourceStepSectionView.isInstanceOfType($p0)&&this.$1e_3.setFocus()},get_results:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance();!IsNull(this.$2R_3)&&$v_0.compileResults(this.$2R_3.get_results());!IsNull(this.$1e_3)&&$v_0.compileResults(this.$1e_3.get_results());!IsNull(this.$2Q_3)&&$v_0.compileResults(this.$2Q_3.get_results());return $v_0},$Aa_3:function(){var $v_0=this.get_viewModel().get_stepId()+"Source",$v_1=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",$v_0,"section")));this.$2R_3=new Mscrm.BusinessRules.Views.SetSourceStepSectionView($v_1);this.$2R_3.set_dataContext(this.get_viewModel().$4d_3);this.$2R_3.initialize();this.$2R_3.$E_0=this},$9G_3:function(){var $v_0=this.get_viewModel().get_stepId()+"Related",$v_1=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",$v_0,"section")));this.$1e_3=new Mscrm.BusinessRules.Views.SetTargetStepSectionView($v_1);this.$1e_3.set_dataContext(this.get_viewModel().$4e_3);this.$1e_3.initialize();this.$1e_3.$E_0=this},$AZ_3:function(){var $v_0=this.get_viewModel().get_stepId()+"Aggregation",$v_1=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",$v_0,"section")));this.$2Q_3=new Mscrm.BusinessRules.Views.SetAggregateStepSectionView($v_1);this.$2Q_3.set_dataContext(this.get_viewModel().$6U_3);this.$2Q_3.initialize();this.$2Q_3.$E_0=this}};Mscrm.BusinessRules.Views.SetAggregateStepSectionView=function($p0){this.$$d_$9h_3=Function.createDelegate(this,this.$9h_3);this.$$d_onTargetEntityPropertyChanged=Function.createDelegate(this,this.onTargetEntityPropertyChanged);Mscrm.BusinessRules.Views.SetAggregateStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetAggregateStepSectionView.prototype={$1f_3:null,$B_3:null,$1G_3:null,$10_3:null,$1Y_3:null,get_aggregationSectionView:function(){return this.$1f_3},set_aggregationSectionView:function($p0){this.$1f_3&&this.$1f_3!==$p0&&this.$1f_3.dispose();this.$1f_3=$p0;return $p0},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$1G_3)){this.$1G_3.unbind("click",null);this.$1G_3.unbind("keydown",null);if(!IsNull(this.$1Y_3)){this.$1Y_3.unbind("click",null);this.$1Y_3.unbind("keydown",null)}this.$10_3.dispose()}if(!IsNull(this.$1f_3)){this.$1f_3.dispose();this.$1f_3=null}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);this.$AZ_3()},get_results:function(){return IsNull(this.$1f_3)?Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance():this.$1f_3.get_results()},onTargetEntityPropertyChanged:function($p0,$p1){switch($p1.get_propertyName()){case "SelectedIndexTargetEntity":if(!IsNull(this.get_viewModel().get_step().get_aggregate()))($p0.$j_3===-1||this.get_viewModel().$25_3.$5v_3||this.get_viewModel().$25_3.get_currentEntityName()!==this.get_viewModel().get_step().get_targetRelationship().get_entityName())&&Mscrm.BusinessRules.Views.AggregationReadToolBarView.deleteAction(this.$1f_3);break}},$AZ_3:function(){if(!IsNull(this.get_viewModel().$25_3)){var $v_0=this.get_jQueryProxy().selectElement("#"+this.get_viewModel().get_stepId()+"AggregationAggregationStep");this.$1f_3=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.get_viewModel().$25_3,$v_0);this.$1f_3.$E_0=this}this.$DL_3()},$DL_3:function(){this.$B_3=this.get_jQueryProxy().selectInElement("#AddAggregationButton",this.$1_1);if(!IsNull(this.$B_3)&&this.$B_3.get_length()>0){this.$B_3.click(this.$$d_$9h_3);this.$1G_3=this.$B_3.children("img");this.$1Y_3=this.get_jQueryProxy().selectInElement("#AddAggregation",this.$1_1);var $$t_1=this;this.$B_3.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_1.$9h_3($p1_0)});if(!IsNull(this.$1G_3)){this.$10_3=new Mscrm.BusinessRules.Views.AddImageBehavior(this.$B_3);this.$10_3.initialize()}!IsNull(this.get_viewModel().$25_3)&&this.$B_3.addClass("preventadd")}},$9h_3:function($p0){var $v_0=this.get_jQueryProxy().selectElement("#AggregationStepContainer"),$v_1=new Mscrm.BusinessRules.Builders.AggregationSectionBuilder(this.get_viewModel()),$v_2=$v_1.buildView($v_0),$v_3=$v_2.get_dataContext();$v_3.set_parent(this.get_viewModel());$v_2.set_parent(this);$v_2.get_inlineView().goToEditState();$v_2.setFocus();this.set_aggregationSectionView($v_2);(new Mscrm.Proxies.JQueryProxy).selectElement("#AddAggregationButton").addClass("preventadd")}};Mscrm.BusinessRules.Views.SetSourceStepSectionView=function($p0){this.$$d_onUseSourceHierarchyPropertyChanged=Function.createDelegate(this,this.onUseSourceHierarchyPropertyChanged);Mscrm.BusinessRules.Views.SetSourceStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetSourceStepSectionView.prototype={$4C_3:null,$1T_3:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$1T_3)){this.$1T_3.dispose();this.$1T_3=null}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);this.$Aa_3()},get_results:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance();!IsNull(this.$4C_3)&&$v_0.compileResults(this.$4C_3.get_results());!IsNull(this.$1T_3)&&$v_0.compileResults(this.$1T_3.get_results());return $v_0},onUseSourceHierarchyPropertyChanged:function($p0,$p1){switch($p1.get_propertyName()){case "UseSourceHierarchyProperty":this.$6m_3();if($p0.get_useSourceHierarchy())this.$1T_3.$1_1.show();else{this.$1T_3.$1_1.hide();this.get_viewModel().get_step().set_sourceFilter(null)}break}},$6m_3:function(){if(this.$1T_3.$q_3.get_expressions().get_count()>0)for(var $v_0=this.$1T_3.$q_3.get_expressions().get_count()-1;$v_0>=0;$v_0--){var $v_1=this.$1T_3.$q_3.get_expressions().get_item($v_0);Mscrm.BusinessRules.Views.ConditionReadToolBarView.deleteAction($v_1)}},$Aa_3:function(){var $v_0=this.get_viewModel().get_stepId()+"SourceFilter",$v_1=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",$v_0,"condition"))),$v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName());if($v_2.HierarchyType===1||this.get_viewModel().$2o_3.get_useSourceHierarchy()){var $v_3=this.get_jQueryProxy().selectElement("#"+this.get_viewModel().get_stepId()+"SourceUseSourceHierarchy");this.$4C_3=new Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView($v_3);this.$4C_3.set_dataContext(this.get_viewModel().$2o_3);this.$4C_3.initialize();this.$4C_3.$E_0=this;this.$1T_3=new Mscrm.BusinessRules.Views.FilterSectionView($v_1);this.$1T_3.set_dataContext(this.get_viewModel().$6V_3);this.$1T_3.initialize();this.$1T_3.$E_0=this;!this.get_viewModel().$2o_3.get_useSourceHierarchy()&&$v_1.hide()}else $v_1.hide()},shiftFocus:function($p0){if(Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView.isInstanceOfType($p0)&&this.$4C_3.get_dataContext().get_useSourceHierarchy())this.$1T_3.setFocus();else this.$E_0.shiftFocus(this)}};Mscrm.BusinessRules.Views.SetTargetStepSectionView=function($p0){this.$$d_$7s_3=Function.createDelegate(this,this.$7s_3);this.$$d_onUseSourceHierarchyPropertyChanged=Function.createDelegate(this,this.onUseSourceHierarchyPropertyChanged);this.$$d_onTargetEntityPropertyChanged=Function.createDelegate(this,this.onTargetEntityPropertyChanged);Mscrm.BusinessRules.Views.SetTargetStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetTargetStepSectionView.prototype={$e_3:null,$1q_3:null,$1p_3:null,$B_3:null,$1G_3:null,$10_3:null,$1Y_3:null,get_targetEntityStepSectionView:function(){return this.$1q_3},set_targetEntityStepSectionView:function($p0){this.$1q_3&&this.$1q_3!==$p0&&this.$1q_3.dispose();this.$1q_3=$p0;return $p0},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$1G_3)){this.$1G_3.unbind("click",null);this.$1G_3.unbind("keydown",null);if(!IsNull(this.$1Y_3)){this.$1Y_3.unbind("click",null);this.$1Y_3.unbind("keydown",null)}this.$10_3.dispose()}if(!IsNull(this.$1q_3)){this.$1q_3.dispose();this.$1q_3=null}if(!IsNull(this.$1p_3)){this.$1p_3.dispose();this.$1p_3=null}if(!IsNull(this.$e_3)){this.$e_3.dispose();this.$e_3=null}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);this.$9G_3()},get_results:function(){return this.$e_3.get_results()},onUseSourceHierarchyPropertyChanged:function($p0,$p1){switch($p1.get_propertyName()){case "UseSourceHierarchyProperty":if($p0.get_useSourceHierarchy())this.$BC_3(window.LOCID_ROLLUP_RELATEDOPTIONAL);else this.$BC_3(window.LOCID_ROLLUP_RELATEDENTITY);break}},$BC_3:function($p0){var $v_0=String.format("{0}_section",this.get_viewModel().get_stepId()+"Related"),$v_1=String.format("{0}_header",$v_0),$v_2=this.get_jQueryProxy().selectElement("#"+$v_1);$P_CRM(".sectionheadertext",$v_2.get_jQueryObject()).text($p0);$P_CRM(".sectionheadercontainer",$v_2.get_jQueryObject()).attr("title",$p0);$P_CRM("img",$v_2.get_jQueryObject()).attr("alt",$p0)},onTargetEntityPropertyChanged:function($p0,$p1){switch($p1.get_propertyName()){case "SelectedIndexTargetEntity":if($p0.$j_3===-1){this.$6m_3();this.$8y_3();this.$e_3.$1_1.hide()}else{if(this.$e_3.$q_3.get_dataContext().get_currentEntityName()!==this.get_viewModel().get_step().get_targetRelationship().get_entityName()){this.$6m_3();this.$8y_3()}this.$e_3.$1_1.show();if(Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.RollupsV2")){var $v_0=this.$1q_3.get_dataContext().$j_3,$v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities[$v_0].RelationshipEntity;if($v_1.IsActivity){this.$As_3($v_1);this.$1p_3.$1_1.show()}else this.$8y_3()}}break}},$6m_3:function(){if(this.$e_3.$q_3.get_expressions().get_count()>0)for(var $v_0=this.$e_3.$q_3.get_expressions().get_count()-1;$v_0>=0;$v_0--){var $v_1=this.$e_3.$q_3.get_expressions().get_item($v_0);Mscrm.BusinessRules.Views.ConditionReadToolBarView.deleteAction($v_1)}},$8y_3:function(){if(!IsNull(this.$1p_3)){this.$1p_3.deleteAllChildren();this.$1p_3.$1_1.hide()}},$9G_3:function(){if(!IsNull(this.get_viewModel().$1z_3)){var $v_0=this.get_jQueryProxy().selectElement("#"+this.get_viewModel().get_stepId()+"RelatedRelatedRelationship");this.$1q_3=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.get_viewModel().$1z_3,$v_0);this.$1q_3.$E_0=this}this.$AW_3();this.$Ab_3();Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.RollupsV2")&&this.$DM_3()},$AW_3:function(){this.$B_3=this.get_jQueryProxy().selectInElement("#AddRelatedEntityButton",this.$1_1);if(!IsNull(this.$B_3)&&this.$B_3.get_length()>0){this.$B_3.click(this.$$d_$7s_3);this.$1G_3=this.$B_3.children("img");this.$1Y_3=this.get_jQueryProxy().selectInElement("#AddRelatedEntity",this.$1_1);var $$t_1=this;this.$B_3.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_1.$7s_3($p1_0)});if(!IsNull(this.$1G_3)){this.$10_3=new Mscrm.BusinessRules.Views.AddImageBehavior(this.$B_3);this.$10_3.initialize()}!IsNull(this.get_viewModel().$1z_3)&&this.$B_3.addClass("preventadd")}},$Ab_3:function(){var $v_0=this.get_viewModel().get_stepId()+"RelatedFilter",$v_1=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",$v_0,"condition")));this.$e_3=new Mscrm.BusinessRules.Views.FilterSectionView($v_1);this.$e_3.set_dataContext(this.get_viewModel().$6Y_3);this.$e_3.initialize();this.$e_3.$E_0=this;IsNull(this.get_viewModel().$1z_3)&&$v_1.hide()},$DM_3:function(){if(!IsNull(this.get_viewModel().$5Y_3)){var $v_0=this.get_viewModel().get_stepId()+"RelatedLinked",$v_1=String.format("{0}_{1}",$v_0,"section");$v_0=String.format("{0}_section",$v_1);var $v_2=this.get_jQueryProxy().selectElement("#"+$v_0);this.$1p_3=new Mscrm.BusinessRules.Views.SetTargetLinkedStepSectionView($v_2);this.$1p_3.set_dataContext(this.get_viewModel().$5Y_3);this.$1p_3.initialize();this.$1p_3.$E_0=this;if(this.get_viewModel().get_step().get_targetRelationship()){var $v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity(this.get_viewModel().get_step().get_targetRelationship().get_entityName());if($v_3.IsActivity){this.$As_3($v_3);this.$1p_3.$1_1.show()}}}},$As_3:function($p0){var $v_0=this.$1p_3.get_dataContext();$v_0.$5W_3=$p0.EntityLogicalName;var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestOneToManyRelationships($p0.EntityLogicalName),$$t_4=this;$v_1.done(function($p1_0){$v_0.$6H_3=$p1_0})},$7s_3:function($p0){var $v_0=this.get_jQueryProxy().selectElement("#RelatedRelationshipContainer"),$v_1=new Mscrm.BusinessRules.Builders.TargetEntitySectionBuilder(this.get_viewModel()),$v_2=$v_1.buildView($v_0),$v_3=$v_2.get_dataContext();$v_3.set_parent(this.get_viewModel());$v_2.set_parent(this);$v_2.get_inlineView().goToEditState();$v_2.setFocus();this.set_targetEntityStepSectionView($v_2);Mscrm.BusinessRules.Views.RollupRuleStepSectionView.get_rollupRuleStepView().bindEventForTargetEntity();(new Mscrm.Proxies.JQueryProxy).selectElement("#AddRelatedEntityButton").addClass("preventadd")},shiftFocus:function($p0){if(Mscrm.BusinessRules.Views.TargetEntityStepView.isInstanceOfType($p0))this.$e_3.setFocus();else Mscrm.BusinessRules.Views.SectionView.prototype.shiftFocus.call(this,$p0)},setFocus:function(){if(IsNull(this.$1q_3))this.get_jQueryProxy().selectInElement(".sectionheadercontainer",this.$1_1).setFocus();else this.$1q_3.setFocus()}};Mscrm.BusinessRules.Views.SetTargetLinkedStepSectionView=function($p0){this.$$d_$7s_3=Function.createDelegate(this,this.$7s_3);this.$$d_onTargetEntityPropertyChanged=Function.createDelegate(this,this.onTargetEntityPropertyChanged);Mscrm.BusinessRules.Views.SetTargetLinkedStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetTargetLinkedStepSectionView.prototype={$e_3:null,$1U_3:null,$B_3:null,$1G_3:null,$10_3:null,$1Y_3:null,get_targetLinkedEntityStepSectionView:function(){return this.$1U_3},set_targetLinkedEntityStepSectionView:function($p0){this.$1U_3&&this.$1U_3!==$p0&&this.$1U_3.dispose();this.$1U_3=$p0;return $p0},dispose:function(){if(this.$9_0)return;!IsNull(this.get_viewModel().$1D_3)&&this.get_viewModel().$1D_3.remove_propertyChanged(this.$$d_onTargetEntityPropertyChanged);if(!IsNull(this.$1G_3)){this.$1G_3.unbind("click",null);this.$1G_3.unbind("keydown",null);if(!IsNull(this.$1Y_3)){this.$1Y_3.unbind("click",null);this.$1Y_3.unbind("keydown",null)}this.$10_3.dispose()}if(!IsNull(this.$1U_3)){this.$1U_3.dispose();this.$1U_3=null}if(!IsNull(this.$e_3)){this.$e_3.dispose();this.$e_3=null}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);this.$9G_3()},get_results:function(){return this.$e_3.get_results()},onTargetEntityPropertyChanged:function($p0,$p1){switch($p1.get_propertyName()){case "SelectedIndexTargetLinkedEntity":if($p0.$j_3===-1)this.deleteAllChildren();else{this.$e_3.$q_3.get_dataContext().get_currentEntityName()!==this.get_viewModel().get_step().get_targetRelationshipLinked().get_entityName()&&this.$6m_3();this.$e_3.$1_1.show()}break}},deleteAllChildren:function(){if(!IsNull(this.$1U_3)){this.$1U_3.deleteRelatedEntitySection();this.get_viewModel().$1D_3.remove_propertyChanged(this.$$d_onTargetEntityPropertyChanged);this.set_targetLinkedEntityStepSectionView(null);this.get_viewModel().$1D_3=null;this.get_viewModel().get_step().set_targetRelationshipLinked(null)}this.get_jQueryProxy().selectElement("#AddRelatedLinkedEntityButton").removeClass("preventadd").setFocus();this.$6m_3();this.$e_3.$1_1.hide()},$6m_3:function(){if(this.$e_3.$q_3.get_expressions().get_count()>0)for(var $v_0=this.$e_3.$q_3.get_expressions().get_count()-1;$v_0>=0;$v_0--){var $v_1=this.$e_3.$q_3.get_expressions().get_item($v_0);Mscrm.BusinessRules.Views.ConditionReadToolBarView.deleteAction($v_1)}},$9G_3:function(){if(!IsNull(this.get_viewModel().$1D_3)){var $v_0=this.get_jQueryProxy().selectElement("#"+this.get_viewModel().get_stepId()+"RelatedLinkedRelatedLinkedRelationship");this.$1U_3=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.get_viewModel().$1D_3,$v_0);this.$1U_3.$E_0=this;this.get_viewModel().$1D_3.add_propertyChanged(this.$$d_onTargetEntityPropertyChanged);this.$Eq_3()}this.$AW_3();this.$Ab_3()},$AW_3:function(){this.$B_3=this.get_jQueryProxy().selectInElement("#AddRelatedLinkedEntityButton",this.$1_1);if(!IsNull(this.$B_3)&&this.$B_3.get_length()>0){this.$B_3.click(this.$$d_$7s_3);this.$1G_3=this.$B_3.children("img");this.$1Y_3=this.get_jQueryProxy().selectInElement("#AddRelatedLinkedEntity",this.$1_1);var $$t_1=this;this.$B_3.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_1.$7s_3($p1_0)});if(!IsNull(this.$1G_3)){this.$10_3=new Mscrm.BusinessRules.Views.AddImageBehavior(this.$B_3);this.$10_3.initialize()}!IsNull(this.get_viewModel().$1D_3)&&this.$B_3.addClass("preventadd")}},$Ab_3:function(){var $v_0=this.get_viewModel().get_stepId()+"RelatedLinkedFilter",$v_1=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",$v_0,"condition")));this.$e_3=new Mscrm.BusinessRules.Views.FilterSectionView($v_1);this.$e_3.set_dataContext(this.get_viewModel().$6Z_3);this.$e_3.initialize();this.$e_3.$E_0=this;IsNull(this.get_viewModel().$1D_3)&&$v_1.hide()},$7s_3:function($p0){var $v_0=this.get_jQueryProxy().selectElement("#RelatedLinkedRelationshipContainer"),$v_1=new Mscrm.BusinessRules.Builders.TargetEntityLinkedSectionBuilder(this.get_viewModel()),$v_2=$v_1.buildView($v_0),$v_3=$v_2.get_dataContext();$v_3.set_parent(this.get_viewModel());$v_2.set_parent(this);$v_2.get_inlineView().goToEditState();$v_2.setFocus();this.set_targetLinkedEntityStepSectionView($v_2);!IsNull(this.get_viewModel().$1D_3)&&this.get_viewModel().$1D_3.add_propertyChanged(this.$$d_onTargetEntityPropertyChanged);(new Mscrm.Proxies.JQueryProxy).selectElement("#AddRelatedLinkedEntityButton").addClass("preventadd")},shiftFocus:function($p0){if(Mscrm.BusinessRules.Views.TargetLinkedEntityStepView.isInstanceOfType($p0))this.$e_3.setFocus();else Mscrm.BusinessRules.Views.SectionView.prototype.shiftFocus.call(this,$p0)},setFocus:function(){if(IsNull(this.$1U_3))this.get_jQueryProxy().selectInElement(".sectionheadercontainer",this.$1_1).setFocus();else this.$1U_3.setFocus()},$Eq_3:function(){var $v_0;if(!IsNull(this.$1U_3)){$v_0=this.get_jQueryProxy().selectElement("#"+this.get_viewModel().get_stepId()+"RelatedLinked_section_section");$v_0.removeClass("hidecontrol")}}};Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView=function($p0){Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getUseSourceHierarchyStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0},shiftFocus:function($p0){var $v_0=$p0.get_parent();$v_0.shiftFocus(this)}};Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepView=function($p0){Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},generateResults:function(){this.$C_3=this.get_viewModel().validateHierarchy()},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "UseSourceHierarchyProperty":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},$2s_3:function(){var $v_0=this.get_viewModel().get_useSourceHierarchy()?window.LOCID_ROLLUPFIELD_YES:window.LOCID_ROLLUPFIELD_NO,$v_1=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0.toUpperCase()))),$v_2=this.get_viewModel().get_useSourceHierarchy()?String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(window.LOCID_ROLLUP_HIERARCHYNAMEFORMAT),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_hierarchicalRelationshipName()))):"";this.get_stepValueContent().html(String.format("<div>\r\n\t{0}<span class='rollupStepLabel'>{1}</span>\r\n</div>",$v_1,$v_2))},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView(this)},buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildEmptyReadToolBar($v_0);return $v_1}};Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView=function($p0){this.$$d_$F4_3=Function.createDelegate(this,this.$F4_3);this.$K_3=Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView.$16++;Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView.prototype={get_isValid:function(){return this.$6c_3.get_isValid()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);var $v_0=Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$6c_3).toString()!=="0";this.get_inlineView().get_viewModel().set_useSourceHierarchy($v_0);this.get_editElementWrapper().trigger("state-commit")},discard:function($p0){var $v_0=this.get_inlineView().get_viewModel().get_useSourceHierarchy()?1:0;Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$6c_3,$v_0);this.$4l_3.trigger("change");Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format("<div class='{1} {2}'>\r\n\t<div class='{3}' title='{11}'>{5}</div>\r\n\t<div id='{8}' class='{4}'>\r\n\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t</div>\r\n\t<div id='{9}'class='{3}' title='{12}'>{7}</div>\r\n\t<input type='text' disabled='disabled' id='{10}' class='{6}'>\r\n</div>",this.$K_3,"editstepcontainer","rollupEditStepFloat","rollupStepLabel","rollupStepValue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_ROLLUPFIELD_USEHIERARCHY),"rollupHierarchyNameContainer rollupStepValue ms-crm-Inline-Edit",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_RELATIONSHIP),String.format("useSourceHierarchyContainer{0}",this.$K_3),String.format("sourceHierarchyLabel{0}",this.$K_3),String.format("sourceHierarchyName{0}",this.$K_3),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_ROLLUPFIELD_USEHIERARCHY),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_RELATIONSHIP)))},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);var $v_0=$P_CRM("#"+String.format("useSourceHierarchyContainer{0}",this.$K_3)),$v_1=!!Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_hierarchyName()&&!!Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_hierarchyName().length,$v_2=this.get_inlineView().get_viewModel().get_useSourceHierarchy(),$v_3=$v_1?$v_2?1:0:0;this.$6c_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,$v_1?this.$D2_3():this.$AK_3(),$v_3.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL);this.$8f_3=$P_CRM("#"+String.format("sourceHierarchyName{0}",this.$K_3));this.$8f_3.val(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_hierarchyName());this.$4l_3=$P_CRM("#"+String.format("useSourceHierarchyContainer{0}",this.$K_3+"_i_select"));this.$7j_3=$P_CRM("#"+String.format("sourceHierarchyLabel{0}",this.$K_3));this.$7k_3=$P_CRM("#"+String.format("sourceHierarchyName{0}",this.$K_3));this.$Bm_3();this.$4l_3.trigger("change")},$D2_3:function(){var $v_0=this.$AK_3(),$v_1=new Mscrm.EnumOptionJsonWrapper;$v_1.Value=1;$v_1.Label=window.LOCID_ROLLUPFIELD_YES;Array.add($v_0,$v_1);return $v_0},$AK_3:function(){var $v_0=new Array(0),$v_1=new Mscrm.EnumOptionJsonWrapper;$v_1.Value=0;$v_1.Label=window.LOCID_ROLLUPFIELD_NO;Array.add($v_0,$v_1);return $v_0},$Bm_3:function(){this.$4l_3.bind("change",this.$$d_$F4_3)},$F2_3:function(){this.$4l_3.unbind("change",this.$$d_$F4_3)},$F4_3:function($p0){if(this.$4l_3.val()==="1"){this.$7j_3.show();this.$7k_3.show()}else{this.$7j_3.hide();this.$7k_3.hide()}},dispose:function(){this.$F2_3();Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.dispose.call(this)},$6c_3:null,$8f_3:null,$4l_3:null,$7j_3:null,$7k_3:null};Mscrm.BusinessRules.Views.TargetEntityStepView=function($p0){Mscrm.BusinessRules.Views.TargetEntityStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.TargetEntityStepView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getTargetEntityStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},setFocus:function(){this.get_jQueryProxy().selectInElement(".sectionheadercontainer",this.$1_1).setFocus()},shiftFocus:function($p0){var $v_0=$p0.get_parent();$v_0.shiftFocus(this)}};Mscrm.BusinessRules.Views.InlineTargetEntityStepView=function($p0){Mscrm.BusinessRules.Views.InlineTargetEntityStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineTargetEntityStepView.prototype={handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "SelectedIndexTargetEntity":this.$2s_3();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},$2s_3:function(){if(this.get_viewModel().$j_3>-1){var $v_0=String.format(CrmEncodeDecode.CrmHtmlEncodeForFormatString(window.LOCID_ROLLUP_TARGETENTITYFORMAT),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_selectedRelatedEntityDisplayName())),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_selectedRelatedEntityAttributeDisplayName())));this.get_stepValueContent().html($v_0)}},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView(this)},buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildTargetEntityReadToolBar(this.$E_1,$v_0);return $v_1}};Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView.$16++;Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView.prototype={get_isValid:function(){return this.$4i_3.get_isValid()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);var $v_0=Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$4i_3);if(IsNull($v_0)){this.get_inlineView().get_viewModel().set_selectedIndex(-1);this.$4i_3.tryReplaceAndShowValidationResult(new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,String.format(window.LOCID_ROLLUP_NO_RELATIONSHIPS,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.DisplayName)));return}if($v_0>=0){this.get_inlineView().get_viewModel().set_selectedIndex($v_0);var $v_1=this.get_inlineView().get_viewModel().get_step().get_targetRelationship().get_entityName(),$$t_2=this;Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_1).done(function(){});this.get_editElementWrapper().trigger("state-commit")}},discard:function($p0){this.$4i_3.clearValidation();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$4i_3,this.get_inlineView().get_viewModel().$j_3.toString());Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},discardNewCreatedStep:function(){var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;if($v_1.get_isNewCreated()){Mscrm.BusinessRules.Views.TargetEntityReadToolBarView.deleteAction($v_0.$E_1);this.get_jQueryProxy().selectElement("#AddRelatedEntityButton").removeClass("preventadd")}},createStepHtml:function($p0){$p0.append(String.format(this.$1I_3,this.$K_3,"editstepcontainer","rollupEditStepFloat","rollupStepLabel","rollupStepValue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_ROLLUP_TARGETRELATIONSHIP),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_ROLLUP_TARGETRELATIONSHIP)))},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);var $v_0=$P_CRM("#targetEntityContainer"+this.$K_3),$v_1=this.get_inlineView().get_viewModel().get_relatedEntityList(),$v_2=this.get_inlineView().get_viewModel().$j_3,$v_3=$v_2===-1?"":$v_2.toString();this.$4i_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,$v_1,$v_3.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)},$4i_3:null,$1I_3:"<div class='{1} {2}'>\r\n\t<div class='{3}' title='{6}'>{5}</div>\r\n\t<div id='targetEntityContainer{0}' class='{4}'>\r\n\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.TargetLinkedEntityStepView=function($p0){Mscrm.BusinessRules.Views.TargetLinkedEntityStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.TargetLinkedEntityStepView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getTargetLinkedEntityStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},setFocus:function(){this.get_jQueryProxy().selectInElement(".sectionheadercontainer",this.$1_1).setFocus()},shiftFocus:function($p0){var $v_0=$p0.get_parent();$v_0.shiftFocus(this)},deleteRelatedEntitySection:function(){this.$1_1.get_jQueryObject().remove();this.get_dataContext().dispose()}};Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepView=function($p0){Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepView.prototype={handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "SelectedIndexTargetLinkedEntity":this.$2s_3();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},$2s_3:function(){if(this.get_viewModel().$j_3>-1){var $v_0=String.format(CrmEncodeDecode.CrmHtmlEncodeForFormatString(window.LOCID_ROLLUP_LINKEDFORMAT),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_selectedRelatedLinkedEntityDisplayName())),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_selectedRelatedLinkedEntityAttributeDisplayName())));this.get_stepValueContent().html($v_0)}},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView(this)},buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildTargetLinkedEntityReadToolBar(this.$E_1,$v_0);return $v_1}};Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView.$16++;Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView.prototype={get_isValid:function(){return this.$4h_3.get_isValid()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);var $v_0=Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$4h_3);if(IsNull($v_0)){this.get_inlineView().get_viewModel().set_selectedIndex(-1);this.$4h_3.tryReplaceAndShowValidationResult(new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,String.format(window.LOCID_ROLLUP_NO_RELATIONSHIPS,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.DisplayName)));return}if($v_0>=0){this.get_inlineView().get_viewModel().set_selectedIndex($v_0);var $v_1=this.get_inlineView().get_viewModel().get_step().get_targetRelationshipLinked().get_entityName(),$$t_2=this;Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_1).done(function(){});this.get_editElementWrapper().trigger("state-commit")}},discard:function($p0){this.$4h_3.clearValidation();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$4h_3,this.get_inlineView().get_viewModel().$j_3.toString());Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},discardNewCreatedStep:function(){var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;if($v_1.get_isNewCreated()){Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView.deleteAction($v_0.$E_1);this.get_jQueryProxy().selectElement("#AddRelatedLinkedEntityButton").removeClass("preventadd")}},createStepHtml:function($p0){$p0.append(String.format(this.$1I_3,this.$K_3,"editstepcontainer","rollupEditStepFloat","rollupStepLabel","rollupStepValue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_ROLLUP_LINKEDRELATIONSHIP),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_ROLLUP_LINKEDRELATIONSHIP)))},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);var $v_0=this.get_inlineView().get_viewModel(),$v_1=$v_0.$E_0;if(IsNull($v_1))this.$Ac_3();else{IsNull(this.$6W_3)&&this.get_$Ec_3().append(this.get_$Eu_3());var $v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestOneToManyRelationships($v_1.$5W_3),$$t_4=this;$v_2.done(function($p1_0){$v_0.$6G_3=$p1_0;$$t_4.$Ac_3()});if($v_2.state()==="pending"){this.get_$9P_3().addClass("currentlyprocessing");var $$t_5=this;$v_2.always(function(){$$t_5.get_$9P_3().removeClass("currentlyprocessing")})}}},$Ac_3:function(){var $v_0=$P_CRM("#targetLinkedEntityContainer"+this.$K_3),$v_1=this.get_inlineView().get_viewModel().get_relatedLinkedEntityList(),$v_2=this.get_inlineView().get_viewModel().$j_3,$v_3=$v_2===-1?this.$9X_3.toString():$v_2.toString();this.$4h_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,$v_1,$v_3.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)},get_$Eu_3:function(){if(IsNull(this.$6W_3))this.$6W_3=String.format("<span class='{0}'><img src='{1}' /></span>","processing",Mscrm.CrmUri.create("/_imgs/ico/16_progress.gif"));return this.$6W_3},get_$9P_3:function(){return $P_CRM("#RelatedLinkedRelationshipContainer")},get_$Ec_3:function(){return $P_CRM(".ms-crm-Inline-Edit",this.get_$9P_3())},$4h_3:null,$6W_3:null,$9X_3:0,$1I_3:"<div class='{1} {2}'>\r\n\t<div class='{3}' title='{6}'>{5}</div>\r\n\t<div id='targetLinkedEntityContainer{0}' class='{4}'>\r\n\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.AggregationSectionToolBarView=function($p0){Mscrm.BusinessRules.Views.AggregationSectionToolBarView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.AggregationSectionToolBarView.prototype={get_closeImage:function(){if(IsNull(this.$27_3))this.$27_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_cancel_default_24.png"));return this.$27_3},get_hoverCloseImage:function(){if(IsNull(this.$2J_3))this.$2J_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_cancel_hover_24.png"));return this.$2J_3},get_selectedCloseImage:function(){if(IsNull(this.$2O_3))this.$2O_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_cancel_select_24.png"));return this.$2O_3},get_doneImage:function(){if(IsNull(this.$2F_3))this.$2F_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_ok_default_24.png"));return this.$2F_3},get_hoverDoneImage:function(){if(IsNull(this.$2K_3))this.$2K_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_ok_hover_24.png"));return this.$2K_3},get_selectedDoneImage:function(){if(IsNull(this.$2P_3))this.$2P_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_ok_select_24.png"));return this.$2P_3},$27_3:null,$2J_3:null,$2O_3:null,$2F_3:null,$2K_3:null,$2P_3:null};Mscrm.BusinessRules.Views.AggregationReadToolBarView=function($p0){this.$$d_$5g_2=Function.createDelegate(this,this.$5g_2);Mscrm.BusinessRules.Views.AggregationReadToolBarView.initializeBase(this);this.$U_2=$p0};Mscrm.BusinessRules.Views.AggregationReadToolBarView.deleteAction=function($p0){var $v_0=$p0,$v_1=$v_0.get_dataContext(),$v_2=$v_0.$E_0,$v_3=$v_2.get_dataContext(),$v_4=$v_1.get_step();$v_0.$1_1.get_jQueryObject().parent().addClass("emptycollection");$v_0.$1_1.get_jQueryObject().remove();$v_2.set_aggregationSectionView(null);$v_3.$25_3=null;$v_4.set_aggregate(null);$v_1.dispose();!IsNull(Mscrm.BusinessRules.BusinessRuleInitializer.$T)&&Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();(new Mscrm.Proxies.JQueryProxy).selectElement("#AddAggregationButton").removeClass("preventadd");(new Mscrm.Proxies.JQueryProxy).selectElement("#AddAggregationButton").setFocus()};Mscrm.BusinessRules.Views.AggregationReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},deleteHandler:function(){var $v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),this.$$d_$5g_2,null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBLCONFIRM_DELETEBODY,"");return true},$5g_2:function($p0){Mscrm.BusinessRules.Views.AggregationReadToolBarView.deleteAction(this.$U_2)}};Mscrm.BusinessRules.Views.TargetEntityReadToolBarView=function($p0){this.$$d_$5g_2=Function.createDelegate(this,this.$5g_2);Mscrm.BusinessRules.Views.TargetEntityReadToolBarView.initializeBase(this);this.$U_2=$p0};Mscrm.BusinessRules.Views.TargetEntityReadToolBarView.deleteAction=function($p0){var $v_0=$p0,$v_1=$v_0.get_dataContext(),$v_2=$v_0.$E_0,$v_3=$v_2.get_dataContext(),$v_4=$v_1.get_step();Mscrm.BusinessRules.Views.RollupRuleStepSectionView.get_rollupRuleStepView().unbindEventForTargetEntity();$v_0.$1_1.get_jQueryObject().remove();$v_2.set_targetEntityStepSectionView(null);$v_3.$1z_3=null;$v_4.set_targetRelationship(null);$v_1.dispose();(new Mscrm.Proxies.JQueryProxy).selectElement("#AddRelatedEntityButton").removeClass("preventadd");(new Mscrm.Proxies.JQueryProxy).selectElement("#AddRelatedEntityButton").setFocus()};Mscrm.BusinessRules.Views.TargetEntityReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},deleteHandler:function(){var $v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),this.$$d_$5g_2,null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBLCONFIRM_DELETEBODY,"");return true},$5g_2:function($p0){var $v_0=this.$U_2.get_dataContext();$v_0.set_selectedIndex(-1);Mscrm.BusinessRules.Views.TargetEntityReadToolBarView.deleteAction(this.$U_2)}};Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView=function($p0){this.$$d_$5g_2=Function.createDelegate(this,this.$5g_2);Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView.initializeBase(this);this.$U_2=$p0};Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView.deleteAction=function($p0){var $v_0=$p0,$v_1=$v_0.get_dataContext(),$v_2=$v_0.$E_0,$v_3=$v_2.get_dataContext(),$v_4=$v_1.get_step();$v_0.$1_1.get_jQueryObject().remove();$v_2.set_targetLinkedEntityStepSectionView(null);$v_3.$1D_3=null;$v_4.set_targetRelationshipLinked(null);$v_1.dispose();(new Mscrm.Proxies.JQueryProxy).selectElement("#AddRelatedLinkedEntityButton").removeClass("preventadd");(new Mscrm.Proxies.JQueryProxy).selectElement("#AddRelatedLinkedEntityButton").setFocus()};Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},deleteHandler:function(){var $v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),this.$$d_$5g_2,null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBLCONFIRM_DELETEBODY,"");return true},$5g_2:function($p0){var $v_0=this.$U_2.get_dataContext();$v_0.set_selectedIndex(-1);Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView.deleteAction(this.$U_2)}};Mscrm.BusinessRules.Views.ManageRollupFieldView=function(){Mscrm.BusinessRules.Views.ManageRollupFieldView.initializeBase(this)};Mscrm.BusinessRules.Views.ManageRollupFieldView.prototype={createHeaderView:function(){return new Mscrm.BusinessRules.Views.RollupFieldHeaderView},createFormBodyView:function(formBody){return new Mscrm.BusinessRules.Views.RollupFieldFormBodyView(formBody)}};Mscrm.BusinessRules.Views.RollupFieldFormBodyView=function($p0){Mscrm.BusinessRules.Views.RollupFieldFormBodyView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.RollupFieldHeaderView=function(){Mscrm.BusinessRules.Views.RollupFieldHeaderView.initializeBase(this)};Mscrm.BusinessRules.Views.RollupFieldHeaderView.prototype={initialize:function(){this.ruleEntityLabel=window.LOCID_ROLLUPFIELD_NAMESTRING;var $v_0=this.get_jQueryProxy().selectElement("#BusinessRuleName");$v_0.get_jQueryObject().text(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Label.Description);$v_0.addClass("ruletitlecontent");$v_0.removeAttribute("tabindex");this.$Bl_2();Mscrm.BusinessRules.Views.HeaderView.prototype.initialize.call(this);this.$AV_2()},updateBar:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_formBodyView().get_results();!this.tryShow($v_0.getList(3),window.LOCID_ROLLUP_NONHIERARCHY_ERR,1)&&!this.tryShow($v_0.getList(6),window.LOCID_ROLLUP_NOT_HIERARCHICAL,1)&&!this.tryShow($v_0.getList(4),window.LOCID_ROLLUP_MULTIHIERARCHY_ERR,1)&&Mscrm.BusinessRules.Views.HeaderView.prototype.updateBar.call(this)},$Bl_2:function(){var $$t_1=this;$P_CRM(document).bind("keydown",function($p1_0){if($p1_0.which===27){closeWindow();$p1_0.preventDefault();$p1_0.stopPropagation()}})},$AV_2:function(){if(!this.get_businessRuleViewModel().get_readOnly())return;Mscrm.BusinessRules.Views.HeaderView.prototype.unbindSaveButtons.call(this)}};Mscrm.BusinessRules.Views.InlineExpressionEditView=function($p0){this.$9Z_2=String.format("<div class='{0}'>","editexpressionandtoolbarcontainer");this.$7A_2=String.format("<div class='{0}'><div class='{1}' id='{2}'></div><div class='{3}'><div class='{4}' id='{5}'></div><div class='{6}' id='{7}'></div><div class='{8}' id='{9}'></div><div class='{10}' id='{11}'></div></div><div id='{12}'></div></div>","editexpressioncontainer","andorcon","{0}","expressioncontainer","lefopcon","{1}","conopcon","{2}","optycon","{3}","rigopcon","{4}","{5}");Mscrm.BusinessRules.Views.InlineExpressionEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineExpressionEditView.prototype={get_leftOperand:function(){return this.$4_2},get_operator:function(){return this.$L_2},get_rightOperand:function(){return this.$3_2},get_rightOperandType:function(){return this.$5_2},get_andOrOperator:function(){return this.$4M_2},get_editViewModel:function(){return this.$2_2},set_editViewModel:function($p0){this.$2_2=$p0;return $p0},get_isValid:function(){return this.validate()},validate:function(){var $v_0=parseInt(this.$2_2.get_expressionOperator().get_operation());if(!this.$Dt_2($v_0)){this.$9L_2(window.LOCID_SAVEERROR_VALIDOPERATOR);return false}var $v_1=this.$4_2.get_isValid()&&this.$L_2.get_isValid();if(!this.$Ds_2())$v_1=$v_1&&this.$5_2.get_isValid()&&this.$3_2.get_isValid();return $v_1},$9L_2:function($p0){var $v_0=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,$p0);this.$L_2.get_inlineControlView().tryReplaceAndShowValidationResult($v_0)},$Dt_2:function($p0){var $v_0=true;if(this.get_$7_2().get_leftOperand()&&this.get_$7_2().get_leftOperand().get_editViewModel().get_operandWorkflowAttributeType()===10)switch($p0){case 10:case 8:case 11:case 9:case 13:case 12:$v_0=false;break}return $v_0},postCreateEditElement:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.postCreateEditElement.call(this);var $v_0=String.format("warningview{0}",this.get_$7_2().get_id()),$v_1=String.format("{0}_lefopcon",this.get_$7_2().get_id()),$v_2=String.format("{0}_rigopcon",this.get_$7_2().get_id()),$v_3=String.format("{0}_optycon",this.get_$7_2().get_id()),$v_4=String.format("{0}_conopcon",this.get_$7_2().get_id()),$v_5=String.format("{0}_andorcon",this.get_$7_2().get_id()),$v_6=this.get_jQueryProxy().selectElement("#"+$v_1);this.$4_2=new Mscrm.BusinessRules.Views.LeftOperandView(Mscrm.BusinessRules.Views.OperandViewFactory.$3B(this.get_$7_2().get_leftOperand().get_innerOperand(),$v_6));this.$4_2.set_dataContext(this.$2_2.get_leftOperand());Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType(this.$4_2.get_operand().get_dataContext())&&!Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandEditViewModel.isInstanceOfType(this.$4_2.get_operand().get_dataContext())&&this.$4_2.get_operand().get_dataContext().set_useAttributeFiltering(true);this.$4_2.initialize();Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType(this.$4_2.get_operand())&&this.$4_2.get_operand().applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));var $v_7=this.get_jQueryProxy().selectElement("#"+$v_4);this.$L_2=new Mscrm.BusinessRules.Views.OperatorView($v_7);this.$L_2.set_dataContext(this.$2_2.get_expressionOperator());this.$L_2.initialize();var $v_8=this.get_jQueryProxy().selectElement("#"+$v_2);this.$3_2=new Mscrm.BusinessRules.Views.RightOperandView($v_8);this.$3_2.set_dataContext(this.$2_2.get_rightOperand());!IsNull(this.$3_2.get_operand())&&Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType(this.$3_2.get_operand().get_dataContext())&&this.$3_2.get_operand().get_dataContext().set_useAttributeFiltering(true);this.$3_2.initialize();!IsNull(this.$3_2.get_operand())&&Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType(this.$3_2.get_operand())&&this.$3_2.get_operand().applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));var $v_9=this.get_jQueryProxy().selectElement("#"+$v_3);this.$5_2=new Mscrm.BusinessRules.Views.OperandTypeView($v_9);this.$5_2.set_dataContext(this.$2_2.get_operandType());this.$5_2.initialize();var $v_A=this.get_jQueryProxy().selectElement("#"+$v_5);this.$4M_2=new Mscrm.BusinessRules.Views.AndOrView($v_A);if(Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel.isInstanceOfType(this.$2_2)){var $v_B=this.$2_2.$y_2;this.$4M_2.set_dataContext($v_B);this.$4M_2.initialize();if(Mscrm.BusinessRules.BusinessRuleInitializer.$x===1){var $v_C=this.get_jQueryProxy().selectElement("#"+$v_0);this.$1P_2=new Mscrm.BusinessRules.Views.WarningView(this.$2_2,$v_C)}}},createEditElement:function(){var $v_0=document.createElement("div");$v_0.innerHTML=this.$CD_2();return $P_CRM($v_0)},$CD_2:function(){var $v_0=new Sys.StringBuilder;$v_0.append(this.$9Z_2);this.$9x_2($v_0);this.createToolBarHtml($v_0);$v_0.append(this.$9Y_2);return $v_0.toString()},$9x_2:function($p0){var $v_0=CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_lefopcon",this.get_$7_2().get_id())),$v_1=CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_rigopcon",this.get_$7_2().get_id())),$v_2=CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_optycon",this.get_$7_2().get_id())),$v_3=CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_conopcon",this.get_$7_2().get_id())),$v_4=CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("warningview{0}",this.get_$7_2().get_id())),$v_5=CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_andorcon",this.get_$7_2().get_id()));$p0.append(String.format(this.$7A_2,$v_5,$v_0,$v_3,$v_2,$v_1,$v_4))},$Ds_2:function(){return IsNull(this.$2_2.get_rightOperand().get_currentInnerOperand())},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);this.$2_2.confirm();this.get_inlineView().updateValueElement();this.get_editElementWrapper().trigger("state-commit")},discard:function($p0){Mscrm.InlineEditViewBase.prototype.discard.call(this,$p0);var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;if($v_1.get_isNewCreated())Mscrm.BusinessRules.Views.ConditionReadToolBarView.deleteAction($v_0.$E_1);else this.$2_2.discard();this.$85_2()},confirm:function(){this.$85_2();if(this.get_isValid()){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.confirm.call(this);var $v_0=this.get_inlineView(),$v_1=$v_0.$E_1;$v_1.set_isNewCreated(false)}},$85_2:function(){this.$4_2.resetFocus();this.$3_2.resetFocus();this.$L_2.resetFocus()},dispose:function(){!IsNull(this.$4_2)&&this.$4_2.dispose();!IsNull(this.$3_2)&&this.$3_2.dispose();!IsNull(this.$5_2)&&this.$5_2.dispose();!IsNull(this.$L_2)&&this.$L_2.dispose();!IsNull(this.$1P_2)&&this.$1P_2.dispose()},get_$7_2:function(){return this.$2_2.get_viewModel()},$1P_2:null,$4_2:null,$L_2:null,$3_2:null,$5_2:null,$4M_2:null,$9Y_2:"</div>",$2_2:null};Mscrm.BusinessRules.Views.InlineExpressionView=function($p0){Mscrm.BusinessRules.Views.InlineExpressionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineExpressionView.prototype={get_getEditViewObject:function(){var $v_0=new Mscrm.BusinessRules.Views.InlineExpressionEditView(this);$v_0.$2_2=this.get_$7_2().get_editViewModel();return $v_0},get_dataContext:function(){return Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.get_dataContext.call(this)},set_dataContext:function($p0){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.set_dataContext.call(this,$p0);return $p0},get_readToolBarView:function(){return this.$5P_2},set_readToolBarView:function($p0){this.$5P_2=$p0;return $p0},get_stepValueContent:function(){return this.$7m_2||(this.$7m_2=new Mscrm.Proxies.JQueryObjectProxy(this.get_valueElement().children(".expressioncontent")))},set_stepValueContent:function($p0){this.$7m_2=$p0;return $p0},buildReadToolBarView:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel;$v_0.set_id(this.get_$7_2().get_id());var $v_1=this.get_readToolBarViewBuilder().buildCondition(this.$E_1,$v_0);return $v_1},updateReadModeExpression:function(){this.updateValueElement()},updateValueElement:function(){var $v_0,$v_1=this.get_$7_2().get_leftOperand().get_displayValue(),$v_2=this.get_$7_2().get_expressionOperator().get_displayName(),$v_3=!IsNull(this.get_$7_2().get_rightOperand()),$v_4=String.format("{0}_rm_lefopcon",this.get_$7_2().get_id()),$v_5=String.format("{0}_rm_rigopcon",this.get_$7_2().get_id()),$v_6=String.format("{0}_rm_whereclausecon",this.get_$7_2().get_id()),$v_7=String.format("{0}_rm_bpfstageexpleft",this.get_$7_2().get_id()),$v_8=String.format("{0}_rm_bpfstageexpright",this.get_$7_2().get_id()),$v_9=String.format("{0}_rm_bpfstageexpoperatorcon",this.get_$7_2().get_id()),$v_A=String.format("{0}_rm_conopcon",this.get_$7_2().get_id()),$v_B=String.format("{0}_rm_expprefix",this.get_$7_2().get_id());this.$3r_2=!$v_3?$v_B+" "+$v_4+" "+$v_A:$v_B+" "+$v_4+" "+$v_A+" "+$v_5;if(this.get_$7_2().get_rightOperand().get_rightOperandType()===4){$v_0=String.format(Mscrm.BusinessRules.HtmlFormat.bpfStageBinaryExpressionFormat,CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_expressionPrefix()),CrmEncodeDecode.CrmHtmlEncode($v_1),CrmEncodeDecode.CrmHtmlEncode($v_2),CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_rightOperand().get_displayValue()),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_WHERE_CLAUSE),CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_rightOperand().get_innerOperand().$4_1.get_displayValue()),CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_rightOperand().get_innerOperand().$L_1.get_displayName()),CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_rightOperand().get_innerOperand().$3_1.get_displayValue()),CrmEncodeDecode.CrmHtmlAttributeEncode($v_B),CrmEncodeDecode.CrmHtmlAttributeEncode($v_4),CrmEncodeDecode.CrmHtmlAttributeEncode($v_A),CrmEncodeDecode.CrmHtmlAttributeEncode($v_5),CrmEncodeDecode.CrmHtmlEncode($v_6),CrmEncodeDecode.CrmHtmlEncode($v_7),CrmEncodeDecode.CrmHtmlEncode($v_9),CrmEncodeDecode.CrmHtmlEncode($v_8));this.$3r_2=$v_B+" "+$v_4+" "+$v_A+" "+$v_5+" "+$v_6+" "+$v_7+" "+$v_9+" "+$v_8;this.get_chromeElement().attr("aria-labelledby",this.$3r_2)}else $v_0=!$v_3?String.format(Mscrm.BusinessRules.HtmlFormat.unaryExpressionFormat,CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_expressionPrefix()),CrmEncodeDecode.CrmHtmlEncode($v_1),CrmEncodeDecode.CrmHtmlEncode($v_2),CrmEncodeDecode.CrmHtmlAttributeEncode($v_B),CrmEncodeDecode.CrmHtmlAttributeEncode($v_4),CrmEncodeDecode.CrmHtmlAttributeEncode($v_A)):String.format(Mscrm.BusinessRules.HtmlFormat.binaryExpressionFormat,CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_expressionPrefix()),CrmEncodeDecode.CrmHtmlEncode($v_1),CrmEncodeDecode.CrmHtmlEncode($v_2),CrmEncodeDecode.CrmHtmlEncode(this.get_$7_2().get_rightOperand().get_displayValue()),CrmEncodeDecode.CrmHtmlAttributeEncode($v_B),CrmEncodeDecode.CrmHtmlAttributeEncode($v_4),CrmEncodeDecode.CrmHtmlAttributeEncode($v_A),CrmEncodeDecode.CrmHtmlAttributeEncode($v_5));this.get_stepValueContent().html($v_0);this.get_stepValueContent().attribute("aria-describedby",this.$3r_2);this.generateResults();!IsNull(Mscrm.BusinessRules.BusinessRuleInitializer.$T)&&Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()},get_readToolBarViewBuilder:function(){return this.$40_2||(this.$40_2=new Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder)},set_readToolBarViewBuilder:function($p0){this.$40_2=$p0;return $p0},get_$7_2:function(){return this.get_dataContext()},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_$7_2().get_expression().accept($v_0);this.$C_2=$v_0._results},get_results:function(){return this.$C_2},set_results:function($p0){this.$C_2=$p0;return $p0},$3r_2:"",$7m_2:null,$5P_2:null,$40_2:null,$C_2:null};Mscrm.BusinessRules.Views.SubexpressionEditView=function($p0){this.$7A_2=String.format("\r\n\t\t\t\t\t<div class='{0}'>\r\n\t\t\t\t\t\t<div class='{1}' id='{2}'></div> \r\n\t\t\t\t\t\t<div class='{3}' id='{4}'></div>\r\n\t\t\t\t\t\t<div class='{5}' id='{6}'></div>\r\n\t\t\t\t\t\t<div class='{7}' id='{8}'></div>\r\n\t\t\t\t</div>","editexpressioncontainer","lefopcon","{0}","conopcon","{1}","optycon","{2}","rigopcon","{3}");Mscrm.BusinessRules.Views.SubexpressionEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SubexpressionEditView.prototype={get_dataContext:function(){return this.$0_2},set_dataContext:function($p0){this.$0_2=$p0;return $p0},get_leftOperand:function(){return this.$4_2},get_operator:function(){return this.$L_2},get_rightOperand:function(){return this.$3_2},get_rightOperandType:function(){return this.$5_2},get_isValid:function(){return this.$4_2.get_isValid()&&this.$L_2.get_isValid()&&this.$5_2.get_isValid()&&this.$3_2.get_isValid()},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);var $v_0=this.$0_2.get_viewModel().get_id();this.$9x_2($v_0);var $v_1=String.format("{0}_lefopcon",$v_0),$v_2=String.format("{0}_rigopcon",$v_0),$v_3=String.format("{0}_optycon",$v_0),$v_4=String.format("{0}_conopcon",$v_0),$v_5=this.get_jQueryProxy().selectElement("#"+$v_1);this.$4_2=new Mscrm.BusinessRules.Views.LeftOperandView(this.getLeftOperandView($v_5));this.$4_2.set_dataContext(this.$0_2.get_leftOperand());this.$4_2.initialize();var $v_6=this.get_jQueryProxy().selectElement("#"+$v_4);this.$L_2=new Mscrm.BusinessRules.Views.OperatorView($v_6);this.$L_2.set_dataContext(this.$0_2.get_expressionOperator());this.$L_2.initialize();var $v_7=this.get_jQueryProxy().selectElement("#"+$v_2);this.$3_2=new Mscrm.BusinessRules.Views.RightOperandView($v_7);this.$3_2.set_dataContext(this.$0_2.get_rightOperand());this.$3_2.initialize();var $v_8=this.get_jQueryProxy().selectElement("#"+$v_3);this.$5_2=new Mscrm.BusinessRules.Views.OperandTypeView($v_8);this.$5_2.set_dataContext(this.$0_2.get_operandType());this.$5_2.initialize()},getLeftOperandView:function($p0){return Mscrm.BusinessRules.Views.OperandViewFactory.$3B(this.$0_2.get_leftOperand().get_innerOperand().get_viewModel(),$p0)},resetFocus:function(){this.$4_2.resetFocus();this.$3_2.resetFocus();this.$L_2.resetFocus();!IsNull(this.$5_2)&&this.$5_2.resetFocus()},$9x_2:function($p0){var $v_0=String.format("{0}_lefopcon",$p0),$v_1=String.format("{0}_rigopcon",$p0),$v_2=String.format("{0}_optycon",$p0),$v_3=String.format("{0}_conopcon",$p0);this.$1_1.html(String.format(this.$7A_2,$v_0,$v_3,$v_2,$v_1))},$0_2:null,$4_2:null,$L_2:null,$3_2:null,$5_2:null};Mscrm.BusinessRules.Views.ArithmeticExpressionEditView=function($p0){Mscrm.BusinessRules.Views.ArithmeticExpressionEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.BpfAttributeOperandView=function($p0){this.$$d_$BD_2=Function.createDelegate(this,this.$BD_2);this.$$d_$Ej_2=Function.createDelegate(this,this.$Ej_2);this.$$d_$9O_2=Function.createDelegate(this,this.$9O_2);Mscrm.BusinessRules.Views.BpfAttributeOperandView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.BpfAttributeOperandView.prototype={initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$1_1.get_jQueryObject().empty();this.$DQ_2();this.$3b_2()},get_dataContext:function(){return Mscrm.BusinessRules.Views.OperandView.prototype.get_dataContext.call(this)},set_dataContext:function($p0){Mscrm.BusinessRules.Views.OperandView.prototype.set_dataContext.call(this,$p0);this.$0_2=$p0;return $p0},get_isValid:function(){return this.$c_2.get_isValid()},resetFocus:function(){!IsNull(this.$c_2)&&this.$c_2.resetFocus()},$DQ_2:function(){var $v_0=String.format("{0}_attribute",this.$1_1.getAttribute("id")),$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,this.$0_2.get_viewModel().get_id()),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",window.LOCID_PBLEXPRESSION_FIELDTYPE,"expressioncellbody attribute",$v_1,$v_0),$v_3=String.format("<div id ='{0}' class='{1}'>{2}</div>",String.format("{0}_{1}wrapper",this.$0_2.get_viewModel().get_id(),"attribute"),"subcontrol attribute",$v_2);this.$1_1.get_jQueryObject().append($v_3);var $v_4=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata,$v_5=new Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel($v_4,!this.$2f_2);$v_5.$2f_1=this.$2f_2;$v_5.set_selectedFieldLogicalName(this.$0_2.get_selectedAttribute());$v_5.$1o_1=this.$0_2.get_selectedType();$v_5.set_selectedBpfField(this.$0_2.get_selectedBpfAttribute());$v_5.$1r_1=this.$0_2.get_useAttributeFiltering();this.$c_2=new Mscrm.BusinessRules.Views.BpfFieldControlView(this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.get_jQueryProxy().selectInElement(".subcontrol.attribute",this.$1_1)));this.$c_2.set_dataContext($v_5);this.$c_2.initialize()},applyFilteringDelegate:function($p0){this.$c_2.get_dataContext().set_filter($p0)},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$4N_2);this.get_bindingsMediator().disposeValueBinding(this.$3C_2);this.get_bindingsMediator().disposeValueBinding(this.$3K_2);this.get_bindingsMediator().disposeValueBinding(this.$4y_2);var $v_0=this.$c_2.get_dataContext();if(!IsNull($v_0)){$v_0.dispose();$v_0=null}if(!IsNull(this.$c_2)){this.$c_2.dispose();this.$c_2=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$3b_2:function(){this.$9m_2()},$9m_2:function(){if(this.$0_2.get_useAttributeFiltering()){var $$t_0=this.$0_2;this.$3K_2=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_2,"FilteredAttributesValue",$$t_0.$$d_getFilteredAttributesDelegate||($$t_0.$$d_getFilteredAttributesDelegate=Function.createDelegate($$t_0,$$t_0.getFilteredAttributesDelegate)),this.$c_2.get_dataContext().$$d_setFilteredAttributesDelegate);var $$t_1=this.$0_2;this.$4y_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$c_2.$0_1,"AttributeListProperty",this.$c_2.$0_1.$$d_getEntityLogicalNameDelegate,$$t_1.$$d_handleAttributesChangedDelegate||($$t_1.$$d_handleAttributesChangedDelegate=Function.createDelegate($$t_1,$$t_1.handleAttributesChangedDelegate)))}this.$4N_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$c_2.$0_1,"FieldChangedProperty",this.$c_2.$0_1.$$d_getSelectedFieldLogicalNameDelegate,this.$$d_$9O_2);this.$4N_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$c_2.$0_1,"BpfFieldChangedPropertyValue",this.$c_2.$0_1.$$d_getSelectedBpfFieldDelegate,this.$$d_$Ej_2);var $$t_2=this.$0_2;this.$3C_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$0_2,"AttributeSelectedValue",$$t_2.$$d_getSelectedAttributeDelegate||($$t_2.$$d_getSelectedAttributeDelegate=Function.createDelegate($$t_2,$$t_2.getSelectedAttributeDelegate)),this.$$d_$BD_2)},$9O_2:function($p0){($p0!==this.$0_2.get_selectedAttribute()||this.$c_2.$0_1.$1o_1!==this.$0_2.get_selectedType())&&this.$0_2.setSelectedAttributeDelegate($p0)},$Ej_2:function($p0){($p0!==this.$0_2.get_selectedBpfAttribute()||this.$c_2.$0_1.$1o_1!==this.$0_2.get_selectedType())&&this.$0_2.setSelectedBpfAttributeDelegate($p0)},$BD_2:function($p0){$p0!==this.$c_2.$0_1.get_selectedFieldLogicalName()&&this.$c_2.$0_1.setSelectedFieldLogicalNameDelegate($p0)},handleModelToViewBinding:function($p0){Mscrm.BusinessRules.Views.View.prototype.handleModelToViewBinding.call(this,$p0);if($p0==="EditViewModelDiscardedValue"){this.$c_2.$9E_1();if(this.$0_2.get_selectedType()!==this.$c_2.$0_1.$1o_1)if(this.$0_2.get_selectedType()===1){this.$c_2.$0_1.$1o_1=1;this.$9S_2()}else{this.$c_2.$0_1.$1o_1=0;this.$9S_2()}else if(this.$0_2.get_selectedType()===1&&this.$c_2.$0_1.$1o_1===1&&this.$c_2.$0_1.getSelectedBpfFieldDelegate()!==this.$0_2.getSelectedBpfAttributeDelegate()){this.$c_2.$0_1.setSelectedBpfFieldDelegate(this.$0_2.getSelectedBpfAttributeDelegate());this.$9S_2()}}},$9S_2:function(){var $v_0=this.$c_2.$0_1.getSelectedFieldIndexDelegate();this.$c_2.forceDisplayIndex(Mscrm.Utilities.parseInt($v_0))},get_isBpfStageFieldControl:function(){return this.$2f_2},set_isBpfStageFieldControl:function($p0){this.$2f_2=$p0;return $p0},$c_2:null,$0_2:null,$4N_2:null,$3C_2:null,$3K_2:null,$4y_2:null,$2f_2:false};Mscrm.BusinessRules.Views.BpfStageExpressionEditView=function($p0){Mscrm.BusinessRules.Views.BpfStageExpressionEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.BpfStageExpressionEditView.prototype={getLeftOperandView:function($p0){var $v_0=Mscrm.BusinessRules.Views.SubexpressionEditView.prototype.getLeftOperandView.call(this,$p0);if(!Mscrm.BusinessRules.Views.BpfAttributeOperandView.isInstanceOfType($v_0))return $v_0;var $v_1=$v_0;$v_1.$2f_2=true;return $v_0}};Mscrm.BusinessRules.Views.AttributeOperandView=function(element,useForCalculatedField){this.$$d_$Eo_2=Function.createDelegate(this,this.$Eo_2);this.$$d_$9O_2=Function.createDelegate(this,this.$9O_2);Mscrm.BusinessRules.Views.AttributeOperandView.initializeBase(this,[element]);this.$3Z_2=useForCalculatedField};Mscrm.BusinessRules.Views.AttributeOperandView.prototype={initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$DZ_2();this.$3b_2()},get_dataContext:function(){return Mscrm.BusinessRules.Views.OperandView.prototype.get_dataContext.call(this)},set_dataContext:function(value){Mscrm.BusinessRules.Views.OperandView.prototype.set_dataContext.call(this,value);this.$0_2=value;return value},get_isValid:function(){return this.$19_2.get_isValid()},resetFocus:function(){!IsNull(this.$19_2)&&this.$19_2.resetFocus()},$DZ_2:function(){var $v_0=this.$1_1.getAttribute("id")+"cell",$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,this.$0_2.get_viewModel().get_id()),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",window.LOCID_PBLEXPRESSION_FIELDTYPE,"expressioncellbody",$v_1,$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLEXPRESSION_FIELDTYPE));this.$1_1.html($v_2);var $v_3=null;if(this.$3Z_2){$v_3=new Mscrm.EditorEntityMetadataJsonWrapper;$v_3.DisplayName=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.DisplayName;$v_3.EntityLogicalName=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName;$v_3.EntityTypeCode=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityTypeCode;$v_3.Fields=new Array(1);$v_3.Fields[0]=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField}else $v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity(this.$0_2.get_selectedEntity());var $v_4=new Mscrm.BusinessRules.ViewModels.FieldControlViewModel($v_3);$v_4.set_selectedFieldLogicalName(this.$0_2.get_selectedAttribute());$v_4.$1r_1=this.$0_2.get_useAttributeFiltering();this.$19_2=new Mscrm.BusinessRules.Views.FieldControlView(this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.$1_1));this.$19_2.set_dataContext($v_4);this.$19_2.initialize();this.$0_2.get_selectedEntity()!==Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName&&this.$19_2.$0_1.setEntityMetadataDelegate($v_3)},applyFilteringDelegate:function(filter){this.$19_2.get_dataContext().set_filter(filter)},handleModelToViewBinding:function(propertyName){Mscrm.BusinessRules.Views.View.prototype.handleModelToViewBinding.call(this,propertyName);propertyName==="EditViewModelDiscardedValue"&&this.$19_2.$9E_1()},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$8P_2);this.get_bindingsMediator().disposeValueBinding(this.$3C_2);this.get_bindingsMediator().disposeValueBinding(this.$3K_2);var $v_0=this.$19_2.get_dataContext();if(!IsNull(this.$19_2)){this.$19_2.dispose();this.$19_2=null}if(!IsNull($v_0)){$v_0.dispose();$v_0=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$3b_2:function(){if(this.$0_2.get_useAttributeFiltering()){var $$t_0=this.$0_2;this.$3K_2=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_2,"FilteredAttributesValue",$$t_0.$$d_getFilteredAttributesDelegate||($$t_0.$$d_getFilteredAttributesDelegate=Function.createDelegate($$t_0,$$t_0.getFilteredAttributesDelegate)),this.$19_2.get_dataContext().$$d_setFilteredAttributesDelegate)}this.$8P_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$19_2.$0_1,"FieldChangedProperty",this.$19_2.$0_1.$$d_getSelectedFieldLogicalNameDelegate,this.$$d_$9O_2);var $$t_1=this.$0_2;this.$3C_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$0_2,"AttributeSelectedValue",$$t_1.$$d_getSelectedAttributeDelegate||($$t_1.$$d_getSelectedAttributeDelegate=Function.createDelegate($$t_1,$$t_1.getSelectedAttributeDelegate)),this.$$d_$Eo_2)},$9O_2:function($p0){$p0!==this.$0_2.get_selectedAttribute()&&this.$0_2.setSelectedAttributeDelegate($p0)},$Eo_2:function($p0){$p0!==this.$19_2.$0_1.get_selectedFieldLogicalName()&&this.$19_2.$0_1.setSelectedFieldLogicalNameDelegate($p0)},$19_2:null,$0_2:null,$8P_2:null,$3C_2:null,$3K_2:null,$3Z_2:false};Mscrm.BusinessRules.Views.NullOperandView=function(element){Mscrm.BusinessRules.Views.NullOperandView.initializeBase(this,[element])};Mscrm.BusinessRules.Views.NullOperandView.prototype={initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this)},get_isValid:function(){return true},get_dataContext:function(){return Mscrm.BusinessRules.Views.OperandView.prototype.get_dataContext.call(this)},set_dataContext:function(value){Mscrm.BusinessRules.Views.OperandView.prototype.set_dataContext.call(this,value);return value}};Mscrm.BusinessRules.Views.ExpressionView=function(element){Mscrm.BusinessRules.Views.ExpressionView.initializeBase(this);this.$1_1=element};Mscrm.BusinessRules.Views.ExpressionView.prototype={get_dataContext:function(){return this.$0_1},set_dataContext:function(value){this.$0_1=value;return value},get_element:function(){return this.$1_1},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$1c_1=this.createInlineView();this.$1c_1.renderForRead();this.generateResults()},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$1P_1)){this.$1P_1.dispose();this.$1P_1=null}this.$1c_1.dispose();this.$1c_1=null},get_viewModel:function(){return this.$0_1},get_inlineView:function(){return this.$1c_1},get_isNewCreated:function(){return this.$4U_1},set_isNewCreated:function(value){this.$4U_1=value;return value},createInlineView:function(){var $v_0;$v_0=Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getExpressionInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.$0_1);$v_0.set_parent(this);return $v_0},setFocus:function(){this.$1c_1.setFocus()},generateResults:function(){this.$1c_1.generateResults()},get_results:function(){return this.$1c_1.$C_2},set_results:function(value){this.$1c_1.$C_2=value;return value},updateReadModeExpression:function(){this.$1c_1.updateReadModeExpression()},get_warningView:function(){if(IsNull(this.$1P_1))this.$1P_1=new Mscrm.BusinessRules.Views.WarningView(null,this.$1_1.find(".expression.ms-crm-Inline-Chrome"));return this.$1P_1},$0_1:null,$1_1:null,$1c_1:null,$4U_1:false,$1P_1:null};Mscrm.BusinessRules.Views.LeftOperandView=function($p0){Mscrm.BusinessRules.Views.LeftOperandView.initializeBase(this,[$p0.get_element()]);this.$b_2=$p0};Mscrm.BusinessRules.Views.LeftOperandView.prototype={get_dataContext:function(){return this.$0_2},set_dataContext:function($p0){this.$0_2=$p0;this.$b_2.set_dataContext(this.$0_2.get_innerOperand());return $p0},initialize:function(){this.$b_2.initialize()},get_isValid:function(){return this.$b_2.get_isValid()},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$b_2)){this.$b_2.dispose();this.$b_2=null}},resetFocus:function(){!IsNull(this.$b_2)&&Mscrm.BusinessRules.Views.IResetFocus.isInstanceOfType(this.$b_2)&&this.$b_2.resetFocus()},get_operand:function(){return this.$b_2},$b_2:null,$0_2:null};Mscrm.BusinessRules.Views.RightOperandView=function($p0){Mscrm.BusinessRules.Views.RightOperandView.initializeBase(this,[$p0]);this.$31_2={}};Mscrm.BusinessRules.Views.RightOperandView.prototype={get_dataContext:function(){return this.$0_2},set_dataContext:function($p0){this.$0_2=$p0;return $p0},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);var $v_0=CrmEncodeDecode.CrmHtmlAttributeEncode(this.$0_2.get_viewModel().get_id()),$v_1=String.format(this.$9e_2,String.format("{0}_{1}",$v_0,"attributeEx"),String.format("{0}_{1}",$v_0,"primitiveEx"),String.format("{0}_{1}",$v_0,"subExpression"));this.$1_1.html($v_1);if(!IsNull(this.$0_2.get_currentInnerOperand()))this.$29_2=this.$Av_2(this.$0_2.get_rightOperandType(),this.$0_2.get_operandWorkflowAttributeType())},get_isValid:function(){if(IsNull(this.$29_2))return true;var $v_0=this.$29_2.get_isValid();if(this.$0_2.get_rightOperandType()===4)$v_0=$v_0&&this.$0_2.$z_2.$3_1.$1J_3>-1;else if(this.$0_2.get_operandWorkflowAttributeType()===19)$v_0=$v_0&&Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.isInstanceOfType(this.$0_2.get_currentInnerOperand())&&this.$0_2.get_currentInnerOperand().isValid();return $v_0},get_operand:function(){return this.$29_2},resetFocus:function(){!IsNull(this.$29_2)&&Mscrm.BusinessRules.Views.IResetFocus.isInstanceOfType(this.$29_2)&&this.$29_2.resetFocus();if(this.$0_2.get_rightOperandType()===4){var $v_0=this.$31_2["1"];!IsNull($v_0)&&Mscrm.BusinessRules.Views.IResetFocus.isInstanceOfType($v_0)&&$v_0.resetFocus()}},handleModelToViewBinding:function($p0){switch($p0){case "OperandChangedPropertyValue":this.$DH_2();if(this.$0_2.get_rightOperandType()===-1)return;this.$29_2=this.$Av_2(this.$0_2.get_rightOperandType(),this.$0_2.get_operandWorkflowAttributeType());this.$0_2.get_rightOperandType()!==3&&this.$29_2.get_element().removeClass("hidecontrol");break;default:Mscrm.BusinessRules.Views.View.prototype.handleModelToViewBinding.call(this,$p0);break}},$Av_2:function($p0,$p1){var $v_0=this.$31_2[$p0.toString()];if($p0===4)if(!IsNull(this.$31_2["1"])){var $v_1=this.$31_2["1"];$v_1.get_element().removeClass("hidecontrol")}if(IsNull($v_0)||Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel.isInstanceOfType(this.$0_2)){var $v_2=this.$0_2.prepareInnerOperand($p0,$p1,this.$0_2.get_rightOperandMetadata()).get_viewModel(),$v_3=this.get_jQueryProxy().selectElement("#"+$v_2.get_id());if($p0===4){if(IsNull(this.$31_2["1"])){var $v_5=this.$0_2.prepareInnerOperand(1,19,this.$0_2.get_rightOperandMetadata()).get_viewModel(),$v_6=this.get_jQueryProxy().selectElement("#"+String.format("{0}_{1}",String.format("{0}_rightInner",$v_5.get_id()),"primitiveEx")),$v_7=Mscrm.BusinessRules.Views.OperandViewFactory.$3B($v_5,$v_6);$v_5.get_editViewModel().$3w_2=window.LOCID_PBLEXPRESSION_VALUETYPE;$v_7.set_dataContext($v_5.get_editViewModel());$v_7.initialize();this.$31_2["1"]=$v_7;$v_7.get_element().show()}var $v_4=new Mscrm.Proxies.JQueryObjectProxy($P_CRM('<div class="subexpressioncontainer"></div>'));$v_3.get_jQueryObject().empty();$v_3.get_jQueryObject().parent().parent().append($v_4.get_jQueryObject());$v_3=$v_4}$v_0=Mscrm.BusinessRules.Views.OperandViewFactory.$3B($v_2,$v_3);$v_0.set_dataContext(this.$0_2.get_currentInnerOperand());Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType($v_0)&&$v_0.get_dataContext().set_useAttributeFiltering(true);$v_0.initialize();Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType($v_0)&&$v_0.applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$CA_0());this.$31_2[$p0.toString()]=$v_0}this.$F3_2($p0);return $v_0},$F3_2:function($p0){this.$1_1.removeClass(String.format("rigopcon_{0}","0"));this.$1_1.removeClass(String.format("rigopcon_{0}","2"));this.$1_1.removeClass(String.format("rigopcon_{0}","1"));if($p0===4)this.$1_1.get_jQueryObject().parent().parent().find("div.subexpressioncontainer").removeClass("hidecontrol");else this.$1_1.get_jQueryObject().parent().parent().find("div.subexpressioncontainer").addClass("hidecontrol");this.$1_1.addClass(String.format("rigopcon_{0}",$p0.toString()))},$DH_2:function(){if(IsNull(this.$29_2))return;this.$29_2.get_element().addClass("hidecontrol")},dispose:function(){if(this.$9_0)return;var $$dict_1=this.$31_2;for(var $$key_2 in $$dict_1){var $v_0={key:$$key_2,value:$$dict_1[$$key_2]};$v_0.value.dispose()}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$29_2:null,$0_2:null,$31_2:null,$9e_2:"<div id='{0}'></div> \r\n\t\t\t\t\t\t<div id='{1}'></div>\r\n\t\t\t\t\t\t<div id='{2}'></div>"};Mscrm.BusinessRules.Views.OperandTypeView=function($p0){this.$$d_$Ef_1=Function.createDelegate(this,this.$Ef_1);Mscrm.BusinessRules.Views.OperandTypeView.initializeBase(this);this.$1_1=$p0};Mscrm.BusinessRules.Views.OperandTypeView.prototype={get_dataContext:function(){return this.$0_1},set_dataContext:function($p0){this.$0_1=$p0;return $p0},get_element:function(){return this.$1_1},get_isValid:function(){return this.$2j_1.get_isValid()},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$De_1();this.$3b_1()},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$12_1);this.get_bindingsMediator().disposeValueBinding(this.$8S_1);if(!IsNull(this.$2j_1)){this.$2j_1.dispose();this.$2j_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},resetFocus:function(){!IsNull(this.$2j_1)&&this.$2j_1.blur()},$De_1:function(){var $v_0=this.$1_1.getAttribute("id")+"cell",$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,this.$0_1.get_viewModel().get_id()),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",window.LOCID_PBLEXPRESSION_TYPE,"expressioncellbody",$v_1,$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLEXPRESSION_TYPE));this.$1_1.html($v_2);var $v_3=this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.$1_1).get_jQueryObject(),$v_4=this.$0_1.get_operandType();this.$2j_1=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_3),$v_3[0].id,this.$0_1.get_operandTypes(),$v_4,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),0,"alwaysedit",window.LOCID_PBLEXPRESSION_ALLTYPE,window.LOCID_PBLEXPRESSION_TYPE);this.$2j_1.get_dataContext().set_useOptionFiltering(true)},$3b_1:function(){var $$t_0=this.$0_1;this.$8S_1=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_1,"FilteredOperandTypeList",$$t_0.$$d_getFilteredOperandTypesDelegate||($$t_0.$$d_getFilteredOperandTypesDelegate=Function.createDelegate($$t_0,$$t_0.getFilteredOperandTypesDelegate)),this.$$d_$Ef_1);var $$t_1=this.$0_1,$$t_2=this.$0_1;this.$12_1=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$2j_1,this.$0_1,"OperandTypeValue",$$t_1.$$d_getOperandTypeDelegate||($$t_1.$$d_getOperandTypeDelegate=Function.createDelegate($$t_1,$$t_1.getOperandTypeDelegate)),$$t_2.$$d_setOperandTypeDelegate||($$t_2.$$d_setOperandTypeDelegate=Function.createDelegate($$t_2,$$t_2.setOperandTypeDelegate)))},$Ef_1:function($p0){var $v_0=this.$0_1.get_filteredOperandTypes();if(IsNull($v_0)||!$v_0.length)this.$1_1.addClass("hidecontrol");else this.$1_1.removeClass("hidecontrol");this.$2j_1.get_dataContext().setFilteredOptionsDelegate($p0)},$0_1:null,$1_1:null,$2j_1:null,$12_1:null,$8S_1:null};Mscrm.BusinessRules.Views.AndOrView=function($p0){this.$$d_$E4_1=Function.createDelegate(this,this.$E4_1);Mscrm.BusinessRules.Views.AndOrView.initializeBase(this);this.$1_1=$p0};Mscrm.BusinessRules.Views.AndOrView.prototype={get_dataContext:function(){return this.$0_1},set_dataContext:function($p0){this.$0_1=$p0;return $p0},get_element:function(){return this.$1_1},get_isValid:function(){return this.$2i_1.get_isValid()},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$Dd_1();this.$3b_1()},get_logicalOperatorInlineView:function(){return this.$2i_1},set_logicalOperatorInlineView:function($p0){this.$2i_1=$p0;return $p0},updateFirstConditionDisplayText:function(){var $v_0=this.get_jQueryProxy().selectInElement(".firstcondition",this.$1_1);$v_0.get_jQueryObject().text(Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.getConditionBranchDisplayModeDisplayName(this.$0_1.get_viewModel().get_conditionBranchDisplayMode()))},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$12_1);if(!IsNull(this.$2i_1)){this.$2i_1.dispose();this.$2i_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$Dd_1:function(){var $v_0=this.$1_1.getAttribute("id")+"cell",$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,this.$0_1.get_viewModel().get_id()),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",window.LOCID_PBLEXPRESSION_ANDOR,"expressioncellbody",$v_1,$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLEXPRESSION_ANDOR)),$v_3=String.format("<div class='{0}'><div class='{1}'>{2}</div><div class='{3}'>{4}</div></div>","andorwrapper","andorcondition",$v_2,"firstcondition",Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.getConditionBranchDisplayModeDisplayName(this.$0_1.get_viewModel().get_conditionBranchDisplayMode()));this.$1_1.html($v_3);var $v_4=this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.$1_1).get_jQueryObject(),$v_5=this.$0_1.get_logicalOperator();this.$2i_1=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_4),$v_4[0].id,this.$0_1.get_logicalOperatorList(),$v_5,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),0,"alwaysedit","",window.LOCID_PBLEXPRESSION_ANDOR)},$3b_1:function(){var $$t_0=this.$0_1,$$t_1=this.$0_1;this.$12_1=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$2i_1,this.$0_1,"OperandTypeValue",$$t_0.$$d_getLogicalOperatorDelegate||($$t_0.$$d_getLogicalOperatorDelegate=Function.createDelegate($$t_0,$$t_0.getLogicalOperatorDelegate)),$$t_1.$$d_setLogicalOperatorDelegate||($$t_1.$$d_setLogicalOperatorDelegate=Function.createDelegate($$t_1,$$t_1.setLogicalOperatorDelegate)));this.$0_1.add_propertyChanged(this.$$d_$E4_1)},$E4_1:function($p0,$p1){if($p1.get_propertyName()!=="AndOrOperatorDiscard")return;this.$2i_1.get_editView().get_editElement().val(this.$0_1.get_logicalOperatorList()[Number.parseInvariant(this.$0_1.get_logicalOperator())].Label)},$0_1:null,$1_1:null,$2i_1:null,$12_1:null};Mscrm.BusinessRules.Views.OperandView=function(element){Mscrm.BusinessRules.Views.OperandView.initializeBase(this);this.$1_1=element};Mscrm.BusinessRules.Views.OperandView.prototype={get_dataContext:function(){return this.$0_1},set_dataContext:function(value){this.$0_1=value;return value},get_element:function(){return this.$1_1},$0_1:null,$1_1:null};Mscrm.BusinessRules.Views.OperandViewFactory=function(){};Mscrm.BusinessRules.Views.OperandViewFactory.$3B=function($p0,$p1){if(!$p0)return null;if(Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel.isInstanceOfType($p0)){if(Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandViewModel.isInstanceOfType($p0))return new Mscrm.BusinessRules.Views.RelatedAttributeOperandView($p1);if(Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandViewModel.isInstanceOfType($p0))return new Mscrm.BusinessRules.Views.BpfAttributeOperandView($p1);return new Mscrm.BusinessRules.Views.AttributeOperandView($p1,false)}if(Mscrm.BusinessRules.ViewModels.ValueOperandViewModel.isInstanceOfType($p0))return new Mscrm.BusinessRules.Views.ValueOperandView($p1);if(Mscrm.BusinessRules.ViewModels.NullOperandViewModel.isInstanceOfType($p0))return new Mscrm.BusinessRules.Views.NullOperandView($p1);if(Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.isInstanceOfType($p0))return new Mscrm.BusinessRules.Views.ArithmeticExpressionEditView($p1);if(Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel.isInstanceOfType($p0))return new Mscrm.BusinessRules.Views.BpfStageExpressionEditView($p1);throw Error.create("Unsupported Exception")};Mscrm.BusinessRules.Views.OperandViewFactory.$AG=function($p0,$p1,$p2){if(!$p0)return null;if(Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel.isInstanceOfType($p0))return Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandViewModel.isInstanceOfType($p0)&&!$p2?new Mscrm.BusinessRules.Views.RelatedAttributeOperandView($p1):new Mscrm.BusinessRules.Views.AttributeOperandView($p1,$p2);throw Error.create("Unsupported Exception")};Mscrm.BusinessRules.Views.OperatorView=function($p0){this.$$d_$Eh_1=Function.createDelegate(this,this.$Eh_1);Mscrm.BusinessRules.Views.OperatorView.initializeBase(this);this.$1_1=$p0};Mscrm.BusinessRules.Views.OperatorView.prototype={get_dataContext:function(){return this.$0_1},set_dataContext:function($p0){this.$0_1=$p0;return $p0},get_element:function(){return this.$1_1},get_inlineControlView:function(){return this.$2M_1},get_isValid:function(){return this.$2M_1.get_isValid()},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$Df_1();this.$3b_1()},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$12_1);this.get_bindingsMediator().disposeValueBinding(this.$8U_1);if(!IsNull(this.$2M_1)){this.$2M_1.dispose();this.$2M_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$Df_1:function(){var $v_0=this.$1_1.getAttribute("id")+"cell",$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,this.$0_1.get_viewModel().get_id()),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",window.LOCID_PBLEXPRESSION_OPERATOR,"expressioncellbody",$v_1,$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLEXPRESSION_OPERATOR));this.$1_1.html($v_2);var $v_3=this.$0_1.get_operation(),$v_4=this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.$1_1).get_jQueryObject();this.$2M_1=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_4),$v_4[0].id,this.$0_1.get_operators(),$v_3,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_PBLEXPRESSION_ALLOPERATOR,window.LOCID_PBLEXPRESSION_OPERATOR);this.$2M_1.get_dataContext().set_useOptionFiltering(true)},$3b_1:function(){var $$t_0=this.$0_1,$$t_1=this.$2M_1.get_dataContext();this.$8U_1=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_1,"FilteredOperatorListProperty",$$t_0.$$d_getFilteredOperatorsDelegate||($$t_0.$$d_getFilteredOperatorsDelegate=Function.createDelegate($$t_0,$$t_0.getFilteredOperatorsDelegate)),$$t_1.$$d_setFilteredOptionsDelegate||($$t_1.$$d_setFilteredOptionsDelegate=Function.createDelegate($$t_1,$$t_1.setFilteredOptionsDelegate)));var $$t_2=this.$0_1;this.$12_1=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$2M_1,this.$0_1,"OperatorProperty",$$t_2.$$d_getOperationDelegate||($$t_2.$$d_getOperationDelegate=Function.createDelegate($$t_2,$$t_2.getOperationDelegate)),this.$$d_$Eh_1)},$Eh_1:function($p0){$p0!==this.$0_1.get_operation()&&this.$0_1.setOperationDelegate($p0)},resetFocus:function(){!IsNull(this.$2M_1)&&this.$2M_1.blur()},$0_1:null,$1_1:null,$2M_1:null,$12_1:null,$8U_1:null};Mscrm.BusinessRules.Views.RelatedAttributeOperandView=function($p0){this.$$d_$El_2=Function.createDelegate(this,this.$El_2);this.$$d_$Ek_2=Function.createDelegate(this,this.$Ek_2);this.$$d_$BD_2=Function.createDelegate(this,this.$BD_2);this.$$d_$Em_2=Function.createDelegate(this,this.$Em_2);this.$$d_$En_2=Function.createDelegate(this,this.$En_2);this.$$d_$9O_2=Function.createDelegate(this,this.$9O_2);Mscrm.BusinessRules.Views.RelatedAttributeOperandView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.RelatedAttributeOperandView.prototype={initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$1_1.get_jQueryObject().empty();this.$DY_2();this.$DO_2();this.$3b_2()},get_dataContext:function(){return Mscrm.BusinessRules.Views.OperandView.prototype.get_dataContext.call(this)},set_dataContext:function($p0){Mscrm.BusinessRules.Views.OperandView.prototype.set_dataContext.call(this,$p0);this.$0_2=$p0;return $p0},get_isValid:function(){return this.$p_2.get_isValid()&&this.$1i_2.get_isValid()},get_$9H_2:function(){return this.$0_2.get_viewModel().get_isRelationshipEntity()},get_$ET_2:function(){if(this.get_$9H_2())return window.LOCID_BUSINESSRULE_SOURCELABEL;else return window.LOCID_CALCULATEDFIELD_ENTITY},resetFocus:function(){!IsNull(this.$1i_2)&&this.$1i_2.resetFocus();!IsNull(this.$p_2)&&this.$p_2.resetFocus()},$DO_2:function(){var $v_0=String.format("{0}_attribute",this.$1_1.getAttribute("id")),$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,String.format("{0}_attribute",this.$0_2.get_viewModel().get_id())),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",window.LOCID_PBLEXPRESSION_FIELDTYPE,"expressioncellbody attribute",$v_1,$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLEXPRESSION_FIELDTYPE)),$v_3=String.format("<div id ='{0}' class='{1}'>{2}</div>",String.format("{0}_{1}wrapper",this.$0_2.get_viewModel().get_id(),"attribute"),"subcontrol attribute",$v_2);this.$1_1.get_jQueryObject().append($v_3);var $v_4=this.$0_2.get_viewModel().get_expression().get_entity(),$v_5=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($v_4.get_entityName()),$v_6=new Mscrm.BusinessRules.ViewModels.FieldControlViewModel($v_5);$v_6.$4V_1=Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($v_4);$v_6.set_selectedFieldLogicalName(this.$0_2.get_selectedAttribute());$v_6.$1r_1=this.$0_2.get_useAttributeFiltering();this.$p_2=new Mscrm.BusinessRules.Views.FieldControlView(this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.get_jQueryProxy().selectInElement(".subcontrol.attribute",this.$1_1)));this.$p_2.set_dataContext($v_6);this.$p_2.initialize()},$DY_2:function(){var $v_0=String.format("{0}_entity",this.$1_1.getAttribute("id")),$v_1=String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,String.format("{0}_entity",this.$0_2.get_viewModel().get_id())),$v_2=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel",this.get_$ET_2(),"expressioncellbody entity",$v_1,$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_ENTITY)),$v_3=String.format("<div id ='{0}' class='{1}'>{2}</div>",String.format("{0}_{1}wrapper",this.$0_2.get_viewModel().get_id(),"entity"),"subcontrol entity",$v_2);this.$1_1.get_jQueryObject().append($v_3);var $v_4=Mscrm.BusinessRules.ViewModels.RelatedEntityControlViewModelFactory.$D0(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata,this.get_$9H_2());$v_4.set_selectedFieldLogicalName(this.$0_2.get_selectedEntityAttribute());this.$1i_2=new Mscrm.BusinessRules.Views.EntityLookupFieldControlView(this.get_jQueryProxy().selectInElement(".ms-crm-Inline-Chrome",this.get_jQueryProxy().selectInElement(".subcontrol.entity",this.$1_1)));this.$1i_2.set_dataContext($v_4);this.$1i_2.initialize()},applyFilteringDelegate:function($p0){this.$p_2.get_dataContext().set_filter($p0)},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$4N_2);this.get_bindingsMediator().disposeValueBinding(this.$8N_2);this.get_bindingsMediator().disposeValueBinding(this.$3C_2);this.get_bindingsMediator().disposeValueBinding(this.$8M_2);this.get_bindingsMediator().disposeValueBinding(this.$3K_2);this.get_bindingsMediator().disposeValueBinding(this.$4y_2);this.get_bindingsMediator().disposeValueBinding(this.$7B_2);var $v_0=this.$p_2.get_dataContext();if(!IsNull($v_0)){$v_0.dispose();$v_0=null}var $v_1=this.$1i_2.get_dataContext();if(!IsNull($v_1)){$v_1.dispose();$v_1=null}if(!IsNull(this.$p_2)){this.$p_2.dispose();this.$p_2=null}if(!IsNull(this.$1i_2)){this.$1i_2.dispose();this.$p_2=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$3b_2:function(){this.$9m_2();this.$Bk_2()},$9m_2:function(){if(this.$0_2.get_useAttributeFiltering()){var $$t_0=this.$0_2;this.$3K_2=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_2,"FilteredAttributesValue",$$t_0.$$d_getFilteredAttributesDelegate||($$t_0.$$d_getFilteredAttributesDelegate=Function.createDelegate($$t_0,$$t_0.getFilteredAttributesDelegate)),this.$p_2.get_dataContext().$$d_setFilteredAttributesDelegate);var $$t_1=this.$0_2;this.$4y_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$p_2.$0_1,"AttributeListProperty",this.$p_2.$0_1.$$d_getEntityLogicalNameDelegate,$$t_1.$$d_handleAttributesChangedDelegate||($$t_1.$$d_handleAttributesChangedDelegate=Function.createDelegate($$t_1,$$t_1.handleAttributesChangedDelegate)))}this.$4N_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$p_2.$0_1,"FieldChangedProperty",this.$p_2.$0_1.$$d_getSelectedFieldLogicalNameDelegate,this.$$d_$9O_2);if(this.get_$9H_2()){var $$t_2=this.$0_2;this.$7B_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$0_2,"EntityAttributeSelectedValue",$$t_2.$$d_getSelectedEntityAttributeDelegate||($$t_2.$$d_getSelectedEntityAttributeDelegate=Function.createDelegate($$t_2,$$t_2.getSelectedEntityAttributeDelegate)),this.$$d_$En_2)}else{var $$t_3=this.$0_2;this.$7B_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$0_2,"EntityAttributeSelectedValue",$$t_3.$$d_getSelectedEntityDelegate||($$t_3.$$d_getSelectedEntityDelegate=Function.createDelegate($$t_3,$$t_3.getSelectedEntityDelegate)),this.$$d_$Em_2)}var $$t_4=this.$0_2;this.$3C_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$0_2,"AttributeSelectedValue",$$t_4.$$d_getSelectedAttributeDelegate||($$t_4.$$d_getSelectedAttributeDelegate=Function.createDelegate($$t_4,$$t_4.getSelectedAttributeDelegate)),this.$$d_$BD_2)},$Bk_2:function(){this.$8N_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$1i_2.$0_1,"FieldChangedProperty",this.$1i_2.$0_1.$$d_getSelectedFieldLogicalNameDelegate,this.$$d_$Ek_2);var $$t_0=this.$0_2;this.$8M_2=this.get_bindingsMediator().createStringOneWayValueBinding(this.$0_2,"EntityAttributeSelectedValue",$$t_0.$$d_getSelectedEntityAttributeDelegate||($$t_0.$$d_getSelectedEntityAttributeDelegate=Function.createDelegate($$t_0,$$t_0.getSelectedEntityAttributeDelegate)),this.$$d_$El_2)},$9O_2:function($p0){$p0!==this.$0_2.get_selectedAttribute()&&this.$0_2.setSelectedAttributeDelegate($p0)},$Ek_2:function($p0){$p0!==this.$0_2.get_selectedEntityAttribute()&&this.$0_2.setSelectedEntityAttributeDelegate($p0)},$BD_2:function($p0){$p0!==this.$p_2.$0_1.get_selectedFieldLogicalName()&&this.$p_2.$0_1.setSelectedFieldLogicalNameDelegate($p0)},$Em_2:function($p0){this.$p_2.$0_1.setEntityMetadataDelegate(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($p0)||Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata);!this.$0_2.get_filteredAttributes()&&this.$p_2.get_dataContext().setFilteredAttributesDelegate(null)},$En_2:function($p0){var $v_0=isNullOrEmptyString($p0)||$p0==="#CurrentEntity";if(this.$0_2.get_operandContext()&&this.$0_2.get_operandContext().get_supportRelationshipSelf())this.$p_2.$0_1.$4V_1=!$v_0;else this.$p_2.$0_1.$4V_1=false;var $v_1=$v_0?Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName():Mscrm.BusinessRules.MetadataUtility.relationshipToEntity($p0);this.$p_2.$0_1.setEntityMetadataDelegate(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($v_1));!this.$0_2.get_filteredAttributes()&&this.$p_2.get_dataContext().setFilteredAttributesDelegate(null)},$El_2:function($p0){$p0!==this.$1i_2.$0_1.get_selectedFieldLogicalName()&&this.$1i_2.$0_1.setSelectedFieldLogicalNameDelegate($p0)},handleModelToViewBinding:function($p0){Mscrm.BusinessRules.Views.View.prototype.handleModelToViewBinding.call(this,$p0);$p0==="EditViewModelDiscardedValue"&&this.$p_2.$9E_1()},$1i_2:null,$p_2:null,$0_2:null,$4N_2:null,$8N_2:null,$3C_2:null,$8M_2:null,$3K_2:null,$7B_2:null,$4y_2:null};Mscrm.BusinessRules.Views.ValueOperandView=function($p0){Mscrm.BusinessRules.Views.ValueOperandView.initializeBase(this,[$p0]);this.$67_2=new Mscrm.BusinessRules.Views.ValueInlineControlRepository(this.$EK_2())};Mscrm.BusinessRules.Views.ValueOperandView.prototype={initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$Di_2()},get_dataContext:function(){return Mscrm.BusinessRules.Views.OperandView.prototype.get_dataContext.call(this)},set_dataContext:function($p0){Mscrm.BusinessRules.Views.OperandView.prototype.set_dataContext.call(this,$p0);this.$0_2=$p0;return $p0},get_isValid:function(){if(IsNull(this.$17_2))return true;return this.$17_2.get_isValid()},resetFocus:function(){!IsNull(this.$17_2)&&this.$17_2.resetFocus()},$Di_2:function(){this.$BM_2();this.$17_2=this.$67_2.getInlineControl(this.$0_2,this.$0_2.get_values());this.$17_2.registerForValueChangeEvent(this.$0_2)},handleModelToViewBinding:function($p0){switch($p0){case "ValueMetadataChanged":this.$17_2.hide();this.$17_2.unregisterForValueChangeEvent();this.$BM_2();this.$17_2=this.$67_2.getInlineControl(this.$0_2,null);this.$EP_2();this.$17_2.show();break;case "HideControl":this.$17_2.hide();break;case "ShowControl":this.$17_2.show();break;case "ClearValidation":this.$17_2.clearValidation();break;default:Mscrm.BusinessRules.Views.View.prototype.handleModelToViewBinding.call(this,$p0);break}},$EP_2:function(){var $v_0=this.$0_2.get_metadata();if($v_0&&$v_0.AttributeType==="lookup"&&$v_0.LookupStyle==="subject"){this.$17_2.updateViewModel();this.$17_2.registerForValueChangeEvent(this.$0_2)}else{this.$17_2.registerForValueChangeEvent(this.$0_2);this.$17_2.updateViewModel()}},$BM_2:function(){this.$8Z_2.html(CrmEncodeDecode.CrmHtmlEncode(this.$0_2.get_label()))},dispose:function(){if(this.$9_0)return;!IsNull(this.$17_2)&&this.$17_2.registerForValueChangeEvent(this.$0_2);this.$67_2.dispose();Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$EK_2:function(){var $v_0=this.$1_1.getAttribute("id")+"cell",$v_1=String.format("<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>","expressioncelllabel","","expressioncellbody","",$v_0,CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_PBLEXPRESSION_VALUETYPE));this.$1_1.html($v_1);this.$8Z_2=this.get_jQueryProxy().selectInElement(".expressioncelllabel",this.$1_1);return this.get_jQueryProxy().selectInElement(".expressioncellbody",this.$1_1)},$17_2:null,$0_2:null,$67_2:null,$8Z_2:null};Mscrm.BusinessRules.Views.ValueInlineControlRepository=function($p0){this.$7K_0={};this.$7W_0=$p0};Mscrm.BusinessRules.Views.ValueInlineControlRepository.prototype={getInlineControl:function($p0,$p1){var $v_0=$p0.get_metadata(),$v_1;switch($p0.get_operandWorkflowAttributeType()){case 19:case 20:$v_1=String.format("BpfAttributeType_{0}",$p0.get_operandWorkflowAttributeType());break;case 21:var $v_2=$p0.get_viewModel().get_parent().$1J_3;$v_1=$v_2===-1?String.format("Text_BpfAttributeType_{0}",$p0.get_operandWorkflowAttributeType()):String.format("BpfAttributeType_{0}",$p0.get_operandWorkflowAttributeType());break;default:$v_1=String.format("{0}_{1}_{2}",$v_0.LogicalName,$v_0.AttributeType,$v_0.Format);break}var $v_3=this.$7K_0[$v_1];if(!IsNull($v_3)){$v_3.resetValue($p1);return $v_3}var $v_4=this.$EI_0($v_1);$v_3=Mscrm.BusinessRules.Views.ValueInlineControlFactory.getControl($v_4,$v_0,$p0);$v_3.set_label($p0.get_label());$v_3.initialize($p1);this.$7K_0[$v_1]=$v_3;return $v_3},$EI_0:function($p0){var $v_0=new Mscrm.Proxies.JQueryObjectProxy($P_CRM("<div></div>"));this.$7W_0.get_jQueryObject().append($v_0.get_jQueryObject());var $v_1=String.format("Chrome_{0}_{1}",this.$7W_0.getAttribute("id"),$p0);$v_0.html(String.format(Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml,$v_1));return $v_0.children(":first-child")},dispose:function(){var $$dict_2=this.$7K_0;for(var $$key_3 in $$dict_2){var $v_0={key:$$key_3,value:$$dict_2[$$key_3]},$v_1=$v_0.value;$v_1.dispose()}},$7W_0:null};Mscrm.BusinessRules.Views.ValueInlineControlBase=function(chromeElement,initialMetadataJsonWrapper){this.$$d_setValueDelegate=Function.createDelegate(this,this.setValueDelegate);this.$$d_getValueDelegate=Function.createDelegate(this,this.getValueDelegate);this.$3w_0=window.LOCID_PBLEXPRESSION_OPERANDLABEL;this.$1N_0=chromeElement;this.$2d_0=initialMetadataJsonWrapper;this.$26_0=new Mscrm.BusinessRules.Factories.BindingsFactory;this.$26_0.set_commandsFactory(new Mscrm.BusinessRules.Factories.CommandsFactory)};Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype={initialize:function(initialValues){this.$Y_0=this.prepareInlineView(initialValues);this.$Y_0.get_dataContext().set_labelValue(this.$3w_0);var $v_0=$find(this.$Y_0.get_dataContext().get_attribute().get_dataAttributeId());$v_0.get_controls().add(this.$Y_0);$v_0.set_isVirtual(true)},resetValue:function(values){var $v_0=!values?null:values[0];this.$Y_0.clearValidation();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$Y_0,$v_0)},show:function(){this.$1N_0.removeClass("hidecontrol")},hide:function(){this.$1N_0.addClass("hidecontrol")},get_isValid:function(){return (new Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator(this.$Y_0)).get_isValid()},get_label:function(){return this.$3w_0},set_label:function(value){this.$3w_0=value;return value},registerForValueChangeEvent:function(viewModel){this.$0_0=viewModel;var $v_0=this.$26_0.createInlineFieldControlValueChangeBinding(this.$Y_0),$v_1=this.$26_0.createDataContextValueChangeBinding(viewModel,"ValueChanged",this.$$d_getValueDelegate,this.$$d_setValueDelegate),$v_2=new Mscrm.BusinessRules.Converters.BaseValueConverter,$v_3=new Mscrm.BusinessRules.Converters.BaseValueConverter;this.$4m_0=this.$26_0.createValueBinding($v_0,$v_1,$v_2,$v_3);this.$4m_0.bind()},unregisterForValueChangeEvent:function(){if(!IsNull(this.$4m_0)){this.$4m_0.dispose();this.$4m_0=null}},updateViewModel:function(){this.setValueDelegate(Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$Y_0))},getValueDelegate:function(){var $v_0=this.$0_0.getValuesDelegate();return !$v_0?null:$v_0[0]},resetFocus:function(){if(!IsNull(this.$Y_0)){!IsNull(this.$Y_0.get_chromeBehavior())&&this.$Y_0.get_chromeBehavior().hideValidationElement();this.$Y_0.blur()}},clearValidation:function(){!IsNull(this.$Y_0)&&this.$Y_0.clearValidation()},setValueDelegate:function(value){(!this.$0_0.get_values()||this.$0_0.get_values()[0]!==value)&&this.$0_0.setValuesDelegate([value])},get_metadata:function(){return this.$2d_0},get_chromeElement:function(){return this.$1N_0},get_getUniqueAttributeName:function(){return this.$1N_0.getAttribute("id")},constructInitialValue:function(initialValues){var $v_0={};$v_0["raw"]=!initialValues?null:initialValues[0];return $v_0},get_inlineControlView:function(){return this.$Y_0},get_viewModel:function(){return this.$0_0},set_viewModel:function(value){this.$0_0=value;return value},dispose:function(){this.unregisterForValueChangeEvent();this.$4m_0=null;!IsNull(this.$Y_0)&&this.$Y_0.clearValidation();this.$Y_0.dispose();this.$Y_0=null},$1N_0:null,$2d_0:null,$Y_0:null,$26_0:null,$4m_0:null,$0_0:null};Mscrm.BusinessRules.Views.ValueInlineControlFactory=function(){};Mscrm.BusinessRules.Views.ValueInlineControlFactory.getControl=function(chromeElement,initialMetadata,viewModel){if(viewModel.get_operandWorkflowAttributeType()===19||viewModel.get_operandWorkflowAttributeType()===20||viewModel.get_operandWorkflowAttributeType()===21)return new Mscrm.BusinessRules.Views.BpfValueInlineControl(chromeElement,viewModel.get_operandWorkflowAttributeType(),viewModel);else switch(initialMetadata.AttributeType){case "date":case "datetime":return new Mscrm.BusinessRules.Views.DateTimeValueInlineControl(chromeElement,initialMetadata);case "nvarchar":case "ntext":return new Mscrm.BusinessRules.Views.TextValueInlineControl(chromeElement,initialMetadata);case "int":case "float":case "decimal":return Mscrm.BusinessRules.Views.ValueInlineControlFactory.$CH(chromeElement,initialMetadata);case "money":return new Mscrm.BusinessRules.Views.MoneyValueInlineControl(chromeElement,initialMetadata);case "bit":case "picklist":case "status":case "state":return new Mscrm.BusinessRules.Views.PicklistValueInlineControl(chromeElement,initialMetadata,viewModel.get_canHaveMultipleValues());case "lookup":case "customer":case "owner":return new Mscrm.BusinessRules.Views.LookupValueInlineControl(chromeElement,initialMetadata);default:Error.create("Unsupported type");break}return null};Mscrm.BusinessRules.Views.ValueInlineControlFactory.$CH=function($p0,$p1){var $v_0=$p1;switch($v_0.Format){case "language":case "timezone":return new Mscrm.BusinessRules.Views.PicklistValueInlineControl($p0,$p1,false);default:return new Mscrm.BusinessRules.Views.NumberValueInlineControl($p0,$p1)}};Mscrm.BusinessRules.Views.BpfValueInlineControl=function(chromeElement,type,viewModel){Mscrm.BusinessRules.Views.BpfValueInlineControl.initializeBase(this,[chromeElement,null]);this.$0_0=viewModel;this.$A_1=type;this.$3H_1=type!==19};Mscrm.BusinessRules.Views.BpfValueInlineControl.prototype={$A_1:0,prepareInlineView:function(initialValues){var $v_0=null;if(this.$A_1===19)if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Options.length)$v_0=Mscrm.InlineControlFactory.createInlineTextBoxControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),200,{value:window.LOCID_NO_PROCESSES_DEFINED},Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"locked");else{var $v_1="0";if(!IsNull(initialValues)&&initialValues.length>0&&!IsNull(initialValues[0])&&!IsNull(initialValues[0].Value))$v_1=initialValues[0].Value.toString();$v_0=(new Mscrm.BusinessRules.Mediators.InlineEditControlMediator).createAutoCompleteControl(this.$1N_0,this.get_getUniqueAttributeName(),Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Options,$v_1,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)}else if(this.$A_1===20){var $v_2=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.StageCategories.Options;$v_0=this.$AI_1(initialValues,$v_2)}else{var $v_3=this.$0_0.get_viewModel().get_parent().$1J_3;if($v_3<0||IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages)||$v_3>=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages.length)$v_0=Mscrm.InlineControlFactory.createInlineTextBoxControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),200,{value:window.LOCID_SELECT_BPF_PROCESS_FIRST},Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"locked");else{var $v_4=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages[$v_3].Options;$v_0=this.$AI_1(initialValues,$v_4)}}return $v_0},$AI_1:function($p0,$p1){var $v_0=[];if(!IsNull($p0))for(var $$arr_3=$p0,$$len_4=$$arr_3.length,$$idx_5=0;$$idx_5<$$len_4;++$$idx_5){var $v_2=$$arr_3[$$idx_5];!IsNull($v_2)&&Array.add($v_0,$v_2.Value)}var $v_1=Mscrm.InlineControlFactory.createInlineMultiplePicklistControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),$p1,$v_0,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),0,"alwaysedit","");return $v_1},constructInitialValue:function(initialValues){var $v_0={};$v_0["value"]=!initialValues?null:initialValues[0];return $v_0},setValueDelegate:function(value){if(this.$3H_1)this.$0_0.setValuesDelegate(value);else{var $v_0=new Mscrm.EnumOptionJsonWrapper;$v_0.Value=value;if(!IsNull($v_0.Value)&&$v_0.Value.toString()===window.LOCID_NO_PROCESSES_DEFINED)$v_0.Label=$v_0.Value.toString();for(var $$arr_2=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Options,$$len_3=$$arr_2.length,$$idx_4=0;$$idx_4<$$len_3;++$$idx_4){var $v_1=$$arr_2[$$idx_4];if($v_0.Value===$v_1.Value){$v_0.Label=$v_1.Label;break}}Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.setValueDelegate.call(this,$v_0)}},getValueDelegate:function(){if(this.$3H_1)return this.$0_0.getValuesDelegate();else return Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.getValueDelegate.call(this).Value},resetValue:function(values){if(this.$A_1===19)if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.BusinessProcessFlows.Options.length)Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.resetValue.call(this,[window.LOCID_NO_PROCESSES_DEFINED]);else Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.resetValue.call(this,["0"]);else if(this.$A_1===21){var $v_0=this.$0_0.get_viewModel().get_parent().$1J_3;if($v_0<0||IsNull(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages)||$v_0>=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityBpfMetadata.Stages.length)Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.resetValue.call(this,[window.LOCID_SELECT_BPF_PROCESS_FIRST]);else Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.resetValue.call(this,[this.$0_0.getValuesDelegate(),null])}else Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.resetValue.call(this,values)},$3H_1:false};Mscrm.BusinessRules.Views.DateTimeValueInlineControl=function(chromeElement,attributeMetadata){Mscrm.BusinessRules.Views.DateTimeValueInlineControl.initializeBase(this,[chromeElement,attributeMetadata])};Mscrm.BusinessRules.Views.DateTimeValueInlineControl.prototype={prepareInlineView:function(initialValues){var $v_0=this.$2d_0;return Mscrm.InlineControlFactory.createInlineDateTimeControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),$v_0.Format,$v_0.DateTimeBehavior,this.constructInitialValue(initialValues),Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},constructInitialValue:function(initialValues){var $v_0={};$v_0["raw"]=IsNull(initialValues)||IsNull(initialValues[0])?null:initialValues[0].localeFormat("s");return $v_0}};Mscrm.BusinessRules.Views.TextValueInlineControl=function(chromeElement,attributeMetadata){Mscrm.BusinessRules.Views.TextValueInlineControl.initializeBase(this,[chromeElement,attributeMetadata])};Mscrm.BusinessRules.Views.TextValueInlineControl.prototype={prepareInlineView:function(initialValues){var $v_0=this.$2d_0,$v_1=Mscrm.InlineControlFactory.createInlineTextBoxControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),$v_0.MaxLength,this.constructInitialValue(initialValues),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit");$P_CRM(".ms-crm-InlineInput",$v_1.get_chromeElement()).removeAttr("title");return $v_1},constructInitialValue:function(initialValues){var $v_0={};$v_0["value"]=!initialValues?null:initialValues[0];return $v_0}};Mscrm.BusinessRules.Views.NumberValueInlineControl=function(chromeElement,attributeMetadata){Mscrm.BusinessRules.Views.NumberValueInlineControl.initializeBase(this,[chromeElement,attributeMetadata])};Mscrm.BusinessRules.Views.NumberValueInlineControl.prototype={prepareInlineView:function(initialValues){var $v_0=this.$2d_0;return Mscrm.InlineControlFactory.createInlineNumberControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),$v_0.MaxValue,$v_0.MinValue,$v_0.Precision,$v_0.AttributeType,this.constructInitialValue(initialValues),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit")},constructInitialValue:function(initialValues){var $v_0=!initialValues?null:initialValues[0],$v_1={};$v_1["raw"]=$v_0;$v_1["value"]=$v_0;return $v_1}};Mscrm.BusinessRules.Views.MoneyValueInlineControl=function(chromeElement,attributeMetadata){Mscrm.BusinessRules.Views.MoneyValueInlineControl.initializeBase(this,[chromeElement,attributeMetadata])};Mscrm.BusinessRules.Views.MoneyValueInlineControl.prototype={prepareInlineView:function(initialValues){var $v_0=this.$2d_0;return Mscrm.InlineControlFactory.createInlineNumberControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),$v_0.MaxValue,$v_0.MinValue,$v_0.Precision,"decimal",this.constructInitialValue(initialValues),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit")},constructInitialValue:function(initialValues){var $v_0=!initialValues?null:initialValues[0],$v_1={};$v_1["raw"]=$v_0;$v_1["value"]=$v_0;return $v_1}};Mscrm.BusinessRules.Views.PicklistValueInlineControl=function(chromeElement,attributeMetadata,canHaveMultipleValues){Mscrm.BusinessRules.Views.PicklistValueInlineControl.initializeBase(this,[chromeElement,attributeMetadata]);this.$3H_1=canHaveMultipleValues};Mscrm.BusinessRules.Views.PicklistValueInlineControl.prototype={prepareInlineView:function(initialValues){var $v_0=null,$v_1=this.$2d_0;if(this.$3H_1){var $v_2=[];if(!IsNull(initialValues))for(var $$arr_4=initialValues,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_3=$$arr_4[$$idx_6];Array.add($v_2,$v_3.Value)}$v_0=Mscrm.InlineControlFactory.createInlineMultiplePicklistControlForDom(this.$1N_0.get_jQueryObject(),this.get_getUniqueAttributeName(),$v_1.Options,$v_2,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),0,"alwaysedit","")}else{if(!$v_1.Options.length)$v_1.Options=Mscrm.BusinessRules.Views.ViewHelper.getDefaultOptionValue();var $v_4=$v_1.Options[0].Value.toString();if(!IsNull(initialValues)&&initialValues.length>0){var $v_5=initialValues[0];if(!isNaN($v_5.Value))$v_4=$v_5.Value.toString()}$v_0=(new Mscrm.BusinessRules.Mediators.InlineEditControlMediator).createAutoCompleteControl(this.$1N_0,this.get_getUniqueAttributeName(),$v_1.Options,$v_4,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)}return $v_0},resetValue:function(values){var $v_0=[];values=this.$0_0.get_viewModel().get_expression().$w_1;if(!IsNull(values))for(var $$arr_2=values,$$len_3=$$arr_2.length,$$idx_4=0;$$idx_4<$$len_3;++$$idx_4){var $v_3=$$arr_2[$$idx_4];!IsNull($v_3.Value)&&Array.add($v_0,$v_3.Value.toString())}var $v_1=[],$$t_B=this,$v_2=function($p1_0,$p1_1){var $v_4=$P_CRM($p1_1).attr("value");Array.contains($v_0,$v_4)&&Array.add($v_1,$p1_0)};$P_CRM("input",this.$Y_0.get_chromeElement()).each($v_2);if(Mscrm.InlineMultiplePicklistControlViewModel.isInstanceOfType(this.$Y_0.get_dataContext())){this.$Y_0.get_dataContext().set_selectedItemIndexes($v_1);this.$Y_0.clearValidation();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$Y_0,values)}else if(Mscrm.InlineAutoCompleteControlViewModel.isInstanceOfType(this.$Y_0.get_dataContext())){this.$Y_0.clearValidation();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$Y_0,$v_0[0])}},setValueDelegate:function(value){if(this.$3H_1)this.$0_0.setValuesDelegate(value);else{var $v_0=new Mscrm.EnumOptionJsonWrapper;$v_0.Value=value;for(var $v_1=this.$2d_0,$$arr_3=$v_1.Options,$$len_4=$$arr_3.length,$$idx_5=0;$$idx_5<$$len_4;++$$idx_5){var $v_2=$$arr_3[$$idx_5];if($v_0.Value===$v_2.Value){$v_0.Label=$v_2.Label;break}}Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.setValueDelegate.call(this,$v_0)}},getValueDelegate:function(){if(this.$3H_1)return this.$0_0.getValuesDelegate();else return Mscrm.BusinessRules.Views.ValueInlineControlBase.prototype.getValueDelegate.call(this).Value},$3H_1:false};Mscrm.BusinessRules.Views.LookupValueInlineControl=function(chromeElement,attributeMetadata){Mscrm.BusinessRules.Views.LookupValueInlineControl.initializeBase(this,[chromeElement,attributeMetadata])};Mscrm.BusinessRules.Views.LookupValueInlineControl.prototype={prepareInlineView:function(initialValues){var $v_0={};$P_CRM.extend(true,$v_0,this.$2d_0);$v_0.LogicalName=this.get_getUniqueAttributeName();$v_0.CanCreate=true;$v_0.CanRead=true;$v_0.CanUpdate=true;$v_0.IsDisabled=false;$v_0.RequiredLevel=0;return Mscrm.InlineControlFactory.initializeUnboundedField(this.$1N_0.get_jQueryObject(),$v_0,this.constructInitialValue(initialValues),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit")},setValueDelegate:function(value){if(!IsNull(value))this.$0_0.setValuesDelegate(value);else this.$Y_0.get_editControlBehavior().set_defaultValue(null)},getValueDelegate:function(){return this.$0_0.getValuesDelegate()},constructInitialValue:function(initialValues){if(!initialValues||!initialValues.length)return null;var $v_0=initialValues[0];if(IsNull($v_0))return null;var $v_1={};$v_1["otypename"]=$v_0.typename;$v_1["oid"]=$v_0.id;$v_1["value"]=$v_0.name;$v_1["otype"]=this.$Ct_1($v_0.name);return $v_1},$Ct_1:function($p0){var $v_0=this.$2d_0,$v_1=$v_0.LookupTypeNames.split(",");if($v_1.length>0)for(var $v_2=0;$v_2<$v_1.length;$v_2++){var $v_3=$v_1[$v_2].split(":");if($v_3.length>2&&$v_3[0]===$p0)return $v_3[1]}return $v_0.DefaultType.toString()}};Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator=function(inlineControlView){Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator.initializeBase(this,[inlineControlView.get_layout()]);this.$Y_3=inlineControlView};Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator.prototype={get_getEditViewObject:function(){return null},get_isValid:function(){return this.$FA_3()},$FA_3:function(){var $v_0=this.$Y_3.get_dataContext().get_attribute(),$v_1=$v_0.get_requiredLevel();try{$v_0.set_requiredLevel(2);return this.$Y_3.get_isValid()&&!this.$Y_3.get_dataContext().get_hasError()}finally{$v_0.set_requiredLevel($v_1)}},$Y_3:null};Mscrm.BusinessRules.Views.ConditionsSectionsView=function(element){this.$$d_$Er_2=Function.createDelegate(this,this.$Er_2);this.$$d_$E0_2=Function.createDelegate(this,this.$E0_2);this.$$d_addNewExpressions=Function.createDelegate(this,this.addNewExpressions);Mscrm.BusinessRules.Views.ConditionsSectionsView.initializeBase(this,[element])};Mscrm.BusinessRules.Views.ConditionsSectionsView.prototype={get_results:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance();if(this.$o_2)for(var $v_1=0;$v_1<this.$o_2.get_count();$v_1++){var $v_2=this.$o_2.get_item($v_1);if(IsNull($v_2))continue;$v_0.compileResults($v_2.get_results())}return $v_0},get_dataContext:function(){return this.$0_2},set_dataContext:function(value){if(IsNull(this.$0_2)&&!IsNull(value)){Mscrm.BusinessRules.Views.SectionView.prototype.set_dataContext.call(this,value);this.$0_2=value}return value},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);this.initializeChildExpressions(this.get_expressionContainer());this.enableAddConditionEvent();for(var $v_0=0;$v_0<this.get_expressions().get_count();$v_0++){this.get_expressions().get_item($v_0).get_dataContext().$y_2.get_editViewModel().add_propertyChanged(this.$$d_$E0_2);this.get_expressions().get_item($v_0).get_dataContext().add_propertyChanged(this.$$d_$Er_2)}},$Er_2:function($p0,$p1){if($p1.get_propertyName()!=="ShowWarningProperty")return;for(var $v_0=$p0,$v_1=0;$v_1<this.get_expressions().get_count();$v_1++)if($v_0.$H_1===this.get_expressions().get_item($v_1).get_dataContext().$H_1)if($v_0.$4f_2)this.$BH_2(this.get_expressions().get_item($v_1));else this.get_expressions().get_item($v_1).get_warningView().clearView()},$E0_2:function($p0,$p1){if($p1.get_propertyName()!=="AndOrOperatorConfirm")return;for(var $v_0=$p0,$v_1=0;$v_1<this.get_expressions().get_count();$v_1++)if($v_0.$0_1.get_id()!==this.get_expressions().get_item($v_1).get_dataContext().$H_1){var $v_2=this.get_expressions().get_item($v_1).get_dataContext().$y_2.get_editViewModel();$v_2.setLogicalOperatorDelegate($v_0.get_logicalOperator());$v_2.confirmRaiseProperty(false);this.get_expressions().get_item($v_1).get_inlineView().updateValueElement();!IsNull(this.get_expressions().get_item($v_1).get_inlineView().get_editView())&&this.get_expressions().get_item($v_1).get_inlineView().get_editView().$4M_2.$2i_1.get_editView().get_editElement().val($v_0.$6D_1[Number.parseInvariant($v_0.get_logicalOperator())].Label)}},get_expressions:function(){if(!this.$o_2)this.$o_2=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.Views.IExpressionView);return this.$o_2},setFocusOnExpression:function(view){if(IsNull(view)){this.$66_2.setFocus();return}view.setFocus()},get_expressionContainer:function(){return this.get_jQueryProxy().selectInElement(".expressioncollection",this.$1_1)},enableAddConditionEvent:function(){this.get_addControl().click(this.$$d_addNewExpressions);var $$t_1=this;this.get_addControl().keyDown(function($p1_0){if($p1_0.which===13){$$t_1.addNewExpressions($p1_0);$p1_0.preventDefault()}});if(!IsNull(this.get_$3a_2())){this.get_$3a_2().removeClass("ms-crm-ImageStrip-white_plus_16");this.get_$3a_2().addClass("ms-crm-ImageStrip-green_plus_16");this.get_imageBehavior().initialize()}},disableAddConditionEvent:function(){this.get_addControl().unbind("click",null);this.get_addControl().unbind("keydown",null);if(!IsNull(this.get_$3a_2())){this.get_imageBehavior().unbindEvent();this.get_$3a_2().removeClass("ms-crm-ImageStrip-green_plus_16");this.get_$3a_2().addClass("ms-crm-ImageStrip-white_plus_16")}},dispose:function(){if(this.$9_0)return;for(var $v_0=0;$v_0<this.get_expressions().get_count();$v_0++)if(!IsNull(this.get_expressions().get_item($v_0))&&!IsNull(this.get_expressions().get_item($v_0).get_dataContext())){this.get_expressions().get_item($v_0).get_dataContext().$y_2.get_editViewModel().remove_propertyChanged(this.$$d_$E0_2);this.get_expressions().get_item($v_0).get_dataContext().remove_propertyChanged(this.$$d_$Er_2)}if(!IsNull(this.get_$3a_2())){this.get_$3a_2().unbind("click",null);this.get_$3a_2().unbind("keydown",null);if(!IsNull(this.get_$8u_2())){this.get_$8u_2().unbind("click",null);this.get_$8u_2().unbind("keydown",null)}this.get_imageBehavior().dispose()}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},deleteView:function(){},scrollIntoView:function(view){!IsNull(view)&&view.get_element().get_jQueryObject().get(0).scrollIntoView()},get_needDeleteConditionBranch:function(){return false},get_canRemoveCondition:function(){return false},initializeChildExpressions:function(parentElement){for(var $v_0=parentElement.children("*"),$v_1=this.$0_2.$i_1,$v_2=0;$v_2<$v_1.get_count();$v_2++){$v_1.get_item($v_2).set_parent(this.$0_2);var $v_3=this.createExpressionView($v_1.get_item($v_2),this.get_jQueryProxy().fromElement($v_0.get_item($v_2))),$v_4=$v_1.get_item($v_2);$v_4.$4f_2&&this.$BH_2($v_3);this.get_expressions().add($v_3)}!this.get_expressions().get_count()&&parentElement.addClass("emptycollection")},addNewExpressions:function(eventObject){var $v_0=this.$0_2.get_entityName();if(!$v_0||Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityMetadataManager().containsLogicalName($v_0))this.addNewExpressionInternal();else{var $$t_2=this;Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().requestAttributes($v_0).done(function(){$$t_2.addNewExpressionInternal()})}},addNewExpressionInternal:function(){var $v_0=!this.$0_2.$i_1.get_count(),$v_1=2,$v_2=new Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder;if(!$v_0&&this.$0_2.$i_1.last().$y_2.get_logicalOperator()!==(0).toString())$v_1=3;var $v_3=$v_2.buildExpressionViewModel($v_0,$v_1,Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.get_instance().getNextUniqueId(this.$1_1.getAttribute("id")),this.$0_2),$v_4=$v_2.renderExpressionView(this.get_expressionContainer(),$v_3),$v_5=this.createExpressionView($v_3,$v_4);$v_5.set_isNewCreated(true);var $v_6=$v_5.get_dataContext();$v_6.confirm();this.$0_2.addExpression($v_6);$v_5.get_inlineView().goToEditState();this.get_expressions().add($v_5);$v_5.get_element().get_jQueryObject().parent().removeClass("emptycollection");$v_5.setFocus();this.scrollIntoView($v_5);this.get_expressions().last().get_dataContext().$y_2.get_editViewModel().add_propertyChanged(this.$$d_$E0_2)},createExpressionView:function(expressionViewModel,expressionViewElement){var $v_0=new Mscrm.BusinessRules.Views.ExpressionView(expressionViewElement);$v_0.set_dataContext(expressionViewModel);$v_0.set_parent(this);$v_0.initialize();return $v_0},$BH_2:function($p0){var $v_0=$p0.get_warningView();$v_0.displayView(window.LOCID_BUSINESSRULE_INVALIDBPFTIP,1);$v_0.hideMessage();$v_0.setIconTitle(window.LOCID_BUSINESSRULE_INVALIDBPFTIP)},$B_2:null,get_addControl:function(){if(IsNull(this.$B_2))this.$B_2=this.get_jQueryProxy().selectInElement(".addcontrol",this.$1_1);return this.$B_2},$6v_2:null,get_$3a_2:function(){if(IsNull(this.$6v_2))this.$6v_2=this.get_addControl().children("img");return this.$6v_2},$6x_2:null,get_$8u_2:function(){if(IsNull(this.$6x_2))this.$6x_2=this.get_jQueryProxy().selectInElement("#AddConditionText",this.$1_1);return this.$6x_2},$66_2:null,get_imageBehavior:function(){if(IsNull(this.$66_2))this.$66_2=this.createImageBehavior();return this.$66_2},createImageBehavior:function(){return new Mscrm.BusinessRules.Views.AddImageBehavior(this.get_addControl())},$o_2:null,$0_2:null};Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView=function($p0){Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.initializeBase(this,[$p0]);this.$2_3=this.get_inlineView().get_viewModel().get_editViewModel()};Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},get_isValid:function(){return this.$4_3.get_isValid()&&this.$5_3.get_isValid()&&this.$3_3.get_isValid()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);this.$2_3.confirm();var $v_0=this.get_inlineView();$v_0.updateValueElement();this.get_editElementWrapper().trigger("state-commit");this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_$7_3().$Z_3.accept($v_0);this.$C_3=$v_0._results},discard:function($p0){Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0);this.$85_3();this.$2_3.discard()},confirm:function(){this.$85_3();this.get_isValid()&&Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)},$85_3:function(){this.$4_3.resetFocus();this.$3_3.resetFocus();!IsNull(this.$5_3)&&this.$5_3.resetFocus()},postCreateEditElement:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.postCreateEditElement.call(this);var $v_0=String.format("{0}_lefopcon",this.get_$7_3().get_stepId()),$v_1=String.format("{0}_rigopcon",this.get_$7_3().get_stepId()),$v_2=String.format("{0}_optycon",this.get_$7_3().get_stepId()),$v_3=this.get_jQueryProxy().selectElement("#"+$v_0);this.$4_3=new Mscrm.BusinessRules.Views.LeftOperandView(Mscrm.BusinessRules.Views.OperandViewFactory.$AG(this.get_$7_3().get_leftOperand().get_innerOperand(),$v_3,this.get_$7_3().get_useForCalculatedField()));this.$4_3.set_dataContext(this.$2_3.get_leftOperand());Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType(this.$4_3.get_operand().get_dataContext())&&this.$4_3.get_operand().get_dataContext().set_useAttributeFiltering(true);this.$4_3.initialize();Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType(this.$4_3.get_operand())&&this.$4_3.get_operand().applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));var $v_4=this.get_jQueryProxy().selectElement("#"+$v_1);this.$3_3=new Mscrm.BusinessRules.Views.RightOperandView($v_4);this.$3_3.set_dataContext(this.$2_3.get_rightOperand());!IsNull(this.$3_3.get_operand())&&Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType(this.$3_3.get_operand().get_dataContext())&&this.$3_3.get_operand().get_dataContext().set_useAttributeFiltering(true);this.$3_3.initialize();!IsNull(this.$3_3.get_operand())&&Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType(this.$3_3.get_operand())&&this.$3_3.get_operand().applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));var $v_5=this.get_jQueryProxy().selectElement("#"+$v_2);this.$5_3=new Mscrm.BusinessRules.Views.OperandTypeView($v_5);this.$5_3.set_dataContext(this.$2_3.get_operandType());this.$5_3.initialize()},createStepHtml:function($p0){var $v_0=CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SETATTRHEADER),$v_1=String.format("{0}_lefopcon",this.get_$7_3().get_stepId()),$v_2=String.format("{0}_rigopcon",this.get_$7_3().get_stepId()),$v_3=String.format("{0}_optycon",this.get_$7_3().get_stepId()),$v_4=this.get_inlineView(),$v_5=$v_4.get_viewModel().$4_3.get_innerOperand(),$v_6=String.format("<div class='{0}'><div class='{1}'>{2}</div><div class='{3}'><div class='{4}' id='{5}'></div><div class='{6}' id='{7}'></div><div class='{8}' id='{9}'></div></div></div>","editstepcontainer"+(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.isInstanceOfType($v_5)?" setfieldvalueeditstepcontainer":""),"sectionheader","{0}","sectionbody","lefopcon","{1}","optycon","{2}","rigopcon","{3}");$p0.append(String.format($v_6,$v_0,$v_1,$v_3,$v_2))},get_$7_3:function(){return this.$2_3.get_viewModel()},$2_3:null,$4_3:null,$3_3:null,$5_3:null};Mscrm.BusinessRules.Views.InlineSetAttributeValueStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetAttributeValueStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetAttributeValueStepView.prototype={$C_3:null,buildReadToolBarView:function(){if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){var $v_0=new Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=this.get_readToolBarViewBuilder().buildActionWithCondition(this.$E_1,$v_0);return $v_1}else{var $v_2=new Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel;$v_2.set_id(this.get_viewModel().get_stepId());var $v_3=this.get_readToolBarViewBuilder().buildAction(this.$E_1,$v_2);return $v_3}},updateValueElement:function(){var $v_0=null;if(this.get_viewModel().get_isLeftOperandRelatedEntityLinked())$v_0=this.get_viewModel().$4_3.get_displayValue();else $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.get_viewModel().get_attributeName());var $v_1=this.get_viewModel().$3_3.get_displayValue(),$v_2;if(Mscrm.BusinessRules.ViewModels.NullOperandViewModel.isInstanceOfType(this.get_viewModel().$3_3.get_innerOperand()))$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(window.LOCID_BUSINESSRULE_SETATTRNULLOP),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)));else $v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().get_readDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)));this.get_stepValueContent().html($v_2);this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView(this)},get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();if(this.get_viewModel().get_isLeftOperandRelatedEntityLinked())$v_0.visitSetAttributeValueStep(this.get_viewModel().get_step());else this.get_viewModel().$Z_3.accept($v_0);this.$C_3=$v_0._results}};Mscrm.BusinessRules.Views.SetAttributeValueStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetAttributeValueStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetAttributeValueStepSectionView.prototype={get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0},initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetAttributeValueStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()}};Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView=function($p0){Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView.initializeBase(this,[$p0]);this.$2_3=this.get_inlineView().get_viewModel().get_editViewModel()};Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView.prototype={get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},get_isValid:function(){return this.$4_3.get_isValid()&&this.$5_3.get_isValid()&&this.$3_3.get_isValid()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);this.$2_3.confirm();var $v_0=this.get_inlineView();$v_0.updateValueElement();this.get_editElementWrapper().trigger("state-commit");this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();if(this.get_$7_3().get_isLeftOperandRelatedEntityLinked()){$v_0.visitSetDefaultValueStep(this.get_$7_3().get_step());$v_0.visitPropertySpecification(this.get_$7_3().$Z_3)}else this.get_$7_3().$Z_3.accept($v_0);this.$C_3=$v_0._results},discard:function($p0){Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0);this.$4_3.resetFocus();this.$3_3.resetFocus();this.$2_3.discard()},confirm:function(){this.$4_3.resetFocus();this.$3_3.resetFocus();this.get_isValid()&&Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)},postCreateEditElement:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.postCreateEditElement.call(this);var $v_0=String.format("{0}_lefopcon",this.get_$7_3().get_stepId()),$v_1=String.format("{0}_rigopcon",this.get_$7_3().get_stepId()),$v_2=String.format("{0}_optycon",this.get_$7_3().get_stepId()),$v_3=this.get_jQueryProxy().selectElement("#"+$v_0);this.$4_3=new Mscrm.BusinessRules.Views.LeftOperandView(Mscrm.BusinessRules.Views.OperandViewFactory.$3B(this.get_$7_3().get_leftOperand().get_innerOperand(),$v_3));this.$4_3.set_dataContext(this.$2_3.get_leftOperand());Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel.isInstanceOfType(this.$4_3.get_operand().get_dataContext())&&this.$4_3.get_operand().get_dataContext().set_useAttributeFiltering(true);this.$4_3.initialize();Mscrm.BusinessRules.Views.IAttributeOperandView.isInstanceOfType(this.$4_3.get_operand())&&this.$4_3.get_operand().applyFilteringDelegate(Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance().$4o_0(this));var $v_4=this.get_jQueryProxy().selectElement("#"+$v_1);this.$3_3=new Mscrm.BusinessRules.Views.RightOperandView($v_4);this.$3_3.set_dataContext(this.$2_3.get_rightOperand());this.$3_3.initialize();var $v_5=this.get_jQueryProxy().selectElement("#"+$v_2);this.$5_3=new Mscrm.BusinessRules.Views.OperandTypeView($v_5);this.$5_3.set_dataContext(this.$2_3.get_operandType());this.$5_3.initialize()},createStepHtml:function($p0){var $v_0=CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SETDFLTHEADER),$v_1=String.format("{0}_lefopcon",this.get_$7_3().get_stepId()),$v_2=String.format("{0}_rigopcon",this.get_$7_3().get_stepId()),$v_3=String.format("{0}_optycon",this.get_$7_3().get_stepId()),$v_4=this.get_inlineView(),$v_5=$v_4.get_viewModel().$4_3.get_innerOperand();$p0.append(String.format("<div class='{0}'><div class='{1}'>{2}</div><div class='{3}'><div class='{4}' id='{5}'></div><div class='{6}' id='{7}'></div><div class='{8}' id='{9}'></div></div></div>","editstepcontainer"+(Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.isInstanceOfType($v_5)?" setfieldvalueeditstepcontainer":""),"sectionheader",$v_0,"sectionbody","lefopcon",$v_1,"optycon",$v_3,"rigopcon",$v_2))},get_$7_3:function(){return this.$2_3.get_viewModel()},$2_3:null,$C_3:null,$4_3:null,$3_3:null,$5_3:null};Mscrm.BusinessRules.Views.InlineSetDefaultValueStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetDefaultValueStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetDefaultValueStepView.prototype={$C_3:null,updateValueElement:function(){var $v_0=null;if(this.get_viewModel().get_isLeftOperandRelatedEntityLinked())$v_0=this.get_viewModel().$4_3.get_displayValue();else $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.get_viewModel().get_attributeName());var $v_1=this.get_viewModel().$3_3.get_displayValue(),$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().get_readDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)));this.get_stepValueContent().html($v_2);this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView(this)},get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();if(this.get_viewModel().get_isLeftOperandRelatedEntityLinked()){$v_0.visitSetDefaultValueStep(this.get_viewModel().get_step());$v_0.visitPropertySpecification(this.get_viewModel().$Z_3)}else this.get_viewModel().$Z_3.accept($v_0);this.$C_3=$v_0._results}};Mscrm.BusinessRules.Views.SetDefaultValueStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetDefaultValueStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetDefaultValueStepSectionView.prototype={get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0},initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetDefaultValueStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()}};Mscrm.BusinessRules.Views.CompositeStepSectionView$2=function(element){Mscrm.BusinessRules.Views.CompositeStepSectionView$2.$$(this.$$gta["Mscrm.BusinessRules.Views.CompositeStepSectionView$2"]["TViewModel"],this.$$gta["Mscrm.BusinessRules.Views.CompositeStepSectionView$2"]["TModel"]).initializeBase(this,[element])};Mscrm.BusinessRules.Views.CompositeStepSectionView$2.$$=function(TViewModel,TModel){var $$cn="CompositeStepSectionView$2$"+TViewModel.getName().replace(/\./g,"_")+"$"+TModel.getName().replace(/\./g,"_");if(!Mscrm.BusinessRules.Views[$$cn]){var $$ccr=Mscrm.BusinessRules.Views[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.BusinessRules.Views.CompositeStepSectionView$2"]={TViewModel:TViewModel,TModel:TModel};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.BusinessRules.Views.CompositeStepSectionView$2.apply(this,$v_0)};$$ccr.registerClass("Mscrm.BusinessRules.Views."+$$cn,Mscrm.BusinessRules.Views.StepSectionView$2.$$(TViewModel,TModel));var $$dict_6=Mscrm.BusinessRules.Views.CompositeStepSectionView$2.prototype;for(var $$key_7 in $$dict_6){var $$entry_8={key:$$key_7,value:$$dict_6[$$key_7]};if("constructor"!==$$entry_8.key)$$ccr.prototype[$$entry_8.key]=$$entry_8.value}}return Mscrm.BusinessRules.Views[$$cn]};Mscrm.BusinessRules.Views.CompositeStepSectionView$2.prototype={initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);this.initializeChildSteps(this.$1_1)},initializeChildSteps:function(parentElement){for(var $v_0=parentElement.children("*"),$v_1=this.get_viewModel().get_stepViewModels(),$v_2=0;$v_2<$v_1.get_count();$v_2++){var $v_3=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection($v_1.get_item($v_2),this.get_jQueryProxy().fromElement($v_0.get_item($v_2)));$v_1.get_item($v_2).set_parent(this.get_viewModel());$v_3.set_parent(this);this.get_stepViews().add($v_3)}!this.get_stepViews().get_count()&&parentElement.addClass("emptycollection")},get_stepViews:function(){if(!this.$7o_3)this.$7o_3=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.Views.ISectionView);return this.$7o_3},setFocusOnStep:function(view){if(IsNull(view))return;view.setFocus()},$7o_3:null};Mscrm.BusinessRules.Views.ConditionBranchStepSectionView=function(element){this.$$d_$9J_4=Function.createDelegate(this,this.$9J_4);Mscrm.BusinessRules.Views.ConditionBranchStepSectionView.initializeBase(this,[element])};Mscrm.BusinessRules.Views.ConditionBranchStepSectionView.prototype={dispose:function(){if(this.$9_0)return;if(!IsNull(this.$13_4)){this.$13_4.unbind("click",null);this.$13_4.unbind("keydown",null);if(!IsNull(this.$5l_4)){this.$5l_4.unbind("click",null);this.$5l_4.unbind("keydown",null)}this.$10_4.dispose();!IsNull(this.$4s_4)&&this.$4s_4.dispose()}!IsNull(this.$1t_4)&&this.$1t_4.unbind("keydown",null);if(!IsNull(this.$1X_4)){this.$1X_4.unbind("click",null);this.$1X_4.unbind("keydown",null)}if(!IsNull(this.$V_4)){this.$V_4.unbind("focus",null);this.$V_4.unbind("blur",null);this.$V_4.unbind("mouseover",null);this.$V_4.unbind("mouseout",null);this.$V_4.unbind("keydown",null)}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},initialize:function(){var $v_0=this.$1_1,$v_1=new Array(3),$v_2=this.get_jQueryProxy().selectElement("#"+$v_0.getAttribute("data-imageid"));this.$V_4=this.$1_1.children(":first-child");$v_1[0]=this.$1_1.children(":nth-child(2)");$v_1[1]=this.$1_1.children(":nth-child(3)");if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){this.$V_4.addClass("calcfield");$v_1[0].addClass("sectioncondition-calcfield");$v_1[1].addClass("sectionaction-calcfield")}else if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()){this.$V_4.addClass("ruleeditor");$v_1[0].addClass("sectioncondition-relationship");$v_1[1].addClass("sectionaction-ruleeditor")}else{this.$V_4.addClass("ruleeditor");$v_1[0].addClass("sectioncondition-ruleeditor");$v_1[1].addClass("sectionaction-ruleeditor")}if(this.get_jQueryProxy().selectElement("#WorkflowStep0_collection").children(":first-child").children(":first-child").getAttribute("id")!==this.$1_1.getAttribute("id")){if(this.get_jQueryProxy().selectElement("#"+this.$1_1.getAttribute("id")).children(":nth-child(2)").children(":nth-child(2)").children(":first-child").find(".expression").get_length()){this.$V_4.children(":first-child").attribute("title",window.LOCID_CALCULATEDFIELD_ELSEIF);this.$V_4.children(":first-child").children(":nth-child(2)").set_text(window.LOCID_CALCULATEDFIELD_ELSEIF)}else{this.$V_4.children(":first-child").attribute("title",window.LOCID_CALCULATEDFIELD_ELSE);this.$V_4.children(":first-child").children(":nth-child(2)").set_text(window.LOCID_CALCULATEDFIELD_ELSE)}this.$V_4.children(":first-child").attribute("tabindex","-1");this.$Bx_4();this.$V_4.children(":first-child").children(":nth-child(2)").addClass("deleteiconalignmiddle");this.$V_4.children(":nth-child(2)").children(":first-child").attribute("title",window.LOCID_PBLELSE_DELETETOOLTIP)}this.attachForCollapseMultipleSectionEvent(this.$V_4,$v_1,$v_2);this.$AX_4();this.$DJ_4()},$AX_4:function(){var $v_0=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",this.get_viewModel().get_stepId(),"condition")));this.$q_4=new Mscrm.BusinessRules.Views.ConditionsSectionsView($v_0);this.$q_4.set_dataContext(this.get_viewModel().$k_4);this.$q_4.initialize();this.$q_4.$E_0=this},$DJ_4:function(){this.$5m_4=this.get_jQueryProxy().selectElement("#"+String.format("{0}_section",String.format("{0}_{1}",this.get_viewModel().get_stepId(),"action")));this.$5l_4=this.get_jQueryProxy().selectInElement("#AddActionText",this.$1_1);this.$89_4=this.$5m_4.children(":first-child");this.$4r_4=this.$5m_4.children(":nth-child(2)");var $v_0=this.get_jQueryProxy().selectElement("#"+this.$5m_4.getAttribute("data-imageid"));this.attachForCollapseSectionEvent(this.$89_4,this.$4r_4,$v_0);Mscrm.BusinessRules.Views.CompositeStepSectionView$2.prototype.initializeChildSteps.call(this,this.$4r_4.children(":first-child"));this.$1X_4=this.$4r_4.children(":nth-child(2)");this.$13_4=this.$1X_4.children("img");this.$4s_4=new Mscrm.BusinessRules.Views.ActionMenu(this.$13_4,this.get_viewModel().get_stepId());this.$1t_4=this.get_jQueryProxy().selectElement("#AddActionButton_Menu");var $$t_5=this;this.$1X_4.click(function($p1_0){if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())$$t_5.$9J_4("SetField");else{$$t_5.$4s_4.showMenu();Mscrm.BusinessRules.Views.ViewHelper.$6g=$$t_5.$$d_$9J_4}});var $$t_6=this;this.$1X_4.keyDown(function($p1_0){if($p1_0.which===13)if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){$p1_0.preventDefault();$p1_0.stopPropagation();$$t_6.$9J_4("SetField")}else{$$t_6.$4s_4.showMenu();Mscrm.BusinessRules.Views.ViewHelper.$6g=$$t_6.$$d_$9J_4}});var $$t_7=this;this.$1t_4.keyDown(function($p1_0){if($p1_0.which===13){var $v_1=$$t_7.$1t_4.children("li");$v_1.get_jQueryObject().trigger("click")}});if(!IsNull(this.$13_4)){this.$10_4=new Mscrm.BusinessRules.Views.AddImageBehavior(this.$1X_4);this.$10_4.initialize()}Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&this.get_stepViews().get_count()>0&&this.$1X_4.addClass("preventadd")},$Bx_4:function(){var $v_0=new Mscrm.BusinessRules.ViewModels.ExpressionReadToolBarViewModel;$v_0.set_id(this.get_viewModel().get_stepId());var $v_1=new Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder,$v_2=$v_1.buildExpression(this,$v_0);this.$V_4.append($v_2.get_element());$v_2.initialize();this.$V_4.addClass("elseheader");this.$V_4.attribute("tabindex","0");if(!Mscrm.BusinessRules.BusinessRuleInitializer.$5F){var $$t_9=this;this.$V_4.bind("focus",function(){$$t_9.$V_4.addClass("ms-crm-Inline-EditHintState");$$t_9.$V_4.addClass("selected");$v_2.get_element().removeAttribute("style")});var $$t_A=this;this.$V_4.bind("blur",function($p1_0){$$t_A.$V_4.removeClass("ms-crm-Inline-EditHintState");$$t_A.$V_4.removeClass("selected")});var $$t_B=this;this.$V_4.bind("mouseover",function(){$$t_B.$V_4.addClass("ms-crm-Inline-EditHintState");$$t_B.$V_4.addClass("selected")});var $$t_C=this;this.$V_4.bind("mouseout",function(){var $v_3=$$t_C.get_jQueryProxy().selectElement(":focus");if($$t_C.$V_4.getAttribute("id")!==$v_3.getAttribute("id")){$$t_C.$V_4.removeClass("ms-crm-Inline-EditHintState");$$t_C.$V_4.removeClass("selected")}});var $$t_D=this;this.$V_4.keyDown(function($p1_0){var $v_4=$p1_0.shiftKey;if($p1_0.which===9)if($v_2.get_element().hasClass("deleteselected")){$v_2.get_element().children(":first-child").children(":first-child").attribute("style","display: inline;");$v_2.get_element().children(":first-child").children(":nth-child(2)").attribute("style","display: none;");$v_2.get_element().removeClass("deleteselected");if($v_4){$p1_0.preventDefault();$p1_0.stopImmediatePropagation()}}else if(!$v_4){$v_2.get_element().children(":first-child").children(":first-child").attribute("style","display: none;");$v_2.get_element().children(":first-child").children(":nth-child(2)").attribute("style","display: inline;");$v_2.get_element().addClass("deleteselected");$p1_0.preventDefault();$p1_0.stopImmediatePropagation()}});var $$t_E=this;this.$V_4.keyDown(function($p1_0){if($p1_0.which===13)if($v_2.get_element().hasClass("deleteselected")){$v_2.get_element().children(":first-child").get_jQueryObject().trigger("click");$p1_0.preventDefault();$p1_0.stopImmediatePropagation()}else{var $v_5=$$t_E.$V_4.children("a");$v_5.get_jQueryObject().trigger("click")}})}},get_results:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance(),$v_1=this.$q_4;!IsNull($v_1)&&$v_0.compileResults($v_1.get_results());for(var $v_2=0;$v_2<this.get_stepViews().get_count();$v_2++){var $v_3=this.get_stepViews().get_item($v_2);if(IsNull($v_3))continue;$v_0.compileResults($v_3.get_results())}return $v_0},$9J_4:function($p0){if(isNullOrEmptyString($p0))return;var $v_0=this.$4r_4.children(":first-child"),$v_1=null;switch($p0){case "SetVisibility":$v_1=new Mscrm.BusinessRules.Builders.SetVisibilityStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step());break;case "ShowMessage":$v_1=new Mscrm.BusinessRules.Builders.SetMessageStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step(),"ERROR");break;case "SetField":if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){if(!Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type||Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField.Type===10)$v_1=new Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step(),true);else $v_1=new Mscrm.BusinessRules.Builders.SetFormulaStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step());this.$1X_4.addClass("preventadd")}else $v_1=new Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step(),false);break;case "SetBusiness":$v_1=new Mscrm.BusinessRules.Builders.SetRequiredLevelStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step());break;case "SetReadWrite":$v_1=new Mscrm.BusinessRules.Builders.SetDisplayModeStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step());break;case "SetDefaultValue":$v_1=new Mscrm.BusinessRules.Builders.SetDefaultValueStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step());break;case "RunScript":$v_1=new Mscrm.BusinessRules.Builders.RunScriptStepBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step());break}this.$BU_4($v_1,$v_0)},$BU_4:function($p0,$p1){if($p0){var $v_0=$p0.buildView($p1);$v_0.set_isNewCreated(true);var $v_1=$v_0.get_dataContext();$v_1.set_parent(this.get_viewModel());$v_0.set_parent(this);$v_0.get_inlineView().goToEditState();this.get_viewModel().get_stepViewModels().add($v_1);this.get_stepViews().add($v_0);$v_0.get_element().get_jQueryObject().parent().removeClass("emptycollection");$v_0.setFocus();$v_0.get_element().get_jQueryObject().get(0).scrollIntoView()}},$BF_4:function(){var $v_0=this.$E_0.get_stepViews(),$v_1=$v_0.indexOf(this,0);if($v_1===$v_0.get_count()-1)this.$E_0.setFocusOnStep(null);else this.setFocusOnStep($v_0.get_item($v_1+1))},shiftFocus:function(currentStepView){var $v_0=currentStepView.get_parent();if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&!IsNull(currentStepView)&&$v_0.$1X_4.hasClass("preventadd")){$v_0.$BF_4();return}var $v_1=$v_0.get_stepViews(),$v_2=null,$v_3=$v_1.indexOf(currentStepView,0);if($v_3!==-1&&$v_3!==$v_1.get_count()-1)$v_2=$v_1.get_item($v_3+1);$v_0.setFocusOnStep($v_2)},setFocusOnStep:function(view){if(IsNull(view))this.$10_4.setFocus();else Mscrm.BusinessRules.Views.CompositeStepSectionView$2.prototype.setFocusOnStep.call(this,view)},setFocus:function(){var $v_0=this.$E_0.get_stepViews(),$v_1=$v_0.indexOf(this,0);if($v_1>0)this.$V_4.setFocus();else this.$V_4.children(".sectionheadercontainer").setFocus()},get_actionDropdownButton:function(){return this.$1X_4},$q_4:null,$1X_4:null,$13_4:null,$5l_4:null,$5m_4:null,$4r_4:null,$89_4:null,$V_4:null,$10_4:null,$4s_4:null,$1t_4:null};Mscrm.BusinessRules.Views.AddImageBehavior=function(addControl){this.$B_0=addControl;this.$18_0=addControl.children(":first-child");var $v_0=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/plussign.png"));this.$3W_0=$v_0.source;this.$3V_0=$v_0.cssClass;var $v_1=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hoverplussign.png"));this.$4S_0=$v_1.source;this.$4R_0=$v_1.cssClass;this.$2t_0=addControl.children(":nth-child(2)");this.$7Z_0="plussigntext";this.$7J_0="plussigntext hover"};Mscrm.BusinessRules.Views.AddImageBehavior.prototype={initialize:function(){if(!IsNull(this.$18_0)){var $$t_0=this;this.$B_0.bind("focus",function(){$$t_0.$18_0.attribute("src",$$t_0.$4S_0);$$t_0.$18_0.attribute("class",$$t_0.$4R_0);!IsNull($$t_0.$2t_0)&&$$t_0.$2t_0.attribute("class",$$t_0.$7J_0)});var $$t_1=this;this.$B_0.bind("blur",function(){$$t_1.$18_0.attribute("src",$$t_1.$3W_0);$$t_1.$18_0.attribute("class",$$t_1.$3V_0);!IsNull($$t_1.$2t_0)&&$$t_1.$2t_0.attribute("class",$$t_1.$7Z_0)});var $$t_2=this;this.$B_0.bind("mouseover",function(){$$t_2.$18_0.attribute("src",$$t_2.$4S_0);$$t_2.$18_0.attribute("class",$$t_2.$4R_0);!IsNull($$t_2.$2t_0)&&$$t_2.$2t_0.attribute("class",$$t_2.$7J_0)});var $$t_3=this;this.$B_0.bind("mouseout",function(){$$t_3.$18_0.attribute("src",$$t_3.$3W_0);$$t_3.$18_0.attribute("class",$$t_3.$3V_0);!IsNull($$t_3.$2t_0)&&$$t_3.$2t_0.attribute("class",$$t_3.$7Z_0)})}},unbindEvent:function(){if(!IsNull(this.$18_0)){this.$B_0.unbind("focus",null);this.$B_0.unbind("blur",null);this.$B_0.unbind("mouseover",null);this.$B_0.unbind("mouseout",null)}},setFocus:function(){!IsNull(this.$18_0)&&this.$B_0.setFocus()},dispose:function(){if(!IsNull(this.$B_0)){this.$B_0.unbind("mouseover",null);this.$B_0.unbind("mouseout",null);this.$B_0.unbind("focus",null);this.$B_0.unbind("blur",null);this.$B_0=null}},$B_0:null,$18_0:null,$3W_0:null,$4S_0:null,$3V_0:null,$4R_0:null,$2t_0:null,$7Z_0:null,$7J_0:null};Mscrm.BusinessRules.Views.ActionMenu=function($p0,$p1){this.$$d_$CO_0=Function.createDelegate(this,this.$CO_0);this.$13_0=$p0;var $v_0=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/plussign.png"));this.$3W_0=$v_0.source;this.$3V_0=$v_0.cssClass;var $v_1=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/hoverplussign.png"));this.$4S_0=$v_1.source;this.$4R_0=$v_1.cssClass;this.$1t_0=new Mscrm.MoreCommandsMenu("AddActionButton_"+$p1);this.$1t_0.set_position(Mscrm.Utilities.get_isLeftToRight()?"right":"left")};Mscrm.BusinessRules.Views.ActionMenu.prototype={showMenu:function(){this.$1t_0.processAndShowMenu();this.$13_0.attribute("src",this.$4S_0);this.$13_0.attribute("class",this.$4R_0);this.$1t_0.get_dialog().bind("flyout-closed",this.$$d_$CO_0);this.$13_0.unbind("mouseout",null)},$CO_0:function($p0){this.$13_0.attribute("src",this.$3W_0);this.$13_0.attribute("class",this.$3V_0);this.$Dy_0()},$Dy_0:function(){var $$t_0=this;this.$13_0.mouseOut(function(){$$t_0.$13_0.attribute("src",$$t_0.$3W_0);$$t_0.$13_0.attribute("class",$$t_0.$3V_0)});this.$13_0.attribute("src",this.$3W_0);this.$13_0.attribute("class",this.$3V_0)},dispose:function(){if(!IsNull(this.$13_0))this.$1t_0.get_dialog()&&this.$1t_0.get_dialog().unbind("flyout-closed",this.$$d_$CO_0)},$1t_0:null,$3W_0:null,$4S_0:null,$3V_0:null,$4R_0:null,$13_0:null};Mscrm.BusinessRules.Views.ConditionStepSectionView=function($p0){this.$$d_$9i_4=Function.createDelegate(this,this.$9i_4);Mscrm.BusinessRules.Views.ConditionStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.ConditionStepSectionView.prototype={initialize:function(){Mscrm.BusinessRules.Views.CompositeStepSectionView$2.prototype.initialize.call(this);this.$DI_4();this.$9t_4()},$DI_4:function(){this.$B_4=this.get_jQueryProxy().selectElement("#AddExpressionButton");if(this.$B_4&&this.$B_4.get_length()>0){this.$B_4.click(this.$$d_$9i_4);this.$4v_4=this.$B_4.children("img");this.$5o_4=this.get_jQueryProxy().selectInElement("#AddExpressionText",this.$B_4);var $$t_1=this;this.$B_4.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_1.$9i_4($p1_0)});if(!IsNull(this.$4v_4)){this.$10_4=new Mscrm.BusinessRules.Views.AddImageBehavior(this.$B_4);this.$10_4.initialize()}}},get_results:function(){for(var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance(),$v_1=0;$v_1<this.get_stepViews().get_count();$v_1++){var $v_2=this.get_stepViews().get_item($v_1);if(IsNull($v_2))continue;$v_0.compileResults($v_2.get_results())}return $v_0},setFocusOnStep:function($p0){if(IsNull($p0))this.$10_4.setFocus();else Mscrm.BusinessRules.Views.CompositeStepSectionView$2.prototype.setFocusOnStep.call(this,$p0)},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$4v_4)){this.$4v_4.unbind("click",null);this.$4v_4.unbind("keydown",null);if(!IsNull(this.$5o_4)){this.$5o_4.unbind("click",null);this.$5o_4.unbind("keydown",null)}this.$10_4.dispose()}Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},$9i_4:function($p0){var $v_0=new Mscrm.BusinessRules.Builders.ConditionBranchStepSectionViewViewBuilder(this.get_viewModel().get_step().get_workflow(),this.get_viewModel().get_step()),$v_1=$v_0.$C0_0(this.$1_1);$v_1.set_isNewCreated(true);$v_1.set_parent(this);this.get_viewModel().get_stepViewModels().add($v_1.get_dataContext());this.get_stepViews().add($v_1);$v_1.initialize();$v_1.get_element().get_jQueryObject().parent().removeClass("emptycollection");this.setFocusOnStep($v_1);$v_1.get_element().get_jQueryObject().get(0).scrollIntoView();this.$9t_4()},$9t_4:function(){if(!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())if(this.get_stepViews().get_count()<10)if(this.get_stepViews().last().get_dataContext().hasConditionExpressions())this.$B_4.removeClass("preventadd");else this.$B_4.addClass("preventadd");else this.$B_4.addClass("preventadd");else if(this.get_stepViews().last().get_dataContext().hasConditionExpressions())this.$B_4.removeClass("preventadd");else this.$B_4.addClass("preventadd")},$B_4:null,$4v_4:null,$5o_4:null,$10_4:null};Mscrm.BusinessRules.Views.DescriptionSectionView=function($p0){Mscrm.BusinessRules.Views.DescriptionSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.DescriptionSectionView.prototype={get_dataContext:function(){return this.$0_2},set_dataContext:function($p0){if(IsNull(this.$0_2)&&!IsNull($p0)){Mscrm.BusinessRules.Views.SectionView.prototype.set_dataContext.call(this,$p0);this.$0_2=$p0}return $p0},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&this.$Da_2()},dispose:function(){if(this.$9_0)return;this.$2D_2.unbind("click",null);Mscrm.BusinessRules.Views.SectionView.prototype.dispose.call(this)},$Da_2:function(){this.$2D_2=this.get_jQueryProxy().selectElement("#descriptionsection_chrome");this.$2D_2.attribute("tabindex","0");this.$6n_2=this.$2D_2.children(":first-child").children(":first-child").get_text();if(isNullOrEmptyString(this.$6n_2)||this.$6n_2==="--")this.$0_2.set_description(window.LOCID_BUSINESSRULE_DESCRIPTION);else this.$0_2.set_description(this.$6n_2);this.$7u_2="normal";if(Mscrm.BusinessRules.BusinessRuleInitializer.$32.get_readOnly())this.$7u_2="deactivated";this.$2E_2=this.get_inlineEditControlMediator().createMultilineTextControl(this.$2D_2,"pbldescription",200,{value:this.$0_2.get_description()},Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),this.$7u_2);this.$2E_2.get_dataContext().set_emptyValuePlaceholder(window.LOCID_BUSINESSRULE_DESCRIPTION);var $$t_1=this.$0_2,$$t_2=this.$0_2;this.get_bindingsMediator().addTextInputToStringValueBinding(new Mscrm.Proxies.JQueryObjectProxy(this.$2E_2.get_editView().get_editElement()),this.$0_2,"descriptionproperty",$$t_1.$$d_getDescriptionDelegate||($$t_1.$$d_getDescriptionDelegate=Function.createDelegate($$t_1,$$t_1.getDescriptionDelegate)),$$t_2.$$d_setDescriptionDelegate||($$t_2.$$d_setDescriptionDelegate=Function.createDelegate($$t_2,$$t_2.setDescriptionDelegate)));var $$t_3=this;this.$2D_2.click(function($p1_0){$$t_3.$0_2.get_description()===window.LOCID_BUSINESSRULE_DESCRIPTION&&$$t_3.$9u_2()})},$9u_2:function(){this.$0_2.set_description("");var $$t_0=this;window.setTimeout(function(){$$t_0.$2E_2.setFocus()},0)},$2D_2:null,$0_2:null,$2E_2:null,$7u_2:null,$6n_2:null};Mscrm.BusinessRules.Views.RootStepSectionView=function($p0){Mscrm.BusinessRules.Views.RootStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.RootStepSectionView.prototype={get_results:function(){for(var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance(),$v_1=0;$v_1<this.get_stepViews().get_count();$v_1++){var $v_2=this.get_stepViews().get_item($v_1);if(IsNull($v_2))continue;$v_0.compileResults($v_2.get_results())}return $v_0}};Mscrm.BusinessRules.Views.SectionView=function(element){Mscrm.BusinessRules.Views.SectionView.initializeBase(this);this.$1_1=element};Mscrm.BusinessRules.Views.SectionView.prototype={get_dataContext:function(){return this.$2W_1},set_dataContext:function(value){this.$2W_1=value;return value},get_element:function(){return this.$1_1},initialize:function(){this.$8v_1()},dispose:function(){if(this.$9_0)return;IsNull(this.$7H_1)&&this.$7H_1.unbind(null,null)},setFocus:function(){},$8v_1:function(){var $v_0=this.$1_1.getAttribute("data-headerid");!isNullOrEmptyString($v_0)&&this.attachForCollapseSectionEvent(this.get_jQueryProxy().selectElement("#"+$v_0),this.get_jQueryProxy().selectElement("#"+this.$1_1.getAttribute("data-bodyid")),this.get_jQueryProxy().selectElement("#"+this.$1_1.getAttribute("data-imageid")))},attachForCollapseMultipleSectionEvent:function(sectionHeader,sectionBodyArray,actionArrowImage){this.$7H_1=sectionHeader;var $v_0=sectionHeader.children("a"),$$t_F=this;$v_0.click(function($p1_0){if(sectionBodyArray[0]&&actionArrowImage){if(sectionBodyArray[0].hasClass("hidesection")){for(var $$arr_5=sectionBodyArray,$$len_6=$$arr_5.length,$$idx_7=0;$$idx_7<$$len_6;++$$idx_7){var $v_2=$$arr_5[$$idx_7];$v_2&&$v_2.removeClass("hidesection")}var $v_1=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create(window.CDNURL+"/_imgs/businessruleeditor/section_down.png"));actionArrowImage.attribute("src",$v_1.source);actionArrowImage.attribute("class",$v_1.cssClass)}else{for(var $$arr_A=sectionBodyArray,$$len_B=$$arr_A.length,$$idx_C=0;$$idx_C<$$len_B;++$$idx_C){var $v_4=$$arr_A[$$idx_C];$v_4&&$v_4.addClass("hidesection")}var $v_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create(window.CDNURL+"/_imgs/businessruleeditor/section_right.png"));actionArrowImage.attribute("src",$v_3.source);actionArrowImage.attribute("class",$v_3.cssClass);if(Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version>8)actionArrowImage.addClass("arrowcollapsedimagestyle");else actionArrowImage.addClass("arrowcollapsedimage")}window.LOCID_UI_DIR==="RTL"&&actionArrowImage.addClass("ms-crm-FlipHorizontal")}})},attachForCollapseSectionEvent:function(sectionHeader,sectionBody,actionArrowImage){var $v_0=new Array(1);$v_0[0]=sectionBody;this.attachForCollapseMultipleSectionEvent(sectionHeader,$v_0,actionArrowImage)},shiftFocus:function(currentStepView){},$2W_1:null,$1_1:null,$7H_1:null};Mscrm.BusinessRules.Views.SetDisplayModeStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetDisplayModeStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetDisplayModeStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetDisplayModeStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0}};Mscrm.BusinessRules.Views.InlineSetDisplayModeStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetDisplayModeStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetDisplayModeStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "ControlIdProperty":case "IsReadOnlyProperty":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},$2s_3:function(){var $v_0=null;if(this.get_getEditViewObject().get_attributeSupportsRelatedEntities())$v_0=this.get_viewModel().$P_3.get_displayValue();else $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.get_viewModel().get_controlId());var $v_1=this.get_viewModel().get_isReadOnly()?window.LOCID_BUSINESSRULE_READ_ONLY:window.LOCID_BUSINESSRULE_READWRITE,$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getReadDisplayFormat()),CrmEncodeDecode.CrmHtmlEncode($v_1),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)));this.get_stepValueContent().html($v_2)},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_viewModel().get_step().apply($v_0);this.$C_3=$v_0._results},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView(this)}};Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView.$16++;Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView.initializeBase(this,[$p0]);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.$2_3=$v_0.getEditViewModel()}};Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView.prototype={get_isValid:function(){return true},get_attributeSupportsRelatedEntities:function(){return this.get_$N_3().get_isAttributeOperand()},get_$N_3:function(){return this.get_inlineView().get_viewModel()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.get_$N_3().set_sourceEntity(this.getUpdatedSourceEntity($v_0,this.get_$N_3().get_step().get_workflow()));this.get_$N_3().set_controlId($v_0.$1B_2)}else this.get_$N_3().set_controlId(this.$1Q_3.$0_1.get_selectedFieldLogicalName());this.get_$N_3().set_isReadOnly(Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$79_3).toString()==="0");this.get_editElementWrapper().trigger("state-commit")},confirm:function(){if(this.get_isValid()){this.get_attributeSupportsRelatedEntities()&&this.$2_3.confirm();Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)}},discard:function($p0){if(this.get_attributeSupportsRelatedEntities())this.$2_3.discard();else this.$1Q_3.$0_1.set_selectedFieldLogicalName(this.get_inlineView().get_viewModel().get_controlId());var $v_0=this.get_$N_3().get_isReadOnly()?0:1;Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$79_3,$v_0);Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format(this.get_attributeSupportsRelatedEntities()?this.$3q_3:this.$1I_3,this.$K_3,"editstepcontainer","sectionheader","sectioncell","celllabel","cellvalue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SETREADWRITE),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_STATUS),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_STATUS),"sectioncellforrelatedentity"))},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);if(this.get_attributeSupportsRelatedEntities())this.$P_3=this.initAttributeOperand(String.format("stepFieldContainer{0}",this.$K_3),this.$2_3,this.get_$N_3().$P_3);else this.$1Q_3=Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.initFieldControl.call(this,"#stepFieldContainer"+this.$K_3,this.get_$N_3().get_controlId());var $v_0=$P_CRM("#stepDisplayModeContainer"+this.$K_3),$v_1=this.get_$N_3().get_isReadOnly(),$v_2=$v_1?0:1;this.$79_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().DisplayModePicklistOptions,$v_2.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)},$1Q_3:null,$79_3:null,$2_3:null,$P_3:null,$3q_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div id='stepFieldContainer{0}' class='{11}'>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='stepDisplayModeContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>",$1I_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{9}'>{7}</div>\r\n\t\t<div id='stepFieldContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='stepDisplayModeContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.SetRequiredLevelStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetRequiredLevelStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetRequiredLevelStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetRequiredLevelStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0}};Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "ControlIdProperty":case "RequiredLevel":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_viewModel().get_step().apply($v_0);this.$C_3=$v_0._results},$2s_3:function(){var $v_0=null;if(this.get_getEditViewObject().get_attributeSupportsRelatedEntities())$v_0=this.get_viewModel().$P_3.get_displayValue();else $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.get_viewModel().get_controlId());var $v_1=this.get_viewModel().get_requiredLevel()===1?window.LOCID_BUSINESSRULE_BIZREQUIRED:window.LOCID_BUSINESSRULE_NOBIZREQUIRED,$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)));this.get_stepValueContent().html($v_2)},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView(this)}};Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView.$16++;Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView.initializeBase(this,[$p0]);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.$2_3=$v_0.getEditViewModel()}};Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView.prototype={get_isValid:function(){return true},get_attributeSupportsRelatedEntities:function(){return this.get_$N_3().get_isAttributeOperand()},get_$N_3:function(){return this.get_inlineView().get_viewModel()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.get_$N_3().set_sourceEntity(this.getUpdatedSourceEntity($v_0,this.get_$N_3().get_step().get_workflow()));this.get_$N_3().set_controlId($v_0.$1B_2)}else this.get_$N_3().set_controlId(this.$1Q_3.$0_1.get_selectedFieldLogicalName());this.get_$N_3().set_requiredLevel(Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$7e_3).toString()==="0"?0:1);this.get_editElementWrapper().trigger("state-commit")},confirm:function(){if(this.get_isValid()){this.get_attributeSupportsRelatedEntities()&&this.$2_3.confirm();Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)}},discard:function($p0){if(this.get_attributeSupportsRelatedEntities())this.$2_3.discard();else this.$1Q_3.$0_1.set_selectedFieldLogicalName(this.get_$N_3().get_controlId());var $v_0=this.$AL_3(),$v_1=$v_0===0?0:1;Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$7e_3,$v_1.toString());Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format(this.get_attributeSupportsRelatedEntities()?this.$3q_3:this.$1I_3,this.$K_3,"editstepcontainer","sectionheader","sectioncell","celllabel","cellvalue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SETREQUIRED),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_STATUS),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_STATUS),"sectioncellforrelatedentity"))},$AL_3:function(){var $v_0=this.get_inlineView().get_viewModel().get_requiredLevel();return $v_0=parseInt($v_0)},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);if(this.get_attributeSupportsRelatedEntities())this.$P_3=this.initAttributeOperand(String.format("stepRequiredFieldContainer{0}",this.$K_3),this.$2_3,this.get_$N_3().$P_3);else this.$1Q_3=Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.initFieldControl.call(this,"#stepRequiredFieldContainer"+this.$K_3,this.get_$N_3().get_controlId());var $v_0=$P_CRM("#stepRequiredLevelContainer"+this.$K_3),$v_1=this.$AL_3(),$v_2=$v_1===0?0:1;this.$7e_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RequiredLevelPicklistOptions,$v_2.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)},$1Q_3:null,$7e_3:null,$2_3:null,$P_3:null,$3q_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div id='stepRequiredFieldContainer{0}' class='{11}'>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='stepRequiredLevelContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>",$1I_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{9}'>{7}</div>\r\n\t\t<div id='stepRequiredFieldContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='stepRequiredLevelContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.SetVisibilityStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetVisibilityStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetVisibilityStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetVisibilityStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().$C_3},set_results:function($p0){this.get_inlineView().$C_3=$p0;return $p0}};Mscrm.BusinessRules.Views.InlineSetVisibilityStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetVisibilityStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetVisibilityStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "ControlIdProperty":case "IsVisibleProperty":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_viewModel().get_step().apply($v_0);this.$C_3=$v_0._results},$2s_3:function(){var $v_0=null;if(this.get_getEditViewObject().get_attributeSupportsRelatedEntities())$v_0=this.get_viewModel().$P_3.get_displayValue();else $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.get_viewModel().get_controlId());var $v_1=this.get_viewModel().get_isVisible()?window.LOCID_BUSINESSRULE_SHOW:window.LOCID_BUSINESSRULE_HIDE,$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getVisibleFormat()),CrmEncodeDecode.CrmHtmlEncode($v_1),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)));this.get_stepValueContent().html($v_2)},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView(this)}};Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView.$16++;Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView.initializeBase(this,[$p0]);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.$2_3=$v_0.getEditViewModel()}};Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView.prototype={get_isValid:function(){return true},get_attributeSupportsRelatedEntities:function(){return this.get_$N_3().get_isAttributeOperand()},get_$N_3:function(){return this.get_inlineView().get_viewModel()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.get_$N_3().set_sourceEntity(this.getUpdatedSourceEntity($v_0,this.get_$N_3().get_step().get_workflow()));this.get_$N_3().set_controlId($v_0.$1B_2)}else this.get_$N_3().set_controlId(this.$1Q_3.$0_1.get_selectedFieldLogicalName());this.get_$N_3().set_isVisible(Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$7q_3).toString()==="0"?true:false);this.get_editElementWrapper().trigger("state-commit")},confirm:function(){if(this.get_isValid()){this.get_attributeSupportsRelatedEntities()&&this.$2_3.confirm();Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)}},discard:function($p0){if(this.get_attributeSupportsRelatedEntities())this.$2_3.discard();else this.$1Q_3.$0_1.set_selectedFieldLogicalName(this.get_$N_3().get_controlId());var $v_0=this.get_$N_3().get_isVisible()?0:1;Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$7q_3,$v_0);Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format(this.get_attributeSupportsRelatedEntities()?this.$3q_3:this.$1I_3,this.$K_3,"editstepcontainer","sectionheader","sectioncell","celllabel","cellvalue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SETSHOWHIDE),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_STATUS),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_STATUS),"sectioncellforrelatedentity"))},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);if(this.get_attributeSupportsRelatedEntities())this.$P_3=this.initAttributeOperand(String.format("stepVisibilityFieldContainer{0}",this.$K_3),this.$2_3,this.get_$N_3().$P_3);else this.$1Q_3=this.initFieldControl("#stepVisibilityFieldContainer"+this.$K_3,this.get_$N_3().get_controlId());var $v_0=$P_CRM("#stepVisibilityContainer"+this.$K_3),$v_1=this.get_inlineView().get_viewModel().get_isVisible(),$v_2=$v_1?0:1;this.$7q_3=this.get_inlineEditControlMediator().createAutoCompleteControl(new Mscrm.Proxies.JQueryObjectProxy($v_0),$v_0[0].id,Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().VisibilityPicklistOptions,$v_2.toString(),Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)},$1Q_3:null,$7q_3:null,$2_3:null,$P_3:null,$3q_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div id='stepVisibilityFieldContainer{0}' class='{11}'>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='stepVisibilityContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>",$1I_3:"<div class='{1}'>\r\n\t<div class='{2}'>{6}</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{9}'>{7}</div>\r\n\t\t<div id='stepVisibilityFieldContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class='{3}'>\r\n\t\t<div class='{4}' title='{10}'>{8}</div>\r\n\t\t<div id='stepVisibilityContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.SetMessageStepSectionView=function($p0){Mscrm.BusinessRules.Views.SetMessageStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.SetMessageStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getSetMessageStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0}};Mscrm.BusinessRules.Views.InlineSetMessageStepView=function($p0){Mscrm.BusinessRules.Views.InlineSetMessageStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineSetMessageStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "ControlIdProperty":case "MessageProperty":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_viewModel().get_step().apply($v_0);this.$C_3=$v_0._results},$2s_3:function(){var $v_0=null;if(this.get_getEditViewObject().get_attributeSupportsRelatedEntities())$v_0=this.get_viewModel().$P_3.get_displayValue();else $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),this.get_viewModel().get_controlId());var $v_1=CrmEncodeDecode.CrmHtmlEncode(this.get_viewModel().get_message()),$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0)),String.format('<b>"{0}"</b>',$v_1));this.get_stepValueContent().html($v_2)},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineSetMessageStepEditView(this)}};Mscrm.BusinessRules.Views.InlineSetMessageStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineSetMessageStepEditView.$16++;Mscrm.BusinessRules.Views.InlineSetMessageStepEditView.initializeBase(this,[$p0]);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.$2_3=$v_0.getEditViewModel()}};Mscrm.BusinessRules.Views.InlineSetMessageStepEditView.prototype={get_isValid:function(){return (new Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator(this.$3T_3)).get_isValid()},get_attributeSupportsRelatedEntities:function(){return this.get_$N_3().get_isAttributeOperand()},get_$N_3:function(){return this.get_inlineView().get_viewModel()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);if(this.get_attributeSupportsRelatedEntities()){var $v_0=this.get_$N_3().$P_3;this.get_$N_3().set_sourceEntity(this.getUpdatedSourceEntity($v_0,this.get_$N_3().get_step().get_workflow()));this.get_$N_3().set_controlId($v_0.$1B_2)}else this.get_$N_3().set_controlId(this.$1Q_3.$0_1.get_selectedFieldLogicalName());this.get_$N_3().set_message(Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$3T_3).toString());this.get_editElementWrapper().trigger("state-commit")},confirm:function(){this.$3T_3.blur();if(this.get_isValid()){this.get_attributeSupportsRelatedEntities()&&this.$2_3.confirm();Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)}},discard:function($p0){if(this.get_attributeSupportsRelatedEntities())this.$2_3.discard();else this.$1Q_3.$0_1.set_selectedFieldLogicalName(this.get_$N_3().get_controlId());var $v_0=this.get_$N_3().get_message();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$3T_3,$v_0);Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format(this.get_attributeSupportsRelatedEntities()?this.$3q_3:this.$1I_3,this.$K_3,"editstepcontainer","sectionheader","sectioncell","celllabel","cellvalue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SETMESSAGE),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_MESSAGE),"sectioncellsetmessagefieldcontainer","sectioncellsetmessagecontainer","cellvaluesetmessagecontainer","editsetmessagecontainer","setmessageheader",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_FIELD),CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_MESSAGE),"sectioncellsetmessagefieldcontainerforrelatedentity","editsetmessagecontainerforrelatedentity"))},$BL_3:function($p0){var $v_0=$P_CRM("#stepMessageContainer"+$p0+"_i");if($v_0){$v_0.height("59px");$v_0.width("100%");$v_0.addClass("setmessagetextarea")}},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);if(this.get_attributeSupportsRelatedEntities())this.$P_3=this.initAttributeOperand(String.format("stepMessageFieldContainer{0}",this.$K_3),this.$2_3,this.get_$N_3().$P_3);else this.$1Q_3=Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.initFieldControl.call(this,"#stepMessageFieldContainer"+this.$K_3,this.get_$N_3().get_controlId());var $v_0=this.get_jQueryProxy().selectElement("#stepMessageContainer"+this.$K_3),$v_1=this.get_$N_3().get_message(),$v_2={};$v_2["value"]=CrmEncodeDecode.CrmHtmlEncode(CrmEncodeDecode.CrmHtmlEncode($v_1));this.$3T_3=this.get_inlineEditControlMediator().createMultilineTextControl($v_0,$v_0.get_item(0).id,2e3,$v_2,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit");this.$BL_3(this.$K_3);this.$3T_3.get_dataContext().set_labelValue(window.LOCID_BUSINESSRULE_MESSAGE);var $v_3=$find(this.$3T_3.get_dataContext().get_attribute().get_dataAttributeId());$v_3.get_controls().add(this.$3T_3)},$3T_3:null,$P_3:null,$1Q_3:null,$2_3:null,$3q_3:"<div class='{1}'>\r\n\t<div class='{2} {13}'>{6}</div>\r\n\t<div id='stepMessageFieldContainer{0}' class='{3} {16}'>\r\n\t</div>\r\n\t<div class='{17}'>\r\n\t\t<div class='{3} {10}'>\r\n\t\t\t<div class='{4}' title='{15}'>{8}</div>\r\n\t\t\t<div id='stepMessageContainer{0}' class='{5} {11}'>\r\n\t\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>",$1I_3:"<div class='{1}'>\r\n\t<div class='{2} {13}'>{6}</div>\r\n\t<div class='{3} {9}'>\r\n\t\t<div class='{4}' title='{14}'>{7}</div>\r\n\t\t<div id='stepMessageFieldContainer{0}' class='{5}'>\r\n\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class='{12}'>\r\n\t\t<div class='{3} {10}'>\r\n\t\t\t<div class='{4}' title='{15}'>{8}</div>\r\n\t\t\t<div id='stepMessageContainer{0}' class='{5} {11}'>\r\n\t\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.RunScriptStepSectionView=function($p0){Mscrm.BusinessRules.Views.RunScriptStepSectionView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.RunScriptStepSectionView.prototype={initialize:function(){this.set_inlineView(Mscrm.BusinessRules.BusinessRuleInlineEditFactory.getRunScriptStepInlineView(this.$1_1.children(":first-child").get_jQueryObject(),this.get_viewModel()));this.get_inlineView().set_parent(this);this.get_inlineView().renderForRead();this.get_inlineView().generateResults()},dispose:function(){if(this.$9_0)return;this.get_inlineView().dispose();this.set_inlineView(null)},generateResults:function(){this.get_inlineView().generateResults()},get_results:function(){return this.get_inlineView().get_results()},set_results:function($p0){this.get_inlineView().set_results($p0);return $p0}};Mscrm.BusinessRules.Views.InlineRunScriptStepView=function($p0){Mscrm.BusinessRules.Views.InlineRunScriptStepView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineRunScriptStepView.prototype={$C_3:null,get_results:function(){return this.$C_3},set_results:function($p0){this.$C_3=$p0;return $p0},handleModelToViewBinding:function($p0,$p1){Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.prototype.handleModelToViewBinding.call(this,$p0,$p1);switch($p1.get_propertyName()){case "JavascriptProperty":this.$2s_3();this.generateResults();Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar();break}},generateResults:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance();this.get_viewModel().get_step().apply($v_0);this.$C_3=$v_0._results},$2s_3:function(){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.$1L(this.get_viewModel().getReadDisplayFormat());this.get_stepValueContent().html($v_0)},get_getEditViewObject:function(){return new Mscrm.BusinessRules.Views.InlineRunScriptStepEditView(this)}};Mscrm.BusinessRules.Views.InlineRunScriptStepEditView=function($p0){this.$K_3=Mscrm.BusinessRules.Views.InlineRunScriptStepEditView.$16++;Mscrm.BusinessRules.Views.InlineRunScriptStepEditView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.InlineRunScriptStepEditView.prototype={get_isValid:function(){return (new Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator(this.$3R_3)).get_isValid()},updateAttribute:function(){Mscrm.InlineEditViewBase.prototype.updateAttribute.call(this);this.get_inlineView().get_viewModel().set_javascript(Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.getInlineFieldValue(this.$3R_3).toString());this.get_editElementWrapper().trigger("state-commit")},confirm:function(){this.$3R_3.blur();this.get_isValid()&&Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.confirm.call(this)},discard:function($p0){var $v_0=this.get_inlineView().get_viewModel().get_javascript();Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.resetInlineFieldValue(this.$3R_3,$v_0);Mscrm.BusinessRules.Views.InlineStepEditViewBase.prototype.discard.call(this,$p0)},createStepHtml:function($p0){$p0.append(String.format(this.$1I_3,this.$K_3,"editstepcontainer","sectionheader","celllabel","cellvalue",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SCRIPTMESSAGE),CrmEncodeDecode.CrmHtmlEncode(window.LOCID_BUSINESSRULE_SCRIPTSOURCE),"cellvaluesetmessagecontainer","editrunscriptcontainer","setmessageheader",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_BUSINESSRULE_SCRIPTSOURCE),"runscriptsectioncell","runscripttextareawrapper"))},$BL_3:function($p0){var $v_0=$P_CRM("#stepJavascriptContainer"+$p0+"_i");if($v_0){$v_0.addClass("setmessagetextarea");$v_0.height("300px");$v_0.width("99%")}},createAndAppendEditElementToDom:function(){Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.prototype.createAndAppendEditElementToDom.call(this);var $v_0=this.get_jQueryProxy().selectElement("#stepJavascriptContainer"+this.$K_3),$v_1=this.get_inlineView().get_viewModel().get_javascript(),$v_2={};$v_2["value"]=CrmEncodeDecode.CrmHtmlEncode(CrmEncodeDecode.CrmHtmlEncode($v_1));this.$3R_3=this.get_inlineEditControlMediator().createMultilineTextControl($v_0,$v_0.get_item(0).id,5e4,$v_2,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),"alwaysedit");this.$BL_3(this.$K_3);this.$3R_3.get_dataContext().set_labelValue(window.LOCID_BUSINESSRULE_SCRIPTSOURCE);var $v_3=$find(this.$3R_3.get_dataContext().get_attribute().get_dataAttributeId());$v_3.get_controls().add(this.$3R_3)},$3R_3:null,$1I_3:"<div class='{1}'>\r\n\t<div class='{2} {9}'>{5}</div>\r\n\t<div class='{8}'>\r\n\t\t<div id='sectionCell{0}' class='{11}'>\r\n\t\t\t<div class='{3}' title='{10}'>{6}</div>\r\n\t\t\t<div id='stepJavascriptContainer{0}' class='{4} {7} {12}'>\r\n\t\t\t\t<div class='ms-crm-Inline-Value'></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"};Mscrm.BusinessRules.Views.StepSectionView$2=function(element){Mscrm.BusinessRules.Views.StepSectionView$2.$$(this.$$gta["Mscrm.BusinessRules.Views.StepSectionView$2"]["TViewModel"],this.$$gta["Mscrm.BusinessRules.Views.StepSectionView$2"]["TModel"]).initializeBase(this,[element])};Mscrm.BusinessRules.Views.StepSectionView$2.$$=function(TViewModel,TModel){var $$cn="StepSectionView$2$"+TViewModel.getName().replace(/\./g,"_")+"$"+TModel.getName().replace(/\./g,"_");if(!Mscrm.BusinessRules.Views[$$cn]){var $$ccr=Mscrm.BusinessRules.Views[$$cn]=function(){(this.$$gta=this.$$gta||{})["Mscrm.BusinessRules.Views.StepSectionView$2"]={TViewModel:TViewModel,TModel:TModel};for(var $v_0=[],$v_1=0;$v_1<arguments.length;++$v_1)$v_0[$v_1]=arguments[$v_1];Mscrm.BusinessRules.Views.StepSectionView$2.apply(this,$v_0)};$$ccr.registerClass("Mscrm.BusinessRules.Views."+$$cn,Mscrm.BusinessRules.Views.SectionView,Mscrm.BusinessRules.Views.IStepSectionView,Mscrm.BusinessRules.Views.ISectionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);var $$dict_6=Mscrm.BusinessRules.Views.StepSectionView$2.prototype;for(var $$key_7 in $$dict_6){var $$entry_8={key:$$key_7,value:$$dict_6[$$key_7]};if("constructor"!==$$entry_8.key)$$ccr.prototype[$$entry_8.key]=$$entry_8.value}}return Mscrm.BusinessRules.Views[$$cn]};Mscrm.BusinessRules.Views.StepSectionView$2.prototype={get_dataContext:function(){return this.$0_2},set_dataContext:function(value){if(IsNull(this.$0_2)&&!IsNull(value)){Mscrm.BusinessRules.Views.SectionView.prototype.set_dataContext.call(this,value);this.$0_2=value}return value},get_inlineView:function(){return this.$1c_2},set_inlineView:function(value){this.$1c_2=value;return value},get_isNewCreated:function(){return this.$4U_2},set_isNewCreated:function(value){this.$4U_2=value;return value},setFocus:function(){this.$1c_2.setFocus()},get_viewModel:function(){return this.$0_2},$0_2:null,$1c_2:null,$4U_2:false};Mscrm.BusinessRules.Views.StepSectionViewFactory=function(){};Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection=function(viewModel,element){if(Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetAttributeValueStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetDisplayModeStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetFormulaStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetDefaultValueStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetMessageStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.RunScriptStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetRequiredLevelStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.SetVisibilityStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.ConditionBranchStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.ConditionStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.IRootStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.RootStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.IDescriptionSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.DescriptionSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.RollupRuleStepSectionView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.TargetEntityStepView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.TargetLinkedEntityStepView(element),viewModel);if(Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.isInstanceOfType(viewModel))return Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V(new Mscrm.BusinessRules.Views.AggregationStepSectionView(element),viewModel);throw Mscrm.BusinessRules.SharedMethods.createException("Unsupported Exception")};Mscrm.BusinessRules.Views.StepSectionViewFactory.$1V=function($p0,$p1){$p0.set_dataContext($p1);$p0.initialize();return $p0};Mscrm.BusinessRules.Views.EditExpressionToolBarView=function($p0){Mscrm.BusinessRules.Views.EditExpressionToolBarView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.EditExpressionToolBarView.prototype={get_closeImage:function(){if(IsNull(this.$27_3))this.$27_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_cancel_default_24.png"));return this.$27_3},get_hoverCloseImage:function(){if(IsNull(this.$2J_3))this.$2J_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_cancel_hover_24.png"));return this.$2J_3},get_selectedCloseImage:function(){if(IsNull(this.$2O_3))this.$2O_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_cancel_select_24.png"));return this.$2O_3},get_doneImage:function(){if(IsNull(this.$2F_3))this.$2F_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_ok_default_24.png"));return this.$2F_3},get_hoverDoneImage:function(){if(IsNull(this.$2K_3))this.$2K_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_ok_hover_24.png"));return this.$2K_3},get_selectedDoneImage:function(){if(IsNull(this.$2P_3))this.$2P_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/conditionbutton_ok_select_24.png"));return this.$2P_3},$27_3:null,$2J_3:null,$2O_3:null,$2F_3:null,$2K_3:null,$2P_3:null};Mscrm.BusinessRules.Views.ReadToolBarButtonView=function(){this.$$d_$E6_1=Function.createDelegate(this,this.$E6_1);this.$$d_$E5_1=Function.createDelegate(this,this.$E5_1);Mscrm.BusinessRules.Views.ReadToolBarButtonView.initializeBase(this)};Mscrm.BusinessRules.Views.ReadToolBarButtonView.prototype={$1_1:null,$3v_1:null,$3N_1:null,$0_1:null,get_element:function(){return this.$1_1},set_element:function($p0){this.$1_1=$p0;return $p0},get_icon:function(){return this.$3v_1},set_icon:function($p0){this.$3v_1=$p0;return $p0},get_hoverIcon:function(){return this.$3N_1},set_hoverIcon:function($p0){this.$3N_1=$p0;return $p0},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$3v_1))this.$3v_1=null;if(!IsNull(this.$3N_1))this.$3N_1=null;if(!IsNull(this.$1_1)){this.$1_1.unbind("mouseenter",this.$$d_$E5_1);this.$1_1.unbind("mouseleave",this.$$d_$E6_1);this.$1_1=null}if(!IsNull(this.$0_1)){this.$0_1.dispose();this.$0_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},handleModelToViewBinding:function($p0){Mscrm.BusinessRules.Views.View.prototype.handleModelToViewBinding.call(this,$p0);switch($p0){case "Selected":this.$D8_1();break}},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$1_1.attribute("id",this.$0_1.get_id());this.$1_1.attribute("title",this.$0_1.get_titleText());this.$1_1.append(this.$3v_1);this.$1_1.append(this.$3N_1);this.$3N_1.hide();this.get_bindingsMediator().addClickBinding(this.$1_1,this.$0_1.get_command());this.$1_1.bind("mouseenter",this.$$d_$E5_1);this.$1_1.bind("mouseleave",this.$$d_$E6_1)},get_dataContext:function(){return this.$0_1},set_dataContext:function($p0){this.$0_1=$p0;return $p0},$D8_1:function(){if(this.$0_1.get_selected()){this.$1_1.attribute("aria-selected","true");this.$BI_1()}else{this.$1_1.removeAttribute("aria-selected");this.$BJ_1()}},$E6_1:function($p0){this.$BJ_1()},$E5_1:function($p0){this.$BI_1()},$BJ_1:function(){if(!this.$0_1.get_selected()){this.$3N_1.hide();this.$3v_1.show()}},$BI_1:function(){this.$3v_1.hide();this.$3N_1.show()}};Mscrm.BusinessRules.Views.ReadToolBarView=function(){Mscrm.BusinessRules.Views.ReadToolBarView.initializeBase(this)};Mscrm.BusinessRules.Views.ReadToolBarView.prototype={$0_1:null,$1_1:null,$3F_1:null,$5O_1:null,dispose:function(){if(this.$9_0)return;if(!IsNull(this.$3F_1)){for(var $v_0=0;$v_0<this.$3F_1.get_count();$v_0++){var $v_1=this.$3F_1.get_item($v_0);$v_1.dispose()}this.$3F_1.clear();this.$3F_1=null}if(!IsNull(this.$5O_1))this.$5O_1=null;if(!IsNull(this.$1_1))this.$1_1=null;if(!IsNull(this.$0_1)){this.$0_1.dispose();this.$0_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},initialize:function(){Mscrm.BusinessRules.Views.View.prototype.initialize.call(this);this.$1_1.attribute("id",this.$0_1.get_id());for(var $v_0=0;$v_0<this.$0_1.get_buttonViewModels().get_count();$v_0++){var $v_1=this.$0_1.get_buttonViewModels().get_item($v_0),$v_2=this.get_readToolBarButtonViewBuilder().build($v_1);this.$DT_1($v_2)}},get_dataContext:function(){return this.$0_1},set_dataContext:function(value){this.$0_1=value;return value},get_element:function(){return this.$1_1},set_element:function(value){this.$1_1=value;return value},get_buttonViews:function(){return this.$3F_1||(this.$3F_1=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.Views.IReadToolBarButtonView))},set_buttonViews:function(value){this.$3F_1=value;return value},get_readToolBarButtonViewBuilder:function(){return this.$5O_1||(this.$5O_1=new Mscrm.BusinessRules.Builders.ReadToolBarButtonViewBuilder)},set_readToolBarButtonViewBuilder:function(value){this.$5O_1=value;return value},$DT_1:function($p0){this.get_buttonViews().add($p0);this.$BW_1($p0.get_element());$p0.initialize()},$BW_1:function($p0){this.$1_1.append($p0)}};Mscrm.BusinessRules.Views.ActionReadToolBarView=function($p0){this.$$d_$5g_2=Function.createDelegate(this,this.$5g_2);Mscrm.BusinessRules.Views.ActionReadToolBarView.initializeBase(this);this.$U_2=$p0};Mscrm.BusinessRules.Views.ActionReadToolBarView.$Am=function($p0,$p1){var $v_0=$p1,$v_1=$v_0.get_dataContext(),$v_2=$v_1.get_step(),$v_3=$p1.$E_0,$v_4=$v_3.get_dataContext(),$v_5=$v_4.get_step(),$v_6=$v_3.get_stepViews().indexOf($v_0,null),$v_7=!$v_6,$v_8=$v_6===$v_3.get_stepViews().get_count()-1;if($v_7&&$p0||$v_8&&!$p0)return;if($p0){$v_0.$1_1.get_jQueryObject().insertBefore($v_0.$1_1.get_jQueryObject().prev());$v_5.get_Steps().move($v_6-1,$v_2);Mscrm.BusinessRules.Views.ActionReadToolBarView.$86(Mscrm.BusinessRules.ViewModels.ISectionViewModel,$v_4.get_stepViewModels(),$v_6,$v_6-1);Mscrm.BusinessRules.Views.ActionReadToolBarView.$86(Mscrm.BusinessRules.Views.ISectionView,$v_3.get_stepViews(),$v_6,$v_6-1)}else{$v_0.$1_1.get_jQueryObject().insertAfter($v_0.$1_1.get_jQueryObject().next());$v_5.get_Steps().move($v_6+1,$v_2);Mscrm.BusinessRules.Views.ActionReadToolBarView.$86(Mscrm.BusinessRules.ViewModels.ISectionViewModel,$v_4.get_stepViewModels(),$v_6,$v_6+1);Mscrm.BusinessRules.Views.ActionReadToolBarView.$86(Mscrm.BusinessRules.Views.ISectionView,$v_3.get_stepViews(),$v_6,$v_6+1)}};Mscrm.BusinessRules.Views.ActionReadToolBarView.deleteAction=function($p0){var $v_0=$p0,$v_1=$v_0.get_dataContext(),$v_2=$v_1.get_step(),$v_3=$v_0.$1_1.get_jQueryObject().parent(),$v_4=$v_0.$E_0,$v_5=$v_4.get_dataContext(),$v_6=$v_5.get_step();$v_0.$1_1.get_jQueryObject().remove();$v_4.get_stepViews().remove($v_0);$v_5.get_stepViewModels().remove($v_1);$v_6.get_Steps().remove($v_2);$v_0.dispose();$v_1.dispose();!$v_4.get_stepViews().get_count()&&$v_3.addClass("emptycollection");if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){$v_4.$1X_4.removeClass("preventadd");$v_4.setFocusOnStep(null)}Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()};Mscrm.BusinessRules.Views.ActionReadToolBarView.$86=function($p0,$p1,$p2,$p3){var $v_0=$p1.get_item($p2);$p1.set_item($p2,$p1.get_item($p3));$p1.set_item($p3,$v_0)};Mscrm.BusinessRules.Views.ActionReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},moveUpHandler:function(){Mscrm.BusinessRules.Views.ActionReadToolBarView.$Am(true,this.$U_2);return true},moveDownHandler:function(){Mscrm.BusinessRules.Views.ActionReadToolBarView.$Am(false,this.$U_2);return true},deleteHandler:function(){var $v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),this.$$d_$5g_2,null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBLCONFIRM_DELETEBODY,"");return true},$5g_2:function($p0){Mscrm.BusinessRules.Views.ActionReadToolBarView.deleteAction(this.$U_2)}};Mscrm.BusinessRules.Views.ConditionReadToolBarView=function(contextView){Mscrm.BusinessRules.Views.ConditionReadToolBarView.initializeBase(this);this.$U_2=contextView};Mscrm.BusinessRules.Views.ConditionReadToolBarView.get_bodyViewContainerId=function(){if(IsNull(Mscrm.BusinessRules.Views.ConditionReadToolBarView.$2V))return Mscrm.BusinessRules.Constants.get_bodyViewContainerId();return Mscrm.BusinessRules.Views.ConditionReadToolBarView.$2V};Mscrm.BusinessRules.Views.ConditionReadToolBarView.set_bodyViewContainerId=function(value){Mscrm.BusinessRules.Views.ConditionReadToolBarView.$2V=value;return value};Mscrm.BusinessRules.Views.ConditionReadToolBarView.deleteAction=function(context){var $v_0=context,$v_1=$v_0.$0_1,$v_2=$v_0.$E_0,$v_3=$v_2.get_dataContext(),$v_4=$v_2.get_needDeleteConditionBranch();if($v_4&&$v_2.get_canRemoveCondition()){$v_3.set_conditionBranchDisplayMode(2);$v_0.updateReadModeExpression()}else{Mscrm.BusinessRules.Views.ConditionReadToolBarView.$CL($v_0,$v_1,$v_2,$v_3);$v_4&&$v_2.deleteView()}};Mscrm.BusinessRules.Views.ConditionReadToolBarView.$CL=function($p0,$p1,$p2,$p3){var $v_0=$p2.get_expressions().indexOf($p0,null),$v_1=!$v_0,$v_2=$p0.$1_1.get_jQueryObject().parent();$p0.$1_1.get_jQueryObject().remove();$p2.get_expressions().remove($p0);$p3.removeExpression($p1);$p0.dispose();$p1.dispose();!$p2.get_expressions().get_count()&&$v_2.addClass("emptycollection");if($v_1&&$p2.get_expressions().get_count()>0){$p2.get_expressions().get_item(0).get_dataContext().$3Q_2=true;$p2.get_expressions().get_item(0).get_inlineView().updateValueElement()}var $v_3=(new Mscrm.Proxies.JQueryProxy).selectElement("#AddExpressionButton");if($v_3&&$v_3.get_length()>0){var $v_4=$p2.$E_0.get_parent();if($v_4.get_stepViews().last().get_dataContext().hasConditionExpressions())$v_3.removeClass("preventadd");else $v_3.addClass("preventadd");var $v_5=$p2.$E_0.$1_1.children(":first-child").children(":first-child");if(!$p2.get_expressions().get_count()&&$v_4.get_stepViews().get_count()>1&&$v_5.getAttribute("title")!==window.LOCID_CALCULATEDFIELD_EXPRESSION){$v_5.attribute("title",window.LOCID_CALCULATEDFIELD_ELSE);$v_5.children(":nth-child(2)").set_text(window.LOCID_CALCULATEDFIELD_ELSE)}}!IsNull(Mscrm.BusinessRules.BusinessRuleInitializer.$T)&&Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()};Mscrm.BusinessRules.Views.ConditionReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Views.ConditionReadToolBarView.get_bodyViewContainerId())},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},deleteHandler:function(){var $v_0=this.$U_2.$E_0;if($v_0.get_needDeleteConditionBranch())if($v_0.get_canRemoveCondition())this.$8z_2(window.LOCID_PBL_CONVT_TO_ELSE_BRANCH);else this.$8z_2(window.LOCID_PBL_DELETE_ERROR_MESSAGE);else this.$8z_2(window.LOCID_PBLCONFIRM_DELETEBODY);return true},$8z_2:function($p0){var $$t_3=this,$v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),function($p1_0){Mscrm.BusinessRules.Views.ConditionReadToolBarView.deleteAction($$t_3.$U_2)},null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,$p0,"")}};Mscrm.BusinessRules.Views.ExpressionReadToolBarView=function($p0){this.$$d_$5g_2=Function.createDelegate(this,this.$5g_2);Mscrm.BusinessRules.Views.ExpressionReadToolBarView.initializeBase(this);this.$U_2=$p0};Mscrm.BusinessRules.Views.ExpressionReadToolBarView.deleteAction=function($p0){var $v_0=$p0,$v_1=$v_0.get_dataContext(),$v_2=$v_1.get_step(),$v_3=$v_0.$1_1.get_jQueryObject().parent();$v_0.$1_1.get_jQueryObject().remove();var $v_4=$v_0.$E_0,$v_5=$v_4.get_dataContext(),$v_6=$v_5.get_step();$v_4.get_stepViews().remove($v_0);$v_5.get_stepViewModels().remove($v_1);$v_6.get_Steps().remove($v_2);$v_0.dispose();$v_1.dispose();!$v_4.get_stepViews().get_count()&&$v_3.addClass("emptycollection");var $v_7=(new Mscrm.Proxies.JQueryProxy).selectElement("#AddExpressionButton");if($v_7&&$v_7.get_length()>0)if($v_4.get_stepViews().last().get_dataContext().hasConditionExpressions())$v_7.removeClass("preventadd");else $v_7.addClass("preventadd");Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()};Mscrm.BusinessRules.Views.ExpressionReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId());this.$1_1.addClass("elsebutton")},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},deleteHandler:function(){var $v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),this.$$d_$5g_2,null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBLCONFIRM_DELETEELSE,"");return true},$5g_2:function($p0){Mscrm.BusinessRules.Views.ExpressionReadToolBarView.deleteAction(this.$U_2)}};Mscrm.BusinessRules.Views.ConditionActionReadToolBarView=function($p0){this.$$d_$5g_2=Function.createDelegate(this,this.$5g_2);Mscrm.BusinessRules.Views.ConditionActionReadToolBarView.initializeBase(this);this.$U_2=$p0};Mscrm.BusinessRules.Views.ConditionActionReadToolBarView.deleteAction=function($p0){var $v_0=$p0,$v_1=$v_0.get_dataContext(),$v_2=$v_1.get_step(),$v_3=$v_0.$E_0,$v_4=$v_3.get_dataContext(),$v_5=$v_4.get_step(),$v_6=$v_0.$1_1.get_jQueryObject().parent();$v_0.$1_1.get_jQueryObject().remove();$v_3.get_stepViews().remove($v_0);$v_4.get_stepViewModels().remove($v_1);$v_5.get_Steps().remove($v_2);$v_0.dispose();$v_1.dispose();!$v_3.get_stepViews().get_count()&&$v_6.addClass("emptycollection");if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){$v_3.$1X_4.removeClass("preventadd");$v_3.setFocusOnStep(null)}Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_headerView().updateBar()};Mscrm.BusinessRules.Views.ConditionActionReadToolBarView.prototype={$U_2:null,$r_2:null,initialize:function(){Mscrm.BusinessRules.Views.ReadToolBarView.prototype.initialize.call(this);this.$r_2=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId())},dispose:function(){if(this.$9_0)return;if(!IsNull(this.$U_2))this.$U_2=null;Mscrm.BusinessRules.Views.ReadToolBarView.prototype.dispose.call(this)},deleteHandler:function(){var $v_0=new Mscrm.BusinessRuleConfirmFlyout(this.$r_2.get_jQueryObject(),this.$$d_$5g_2,null);$v_0.show(window.LOCID_PBLCONFIRM_DELETE,window.LOCID_PBLCONFIRM_DELETEBODY,"");return true},$5g_2:function($p0){Mscrm.BusinessRules.Views.ConditionActionReadToolBarView.deleteAction(this.$U_2)}};Mscrm.BusinessRules.Views.ToolbarView=function($p0){Mscrm.BusinessRules.Views.ToolbarView.initializeBase(this);this.$1_1=$p0};Mscrm.BusinessRules.Views.ToolbarView.prototype={get_dataContext:function(){return null},set_dataContext:function($p0){return $p0},get_element:function(){return this.$1_1},$1_1:null};Mscrm.BusinessRules.Views.EditToolbarView=function($p0){Mscrm.BusinessRules.Views.EditToolbarView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.EditToolbarView.prototype={initialize:function(){this.$DV_2();this.$DW_2()},get_discardButton:function(){return this.$52_2},get_doneButton:function(){return this.$53_2},$DV_2:function(){this.$52_2=this.$1_1.children(".editdiscardimage").children(":first-child");this.$8v_2(this.$52_2,this.get_closeImage(),this.get_hoverCloseImage(),this.get_selectedCloseImage())},$DW_2:function(){this.$53_2=this.$1_1.children(".editdoneimage").children(":first-child");this.$8v_2(this.$53_2,this.get_doneImage(),this.get_hoverDoneImage(),this.get_selectedDoneImage())},$8v_2:function($p0,$p1,$p2,$p3){var $v_0=false,$$t_B=this;$p0.mouseOver(function($p1_0){$p0.attribute("src",$p2.source);$p0.attribute("class",$p2.cssClass)});var $$t_C=this;$p0.mouseOut(function($p1_0){$p0.attribute("src",$p1.source);$p0.attribute("class",$p1.cssClass)});var $$t_D=this;$p0.mouseDown(function($p1_0){$v_0=true;$p0.attribute("src",$p3.source);$p0.attribute("class",$p3.cssClass)});var $$t_E=this;$p0.mouseUp(function($p1_0){$p0.attribute("src",$p1.source);$p0.attribute("class",$p1.cssClass)});var $$t_F=this;$p0.focus(function($p1_0){if(!$v_0){$p0.attribute("src",$p2.source);$p0.attribute("class",$p2.cssClass)}$v_0=false});var $$t_G=this;$p0.blur(function($p1_0){$p0.attribute("src",$p1.source);$p0.attribute("class",$p1.cssClass)})},dispose:function(){if(this.$9_0)return;this.$52_2.unbind(null,null);this.$53_2.unbind(null,null);this.$52_2=null;this.$53_2=null},$52_2:null,$53_2:null};Mscrm.BusinessRules.Views.EditStepToolBarView=function($p0){Mscrm.BusinessRules.Views.EditStepToolBarView.initializeBase(this,[$p0])};Mscrm.BusinessRules.Views.EditStepToolBarView.prototype={get_closeImage:function(){if(IsNull(this.$27_3))this.$27_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/actionbutton_cancel_default_24.png"));return this.$27_3},get_hoverCloseImage:function(){if(IsNull(this.$2J_3))this.$2J_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/actionbutton_cancel_hover_24.png"));return this.$2J_3},get_selectedCloseImage:function(){if(IsNull(this.$2O_3))this.$2O_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/actionbutton_cancel_select_24.png"));return this.$2O_3},get_doneImage:function(){if(IsNull(this.$2F_3))this.$2F_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/actionbutton_ok_default_24.png"));return this.$2F_3},get_hoverDoneImage:function(){if(IsNull(this.$2K_3))this.$2K_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/actionbutton_ok_hover_24.png"));return this.$2K_3},get_selectedDoneImage:function(){if(IsNull(this.$2P_3))this.$2P_3=Mscrm.ImageStrip.getImageInfo(Mscrm.CrmUri.create("/_imgs/businessruleeditor/actionbutton_ok_select_24.png"));return this.$2P_3},$27_3:null,$2J_3:null,$2O_3:null,$2F_3:null,$2K_3:null,$2P_3:null};Mscrm.BusinessRules.Views.ToolBarFactory=function(){};Mscrm.BusinessRules.Views.ToolBarFactory.instance=function(){return new Mscrm.BusinessRules.Views.ToolBarFactory};Mscrm.BusinessRules.Views.ToolBarFactory.prototype={createEditToolBarView:function(view,element){if(Mscrm.BusinessRules.Views.InlineAggregateStepEditView.isInstanceOfType(view))return new Mscrm.BusinessRules.Views.AggregationSectionToolBarView(element);if(Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView.isInstanceOfType(view))return new Mscrm.BusinessRules.Views.EditExpressionToolBarView(element);if(Mscrm.BusinessRules.Views.InlineStepEditViewBase.isInstanceOfType(view))return new Mscrm.BusinessRules.Views.EditStepToolBarView(element);if(Mscrm.BusinessRules.Views.InlineExpressionEditView.isInstanceOfType(view))return new Mscrm.BusinessRules.Views.EditExpressionToolBarView(element);return new Mscrm.BusinessRules.Views.EditExpressionToolBarView(element)}};Mscrm.BusinessRules.Views.ViewHelper=function(){};Mscrm.BusinessRules.Views.ViewHelper.$1L=function($p0){if(isNullOrEmptyString($p0))return $p0;$p0=CrmEncodeDecode.CrmHtmlEncode($p0);$p0=$p0.replace(/&#123;/g,"{");return $p0.replace(/&#125;/g,"}")};Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper=function(){if(!Mscrm.BusinessRules.Views.ViewHelper._editorDataWrapper)Mscrm.BusinessRules.Views.ViewHelper._editorDataWrapper=!isNullOrEmptyString(window._BusinessRuleEditorJsonData)?JSON.parse(window._BusinessRuleEditorJsonData.substr(8)):null;return Mscrm.BusinessRules.Views.ViewHelper._editorDataWrapper};Mscrm.BusinessRules.Views.ViewHelper.addActionStep=function(command){Mscrm.BusinessRules.Views.ViewHelper.$6g&&Mscrm.BusinessRules.Views.ViewHelper.$6g(command)};Mscrm.BusinessRules.Views.ViewHelper.getDefaultOptionValue=function(){var $v_0=new Array(1),$v_1=new Mscrm.EnumOptionJsonWrapper;$v_1.Label="-1";$v_1.Value=-1;$v_0[0]=$v_1;return $v_0};Mscrm.BusinessRules.Views.ViewHelper.getNewEnumOption=function(label,value){var $v_0=new Mscrm.EnumOptionJsonWrapper;$v_0.Label=label;$v_0.Value=value;return $v_0};Mscrm.BusinessRules.Views.FormBodyView=function($p0){Mscrm.BusinessRules.Views.FormBodyView.initializeBase(this,[$p0]);this.$48_2=Mscrm.BusinessRules.SharedMethods.getList(Mscrm.BusinessRules.Views.ISectionView)};Mscrm.BusinessRules.Views.FormBodyView.prototype={get_results:function(){var $v_0=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance(),$v_1;if(this.$48_2&&this.$48_2.get_count()>0){if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g())$v_1=this.$48_2.get_item(0);else $v_1=this.$48_2.get_item(1);$v_0.compileResults($v_1.get_results())}return $v_0},get_sectionViews:function(){return this.$48_2},get_dataContext:function(){return this.$0_2},set_dataContext:function($p0){if(IsNull(this.$0_2)&&!IsNull($p0)){Mscrm.BusinessRules.Views.SectionView.prototype.set_dataContext.call(this,$p0);this.$0_2=$p0}return $p0},initialize:function(){Mscrm.BusinessRules.Views.SectionView.prototype.initialize.call(this);for(var $v_0=this.$1_1.children("div"),$v_1=this.$0_2.get_sections(),$v_2=0;$v_2<$v_1.get_count();$v_2++)this.$48_2.add(Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection($v_1.get_item($v_2),this.get_jQueryProxy().fromElement($v_0.get_item($v_2))))},$0_2:null,$48_2:null};Mscrm.BusinessRules.Views.HeaderView=function(){Mscrm.BusinessRules.Views.HeaderView.initializeBase(this)};Mscrm.BusinessRules.Views.HeaderView.prototype={dispose:function(){if(this.$9_0)return;this.$47_1.unbind("keydown",null);Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&this.$38_1.unbind("keydown",null);this.$44_1.unbind("keydown",null);this.$45_1.unbind("keydown",null);this.$4u_1.unbind("keydown",null);this.$1R_1.unbind("keydown",null);this.$5T_1.unbind("keydown",null);this.$5C_1.unbind("keydown",null);$P_CRM(document).unbind("keydown",null)},get_dataContext:function(){return this.$0_1},set_dataContext:function($p0){if(IsNull(this.$0_1)&&!IsNull($p0))this.$0_1=$p0;return $p0},initialize:function(){var $v_0=this.get_jQueryProxy().selectElement("#RuleEntityName");$v_0.get_jQueryObject().text(this.ruleEntityLabel);$v_0.attribute("title",this.ruleEntityLabel);var $v_1=this.get_jQueryProxy().selectElement("#ProcessEntityName");if(!IsNull($v_1)){$v_1.get_jQueryObject().text(this.entityDisplayName);$v_1.attribute("title",this.entityDisplayName)}var $v_2=this.get_jQueryProxy().selectElement(".messageiconcontainer");$v_2.append(this.get_jQueryProxy().fromElement(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/warning.png"))).addClass("erroricon"));$v_2.append(this.get_jQueryProxy().fromElement(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/alert.png"))).addClass("warningicon"));this.$Bj_1()},$Bj_1:function(){this.$1R_1=this.get_jQueryProxy().selectElement("#helpButton");if(!IsNull(this.$1R_1)){this.get_bindingsMediator().addClickBinding(this.$1R_1,this.get_businessRuleViewModel().get_helpCommand());var $$t_3=this;this.$1R_1.bind("keydown",function($p1_0){if($p1_0.which===13){$$t_3.get_businessRuleViewModel().get_helpCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}})}this.$5T_1=this.get_jQueryProxy().selectElement(".learnmore .securitylearnmore A");if(!IsNull(this.$5T_1)){this.get_bindingsMediator().addClickBinding(this.$5T_1,this.get_businessRuleViewModel().get_securityLearnMoreCommand());var $$t_4=this;this.$5T_1.bind("keydown",function($p1_0){if($p1_0.which===13){$$t_4.get_businessRuleViewModel().get_securityLearnMoreCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}})}this.$5C_1=this.get_jQueryProxy().selectElement(".learnmore .genericxamllearnmore A");if(!IsNull(this.$5C_1)){this.get_bindingsMediator().addClickBinding(this.$5C_1,this.get_businessRuleViewModel().get_genericXamlLearnMoreCommand());var $$t_5=this;this.$5C_1.bind("keydown",function($p1_0){if($p1_0.which===13){$$t_5.get_businessRuleViewModel().get_genericXamlLearnMoreCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}})}this.$Bi_1()},$Bi_1:function(){this.$47_1=this.get_jQueryProxy().selectElement("#saveButton");if(!IsNull(this.$47_1)){this.get_bindingsMediator().addClickBinding(this.$47_1,this.get_businessRuleViewModel().get_saveCommand());var $$t_7=this;this.$47_1.bind("keydown",function($p1_0){if($p1_0.which===13){$$t_7.get_businessRuleViewModel().get_saveCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}});var $$t_8=this;$P_CRM(document).bind("keydown",function($p1_0){if($p1_0.which===83&&$p1_0.ctrlKey){$$t_8.get_businessRuleViewModel().get_saveCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}})}if(Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){this.$38_1=this.get_jQueryProxy().selectElement("#validateButtonOn");if(!IsNull(this.$38_1)){this.get_bindingsMediator().addClickBinding(this.$38_1,this.get_businessRuleViewModel().get_validateCommand());var $$t_9=this;this.$38_1.bind("keydown",function($p1_0){if($p1_0.which===13){$$t_9.get_businessRuleViewModel().get_validateCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}})}}this.$44_1=this.get_jQueryProxy().selectElement("#saveAndCloseButton");if(!IsNull(this.$44_1)){this.get_bindingsMediator().addClickBinding(this.$44_1,this.get_businessRuleViewModel().get_saveAndCloseCommand());var $$t_A=this;this.$44_1.bind("keydown",function($p1_0){if($p1_0.which===13){$$t_A.get_businessRuleViewModel().get_saveAndCloseCommand().execute();$p1_0.preventDefault();$p1_0.stopPropagation()}});var $$t_B=this;$P_CRM(document).bind("keydown",function($p1_0){$p1_0.which===83&&$p1_0.altKey&&$$t_B.get_businessRuleViewModel().get_saveAndCloseCommand().execute()})}this.$45_1=this.get_jQueryProxy().selectElement("#saveAsButton");if(!IsNull(this.$45_1)){this.get_bindingsMediator().addClickBinding(this.$45_1,this.get_businessRuleViewModel().get_saveAsCommand());var $$t_C=this;this.$45_1.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_C.get_businessRuleViewModel().get_saveAsCommand().execute()})}this.$4u_1=this.get_jQueryProxy().selectElement("#activateButton");if(!IsNull(this.$4u_1)){this.get_bindingsMediator().addClickBinding(this.$4u_1,this.get_businessRuleViewModel().get_activateCommand());var $$t_D=this;this.$4u_1.bind("keydown",function($p1_0){$p1_0.which===13&&$$t_D.get_businessRuleViewModel().get_activateCommand().execute()})}},unbindSaveButtons:function(){$P_CRM(document).unbind("keydown",null);this.$47_1.hide();this.$45_1.hide();this.$44_1.hide()},updateBar:function(){var $v_0=Mscrm.BusinessRules.BusinessRuleInitializer.$T.get_formBodyView().get_results();if(this.tryShow($v_0.getList(1),window.LOCID_CF_ERR_INVALIDREFERENCES,1)||this.tryShow($v_0.getList(2),window.LOCID_CF_ERR_INVALIDVALUES,1)||this.tryShow($v_0.getList(5),window.LOCID_ERR_INVALIDFIELDMASKS,1))return;if(!this.get_businessRuleViewModel().get_isDirty()&&!this.get_businessRuleViewModel().get_hadSaveSucceeded()&&Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata().AdditionalMetadata.SourceTypeMask===32){Mscrm.BusinessRules.Views.MessageHelper.showError(window.LOCID_ERR_STM_GENERIC,"genericxamlerror");return}if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&this.tryShow($v_0.getList(0),window.LOCID_CALCULATEDFIELD_FLS_WARN,0))return;Mscrm.BusinessRules.Views.MessageHelper.hideBar()},tryShow:function($p0,$p1,$p2){if($p0.get_count()<=0)return false;switch($p2){case 0:Mscrm.BusinessRules.Views.MessageHelper.showWarning(String.format($p1,this.$9w_1($p0)),"");break;case 1:default:Mscrm.BusinessRules.Views.MessageHelper.showError(String.format($p1,this.$9w_1($p0)),"");break}return true},$9w_1:function($p0){for(var $v_0=null,$v_1="{0}, {1}",$v_2=0;$v_2<$p0.get_count();$v_2++)$v_0=isNullOrEmptyString($v_0)?$p0.get_item($v_2):Microsoft.Crm.Workflow.Utils.StringUtility.formatInvariant($v_1,$v_0,$p0.get_item($v_2));return $v_0},ruleEntityLabel:null,entityDisplayName:null,$5T_1:null,$5C_1:null,$1R_1:null,$4u_1:null,$38_1:null,$0_1:null,get_businessRuleViewModel:function(){return this.$0_1},$47_1:null,get_saveElement:function(){return this.$47_1},$45_1:null,get_saveAsElement:function(){return this.$45_1},$44_1:null,get_saveAndCloseElement:function(){return this.$44_1}};Mscrm.BusinessRules.Views.ManageBusinessRuleView=function(){this.$$d_$E1_1=Function.createDelegate(this,this.$E1_1);Mscrm.BusinessRules.Views.ManageBusinessRuleView.initializeBase(this)};Mscrm.BusinessRules.Views.ManageBusinessRuleView.prototype={$0_1:null,$30_1:null,$2y_1:null,get_dataContext:function(){return this.$0_1},set_dataContext:function(value){if(IsNull(this.$0_1)&&!IsNull(value))this.$0_1=value;return value},initialize:function(){this.$0_1.set_entityTypeCode(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityTypeCode);this.$30_1=this.createHeaderView();this.$30_1.set_dataContext(this.$0_1);this.$30_1.set_parent(this);var $v_0=this.get_jQueryProxy().selectElement("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId());this.$2y_1=this.createFormBodyView($v_0);this.$2y_1.set_dataContext(this.$0_1.get_$90_1());this.$2y_1.initialize();this.$2y_1.set_parent(this);this.$30_1.initialize();this.$0_1.get_readOnly()&&$v_0.addClass("readonly");this.$0_1.saveSnapshot();attachWindowOnBeforeUnload(this.$$d_$E1_1,null)},dispose:function(){if(this.$9_0)return;!IsNull(this.$30_1)&&this.$30_1.dispose();this.$30_1=null;!IsNull(this.$2y_1)&&this.$2y_1.dispose();this.$2y_1=null;!IsNull(this.$0_1)&&this.$0_1.dispose();this.$0_1=null},createHeaderView:function(){return new Mscrm.BusinessRules.Views.PBLHeaderView},createFormBodyView:function(formBody){return new Mscrm.BusinessRules.Views.FormBodyView(formBody)},$E1_1:function($p0){Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSetAction("Unload");if(!this.$0_1.get_readOnly()&&this.$0_1.get_isDirty()){$p0.rawEvent.returnValue=window.LOCID_FORMS_SAVE_CONFIRM_TITLE;return window.LOCID_FORMS_SAVE_CONFIRM_TITLE}},get_headerView:function(){return this.$30_1},set_headerView:function(value){this.$30_1=value;return value},get_formBodyView:function(){return this.$2y_1},set_formBodyView:function(value){this.$2y_1=value;return value}};Mscrm.BusinessRules.Views.View=function(){this.$$d_$E3_0=Function.createDelegate(this,this.$E3_0)};Mscrm.BusinessRules.Views.View.prototype={$h_0:null,initialize:function(){!IsNull(this.get_dataContext())&&this.get_dataContext().add_propertyChanged(this.$$d_$E3_0)},get_jQueryProxy:function(){if(IsNull(this.$h_0))this.$h_0=new Mscrm.Proxies.JQueryProxy;return this.$h_0},set_jQueryProxy:function(value){this.$h_0=value;return value},get_parent:function(){return this.$E_0},set_parent:function(value){this.$E_0=value;return value},get_inlineEditControlMediator:function(){if(IsNull(this.$3P_0))this.$3P_0=new Mscrm.BusinessRules.Mediators.InlineEditControlMediator;return this.$3P_0},set_inlineEditControlMediator:function(value){this.$3P_0=value;return value},$E3_0:function($p0,$p1){this.handleModelToViewBinding($p1.get_propertyName())},handleModelToViewBinding:function(propertyName){},get_bindingsMediator:function(){if(IsNull(this.$15_0))this.$15_0=new Mscrm.BusinessRules.Mediators.BindingsMediator;return this.$15_0},set_bindingsMediator:function(value){this.$15_0=value;return value},dispose:function(){if(this.$9_0)return;!IsNull(this.$15_0)&&this.$15_0.dispose();this.$15_0=null;this.$9_0=true},get_isDisposed:function(){return this.$9_0},$3P_0:null,$15_0:null,$9_0:false,$E_0:null};Mscrm.BusinessRules.Views.BpfFieldControlView=function(element){this.$$d_$Ax_1=Function.createDelegate(this,this.$Ax_1);this.$$d_$Et_1=Function.createDelegate(this,this.$Et_1);this.$$d_$Ao_1=Function.createDelegate(this,this.$Ao_1);Mscrm.BusinessRules.Views.BpfFieldControlView.initializeBase(this);this.$1_1=element};Mscrm.BusinessRules.Views.BpfFieldControlView.prototype={$0_1:null,$1_1:null,$O_1:null,get_element:function(){return this.$1_1},get_dataContext:function(){return this.$0_1},set_dataContext:function(value){if(IsNull(this.$0_1)&&!IsNull(value)){!IsNull(this.$0_1)&&this.$0_1.remove_propertyChanged(this.$$d_$Ao_1);this.$0_1=value;this.$0_1.add_propertyChanged(this.$$d_$Ao_1)}return value},$Ao_1:function($p0,$p1){switch($p1.get_propertyName()){case "EntityLoadCommenced":this.$1_1.addClass("currentlyprocessing");break;case "EntityLoadCompleted":this.$1_1.removeClass("currentlyprocessing");break}},get_viewModel:function(){return this.$0_1},initialize:function(){this.$9F_1();this.$9l_1();this.$3b_1()},$9l_1:function(){this.$1_1.append(this.get_jQueryProxy().fromHtml(String.format("<span class='{0}'><img src='{1}' /></span>","processing",Mscrm.CrmUri.create("/_imgs/ico/16_progress.gif"))))},get_isValid:function(){return this.$87_1()},resetFocus:function(){!IsNull(this.$O_1)&&this.$O_1.blur()},forceDisplayIndex:function(index){var $v_0=$find(this.$O_1.get_dataContext().get_attribute().get_dataAttributeId());!IsNull($v_0)&&$v_0.resetValue(index.toString())},dispose:function(){if(this.$9_0)return;!IsNull(this.$0_1)&&this.$0_1.remove_propertyChanged(this.$$d_$Ao_1);this.get_bindingsMediator().disposeValueBinding(this.$12_1);this.get_bindingsMediator().disposeValueBinding(this.$58_1);this.get_bindingsMediator().disposeValueBinding(this.$55_1);if(!IsNull(this.$O_1)){this.$O_1.dispose();this.$O_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$9F_1:function(){var $v_0=null;if(!IsNull(this.$0_1)&&this.$0_1.get_selectedFieldIndex()!=="-1")$v_0=this.$0_1.get_selectedFieldIndex();this.$O_1=this.get_inlineEditControlMediator().createAutoCompleteControl(this.$1_1,this.$1_1.get_jQueryObject()[0].id,this.$0_1.get_attributes(),$v_0,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL);this.$O_1.get_dataContext().set_useOptionFiltering(this.$0_1.$1r_1);this.$87_1()},$Ax_1:function($p0){var $v_0;if(IsNull($p0)||!$p0.length)$v_0=this.$0_1.get_attributes();else $v_0=$p0;$v_0.sort(this.$$d_$Et_1);var $v_1=this.$O_1.get_dataContext();$v_1.setOptions($v_0);this.$O_1.get_editView().set_editElementValue("")},$3b_1:function(){var $$t_0=this.$O_1.get_dataContext();this.$58_1=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_1,"FilteredAttributeListProperty",this.$0_1.$$d_getFilteredAttributesDelegate,$$t_0.$$d_setFilteredOptionsDelegate||($$t_0.$$d_setFilteredOptionsDelegate=Function.createDelegate($$t_0,$$t_0.setFilteredOptionsDelegate)));this.$12_1=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$O_1,this.$0_1,"FieldChangedProperty",this.$0_1.$$d_getSelectedFieldIndexDelegate,this.$0_1.$$d_setSelectedFieldIndexDelegate);this.$55_1=this.get_bindingsMediator().createArrayOneWayValueBinding(Mscrm.EnumOptionJsonWrapper,this.$0_1,"AttributeListProperty",this.$0_1.$$d_getAttributesDelegate,this.$$d_$Ax_1)},$87_1:function(){var $v_0=this.$O_1.get_isValid();if(this.$0_1.get_selectedFieldIndex()==="-1"){if(Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.isInstanceOfType(this.$0_1)&&this.$0_1.get_selectedBpfField()!=="-1")return true;this.$9L_1(window.LOCID_CF_ERR_NOCOMPATIBLEFIELD)}return $v_0},$9E_1:function(){!IsNull(this.$O_1)&&this.$O_1.clearValidation()},$9L_1:function($p0){var $v_0=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,$p0);this.$O_1.tryReplaceAndShowValidationResult($v_0)},$Et_1:function($p0,$p1){var $v_0=$p0,$v_1=$p1;if(!$v_0&&!$v_1)return 0;else if(!$v_0)return -1;else if(!$v_1)return 1;else return $v_0.Label.localeCompare($v_1.Label)},$12_1:null,$58_1:null,$55_1:null};Mscrm.BusinessRules.Views.FieldControlView=function(element){this.$$d_$Ax_1=Function.createDelegate(this,this.$Ax_1);this.$$d_$Ao_1=Function.createDelegate(this,this.$Ao_1);Mscrm.BusinessRules.Views.FieldControlView.initializeBase(this);this.$1_1=element};Mscrm.BusinessRules.Views.FieldControlView.prototype={$0_1:null,$1_1:null,$O_1:null,get_element:function(){return this.$1_1},get_dataContext:function(){return this.$0_1},set_dataContext:function(value){if(IsNull(this.$0_1)&&!IsNull(value)){!IsNull(this.$0_1)&&this.$0_1.remove_propertyChanged(this.$$d_$Ao_1);this.$0_1=value;this.$0_1.add_propertyChanged(this.$$d_$Ao_1)}return value},$Ao_1:function($p0,$p1){switch($p1.get_propertyName()){case "EntityLoadCommenced":this.$1_1.addClass("currentlyprocessing");break;case "EntityLoadCompleted":this.$1_1.removeClass("currentlyprocessing");break}},get_viewModel:function(){return this.$0_1},initialize:function(){this.$9F_1();this.$9l_1();this.$3b_1()},$9l_1:function(){this.$1_1.append(this.get_jQueryProxy().fromHtml(String.format("<span class='{0}'><img src='{1}' /></span>","processing",Mscrm.CrmUri.create("/_imgs/ico/16_progress.gif"))))},get_isValid:function(){return this.$87_1()},resetFocus:function(){if(!IsNull(this.$O_1)){!IsNull(this.$O_1.get_chromeBehavior())&&this.$O_1.get_chromeBehavior().hideValidationElement();this.$O_1.blur()}},dispose:function(){if(this.$9_0)return;!IsNull(this.$0_1)&&this.$0_1.remove_propertyChanged(this.$$d_$Ao_1);this.get_bindingsMediator().disposeValueBinding(this.$12_1);this.get_bindingsMediator().disposeValueBinding(this.$58_1);this.get_bindingsMediator().disposeValueBinding(this.$55_1);if(!IsNull(this.$O_1)){this.$O_1.dispose();this.$O_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$9F_1:function(){var $v_0=null;if(!IsNull(this.$0_1)&&this.$0_1.get_selectedFieldIndex()!=="-1")$v_0=this.$0_1.get_selectedFieldIndex();this.$O_1=this.get_inlineEditControlMediator().createAutoCompleteControl(this.$1_1,this.$1_1.get_jQueryObject()[0].id,this.$0_1.get_attributes(),$v_0,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL);this.$O_1.get_dataContext().set_useOptionFiltering(this.$0_1.$1r_1);this.$87_1()},$Ax_1:function($p0){var $v_0;if(IsNull($p0)||!$p0.length)$v_0=this.$0_1.get_attributes();else $v_0=$p0;var $v_1=this.$O_1.get_dataContext();$v_1.setOptions($v_0);this.$O_1.get_editView().set_editElementValue("")},$3b_1:function(){var $$t_0=this.$O_1.get_dataContext();this.$58_1=this.get_bindingsMediator().createArrayOneWayValueBinding(Number,this.$0_1,"FilteredAttributeListProperty",this.$0_1.$$d_getFilteredAttributesDelegate,$$t_0.$$d_setFilteredOptionsDelegate||($$t_0.$$d_setFilteredOptionsDelegate=Function.createDelegate($$t_0,$$t_0.setFilteredOptionsDelegate)));this.$12_1=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$O_1,this.$0_1,"FieldChangedProperty",this.$0_1.$$d_getSelectedFieldIndexDelegate,this.$0_1.$$d_setSelectedFieldIndexDelegate);this.$55_1=this.get_bindingsMediator().createArrayOneWayValueBinding(Mscrm.EnumOptionJsonWrapper,this.$0_1,"AttributeListProperty",this.$0_1.$$d_getAttributesDelegate,this.$$d_$Ax_1)},$87_1:function(){var $v_0=this.$O_1.get_isValid();if(this.$0_1.get_selectedFieldIndex()==="-1"){$v_0=false;this.$9L_1(window.LOCID_CF_ERR_NOCOMPATIBLEFIELD)}return $v_0},$9E_1:function(){!IsNull(this.$O_1)&&this.$O_1.clearValidation()},$9L_1:function($p0){var $v_0=new Mscrm.BusinessRules.Commands.BusinessRuleValidationResult(false,$p0);this.$O_1.tryReplaceAndShowValidationResult($v_0)},$12_1:null,$58_1:null,$55_1:null};Mscrm.BusinessRules.Views.EntityLookupFieldControlView=function(element){Mscrm.BusinessRules.Views.EntityLookupFieldControlView.initializeBase(this);this.$1_1=element};Mscrm.BusinessRules.Views.EntityLookupFieldControlView.prototype={$0_1:null,$1_1:null,$O_1:null,get_element:function(){return this.$1_1},get_dataContext:function(){return this.$0_1},set_dataContext:function(value){if(IsNull(this.$0_1)&&!IsNull(value))this.$0_1=value;return value},get_viewModel:function(){return this.$0_1},initialize:function(){this.$9F_1();this.$3b_1()},get_isValid:function(){return this.$O_1.get_isValid()},resetFocus:function(){!IsNull(this.$O_1)&&this.$O_1.blur()},dispose:function(){if(this.$9_0)return;this.get_bindingsMediator().disposeValueBinding(this.$12_1);if(!IsNull(this.$O_1)){this.$O_1.dispose();this.$O_1=null}Mscrm.BusinessRules.Views.View.prototype.dispose.call(this)},$9F_1:function(){var $v_0=null;if(!IsNull(this.$0_1)&&this.$0_1.get_selectedFieldIndex()!=="-1")$v_0=this.$0_1.get_selectedFieldIndex();this.$O_1=this.get_inlineEditControlMediator().createAutoCompleteControl(this.$1_1,this.$1_1.get_jQueryObject()[0].id,this.$0_1.get_lookupFields(),$v_0,Mscrm.BusinessRules.Constants.get_bodyViewContainerId(),1,"alwaysedit",window.LOCID_BUSINESSRULE_SHOWFIELDS,window.LOCID_BUSINESSRULE_FIELDLABEL)},$3b_1:function(){this.$12_1=this.get_bindingsMediator().addInlineFieldToStringValueBinding(this.$O_1,this.$0_1,"FieldChangedProperty",this.$0_1.$$d_getSelectedFieldIndexDelegate,this.$0_1.$$d_setSelectedFieldIndexDelegate)},$12_1:null};Mscrm.BusinessRules.Views.PBLHeaderView=function(){this.$$d_$FB_2=Function.createDelegate(this,this.$FB_2);Mscrm.BusinessRules.Views.PBLHeaderView.initializeBase(this)};Mscrm.BusinessRules.Views.PBLHeaderView.prototype={dispose:function(){if(this.$9_0)return;this.get_businessRuleViewModel().remove_onValidation(this.$$d_$FB_2);this.$4z_2.unbind("click",null);Mscrm.BusinessRules.Views.HeaderView.prototype.dispose.call(this)},initialize:function(){var $v_0="{0}: {1}";this.ruleEntityLabel=String.format($v_0,window.LOCID_BUSINESSRULE_NAMESTRING,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityDisplayName());this.entityDisplayName=String.format($v_0,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityDisplayName());Mscrm.BusinessRules.Views.HeaderView.prototype.initialize.call(this);this.$Db_2()},$Db_2:function(){this.$DS_2();this.$Dh_2();Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&this.$DR_2()},$DS_2:function(){this.$4z_2=this.get_jQueryProxy().selectElement("#BusinessRuleName");this.get_businessRuleViewModel().set_businessRuleName(this.$4z_2.children(":first-child").children(":first-child").get_text());var $v_0="alwaysedit";this.$34_2=this.get_inlineEditControlMediator().createSingleLineTextControl(this.$4z_2,"headerbusinessrulename",100,{value:this.get_businessRuleViewModel().get_businessRuleName()},Mscrm.BusinessRules.Constants.get_headerViewContainerId(),$v_0);if(!Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){this.$34_2.get_valueElement().addClass("ruletitlecontent");this.$34_2.get_editView().get_editElement().addClass("ruletitlecontent")}this.get_businessRuleViewModel().get_readOnly()&&this.$34_2.get_editView().get_editElement().attr("disabled","true");this.$34_2.get_dataContext().set_emptyValuePlaceholder(window.LOCID_BUSINESSRULE_NAMEWATERMRK);var $$t_3=this.get_businessRuleViewModel(),$$t_4=this.get_businessRuleViewModel();this.get_bindingsMediator().addTextInputToStringValueBinding(new Mscrm.Proxies.JQueryObjectProxy(this.$34_2.get_editView().get_editElement()),this.get_businessRuleViewModel(),"BusinessRuleName",$$t_3.$$d_getBusinessRuleNameDelegate||($$t_3.$$d_getBusinessRuleNameDelegate=Function.createDelegate($$t_3,$$t_3.getBusinessRuleNameDelegate)),$$t_4.$$d_setBusinessRuleNameDelegate||($$t_4.$$d_setBusinessRuleNameDelegate=Function.createDelegate($$t_4,$$t_4.setBusinessRuleNameDelegate)));var $v_1=this.get_jQueryProxy().selectElement("#crmFormSubmitId"),$$t_5=this.get_businessRuleViewModel(),$$t_6=this.get_businessRuleViewModel();this.get_bindingsMediator().addTextInputToStringValueBinding($v_1,this.get_businessRuleViewModel(),"BusinessRuleId",$$t_5.$$d_getBusinessRuleIdDelegate||($$t_5.$$d_getBusinessRuleIdDelegate=Function.createDelegate($$t_5,$$t_5.getBusinessRuleIdDelegate)),$$t_6.$$d_setBusinessRuleIdDelegate||($$t_6.$$d_setBusinessRuleIdDelegate=Function.createDelegate($$t_6,$$t_6.setBusinessRuleIdDelegate)));this.get_businessRuleViewModel().add_onValidation(this.$$d_$FB_2);var $$t_7=this;this.$4z_2.click(function($p1_0){$$t_7.get_businessRuleViewModel().get_businessRuleName()===window.LOCID_BUSINESSRULE_NAMEWATERMRK&&$$t_7.$9u_2()});this.$34_2.get_editView().get_editElement().attr("placeholder",window.LOCID_BR_RULENAME_PLACEHOLDER)},$DR_2:function(){this.$2D_2=this.get_jQueryProxy().selectElement("#descriptionfield_header");var $v_0=this.$2D_2.children(":first-child").children(":first-child").get_text();if(isNullOrEmptyString($v_0)||$v_0==="--")this.get_businessRuleViewModel().set_businessRuleDescription(window.LOCID_BUSINESSRULE_DESCRIPTION);else this.get_businessRuleViewModel().set_businessRuleDescription($v_0);var $v_1="alwaysedit";this.$2E_2=this.get_inlineEditControlMediator().createMultilineTextControl(this.$2D_2,"pbldescription",200,{value:this.get_businessRuleViewModel().get_businessRuleDescription()},Mscrm.BusinessRules.Constants.get_headerViewContainerId(),$v_1);this.$2E_2.get_dataContext().set_emptyValuePlaceholder(window.LOCID_BUSINESSRULE_DESCRIPTION);Mscrm.BusinessRules.BusinessRuleInitializer.$32.get_readOnly()&&this.$2E_2.get_editView().get_editElement().attr("disabled","true");var $$t_3=this.get_businessRuleViewModel(),$$t_4=this.get_businessRuleViewModel();this.get_bindingsMediator().addTextInputToStringValueBinding(new Mscrm.Proxies.JQueryObjectProxy(this.$2E_2.get_editView().get_editElement()),this.get_businessRuleViewModel(),"BusinessRuleDescription",$$t_3.$$d_getBusinessRuleDescriptionDelegate||($$t_3.$$d_getBusinessRuleDescriptionDelegate=Function.createDelegate($$t_3,$$t_3.getBusinessRuleDescriptionDelegate)),$$t_4.$$d_setBusinessRuleDescriptionDelegate||($$t_4.$$d_setBusinessRuleDescriptionDelegate=Function.createDelegate($$t_4,$$t_4.setBusinessRuleDescriptionDelegate)));var $$t_5=this;this.$2D_2.click(function($p1_0){($$t_5.get_businessRuleViewModel().get_businessRuleDescription()===""||$$t_5.get_businessRuleViewModel().get_businessRuleDescription()===window.LOCID_BUSINESSRULE_DESCRIPTION)&&$$t_5.$C3_2()});this.$2E_2.get_editView().get_editElement().attr("placeholder",window.LOCID_BR_DESCRIPTION_PLACEHOLDER)},$9u_2:function(){this.get_businessRuleViewModel().set_businessRuleName("");var $$t_0=this;window.setTimeout(function(){$$t_0.$34_2.setFocus()},0)},$C3_2:function(){this.get_businessRuleViewModel().setBusinessRuleDescriptionDelegate("");var $$t_0=this;window.setTimeout(function(){$$t_0.$2E_2.setFocus()},0)},$FB_2:function($p0,$p1){!$p1.isValid&&!$p1.$2l_1&&this.$Eg_2()},$Eg_2:function(){this.get_businessRuleViewModel().set_businessRuleName(isNullOrEmptyString(this.get_businessRuleViewModel().get_businessRuleName())?window.LOCID_BUSINESSRULE_NAMEWATERMRK:this.get_businessRuleViewModel().get_businessRuleName());var $$t_0=this;window.setTimeout(function(){$$t_0.$34_2.setFocus()},0)},$Dh_2:function(){var $v_0=this.$EF_2(),$v_1=this.$CI_2($v_0),$$t_2=this.get_businessRuleViewModel(),$$t_3=this.get_businessRuleViewModel();this.get_bindingsMediator().addTextInputToStringValueBinding(new Mscrm.Proxies.JQueryObjectProxy($v_1.get_editView().get_editElement()),this.get_businessRuleViewModel(),"TriggerFormId",$$t_2.$$d_getTriggerScopeIndexDelegate||($$t_2.$$d_getTriggerScopeIndexDelegate=Function.createDelegate($$t_2,$$t_2.getTriggerScopeIndexDelegate)),$$t_3.$$d_setTriggerScopeIndexDelegate||($$t_3.$$d_setTriggerScopeIndexDelegate=Function.createDelegate($$t_3,$$t_3.setTriggerScopeIndexDelegate)))},$EF_2:function(){var $v_0=this.get_jQueryProxy().selectElement("#scopecontainer"),$v_1=$v_0.getAttribute("data-scopevalue"),$v_2=null,$v_3=0;if(!isNullOrEmptyString($v_1)){$v_2=$v_1.substring(1,$v_1.length-1);if($v_2==="2"||$v_2==="1")$v_3=Array.indexOf(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.Scopes,$v_2);else $v_3=Array.indexOf(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.FormIds,$v_2.toUpperCase())}return $v_3},$CI_2:function($p0){var $v_0=this.get_jQueryProxy().selectElement("#ScopeSelector"),$v_1="normal";if(this.get_businessRuleViewModel().get_readOnly())$v_1="deactivated";else if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$84())$v_1="locked";var $v_2=Mscrm.InlineControlFactory.createInlinePicklistControlForDomByControlMode($v_0.get_jQueryObject(),"ScopeSelector",Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.Options,"ScopeSelector",$v_1,$p0.toString()),$v_3=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().ScopeSelectorData.Options[$p0].Label;$v_2.tryUpdateValueElementText($v_3);$v_2.get_chromeElement().addClass("scopeselectorelement");$v_2.get_chromeElement().attr("title",$v_3);$v_2.get_chromeElement().attr("aria-describedby","scopeLabel");$v_2.get_editView().get_editElement().attr("tabindex","-1");return $v_2},$34_2:null,$4z_2:null,$2E_2:null,$2D_2:null};Mscrm.BusinessRules.Views.MessageHelper=function(){};Mscrm.BusinessRules.Views.MessageHelper.showError=function($p0,$p1){$P_CRM(".messagetext").hide().text($p0).attr("title",$p0).show();$P_CRM(".messagebar").hide().removeAttr("class").addClass("messagebar").addClass($p1).addClass("error").removeClass("warning").show();Mscrm.BusinessRules.Views.MessageHelper.$BG()};Mscrm.BusinessRules.Views.MessageHelper.showWarning=function($p0,$p1){$P_CRM(".messagetext").hide().text($p0).attr("title",$p0).show();$P_CRM(".messagebar").hide().removeAttr("class").addClass("messagebar").addClass($p1).addClass("warning").removeClass("error").show();Mscrm.BusinessRules.Views.MessageHelper.$BG()};Mscrm.BusinessRules.Views.MessageHelper.hideBar=function(){$P_CRM(".messagebar").hide().removeAttr("class").addClass("messagebar");Mscrm.BusinessRules.Views.MessageHelper.$Ep()};Mscrm.BusinessRules.Views.MessageHelper.$Ep=function(){$P_CRM(".mscrm-pbleditor-HeaderViewContainer").removeClass("messagebarshown");$P_CRM(".mscrm-pbleditor-BodyViewContainer").removeClass("messagebarshown")};Mscrm.BusinessRules.Views.MessageHelper.$BG=function(){$P_CRM(".mscrm-pbleditor-HeaderViewContainer").addClass("messagebarshown");$P_CRM(".mscrm-pbleditor-BodyViewContainer").addClass("messagebarshown")};Mscrm.BusinessRules.Views.WarningView=function($p0,$p1){this.$$d_$Ap_0=Function.createDelegate(this,this.$Ap_0);this.$1_0=$p1;this.$2_0=$p0;this.$Bt_0();this.$Bq_0()};Mscrm.BusinessRules.Views.WarningView.prototype={$Bt_0:function(){var $v_0=String.format("<div class='{0}'></div><div class='{1}'></div>","warningviewiconcontainer","warningviewmessage");this.$1_0.append(this.get_$6t_0().fromHtml($v_0));this.$1_0.addClass("warningviewcontainer");var $v_1=this.get_$6t_0().selectInElement(".warningviewiconcontainer",this.$1_0);$v_1.append(this.get_$6t_0().fromElement(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/warning.png"))).addClass("erroricon"));$v_1.append(this.get_$6t_0().fromElement(Mscrm.ImageStrip.getImage(Mscrm.CrmUri.create("/_imgs/inlineedit/alert.png"))).addClass("warningicon"))},$Bq_0:function(){if(IsNull(this.$2_0))return;this.$2_0.get_leftOperand().add_propertyChanged(this.$$d_$Ap_0);this.$2_0.get_rightOperand().add_propertyChanged(this.$$d_$Ap_0);this.$Ap_0(null,null)},$Ap_0:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.EntityAttributeExpressionVisitor,$v_1=this.$2_0.get_leftOperand().get_innerOperand(),$v_2=this.$2_0.get_rightOperand().get_currentInnerOperand();!IsNull($v_1)&&$v_1.get_currentEditExpression().accept($v_0);!IsNull($v_2)&&$v_2.get_currentEditExpression().accept($v_0);if($v_0.get_supportsIndexing())this.clearView();else this.displayView(window.LOCID_CALCULATEDFIELD_SORT_WARN,0)},dispose:function(){if(IsNull(this.$2_0))return;!IsNull(this.$2_0.get_leftOperand())&&this.$2_0.get_leftOperand().add_propertyChanged(this.$$d_$Ap_0);!IsNull(this.$2_0.get_rightOperand())&&this.$2_0.get_rightOperand().add_propertyChanged(this.$$d_$Ap_0)},get_$6t_0:function(){if(IsNull(this.$7d_0))this.$7d_0=new Mscrm.Proxies.JQueryProxy;return this.$7d_0},get_$9I_0:function(){return this.get_$6t_0().selectInElement(".warningviewmessage",this.$1_0)},displayView:function($p0,$p1){this.clearView();switch($p1){case 0:this.$1_0.addClass("warning");break;case 1:default:this.$1_0.addClass("error");break}this.get_$9I_0().get_jQueryObject().text($p0);this.get_$9I_0().get_jQueryObject().attr("title",$p0);this.showMessage()},clearView:function(){this.get_$9I_0().get_jQueryObject().empty();this.$1_0.removeClass("error");this.$1_0.removeClass("warning");this.hideMessage()},hideMessage:function(){this.$1_0.find(".warningviewmessage").attribute("style","display: none;")},showMessage:function(){this.$1_0.find(".warningviewmessage").attribute("style","display: inline;")},setIconTitle:function($p0){this.$1_0.find(".erroricon").attribute("title",$p0)},$7d_0:null,$1_0:null,$2_0:null};Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor=function(){Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.initializeBase(this);this._results=Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance()};Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.instance=function(){return new Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor};Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.prototype={$3m_2:null,$1u_2:null,_results:null,get_results:function(){return this._results},visitWorkflowStep:function(workflowStep){this.visitChildren(workflowStep)},visitConditionBranchStep:function(conditionBranchStep){conditionBranchStep.get_conditionExpression().accept(this);this.visitChildren(conditionBranchStep)},visitConditionStep:function(conditionStep){this.visitChildren(conditionStep)},visitSetAttributeValueStep:function(setAttributeValueStep){if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24())this.$1u_2=setAttributeValueStep.get_entity().get_entityName();setAttributeValueStep.get_propertySpec().accept(this)},$BO_2:function($p0){if(!$p0.get_isHierarchical())return;var $v_0=$p0.get_workflow().get_primaryEntityName(),$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($v_0).DisplayName,$v_2=this.$CM_2($p0.get_workflow().get_primaryEntityName());!$v_2&&this._results.addResult(3,$v_1);$v_2===2&&this._results.addResult(4,$v_1);$p0.get_hierarchicalRelationshipName()!==Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_hierarchyName()&&this._results.addResult(6,$p0.get_hierarchicalRelationshipName())},$F8_2:function($p0){if(!$p0.get_sourceFilter())return;$p0.get_sourceFilter().accept(this)},$F9_2:function($p0){if(!$p0.get_targetFilter())return;$p0.get_targetFilter().accept(this)},$F5_2:function($p0){if(!$p0.get_aggregate())return;var $v_0=$p0.get_aggregate().getParameters();$v_0&&$v_0.length===2&&Microsoft.Crm.Workflow.Expressions.ExpressionBase.isInstanceOfType($v_0[1])&&$v_0[1].accept(this)},visitRollupRuleStep:function(rollupRuleStep){this.$BO_2(rollupRuleStep);this.$F8_2(rollupRuleStep);this.$F9_2(rollupRuleStep);this.$F5_2(rollupRuleStep)},visitBinaryExpression:function(expression){expression.get_leftOperand().accept(this);for(var $v_0=0;$v_0<expression.get_rightOperands().get_count();$v_0++)expression.get_rightOperands().get_item($v_0).accept(this);this.$3m_2=null;this.$1u_2=null},visitPrimitiveExpression:function(expression){if(expression.get_value()){var $v_0=expression.get_value().toString();if(expression.get_type()===10){var $v_1=this.$EE_2($v_0,this.$1u_2,this.$3m_2);!$v_1&&this._results.addResult(2,$v_0)}}},visitTimeSpanExpression:function(expression){},visitEntityAttributeExpression:function(expression){if(Microsoft.Crm.Workflow.Expressions.RelatedEntity.isInstanceOfType(expression.get_entity())){this.$3m_2=expression.get_entity().get_relatedAttributeName();this.$1u_2=expression.get_workflow().get_primaryEntityName();this.$88_2(this.$1u_2,this.$3m_2)}this.$3m_2=expression.get_attributeName();this.$1u_2=expression.get_entity().get_entityName();this.$88_2(this.$1u_2,this.$3m_2)},visitPropertySpecification:function(propertySpecification){if(!Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()||!this.$1u_2)this.$1u_2=propertySpecification.get_value().get_workflow().get_primaryEntityName();this.$3m_2=propertySpecification.get_name();!Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()&&this.$88_2(this.$1u_2,propertySpecification.get_name());propertySpecification.get_value().accept(this)},$88_2:function($p0,$p1){if(!this.$2r_2($p0,$p1)){this._results.addResult(1,$p1);return}!this.$Bc_2($p0,$p1)&&this._results.addResult(5,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeLocalizedNameFromEntity($p0,$p1));this.$BZ_2($p0,$p1)&&this._results.addResult(0,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeLocalizedNameFromEntity($p0,$p1))},visitMethodCallExpression:function(expression){var $v_0=expression.getParameters();if(expression.get_method()===3)for(var $v_1=1;$v_1<$v_0.length;$v_1++)$v_0[$v_1].accept(this);else!expression.get_method()&&$v_0[0].accept(this)},visitLookupExpression:function(expression){},visitSetVisibilityStep:function(setVisibilityStep){var $v_0;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType(setVisibilityStep.get_entity()))$v_0=this.$2r_2(setVisibilityStep.get_entity().get_entityName(),setVisibilityStep.get_controlId());else $v_0=this.$2r_2(setVisibilityStep.get_workflow().get_primaryEntityName(),setVisibilityStep.get_controlId());!$v_0&&this._results.addResult(1,setVisibilityStep.get_controlId())},visitSetDefaultValueStep:function(setDefaultValueStep){var $v_0;if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()&&Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType(setDefaultValueStep.get_entity())){this.$1u_2=setDefaultValueStep.get_entity().get_entityName();$v_0=this.$2r_2(this.$1u_2,setDefaultValueStep.get_propertySpec().get_name())}else $v_0=this.$2r_2(setDefaultValueStep.get_workflow().get_primaryEntityName(),setDefaultValueStep.get_Id());!$v_0&&this._results.addResult(1,setDefaultValueStep.get_Id())},visitSetDisplayModeStep:function(setDisplayModeStep){var $v_0;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType(setDisplayModeStep.get_entity()))$v_0=this.$2r_2(setDisplayModeStep.get_entity().get_entityName(),setDisplayModeStep.get_controlId());else $v_0=this.$2r_2(setDisplayModeStep.get_workflow().get_primaryEntityName(),setDisplayModeStep.get_controlId());!$v_0&&this._results.addResult(1,setDisplayModeStep.get_controlId())},visitSetMessageStep:function(setMessageStep){var $v_0;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType(setMessageStep.get_entity()))$v_0=this.$2r_2(setMessageStep.get_entity().get_entityName(),setMessageStep.get_controlId());else $v_0=this.$2r_2(setMessageStep.get_workflow().get_primaryEntityName(),setMessageStep.get_controlId());!$v_0&&this._results.addResult(1,setMessageStep.get_controlId())},visitCustomJavascriptStep:function(customJSStep){},visitSetFieldRequiredLevelStep:function(setFieldRequiredLevelStep){var $v_0;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType(setFieldRequiredLevelStep.get_entity()))$v_0=this.$2r_2(setFieldRequiredLevelStep.get_entity().get_entityName(),setFieldRequiredLevelStep.get_controlId());else $v_0=this.$2r_2(setFieldRequiredLevelStep.get_workflow().get_primaryEntityName(),setFieldRequiredLevelStep.get_controlId());!$v_0&&this._results.addResult(1,setFieldRequiredLevelStep.get_controlId())},$Ai_2:function($p0,$p1){return (isNullOrEmptyString($p0)||Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName()===$p0)&&Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($p0).PrimaryAttributeLogicName===$p1},$Bc_2:function($p0,$p1){if(this.$Ai_2($p0,$p1))return true;var $v_0=isNullOrEmptyString($p0)||Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName()===$p0?Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName($p1):Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getRelatedAttributeByName($p0,$p1);if(!$v_0.AdditionalMetadata.SourceType)return true;var $v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata();if(IsNull($v_1))return true;if($v_1.LogicalName===$p1&&Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName()===$p0)return true;switch($v_1.AdditionalMetadata.SourceType){case 1:return $v_0.AdditionalMetadata.SourceTypeMask!==32;case 2:return $v_0.AdditionalMetadata.SourceTypeMask===1;case 0:default:return true}},$2r_2:function($p0,$p1){if(this.$Ai_2($p0,$p1))return true;var $v_0=isNullOrEmptyString($p0)||Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_entityLogicalName()===$p0?Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName($p1):Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getRelatedAttributeByName($p0,$p1);return !IsNull($v_0)},$BZ_2:function($p0,$p1){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($p0,$p1);if($v_0&&$v_0.IsFieldLevelSecurityEnabled)return true;return false},$CM_2:function($p0){return Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($p0).HierarchyType},$EE_2:function($p0,$p1,$p2){var $v_0=false,$v_1;if(!$p2){if(IsNull(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata()))return false;$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata().AdditionalMetadata}else{var $v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($p1,$p2);$v_1=$v_2.AdditionalMetadata}if($v_1.Options.length===1&&$v_1.Options[0].Value===-1)return false;for(var $v_3=0;$v_3<$v_1.Options.length;$v_3++)if($p0===$v_1.Options[$v_3].Value.toString()){$v_0=true;break}return $v_0}};Mscrm.BusinessRules.Views.EntityAttributeExpressionVisitor=function(){Mscrm.BusinessRules.Views.EntityAttributeExpressionVisitor.initializeBase(this);this.$o_2=Mscrm.BusinessRules.SharedMethods.getList(Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression)};Mscrm.BusinessRules.Views.EntityAttributeExpressionVisitor.prototype={$o_2:null,get_expressions:function(){return this.$o_2},get_supportsIndexing:function(){for(var $v_0=0;$v_0<this.$o_2.get_count();$v_0++){var $v_1=this.$o_2.get_item($v_0);if(Microsoft.Crm.Workflow.Expressions.RelatedEntity.isInstanceOfType($v_1.get_entity()))return false;var $v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($v_1.get_entity().get_entityName(),$v_1.get_attributeName());if(IsNull($v_2)||IsNull($v_2.AdditionalMetadata))return true;if($v_2.AdditionalMetadata.SourceType===1)return false;if($v_2.AdditionalMetadata.IsLogical)return false;if($v_2.AdditionalMetadata.IsStoredOnPrimaryTable!==Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_calculatedFieldMetadata().AdditionalMetadata.IsStoredOnPrimaryTable)return false}return true},visitEntityAttributeExpression:function(expression){this.$o_2.add(expression)},visitPrimitiveExpression:function(expression){},visitLookupExpression:function(expression){},visitTimeSpanExpression:function(expression){}};Mscrm.BusinessRules.Views.EntityAttributeVisitorResults=function(){this.$6M_0={}};Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.instance=function(){return new Mscrm.BusinessRules.Views.EntityAttributeVisitorResults};Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.prototype={get_resultsDictionary:function(){return this.$6M_0},getList:function(resultType){!Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryContainKey(Mscrm.BusinessRules.Views.ResultType,Sales.Common.Framework.IList$1.$$(String),this.$6M_0,resultType)&&Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryAdd(Mscrm.BusinessRules.Views.ResultType,Sales.Common.Framework.IList$1.$$(String),this.$6M_0,resultType,Microsoft.Crm.Workflow.Utils.SharedUtility.getList(String));return Microsoft.Crm.Workflow.Utils.SharedUtility.dictionaryGetValue(Mscrm.BusinessRules.Views.ResultType,Sales.Common.Framework.IList$1.$$(String),this.$6M_0,resultType)},addResult:function(resultType,entry){this.getList(resultType).add(entry)},compileResults:function(result){if(!result)return;var $$dict_2=result.get_resultsDictionary();for(var $$key_3 in $$dict_2){var $v_0={key:$$key_3,value:$$dict_2[$$key_3]};this.$C9_0(false,$v_0.value,this.getList($v_0.key))}},$C9_0:function($p0,$p1,$p2){if(IsNull($p1))return;for(var $v_0=0;$v_0<$p1.get_count();$v_0++)($p0||!$p2.contains($p1.get_item($v_0).toString()))&&$p2.add($p1.get_item($v_0).toString())}};Type.registerNamespace("Mscrm.BusinessRules.Builders");Mscrm.BusinessRules.Builders.IConditionBranchStepSectionViewViewBuilder=function(){};Mscrm.BusinessRules.Builders.IConditionBranchStepSectionViewViewBuilder.registerInterface("Mscrm.BusinessRules.Builders.IConditionBranchStepSectionViewViewBuilder");Mscrm.BusinessRules.Builders.IExpressionElementHtmlBuilder=function(){};Mscrm.BusinessRules.Builders.IExpressionElementHtmlBuilder.registerInterface("Mscrm.BusinessRules.Builders.IExpressionElementHtmlBuilder");Mscrm.BusinessRules.Builders.IReadToolBarButtonViewBuilder=function(){};Mscrm.BusinessRules.Builders.IReadToolBarButtonViewBuilder.registerInterface("Mscrm.BusinessRules.Builders.IReadToolBarButtonViewBuilder");Mscrm.BusinessRules.Builders.IReadToolBarViewBuilder=function(){};Mscrm.BusinessRules.Builders.IReadToolBarViewBuilder.registerInterface("Mscrm.BusinessRules.Builders.IReadToolBarViewBuilder");Mscrm.BusinessRules.Builders.ChromeStateDataBuilder=function(){};Mscrm.BusinessRules.Builders.ChromeStateDataBuilder.prototype={build:function(){var $v_0=new Mscrm.BusinessRules.BusinessRuleStepChromeStateData;return $v_0}};Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder=function($p0,$p1,$p2){Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1;this.$3Z_2=$p2};Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder.prototype={$d_2:null,$3Z_2:false,buildModel:function(){var $v_0;if(this.$3Z_2)$v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$CR();else{var $v_6=Mscrm.BusinessRules.PersistentAttributesFilter.instance().firstValidField(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_getAllAttributes());$v_0=IsNull($v_6)?Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$91(null):Mscrm.BusinessRules.ExpressionBuilder.buildEntityAttributeExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_6.LogicalName,null)}var $v_1=$v_0.get_attributeName(),$v_2=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName($v_1).AdditionalMetadata,$v_3=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$92($v_0,$v_2,true),$v_4=new Microsoft.Crm.Workflow.Expressions.PropertySpecification($v_0.get_attributeName(),$v_3),$v_5=new Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep(this.workflowStep,$v_4);$v_5.set_workflow(this.workflowStep);$v_5.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_5.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_5.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_5);return $v_5},renderStep:function($p0){var $v_0=this.viewModel,$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),$v_0.get_attributeName()),$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.get_readDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0.$3_3.get_innerOperand().get_displayValue())));$p0.append($v_2)}};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder=function(){this.$h_0=new Mscrm.Proxies.JQueryProxy};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$91=function($p0){var $v_0=null,$v_1=false,$v_2=0;while(!$v_1){$v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex($p0,$v_2++);if(IsNull($v_0))throw Error.create("Default Attribute is null");$v_1=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().hasExpressionTypeMapping($v_0.Type)}return Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A($v_0.LogicalName,$v_0.Type,$p0)};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$CR=function(){var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().CalculatedField;return Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A($v_0.LogicalName,$v_0.Type,null)};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$92=function($p0,$p1,$p2){var $v_0=$p0.get_type(),$v_1=$p0.get_entity().get_entityName(),$v_2=null;$v_2=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getAttributesForAttributeType($v_0,$v_1,$p1);for(var $v_3=$p0.get_attributeName(),$v_4=0;$v_4<$v_2.length;$v_4++)if($v_2[$v_4]){$v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndIndex($v_1,$v_2[$v_4]).LogicalName;if($p2)Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().addNullOperandType($p0.get_type(),$v_1,$v_3);else Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().removeNullOperandForAllTypes();break}return Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A($v_3,$v_0,$v_1)};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A=function($p0,$p1,$p2){var $v_0=Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_1=null;if(Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$Dq($p2))$v_1=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$Cr($p2);if(!$v_1)$v_1=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity($v_0);$p2&&$v_1.set_entityName($p2);var $v_2=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_1,$p0);$v_2.set_type($p1);return $v_2};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$Cr=function($p0){for(var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().RelatedLinkedEntities||new Array(0),$$arr_2=$v_0,$$len_3=$$arr_2.length,$$idx_4=0;$$idx_4<$$len_3;++$$idx_4){var $v_1=$$arr_2[$$idx_4];if($v_1.RelationshipEntity.EntityLogicalName===$p0)return new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_1.RelationshipAttribute.LogicalName,$p0,$v_1.RelationshipName)}return null};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$Dq=function($p0){return Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep().get_primaryEntityName()!==$p0};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$CS=function($p0){return new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),"",$p0)};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$7x=function($p0,$p1){var $v_0=null;if(Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked.isInstanceOfType($p0)&&Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($p0.get_entityName(),$p1)){$v_0=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($p0,$p1);$v_0.set_type(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($p0.get_entityName(),$p1).Type)}else $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$3A($p1,Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeType($p1),null);return $v_0};Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.prototype={buildExpressionViewModel:function(isFirstCondition,logicalOperator,expressionId,parentViewModel){var $v_0=this.$CG_0(parentViewModel.get_entityName()),$v_1=new Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel(logicalOperator,Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.$4H($v_0),expressionId,parentViewModel);$v_1.$3Q_2=isFirstCondition;return $v_1},renderExpressionView:function(conditionSection,viewModel){var $v_0=new Sys.StringBuilder,$v_1=new Mscrm.BusinessRules.Builders.ExpressionElementHtmlBuilder;$v_1.buildHtml($v_0,viewModel);var $v_2=this.$h_0.fromHtml($v_0.toString());conditionSection.append($v_2);return $v_2},$CG_0:function($p0){var $v_0=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$91($p0);Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().removeNullOperandForAllTypes();for(var $v_1=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getConditionOperatorForAttributeType($v_0.get_type()),$v_2=$v_1[0],$$arr_4=$v_1,$$len_5=$$arr_4.length,$$idx_6=0;$$idx_6<$$len_5;++$$idx_6){var $v_3=$$arr_4[$$idx_6];if(6===$v_3){$v_2=6;break}}if(Microsoft.Crm.Workflow.Expressions.OperatorClassifier.isUnaryOperator($v_2))return new Microsoft.Crm.Workflow.Expressions.UnaryExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_2,$v_0);else{var $v_4=Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.get_instance().getOperandTypeForAttributeType($v_0.get_type()),$v_5=null;if($v_4[0]===1)$v_5=this.$CT_0($v_0);else{var $v_6=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByEntityAndName($p0,$v_0.get_attributeName()).AdditionalMetadata;$v_5=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$92($v_0,$v_6,false)}return new Microsoft.Crm.Workflow.Expressions.BinaryExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),6,$v_0,[$v_5])}},$CT_0:function($p0){return Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$CS($p0.get_type())},$h_0:null};Mscrm.BusinessRules.Builders.ReadToolBarButtonViewBuilder=function(){};Mscrm.BusinessRules.Builders.ReadToolBarButtonViewBuilder.prototype={$h_0:null,get_jQueryProxy:function(){return this.$h_0||(this.$h_0=new Mscrm.Proxies.JQueryProxy)},set_jQueryProxy:function($p0){this.$h_0=$p0;return $p0},build:function($p0){var $v_0=new Mscrm.BusinessRules.Views.ReadToolBarButtonView;$v_0.set_dataContext($p0);var $v_1=new Sys.StringBuilder;$v_1.append(String.format('<a role="menuitem" class="ms-crm-Button" aria-label="{0}" title="{0}"></a>',CrmEncodeDecode.CrmHtmlAttributeEncode($p0.get_titleText())));$v_0.set_element(this.get_jQueryProxy().fromHtml($v_1.toString()));var $v_2=this.get_jQueryProxy().fromElement(Mscrm.ImageStrip.getImage($p0.get_iconUrl()));$v_0.set_icon($v_2);var $v_3=this.get_jQueryProxy().fromElement(Mscrm.ImageStrip.getImage($p0.get_hoverIconUrl()));$v_0.set_hoverIcon($v_3);return $v_0}};Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder=function(){};Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder.prototype={$h_0:null,get_jQueryProxy:function(){return this.$h_0||(this.$h_0=new Mscrm.Proxies.JQueryProxy)},set_jQueryProxy:function($p0){this.$h_0=$p0;return $p0},buildAction:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.ActionReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));var $$t_4=$v_0;$p1.get_moveUpCommand().set_moveUpDelegate($$t_4.$$d_moveUpHandler||($$t_4.$$d_moveUpHandler=Function.createDelegate($$t_4,$$t_4.moveUpHandler)));var $$t_5=$v_0;$p1.get_moveDownCommand().set_moveDownDelegate($$t_5.$$d_moveDownHandler||($$t_5.$$d_moveDownHandler=Function.createDelegate($$t_5,$$t_5.moveDownHandler)));return $v_0},buildCondition:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.ConditionReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));return $v_0},buildActionWithCondition:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.ConditionActionReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));return $v_0},buildExpression:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.ExpressionReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));return $v_0},buildEmptyReadToolBar:function($p0){var $v_0=new Mscrm.BusinessRules.Views.ReadToolBarView;$v_0.set_dataContext($p0);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));return $v_0},buildTargetEntityReadToolBar:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.TargetEntityReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));return $v_0},buildTargetLinkedEntityReadToolBar:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));return $v_0},buildAggregationReadToolBar:function($p0,$p1){var $v_0=new Mscrm.BusinessRules.Views.AggregationReadToolBarView($p0);$v_0.set_dataContext($p1);$v_0.set_element(this.get_jQueryProxy().fromHtml("<div class='ms-crm-ReadToolBar'></div>"));var $$t_3=$v_0;$p1.get_deleteCommand().set_deleteDelegate($$t_3.$$d_deleteHandler||($$t_3.$$d_deleteHandler=Function.createDelegate($$t_3,$$t_3.deleteHandler)));return $v_0}};Mscrm.BusinessRules.Builders.ExpressionElementHtmlBuilder=function(){};Mscrm.BusinessRules.Builders.ExpressionElementHtmlBuilder.prototype={buildHtml:function(htmlBuilder,viewModel){this.$B0_0(htmlBuilder,viewModel);this.$EY_0(htmlBuilder,viewModel);this.$Az_0(htmlBuilder)},buildElseConditionHtml:function(htmlBuilder,viewModel){this.$B0_0(htmlBuilder,viewModel);htmlBuilder.append(String.format(Mscrm.BusinessRules.HtmlFormat.elseConditionFormat,CrmEncodeDecode.CrmHtmlEncode(window.LOCID_PBLEXPRESSION_ELSEDISPLAY)));this.$Az_0(htmlBuilder)},$EY_0:function($p0,$p1){var $v_0=$p1.get_leftOperand().get_displayValue(),$v_1=$p1.get_expressionOperator().get_displayName();$p0.append(String.format(Mscrm.BusinessRules.HtmlFormat.binaryExpressionFormat,CrmEncodeDecode.CrmHtmlEncode($p1.get_expressionPrefix()),CrmEncodeDecode.CrmHtmlEncode($v_0),CrmEncodeDecode.CrmHtmlEncode($v_1),CrmEncodeDecode.CrmHtmlEncode($p1.get_rightOperand().get_displayValue()),CrmEncodeDecode.CrmHtmlAttributeEncode(this.$7D_0),CrmEncodeDecode.CrmHtmlAttributeEncode(this.$7Q_0),CrmEncodeDecode.CrmHtmlAttributeEncode(this.$7V_0),CrmEncodeDecode.CrmHtmlAttributeEncode(this.$7f_0)))},$B0_0:function($p0,$p1){this.$Ei_0($p1);$p0.append(String.format(Mscrm.BusinessRules.HtmlFormat.expressionStartFormat,CrmEncodeDecode.CrmHtmlAttributeEncode($p1.get_id())));$p0.append(String.format(Mscrm.BusinessRules.HtmlFormat.expressionInlineHtmlStartFormat,CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_chrome",$p1.get_id())),CrmEncodeDecode.CrmHtmlAttributeEncode(this.$3r_0)))},$Az_0:function($p0){$p0.append("</div></div></div>");$p0.append("</div>")},$Ei_0:function($p0){this.$7D_0=String.format("{0}_rm_expprefix",$p0.get_id());this.$7Q_0=String.format("{0}_rm_lefopcon",$p0.get_id());this.$7V_0=String.format("{0}_rm_conopcon",$p0.get_id());if(!IsNull($p0.get_rightOperand()))this.$7f_0=String.format("{0}_rm_rigopcon",$p0.get_id());this.$3r_0=this.$7D_0+" "+this.$7Q_0+" "+this.$7V_0+" "+this.$7f_0},$3r_0:"",$7Q_0:"",$7f_0:"",$7V_0:"",$7D_0:""};Mscrm.BusinessRules.Builders.SectionBuilder=function($p0){this.workflowStep=$p0};Mscrm.BusinessRules.Builders.SectionBuilder.prototype={sectionId:null,workflowStep:null,viewModel:null,renderView:function(){var $v_0=new Sys.StringBuilder;this.$Ea_0($v_0);this.renderStep($v_0);this.$EZ_0($v_0);return $v_0.toString()},get_viewModel:function(){return this.viewModel},$Ea_0:function($p0){$p0.append(String.format(Mscrm.BusinessRules.HtmlFormat.stepStartFormat,CrmEncodeDecode.CrmHtmlAttributeEncode(this.sectionId)));$p0.append(String.format(Mscrm.BusinessRules.HtmlFormat.stepInlineHtmlStartFormat,CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_chrome",this.sectionId)),CrmEncodeDecode.CrmHtmlAttributeEncode(String.format("{0}_stepcontent",this.sectionId))))},$EZ_0:function($p0){$p0.append("</div></div></div>");$p0.append("</div>")}};Mscrm.BusinessRules.Builders.StepBaseBuilder=function($p0){Mscrm.BusinessRules.Builders.StepBaseBuilder.initializeBase(this,[$p0])};Mscrm.BusinessRules.Builders.StepBaseBuilder.prototype={buildView:function($p0){var $v_0=this.buildModel();this.viewModel=Mscrm.BusinessRules.ViewModels.StepSectionViewModelFactory.$AM($v_0);this.sectionId=$v_0.get_Id();var $v_1=this.renderView(),$v_2=$P_CRM($v_1);$p0.get_jQueryObject().append($v_2);var $v_3=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.viewModel,(new Mscrm.Proxies.JQueryProxy).fromElement($v_2[0]));return $v_3},renderStep:function($p0){}};Mscrm.BusinessRules.Builders.SetDefaultValueStepBuilder=function($p0,$p1){Mscrm.BusinessRules.Builders.SetDefaultValueStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1};Mscrm.BusinessRules.Builders.SetDefaultValueStepBuilder.prototype={$d_2:null,buildModel:function(){var $v_0=Mscrm.BusinessRules.PersistentAttributesFilter.instance().firstValidField(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_getAllAttributes()),$v_1=IsNull($v_0)?Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$91(null):Mscrm.BusinessRules.ExpressionBuilder.buildEntityAttributeExpression(Mscrm.BusinessRules.BusinessRuleManager.get_instance().get_rootWorkflowStep(),$v_0.LogicalName,null),$v_2=$v_1.get_attributeName(),$v_3=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getAttributeByName($v_2).AdditionalMetadata,$v_4=Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.$92($v_1,$v_3,false),$v_5=new Microsoft.Crm.Workflow.Expressions.PropertySpecification($v_1.get_attributeName(),$v_4),$v_6=new Microsoft.Crm.Workflow.ObjectModel.SetDefaultValueStep(this.workflowStep,$v_5);$v_6.set_workflow(this.workflowStep);$v_6.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_6.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_6.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_6);return $v_6},renderStep:function($p0){var $v_0=this.viewModel,$v_1=Mscrm.BusinessRules.BusinessRuleEntityManager.getAttributeLocalizedName(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance(),$v_0.get_attributeName()),$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.get_readDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0.$3_3.get_displayValue())));$p0.append($v_2)}};Mscrm.BusinessRules.Builders.SetDisplayModeStepBuilder=function($p0,$p1){Mscrm.BusinessRules.Builders.SetDisplayModeStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1;var $v_0=Mscrm.BusinessRules.PersistentAttributesFilter.instance().firstValidField(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_getAllAttributes());if(!IsNull($v_0)){this.$2C_2=$v_0.LogicalName;this.$2B_2=$v_0.Label.Description}};Mscrm.BusinessRules.Builders.SetDisplayModeStepBuilder.prototype={$8G_2:true,$2C_2:"",$2B_2:"",$d_2:null,buildModel:function(){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.SetDisplayModeStep(this.workflowStep);$v_0.set_workflow(this.workflowStep);$v_0.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_0.set_controlId(this.$2C_2);$v_0.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_0.set_controlType("standard");$v_0.set_isReadOnly(this.$8G_2);$v_0.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_0);return $v_0},renderStep:function($p0){var $v_0=this.viewModel,$v_1=this.$8G_2?window.LOCID_BUSINESSRULE_READ_ONLY:window.LOCID_BUSINESSRULE_READWRITE,$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.$2B_2)));$p0.append($v_2)}};Mscrm.BusinessRules.Builders.SetMessageStepBuilder=function($p0,$p1,$p2){Mscrm.BusinessRules.Builders.SetMessageStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1;this.$8I_2=$p2;var $v_0=Mscrm.BusinessRules.PersistentAttributesFilter.instance().firstValidField(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_getAllAttributes());if(!IsNull($v_0)){this.$2C_2=$v_0.LogicalName;this.$2B_2=$v_0.Label.Description}};Mscrm.BusinessRules.Builders.SetMessageStepBuilder.prototype={$8J_2:"",$8I_2:"",$2C_2:"",$2B_2:"",$d_2:null,buildModel:function(){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.SetMessageStep(this.workflowStep);$v_0.set_workflow(this.workflowStep);$v_0.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_0.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_0.set_level(this.$8I_2);$v_0.set_controlId(this.$2C_2);var $v_1=new Microsoft.Crm.Workflow.ObjectModel.StepLabel;$v_1.set_description(this.$8J_2);$v_1.set_languageCode(parseInt(window.LOCID_BUSINESSRULE_SETORGLCID));$v_1.set_labelId(Mscrm.Utilities.createGuid());$v_0.get_stepLabels().add($v_1);$v_0.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_0);return $v_0},renderStep:function($p0){var $v_0=this.viewModel,$v_1=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.$2B_2)),String.format('<b>"{0}"</b>',CrmEncodeDecode.CrmHtmlEncode(this.$8J_2)));$p0.append($v_1)}};Mscrm.BusinessRules.Builders.RunScriptStepBuilder=function($p0,$p1){Mscrm.BusinessRules.Builders.RunScriptStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1};Mscrm.BusinessRules.Builders.RunScriptStepBuilder.prototype={$9W_2:"",$d_2:null,buildModel:function(){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.CustomJavascriptStep(this.workflowStep);$v_0.set_workflow(this.workflowStep);$v_0.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_0.set_javascript(this.$9W_2);$v_0.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_0);return $v_0},renderStep:function($p0){var $v_0=this.viewModel,$v_1=Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.getReadDisplayFormat());$p0.append($v_1)}};Mscrm.BusinessRules.Builders.SetRequiredLevelStepBuilder=function($p0,$p1){Mscrm.BusinessRules.Builders.SetRequiredLevelStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1;var $v_0=Mscrm.BusinessRules.PersistentAttributesFilter.instance().firstValidField(Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().get_getAllAttributes());if(!IsNull($v_0)){this.$2C_2=$v_0.LogicalName;this.$2B_2=$v_0.Label.Description}};Mscrm.BusinessRules.Builders.SetRequiredLevelStepBuilder.prototype={$8K_2:0,$2C_2:"",$2B_2:"",$d_2:null,buildModel:function(){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.SetFieldRequiredLevelStep(this.workflowStep);$v_0.set_workflow(this.workflowStep);$v_0.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_0.set_controlId(this.$2C_2);$v_0.set_controlType("standard");$v_0.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_0.set_requiredLevel(this.$8K_2);$v_0.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_0);return $v_0},renderStep:function($p0){var $v_0=this.viewModel,$v_1=!this.$8K_2?window.LOCID_BUSINESSRULE_NOBIZREQUIRED:window.LOCID_BUSINESSRULE_BIZREQUIRED,$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.$2B_2)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)));$p0.append($v_2)}};Mscrm.BusinessRules.Builders.SetVisibilityStepBuilder=function($p0,$p1){Mscrm.BusinessRules.Builders.SetVisibilityStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1;var $v_0=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.Fields;if($v_0&&$v_0.length>0){this.$2C_2=$v_0[0].LogicalName;this.$2B_2=$v_0[0].Label.Description}};Mscrm.BusinessRules.Builders.SetVisibilityStepBuilder.prototype={$8L_2:true,$2C_2:"",$2B_2:"",$d_2:null,buildModel:function(){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.SetVisibilityStep(this.workflowStep);$v_0.set_workflow(this.workflowStep);$v_0.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_0.set_controlId(this.$2C_2);$v_0.set_controlType("standard");$v_0.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_0.set_isVisible(this.$8L_2);$v_0.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_0);return $v_0},renderStep:function($p0){var $v_0=this.viewModel,$v_1=this.$8L_2?window.LOCID_BUSINESSRULE_SHOW:window.LOCID_BUSINESSRULE_HIDE,$v_2=String.format(Mscrm.BusinessRules.Views.ViewHelper.$1L($v_0.getVisibleFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_1)),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode(this.$2B_2)));$p0.append($v_2)}};Mscrm.BusinessRules.Builders.ConditionBranchStepSectionViewViewBuilder=function(workflowStep,stepContainer){this.$9f_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div class='{0}' id='{1}' data-imageid='{2}'>","actioncollection","{0}_collection",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_expression"));this.$9s_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' class='{1}'><a href='#' class='{2}' title='{3}'><span class='{4}'><img id='{5}' alt='{3}' src='/_imgs/imagestrips/transparent_spacer.gif' class='ms-crm-ImageStrip-arrowdown'/></span><span class='{6}'>{7}</span></a></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_expression"),"sectionheader calcfield","sectionheadercontainer",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_ELSE),"sectionheaderimage",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_expression"),"sectionheadertext",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCULATEDFIELD_ELSE));this.$B5_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' class='{1}'><a href='#' class='{2}' title='{3}'><span class='{4}'><img id='{5}' alt='{3}' src='/_imgs/imagestrips/transparent_spacer.gif' class='ms-crm-ImageStrip-arrowdown'/></span><span class='{6}'>{7}</span></a></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_expression"),"sectionheader ruleeditor","sectionheadercontainer",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_ELSE),"sectionheaderimage",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_expression"),"sectionheadertext",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCULATEDFIELD_ELSE));this.$9r_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' data-headerid='{1}' data-bodyid='{2}' data-imageid='{3}' class='{4}'><div id='{1}' class='{5}'><a href='#' class='{6}' title='{7}'><span class='{8}'><img id='{3}' alt='{7}' src='/_imgs/imagestrips/transparent_spacer.gif' class='ms-crm-ImageStrip-arrowdown'/></span><span class='{9}'>{10}</span>{19}</a></div><div id='{2}' class='{11}'><div class='{12}'></div><div id='{13}' class='{14}' tabindex='0'><img class='ms-crm-ImageStrip-plussign' src='/_imgs/imagestrips/transparent_spacer.gif' alt='{15}' title='{15}'/><span class='{16}' id='{17}' alt='{15}' title='{15}'>{18}</span></div></div></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_section","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_body","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_condition"),"sectioncondition-calcfield","sectionheader","sectionheadercontainer",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_CONDITION),"sectionheaderimage","sectionheadertext",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCULATEDFIELD_CONDITION),"sectionbody","expressioncollection","AddConditionButton_{0}","addcontrol",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCFIELD_CONDITION_TIP),"plussigntext","AddConditionText",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCFIELD_ADD_CONDITION),Mscrm.BusinessRules.SharedMethods.formatTemplate("<span class='{0}'>{1}</span>","sectionheadertext brackets",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_FIELDEDITOR_OPTIONAL)));this.$B4_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' data-headerid='{1}' data-bodyid='{2}' data-imageid='{3}' class='{4}'><div id='{1}' class='{5}'><a href='#' class='{6}' title='{7}'><span class='{8}'><img id='{3}' alt='{7}' src='/_imgs/imagestrips/transparent_spacer.gif' class='ms-crm-ImageStrip-arrowdown'/></span><span class='{9}'>{10}</span>{19}</a></div><div id='{2}' class='{11}'><div class='{12}'></div><div id='{13}' class='{14}' tabindex='0'><img class='ms-crm-ImageStrip-plussign' src='/_imgs/imagestrips/transparent_spacer.gif' alt='{15}' title='{15}'/><span class='{16}' id='{17}' alt='{15}' title='{15}'>{18}</span></div></div></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_section","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_body","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_condition"),Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()?"sectioncondition-relationship":"sectioncondition-ruleeditor","sectionheader","sectionheadercontainer",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_CONDITION),"sectionheaderimage","sectionheadertext",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCULATEDFIELD_CONDITION),"sectionbody","expressioncollection","AddConditionButton_{0}","addcontrol",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCFIELD_CONDITION_TIP),"plussigntext","AddConditionText",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCFIELD_ADD_CONDITION),Mscrm.BusinessRules.SharedMethods.formatTemplate("<span class='{0}'>{1}</span>","sectionheadertext brackets",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_FIELDEDITOR_OPTIONAL)));this.$9q_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' data-headerid='{1}' data-bodyid='{2}' data-imageid='{3}' class='{4}'><div id='{1}' class='{5}'><a href='#' class='{6}' title='{7}'><span class='{8}'><img id='{3}' alt='{7}' src='/_imgs/imagestrips/transparent_spacer.gif' class='ms-crm-ImageStrip-arrowdown'/></span><span class='{9}'>{10}</span>{19}</a></div><div id='{2}' class='{11}'><div class='{12}'></div><div id='{13}' class='{14}' tabindex='0'><img class='ms-crm-ImageStrip-plussign' src='/_imgs/imagestrips/transparent_spacer.gif' alt='{15}' title='{15}'/><span class='{16}' id='{17}' alt='{15}' title='{15}'>{18}</span></div></div></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_section","{0}_action"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_action"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_body","{0}_action"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_action"),"sectionaction-calcfield","sectionheader","sectionheadercontainer",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_ACTION),"sectionheaderimage","sectionheadertext",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCULATEDFIELD_ACTION),"sectionbody","actioncollection","AddActionButton_{0}","addcontrol",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCFIELD_ACTION_TIP),"plussigntext","AddActionText",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCFIELD_ADD_ACTION),"");this.$B3_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' data-headerid='{1}' data-bodyid='{2}' data-imageid='{3}' class='{4}'><div id='{1}' class='{5}'><a href='#' class='{6}' title='{7}'><span class='{8}'><img id='{3}' alt='{7}' src='/_imgs/imagestrips/transparent_spacer.gif' class='ms-crm-ImageStrip-arrowdown'/></span><span class='{9}'>{10}</span>{19}</a></div><div id='{2}' class='{11}'><div class='{12}'></div><div id='{13}' class='{14}' tabindex='0'><img class='ms-crm-ImageStrip-plussign' src='/_imgs/imagestrips/transparent_spacer.gif' alt='{15}' title='{15}'/><span class='{16}' id='{17}' alt='{15}' title='{15}'>{18}</span></div></div></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_section","{0}_action"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_action"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_body","{0}_action"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_action"),"sectionaction-ruleeditor","sectionheader","sectionheadercontainer",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCULATEDFIELD_ACTION),"sectionheaderimage","sectionheadertext",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCULATEDFIELD_ACTION),"sectionbody","actioncollection","AddActionButton_{0}","addcontrol",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCFIELD_ACTION_TIP),"plussigntext","AddActionText",CrmEncodeDecode.CrmHtmlEncode(window.LOCID_CALCFIELD_ADD_ACTION),"");this.$B6_0=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div id='{0}' data-headerid='{1}' data-bodyid='{2}' data-imageid='{3}' class='{4}'><div id='{2}' class='{5}'><div class='{6}'/><div id='{7}' class='{8} {9}' tabindex='0'><img class='ms-crm-ImageStrip-green_plus_16' src='/_imgs/imagestrips/transparent_spacer.gif' alt='{10}' title='{10}'/></div><div style='display:none' id='{11}' class='{12} {9}' tabindex='0'>{13}</div></div></div>",Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_section","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_header","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_body","{0}_condition"),Mscrm.BusinessRules.SharedMethods.formatTemplate("{0}_image","{0}_condition"),Mscrm.BusinessRules.BusinessRuleInitializer.get_$24()?"sectioncondition-relationship":"sectioncondition","sectionbody","expressioncollection","AddConditionButton_{0}","addcontrol","branching",CrmEncodeDecode.CrmHtmlAttributeEncode(window.LOCID_CALCFIELD_CONDITION_TIP),"AddConditionPlaceholder_{0}","addconditionplaceholder","{1}");this.$h_0=new Mscrm.Proxies.JQueryProxy;this.$4g_0=stepContainer;this.$43_0=workflowStep};Mscrm.BusinessRules.Builders.ConditionBranchStepSectionViewViewBuilder.prototype={$35_0:null,$4g_0:null,$h_0:null,$43_0:null,$C0_0:function($p0){var $v_0=this.$Bv_0(),$v_1=new Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel($v_0);this.$35_0=$v_1.get_stepId();var $v_2=$P_CRM(this.$Bu_0());$p0.get_jQueryObject().append($v_2);var $v_3=new Mscrm.BusinessRules.Views.ConditionBranchStepSectionView(this.$h_0.selectElement(String.format("#{0}_collection",this.$35_0)));$v_3.set_dataContext($v_1);return $v_3},$Bv_0:function(){var $v_0=new Microsoft.Crm.Workflow.Expressions.PrimitiveExpression(this.$43_0,true,0),$v_1=new Microsoft.Crm.Workflow.ObjectModel.ConditionBranchStep(this.$4g_0,$v_0);$v_1.set_workflow(this.$43_0);$v_1.setJQueryFriendlyNameAndId(this.$43_0.get_currentStepId());this.$4g_0.appendStep($v_1);return $v_1},$Bu_0:function(){var $v_0=new Sys.StringBuilder;$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$9f_0,this.$35_0));if(Mscrm.BusinessRules.BusinessRuleInitializer.get_$g()){$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$9s_0,this.$35_0));$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$9r_0,this.$35_0));$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$9q_0,this.$35_0))}else{$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$B5_0,this.$35_0));$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$B4_0,this.$35_0));$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$B3_0,this.$35_0))}$v_0.append("</div>");return $v_0.toString()},buildConditionHtmlForBranching:function(sectionId,placeholderText){var $v_0=new Sys.StringBuilder;$v_0.append(Mscrm.BusinessRules.SharedMethods.formatTemplate(this.$B6_0,sectionId,placeholderText));return $v_0.toString()}};Mscrm.BusinessRules.Builders.SetFormulaStepBuilder=function($p0,$p1){Mscrm.BusinessRules.Builders.SetFormulaStepBuilder.initializeBase(this,[$p0]);this.$d_2=$p1};Mscrm.BusinessRules.Builders.SetFormulaStepBuilder.prototype={$d_2:null,buildModel:function(){var $v_0=new Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep(this.workflowStep,null);$v_0.set_workflow(this.workflowStep);$v_0.set_entity(new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep));$v_0.setJQueryFriendlyNameAndId(this.workflowStep.get_currentStepId());$v_0.set_parent(this.$d_2);this.$d_2.get_Steps().add($v_0);return $v_0},renderStep:function($p0){var $v_0="";$p0.append($v_0)}};Mscrm.BusinessRules.Builders.AggregationSectionBuilder=function($p0){Mscrm.BusinessRules.Builders.AggregationSectionBuilder.initializeBase(this,[$p0.get_step().get_workflow()]);this.$4B_1=$p0};Mscrm.BusinessRules.Builders.AggregationSectionBuilder.prototype={$4B_1:null,buildView:function($p0){var $v_0=Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.getSupportedFunctionOptions()[0].Value,$v_1=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().AggregateFunctions[$v_0].Value,$v_2=new Array(2);$v_2[0]=$v_1;var $v_3=new Microsoft.Crm.Workflow.Expressions.PrimaryEntity(this.workflowStep);this.$4B_1.get_step().get_targetRelationship()&&$v_3.set_entityName(this.$4B_1.get_step().get_targetRelationship().get_entityName());var $v_4=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance().getEntity($v_3.get_entityName()).PrimaryAttributeLogicName,$v_5=new Microsoft.Crm.Workflow.Expressions.EntityAttributeExpression($v_3,$v_4);$v_2[1]=$v_5;var $v_6=new Microsoft.Crm.Workflow.Expressions.MethodCallExpression(this.workflowStep,3,$v_2);this.$4B_1.createAggregationStepSectionViewModel($v_6);this.$4B_1.$25_3.selectFirstField();this.viewModel=this.$4B_1.$25_3;this.sectionId=this.$4B_1.get_stepId()+"AggregationAggregationStep";var $v_7=this.renderView(),$v_8=$P_CRM($v_7);$p0.get_jQueryObject().append($v_8);var $v_9=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.viewModel,(new Mscrm.Proxies.JQueryProxy).fromElement($v_8[0]));$v_9.set_isNewCreated(true);return $v_9},renderStep:function($p0){var $v_0=this.viewModel,$v_1=String.format(CrmEncodeDecode.CrmHtmlEncodeForFormatString($v_0.getReadDisplayFormat()),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0.get_aggregateFunctionDisplayName())),String.format("<b>{0}</b>",CrmEncodeDecode.CrmHtmlEncode($v_0.get_aggregatedFieldDisplayName())));$p0.append($v_1)}};Mscrm.BusinessRules.Builders.TargetEntitySectionBuilder=function($p0){Mscrm.BusinessRules.Builders.TargetEntitySectionBuilder.initializeBase(this,[$p0.get_step().get_workflow()]);this.$5Z_1=$p0};Mscrm.BusinessRules.Builders.TargetEntitySectionBuilder.prototype={$5Z_1:null,buildView:function($p0){var $v_0=0,$v_1;if(Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities.length>0){var $v_5=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities[$v_0].RelationshipName,$v_6=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities[$v_0].RelationshipEntity.EntityLogicalName,$v_7=Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().OneToManyRelationEntities[$v_0].RelationshipAttribute.LogicalName;$v_1=new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.workflowStep,$v_7,$v_6,$v_5)}else{$v_1=new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.workflowStep,"",Mscrm.BusinessRules.Views.ViewHelper.get_editorDataWrapper().EntityMetadata.EntityLogicalName,"");$v_0=-1}this.$5Z_1.createTargetEntityViewModel($v_1);this.$5Z_1.$1z_3.set_selectedIndex($v_0);this.viewModel=this.$5Z_1.$1z_3;this.sectionId=this.$5Z_1.get_stepId()+"RelatedRelatedRelationship";var $v_2=this.renderView(),$v_3=$P_CRM($v_2);$p0.get_jQueryObject().append($v_3);var $v_4=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.viewModel,(new Mscrm.Proxies.JQueryProxy).fromElement($v_3[0]));$v_4.set_isNewCreated(true);return $v_4},renderStep:function($p0){var $v_0=this.viewModel,$v_1=String.format(CrmEncodeDecode.CrmHtmlEncodeForFormatString(window.LOCID_ROLLUP_TARGETENTITYFORMAT),CrmEncodeDecode.CrmHtmlEncode($v_0.get_selectedRelatedEntityDisplayName()),CrmEncodeDecode.CrmHtmlEncode($v_0.get_selectedRelatedEntityAttributeDisplayName()));$p0.append($v_1)}};Mscrm.BusinessRules.Builders.TargetEntityLinkedSectionBuilder=function($p0){Mscrm.BusinessRules.Builders.TargetEntityLinkedSectionBuilder.initializeBase(this,[$p0.get_step().get_workflow()]);this.$3Y_1=$p0};Mscrm.BusinessRules.Builders.TargetEntityLinkedSectionBuilder.prototype={$3Y_1:null,buildView:function($p0){var $v_0=0,$v_1,$v_2=this.$3Y_1.$6H_3;if(!IsNull($v_2)&&$v_2.length>0){var $v_6=$v_2[$v_0].RelationshipName,$v_7=$v_2[$v_0].RelationshipEntity.EntityLogicalName,$v_8=$v_2[$v_0].RelationshipAttribute.LogicalName;$v_1=new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.workflowStep,$v_8,$v_7,$v_6)}else{$v_1=new Microsoft.Crm.Workflow.Expressions.RelatedEntityLinked(this.workflowStep,"",this.$3Y_1.$5W_3,"");$v_0=-1}this.$3Y_1.createTargetLinkedEntityViewModel($v_1);this.$3Y_1.$1D_3.$6G_3=$v_2;this.$3Y_1.$1D_3.set_selectedIndex($v_0);this.viewModel=this.$3Y_1.$1D_3;this.sectionId=this.$3Y_1.get_stepId()+"RelatedLinkedRelatedLinkedRelationship";var $v_3=this.renderView(),$v_4=$P_CRM($v_3);$p0.get_jQueryObject().append($v_4);var $v_5=Mscrm.BusinessRules.Views.StepSectionViewFactory.getSection(this.viewModel,(new Mscrm.Proxies.JQueryProxy).fromElement($v_4[0]));$v_5.set_isNewCreated(true);return $v_5},renderStep:function($p0){var $v_0=this.viewModel,$v_1=String.format(CrmEncodeDecode.CrmHtmlEncodeForFormatString(window.LOCID_ROLLUP_LINKEDFORMAT),CrmEncodeDecode.CrmHtmlEncode($v_0.get_selectedRelatedLinkedEntityDisplayName()),CrmEncodeDecode.CrmHtmlEncode($v_0.get_selectedRelatedLinkedEntityAttributeDisplayName()));$p0.append($v_1)}};Type.registerNamespace("Mscrm.BusinessRules.Commands");Mscrm.BusinessRules.Commands.IActivateCommand=function(){};Mscrm.BusinessRules.Commands.IActivateCommand.registerInterface("Mscrm.BusinessRules.Commands.IActivateCommand");Mscrm.BusinessRules.Commands.ICommand=function(){};Mscrm.BusinessRules.Commands.ICommand.registerInterface("Mscrm.BusinessRules.Commands.ICommand");Mscrm.BusinessRules.Commands.IConvertValueCommand=function(){};Mscrm.BusinessRules.Commands.IConvertValueCommand.registerInterface("Mscrm.BusinessRules.Commands.IConvertValueCommand");Mscrm.BusinessRules.Commands.IDeleteCommand=function(){};Mscrm.BusinessRules.Commands.IDeleteCommand.registerInterface("Mscrm.BusinessRules.Commands.IDeleteCommand");Mscrm.BusinessRules.Commands.IEventAdapter=function(){};Mscrm.BusinessRules.Commands.IEventAdapter.registerInterface("Mscrm.BusinessRules.Commands.IEventAdapter");Mscrm.BusinessRules.Commands.IMoveDownCommand=function(){};Mscrm.BusinessRules.Commands.IMoveDownCommand.registerInterface("Mscrm.BusinessRules.Commands.IMoveDownCommand");Mscrm.BusinessRules.Commands.IMoveUpCommand=function(){};Mscrm.BusinessRules.Commands.IMoveUpCommand.registerInterface("Mscrm.BusinessRules.Commands.IMoveUpCommand");Mscrm.BusinessRules.Commands.ISaveCommand=function(){};Mscrm.BusinessRules.Commands.ISaveCommand.registerInterface("Mscrm.BusinessRules.Commands.ISaveCommand");Mscrm.BusinessRules.Commands.ISaveAndCloseCommand=function(){};Mscrm.BusinessRules.Commands.ISaveAndCloseCommand.registerInterface("Mscrm.BusinessRules.Commands.ISaveAndCloseCommand");Mscrm.BusinessRules.Commands.IValidateCommand=function(){};Mscrm.BusinessRules.Commands.IValidateCommand.registerInterface("Mscrm.BusinessRules.Commands.IValidateCommand");Mscrm.BusinessRules.Commands.ISaveAsCommand=function(){};Mscrm.BusinessRules.Commands.ISaveAsCommand.registerInterface("Mscrm.BusinessRules.Commands.ISaveAsCommand");Mscrm.BusinessRules.Commands.ValidationResultType=function(){};Mscrm.BusinessRules.Commands.ValidationResultType.prototype={ruleNameEmpty:0,other:1};Mscrm.BusinessRules.Commands.ValidationResultType.registerEnum("Mscrm.BusinessRules.Commands.ValidationResultType",false);Mscrm.BusinessRules.Commands.ActivateCommand=function(){};Mscrm.BusinessRules.Commands.ActivateCommand.prototype={$4t_0:null,$2T_0:false,execute:function(){if(IsNull(this.$4t_0))throw Error.argumentNull("ActivateDelegate");this.$2T_0=this.$4t_0();try{window.opener.$find("gridBusinessRules").Refresh()}catch($$e_0){}},dispose:function(){this.$4t_0=null},get_success:function(){return this.$2T_0},get_activateDelegate:function(){return this.$4t_0},set_activateDelegate:function(value){this.$4t_0=value;return value}};Mscrm.BusinessRules.Commands.ConvertValueCommand=function(){};Mscrm.BusinessRules.Commands.ConvertValueCommand.prototype={$4n_0:null,$5J_0:null,$5R_0:null,dispose:function(){this.$4n_0=null;this.$5J_0=null;this.$5R_0=null},execute:function(){if(IsNull(this.$5J_0))throw Error.argumentNull("LhsGetValueDelegate");if(IsNull(this.$5R_0))throw Error.argumentNull("RhsSetValueDelegate");if(IsNull(this.$4n_0))throw Error.argumentNull("ValueConverter");var $v_0=this.$5J_0();this.$4n_0.set_lhsValue($v_0);this.$5R_0(this.$4n_0.get_rhsValue())},get_valueConverter:function(){return this.$4n_0},set_valueConverter:function(value){this.$4n_0=value;return value},get_lhsGetValueDelegate:function(){return this.$5J_0},set_lhsGetValueDelegate:function(value){this.$5J_0=value;return value},get_rhsSetValueDelegate:function(){return this.$5R_0},set_rhsSetValueDelegate:function(value){this.$5R_0=value;return value}};Mscrm.BusinessRules.Commands.DeleteCommand=function(){};Mscrm.BusinessRules.Commands.DeleteCommand.prototype={$51_0:null,$2T_0:false,execute:function(){if(IsNull(this.$51_0))throw Error.argumentNull("DeleteDelegate");this.$2T_0=this.$51_0()},dispose:function(){this.$51_0=null},get_success:function(){return this.$2T_0},get_deleteDelegate:function(){return this.$51_0},set_deleteDelegate:function($p0){this.$51_0=$p0;return $p0}};Mscrm.BusinessRules.Commands.HelpCommand=function(){};Mscrm.BusinessRules.Commands.HelpCommand.prototype={execute:function(){if(Mscrm.MaskPanel.get_instance().$4T_0){Mscrm.MaskPanel.get_instance().blinkEditViewElement();return}Mscrm.Help.loadHelp(null)},dispose:function(){}};Mscrm.BusinessRules.Commands.MoveDownCommand=function(){};Mscrm.BusinessRules.Commands.MoveDownCommand.prototype={$5K_0:null,$2T_0:false,execute:function(){if(IsNull(this.$5K_0))throw Error.argumentNull("MoveDownDelegate");this.$2T_0=this.$5K_0()},dispose:function(){this.$5K_0=null},get_success:function(){return this.$2T_0},get_moveDownDelegate:function(){return this.$5K_0},set_moveDownDelegate:function($p0){this.$5K_0=$p0;return $p0}};Mscrm.BusinessRules.Commands.MoveUpCommand=function(){};Mscrm.BusinessRules.Commands.MoveUpCommand.prototype={$5L_0:null,$2T_0:false,execute:function(){if(IsNull(this.$5L_0))throw Error.argumentNull("MoveUpDelegate");this.$2T_0=this.$5L_0()},dispose:function(){this.$5L_0=null},get_success:function(){return this.$2T_0},get_moveUpDelegate:function(){return this.$5L_0},set_moveUpDelegate:function($p0){this.$5L_0=$p0;return $p0}};Mscrm.BusinessRules.Commands.SaveAndCloseCommand=function(){};Mscrm.BusinessRules.Commands.SaveAndCloseCommand.prototype={execute:function(){var $v_0=new Mscrm.BusinessRules.Commands.SaveCommand;$v_0.set_saveDelegate(this.$1O_0);var $$t_3=this;$v_0.set_callback(function($p1_0){if(!$p1_0.get_success())return;try{closeWindow()}catch($$e_2){}});$v_0.execute()},dispose:function(){this.$1O_0=null},get_saveDelegate:function(){return this.$1O_0},set_saveDelegate:function(value){this.$1O_0=value;return value},$1O_0:null};Mscrm.BusinessRules.Commands.ValidateCommand=function(){this.$$d_$F6_0=Function.createDelegate(this,this.$F6_0)};Mscrm.BusinessRules.Commands.ValidateCommand.prototype={execute:function(){if(Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")){window.designerToggleValidation();this.$5d_0=window.designerValidationOn()}else this.$5d_0=!this.$5d_0;if(this.$5d_0){this.get_$BN_0().addClass("validateButtonOff");var $v_0=$P_CRM("#validateButtonOn");$v_0.attr("title",ProcessDesignerControl_BPF_ValidateMode_On)}else{this.get_$BN_0().removeClass("validateButtonOff");var $v_1=$P_CRM("#validateButtonOn");$v_1.attr("title",ProcessDesignerControl_BPF_ValidateMode_Off)}this.$6d_0(this.$$d_$F6_0)},$F6_0:function($p0){},dispose:function(){this.$6d_0=null},get_validateDelegate:function(){return this.$6d_0},set_validateDelegate:function(value){this.$6d_0=value;return value},get_isValidationOn:function(){return this.$5d_0},get_$Du_0:function(){if(IsNull(this.$h_0))this.$h_0=new Mscrm.Proxies.JQueryProxy;return this.$h_0},get_$BN_0:function(){if(IsNull(this.$38_0))this.$38_0=this.get_$Du_0().selectElement("#validateButtonOn");return this.$38_0},$6d_0:null,$5d_0:false,$38_0:null,$h_0:null};Mscrm.BusinessRules.Commands.SaveAsCommand=function(){};Mscrm.BusinessRules.Commands.SaveAsCommand.prototype={execute:function(){var $v_0=new Mscrm.BusinessRules.Commands.SaveCommand;$v_0.set_saveDelegate(this.$1O_0);var $$t_3=this;$v_0.set_callback(function($p1_0){if(!$p1_0.get_success())return;var $v_1=Mscrm.CrmUri.create(window.location.href);$v_1.get_query()["id"]=$p1_0.$3D_0;window.location.href=$v_1.toString()});$v_0.execute()},dispose:function(){this.$1O_0=null},get_saveDelegate:function(){return this.$1O_0},set_saveDelegate:function(value){this.$1O_0=value;return value},$1O_0:null};Mscrm.BusinessRules.Commands.SaveCommand=function(){this.$$d_$Ed_0=Function.createDelegate(this,this.$Ed_0)};Mscrm.BusinessRules.Commands.SaveCommand.get_progressStatusControl=function(){if(IsNull(Mscrm.BusinessRules.Commands.SaveCommand.$7b))Mscrm.BusinessRules.Commands.SaveCommand.$7b=new Mscrm.ProgressControl;return Mscrm.BusinessRules.Commands.SaveCommand.$7b};Mscrm.BusinessRules.Commands.SaveCommand.get_errorFlyout=function(){if(IsNull(Mscrm.BusinessRules.Commands.SaveCommand.$2G))Mscrm.BusinessRules.Commands.SaveCommand.$2G=new Mscrm.BusinessRuleErrorFlyout($P_CRM("#"+Mscrm.BusinessRules.Constants.get_bodyViewContainerId()));return Mscrm.BusinessRules.Commands.SaveCommand.$2G};Mscrm.BusinessRules.Commands.SaveCommand.prototype={execute:function(){if(Mscrm.MaskPanel.get_instance().$4T_0){Mscrm.MaskPanel.get_instance().blinkEditViewElement();return}Mscrm.BusinessRules.Commands.SaveCommand.get_progressStatusControl().forceShow();if(IsNull(this.$1O_0))throw Error.argumentNull("SaveDelegate");this.$1O_0(this.$$d_$Ed_0)},$Ed_0:function($p0){Mscrm.BusinessRules.Commands.SaveCommand.get_progressStatusControl().hide();if(!$p0.get_success()&&!$p0.get_displayErrorDialog()){var $v_0=isNullOrEmptyString($p0.get_message())?String.format(window.LOCID_PBLERROR_GENERIC,"",""):$p0.get_message(),$v_1=window.designerLoaded;if(!IsNull($v_1)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner"))!isNullOrEmptyString($p0.get_message())&&Mscrm.BusinessRules.Commands.SaveCommand.get_errorFlyout().show($v_0);else Mscrm.BusinessRules.Commands.SaveCommand.get_errorFlyout().show($v_0)}this.$50_0&&this.$50_0($p0);if(!IsNull($p0)&&$p0.get_success())try{var $v_2=window.designerLoaded;!IsNull($v_2)&&Mscrm.FeatureControl.get_Current().isFeatureEnabled("FCB.UnifiedProcessDesigner")&&window.designerSave();switch(Mscrm.CrmUri.create(window.location.href).get_query()["BRlaunchpoint"].toString()){case "BRExplorer":window.opener.Mscrm.BusinessRulesExplorer.refreshBusinessRulesExplorer();break;case "AttributeEditor":break;case "BRGrid":default:window.opener.$find("gridBusinessRules").Refresh();break}}catch($$e_4){}},dispose:function(){this.$1O_0=null},get_saveDelegate:function(){return this.$1O_0},set_saveDelegate:function(value){this.$1O_0=value;return value},get_callback:function(){return this.$50_0},set_callback:function(value){this.$50_0=value;return value},$1O_0:null,$50_0:null};Mscrm.BusinessRules.Commands.ForwardLinkCommand=function(linkId){this.$8c_0=linkId;this.$8a_0=Number.parseInvariant(window.USER_HELP_LCID.toString()).toString(16);this.$8s_0=String.format("http://go.microsoft.com/fwlink/?LinkID={0}&clcid=0x{1}",this.$8c_0,this.$8a_0)};Mscrm.BusinessRules.Commands.ForwardLinkCommand.prototype={$8c_0:null,$8s_0:null,$8a_0:null,execute:function(){window.open(this.$8s_0)},dispose:function(){}};Mscrm.BusinessRules.Commands.SecurityLearnMoreCommand=function(){Mscrm.BusinessRules.Commands.SecurityLearnMoreCommand.initializeBase(this,["389738"])};Mscrm.BusinessRules.Commands.GenericXamlLearnMoreCommand=function(){Mscrm.BusinessRules.Commands.GenericXamlLearnMoreCommand.initializeBase(this,["510790"])};Mscrm.BusinessRules.Commands.ActionFormulaHelpCommand=function(){Mscrm.BusinessRules.Commands.ActionFormulaHelpCommand.initializeBase(this,["389806"])};Mscrm.BusinessRules.Commands.SaveCommandResult=function(result){this.$1A_0=result};Mscrm.BusinessRules.Commands.SaveCommandResult.prototype={get_success:function(){return this.$1A_0.isValid},get_message:function(){return this.$1A_0.errorText},get_displayErrorDialog:function(){switch(this.$1A_0.$2l_1){case 0:return true;default:return false}},get_businessRuleId:function(){return this.$3D_0},set_businessRuleId:function(value){this.$3D_0=value;return value},$3D_0:null,$1A_0:null};Mscrm.BusinessRules.Commands.BusinessRuleValidationResult=function(isValid,errorText){Mscrm.BusinessRules.Commands.BusinessRuleValidationResult.initializeBase(this,[isValid,errorText]);this.errorText=errorText;this.isValid=isValid};Mscrm.BusinessRules.Commands.BusinessRuleValidationResult.prototype={get_resultType:function(){return this.$2l_1},set_resultType:function(value){this.$2l_1=value;return value},$2l_1:1,get_success:function(){return this.isValid},get_errorMessage:function(){return this.errorText},$8d_1:null,get_nestedResults:function(){return this.$8d_1||(this.$8d_1=new Microsoft.Crm.Client.Core.Framework.List$1.$$(Mscrm.IValidationResult))}};Mscrm.BusinessRules.Commands.StepChromeElementKeyDownCommand=function(){};Mscrm.BusinessRules.Commands.StepChromeElementKeyDownCommand.prototype={$3X_0:false,$6X_0:false,$7i_0:false,$69_0:0,$5s_0:null,$l_0:null,$5I_0:null,$3o_0:0,$DB_0:function(){if(!IsNull(Mscrm.BusinessRules.BusinessRuleInitializer.$32)&&Mscrm.BusinessRules.BusinessRuleInitializer.$32.get_readOnly()){this.$l_0.set_selectedButtonViewModel(null);this.$3X_0=false;return}if(this.$7i_0)this.$D9_0();else this.$DA_0()},$DA_0:function(){if(!this.$l_0.get_buttonViewModels().get_count()){this.$l_0.set_selectedButtonViewModel(null);this.$3X_0=false;return}if(IsNull(this.$l_0.get_selectedButtonViewModel())&&this.$l_0.get_buttonViewModels().get_count()>0){this.$l_0.set_selectedButtonViewModel(this.$l_0.get_buttonViewModels().first());this.$3o_0=0;this.$l_0.get_selectedButtonViewModel().set_selected(true)}else{this.$3o_0++;this.$l_0.get_selectedButtonViewModel().set_selected(false);if(this.$3o_0<this.$l_0.get_buttonViewModels().get_count()){this.$l_0.set_selectedButtonViewModel(this.$l_0.get_buttonViewModels().get_item(this.$3o_0));this.$l_0.get_selectedButtonViewModel().set_selected(true)}else{this.$l_0.set_selectedButtonViewModel(null);this.$3X_0=false}}},$D9_0:function(){if(IsNull(this.$l_0.get_selectedButtonViewModel())){this.$l_0.set_selectedButtonViewModel(null);this.$3X_0=false;return}this.$3o_0--;this.$l_0.get_selectedButtonViewModel().set_selected(false);if(this.$3o_0>=0){this.$l_0.set_selectedButtonViewModel(this.$l_0.get_buttonViewModels().get_item(this.$3o_0));this.$l_0.get_selectedButtonViewModel().set_selected(true)}else this.$l_0.set_selectedButtonViewModel(null)},get_$Dv_0:function(){if(IsNull(this.$5I_0)){this.$5I_0=Mscrm.BusinessRules.SharedMethods.getList(Number);this.$5I_0.add(13);this.$5I_0.add(9)}return this.$5I_0},dispose:function(){if(!IsNull(this.$l_0))this.$l_0=null},execute:function(){if(this.$5s_0.get_currentState()!==3||!this.get_$Dv_0().contains(this.$69_0))return;this.$3X_0=true;this.$6X_0=true;if(this.$69_0===13)this.$D5_0();else this.$DB_0()},$D5_0:function(){if(IsNull(this.$l_0.get_selectedButtonViewModel())){this.$3X_0=false;this.$6X_0=false;return}this.$l_0.get_selectedButtonViewModel().get_command().execute()},get_preventDefault:function(){return this.$3X_0},set_preventDefault:function($p0){this.$3X_0=$p0;return $p0},get_stopPropagation:function(){return this.$6X_0},set_stopPropagation:function($p0){this.$6X_0=$p0;return $p0},get_shiftKey:function(){return this.$7i_0},set_shiftKey:function($p0){this.$7i_0=$p0;return $p0},get_keyCode:function(){return this.$69_0},set_keyCode:function($p0){this.$69_0=$p0;return $p0},get_chromeStateData:function(){return this.$5s_0},set_chromeStateData:function($p0){this.$5s_0=$p0;return $p0},get_readToolBarViewModel:function(){return this.$l_0},set_readToolBarViewModel:function($p0){this.$l_0=$p0;return $p0}};Type.registerNamespace("Mscrm.BusinessRules.Converters");Mscrm.BusinessRules.Converters.IValueConverter=function(){};Mscrm.BusinessRules.Converters.IValueConverter.registerInterface("Mscrm.BusinessRules.Converters.IValueConverter");Mscrm.BusinessRules.Converters.BaseValueConverter=function(){};Mscrm.BusinessRules.Converters.BaseValueConverter.prototype={$6A_0:null,$6N_0:null,convertToRhsValue:function(){return this.$6A_0},convertToLhsValue:function(){return this.$6N_0},get_lhsValue:function(){return this.$6A_0},set_lhsValue:function(value){this.$6A_0=value;this.$6N_0=this.convertToRhsValue();return value},get_rhsValue:function(){return this.$6N_0},set_rhsValue:function(value){this.$6N_0=value;this.$6A_0=this.convertToLhsValue();return value}};Type.registerNamespace("Mscrm.BusinessRules.Factories");Mscrm.BusinessRules.Factories.IBindingsFactory=function(){};Mscrm.BusinessRules.Factories.IBindingsFactory.registerInterface("Mscrm.BusinessRules.Factories.IBindingsFactory");Mscrm.BusinessRules.Factories.ICommandsFactory=function(){};Mscrm.BusinessRules.Factories.ICommandsFactory.registerInterface("Mscrm.BusinessRules.Factories.ICommandsFactory");Mscrm.BusinessRules.Factories.IValueConvertersFactory=function(){};Mscrm.BusinessRules.Factories.IValueConvertersFactory.registerInterface("Mscrm.BusinessRules.Factories.IValueConvertersFactory");Mscrm.BusinessRules.Factories.BindingsFactory=function(){};Mscrm.BusinessRules.Factories.BindingsFactory.prototype={$5u_0:null,get_commandsFactory:function(){return this.$5u_0},set_commandsFactory:function(value){this.$5u_0=value;return value},createClickBinding:function(element,command){var $v_0=new Mscrm.BusinessRules.Bindings.ClickBinding;$v_0.set_element(element);$v_0.set_command(command);return $v_0},createValueBinding:function(lhsValueChangeBinding,rhsValueChangeBinding,lhsValueConverter,rhsValueConverter){var $v_0=this.$5u_0.createConvertValueCommand(lhsValueChangeBinding.get_getValueDelegate(),rhsValueChangeBinding.get_setValueDelegate(),lhsValueConverter);lhsValueChangeBinding.set_command($v_0);var $v_1=this.$5u_0.createConvertValueCommand(rhsValueChangeBinding.get_getValueDelegate(),lhsValueChangeBinding.get_setValueDelegate(),rhsValueConverter);rhsValueChangeBinding.set_command($v_1);var $v_2=new Mscrm.BusinessRules.Bindings.ValueBinding;$v_2.set_lhsValueChangeBinding(lhsValueChangeBinding);$v_2.set_rhsValueChangeBinding(rhsValueChangeBinding);return $v_2},createTextInputValueChangeBinding:function(textInputElement){var $v_0=new Mscrm.BusinessRules.Bindings.TextInputValueChangeBinding;$v_0.set_textInputElement(textInputElement);return $v_0},createInlineFieldControlValueChangeBinding:function(inlineControlView){var $v_0=new Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding;$v_0.set_view(inlineControlView);return $v_0},createDataContextValueChangeBinding:function(dataContext,dataContextPropertyName,getValueDelegate,setValueDelegate){var $v_0=new Mscrm.BusinessRules.Bindings.DataContextValueChangeBinding;$v_0.set_dataContext(dataContext);$v_0.set_propertyName(dataContextPropertyName);$v_0.set_getValueDelegate(getValueDelegate);$v_0.set_setValueDelegate(setValueDelegate);return $v_0},createKeyDownBinding:function(element,command){var $v_0=new Mscrm.BusinessRules.Bindings.KeyDownBinding;$v_0.set_element(element);$v_0.set_command(command);return $v_0}};Mscrm.BusinessRules.Factories.CommandsFactory=function(){};Mscrm.BusinessRules.Factories.CommandsFactory.prototype={createConvertValueCommand:function(lhsGetValueDelegate,rhsSetValueDelegate,valueConverter){var $v_0=new Mscrm.BusinessRules.Commands.ConvertValueCommand;$v_0.set_valueConverter(valueConverter);$v_0.set_lhsGetValueDelegate(lhsGetValueDelegate);$v_0.set_rhsSetValueDelegate(rhsSetValueDelegate);return $v_0}};Mscrm.BusinessRules.Factories.ValueConvertersFactory=function(){};Mscrm.BusinessRules.Factories.ValueConvertersFactory.prototype={createBaseValueConverter:function(){var $v_0=new Mscrm.BusinessRules.Converters.BaseValueConverter;return $v_0}};Mscrm.BusinessRules.Factories.AttributeFilterFactory=function(){};Mscrm.BusinessRules.Factories.AttributeFilterFactory.get_instance=function(){if(IsNull(Mscrm.BusinessRules.Factories.AttributeFilterFactory.$6z))Mscrm.BusinessRules.Factories.AttributeFilterFactory.$6z=new Mscrm.BusinessRules.Factories.AttributeFilterFactory;return Mscrm.BusinessRules.Factories.AttributeFilterFactory.$6z};Mscrm.BusinessRules.Factories.AttributeFilterFactory.prototype={$CA_0:function(){if(Mscrm.BusinessRules.BusinessRuleInitializer.$x===2)return Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.instance();else return Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.instance()},$4o_0:function($p0){switch(Mscrm.BusinessRules.BusinessRuleInitializer.$x){case 1:if(Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.isInstanceOfType($p0))return Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.instance();break;case 2:if(Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.isInstanceOfType($p0)||Mscrm.BusinessRules.Views.InlineExpressionEditView.isInstanceOfType($p0))return Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.instance();break;case 0:if(Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.isInstanceOfType($p0))return Mscrm.BusinessRules.PersistentAttributesFilter.instance();break;case 3:case 4:if(Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.isInstanceOfType($p0))return Mscrm.BusinessRules.PersistentAttributesFilter.instance();break}if(Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView.isInstanceOfType($p0)||Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView.isInstanceOfType($p0)||Mscrm.BusinessRules.Views.InlineSetMessageStepEditView.isInstanceOfType($p0)||Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView.isInstanceOfType($p0))return Mscrm.BusinessRules.PersistentAttributesFilter.instance();if(Mscrm.BusinessRules.Views.InlineExpressionEditView.isInstanceOfType($p0))return Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.instance();return Mscrm.BusinessRules.NullAttributesFilter.instance()}};Type.registerNamespace("Mscrm.BusinessRules.Mediators");Mscrm.BusinessRules.Mediators.IBindingsMediator=function(){};Mscrm.BusinessRules.Mediators.IBindingsMediator.registerInterface("Mscrm.BusinessRules.Mediators.IBindingsMediator");Mscrm.BusinessRules.Mediators.IInlineEditControlMediator=function(){};Mscrm.BusinessRules.Mediators.IInlineEditControlMediator.registerInterface("Mscrm.BusinessRules.Mediators.IInlineEditControlMediator");Mscrm.BusinessRules.Mediators.BindingsMediator=function(){this.$1a_0=new Array(0)};Mscrm.BusinessRules.Mediators.BindingsMediator.prototype={$1a_0:null,$26_0:null,$6f_0:null,get_valueConvertersFactory:function(){if(IsNull(this.$6f_0))this.$6f_0=new Mscrm.BusinessRules.Factories.ValueConvertersFactory;return this.$6f_0},set_valueConvertersFactory:function(value){this.$6f_0=value;return value},get_bindingsFactory:function(){if(IsNull(this.$26_0)){this.$26_0=new Mscrm.BusinessRules.Factories.BindingsFactory;this.$26_0.set_commandsFactory(new Mscrm.BusinessRules.Factories.CommandsFactory)}return this.$26_0},set_bindingsFactory:function(value){this.$26_0=value;return value},getBindings:function(){return this.$1a_0},addClickBinding:function(element,command){if(IsNull(element))throw Error.argumentNull("element");if(IsNull(command))throw Error.argumentNull("command");var $v_0=this.get_bindingsFactory().createClickBinding(element,command);$v_0.bind();Array.add(this.$1a_0,$v_0)},addValueBinding:function(lhsValueChangeBinding,rhsValueChangeBinding,lhsValueConverter,rhsValueConverter){var $v_0=this.get_bindingsFactory().createValueBinding(lhsValueChangeBinding,rhsValueChangeBinding,lhsValueConverter,rhsValueConverter);$v_0.bind();$v_0.get_lhsValueChangeBinding().get_command().execute();Array.add(this.$1a_0,$v_0)},addValueBindingWithoutInitialization:function(lhsValueChangeBinding,rhsValueChangeBinding,lhsValueConverter,rhsValueConverter){var $v_0=this.get_bindingsFactory().createValueBinding(lhsValueChangeBinding,rhsValueChangeBinding,lhsValueConverter,rhsValueConverter);$v_0.bind();Array.add(this.$1a_0,$v_0);return $v_0},addTextInputToStringValueBinding:function(textInputElement,dataContext,dataContextPropertyName,getValueDelegate,setValueDelegate){if(IsNull(textInputElement))throw Error.argumentNull("textInputElement");if(IsNull(dataContext))throw Error.argumentNull("dataContext");if(_String.isNullOrWhiteSpace(dataContextPropertyName))throw Error.argumentNull("dataContextPropertyName");if(IsNull(getValueDelegate))throw Error.argumentNull("getValueDelegate");if(IsNull(setValueDelegate))throw Error.argumentNull("setValueDelegate");var $v_0=this.get_bindingsFactory().createTextInputValueChangeBinding(textInputElement),$$t_A=this,$$t_B=this,$v_1=this.get_bindingsFactory().createDataContextValueChangeBinding(dataContext,dataContextPropertyName,function(){return getValueDelegate()},function($p1_0){setValueDelegate($p1_0.toString())}),$v_2=this.get_valueConvertersFactory().createBaseValueConverter(),$v_3=this.get_valueConvertersFactory().createBaseValueConverter();this.addValueBinding($v_0,$v_1,$v_2,$v_3)},addTextInputToIntegerValueBinding:function(textInputElement,dataContext,dataContextPropertyName,getValueDelegate,setValueDelegate){if(IsNull(textInputElement))throw Error.argumentNull("textInputElement");if(IsNull(dataContext))throw Error.argumentNull("dataContext");if(_String.isNullOrWhiteSpace(dataContextPropertyName))throw Error.argumentNull("dataContextPropertyName");if(IsNull(getValueDelegate))throw Error.argumentNull("getValueDelegate");if(IsNull(setValueDelegate))throw Error.argumentNull("setValueDelegate");var $v_0=this.get_bindingsFactory().createTextInputValueChangeBinding(textInputElement),$$t_A=this,$$t_B=this,$v_1=this.get_bindingsFactory().createDataContextValueChangeBinding(dataContext,dataContextPropertyName,function(){return getValueDelegate()},function($p1_0){setValueDelegate($p1_0)}),$v_2=this.get_valueConvertersFactory().createBaseValueConverter(),$v_3=this.get_valueConvertersFactory().createBaseValueConverter();this.addValueBinding($v_0,$v_1,$v_2,$v_3)},addInlineFieldToStringValueBinding:function(inlineControlView,dataContext,dataContextPropertyName,getValueDelegate,setValueDelegate){if(IsNull(inlineControlView))throw Error.argumentNull("inlineView");if(IsNull(dataContext))throw Error.argumentNull("dataContext");if(_String.isNullOrWhiteSpace(dataContextPropertyName))throw Error.argumentNull("dataContextPropertyName");if(IsNull(getValueDelegate))throw Error.argumentNull("getValueDelegate");if(IsNull(setValueDelegate)){var $$t_B=this;setValueDelegate=function($p1_0){}}var $v_0=this.get_bindingsFactory().createInlineFieldControlValueChangeBinding(inlineControlView),$$t_C=this,$$t_D=this,$v_1=this.get_bindingsFactory().createDataContextValueChangeBinding(dataContext,dataContextPropertyName,function(){return getValueDelegate()},function($p1_0){setValueDelegate($p1_0.toString())}),$v_2=this.get_valueConvertersFactory().createBaseValueConverter(),$v_3=this.get_valueConvertersFactory().createBaseValueConverter();return this.addValueBindingWithoutInitialization($v_0,$v_1,$v_2,$v_3)},createArrayOneWayValueBinding:function(TArrayType,rhsDataContext,rhsDataContextPropertyName,rhsGetValueDelegate,lhsSetValueDelegate){var $v_0=this.get_bindingsFactory().createDataContextValueChangeBinding(rhsDataContext,rhsDataContextPropertyName,null,null),$v_1=new Mscrm.BusinessRules.Commands.ConvertValueCommand,$$t_8=this;$v_1.set_lhsGetValueDelegate(function(){return rhsGetValueDelegate()});var $$t_9=this;$v_1.set_rhsSetValueDelegate(function($p1_0){lhsSetValueDelegate($p1_0)});$v_1.set_valueConverter(this.get_valueConvertersFactory().createBaseValueConverter());$v_1.execute();$v_0.set_command($v_1);$v_0.bind();Array.add(this.$1a_0,$v_0);return $v_0},createStringOneWayValueBinding:function(rhsDataContext,rhsDataContextPropertyName,rhsGetValueDelegate,lhsSetValueDelegate){var $v_0=this.get_bindingsFactory().createDataContextValueChangeBinding(rhsDataContext,rhsDataContextPropertyName,null,null),$v_1=new Mscrm.BusinessRules.Commands.ConvertValueCommand,$$t_7=this;$v_1.set_lhsGetValueDelegate(function(){return rhsGetValueDelegate()});var $$t_8=this;$v_1.set_rhsSetValueDelegate(function($p1_0){lhsSetValueDelegate($p1_0)});$v_1.set_valueConverter(this.get_valueConvertersFactory().createBaseValueConverter());$v_1.execute();$v_0.set_command($v_1);$v_0.bind();Array.add(this.$1a_0,$v_0);return $v_0},dispose:function(){for(var $v_0=this.$1a_0.length-1;$v_0>=0;$v_0--){this.$1a_0[$v_0].dispose();this.$1a_0[$v_0]=null;Array.removeAt(this.$1a_0,$v_0)}},disposeValueBinding:function(binding){if(Array.contains(this.$1a_0,binding)){Array.remove(this.$1a_0,binding);binding.dispose();binding=null}},addKeyDownBinding:function(element,command){if(IsNull(element))throw Error.argumentNull("element");if(IsNull(command))throw Error.argumentNull("command");var $v_0=this.get_bindingsFactory().createKeyDownBinding(element,command);$v_0.bind();Array.add(this.$1a_0,$v_0)}};Mscrm.BusinessRules.Mediators.InlineEditControlMediator=function(){};Mscrm.BusinessRules.Mediators.InlineEditControlMediator.prototype={createSingleLineTextControl:function($p0,$p1,$p2,$p3,$p4,$p5){var $v_0=Mscrm.InlineControlFactory.createInlineTextBoxControlForDom($p0.get_jQueryObject(),$p1,$p2,$p3,$p4,$p5);return $v_0},createMultilineTextControl:function($p0,$p1,$p2,$p3,$p4,$p5){var $v_0=Mscrm.InlineControlFactory.createInlineTextControlForDom($p0.get_jQueryObject(),$p1,$p2,"ntext",$p3,$p4,$p5);return $v_0},createAutoCompleteControl:function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7,$p8){var $v_0=Mscrm.InlineControlFactory.createInlineAutoCompletePicklistControlForDom($p0.get_jQueryObject(),$p1,$p2,$p3,$p4,$p5,$p6,$p7,$p8),$v_1=(new Mscrm.Proxies.JQueryProxy).selectInElement(".ui-combobox-toggle",new Mscrm.Proxies.JQueryObjectProxy($v_0.get_chromeElement()));if(window.LOCID_UI_DIR==="RTL")$v_1.addClass("combobox-rtl");else $v_1.addClass("combobox-ltr");return $v_0}};Type.registerNamespace("Mscrm.BusinessRules.Proxies");Mscrm.BusinessRules.Proxies.IBusinessRuleServiceProxy=function(){};Mscrm.BusinessRules.Proxies.IBusinessRuleServiceProxy.registerInterface("Mscrm.BusinessRules.Proxies.IBusinessRuleServiceProxy");Mscrm.BusinessRules.Proxies.IJavaScriptSerializerProxy=function(){};Mscrm.BusinessRules.Proxies.IJavaScriptSerializerProxy.registerInterface("Mscrm.BusinessRules.Proxies.IJavaScriptSerializerProxy");Mscrm.BusinessRules.Proxies.BusinessRuleServiceProxy=function(){};Mscrm.BusinessRules.Proxies.BusinessRuleServiceProxy.prototype={createRule:function($p0,$p1,$p2){var $v_0=new RemoteCommand("BusinessRulesWebService","Create");$v_0.ErrorHandler=$p1;$v_0.SetParameter("ruleAsJson",$p0);return $v_0.Execute($p2)},updateRule:function($p0,$p1,$p2){var $v_0=new RemoteCommand("BusinessRulesWebService","Update");$v_0.ErrorHandler=$p1;$v_0.SetParameter("ruleAsJson",$p0);return $v_0.Execute($p2)},copyRule:function($p0,$p1,$p2){var $v_0=new RemoteCommand("BusinessRulesWebService","CopyRule");$v_0.ErrorHandler=$p1;$v_0.SetParameter("ruleAsJson",$p0);return $v_0.Execute($p2)},updateCalculatedField:function($p0,$p1,$p2,$p3,$p4){var $v_0=new RemoteCommand("BusinessRulesWebService","UpdateCalculatedField");$v_0.ErrorHandler=$p3;$v_0.SetParameter("ruleAsJson",$p0);$v_0.SetParameter("entityId",$p1);$v_0.SetParameter("attributeId",$p2);return $v_0.Execute($p4)},updateRollupField:function($p0,$p1,$p2,$p3,$p4){var $v_0=new RemoteCommand("BusinessRulesWebService","UpdateRollupField");$v_0.ErrorHandler=$p3;$v_0.SetParameter("ruleAsJson",$p0);$v_0.SetParameter("entityId",$p1);$v_0.SetParameter("attributeId",$p2);return $v_0.Execute($p4)},getEntityMetadata:function($p0,$p1,$p2,$p3){var $v_0=new RemoteCommand("BusinessRulesWebService","GetEntityMetadata");$v_0.ErrorHandler=$p2;$v_0.SetParameter("editorPageType",$p0);$v_0.SetParameter("entityLogicalName",$p1);return $v_0.Execute($p3)},getOneToManyRelationships:function($p0,$p1,$p2,$p3){var $v_0=new RemoteCommand("BusinessRulesWebService","GetOneToManyRelationships");$v_0.ErrorHandler=$p2;$v_0.SetParameter("editorPageType",$p0);$v_0.SetParameter("entityLogicalName",$p1);return $v_0.Execute($p3)},getProcessStageMetadata:function($p0){var $v_0=new RemoteCommand("ProcessControl","GetProcessStageData");$v_0.SetParameter("processId",$p0);var $v_1=new Mscrm.Proxies.RemoteCommandResultProxy;$v_1.set_element($v_0.Execute());return $v_1}};Mscrm.BusinessRules.Proxies.JavaScriptSerializerProxy=function(){};Mscrm.BusinessRules.Proxies.JavaScriptSerializerProxy.prototype={serialize:function($p0){return Sys.Serialization.JavaScriptSerializer.serialize($p0)}};Type.registerNamespace("ProcessControl.Configuration");ProcessControl.Configuration.PBLClientProxy=function(){};ProcessControl.Configuration.PBLClientProxy.launchLookupDialog=function(entityLogicalName,attributeLogicalName,callback){var $v_0=Mscrm.BusinessRules.BusinessRuleEntityManager.get_instance();$v_0.generateAttributeDictionary($v_0.getEntity(entityLogicalName));var $v_1=$v_0.getAttributeByEntityAndName(entityLogicalName,attributeLogicalName),$v_2=$v_1.AdditionalMetadata.DefaultType,$v_3=$v_1.AdditionalMetadata.LookupTypes;if(!IsNull($v_2)&&!IsNull($v_3)){var $v_4="/"+window.ORG_UNIQUE_NAME+"/_controls/lookup/lookupinfo.aspx?DefaultType="+$v_2+"&IsInlineMultiLookup=0&LookupStyle=single&ShowNewButton=1&ShowPropButton=1&browse=false&dType=1&mrsh=false&objecttypes="+$v_3,$v_5=Mscrm.CrmUri.create($v_4),$v_6=new Mscrm.ReturnFunctionReference;$v_6.callback=callback;var $v_7=new Mscrm.CrmDialog($v_5,null,550,550,null);$v_7.setCallbackReference($v_6);$v_7.show()}};ProcessControl.Configuration.PBLClientProxy.getLoadedRelationshipEntityMetadata=function(){if(!ProcessControl.Configuration.PBLClientProxy.$7v)ProcessControl.Configuration.PBLClientProxy.$7v=$P_CRM.parseJSON(window._BusinessRuleEditorJsonData.substr(8));return ProcessControl.Configuration.PBLClientProxy.$7v.RelatedLinkedEntities};ProcessControl.Configuration.PBLClientProxy.buildChromeElement=function(elementId){var $v_0=new Mscrm.Proxies.JQueryProxy,$v_1="DateTimeControl",$v_2="",$v_3=$v_0.fromHtml("<div></div>");$v_3.addClass($v_2||"");$v_3.attribute("id",elementId);var $v_4=$v_0.fromHtml("<div></div>");$v_4.addClass("ms-crm-Inline-Value");$v_4.set_text($v_1||"");$v_3.append($v_4);return $v_3};ProcessControl.Configuration.PBLClientProxy.createInlineDateTimeControl=function(element,attributeName,initialDateTime,parentContainerId,isDateOnly){var $v_0;if(isDateOnly)$v_0="date";else $v_0="datetime";var $v_1={};$v_1["raw"]=IsNull(initialDateTime)?null:ProcessControl.Configuration.PBLClientProxy.convertToUserSettingTime(initialDateTime,isDateOnly).localeFormat("s");return Mscrm.InlineControlFactory.createInlineDateTimeControlForDom(element,attributeName,$v_0,1,$v_1,parentContainerId)};ProcessControl.Configuration.PBLClientProxy.updateDateTimeControl=function(dateTimeControlEditView){dateTimeControlEditView.get_dataContext().setPropertyWithoutRaisingEvent("EditValue",dateTimeControlEditView.get_editElementValue());dateTimeControlEditView.confirm()};ProcessControl.Configuration.PBLClientProxy.getUserSettingTime=function(value,isDateOnly){var $v_0=value;if(isDateOnly){var $v_1=Date.UTC($v_0.getFullYear(),$v_0.getMonth(),$v_0.getDate());return ProcessControl.Configuration.PBLClientProxy.getUtcStringInGmtFormat(new Date($v_1))}else{var $v_2=$v_0.getTime(),$v_3=ProcessControl.Configuration.PBLClientProxy.$82($v_0),$v_4=new Date($v_2-$v_3);return ProcessControl.Configuration.PBLClientProxy.getUtcStringInGmtFormat($v_4)}};ProcessControl.Configuration.PBLClientProxy.convertToUserSettingTime=function(dateTimeValue,isDateOnly){if(IsNull(dateTimeValue))return null;if(isDateOnly)return dateTimeValue;else{var $v_0=dateTimeValue.getTime(),$v_1=ProcessControl.Configuration.PBLClientProxy.$82(dateTimeValue),$v_2=new Date($v_0+$v_1);return $v_2}};ProcessControl.Configuration.PBLClientProxy.getUtcStringInGmtFormat=function(utcTime){return utcTime.toUTCString().replace("UTC","GMT")};ProcessControl.Configuration.PBLClientProxy.parseDateInvariant=function(dateString){return Date.parseInvariant(dateString)};ProcessControl.Configuration.PBLClientProxy.$82=function($p0){return ($p0.getTimezoneOffset()+window.ORG_TIMEZONE_OFFSET)*6e4};Mscrm.BusinessRuleErrorFlyout.registerClass("Mscrm.BusinessRuleErrorFlyout");Mscrm.BusinessRuleConfirmFlyout.registerClass("Mscrm.BusinessRuleConfirmFlyout");Mscrm.MaskPanel.registerClass("Mscrm.MaskPanel");Mscrm.BusinessRulesGrid.registerClass("Mscrm.BusinessRulesGrid");Mscrm.BusinessRule.registerClass("Mscrm.BusinessRule");Mscrm.ProcessTrigger.registerClass("Mscrm.ProcessTrigger");Mscrm.BusinessRuleEditorDataJsonWrapper.registerClass("Mscrm.BusinessRuleEditorDataJsonWrapper");Mscrm.EditorEntityMetadataJsonWrapper.registerClass("Mscrm.EditorEntityMetadataJsonWrapper");Mscrm.EditorEntityBpfMetadataJsonWrapper.registerClass("Mscrm.EditorEntityBpfMetadataJsonWrapper");Mscrm.EditorEntityLabelJsonWrapper.registerClass("Mscrm.EditorEntityLabelJsonWrapper");Mscrm.EditorEntityFieldMetadataJsonWrapper.registerClass("Mscrm.EditorEntityFieldMetadataJsonWrapper");Mscrm.BpfAttributeMetadataJsonWrapper.registerClass("Mscrm.BpfAttributeMetadataJsonWrapper");Mscrm.EditorScopeSelectorDataJsonWrapper.registerClass("Mscrm.EditorScopeSelectorDataJsonWrapper");Mscrm.RelationshipEntityMetadataJsonWrapper.registerClass("Mscrm.RelationshipEntityMetadataJsonWrapper");Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior.registerClass("Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior",Mscrm.InlineEditChromeBehaviorBase$1.$$(Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase));Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior.registerClass("Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior",Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior);Mscrm.BusinessRules.BranchingExpressionInlineEditChromeBehavior.registerClass("Mscrm.BusinessRules.BranchingExpressionInlineEditChromeBehavior",Mscrm.BusinessRules.ExpressionInlineEditChromeBehavior);Mscrm.BusinessRules.BusinessRuleLayoutBase.registerClass("Mscrm.BusinessRules.BusinessRuleLayoutBase",Mscrm.BaseLayout);Mscrm.BusinessRules.ExpressionLayoutBase.registerClass("Mscrm.BusinessRules.ExpressionLayoutBase",Mscrm.BusinessRules.BusinessRuleLayoutBase);Mscrm.BusinessRules.BranchingExpressionLayout.registerClass("Mscrm.BusinessRules.BranchingExpressionLayout",Mscrm.BusinessRules.ExpressionLayoutBase);Mscrm.BusinessRules.ExpressionBuilder.registerClass("Mscrm.BusinessRules.ExpressionBuilder");Mscrm.BusinessRules.FormulaParser.registerClass("Mscrm.BusinessRules.FormulaParser");Mscrm.BusinessRules.LexicalAnalysis.registerClass("Mscrm.BusinessRules.LexicalAnalysis");Mscrm.BusinessRules.StepBuilder.registerClass("Mscrm.BusinessRules.StepBuilder");Mscrm.BusinessRules.SyntaxAnalysis.registerClass("Mscrm.BusinessRules.SyntaxAnalysis");Mscrm.BusinessRules.ParseResult.registerClass("Mscrm.BusinessRules.ParseResult");Mscrm.BusinessRules.Token.registerClass("Mscrm.BusinessRules.Token");Mscrm.BusinessRules.BusinessRuleInlineEditFactory.registerClass("Mscrm.BusinessRules.BusinessRuleInlineEditFactory");Mscrm.BusinessRules.BusinessRuleStepChromeStateData.registerClass("Mscrm.BusinessRules.BusinessRuleStepChromeStateData",Mscrm.ChromeStateData,Mscrm.BusinessRules.IBusinessRuleStepChromeStateData,Mscrm.InlineEdit.Common.IChromeStateData,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.BusinessRuleStepEditChromeState.registerClass("Mscrm.BusinessRules.BusinessRuleStepEditChromeState",null,Mscrm.InlineEdit.Common.IChromeState);Mscrm.BusinessRules.BusinessRuleStepEditHintChromeState.registerClass("Mscrm.BusinessRules.BusinessRuleStepEditHintChromeState",null,Mscrm.InlineEdit.Common.IChromeState);Mscrm.BusinessRules.BusinessRuleStepReadChromeState.registerClass("Mscrm.BusinessRules.BusinessRuleStepReadChromeState",null,Mscrm.InlineEdit.Common.IChromeState);Mscrm.BusinessRules.BusinessRuleStepSelectedChromeState.registerClass("Mscrm.BusinessRules.BusinessRuleStepSelectedChromeState",null,Mscrm.InlineEdit.Common.IChromeState);Mscrm.BusinessRules.ChromeStateFactory.registerClass("Mscrm.BusinessRules.ChromeStateFactory",null,Mscrm.InlineEdit.Common.IChromeStateFactory);Mscrm.BusinessRules.StepInlineEditChromeBehavior.registerClass("Mscrm.BusinessRules.StepInlineEditChromeBehavior",Mscrm.BusinessRules.BusinessRuleInlineEditChromeBehavior);Mscrm.BusinessRules.StepLayoutBase.registerClass("Mscrm.BusinessRules.StepLayoutBase",Mscrm.BusinessRules.BusinessRuleLayoutBase);Mscrm.BusinessRules.EditOperandContext.registerClass("Mscrm.BusinessRules.EditOperandContext",null,Mscrm.BusinessRules.IEditOperandContext);Mscrm.BusinessRules.MultiValueExpression.registerClass("Mscrm.BusinessRules.MultiValueExpression",Microsoft.Crm.Workflow.Expressions.ExpressionBase,Mscrm.BusinessRules.IMultiValueExpression);Mscrm.BusinessRules.ValueDisplayFormatProvider.registerClass("Mscrm.BusinessRules.ValueDisplayFormatProvider");Mscrm.BusinessRules.ValueExpressionAdapterFactory.registerClass("Mscrm.BusinessRules.ValueExpressionAdapterFactory");Mscrm.BusinessRules.PrimitiveValueExpressionAdapter.registerClass("Mscrm.BusinessRules.PrimitiveValueExpressionAdapter",null,Mscrm.BusinessRules.IValueExpressionAdapter);Mscrm.BusinessRules.DateValueExpressionAdapter.registerClass("Mscrm.BusinessRules.DateValueExpressionAdapter",null,Mscrm.BusinessRules.IValueExpressionAdapter);Mscrm.BusinessRules.DateTimeValueExpressionAdapter.registerClass("Mscrm.BusinessRules.DateTimeValueExpressionAdapter",Mscrm.BusinessRules.DateValueExpressionAdapter);Mscrm.BusinessRules.BpfValueExpressionAdapter.registerClass("Mscrm.BusinessRules.BpfValueExpressionAdapter",null,Mscrm.BusinessRules.IValueExpressionAdapter);Mscrm.BusinessRules.OptionSetValueExpressionAdapter.registerClass("Mscrm.BusinessRules.OptionSetValueExpressionAdapter",null,Mscrm.BusinessRules.IValueExpressionAdapter);Mscrm.BusinessRules.LookupValueExpressionAdapter.registerClass("Mscrm.BusinessRules.LookupValueExpressionAdapter",null,Mscrm.BusinessRules.IValueExpressionAdapter);Mscrm.BusinessRules.TimeSpanExpressionAdapter.registerClass("Mscrm.BusinessRules.TimeSpanExpressionAdapter",null,Mscrm.BusinessRules.IValueExpressionAdapter);Mscrm.BusinessRules.BusinessRuleEntityManager.registerClass("Mscrm.BusinessRules.BusinessRuleEntityManager",null,Mscrm.BusinessRules.IBusinessRuleEntityManager);Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity.registerClass("Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredEntity");Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities.registerClass("Mscrm.BusinessRules.BusinessRuleEntityManager.DeferredRelatedEntities");Mscrm.BusinessRules.AttributeFilterBase.registerClass("Mscrm.BusinessRules.AttributeFilterBase",null,Mscrm.BusinessRules.IAttributeFilter);Mscrm.BusinessRules.PersistentAttributesFilter.registerClass("Mscrm.BusinessRules.PersistentAttributesFilter",Mscrm.BusinessRules.AttributeFilterBase);Mscrm.BusinessRules.NullAttributesFilter.registerClass("Mscrm.BusinessRules.NullAttributesFilter",Mscrm.BusinessRules.AttributeFilterBase);Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter.registerClass("Mscrm.BusinessRules.RollupSourceTypeMaskAttributesFilter",Mscrm.BusinessRules.AttributeFilterBase);Mscrm.BusinessRules.SourceTypeMaskAttributesFilter.registerClass("Mscrm.BusinessRules.SourceTypeMaskAttributesFilter",Mscrm.BusinessRules.AttributeFilterBase);Mscrm.BusinessRules.EntityMetadataManager.registerClass("Mscrm.BusinessRules.EntityMetadataManager",null,Mscrm.BusinessRules.IEntityMetadataManager);Mscrm.BusinessRules.MetadataUtility.registerClass("Mscrm.BusinessRules.MetadataUtility");Mscrm.BusinessRules.BusinessRuleInitializer.registerClass("Mscrm.BusinessRules.BusinessRuleInitializer");Mscrm.BusinessRules.BusinessRuleManager.registerClass("Mscrm.BusinessRules.BusinessRuleManager");Mscrm.BusinessRules.TriggerScope.registerClass("Mscrm.BusinessRules.TriggerScope");Mscrm.BusinessRules.Constants.registerClass("Mscrm.BusinessRules.Constants");Mscrm.BusinessRules.Scopes.registerClass("Mscrm.BusinessRules.Scopes");Mscrm.BusinessRules.ClientVariable.registerClass("Mscrm.BusinessRules.ClientVariable");Mscrm.BusinessRules.CssClassName.registerClass("Mscrm.BusinessRules.CssClassName");Mscrm.BusinessRules.HtmlFormat.registerClass("Mscrm.BusinessRules.HtmlFormat");Mscrm.BusinessRules.HtmlElementNames.registerClass("Mscrm.BusinessRules.HtmlElementNames");Mscrm.BusinessRules.HtmlAttributeNames.registerClass("Mscrm.BusinessRules.HtmlAttributeNames");Mscrm.BusinessRules.BpfAttributeType.registerClass("Mscrm.BusinessRules.BpfAttributeType");Mscrm.BusinessRules.BpfAttributeName.registerClass("Mscrm.BusinessRules.BpfAttributeName");Mscrm.BusinessRules.FieldType.registerClass("Mscrm.BusinessRules.FieldType");Mscrm.BusinessRules.ImageUri.registerClass("Mscrm.BusinessRules.ImageUri");Mscrm.BusinessRules.PBLEditorIds.registerClass("Mscrm.BusinessRules.PBLEditorIds");Mscrm.BusinessRules.RollupEditorIds.registerClass("Mscrm.BusinessRules.RollupEditorIds");Mscrm.BusinessRules.ActionMenuCommands.registerClass("Mscrm.BusinessRules.ActionMenuCommands");Mscrm.BusinessRules.SharedMethods.registerClass("Mscrm.BusinessRules.SharedMethods");Mscrm.BusinessRules.Bindings.ClickBinding.registerClass("Mscrm.BusinessRules.Bindings.ClickBinding",null,Mscrm.BusinessRules.Bindings.IClickBinding,Mscrm.BusinessRules.Bindings.IBinding,Sys.IDisposable);Mscrm.BusinessRules.Bindings.DataContextValueChangeBinding.registerClass("Mscrm.BusinessRules.Bindings.DataContextValueChangeBinding",null,Mscrm.BusinessRules.Bindings.IDataContextValueChangeBinding,Mscrm.BusinessRules.Bindings.IValueChangeBinding,Mscrm.BusinessRules.Bindings.IBinding,Sys.IDisposable);Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding.registerClass("Mscrm.BusinessRules.Bindings.InlineControlFieldValueChangeBinding",null,Mscrm.BusinessRules.Bindings.IInlineControlFieldValueChangeBinding,Mscrm.BusinessRules.Bindings.IValueChangeBinding,Mscrm.BusinessRules.Bindings.IBinding,Sys.IDisposable);Mscrm.BusinessRules.Bindings.KeyDownBinding.registerClass("Mscrm.BusinessRules.Bindings.KeyDownBinding",null,Mscrm.BusinessRules.Bindings.IKeyDownBinding,Mscrm.BusinessRules.Bindings.IBinding,Sys.IDisposable);Mscrm.BusinessRules.Bindings.TextInputValueChangeBinding.registerClass("Mscrm.BusinessRules.Bindings.TextInputValueChangeBinding",null,Mscrm.BusinessRules.Bindings.ITextInputValueChangeBinding,Mscrm.BusinessRules.Bindings.IValueChangeBinding,Mscrm.BusinessRules.Bindings.IBinding,Sys.IDisposable);Mscrm.BusinessRules.Bindings.ValueBinding.registerClass("Mscrm.BusinessRules.Bindings.ValueBinding",null,Mscrm.BusinessRules.Bindings.IValueBinding,Mscrm.BusinessRules.Bindings.IBinding,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ViewModel",null,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.SectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SectionViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel",Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.ConditionBranchStep));Mscrm.BusinessRules.ViewModels.BranchingConditionBranchSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BranchingConditionBranchSectionViewModel",Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel,Mscrm.BusinessRules.ViewModels.IBranchingConditionBranchSectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ConditionsViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionsViewModel",Mscrm.BusinessRules.ViewModels.ViewModel);Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel",Mscrm.BusinessRules.ViewModels.ConditionsViewModel,Mscrm.BusinessRules.ViewModels.IBranchingConditionsViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep),Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IManageBusinessRuleViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ManageCalculatedFieldViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ManageCalculatedFieldViewModel",Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel);Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.FilterSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.FilterSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.FilterConditionsViewModel.registerClass("Mscrm.BusinessRules.ViewModels.FilterConditionsViewModel",Mscrm.BusinessRules.ViewModels.ConditionsViewModel);Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RollupFieldReadToolBarViewModel",Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IRollupFieldReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ManageRollupFieldViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ManageRollupFieldViewModel",Mscrm.BusinessRules.ViewModels.ManageBusinessRuleViewModel);Mscrm.BusinessRules.ViewModels.FormBodyViewModel.registerClass("Mscrm.BusinessRules.ViewModels.FormBodyViewModel",Mscrm.BusinessRules.ViewModels.SectionViewModel,Mscrm.BusinessRules.ViewModels.IFormBodyViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.RollupFieldFormBodyViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RollupFieldFormBodyViewModel",Mscrm.BusinessRules.ViewModels.FormBodyViewModel);Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager",null,Mscrm.BusinessRules.ViewModels.IExpressionComponentStateManager,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.LeftOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.LeftOperandStateManager",Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager,Mscrm.BusinessRules.ViewModels.ILeftOperandStateManager,Mscrm.BusinessRules.ViewModels.IExpressionComponentStateManager,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticLeftOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticLeftOperandStateManager",Mscrm.BusinessRules.ViewModels.LeftOperandStateManager);Mscrm.BusinessRules.ViewModels.OperandTypeStateManager.registerClass("Mscrm.BusinessRules.ViewModels.OperandTypeStateManager",Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager);Mscrm.BusinessRules.ViewModels.ArithmeticOperandTypeStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticOperandTypeStateManager",Mscrm.BusinessRules.ViewModels.OperandTypeStateManager);Mscrm.BusinessRules.ViewModels.OperatorStateManager.registerClass("Mscrm.BusinessRules.ViewModels.OperatorStateManager",Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager);Mscrm.BusinessRules.ViewModels.ArithmeticOperatorStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticOperatorStateManager",Mscrm.BusinessRules.ViewModels.OperatorStateManager);Mscrm.BusinessRules.ViewModels.RightOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.RightOperandStateManager",Mscrm.BusinessRules.ViewModels.ExpressionComponentStateManager);Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandStateManager",Mscrm.BusinessRules.ViewModels.RightOperandStateManager);Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase",null,Mscrm.BusinessRules.ViewModels.IExpressionStateManager,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticExpressionStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticExpressionStateManager",Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase);Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager",null,Mscrm.BusinessRules.ViewModels.IRightInnerOperandStateManager,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager",Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager);Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticRightValueOperandStateManager",Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager);Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager",Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager);Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticRightFieldOperandStateManager",Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager);Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator.registerClass("Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator",null,Mscrm.BusinessRules.ViewModels.IRightOperandMetadataCalculator);Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandMetadataCalculator",Mscrm.BusinessRules.ViewModels.RightOperandMetadataCalculator);Mscrm.BusinessRules.ViewModels.BpfStageLeftOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageLeftOperandStateManager",Mscrm.BusinessRules.ViewModels.LeftOperandStateManager);Mscrm.BusinessRules.ViewModels.BpfStageOperandTypeStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageOperandTypeStateManager",Mscrm.BusinessRules.ViewModels.OperandTypeStateManager);Mscrm.BusinessRules.ViewModels.BpfStageOperatorStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageOperatorStateManager",Mscrm.BusinessRules.ViewModels.OperatorStateManager);Mscrm.BusinessRules.ViewModels.BpfStageRightOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageRightOperandStateManager",Mscrm.BusinessRules.ViewModels.RightOperandStateManager);Mscrm.BusinessRules.ViewModels.BpfStageExpressionStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageExpressionStateManager",Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase);Mscrm.BusinessRules.ViewModels.BpfStageRightValueOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageRightValueOperandStateManager",Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager);Mscrm.BusinessRules.ViewModels.BpfStageRightFieldOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageRightFieldOperandStateManager",Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager);Mscrm.BusinessRules.ViewModels.RightNullOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.RightNullOperandStateManager",Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager);Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.RightSubexpressionOperandStateManager",Mscrm.BusinessRules.ViewModels.RightInnerOperandStateManager);Mscrm.BusinessRules.ViewModels.ConditionLeftOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionLeftOperandStateManager",Mscrm.BusinessRules.ViewModels.LeftOperandStateManager);Mscrm.BusinessRules.ViewModels.ConditionOperandTypeStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionOperandTypeStateManager",Mscrm.BusinessRules.ViewModels.OperandTypeStateManager);Mscrm.BusinessRules.ViewModels.ConditionOperatorStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionOperatorStateManager",Mscrm.BusinessRules.ViewModels.OperatorStateManager);Mscrm.BusinessRules.ViewModels.ConditionRightOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionRightOperandStateManager",Mscrm.BusinessRules.ViewModels.RightOperandStateManager);Mscrm.BusinessRules.ViewModels.ConditionExpressionStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionExpressionStateManager",Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase);Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionRightValueOperandStateManager",Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager);Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.ConditionRightFieldOperandStateManager",Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager);Mscrm.BusinessRules.ViewModels.SetAttributeValueExpressionStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueExpressionStateManager",Mscrm.BusinessRules.ViewModels.ExpressionStateManagerBase);Mscrm.BusinessRules.ViewModels.SetAttributeValueLeftOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueLeftOperandStateManager",Mscrm.BusinessRules.ViewModels.LeftOperandStateManager);Mscrm.BusinessRules.ViewModels.SetAttributeValueOperandTypeStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueOperandTypeStateManager",Mscrm.BusinessRules.ViewModels.OperandTypeStateManager);Mscrm.BusinessRules.ViewModels.SetAttributeValueOperatorStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueOperatorStateManager",Mscrm.BusinessRules.ViewModels.OperatorStateManager);Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueRightFieldOperandStateManager",Mscrm.BusinessRules.ViewModels.RightFieldOperandStateManager);Mscrm.BusinessRules.ViewModels.SetAttributeValueRightValueOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueRightValueOperandStateManager",Mscrm.BusinessRules.ViewModels.RightValueOperandStateManager);Mscrm.BusinessRules.ViewModels.SetAttributeValueRightOperandStateManager.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueRightOperandStateManager",Mscrm.BusinessRules.ViewModels.RightOperandStateManager);Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping",null,Mscrm.BusinessRules.ViewModels.IExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.BooleanExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.BooleanExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.BpfProcessExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.BpfProcessExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.BpfStageCategoryExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageCategoryExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.BpfStageExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.DateTimeExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.DateTimeExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.TextExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.TextExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.OptionSetOperatorList.registerClass("Mscrm.BusinessRules.ViewModels.OptionSetOperatorList",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.PicklistExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.PicklistExpressionMapping",Mscrm.BusinessRules.ViewModels.OptionSetOperatorList);Mscrm.BusinessRules.ViewModels.StateExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.StateExpressionMapping",Mscrm.BusinessRules.ViewModels.OptionSetOperatorList);Mscrm.BusinessRules.ViewModels.StatusExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.StatusExpressionMapping",Mscrm.BusinessRules.ViewModels.OptionSetOperatorList);Mscrm.BusinessRules.ViewModels.NumberExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.NumberExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.IntegerExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.IntegerExpressionMapping",Mscrm.BusinessRules.ViewModels.NumberExpressionMapping);Mscrm.BusinessRules.ViewModels.DecimalExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.DecimalExpressionMapping",Mscrm.BusinessRules.ViewModels.NumberExpressionMapping);Mscrm.BusinessRules.ViewModels.FloatExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.FloatExpressionMapping",Mscrm.BusinessRules.ViewModels.NumberExpressionMapping);Mscrm.BusinessRules.ViewModels.MoneyExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.MoneyExpressionMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache",null,Mscrm.BusinessRules.ViewModels.IExpressionTypeMappingCache);Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase.registerClass("Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.LookupExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.LookupExpressionMapping",Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase);Mscrm.BusinessRules.ViewModels.CustomerExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.CustomerExpressionMapping",Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase);Mscrm.BusinessRules.ViewModels.OwnerExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.OwnerExpressionMapping",Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase);Mscrm.BusinessRules.ViewModels.KeyExpressionMapping.registerClass("Mscrm.BusinessRules.ViewModels.KeyExpressionMapping",Mscrm.BusinessRules.ViewModels.LookupExpressionMappingBase);Mscrm.BusinessRules.ViewModels.UniqueIdentifierExpressionTypeMapping.registerClass("Mscrm.BusinessRules.ViewModels.UniqueIdentifierExpressionTypeMapping",Mscrm.BusinessRules.ViewModels.ExpressionTypeMapping);Mscrm.BusinessRules.ViewModels.DefaultValueExpressionBuilder.registerClass("Mscrm.BusinessRules.ViewModels.DefaultValueExpressionBuilder");Mscrm.BusinessRules.ViewModels.OperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.OperandEditViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel",Mscrm.BusinessRules.ViewModels.OperandEditViewModel,Mscrm.BusinessRules.ViewModels.IValueOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.OperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.OperandViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ValueOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ValueOperandViewModel",Mscrm.BusinessRules.ViewModels.OperandViewModel,Mscrm.BusinessRules.ViewModels.IValueOperandViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.RightOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RightOperandViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IRightOperandViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandViewModel",Mscrm.BusinessRules.ViewModels.RightOperandViewModel);Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel",Mscrm.BusinessRules.ViewModels.OperandEditViewModel,Mscrm.BusinessRules.ViewModels.IRightOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticRightOperandEditViewModel",Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel);Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel",Mscrm.BusinessRules.ViewModels.OperandEditViewModel,Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel",Mscrm.BusinessRules.ViewModels.OperandEditViewModel,Mscrm.BusinessRules.ViewModels.INullOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.AttributeOperandViewModel",Mscrm.BusinessRules.ViewModels.OperandViewModel,Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel",Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfAttributeOperandViewModel",Mscrm.BusinessRules.ViewModels.OperandViewModel,Mscrm.BusinessRules.ViewModels.IBpfAttributeOperandViewModel,Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.BpfStageRightOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageRightOperandViewModel",Mscrm.BusinessRules.ViewModels.RightOperandViewModel);Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageRightOperandEditViewModel",Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel);Mscrm.BusinessRules.ViewModels.NullOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.NullOperandViewModel",Mscrm.BusinessRules.ViewModels.OperandViewModel);Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel",Mscrm.BusinessRules.ViewModels.RightOperandViewModel);Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel",Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel);Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionExpressionEditViewModel",Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel,Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticExpressionEditViewModel",Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel);Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageExpressionEditViewModel",Mscrm.BusinessRules.ViewModels.ExpressionEditViewModel);Mscrm.BusinessRules.ViewModels.ExpressionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IExpressionViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel",Mscrm.BusinessRules.ViewModels.ExpressionViewModel,Mscrm.BusinessRules.ViewModels.IConditionExpressionViewModel,Mscrm.BusinessRules.ViewModels.IExpressionViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticExpressionViewModel",Mscrm.BusinessRules.ViewModels.ExpressionViewModel);Mscrm.BusinessRules.ViewModels.ExpressionConverter.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionConverter",null,Microsoft.Crm.Workflow.Expressions.IExpressionVisitor);Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageExpressionViewModel",Mscrm.BusinessRules.ViewModels.ExpressionViewModel);Mscrm.BusinessRules.ViewModels.LeftOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.LeftOperandViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.ILeftOperandViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel",Mscrm.BusinessRules.ViewModels.OperandEditViewModel,Mscrm.BusinessRules.ViewModels.ILeftOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.OperatorViewModelBase.registerClass("Mscrm.BusinessRules.ViewModels.OperatorViewModelBase",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IOperatorViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel.registerClass("Mscrm.BusinessRules.ViewModels.NullOperatorOperatorViewModel",Mscrm.BusinessRules.ViewModels.OperatorViewModelBase);Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase.registerClass("Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IOperatorEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.NullOperatorEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.NullOperatorEditViewModel",Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase);Mscrm.BusinessRules.ViewModels.OperandType.registerClass("Mscrm.BusinessRules.ViewModels.OperandType");Mscrm.BusinessRules.ViewModels.OperandTypeViewModel.registerClass("Mscrm.BusinessRules.ViewModels.OperandTypeViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IOperandTypeViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IOperandTypeEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.OperandViewModelFactory.registerClass("Mscrm.BusinessRules.ViewModels.OperandViewModelFactory");Mscrm.BusinessRules.ViewModels.ConditionOperatorEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionOperatorEditViewModel",Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase);Mscrm.BusinessRules.ViewModels.ArithmeticOperatorEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticOperatorEditViewModel",Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase);Mscrm.BusinessRules.ViewModels.BpfStageOperatorEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageOperatorEditViewModel",Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase);Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel",Mscrm.BusinessRules.ViewModels.OperatorViewModelBase,Mscrm.BusinessRules.ViewModels.IOperatorViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel",Mscrm.BusinessRules.ViewModels.OperatorViewModelBase);Mscrm.BusinessRules.ViewModels.BpfStageOperatorViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageOperatorViewModel",Mscrm.BusinessRules.ViewModels.OperatorViewModelBase);Mscrm.BusinessRules.ViewModels.SetValueRightOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetValueRightOperandViewModel",Mscrm.BusinessRules.ViewModels.ConditionRightOperandViewModel);Mscrm.BusinessRules.ViewModels.SetValueRightOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetValueRightOperandEditViewModel",Mscrm.BusinessRules.ViewModels.ConditionRightOperandEditViewModel);Mscrm.BusinessRules.ViewModels.AndOrViewModel.registerClass("Mscrm.BusinessRules.ViewModels.AndOrViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IAndOrViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.AndOrEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.AndOrEditViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IAndOrEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandViewModel",Mscrm.BusinessRules.ViewModels.OperandViewModel,Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandViewModel,Mscrm.BusinessRules.ViewModels.IAttributeOperandViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel",Mscrm.BusinessRules.ViewModels.OperandEditViewModel,Mscrm.BusinessRules.ViewModels.IRelatedAttributeOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IAttributeOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator");Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionEditViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionEditViewModel,Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep),Mscrm.BusinessRules.ViewModels.ISetAttributeValueStepSectionViewModel,Mscrm.BusinessRules.ViewModels.IStepSectionViewModel,Mscrm.BusinessRules.ViewModels.IExpressionViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionEditViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionEditViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionEditViewModel,Mscrm.BusinessRules.ViewModels.IExpressionEditViewModel,Mscrm.BusinessRules.ViewModels.IOperandEditViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetDefaultValueStep),Mscrm.BusinessRules.ViewModels.ISetDefaultValueStepSectionViewModel,Mscrm.BusinessRules.ViewModels.IStepSectionViewModel,Mscrm.BusinessRules.ViewModels.IExpressionViewModel,Mscrm.BusinessRules.ViewModels.IOperandViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel",Mscrm.BusinessRules.ViewModels.SectionViewModel,Mscrm.BusinessRules.ViewModels.IDescriptionSectionViewModel,Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.RootStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RootStepSectionViewModel",Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.WorkflowStep),Mscrm.BusinessRules.ViewModels.IRootStepSectionViewModel,Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetDisplayModeStep),Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetFieldRequiredLevelStep));Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetVisibilityStep),Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.SetMessageStep),Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel",Mscrm.BusinessRules.ViewModels.StepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.CustomJavascriptStep),Mscrm.BusinessRules.ViewModels.ISectionViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable,Mscrm.BusinessRules.ViewModels.IBusinessRuleViewModelValidator);Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ActionReadToolBarViewModel",Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IActionReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionReadToolBarViewModel",Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IConditionReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ExpressionReadToolBarViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionReadToolBarViewModel",Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IExpressionReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IReadToolBarViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel",Mscrm.BusinessRules.ViewModels.ViewModel,Mscrm.BusinessRules.ViewModels.IReadToolBarButtonViewModel,Mscrm.BusinessRules.ViewModels.IViewModel,Sys.INotifyPropertyChange,Sys.IDisposable);Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.registerClass("Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel",Mscrm.BusinessRules.ViewModels.ViewModel);Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel",Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel);Mscrm.BusinessRules.ViewModels.RelatedEntityControlViewModelFactory.registerClass("Mscrm.BusinessRules.ViewModels.RelatedEntityControlViewModelFactory");Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.registerClass("Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel",Mscrm.BusinessRules.ViewModels.ViewModel);Mscrm.BusinessRules.ViewModels.FieldControlViewModel.registerClass("Mscrm.BusinessRules.ViewModels.FieldControlViewModel",Mscrm.BusinessRules.ViewModels.ViewModel);Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory.registerClass("Mscrm.BusinessRules.ViewModels.ExpressionAdaptorFactory");Mscrm.BusinessRules.ViewModels.BinaryExpressionAdaptor.registerClass("Mscrm.BusinessRules.ViewModels.BinaryExpressionAdaptor",Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.$$(Microsoft.Crm.Workflow.Expressions.BinaryExpression));Mscrm.BusinessRules.ViewModels.UnaryExpressionAdaptor.registerClass("Mscrm.BusinessRules.ViewModels.UnaryExpressionAdaptor",Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.$$(Microsoft.Crm.Workflow.Expressions.UnaryExpression));Mscrm.BusinessRules.ViewModels.ArithmeticMethodCallExpressionAdaptor.registerClass("Mscrm.BusinessRules.ViewModels.ArithmeticMethodCallExpressionAdaptor",Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.$$(Microsoft.Crm.Workflow.Expressions.MethodCallExpression));Mscrm.BusinessRules.ViewModels.BpfStageExpressionAdapter.registerClass("Mscrm.BusinessRules.ViewModels.BpfStageExpressionAdapter",Mscrm.BusinessRules.ViewModels.ExpressionAdaptorBase$1.$$(Microsoft.Crm.Workflow.Expressions.MethodCallExpression));Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel.registerClass("Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel",Mscrm.BusinessRules.ViewModels.CompositeStepSectionViewModel$1.$$(Microsoft.Crm.Workflow.ObjectModel.ConditionStep));Mscrm.BusinessRules.ViewModels.StepSectionViewModelFactory.registerClass("Mscrm.BusinessRules.ViewModels.StepSectionViewModelFactory");Mscrm.BusinessRules.Views.View.registerClass("Mscrm.BusinessRules.Views.View",null,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IInlineEditControlMediatorProvider);Mscrm.BusinessRules.Views.ExpressionView.registerClass("Mscrm.BusinessRules.Views.ExpressionView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IExpressionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.BranchingExpressionView.registerClass("Mscrm.BusinessRules.Views.BranchingExpressionView",Mscrm.BusinessRules.Views.ExpressionView,Mscrm.BusinessRules.Views.IBranchingExpressionView,Mscrm.BusinessRules.Views.IExpressionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView.registerClass("Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView",Mscrm.InlineEditViewBase);Mscrm.BusinessRules.Views.InlineExpressionEditView.registerClass("Mscrm.BusinessRules.Views.InlineExpressionEditView",Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView);Mscrm.BusinessRules.Views.InlineBranchingExpressionEditView.registerClass("Mscrm.BusinessRules.Views.InlineBranchingExpressionEditView",Mscrm.BusinessRules.Views.InlineExpressionEditView);Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase.registerClass("Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase",Mscrm.InlineViewBase,Mscrm.BusinessRules.Views.IBusinessRuleStepInlineViewBase,Mscrm.IInlineView,Sys.IDisposable);Mscrm.BusinessRules.Views.InlineExpressionView.registerClass("Mscrm.BusinessRules.Views.InlineExpressionView",Mscrm.BusinessRules.Views.BusinessRuleStepInlineViewBase,Mscrm.BusinessRules.Views.IInlineExpressionView,Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineBranchingExpressionView.registerClass("Mscrm.BusinessRules.Views.InlineBranchingExpressionView",Mscrm.BusinessRules.Views.InlineExpressionView,Mscrm.BusinessRules.Views.IInlineExpressionView);Mscrm.BusinessRules.Views.SectionView.registerClass("Mscrm.BusinessRules.Views.SectionView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.ISectionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ConditionsSectionsView.registerClass("Mscrm.BusinessRules.Views.ConditionsSectionsView",Mscrm.BusinessRules.Views.SectionView,Mscrm.BusinessRules.Views.ICompositeResultsView,Mscrm.BusinessRules.Views.IConditionsSectionsView,Mscrm.BusinessRules.Views.ISectionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.BranchingConditionsSectionsView.registerClass("Mscrm.BusinessRules.Views.BranchingConditionsSectionsView",Mscrm.BusinessRules.Views.ConditionsSectionsView,Mscrm.BusinessRules.Views.IBranchingConditionsSectionsView,Mscrm.BusinessRules.Views.IConditionsSectionsView,Mscrm.BusinessRules.Views.ISectionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.AddPlaceholderStateBehavior.registerClass("Mscrm.BusinessRules.Views.AddPlaceholderStateBehavior");Mscrm.BusinessRules.Views.AddImageBehavior.registerClass("Mscrm.BusinessRules.Views.AddImageBehavior",null,Sys.IDisposable);Mscrm.BusinessRules.Views.BranchingAddImageBehavior.registerClass("Mscrm.BusinessRules.Views.BranchingAddImageBehavior",Mscrm.BusinessRules.Views.AddImageBehavior);Mscrm.BusinessRules.Views.SetFormulaStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetFormulaStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetFormulaStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetFormulaStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineStepEditViewBase.registerClass("Mscrm.BusinessRules.Views.InlineStepEditViewBase",Mscrm.BusinessRules.Views.BusinessRuleStepInlineEditView);Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.HeaderView.registerClass("Mscrm.BusinessRules.Views.HeaderView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IHeaderView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.CalculatedFieldHeaderView.registerClass("Mscrm.BusinessRules.Views.CalculatedFieldHeaderView",Mscrm.BusinessRules.Views.HeaderView);Mscrm.BusinessRules.Views.IntellisenseControlDecorator.registerClass("Mscrm.BusinessRules.Views.IntellisenseControlDecorator");Mscrm.BusinessRules.Views.BaseTerm.registerClass("Mscrm.BusinessRules.Views.BaseTerm");Mscrm.BusinessRules.Views.SearchTerm.registerClass("Mscrm.BusinessRules.Views.SearchTerm",Mscrm.BusinessRules.Views.BaseTerm);Mscrm.BusinessRules.Views.IntellisenseOption.registerClass("Mscrm.BusinessRules.Views.IntellisenseOption");Mscrm.BusinessRules.Views.ManageBusinessRuleView.registerClass("Mscrm.BusinessRules.Views.ManageBusinessRuleView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IManageBusinessRuleView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ManageCalculatedFieldView.registerClass("Mscrm.BusinessRules.Views.ManageCalculatedFieldView",Mscrm.BusinessRules.Views.ManageBusinessRuleView);Mscrm.BusinessRules.Views.AggregationStepSectionView.registerClass("Mscrm.BusinessRules.Views.AggregationStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineAggregateSectionStepView.registerClass("Mscrm.BusinessRules.Views.InlineAggregateSectionStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineAggregateStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineAggregateStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.FilterSectionView.registerClass("Mscrm.BusinessRules.Views.FilterSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.FilterSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.FilterConditionsSectionsView.registerClass("Mscrm.BusinessRules.Views.FilterConditionsSectionsView",Mscrm.BusinessRules.Views.ConditionsSectionsView);Mscrm.BusinessRules.Views.RollupRuleStepSectionView.registerClass("Mscrm.BusinessRules.Views.RollupRuleStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.SetAggregateStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetAggregateStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetAggregateStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.SetSourceStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetSourceStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetSourceStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.SetTargetStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetTargetStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetTargetStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.SetTargetLinkedStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetTargetLinkedStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetTargetLinkedStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView.registerClass("Mscrm.BusinessRules.Views.UseSourceHierarchyStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepView.registerClass("Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.TargetEntityStepView.registerClass("Mscrm.BusinessRules.Views.TargetEntityStepView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.Views.InlineTargetEntityStepView.registerClass("Mscrm.BusinessRules.Views.InlineTargetEntityStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.TargetLinkedEntityStepView.registerClass("Mscrm.BusinessRules.Views.TargetLinkedEntityStepView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepView.registerClass("Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel,Microsoft.Crm.Workflow.ObjectModel.RollupRuleStep));Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.ToolbarView.registerClass("Mscrm.BusinessRules.Views.ToolbarView",Mscrm.BusinessRules.Views.View);Mscrm.BusinessRules.Views.EditToolbarView.registerClass("Mscrm.BusinessRules.Views.EditToolbarView",Mscrm.BusinessRules.Views.ToolbarView);Mscrm.BusinessRules.Views.AggregationSectionToolBarView.registerClass("Mscrm.BusinessRules.Views.AggregationSectionToolBarView",Mscrm.BusinessRules.Views.EditToolbarView,Mscrm.BusinessRules.Views.IEditToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ReadToolBarView.registerClass("Mscrm.BusinessRules.Views.ReadToolBarView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.AggregationReadToolBarView.registerClass("Mscrm.BusinessRules.Views.AggregationReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IRollupFieldReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.TargetEntityReadToolBarView.registerClass("Mscrm.BusinessRules.Views.TargetEntityReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IRollupFieldReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView.registerClass("Mscrm.BusinessRules.Views.TargetLinkedEntityReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IRollupFieldReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ManageRollupFieldView.registerClass("Mscrm.BusinessRules.Views.ManageRollupFieldView",Mscrm.BusinessRules.Views.ManageBusinessRuleView);Mscrm.BusinessRules.Views.FormBodyView.registerClass("Mscrm.BusinessRules.Views.FormBodyView",Mscrm.BusinessRules.Views.SectionView,Mscrm.BusinessRules.Views.IFormBodyView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.RollupFieldFormBodyView.registerClass("Mscrm.BusinessRules.Views.RollupFieldFormBodyView",Mscrm.BusinessRules.Views.FormBodyView);Mscrm.BusinessRules.Views.RollupFieldHeaderView.registerClass("Mscrm.BusinessRules.Views.RollupFieldHeaderView",Mscrm.BusinessRules.Views.HeaderView);Mscrm.BusinessRules.Views.OperandView.registerClass("Mscrm.BusinessRules.Views.OperandView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.SubexpressionEditView.registerClass("Mscrm.BusinessRules.Views.SubexpressionEditView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.ArithmeticExpressionEditView.registerClass("Mscrm.BusinessRules.Views.ArithmeticExpressionEditView",Mscrm.BusinessRules.Views.SubexpressionEditView);Mscrm.BusinessRules.Views.BpfAttributeOperandView.registerClass("Mscrm.BusinessRules.Views.BpfAttributeOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.IAttributeOperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.BpfStageExpressionEditView.registerClass("Mscrm.BusinessRules.Views.BpfStageExpressionEditView",Mscrm.BusinessRules.Views.SubexpressionEditView);Mscrm.BusinessRules.Views.AttributeOperandView.registerClass("Mscrm.BusinessRules.Views.AttributeOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.IAttributeOperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.NullOperandView.registerClass("Mscrm.BusinessRules.Views.NullOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.INullOperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.LeftOperandView.registerClass("Mscrm.BusinessRules.Views.LeftOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.ILeftOperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.RightOperandView.registerClass("Mscrm.BusinessRules.Views.RightOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.IRightOperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.OperandTypeView.registerClass("Mscrm.BusinessRules.Views.OperandTypeView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IOperandTypeView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.AndOrView.registerClass("Mscrm.BusinessRules.Views.AndOrView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IAndOrView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.OperandViewFactory.registerClass("Mscrm.BusinessRules.Views.OperandViewFactory");Mscrm.BusinessRules.Views.OperatorView.registerClass("Mscrm.BusinessRules.Views.OperatorView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IOperatorView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.RelatedAttributeOperandView.registerClass("Mscrm.BusinessRules.Views.RelatedAttributeOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.IAttributeOperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.ValueOperandView.registerClass("Mscrm.BusinessRules.Views.ValueOperandView",Mscrm.BusinessRules.Views.OperandView,Mscrm.BusinessRules.Views.IOperandView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable,Mscrm.BusinessRules.Views.IResetFocus);Mscrm.BusinessRules.Views.ValueInlineControlRepository.registerClass("Mscrm.BusinessRules.Views.ValueInlineControlRepository",null,Mscrm.BusinessRules.Views.IValueInlineControlRepository,Sys.IDisposable);Mscrm.BusinessRules.Views.ValueInlineControlBase.registerClass("Mscrm.BusinessRules.Views.ValueInlineControlBase",null,Mscrm.BusinessRules.Views.IValueInlineControl,Sys.IDisposable);Mscrm.BusinessRules.Views.ValueInlineControlFactory.registerClass("Mscrm.BusinessRules.Views.ValueInlineControlFactory");Mscrm.BusinessRules.Views.BpfValueInlineControl.registerClass("Mscrm.BusinessRules.Views.BpfValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.DateTimeValueInlineControl.registerClass("Mscrm.BusinessRules.Views.DateTimeValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.TextValueInlineControl.registerClass("Mscrm.BusinessRules.Views.TextValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.NumberValueInlineControl.registerClass("Mscrm.BusinessRules.Views.NumberValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.MoneyValueInlineControl.registerClass("Mscrm.BusinessRules.Views.MoneyValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.PicklistValueInlineControl.registerClass("Mscrm.BusinessRules.Views.PicklistValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.LookupValueInlineControl.registerClass("Mscrm.BusinessRules.Views.LookupValueInlineControl",Mscrm.BusinessRules.Views.ValueInlineControlBase);Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator.registerClass("Mscrm.BusinessRules.Views.ValidateAsRequiredDecorator",Mscrm.SimpleInlineControlView);Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetAttributeValueStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase,Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetAttributeValueStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetAttributeValueStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.SetAttributeValueStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetAttributeValueStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetAttributeValueStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetAttributeValueStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetDefaultValueStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase,Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetDefaultValueStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetDefaultValueStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetDefaultValueStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.SetDefaultValueStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetDefaultValueStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetDefaultValueStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetDefaultValueStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.ConditionBranchStepSectionView.registerClass("Mscrm.BusinessRules.Views.ConditionBranchStepSectionView",Mscrm.BusinessRules.Views.CompositeStepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.ConditionBranchStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.ConditionBranchStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.ActionMenu.registerClass("Mscrm.BusinessRules.Views.ActionMenu");Mscrm.BusinessRules.Views.ConditionStepSectionView.registerClass("Mscrm.BusinessRules.Views.ConditionStepSectionView",Mscrm.BusinessRules.Views.CompositeStepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.ConditionStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.ConditionStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.DescriptionSectionView.registerClass("Mscrm.BusinessRules.Views.DescriptionSectionView",Mscrm.BusinessRules.Views.SectionView,Mscrm.BusinessRules.Views.ISectionView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.RootStepSectionView.registerClass("Mscrm.BusinessRules.Views.RootStepSectionView",Mscrm.BusinessRules.Views.CompositeStepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.RootStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.WorkflowStep),Mscrm.BusinessRules.Views.ICompositeResultsView);Mscrm.BusinessRules.Views.SetDisplayModeStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetDisplayModeStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetDisplayModeStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetDisplayModeStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetDisplayModeStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetDisplayModeStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.SetRequiredLevelStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetRequiredLevelStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetFieldRequiredLevelStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetFieldRequiredLevelStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.SetVisibilityStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetVisibilityStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetVisibilityStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetVisibilityStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetVisibilityStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetVisibilityStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.SetMessageStepSectionView.registerClass("Mscrm.BusinessRules.Views.SetMessageStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetMessageStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetMessageStepView.registerClass("Mscrm.BusinessRules.Views.InlineSetMessageStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.SetMessageStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineSetMessageStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineSetMessageStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.RunScriptStepSectionView.registerClass("Mscrm.BusinessRules.Views.RunScriptStepSectionView",Mscrm.BusinessRules.Views.StepSectionView$2.$$(Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.CustomJavascriptStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineRunScriptStepView.registerClass("Mscrm.BusinessRules.Views.InlineRunScriptStepView",Mscrm.BusinessRules.Views.InlineStepViewBase$2.$$(Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel,Microsoft.Crm.Workflow.ObjectModel.CustomJavascriptStep),Mscrm.BusinessRules.Views.IResults);Mscrm.BusinessRules.Views.InlineRunScriptStepEditView.registerClass("Mscrm.BusinessRules.Views.InlineRunScriptStepEditView",Mscrm.BusinessRules.Views.InlineStepEditViewBase);Mscrm.BusinessRules.Views.StepSectionViewFactory.registerClass("Mscrm.BusinessRules.Views.StepSectionViewFactory");Mscrm.BusinessRules.Views.EditExpressionToolBarView.registerClass("Mscrm.BusinessRules.Views.EditExpressionToolBarView",Mscrm.BusinessRules.Views.EditToolbarView,Mscrm.BusinessRules.Views.IEditToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ReadToolBarButtonView.registerClass("Mscrm.BusinessRules.Views.ReadToolBarButtonView",Mscrm.BusinessRules.Views.View,Mscrm.BusinessRules.Views.IReadToolBarButtonView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ActionReadToolBarView.registerClass("Mscrm.BusinessRules.Views.ActionReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IActionReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ConditionReadToolBarView.registerClass("Mscrm.BusinessRules.Views.ConditionReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IConditionReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ExpressionReadToolBarView.registerClass("Mscrm.BusinessRules.Views.ExpressionReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IExpressionReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ConditionActionReadToolBarView.registerClass("Mscrm.BusinessRules.Views.ConditionActionReadToolBarView",Mscrm.BusinessRules.Views.ReadToolBarView,Mscrm.BusinessRules.Views.IConditionReadToolBarView,Mscrm.BusinessRules.Views.IReadToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.EditStepToolBarView.registerClass("Mscrm.BusinessRules.Views.EditStepToolBarView",Mscrm.BusinessRules.Views.EditToolbarView,Mscrm.BusinessRules.Views.IEditToolBarView,Mscrm.BusinessRules.Views.IView,Sys.IDisposable);Mscrm.BusinessRules.Views.ToolBarFactory.registerClass("Mscrm.BusinessRules.Views.ToolBarFactory");Mscrm.BusinessRules.Views.ViewHelper.registerClass("Mscrm.BusinessRules.Views.ViewHelper");Mscrm.BusinessRules.Views.BpfFieldControlView.registerClass("Mscrm.BusinessRules.Views.BpfFieldControlView",Mscrm.BusinessRules.Views.View);Mscrm.BusinessRules.Views.FieldControlView.registerClass("Mscrm.BusinessRules.Views.FieldControlView",Mscrm.BusinessRules.Views.View);Mscrm.BusinessRules.Views.EntityLookupFieldControlView.registerClass("Mscrm.BusinessRules.Views.EntityLookupFieldControlView",Mscrm.BusinessRules.Views.View);Mscrm.BusinessRules.Views.PBLHeaderView.registerClass("Mscrm.BusinessRules.Views.PBLHeaderView",Mscrm.BusinessRules.Views.HeaderView);Mscrm.BusinessRules.Views.MessageHelper.registerClass("Mscrm.BusinessRules.Views.MessageHelper");Mscrm.BusinessRules.Views.WarningView.registerClass("Mscrm.BusinessRules.Views.WarningView",null,Mscrm.BusinessRules.Views.IWarningView,Sys.IDisposable);Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor.registerClass("Mscrm.BusinessRules.Views.EntityAttributeExpressionValidateVisitor",Microsoft.Crm.Workflow.SharedExpressionVisitor);Mscrm.BusinessRules.Views.EntityAttributeExpressionVisitor.registerClass("Mscrm.BusinessRules.Views.EntityAttributeExpressionVisitor",Microsoft.Crm.Workflow.SharedExpressionVisitor);Mscrm.BusinessRules.Views.EntityAttributeVisitorResults.registerClass("Mscrm.BusinessRules.Views.EntityAttributeVisitorResults",null,Mscrm.BusinessRules.Views.IEntityAttributeVisitorResults);Mscrm.BusinessRules.Builders.ChromeStateDataBuilder.registerClass("Mscrm.BusinessRules.Builders.ChromeStateDataBuilder",null,Mscrm.InlineEdit.Common.IChromeStateDataBuilder);Mscrm.BusinessRules.Builders.SectionBuilder.registerClass("Mscrm.BusinessRules.Builders.SectionBuilder");Mscrm.BusinessRules.Builders.StepBaseBuilder.registerClass("Mscrm.BusinessRules.Builders.StepBaseBuilder",Mscrm.BusinessRules.Builders.SectionBuilder);Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetAttributeValueStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder.registerClass("Mscrm.BusinessRules.Builders.DefaultExpressionViewBuilder");Mscrm.BusinessRules.Builders.ReadToolBarButtonViewBuilder.registerClass("Mscrm.BusinessRules.Builders.ReadToolBarButtonViewBuilder",null,Mscrm.BusinessRules.Builders.IReadToolBarButtonViewBuilder);Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder.registerClass("Mscrm.BusinessRules.Builders.ReadToolBarViewBuilder",null,Mscrm.BusinessRules.Builders.IReadToolBarViewBuilder);Mscrm.BusinessRules.Builders.ExpressionElementHtmlBuilder.registerClass("Mscrm.BusinessRules.Builders.ExpressionElementHtmlBuilder",null,Mscrm.BusinessRules.Builders.IExpressionElementHtmlBuilder);Mscrm.BusinessRules.Builders.SetDefaultValueStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetDefaultValueStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.SetDisplayModeStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetDisplayModeStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.SetMessageStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetMessageStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.RunScriptStepBuilder.registerClass("Mscrm.BusinessRules.Builders.RunScriptStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.SetRequiredLevelStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetRequiredLevelStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.SetVisibilityStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetVisibilityStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.ConditionBranchStepSectionViewViewBuilder.registerClass("Mscrm.BusinessRules.Builders.ConditionBranchStepSectionViewViewBuilder",null,Mscrm.BusinessRules.Builders.IConditionBranchStepSectionViewViewBuilder);Mscrm.BusinessRules.Builders.SetFormulaStepBuilder.registerClass("Mscrm.BusinessRules.Builders.SetFormulaStepBuilder",Mscrm.BusinessRules.Builders.StepBaseBuilder);Mscrm.BusinessRules.Builders.AggregationSectionBuilder.registerClass("Mscrm.BusinessRules.Builders.AggregationSectionBuilder",Mscrm.BusinessRules.Builders.SectionBuilder);Mscrm.BusinessRules.Builders.TargetEntitySectionBuilder.registerClass("Mscrm.BusinessRules.Builders.TargetEntitySectionBuilder",Mscrm.BusinessRules.Builders.SectionBuilder);Mscrm.BusinessRules.Builders.TargetEntityLinkedSectionBuilder.registerClass("Mscrm.BusinessRules.Builders.TargetEntityLinkedSectionBuilder",Mscrm.BusinessRules.Builders.SectionBuilder);Mscrm.BusinessRules.Commands.ActivateCommand.registerClass("Mscrm.BusinessRules.Commands.ActivateCommand",null,Mscrm.BusinessRules.Commands.IActivateCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.ConvertValueCommand.registerClass("Mscrm.BusinessRules.Commands.ConvertValueCommand",null,Mscrm.BusinessRules.Commands.IConvertValueCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.DeleteCommand.registerClass("Mscrm.BusinessRules.Commands.DeleteCommand",null,Mscrm.BusinessRules.Commands.IDeleteCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.HelpCommand.registerClass("Mscrm.BusinessRules.Commands.HelpCommand",null,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.MoveDownCommand.registerClass("Mscrm.BusinessRules.Commands.MoveDownCommand",null,Mscrm.BusinessRules.Commands.IMoveDownCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.MoveUpCommand.registerClass("Mscrm.BusinessRules.Commands.MoveUpCommand",null,Mscrm.BusinessRules.Commands.IMoveUpCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.SaveAndCloseCommand.registerClass("Mscrm.BusinessRules.Commands.SaveAndCloseCommand",null,Mscrm.BusinessRules.Commands.ISaveAndCloseCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.ValidateCommand.registerClass("Mscrm.BusinessRules.Commands.ValidateCommand",null,Mscrm.BusinessRules.Commands.IValidateCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.SaveAsCommand.registerClass("Mscrm.BusinessRules.Commands.SaveAsCommand",null,Mscrm.BusinessRules.Commands.ISaveAsCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.SaveCommand.registerClass("Mscrm.BusinessRules.Commands.SaveCommand",null,Mscrm.BusinessRules.Commands.ISaveCommand,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.ForwardLinkCommand.registerClass("Mscrm.BusinessRules.Commands.ForwardLinkCommand",null,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable);Mscrm.BusinessRules.Commands.SecurityLearnMoreCommand.registerClass("Mscrm.BusinessRules.Commands.SecurityLearnMoreCommand",Mscrm.BusinessRules.Commands.ForwardLinkCommand);Mscrm.BusinessRules.Commands.GenericXamlLearnMoreCommand.registerClass("Mscrm.BusinessRules.Commands.GenericXamlLearnMoreCommand",Mscrm.BusinessRules.Commands.ForwardLinkCommand);Mscrm.BusinessRules.Commands.ActionFormulaHelpCommand.registerClass("Mscrm.BusinessRules.Commands.ActionFormulaHelpCommand",Mscrm.BusinessRules.Commands.ForwardLinkCommand);Mscrm.BusinessRules.Commands.SaveCommandResult.registerClass("Mscrm.BusinessRules.Commands.SaveCommandResult");Mscrm.BusinessRules.Commands.BusinessRuleValidationResult.registerClass("Mscrm.BusinessRules.Commands.BusinessRuleValidationResult",Mscrm.ValidationResult,Mscrm.IValidationResult);Mscrm.BusinessRules.Commands.StepChromeElementKeyDownCommand.registerClass("Mscrm.BusinessRules.Commands.StepChromeElementKeyDownCommand",null,Mscrm.BusinessRules.Commands.ICommand,Sys.IDisposable,Mscrm.BusinessRules.Commands.IEventAdapter);Mscrm.BusinessRules.Converters.BaseValueConverter.registerClass("Mscrm.BusinessRules.Converters.BaseValueConverter",null,Mscrm.BusinessRules.Converters.IValueConverter);Mscrm.BusinessRules.Factories.BindingsFactory.registerClass("Mscrm.BusinessRules.Factories.BindingsFactory",null,Mscrm.BusinessRules.Factories.IBindingsFactory);Mscrm.BusinessRules.Factories.CommandsFactory.registerClass("Mscrm.BusinessRules.Factories.CommandsFactory",null,Mscrm.BusinessRules.Factories.ICommandsFactory);Mscrm.BusinessRules.Factories.ValueConvertersFactory.registerClass("Mscrm.BusinessRules.Factories.ValueConvertersFactory",null,Mscrm.BusinessRules.Factories.IValueConvertersFactory);Mscrm.BusinessRules.Factories.AttributeFilterFactory.registerClass("Mscrm.BusinessRules.Factories.AttributeFilterFactory");Mscrm.BusinessRules.Mediators.BindingsMediator.registerClass("Mscrm.BusinessRules.Mediators.BindingsMediator",null,Mscrm.BusinessRules.Mediators.IBindingsMediator,Sys.IDisposable);Mscrm.BusinessRules.Mediators.InlineEditControlMediator.registerClass("Mscrm.BusinessRules.Mediators.InlineEditControlMediator",null,Mscrm.BusinessRules.Mediators.IInlineEditControlMediator);Mscrm.BusinessRules.Proxies.BusinessRuleServiceProxy.registerClass("Mscrm.BusinessRules.Proxies.BusinessRuleServiceProxy",null,Mscrm.BusinessRules.Proxies.IBusinessRuleServiceProxy);Mscrm.BusinessRules.Proxies.JavaScriptSerializerProxy.registerClass("Mscrm.BusinessRules.Proxies.JavaScriptSerializerProxy",null,Mscrm.BusinessRules.Proxies.IJavaScriptSerializerProxy);ProcessControl.Configuration.PBLClientProxy.registerClass("ProcessControl.Configuration.PBLClientProxy");Mscrm.MaskPanel.$7S=null;Mscrm.MaskPanel.$6F=String.format("<div class='{0}'></div>","maskPanel");Mscrm.MaskPanel.$9d=String.format("\r\n<div class='{0}'>\r\n\t<div class='{1}'>\r\n\t\t<div></div>\r\n\t</div>\r\n\t<div class='{2}'>\r\n\t\t<div></div>\r\n\t</div>\r\n</div>","resize-sensor","resize-expand","resize-shrink");Mscrm.BusinessRulesGrid.$63=null;Mscrm.BusinessRulesGrid.businessRuleUrlConstant="BRGrid";Mscrm.BusinessRules.BusinessRuleStepChromeStateData.stepValueContentClickedPropertyName="StepValueContentClicked";Mscrm.BusinessRules.BusinessRuleEntityManager._instance=null;Mscrm.BusinessRules.BusinessRuleInitializer.$x=0;Mscrm.BusinessRules.BusinessRuleInitializer.$6I=0;Mscrm.BusinessRules.BusinessRuleInitializer.$32=null;Mscrm.BusinessRules.BusinessRuleInitializer.$T=null;Mscrm.BusinessRules.BusinessRuleInitializer.$5F=false;Mscrm.BusinessRules.BusinessRuleManager.$2L=null;Mscrm.BusinessRules.Constants.$5D=null;Mscrm.BusinessRules.Constants.$2V=null;Mscrm.BusinessRules.Constants.$5A=null;Mscrm.BusinessRules.Constants.sectionHeaderIdPrefixFormat="{0}_{1}";Mscrm.BusinessRules.Constants.stepCollectionIdFormat="{0}_collection";Mscrm.BusinessRules.Constants.sectionIdFormat="{0}_section";Mscrm.BusinessRules.Constants.sectionHeaderIdFormat="{0}_header";Mscrm.BusinessRules.Constants.sectionBodyIdFormat="{0}_body";Mscrm.BusinessRules.Constants.descriptionSectionId="descriptionsection";Mscrm.BusinessRules.Constants.descriptionChromeId="descriptionsection_chrome";Mscrm.BusinessRules.Constants.descriptionFieldInHeader="descriptionfield_header";Mscrm.BusinessRules.Constants.scopeContainerId="scopecontainer";Mscrm.BusinessRules.Constants.expressionIdFormat="{0}_{1}_expression";Mscrm.BusinessRules.Constants.actionIdFormat="{0}_action";Mscrm.BusinessRules.Constants.imageIdFormat="{0}_image";Mscrm.BusinessRules.Constants.stepIdDataAttributeName="data-stepid";Mscrm.BusinessRules.Constants.scopeValueDataAttributeName="data-scopevalue";Mscrm.BusinessRules.Constants.sectionName="section";Mscrm.BusinessRules.Constants.stepSectionName="_section";Mscrm.BusinessRules.Constants.actionSectionName="action";Mscrm.BusinessRules.Constants.conditionSectionName="condition";Mscrm.BusinessRules.Constants.expressionSectionName="expression";Mscrm.BusinessRules.Constants.badData="for(;;);";Mscrm.BusinessRules.Constants.descriptionSectionName="description";Mscrm.BusinessRules.Constants.inlineChromeIdFormat="{0}_chrome";Mscrm.BusinessRules.Constants.conditionDoneImageUrl="/_imgs/businessruleeditor/conditionbutton_ok_default_24.png";Mscrm.BusinessRules.Constants.conditionHoverDoneImageUrl="/_imgs/businessruleeditor/conditionbutton_ok_hover_24.png";Mscrm.BusinessRules.Constants.conditionSelectDoneImageUrl="/_imgs/businessruleeditor/conditionbutton_ok_select_24.png";Mscrm.BusinessRules.Constants.conditionCloseImageUrl="/_imgs/businessruleeditor/conditionbutton_cancel_default_24.png";Mscrm.BusinessRules.Constants.conditionHoverCloseImageUrl="/_imgs/businessruleeditor/conditionbutton_cancel_hover_24.png";Mscrm.BusinessRules.Constants.conditionSelectCloseImageUrl="/_imgs/businessruleeditor/conditionbutton_cancel_select_24.png";Mscrm.BusinessRules.Constants.actionDoneImageUrl="/_imgs/businessruleeditor/actionbutton_ok_default_24.png";Mscrm.BusinessRules.Constants.actionHoverDoneImageUrl="/_imgs/businessruleeditor/actionbutton_ok_hover_24.png";Mscrm.BusinessRules.Constants.actionSelectDoneImageUrl="/_imgs/businessruleeditor/actionbutton_ok_select_24.png";Mscrm.BusinessRules.Constants.actionCloseImageUrl="/_imgs/businessruleeditor/actionbutton_cancel_default_24.png";Mscrm.BusinessRules.Constants.actionHoverCloseImageUrl="/_imgs/businessruleeditor/actionbutton_cancel_hover_24.png";Mscrm.BusinessRules.Constants.actionSelectCloseImageUrl="/_imgs/businessruleeditor/actionbutton_cancel_select_24.png";Mscrm.BusinessRules.Constants.plusImageUrl="/_imgs/businessruleeditor/plussign.png";Mscrm.BusinessRules.Constants.processingUrl="/_imgs/ico/16_progress.gif";Mscrm.BusinessRules.Constants.largeProcessingUrl="/_imgs/wallcontrol/progress.gif";Mscrm.BusinessRules.Constants.hoverPlusImageUrl="/_imgs/businessruleeditor/hoverplussign.png";Mscrm.BusinessRules.Constants.autoCompleteDropDownIcon="/_imgs/processcontrol/dropdown.png";Mscrm.BusinessRules.Constants.deleteIconUrl="/_imgs/businessruleeditor/delete.png";Mscrm.BusinessRules.Constants.hoverDeleteIconUrl="/_imgs/businessruleeditor/hoverdelete.png";Mscrm.BusinessRules.Constants.moveUpIconUrl="/_imgs/businessruleeditor/moveup.png";Mscrm.BusinessRules.Constants.hoverMoveUpIconUrl="/_imgs/businessruleeditor/hovermoveup.png";Mscrm.BusinessRules.Constants.moveDownIconUrl="/_imgs/businessruleeditor/movedown.png";Mscrm.BusinessRules.Constants.hoverMoveDownIconUrl="/_imgs/businessruleeditor/hovermovedown.png";Mscrm.BusinessRules.Constants.headerClickImageDownUrl="/_imgs/businessruleeditor/section_down.png";Mscrm.BusinessRules.Constants.headerClickImageRightUrl="/_imgs/businessruleeditor/section_right.png";Mscrm.BusinessRules.Constants.helpImageUrl="/_imgs/ribbon/help_16.png";Mscrm.BusinessRules.Constants.warningUrl="/_imgs/inlineedit/warning.png";Mscrm.BusinessRules.Constants.alertUrl="/_imgs/inlineedit/alert.png";Mscrm.BusinessRules.Constants.htmlAttributeForHeaderId="data-headerid";Mscrm.BusinessRules.Constants.htmlAttributeForBodyId="data-bodyid";Mscrm.BusinessRules.Constants.htmlAttributeForImageId="data-imageid";Mscrm.BusinessRules.Constants.attributeViewModelIdSuffix="attributeEx";Mscrm.BusinessRules.Constants.primitiveViewModelIdSuffix="primitiveEx";Mscrm.BusinessRules.Constants.expressionViewModelIdSuffix="subExpression";Mscrm.BusinessRules.Constants.rightOperandIdFormat="{0}_{1}";Mscrm.BusinessRules.Constants.relatedEntityLabelFormat="{0} ({1})";Mscrm.BusinessRules.Constants.operandType="{0}_operandType";Mscrm.BusinessRules.Constants.operator="{0}_operator";Mscrm.BusinessRules.Constants.leftInner="{0}_leftInner";Mscrm.BusinessRules.Constants.rightInner="{0}_rightInner";Mscrm.BusinessRules.Constants.leftOperandContainerIdFormat="{0}_lefopcon";Mscrm.BusinessRules.Constants.rightOperandContainerIdFormat="{0}_rigopcon";Mscrm.BusinessRules.Constants.conditionOperatorContainerIdFormat="{0}_conopcon";Mscrm.BusinessRules.Constants.operandTypeContainerIdFormat="{0}_optycon";Mscrm.BusinessRules.Constants.stepContentContainerIdFormat="{0}_stepcontent";Mscrm.BusinessRules.Constants.inlineControlRepositoryUniqueKeyFormat="{0}_{1}_{2}";Mscrm.BusinessRules.Constants.bpfInlineControlRepositoryUniqueKeyFormat="BpfAttributeType_{0}";Mscrm.BusinessRules.Constants.leftOperandReadModeContainerIdFormat="{0}_rm_lefopcon";Mscrm.BusinessRules.Constants.rightOperandReadModeContainerIdFormat="{0}_rm_rigopcon";Mscrm.BusinessRules.Constants.conditionOperatorReadModeContainerIdFormat="{0}_rm_conopcon";Mscrm.BusinessRules.Constants.whereClauseReadModeContainerIdFormat="{0}_rm_whereclausecon";Mscrm.BusinessRules.Constants.bpfStageExpressionReadModeLeftContainerIdFormat="{0}_rm_bpfstageexpleft";Mscrm.BusinessRules.Constants.bpfStageExpressionReadModeOperatorContainerIdFormat="{0}_rm_bpfstageexpoperatorcon";Mscrm.BusinessRules.Constants.bpfStageExpressionReadModeRightContainerIdFormat="{0}_rm_bpfstageexpright";Mscrm.BusinessRules.Constants.expressionPrefixReadModeContainerIdFormat="{0}_rm_expprefix";Mscrm.BusinessRules.Constants.relateAttributeWrapperIdFormat="{0}_{1}wrapper";Mscrm.BusinessRules.Constants.warningViewIdFormat="warningview{0}";Mscrm.BusinessRules.Constants.maxLengthRuleName=100;Mscrm.BusinessRules.Constants.initBusinessRuleAttribute="headerbusinessrulename";Mscrm.BusinessRules.Constants.noneOperator=-1;Mscrm.BusinessRules.Constants.defaultOptionSetValue=-1;Mscrm.BusinessRules.Constants.maxExpressionLimit=10;Mscrm.BusinessRules.Constants.attributeWithIdFormat="{0}_attribute";Mscrm.BusinessRules.Constants.entityWithIdFormat="{0}_entity";Mscrm.BusinessRules.Constants.sourceHierarchyLabelId="sourceHierarchyLabel{0}";Mscrm.BusinessRules.Constants.sourceHierarchyNameId="sourceHierarchyName{0}";Mscrm.BusinessRules.Constants.useSourceHierarchyContainerId="useSourceHierarchyContainer{0}";Mscrm.BusinessRules.Constants.includeActivityRelatedContainerId="IncludeActivityRelatedContainer{0}";Mscrm.BusinessRules.Constants.selectSuffix="_i_select";Mscrm.BusinessRules.Constants.maxTypeValue=2147483647;Mscrm.BusinessRules.Constants.minTypeValue=-2147483648;Mscrm.BusinessRules.Constants.maxDecimalValue=1e13;Mscrm.BusinessRules.Constants.minDecimalValue=-1e13;Mscrm.BusinessRules.Constants.noOptionSelectedIndex=-1;Mscrm.BusinessRules.Constants.textBpfInlineControlRepositoryUniqueKeyFormat="Text_BpfAttributeType_{0}";Mscrm.BusinessRules.Constants.bpfProcessStageId="processstageid";Mscrm.BusinessRules.Constants.bpfProcessStageName="stagename";Mscrm.BusinessRules.Constants.bpfProcessStageMessage="Expecting only one BPF record";Mscrm.BusinessRules.Constants.cascadeOperationsHttpTimeoutInSecondsDefault=3600;Mscrm.BusinessRules.Scopes.entity="2";Mscrm.BusinessRules.Scopes.form="1";Mscrm.BusinessRules.ClientVariable.businessRuleJsonData="_BusinessRuleJsonData";Mscrm.BusinessRules.ClientVariable.businessRuleEditorJsonData="_BusinessRuleEditorJsonData";Mscrm.BusinessRules.CssClassName.action="action";Mscrm.BusinessRules.CssClassName.actionCollection="actioncollection";Mscrm.BusinessRules.CssClassName.actionContent="actioncontent";Mscrm.BusinessRules.CssClassName.actionDropDownItem="actiondropdownitem";Mscrm.BusinessRules.CssClassName.actionDropDownItemContent="actiondropdownitemcontent";Mscrm.BusinessRules.CssClassName.addControlImage="addcontrol";Mscrm.BusinessRules.CssClassName.addConditionPlaceholder="addconditionplaceholder";Mscrm.BusinessRules.CssClassName.blink="blink";Mscrm.BusinessRules.CssClassName.calcField="calcfield";Mscrm.BusinessRules.CssClassName.conditionOperator="conditionoperator";Mscrm.BusinessRules.CssClassName.currentlyProcessing="currentlyprocessing";Mscrm.BusinessRules.CssClassName.descriptionSection="descriptionsection";Mscrm.BusinessRules.CssClassName.descriptionHeader="descriptionheader";Mscrm.BusinessRules.CssClassName.editDiscardImage="editdiscardimage";Mscrm.BusinessRules.CssClassName.editDoneImage="editdoneimage";Mscrm.BusinessRules.CssClassName.editExpressionAndToolBarContainer="editexpressionandtoolbarcontainer";Mscrm.BusinessRules.CssClassName.editExpressionContainer="editexpressioncontainer";Mscrm.BusinessRules.CssClassName.editHotspot="edithotspot";Mscrm.BusinessRules.CssClassName.editorHeaderViewContainer="mscrm-pbleditor-HeaderViewContainer";Mscrm.BusinessRules.CssClassName.editorBodyViewContainer="mscrm-pbleditor-BodyViewContainer";Mscrm.BusinessRules.CssClassName.editSectionHeader="sectionheader";Mscrm.BusinessRules.CssClassName.editSetMessageHeader="setmessageheader";Mscrm.BusinessRules.CssClassName.sectionConditionCalcField="sectioncondition-calcfield";Mscrm.BusinessRules.CssClassName.sectionActionCalcField="sectionaction-calcfield";Mscrm.BusinessRules.CssClassName.editSectionSubHeader="sectionsubheader";Mscrm.BusinessRules.CssClassName.emptyCollection="emptycollection";Mscrm.BusinessRules.CssClassName.sectionConditionRuleEditor="sectioncondition-ruleeditor";Mscrm.BusinessRules.CssClassName.sectionActionRuleEditor="sectionaction-ruleeditor";Mscrm.BusinessRules.CssClassName.sectionConditionRelationship="sectioncondition-relationship";Mscrm.BusinessRules.CssClassName.ruleEditor="ruleeditor";Mscrm.BusinessRules.CssClassName.editFormulaStepContent="formulasteptextarea";Mscrm.BusinessRules.CssClassName.editSectionBody="sectionbody";Mscrm.BusinessRules.CssClassName.editSectionCell="sectioncell";Mscrm.BusinessRules.CssClassName.editRunScriptSectionCell="runscriptsectioncell";Mscrm.BusinessRules.CssClassName.editRunScriptTextAreaWrapper="runscripttextareawrapper";Mscrm.BusinessRules.CssClassName.editSectionCellForRelatedEntity="sectioncellforrelatedentity";Mscrm.BusinessRules.CssClassName.editSectionCellLabel="celllabel";Mscrm.BusinessRules.CssClassName.editSectionCellValue="cellvalue";Mscrm.BusinessRules.CssClassName.editStepAndToolBarContainer="editstepandtoolbarcontainer";Mscrm.BusinessRules.CssClassName.editStepContainer="editstepcontainer";Mscrm.BusinessRules.CssClassName.setFieldValueEditStepContainer="setfieldvalueeditstepcontainer";Mscrm.BusinessRules.CssClassName.setDefaultValueEditStepContainer="setdefaultvalueeditstepcontainer";Mscrm.BusinessRules.CssClassName.editSectionCellSetMessageFieldContainer="sectioncellsetmessagefieldcontainer";Mscrm.BusinessRules.CssClassName.editSectionCellSetMessageFieldContainerForRelatedEntity="sectioncellsetmessagefieldcontainerforrelatedentity";Mscrm.BusinessRules.CssClassName.editSectionCellSetMessageContainer="sectioncellsetmessagecontainer";Mscrm.BusinessRules.CssClassName.editCellValueSetMessageContainer="cellvaluesetmessagecontainer";Mscrm.BusinessRules.CssClassName.editSetMessageContainer="editsetmessagecontainer";Mscrm.BusinessRules.CssClassName.editRunScriptContainer="editrunscriptcontainer";Mscrm.BusinessRules.CssClassName.editSetMessageContainerForRelatedEntity="editsetmessagecontainerforrelatedentity";Mscrm.BusinessRules.CssClassName.expressionContainer="expressioncontainer";Mscrm.BusinessRules.CssClassName.editToolBar="edittoolbar";Mscrm.BusinessRules.CssClassName.editToolBarContainer="edittoolbarcontainer";Mscrm.BusinessRules.CssClassName.expression="expression";Mscrm.BusinessRules.CssClassName.expressionCollection="expressioncollection";Mscrm.BusinessRules.CssClassName.expressionContent="expressioncontent";Mscrm.BusinessRules.CssClassName.formulaReturnType="formulareturntype";Mscrm.BusinessRules.CssClassName.filterSection="filterSection";Mscrm.BusinessRules.CssClassName.hideSection="hidesection";Mscrm.BusinessRules.CssClassName.hotspot="hotspot";Mscrm.BusinessRules.CssClassName.inlineChrome="ms-crm-Inline-Chrome";Mscrm.BusinessRules.CssClassName.inlineValue="ms-crm-Inline-Value";Mscrm.BusinessRules.CssClassName.expressionPrefix="expressionprefix";Mscrm.BusinessRules.CssClassName.operand="operand";Mscrm.BusinessRules.CssClassName.placeholder="placeholder";Mscrm.BusinessRules.CssClassName.processing="processing";Mscrm.BusinessRules.CssClassName.formulaEqualTo="formulaequalto";Mscrm.BusinessRules.CssClassName.formulaTextArea="formulatextarea";Mscrm.BusinessRules.CssClassName.preventAdd="preventadd";Mscrm.BusinessRules.CssClassName.readOnly="readonly";Mscrm.BusinessRules.CssClassName.rightOperand="rightoperand";Mscrm.BusinessRules.CssClassName.ruleTitleContent="ruletitlecontent";Mscrm.BusinessRules.CssClassName.ruleEntityName="ruleentityname";Mscrm.BusinessRules.CssClassName.scopeSelector="scopeselector";Mscrm.BusinessRules.CssClassName.scopeSelectorElement="scopeselectorelement";Mscrm.BusinessRules.CssClassName.scopeSelectorLabel="scopeselectorlabel";Mscrm.BusinessRules.CssClassName.sectionBody="sectionbody";Mscrm.BusinessRules.CssClassName.sectionHeaderContainer="sectionheadercontainer";Mscrm.BusinessRules.CssClassName.sectionHeader="sectionheader";Mscrm.BusinessRules.CssClassName.sectionHeaderImage="sectionheaderimage";Mscrm.BusinessRules.CssClassName.sectionHeaderText="sectionheadertext";Mscrm.BusinessRules.CssClassName.brackets="brackets";Mscrm.BusinessRules.CssClassName.workflowRootStep="workflowRootStep";Mscrm.BusinessRules.CssClassName.warningViewContainer="warningviewcontainer";Mscrm.BusinessRules.CssClassName.warningViewIconContainer="warningviewiconcontainer";Mscrm.BusinessRules.CssClassName.warningViewMessage="warningviewmessage";Mscrm.BusinessRules.CssClassName.moreSections="moreSections";Mscrm.BusinessRules.CssClassName.arrowCollapsedImage="arrowcollapsedimage";Mscrm.BusinessRules.CssClassName.arrowCollapsedImageStyle="arrowcollapsedimagestyle";Mscrm.BusinessRules.CssClassName.menuReadForm="ms-crm-Menu-ReadForm";Mscrm.BusinessRules.CssClassName.menuLabel="ms-crm-Menu-Label";Mscrm.BusinessRules.CssClassName.menuLabelHovered="ms-crm-Menu-Label-Hovered";Mscrm.BusinessRules.CssClassName.plusSignText="plussigntext";Mscrm.BusinessRules.CssClassName.hover="hover";Mscrm.BusinessRules.CssClassName.whereClause="whereclause";Mscrm.BusinessRules.CssClassName.leftOperandContainer="lefopcon";Mscrm.BusinessRules.CssClassName.rightOperandContainer="rigopcon";Mscrm.BusinessRules.CssClassName.conditionOperatorContainer="conopcon";Mscrm.BusinessRules.CssClassName.operandTypeContainer="optycon";Mscrm.BusinessRules.CssClassName.andOrContainer="andorcon";Mscrm.BusinessRules.CssClassName.rightOperandContainerTypeCssFormat="rigopcon_{0}";Mscrm.BusinessRules.CssClassName.expressionCellLabel="expressioncelllabel";Mscrm.BusinessRules.CssClassName.expressionCellBody="expressioncellbody";Mscrm.BusinessRules.CssClassName.andOrCondition="andorcondition";Mscrm.BusinessRules.CssClassName.andOrWrapper="andorwrapper";Mscrm.BusinessRules.CssClassName.firstCondition="firstcondition";Mscrm.BusinessRules.CssClassName.hideControl="hidecontrol";Mscrm.BusinessRules.CssClassName.ruleHelpIconCommandBarClass="commandBarMenu";Mscrm.BusinessRules.CssClassName.ruleHelpIconCommandBarItemClass="commandBarMenuItem";Mscrm.BusinessRules.CssClassName.ruleHelpIconDisplayClass="ruledisplayhelp";Mscrm.BusinessRules.CssClassName.intellisenseLeftColumn="intellisenseleftcolumn";Mscrm.BusinessRules.CssClassName.intellisenseLogicalName="intellisenselogicalname";Mscrm.BusinessRules.CssClassName.intellisenseTypeLabel="intellisensetypelabel";Mscrm.BusinessRules.CssClassName.intellisenseDisplayName="intellisensedisplayname";Mscrm.BusinessRules.CssClassName.messageBarShown="messagebarshown";Mscrm.BusinessRules.CssClassName.error="error";Mscrm.BusinessRules.CssClassName.warning="warning";Mscrm.BusinessRules.CssClassName.messageBar="messagebar";Mscrm.BusinessRules.CssClassName.errorIcon="erroricon";Mscrm.BusinessRules.CssClassName.warningIcon="warningicon";Mscrm.BusinessRules.CssClassName.messageIconContainer="messageiconcontainer";Mscrm.BusinessRules.CssClassName.messageText="messagetext";Mscrm.BusinessRules.CssClassName.learnMore="learnmore";Mscrm.BusinessRules.CssClassName.securityLearnMore="securitylearnmore";Mscrm.BusinessRules.CssClassName.genericXamlLearnMore="genericxamllearnmore";Mscrm.BusinessRules.CssClassName.genericXamlError="genericxamlerror";Mscrm.BusinessRules.CssClassName.editHintState="ms-crm-Inline-EditHintState";Mscrm.BusinessRules.CssClassName.elseButton="elsebutton";Mscrm.BusinessRules.CssClassName.elseHeader="elseheader";Mscrm.BusinessRules.CssClassName.selected="selected";Mscrm.BusinessRules.CssClassName.deleteSelected="deleteselected";Mscrm.BusinessRules.CssClassName.deleteIconAlignMiddle="deleteiconalignmiddle";Mscrm.BusinessRules.CssClassName.attribute="attribute";Mscrm.BusinessRules.CssClassName.entity="entity";Mscrm.BusinessRules.CssClassName.subControl="subcontrol";Mscrm.BusinessRules.CssClassName.rollupEditStepFloat="rollupEditStepFloat";Mscrm.BusinessRules.CssClassName.rollupHierarchyNameContainer="rollupHierarchyNameContainer";Mscrm.BusinessRules.CssClassName.rollupStepLabel="rollupStepLabel";Mscrm.BusinessRules.CssClassName.rollupStepValue="rollupStepValue";Mscrm.BusinessRules.CssClassName.hideDiv="hideDiv";Mscrm.BusinessRules.CssClassName.rollupSourceSection="rollupsourcesection";Mscrm.BusinessRules.CssClassName.rollupRelatedEntity="rolluprelatedentitysection";Mscrm.BusinessRules.CssClassName.rollupAggregateSection="rollupaggregatesection";Mscrm.BusinessRules.CssClassName.rollupRelatedLinkedEntityEditSection="ms-crm-Inline-Edit";Mscrm.BusinessRules.CssClassName.branchingAddCondition="branching";Mscrm.BusinessRules.CssClassName.branchingWarningIcon="branching-warning";Mscrm.BusinessRules.CssClassName.hideBranchingWarningIconInEditMode="hide-branching-warning-EditState";Mscrm.BusinessRules.CssClassName.buttonCursor="button-cursor";Mscrm.BusinessRules.HtmlFormat.binaryExpressionFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate.apply(null,["<span class='{0}' id='{8}'>{1}</span>&nbsp;<span class='{2}' id='{9}'>{3}</span>&nbsp;<span class='{4}' id='{10}'>{5}</span>&nbsp;<span class='{6}' id='{11}'>{7}</span>"].concat(["expressionprefix","{0}","operand","{1}","conditionoperator","{2}","rightoperand","{3}","{4}","{5}","{6}","{7}"]));Mscrm.BusinessRules.HtmlFormat.bpfStageBinaryExpressionFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate.apply(null,["<span class='{0}' id='{16}'>{1}</span>&nbsp;<span class='{2}' id='{17}'>{3}</span>&nbsp;<span class='{4}' id='{18}'>{5}</span>&nbsp;<span class='{6}' id='{19}'>{7}</span>&nbsp;<span class='{8}' id='{20}'>{9}</span>&nbsp;<span class='{10}' id='{21}'>{11}</span>&nbsp;<span class='{12}' id='{22}'>{13}</span>&nbsp;<span class='{14}' id='{23}'>{15}</span>"].concat(["expressionprefix","{0}","operand","{1}","conditionoperator","{2}","rightoperand","{3}","whereclause","{4}","operand","{5}","conditionoperator","{6}","operand","{7}","{8}","{9}","{10}","{11}","{12}","{13}","{14}","{15}"]));Mscrm.BusinessRules.HtmlFormat.unaryExpressionFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate.apply(null,["<span class='{0}' id='{6}'>{1}</span>&nbsp;<span class='{2}' id='{7}'>{3}</span>&nbsp;<span class='{4}' id='{8}'>{5}</span>"].concat(["expressionprefix","{0}","operand","{1}","conditionoperator","{2}","{3}","{4}","{5}"]));Mscrm.BusinessRules.HtmlFormat.elseConditionFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate("<span class='{0}'>{1}</span>","expressionprefix","{0}");Mscrm.BusinessRules.HtmlFormat.inlineControlChromeHtml=Mscrm.BusinessRules.SharedMethods.formatTemplate.apply(null,["<div class='{0}' id='{2}'><div class='{1}'></div></div>"].concat(["ms-crm-Inline-Chrome","ms-crm-Inline-Value","{0}"]));Mscrm.BusinessRules.HtmlFormat.stepStartFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div class='{0}' id='{1}'>","action","{0}");Mscrm.BusinessRules.HtmlFormat.stepInlineHtmlStartFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div tabindex='0' class='{0}' id ='{1}' aria-describedby='{4}'><div class='{2}'><div class='{3}' id='{4}'>","action ms-crm-Inline-Chrome","{0}","action ms-crm-Inline-Value","actioncontent","{1}");Mscrm.BusinessRules.HtmlFormat.stepInlineHtmlEndFormat="</div></div></div>";Mscrm.BusinessRules.HtmlFormat.stepEndFormat="</div>";Mscrm.BusinessRules.HtmlFormat.actionFieldDisplayFormat="<b>{0}</b>";Mscrm.BusinessRules.HtmlFormat.actionMessageDisplayFormat='<b>"{0}"</b>';Mscrm.BusinessRules.HtmlFormat.actionValueDisplayFormat="<b>{0}</b>";Mscrm.BusinessRules.HtmlFormat.divWrapper="<div>{0}</div>";Mscrm.BusinessRules.HtmlFormat.anchorStart="<a href='#'>";Mscrm.BusinessRules.HtmlFormat.anchorEnd="</a>";Mscrm.BusinessRules.HtmlFormat.expressionStartFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div class='{0}' id='{1}'>","expression","{0}");Mscrm.BusinessRules.HtmlFormat.expressionInlineHtmlStartFormat=Mscrm.BusinessRules.SharedMethods.formatTemplate("<div tabindex='0' class='{0}' id ='{1}' aria-labelledby='{4}'><div class='{2}'><div class='{3}'>","expression ms-crm-Inline-Chrome","{0}","expression ms-crm-Inline-Value","expressioncontent","{1}");Mscrm.BusinessRules.HtmlFormat.editActionStepHtmlFormat="<div class='{0}'><div class='{1}'>{2}</div><div class='{3}'><div class='{4}' id='{5}'></div><div class='{6}' id='{7}'></div><div class='{8}' id='{9}'></div></div></div>";Mscrm.BusinessRules.HtmlFormat.editConditionStepHtmlFormat="<div class='{0}'><div class='{1}' id='{2}'></div><div class='{3}'><div class='{4}' id='{5}'></div><div class='{6}' id='{7}'></div><div class='{8}' id='{9}'></div><div class='{10}' id='{11}'></div></div><div id='{12}'></div></div>";Mscrm.BusinessRules.HtmlFormat.expressionInlineHtmlEndFormat="</div></div></div>";Mscrm.BusinessRules.HtmlFormat.expressionEndFormat="</div>";Mscrm.BusinessRules.HtmlFormat.expressionComponentHtmlFormat="<div class='{0}' title='{5}'>{1}</div><div class='{2}' id='{4}'>{3}</div>";Mscrm.BusinessRules.HtmlFormat.andOrIfHtmlFormat="<div class='{0}'><div class='{1}'>{2}</div><div class='{3}'>{4}</div></div>";Mscrm.BusinessRules.HtmlFormat.displayInline="display: inline;";Mscrm.BusinessRules.HtmlFormat.displayNone="display: none;";Mscrm.BusinessRules.HtmlFormat.relatedEntityReadOnlyText="({0}) {1}";Mscrm.BusinessRules.HtmlFormat.relatedAttributeInitializeView="<div id ='{0}' class='{1}'>{2}</div>";Mscrm.BusinessRules.HtmlFormat.imageWrapperFormat="<span class='{0}'><img src='{1}' /></span>";Mscrm.BusinessRules.HtmlElementNames.anchor="A";Mscrm.BusinessRules.HtmlElementNames.input="INPUT";Mscrm.BusinessRules.HtmlElementNames.textArea="TEXTAREA";Mscrm.BusinessRules.HtmlElementNames.table="TABLE";Mscrm.BusinessRules.HtmlElementNames.tableRow="TR";Mscrm.BusinessRules.HtmlElementNames.tableData="TD";Mscrm.BusinessRules.HtmlElementNames.div="DIV";Mscrm.BusinessRules.HtmlElementNames.span="SPAN";Mscrm.BusinessRules.HtmlElementNames.label="LABEL";Mscrm.BusinessRules.HtmlElementNames.listItem="LI";Mscrm.BusinessRules.HtmlElementNames.image="IMG";Mscrm.BusinessRules.HtmlElementNames.unorderedList="UL";Mscrm.BusinessRules.HtmlAttributeNames.cssClass="class";Mscrm.BusinessRules.HtmlAttributeNames.id="id";Mscrm.BusinessRules.HtmlAttributeNames.tabIndex="tabindex";Mscrm.BusinessRules.HtmlAttributeNames.href="href";Mscrm.BusinessRules.HtmlAttributeNames.title="title";Mscrm.BusinessRules.HtmlAttributeNames.style="style";Mscrm.BusinessRules.HtmlAttributeNames.src="src";Mscrm.BusinessRules.HtmlAttributeNames.colSpan="colspan";Mscrm.BusinessRules.HtmlAttributeNames.ariaDescribedBy="aria-describedby";Mscrm.BusinessRules.HtmlAttributeNames.altText="alt";Mscrm.BusinessRules.HtmlAttributeNames.onClick="onclick";Mscrm.BusinessRules.HtmlAttributeNames.target="target";Mscrm.BusinessRules.HtmlAttributeNames.role="role";Mscrm.BusinessRules.BpfAttributeType.bpfProcess="ProcessId";Mscrm.BusinessRules.BpfAttributeType.bpfStage="Stage";Mscrm.BusinessRules.BpfAttributeType.bpfStageCategory="StageCategory";Mscrm.BusinessRules.BpfAttributeName.processId="BpfProcess";Mscrm.BusinessRules.BpfAttributeName.activeStage="ActiveStage";Mscrm.BusinessRules.BpfAttributeName.selectedStage="SelectedStage";Mscrm.BusinessRules.BpfAttributeName.selectedStageCategory="SelectedStageCategory";Mscrm.BusinessRules.BpfAttributeName.activeStageCategory="ActiveStageCategory";Mscrm.BusinessRules.FieldType.entityAttribute=0;Mscrm.BusinessRules.FieldType.bpfAttribute=1;Mscrm.BusinessRules.ImageUri.warningIconPath="/_imgs/inlineedit/warning.png";Mscrm.BusinessRules.PBLEditorIds.addActionButton="AddActionButton";Mscrm.BusinessRules.PBLEditorIds.addActionText="AddActionText";Mscrm.BusinessRules.PBLEditorIds.addActionButtonMenu="AddActionButton_Menu";Mscrm.BusinessRules.PBLEditorIds.addConditionButton="AddConditionButton";Mscrm.BusinessRules.PBLEditorIds.addConditionText="AddConditionText";Mscrm.BusinessRules.PBLEditorIds.addConditionPlaceholder="AddConditionPlaceholder";Mscrm.BusinessRules.PBLEditorIds.addExpressionButton="AddExpressionButton";Mscrm.BusinessRules.PBLEditorIds.addExpressionText="AddExpressionText";Mscrm.BusinessRules.PBLEditorIds.businessRuleName="BusinessRuleName";Mscrm.BusinessRules.PBLEditorIds.ruleEntityName="RuleEntityName";Mscrm.BusinessRules.PBLEditorIds.entityDisplayName="ProcessEntityName";Mscrm.BusinessRules.PBLEditorIds.saveButton="saveButton";Mscrm.BusinessRules.PBLEditorIds.validateButtonOn="validateButtonOn";Mscrm.BusinessRules.PBLEditorIds.validateButtonOff="validateButtonOff";Mscrm.BusinessRules.PBLEditorIds.scopeLabel="scopeLabel";Mscrm.BusinessRules.PBLEditorIds.scopeSelector="ScopeSelector";Mscrm.BusinessRules.PBLEditorIds.saveAsButton="saveAsButton";Mscrm.BusinessRules.PBLEditorIds.saveAndCloseButton="saveAndCloseButton";Mscrm.BusinessRules.PBLEditorIds.activateButton="activateButton";Mscrm.BusinessRules.PBLEditorIds.submitFormId="crmFormSubmitId";Mscrm.BusinessRules.PBLEditorIds.footerActivatedState="footerActivatedState";Mscrm.BusinessRules.PBLEditorIds.footerReadOnlyState="footerReadOnlyState";Mscrm.BusinessRules.PBLEditorIds.helpButton="helpButton";Mscrm.BusinessRules.PBLEditorIds.formulaEditorHelpButton="formulaEditorHelpButton";Mscrm.BusinessRules.PBLEditorIds.stepFormulaContainer="stepFormulaContainer";Mscrm.BusinessRules.RollupEditorIds.source="Source";Mscrm.BusinessRules.RollupEditorIds.related="Related";Mscrm.BusinessRules.RollupEditorIds.relatedLinked="RelatedLinked";Mscrm.BusinessRules.RollupEditorIds.aggregation="Aggregation";Mscrm.BusinessRules.RollupEditorIds.sourceFilter="SourceFilter";Mscrm.BusinessRules.RollupEditorIds.relatedFilter="RelatedFilter";Mscrm.BusinessRules.RollupEditorIds.relatedLinkedFilter="RelatedLinkedFilter";Mscrm.BusinessRules.RollupEditorIds.sourceEntity="SourceEntity";Mscrm.BusinessRules.RollupEditorIds.useSourceHierarchy="UseSourceHierarchy";Mscrm.BusinessRules.RollupEditorIds.useRelatedLinkedEntity="UseRelatedLinkedEntity";Mscrm.BusinessRules.RollupEditorIds.relatedRelationship="RelatedRelationship";Mscrm.BusinessRules.RollupEditorIds.relatedLinkedRelationship="RelatedLinkedRelationship";Mscrm.BusinessRules.RollupEditorIds.aggregationStep="AggregationStep";Mscrm.BusinessRules.RollupEditorIds.addRelatedEntityButton="AddRelatedEntityButton";Mscrm.BusinessRules.RollupEditorIds.addRelatedLinkedEntityButton="AddRelatedLinkedEntityButton";Mscrm.BusinessRules.RollupEditorIds.addRelatedEntity="AddRelatedEntity";Mscrm.BusinessRules.RollupEditorIds.addRelatedLinkedEntity="AddRelatedLinkedEntity";Mscrm.BusinessRules.RollupEditorIds.addAggregationButton="AddAggregationButton";Mscrm.BusinessRules.RollupEditorIds.addAggregation="AddAggregation";Mscrm.BusinessRules.RollupEditorIds.relatedRelationshipContainer="RelatedRelationshipContainer";Mscrm.BusinessRules.RollupEditorIds.relatedLinkedRelationshipContainer="RelatedLinkedRelationshipContainer";Mscrm.BusinessRules.RollupEditorIds.aggregationStepContainer="AggregationStepContainer";Mscrm.BusinessRules.ActionMenuCommands.showMessage="ShowMessage";Mscrm.BusinessRules.ActionMenuCommands.setField="SetField";Mscrm.BusinessRules.ActionMenuCommands.setBusiness="SetBusiness";Mscrm.BusinessRules.ActionMenuCommands.setVisibility="SetVisibility";Mscrm.BusinessRules.ActionMenuCommands.setReadWrite="SetReadWrite";Mscrm.BusinessRules.ActionMenuCommands.setDefaultValue="SetDefaultValue";Mscrm.BusinessRules.ActionMenuCommands.runScript="RunScript";Mscrm.BusinessRules.Bindings.KeyDownBinding.tabKeyCode=9;Mscrm.BusinessRules.Bindings.KeyDownBinding.enterKeyCode=13;Mscrm.BusinessRules.Bindings.KeyDownBinding.eventName="keydown";Mscrm.BusinessRules.ViewModels.BranchingConditionsViewModel.entityChangedPropertyValue="EntityChangedProperty";Mscrm.BusinessRules.ViewModels.SetFormulaStepSectionViewModel.formulaExpressionProperty="formulaExpressionProperty";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.selectedIndexPropertyValueAggregateField="SelectedIndexAggregateField";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.selectedIndexPropertyValueAggregateFunction="SelectedIndexAggregateFunction";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.aggregatedAttributeListPropertyValue="AggregatedAttributeListProperty";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.targetEntityLoadCommenced="TargetEntityLoadCommenced";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.targetEntityLoadCompleted="TargetEntityLoadCompleted";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.aggregateFunctionChangedProperty="AggregateFunctionChanged";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel.fieldOptionLabelFormat="({0}) {1}";Mscrm.BusinessRules.ViewModels.AggregationStepSectionViewModel._supportedFunctionOptions=null;Mscrm.BusinessRules.ViewModels.RollupRuleStepSectionViewModel.rollupRuleExpressionProperty="rollupRuleExpressionProperty";Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel.useSourceHierarchyPropertyValue="UseSourceHierarchyProperty";Mscrm.BusinessRules.ViewModels.UseSourceHierarchyStepSectionViewModel.sourceHierarchyNamePropertyName="SourceHierarchyNameProperty";Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel.defaultIndex=-1;Mscrm.BusinessRules.ViewModels.TargetEntitySectionViewModel.selectedIndexPropertyValue="SelectedIndexTargetEntity";Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel.defaultIndex=-1;Mscrm.BusinessRules.ViewModels.TargetLinkedEntitySectionViewModel.selectedIndexPropertyValue="SelectedIndexTargetLinkedEntity";Mscrm.BusinessRules.ViewModels.ExpressionTypeMappingCache.$2L=null;Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.valueMetadataChangedProperty="ValueMetadataChanged";Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.valueChangedProperty="ValueChanged";Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.hideControlProperty="HideControl";Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.showControlProperty="ShowControl";Mscrm.BusinessRules.ViewModels.ValueOperandEditViewModel.clearValidationProperty="ClearValidation";Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.attributeSelectedValue="AttributeSelectedValue";Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.filteredAttributesValue="FilteredAttributesValue";Mscrm.BusinessRules.ViewModels.AttributeOperandEditViewModel.editViewModelDiscardedValue="EditViewModelDiscardedValue";Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.valueMetadataChangedProperty="ValueMetadataChanged";Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.valueChangedProperty="ValueChanged";Mscrm.BusinessRules.ViewModels.NullOperandEditViewModel.clearValidationProperty="ClearValidation";Mscrm.BusinessRules.ViewModels.BpfAttributeOperandEditViewModel.attributeListChanged="AttributesListValue";Mscrm.BusinessRules.ViewModels.ExpressionViewModel.leftOperandPropertyValue="LeftOperandProperty";Mscrm.BusinessRules.ViewModels.ExpressionViewModel.rightOperandPropertyValue="RightOperandProperty";Mscrm.BusinessRules.ViewModels.ExpressionViewModel.operatorPropertyValue="OperatorProperty";Mscrm.BusinessRules.ViewModels.ExpressionViewModel.operatorTypePropertyValue="OperandTypeProperty";Mscrm.BusinessRules.ViewModels.ConditionExpressionViewModel.showWarningPropertyValue="ShowWarningProperty";Mscrm.BusinessRules.ViewModels.LeftOperandEditViewModel.operandChangedPropertyValue="OperandChangedProperty";Mscrm.BusinessRules.ViewModels.OperandType.none=-1;Mscrm.BusinessRules.ViewModels.OperandType.field=0;Mscrm.BusinessRules.ViewModels.OperandType.value=1;Mscrm.BusinessRules.ViewModels.OperandType.expression=2;Mscrm.BusinessRules.ViewModels.OperandType.nullable=3;Mscrm.BusinessRules.ViewModels.OperandType.valueWithStage=4;Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel.operandTypeValueProperty="OperandTypeValue";Mscrm.BusinessRules.ViewModels.OperandTypeEditViewModel.filteredOperandTypeListProperty="FilteredOperandTypeList";Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase.filteredOperatorListPropertyValue="FilteredOperatorListProperty";Mscrm.BusinessRules.ViewModels.OperatorEditViewModelBase.operatorPropertyValue="OperatorProperty";Mscrm.BusinessRules.ViewModels.ConditionOperatorViewModel.$33=null;Mscrm.BusinessRules.ViewModels.ArithmeticOperatorViewModel.$33=null;Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.operandChangedProperty="OperandChangedPropertyValue";Mscrm.BusinessRules.ViewModels.RightOperandEditViewModel.valueChangedProperty="ValueChanged";Mscrm.BusinessRules.ViewModels.AndOrEditViewModel.andOrOperatorConfirmProperty="AndOrOperatorConfirm";Mscrm.BusinessRules.ViewModels.AndOrEditViewModel.andOrOperatorDiscardProperty="AndOrOperatorDiscard";Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.attributeListChanged="AttributesListValue";Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.attributeSelectedValue="AttributeSelectedValue";Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.filteredAttributesValue="FilteredAttributesValue";Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.entityAttributeSelectedValue="EntityAttributeSelectedValue";Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.filteredEntityAttributeValue="FilteredEntityAttributeValue";Mscrm.BusinessRules.ViewModels.RelatedAttributeOperandEditViewModel.editViewModelDiscardedValue="EditViewModelDiscardedValue";Mscrm.BusinessRules.ViewModels.ConditionsViewModel.disableAddConditionPropertyName="DisableAddConditionProperty";Mscrm.BusinessRules.ViewModels.ConditionsViewModel.childExpressionChangedPropertyName="ChildExpressionChanged";Mscrm.BusinessRules.ViewModels.ExpressionUniqueIdGenerator.$2L=null;Mscrm.BusinessRules.ViewModels.DescriptionSectionViewModel.descriptionValueProperty="descriptionproperty";Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel.controlIdPropertyValue="ControlIdProperty";Mscrm.BusinessRules.ViewModels.SetDisplayModeStepSectionViewModel.isReadOnlyPropertyValue="IsReadOnlyProperty";Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel.controlIdPropertyValue="ControlIdProperty";Mscrm.BusinessRules.ViewModels.SetRequiredLevelStepSectionViewModel.requiredLevelPropertyValue="RequiredLevel";Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel.controlIdPropertyValue="ControlIdProperty";Mscrm.BusinessRules.ViewModels.SetVisibilityStepSectionViewModel.isVisiblePropertyValue="IsVisibleProperty";Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel.controlIdPropertyValue="ControlIdProperty";Mscrm.BusinessRules.ViewModels.SetMessageStepSectionViewModel.messagePropertyValue="MessageProperty";Mscrm.BusinessRules.ViewModels.RunScriptStepSectionViewModel.javascriptPropertyValue="JavascriptProperty";Mscrm.BusinessRules.ViewModels.ReadToolBarButtonViewModel.selectedPropertyName="Selected";Mscrm.BusinessRules.ViewModels.ReadToolBarViewModel.selectedButtonViewModelPropertyName="SelectedButtonViewModel";Mscrm.BusinessRules.ViewModels.ManyToOneRelationshipViewModel.currentEntityKey="#CurrentEntity";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.unselectedFieldIndex="-1";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.entityPropertyValue="EntityProperty";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.fieldChangedPropertyValue="FieldChangedProperty";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.bpfFieldChangedPropertyValue="BpfFieldChangedPropertyValue";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.attributeListPropertyValue="AttributeListProperty";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.filteredAttributeListPropertyValue="FilteredAttributeListProperty";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.entityLoadCommenced="EntityLoadCommenced";Mscrm.BusinessRules.ViewModels.BpfFieldControlViewModel.entityLoadCompleted="EntityLoadCompleted";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.unselectedFieldIndex="-1";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.entityPropertyValue="EntityProperty";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.fieldChangedPropertyValue="FieldChangedProperty";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.attributeListPropertyValue="AttributeListProperty";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.filteredAttributeListPropertyValue="FilteredAttributeListProperty";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.entityLoadCommenced="EntityLoadCommenced";Mscrm.BusinessRules.ViewModels.FieldControlViewModel.entityLoadCompleted="EntityLoadCompleted";Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.fieldChangedPropertyValue="FieldChangedProperty";Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.unselectedFieldIndex="-1";Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.primaryEntitySelectedIndex="0";Mscrm.BusinessRules.ViewModels.EntityLookupFieldControlViewModel.labelFormat="{0} ({1})";Mscrm.BusinessRules.Views.InlineSetFormulaStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineAggregateStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineUseSourceHierarchyStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineTargetEntityStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineTargetLinkedEntityStepEditView.$16=0;Mscrm.BusinessRules.Views.TextValueInlineControl.inputElementClass="ms-crm-InlineInput";Mscrm.BusinessRules.Views.InlineSetDisplayModeStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineSetRequiredLevelStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineSetVisibilityStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineSetMessageStepEditView.$16=0;Mscrm.BusinessRules.Views.InlineRunScriptStepEditView.$16=0;Mscrm.BusinessRules.Views.ConditionReadToolBarView.$2V=null;Mscrm.BusinessRules.Views.ViewHelper.$6g=null;Mscrm.BusinessRules.Views.ViewHelper._editorDataWrapper=null;Mscrm.BusinessRules.Builders.ReadToolBarButtonViewBuilder.buttonHtmlFormat='<a role="menuitem" class="ms-crm-Button" aria-label="{0}" title="{0}"></a>';Mscrm.BusinessRules.Commands.SaveCommand.$7b=null;Mscrm.BusinessRules.Commands.SaveCommand.$2G=null;Mscrm.BusinessRules.Factories.AttributeFilterFactory.$6z=null;ProcessControl.Configuration.PBLClientProxy.$7v=null