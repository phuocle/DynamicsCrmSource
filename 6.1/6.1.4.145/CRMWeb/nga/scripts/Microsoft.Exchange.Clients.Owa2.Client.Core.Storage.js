Type.registerNamespace("$e");function PersistedDataRecord(a,b){this.Data=a;this.Metadata=b}PersistedDataRecord.prototype={Data:null,Metadata:null};$e.$3h=function(b,a){$a.$B.$2Z(b,"name");$a.$B.$1I(a,"fields");$a.$B.$dY(a.length,1,2,"fields must be a 1 or 2 length array");this.$F=b;this.$2o=a};$e.$3h.prototype={$F:null,$2o:null};function ItemMetadata(){}function SettingRecord(){}SettingRecord.prototype={Id:null,Value:null};$e.$75=function(){};$e.$75.$B=function(b){var c=$a.UserAgent.getInstance().get_$8X()||$a.UserAgent.getInstance().$21,a=null;if(b.get_$2F4())a=$e.$75.$1iO(a);else if(b.get_$1L5()&&(!c||c&&!b.get_$1a2()))a=new $e.$Eu(b.get_$1L5());else if(b.get_$1a2())a=$e.$75.$1gw(a);return a};$e.$75.$1gw=function(a){var b=window.self;a=new $e.$D9(b);return a};$e.$75.$1iO=function(a){var b=$a.NativeBridge.get_$4().$C8,c=window.self,d=new $e.$Go(b,c);a=new $e.$D9(d);return a};$e.$I6=function(){};$e.$I6.registerInterface("$e.$I6");$e.$I3=function(){};$e.$I3.registerInterface("$e.$I3");$e.$I2=function(){};$e.$I2.registerInterface("$e.$I2");$e.$5H=function(a,b){this.$$d_$1rV=Function.createDelegate(this,this.$1rV);this.$$d_$1rW=Function.createDelegate(this,this.$1rW);$e.$5H.initializeBase(this,[null]);$a.$B.$1I(a,"idbCursorRequest");this.$Qz=null;this.$AR=a;this.$15m=b;this.$AR.onsuccess=this.$$d_$1rW;this.$AR.onerror=this.$$d_$1rV};$e.$5H.prototype={$AR:null,$15m:null,$Qz:null,get_$1LX:function(){var a=null;if(this.$AR.result)a=this.$AR.result.value;return a},get_$1tI:function(){var a=null;if(this.$AR.result)a=this.$AR.result.primaryKey;return a},get_$1tH:function(){return""},$fF:function(b,c){var a=!this.$15m?this.$AR.source.count():this.$AR.source.count(this.$15m),d=this;a.onsuccess=function(a){b(a.target.result)};var e=this;a.onerror=function(a){$e.$1f.$Bu(a.target.errorCode,c)}},$9k:function(){if(!$a.$0.$0(this.$AR)){this.$AR.onsuccess=null;this.$AR.onerror=null;this.$AR=null}},$1Le:function(a,b,c){this.$Qz=new $e.$5H.$1Sy(b,c);this.$AR.result.advance(a)},$10i:function(a,b){this.$Qz=new $e.$5H.$1Sy(a,b);$a.$8l.$HJ(this.$AR.result)},$1M:function(a){a()},$1rW:function(){var a=this.$Qz;this.$Qz=null;a.get_$2Ez()()},$1rV:function(b){var a=this.$Qz;this.$Qz=null;a.get_$1lE()(b.target.errorCode)}};$e.$5H.$1Sy=function(a,b){this.$76=a;this.$9d=b};$e.$5H.$1Sy.prototype={$76:null,$9d:null,get_$2Ez:function(){return this.$76},get_$1lE:function(){return this.$9d}};$e.$7w=function(a,b,c,d){this.$4Y=a;this.$Qu=b;this.$2g=c;this.$ET=d};$e.$7w.$1Zc=function(b){$a.$B.$1I(b,"id");var a=b.$A8();$a.$B.$1I(a,"id must be provided");$a.$B.$2Z(a.toString(),"id must be provided");return a};$e.$7w.prototype={$4Y:null,$Qu:null,$2g:null,$ET:null,get_$1T:function(){return this.$2g.get_$1T()},$Gv:function(e,c,f){var a=$e.$7w.$1Zc(e);$a.$B.$1I(c,"successCallback");var b=this.$Qu.get(a),d=this;b.onerror=function(b){$a.Trace.logError(60,"Error getting object from store:{0} with id:{1}. Error:{2}",d.get_$1T(),a,b.target.errorCode);$e.$1f.$Bu(b.target.errorCode,f)};var g=this;b.onsuccess=function(d){var a=null,b=d.target.result;if(b)a=b.data;c(a)}},$FC:function(a,e,f){this.$ET.$1Qf(this,a);this.$4Y.get_$1QO()(this.get_$1T(),2,a,null);var d=$e.$7w.$1Zc(a),b=$a.$Bp.$5P(this.$Qu,d),c=this;b.onerror=function(b){$a.Trace.logError(60,"Error deleting from object store:{0} the id:{1}. ErrorCode:{2}",c.get_$1T(),a.$A8(),b.target.errorCode);$e.$1f.$Bu(b.target.errorCode,f)};var g=this;b.onsuccess=function(){$e.$1f.$NM(e)}},$3B:function(c,d){this.$ET.$1Qe(this);var a=this.$Qu.clear(),b=this;a.onerror=function(a){$a.Trace.logError(60,"Error clearing from object store:{0}. ErrorCode:{1}",b.get_$1T(),a.target.errorCode);$e.$1f.$Bu(a.target.errorCode,d)};var e=this;a.onsuccess=function(){$e.$1f.$NM(c)}},$1Td:function(a,b,g,h){$a.$B.$1I(b,"json");this.$ET.$1Qg(this,a,b);this.$4Y.get_$1QO()(this.get_$1T(),1,a,b);for(var c=new $e.$F0(b,{}),d=0;d<this.$2g.get_$10P().length;++d)this.$2g.get_$10P()[d].$1ca(c,a,this.get_$1T());var e=a.$A8(),f=$a.$0.$47(e)?this.$Qu.put(c):this.$Qu.put(c,e),i=this;f.onerror=function(a){$e.$1f.$Bu(a.target.errorCode,h)};var j=this;f.onsuccess=function(a){g&&g(new $a.$4L(a.target.result))}},$22f:function(a,b,d){$a.$B.$1I(b,"successCallback");a&&this.$1eu(a);var c=this;$e.$n.$B(this.$4Y.get_$1sJ(),this.$Qu,this.$2g,a,function(a){b(new $e.$Ez(c.$4Y,a))},d)},$1eu:function(a){this.$1ev(a);this.$1ew(a)},$1ew:function(b){if(b.$4U)for(var a=0;a<b.$4U.length;++a)if(!this.$2g.$a3(b.$4U[a].$4H.$q)){var c=String.format("KeyPath {0} is being sorted but it is not an indexed field",b.$4U[a].$4H.$q);$a.$34.$G8(1,c)}},$1ev:function(c){if(c.$1d)for(var b=c.$1d.$RW,a=0;a<b.length;++a)if(!this.$2g.$a3(b[a].$q)){var d=String.format("KeyPath {0} is being queried but it is not an indexed field",b[a].$q);$a.$34.$G8(1,d)}}};$e.$Ev=function(a,b,c,d,e){this.$10N=a;this.$ET=new $a.$9I(this,d);this.$2g=b;this.$WC=true;this.$lF=e;this.$Jk=new $a.$CY(c)};$e.$Ev.prototype={$10N:null,$2g:null,$ET:null,$Jk:null,$lF:false,$WC:false,$1A5:false,get_$1MX:function(){return this.$lF},get_$1sJ:function(){return this.$10N},get_$1QO:function(){return this.$Jk.$$d_$29J},$pC:function(){this.$WC&&this.$Jk.$pC()},$Mt:function(a){a=a.toLowerCase();if(!this.$2g.$18G(a))throw Error.invalidOperation("storeName "+a+" does not exist.");var b=this.$10N.objectStore(a),c=this.$WC?this.$ET:new $a.$9I(this,new $a.$8L);return new $e.$7w(this,b,this.$2g.$It(a),c)}};$e.$Ew=function(a,b){$e.$Ew.initializeBase(this,[a,b,new $a.$1q("metadata."+a)])};$e.$Ew.prototype={$1ca:function(a,b,c){$e.$5d.$19Y(this.$C7[0],a,b,c);$e.$5d.$19Y(this.$C7[1],a,b,c);var d=this.$C7[0].$M1(a.data),e=this.$C7[1].$M1(a.data);a.metadata[this.$aE]=$e.$2y.$B(d,e)}};$e.$2y=function(){};$e.$2y.$B=function(c,d){var a=$e.$2y.$1EU(c),b=$e.$2y.$1EU(d);return a+"\1"+b};$e.$2y.$1EU=function(a){return String.isInstanceOfType(a)?"S"+$e.$2y.$2Bg(a):Number.isInstanceOfType(a)?"N"+$e.$2y.$1i3(a):null};$e.$2y.$2Bg=function(a){if(a.indexOf("\1")>=0){$a.Trace.logWarning(60,"A composite key is being constructed with the composite key meta-character and will be stripped of the character.  Consequently, sorts and filters, will ignore that character in any comparisons. {0}",a);return a.replace("\1","")}else return a};$e.$2y.$1i3=function(a){if(a>0xfffffffffffff)a=0xfffffffffffff;if(a<$e.$2y.$181)a=$e.$2y.$181;if(a>=0){var c=a.toString(16),e=13-c.length,b=new Sys.StringBuilder;b.append("P");for(var d=0;d<e;++d)b.append("0");b.append(c);return b.toString()}else{var f=0xfffffffffffff+a+1,g=f.toString(16);return"N"+g}};$e.$8m=function(a,b){$e.$8m.initializeBase(this,[b]);this.$1d=a};$e.$8m.prototype={$1d:null,get_$1LX:function(){return this.$5X.get_$On()},get_$1tI:function(){return this.$5X.get_$LR()},get_$1tH:function(){return this.$5X.get_$wQ()},$fF:function(a,b){$a.Trace.logWarning(60,"Asking for ApproximateCount on a filtered strategy will not provide an accurate count!");$e.$n.prototype.$fF.call(this,a,b)},$10i:function(b,c){var a=this,d=this;this.$5X.$HJ(function(){if(a.$5X.$Ai===2)b();else if(!a.$1d.$1MZ(a.$5X.get_$LR(),a.$5X.get_$On().data))a.$10i(b,c);else b()},function(a){c(a)})}};$e.$5d=function(c,b,d){this.$aE=c;this.$C7=new Array(0);this.$1NF=d;for(var a=0;a<b.length;++a)Array.add(this.$C7,new $a.$1q(b[a]))};$e.$5d.$B=function(a){if(a.keyPaths.length===1)return new $e.$F3(a.indexName,a.keyPaths);else if(a.keyPaths.length===2)return new $e.$Ew(a.indexName,a.keyPaths);else throw Error.argument("fields","composite keys can only have two columns");};$e.$5d.$19Y=function(b,g,d,e){var a=b.$M1(g.data);if($a.$0.$0(a)){var c=String.format("KeyPath {0} is a declared index on store {1} but does not exist in object with id {2}",b.$q,e,d.$A8());$a.Trace.logError(60,c);throw Error.invalidOperation(c);}if(!String.isInstanceOfType(a)&&!Number.isInstanceOfType(a)){var f=String.format("KeyPath {0} is a declared index on store {1} but the object with id {2} is attempting to store the non-primitive type {3}.",b.$q,e,d.$A8(),Object.getType(a).getName());throw Error.invalidOperation(f);}};$e.$5d.prototype={$aE:null,$C7:null,$1NF:null};$e.$Bo=function(){this.$4i={}};$e.$Bo.prototype={$4i:null,get_$HM:function(){var c=[],a=this.$4i;for(var b in a){var d={key:b,value:a[b]};Array.add(c,d.key)}return c},$It:function(a){return this.$4i[a]},$h:function(a,b){this.$4i[a]=new $e.$Bo.$1GI(a,b)},$18G:function(a){return a in this.$4i},$8x:function(){var a=new $e.$Bo;a.$4i={};var b=this.$4i;for(var c in b){var d={key:c,value:b[c]},e=d.value;a.$4i[d.key]=e.$8x()}return a},$SO:function(b,c){var a=this.$4i[b];a.$SO(c)},$1L6:function(b,c){var a=this.$4i[b];return a.$1L6(c)}};$e.$Bo.$1GI=function(a,b){this.$F=a;this.$3z=b;this.$10R={};this.$17y={};this.$va={};this.$Xs=[];this.$10Q=[]};$e.$Bo.$1GI.prototype={$3z:null,$F:null,$10R:null,$17y:null,$va:null,$Xs:null,$10Q:null,get_$1T:function(){return this.$F},get_$10P:function(){return this.$10Q},$SO:function(a){this.$10R[a.$aE]=a;for(var b=0;b<a.$C7.length;++b)Array.indexOf(this.$Xs,a.$C7[b].$q)<0&&Array.add(this.$Xs,a.$C7[b].$q);if(a.$C7.length===1)this.$17y[a.$C7[0].$q]=a;else this.$va[a.$C7[0].$q+a.$C7[1].$q]=a;Array.add(this.$10Q,a)},$1L6:function(a){return a in this.$10R},$a3:function(b){if(b===$a.$1q.$g.$q)return true;else{for(var a=0;a<this.$Xs.length;++a)if(this.$Xs[a]===b)return true;return false}},$UG:function(c,d){var a=null;if(d.$q===$a.$1q.$g.$q)a=c;else{var b=this.$17y[d.$q];if(b)a=c.index(b.$aE)}return a},$jD:function(d,b,e){var a=null;if(b===e)a=this.$UG(d,b);else{var c=this.$va[b.$q+e.$q];if(c)a=d.index(c.$aE)}return a},$8x:function(){for(var c=new $e.$Bo.$1GI(this.$F,this.$3z),b=this.get_$10P(),d=b.length,a=0;a<d;++a){var e=b[a];c.$SO(e)}return c}};$e.$Ey=function(a,b){$e.$Ey.initializeBase(this,[b]);this.$jm=a};$e.$Ey.prototype={$jm:null,get_$1LX:function(){return this.$5X.get_$On()},get_$1tI:function(){return this.$5X.get_$LR()},get_$1tH:function(){for(var b="",a=0;a<this.$jm.length;++a){var c=this.$jm[a].$q===$a.$1q.$g.$q?this.$5X.get_$LR():this.$jm[a].$M1(this.$5X.get_$On().data);if(!$a.$0.$0(c))b+=c.toString()}return b},$10i:function(a,b){this.$5X.$HJ(a,b)}};$e.$Ez=function(a,b){this.$4Y=a;this.$KZ=b;this.$Vi=0};$e.$Ez.prototype={$4Y:null,$KZ:null,$Vi:0,$fF:function(a,b){this.$KZ.$fF(a,b)},$HJ:function(b,a,c){$a.$B.$1I(a,"successCallback");if(this.$KZ.$Ai===2)a(this.$4Y,[]);else this.$1Ar(b,[],a,c)},$1Ar:function(c,b,d,e){var a=this,f=this;this.$KZ.$HJ(function(){a.$Vi++;if(a.$KZ.$Ai===2)d(a.$4Y,b);else{var f=a.$KZ.get_$On(),g=a.$KZ.get_$LR(),h=new $a.$8E(new $a.$4L(g),f.data);Array.add(b,h);c--;if(c>0)a.$1Ar(c,b,d,e);else d(a.$4Y,b)}},function(a){$e.$1f.$Bu(a,e);f.$N()})},$N:function(){!$a.$0.$0(this.$KZ)&&this.$KZ.$N()}};$e.$n=function(a){this.dispose=this.$N;this.$5X=a;this.$Ai=0};$e.$n.$B=function(e,c,d,a,b,f){$a.$B.$1I(c,"object store");$a.$B.$1I(b,"success");b=$e.$n.$1cx(e,b,f);if($e.$n.$1uJ(a))$e.$n.$1EK(c,b);else if($e.$n.$1tw(a))$e.$n.$1hO(c,d,a,b);else if($e.$n.$1uB(a))$e.$n.$1i8(c,d,a,b);else $e.$n.$1uP(a)&&$e.$n.$1if(c,d,a,b)};$e.$n.$1hO=function(a,d,b,c){switch($e.$n.$zN(b)){case 0:$e.$n.$1EK(a,c);break;case 1:$e.$n.$1hP(a,d,b,c);break;case 2:$e.$n.$1hN(a,d,b,c)}};$e.$n.$1i8=function(b,c,a,d){switch($e.$n.$zN(a)){case 0:$e.$n.$1iA(b,c,a,d);break;case 1:$e.$n.$1iB(b,c,a,d);break;case 2:$e.$n.$1i9(b,c,a,d)}};$e.$n.$1if=function(b,c,a,d){switch($e.$n.$zN(a)){case 0:$e.$n.$1ih(b,c,a,d);break;case 1:$e.$n.$1ii(b,c,a,d);break;case 2:$e.$n.$1ig(b,c,a,d)}};$e.$n.$1EK=function(a,b){$e.$n.$1hC(a,b)};$e.$n.$1hP=function(a,g,e,f){var b=e.$4U[0].$4H,c=e.$4U[0].$45,d=g.$UG(a,b);if(d)$e.$n.$TH(a,d,c,null,f);else $e.$n.$1hB(a,f,b,c)};$e.$n.$1hN=function(b,g,a,e){var c=g.$jD(b,a.$4U[0].$4H,a.$4U[1].$4H),d=a.$4U[0].$45,f=a.$4U[1].$45;if(d!==f||!c)$e.$n.$1hA(b,a.$4U[0],a.$4U[1],e);else $e.$n.$TH(b,c,d,null,e)};$e.$n.$1iA=function(a,b,c,d){$e.$n.$1EN(a,b,c,d)};$e.$n.$1iB=function(c,g,h,d){var a=h.$1d,b=h.$4U[0];if(a.get_$7M().$q===b.$4H.$q){var e=g.$UG(c,a.get_$7M());if(e){var i=$e.$n.$h9(a);$e.$n.$TH(c,e,b.$45,i,d)}else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}",a.get_$7M().$q);$e.$n.$vy(c,a,b,d)}}else{var f=g.$jD(c,a.get_$7M(),b.$4H);if(f){var j=$a.$1u.$Sg($e.$2y.$B(a.$1i,""),$e.$2y.$B(a.$1i,"\uffff"),true,true);$e.$n.$TH(c,f,b.$45,j,d)}else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}:{1}",a.get_$7M().$q,b.$4H.$q);$e.$n.$vy(c,a,b,d)}}};$e.$n.$1i9=function(d,h,g,f){var a=g.$1d,b=g.$4U[0],c=g.$4U[1],e=h.$jD(d,a.get_$7M(),b.$4H);if(e){var i=$a.$1u.$Sg($e.$2y.$B(a.$1i,""),$e.$2y.$B(a.$1i,"\uffff"),true,true);$e.$n.$1hz(d,e,a,i,$e.$n.$wb(b.$45),[a.get_$7M(),b.$4H],c,f)}else if(b.$45===c.$45){e=h.$jD(d,b.$4H,c.$4H);if(e)$e.$n.$1hy(d,e,null,a,f);else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}:{1}",b.$4H.$q,c.$4H.$q);$e.$n.$vx(d,a,b,c,f)}}else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}:{1}",a.get_$7M().$q,b.$4H.$q);$e.$n.$vx(d,a,b,c,f)}};$e.$n.$1ih=function(a,b,c,d){$e.$n.$1EN(a,b,c,d)};$e.$n.$1ii=function(c,h,g,e){var a=g.$1d,b=g.$4U[0],d=h.$UG(c,a.get_$7M());if(d){var f=$e.$n.$h9(a);if(a.get_$7M().$q===b.$4H.$q)$e.$n.$TH(c,d,b.$45,f,e);else $e.$n.$1i1(c,d,f,b,e)}else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}",a.get_$7M().$q);$e.$n.$vy(c,a,b,e)}};$e.$n.$1ig=function(b,i,c,g){var a=c.$1d,d=c.$4U[0],e=c.$4U[1],f=i.$UG(b,a.get_$7M());if(f){var h=$e.$n.$h9(a);$e.$n.$1i0(b,f,h,d,e,g)}else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}",a.get_$7M().$q);$e.$n.$vx(b,a,d,e,g)}};$e.$n.$1EN=function(b,f,a,d){var c=f.$UG(b,a.$1d.$RW[0]);if(c){var e=$e.$n.$h9(a.$1d);$e.$n.$TH(b,c,0,e,d)}else{$a.Trace.logWarning(60,"This query would run faster with an index on {0}",a.$1d.$RW[0].$q);$e.$n.$1h9(b,a.$1d,d)}};$e.$n.$1i1=function(d,e,a,b,f){$a.Trace.logInfo(60,"Creating Sort(Index) strategy.");var c=e.openCursor(a,"next");c.onsuccess=function(c){var e=new $e.$5H(c.target,a),g=new $e.$5e(d,b.$4H,b.$45,e);f(g)}};$e.$n.$1hy=function(f,c,a,d,e){$a.Trace.logInfo(60,"Creating Filter(Index) strategy.");var b=c.openCursor(a,"next");b.onsuccess=function(b){var c=new $e.$5H(b.target,a),f=new $e.$8m(d,c);e(f)}};$e.$n.$1i0=function(a,f,b,c,d,g){$a.Trace.logInfo(60,"Creating Sort(Sort(Index)) strategy.");var e=f.openCursor(b,"next");e.onsuccess=function(e){var f=new $e.$5H(e.target,b),h=new $e.$5e(a,c.$4H,c.$45,f),i=new $e.$5e(a,d.$4H,d.$45,h);g(i)}};$e.$n.$1hz=function(d,e,i,a,f,g,b,h){$a.Trace.logInfo(60,"Creating Sort(Group((Index)) strategy.");var c=e.openCursor(a,f);c.onsuccess=function(c){var e=new $e.$5H(c.target,a),f=new $e.$Ey(g,e),i=new $e.$5e(d,b.$4H,b.$45,f);h(i)}};$e.$n.$vy=function(b,e,c,f){$a.Trace.logInfo(60,"Creating Sort(Filter((Cursor)) strategy.");var a=$a.$1u.$GN(),d=b.openCursor(a,"next");d.onsuccess=function(d){var g=new $e.$5H(d.target,a),h=new $e.$8m(e,g),i=new $e.$5e(b,c.$4H,c.$45,h);f(i)}};$e.$n.$vx=function(a,f,c,d,g){$a.Trace.logInfo(60,"Creating Sort(Sort(Filter((Cursor))) strategy.");var b=$a.$1u.$GN(),e=a.openCursor(b,"next");e.onsuccess=function(e){var h=new $e.$5H(e.target,b),i=new $e.$8m(f,h),j=new $e.$5e(a,c.$4H,c.$45,i),k=new $e.$5e(a,d.$4H,d.$45,j);g(k)}};$e.$n.$1h9=function(c,d,e){$a.Trace.logInfo(60,"Creating Filter(Cursor) strategy.");var a=$a.$1u.$GN(),b=c.openCursor(a,"next");b.onsuccess=function(b){var c=new $e.$5H(b.target,a),f=new $e.$8m(d,c);e(f)}};$e.$n.$1hA=function(a,c,d,f){$a.Trace.logInfo(60,"Creating Sort(Sort(Cursor)) strategy.");var b=$a.$1u.$GN(),e=a.openCursor(b,"next");e.onsuccess=function(e){var g=new $e.$5H(e.target,b),h=new $e.$5e(a,c.$4H,c.$45,g),i=new $e.$5e(a,d.$4H,d.$45,h);f(i)}};$e.$n.$1hB=function(b,e,f,c){$a.Trace.logInfo(60,"Creating Sort(Cursor) strategy.");var a=$a.$1u.$GN(),d=b.openCursor(a,$e.$n.$wb(c));d.onsuccess=function(d){var g=new $e.$5H(d.target,a),h=new $e.$5e(b,f,c,g);e(h)}};$e.$n.$TH=function(f,c,d,a,e){$a.Trace.logInfo(60,"Creating Index strategy.");var b=c.openCursor(a,$e.$n.$wb(d));b.onsuccess=function(b){e(new $e.$5H(b.target,a))}};$e.$n.$1hC=function(c,d){$a.Trace.logInfo(60,"Creating Cursor strategy.");var a=$a.$1u.$GN(),b=c.openCursor(a,"next");b.onsuccess=function(b){d(new $e.$5H(b.target,a))}};$e.$n.$zN=function(a){return!a.$4U||!a.$4U.length?0:a.$4U.length===1?1:a.$4U.length===2?2:0};$e.$n.$1uB=function(a){return!!a&&!!a.$1d&&$a.$5r.isInstanceOfType(a.$1d)};$e.$n.$1tw=function(a){return!!a&&!a.$1d};$e.$n.$1uJ=function(a){return!a};$e.$n.$1uP=function(a){return!!a&&!!a.$1d&&($a.$8u.isInstanceOfType(a.$1d)||$a.$8v.isInstanceOfType(a.$1d))};$e.$n.$wb=function(a){return!a?"next":"prev"};$e.$n.$h9=function(c){var b=null;if($a.$8u.isInstanceOfType(c)){var a=c;switch(a.$Pm){case 0:b=$a.$1u.$Sg(a.$H5,a.$Hd,false,false);break;case 3:b=$a.$1u.$Sg(a.$H5,a.$Hd,true,true);break;case 1:b=$a.$1u.$Sg(a.$H5,a.$Hd,true,false);break;case 2:b=$a.$1u.$Sg(a.$H5,a.$Hd,false,true)}}else if($a.$8v.isInstanceOfType(c)){var d=c,e=!d.$Sf;b=!d.$nn?$a.$1u.$1wR(d.$L2,e):$a.$1u.$2HD(d.$L2,e)}else if($a.$5r.isInstanceOfType(c)){var f=c;b=$a.$1u.$24X(f.$1i)}return b};$e.$n.$1cx=function(b,c,e){var a=b.onerror;b.onerror=function(c){b.onerror=a;$e.$1f.$Bu(c.target.errorCode,e);a&&a(c)};var d=c;c=function(c){b.onerror=a;d(c)};return c};$e.$n.prototype={$5X:null,$Ai:0,get_$On:function(){this.$Xz();return this.get_$1LX()},get_$LR:function(){this.$Xz();return this.get_$1tI()},get_$wQ:function(){this.$Xz();return this.get_$1tH()},$fF:function(a,b){this.$5X.$fF(a,b)},$HJ:function(a,b){switch(this.$Ai){case 0:var c=this;this.$1M(function(){c.$qj();a()},b);break;case 1:var d=this;this.$10i(function(){d.$qj();a()},b);break;case 2:throw Error.invalidOperation("The end of the content was reached by the previous call to next!");}},$2EO:function(a,b,c){if(!a||this.$Ai===2)$e.$1f.$NM(b);else switch(this.$Ai){case 0:var d=this,f=this;this.$1M(function(){d.$qj();d.$2EO(a-1,b,c)},function(a){$e.$1f.$Bu(a,c)});break;case 1:var e=this,g=this;this.$1Le(a,function(){e.$qj();$e.$1f.$NM(b)},function(a){$e.$1f.$Bu(a,c)});break;case 2:throw Error.invalidOperation("The end of the content was reached by the previous call to next!");}},$N:function(){!$a.$0.$0(this.$5X)&&this.$5X.$N();this.$9k()},$9k:function(){},$1M:function(a,b){this.$10i(a,b)},$1Le:function(a,b,c){if(!a||this.$Ai===2)b();else{var d=this;this.$HJ(function(){d.$1Le(a-1,b,c)},c)}},$1Ld:function(c,b,d){var a=this,e=this;this.$HJ(function(){if(a.$Ai===2)b(false);else if(c.$1MZ(a.get_$LR(),a.get_$On())){a.$Ai=0;b(true)}else a.$1Ld(c,b,d)},function(a){$e.$1f.$Bu(a,d)})},$Xz:function(){if(!this.$Ai)throw Error.invalidOperation("cannot ask for value before calling next");},$qj:function(){this.$Ai=this.get_$1LX()?1:2}};$e.$F0=function(a,b){this.data=a;this.metadata=b};$e.$F0.prototype={data:null,metadata:null};$e.$F2=function(b,a,c){this.$5h=b;this.$4Y=a;this.$2g=c;this.$1Zn=a.objectStore("__versions");this.$1L7=a.objectStore("__indexes")};$e.$F2.prototype={$5h:null,$4Y:null,$1Zn:null,$1L7:null,$2g:null,$1iW:function(a,b,c){if(this.$2g.$18G(a))throw Error.invalidOperation("the object store: "+a+" already exists.");if(a.startsWith("__"))throw Error.invalidOperation("the object store: "+a+" begins with the reserved prefix __.");this.$5h.createObjectStore(a,new $a.$6o(null,c));this.$2g.$h(a,b);this.$1Zn.put(new $e.$Bq(a,b),a)},$1hw:function(b,a,f){if(!this.$2g.$18G(a))throw Error.invalidOperation("the object store: "+a+" does not exist.");if(this.$2g.$1L6(a,b))throw Error.invalidOperation("the object store: "+a+" already has index "+b+" declared.");var c=new $e.$Ex(a,b,f);this.$1L7.put(c);var e=this.$4Y.objectStore(a),d=$e.$5d.$B(c);e.createIndex(b,d.$1NF.$q,$a.$6h.$wq);this.$2g.$SO(c.storeName,d)}};$e.$Et=function(a,b){this.$FL=a;this.$F=b;this.$17e()};$e.$Et.prototype={$FL:null,$F:null,$rZ:null,$Fm:null,$3z:null,$5h:null,$2g:null,get_$2l:function(){return this.$3z},get_$HM:function(){return this.$2g.get_$HM()},$uc:function(c,d,e,a){var b=this;this.$1l6(function(){b.$1tG(c,d,e,a)},a)},$GA:function(a,b,c,d){this.$XI(a,b,c,d,false)},$c8:function(a,b,c,d){this.$XI(a,b,c,d,true)},$XI:function(f,g,d,a,e){this.$Xz();var b=this.$5h.transaction(f||this.get_$HM(),e?"readonly":"readwrite"),c=new $e.$Ev(b,this.$2g,this.$rZ,this.$Fm,e),h=this,i=this;$e.$6G.$18K(b,function(){c.$pC();$e.$1f.$NM(d);d=null;a=null},function(b){if(a){b=c.$1A5?new $a.$34(5,"Transaction manually aborted."):b;a(b)}d=null;a=null});try{g(c)}catch(j){$a.Trace.logException(60,j,"IDB caught an exception on the transaction callback and will abort.");b.abort()}},$1aC:function(c,d){this.$1MG()&&this.$5h.close();var a=this.$FL.deleteDatabase(this.$F),b=this;a.onsuccess=function(){b.$17e();$e.$1f.$NM(c)};var e=this;a.onerror=function(a){$e.$1f.$Bu(a.target.errorCode,d)}},$1M:function(c,d){var b=this.$FL.open(this.$F),a=this;b.onsuccess=function(e){a.$5h=e.target.result;if(!a.$1tM())c();else{var b=a.$5h.transaction(a.$5h.objectStoreNames,"readwrite");$e.$6G.$18K(b,c,d);a.$28V(b)}};var e=this;b.onerror=function(a){$e.$1f.$Bu(a.target.errorCode,d)}},$1tM:function(){return this.$1Zo()&&this.$1L8()},$1L8:function(){return Array.indexOf(this.$5h.objectStoreNames,"__indexes")>=0},$1Zo:function(){return Array.indexOf(this.$5h.objectStoreNames,"__versions")>=0},$1l7:function(){!this.$1Zo()&&this.$5h.createObjectStore("__versions",$a.$6o.$1ni());!this.$1L8()&&this.$5h.createObjectStore("__indexes",$a.$6o.$1nf())},$28V:function(a){this.$28Z(a);this.$28S(a)},$28S:function(d){var b=d.objectStore("__indexes"),c=b.openCursor($a.$1u.$GN(),"next"),a=this;c.onsuccess=function(b){if(b.target.result){var c=b.target.result.value,d=$e.$5d.$B(c);a.$2g.$SO(c.storeName,d);$a.$8l.$HJ(b.target.result)}}},$28Z:function(b){var a=b.objectStore("__versions");this.$28Q(a);this.$28X(a)},$28X:function(d){for(var a=0;a<this.$5h.objectStoreNames.length;++a)if(!this.$5h.objectStoreNames[a].startsWith("__")){var c=d.get(this.$5h.objectStoreNames[a]),b=this;c.onsuccess=function(c){var a=c.target.result;b.$2g.$h(a.name,a.version)}}},$28Q:function(c){var b=c.get("__db"),a=this;b.onsuccess=function(b){var c=b.target.result;a.$3z=c.version}},$1gp:function(c,d,a){var b=new $e.$F2(this.$5h,a,d);try{c(b)}catch(e){$a.Trace.logError(60,"aborting transaction due to exception during schema update: "+e.message);a.abort()}},$1WO:function(b,c){var a=c.objectStore("__versions");a.put(new $e.$Bq("__db",b),"__db")},$1tG:function(g,h,i,c){var e=this.$2g.$8x(),f=this.$5h.version+1;this.$5h.close();this.$17e();var a=this.$FL.open(this.$F,f),b=this;a.onupgradeneeded=function(a){b.$5h=a.target.result;b.$2HC(g,e,a.target.transaction,h,c)};var d=this;a.onsuccess=function(){d.$Xz();$e.$1f.$NM(i)};var j=this;a.onerror=function(a){$e.$1f.$Bu(a.target.errorCode,c)}},$2HC:function(c,d,a,e,f){var b=this;$e.$6G.$18K(a,function(){b.$2g=d;b.$3z=c},f);this.$1l7();this.$1WO(c,a);this.$1gp(e,d,a)},$Xz:function(){},$1MG:function(){return!!this.$5h},$17e:function(){this.$5h=null;this.$3z="";this.$2g=new $e.$Bo;this.$rZ=new $a.$CZ(this);this.$Fm=new $a.$8L},$1l6:function(a,b){if(this.$1MG())a();else this.$1M(a,b)}};$e.$1f=function(a,b){$e.$1f.initializeBase(this,[a,b])};$e.$1f.$Bu=function(b,d){var a=$a.$A2.toString(b),c=$e.$1f.$2GD(b);$a.Trace.logError(60,"IndexedDb Error: {0}",a);$e.$1f.$16P(c,a,d)};$e.$1f.$16P=function(b,c,a){a&&a(new $e.$1f(b,c))};$e.$1f.$NM=function(a){a&&a()};$e.$1f.$2GD=function(b){var a=0;switch(b){case 1:a=0;break;case 2:a=1;break;case 3:a=0;break;case 4:a=0;break;case 5:a=1;break;case 6:a=0;break;case 7:a=2;break;case 8:a=0;break;case 9:a=0;break;case 11:a=4;break;case 10:a=5;break;case 12:a=3;break;case 13:a=0;break;case 14:a=1}return a};$e.$Eu=function(a){$e.$Eu.initializeBase(this);this.$FL=a};$e.$Eu.prototype={$FL:null,$26W:function(b,f,c,d){$a.$B.$1I(c,"successCallback");$a.$B.$2Z(b,"name");var a=new $e.$Et(this.$FL,b),e=this;a.$1M(function(){c(a)},d)}};$e.$Ex=function(c,d,b){this.storeName=c;this.indexName=d;this.keyPaths=new Array(b.length);for(var a=0;a<b.length;++a)this.keyPaths[a]=b[a].$q.$q};$e.$Ex.prototype={storeName:null,indexName:null,keyPaths:null};$e.$F3=function(b,a){$e.$F3.initializeBase(this,[b,a,new $a.$1q("data."+a[0])])};$e.$F3.prototype={$1ca:function(a,b,c){$e.$5d.$19Y(this.$C7[0],a,b,c)}};$e.$5e=function(b,a,c,d){this.$$d_$1ft=Function.createDelegate(this,this.$1ft);$e.$5e.initializeBase(this,[[a],d]);this.$143=b;this.$4H=a;this.$45=c;this.$Ua=0;this.$M6=new Array(0)};$e.$5e.prototype={$143:null,$4H:null,$45:0,$1F2:null,$1Ew:null,$1Ev:null,$M6:null,$Ua:0,get_$1LX:function(){return this.$1F2},get_$1tI:function(){return this.$1Ew},get_$1tH:function(){return this.$1Ev.toString()},$10i:function(a,b){this.$1WN(null,null);if(this.$Ua<this.$M6.length)this.$29W(a,b);else if(this.$5X.$Ai===2)a();else{var c=this;this.$28W(function(){c.$10i(a,b)},b)}},$1M:function(c,a){var b=this;this.$5X.$HJ(function(){b.$10i(c,a)},a)},$28W:function(b,c){this.$M6=new Array(0);this.$Ua=0;var a="";if(this.$5X.$Ai===2)b();else{a=this.$5X.get_$wQ();this.$1Ag(a,b,c)}},$1Ag:function(a,b,c){if(this.$5X.$Ai===1&&this.$5X.get_$wQ()===a){var e=this.$4H.$q===$a.$1q.$g.$q?this.$5X.get_$LR():this.$4H.$M1(this.$5X.get_$On().data);Array.add(this.$M6,new $e.$5e.$2ET(this.$5X.get_$LR(),e));var d=this;this.$5X.$HJ(function(){d.$1Ag(a,b,c)},c)}else{this.$2ER();b()}},$2ER:function(){this.$M6.length>0&&this.$M6.sort(this.$$d_$1ft)},$1ft:function(c,d){var a=c,b=d;return!this.$45?a.$1Dj(b):b.$1Dj(a)},$29W:function(d,e){var b=this.$M6[this.$Ua].get_$2S(),a=this.$143.get(b);this.$M6[this.$Ua]=null;this.$Ua++;var c=this;a.onsuccess=function(a){c.$1WN(b,a.target.result);d()};var f=this;a.onerror=function(){e(a.errorCode)}},$1WN:function(b,a){this.$1Ew=b;this.$1F2=a;this.$1Ev=!a?null:this.$4H.$M1(a.data)}};$e.$5e.$2ET=function(a,b){this.$2E=a;this.$1XW=b};$e.$5e.$2ET.prototype={$2E:null,$1XW:null,get_$2S:function(){return this.$2E},get_$Hl:function(){return this.$1XW},$1Dj:function(a){return Number.isInstanceOfType(this.get_$Hl())&&Number.isInstanceOfType(a.get_$Hl())?this.get_$Hl()-a.get_$Hl():String.isInstanceOfType(this.get_$Hl())&&String.isInstanceOfType(a.get_$Hl())?this.get_$Hl()===a.get_$Hl()?0:this.get_$Hl()>a.get_$Hl()?1:-1:0}};$e.$Bq=function(a,b){this.name=a.toLowerCase();this.version=b};$e.$Bq.prototype={name:null,version:null};$e.$6G=function(){};$e.$6G.$18K=function(a,b,c){a.oncomplete=function(){$a.Trace.logInfo(60,"idb transaction successfully completed");$e.$1f.$NM(b);a.onabort=null;a.oncomplete=null};a.onabort=function(d){$a.Trace.logInfo(60,"idb transaction aborted!");var b=10;if(d.target.error){b=$1c.$27Q($a.$A2,d.target.error.name);$a.Trace.logError(60,"aborted due to error: "+b)}$e.$1f.$Bu(b,c);a.onabort=null;a.oncomplete=null}};$e.$I8=function(){};$e.$I8.registerInterface("$e.$I8");$e.$I9=function(){};$e.$I9.registerInterface("$e.$I9");$e.$5X=function(){};$e.$5X.$e1=function(a){var b=new RegExp("^[@\\#\\$\\w]+(\\.[@\\#\\$\\w]+)?$");if(!b.test(a))throw Error.invalidOperation("'"+a+"' is not a valid SQL identifier name.");return a};$e.$61=function(a){this.$$d_$1tR=Function.createDelegate(this,this.$1tR);this.$5h=a;this.$2g=$e.$71.$AI();this.$rZ=new $a.$CZ(this);this.$Fm=new $a.$8L;this.$3z=""};$e.$61.$1gq=function(b,c,d){var a=null;try{a=new $e.$62(c,d);b(a)}finally{a&&a.$N()}};$e.$61.$1iX=function(c){var a=String.format("CREATE TABLE IF NOT EXISTS {0}({1} TEXT, {2} TEXT, {3} TEXT)","__OBJECTSTORE","StoreName","IndexName","IndexKeyPath"),b=new Array(0);$e.$1k.$6c(c,a,b,null,null)};$e.$61.$1j4=function(c){var a=String.format("CREATE TABLE IF NOT EXISTS {0}({1} TEXT PRIMARY KEY, {2} TEXT)","__VERSIONS","EntityName","VersionName"),b=new Array(0);$e.$1k.$6c(c,a,b,null,null)};$e.$61.$2H9=function(c,d){var a=String.format("INSERT OR REPLACE INTO {0} ({1}, {2}) VALUES(?, ?)","__VERSIONS","EntityName","VersionName"),b=["db",d];$e.$1k.$6c(c,a,b,null,null)};$e.$61.prototype={$5h:null,$2g:null,$rZ:null,$Fm:null,$3z:null,get_$2l:function(){return this.$3z},get_$HM:function(){return this.$2g.get_$HM()},$uc:function(c,e,d,f){var b=this.$2g.$8x(),g=this,h=this,a=this;this.$5h.transaction(function(a){$e.$61.$1gq(e,a,b);$e.$61.$2H9(a,c)},function(a){$e.$4P.$pe(a,f)},function(){a.$2g=b.$8x();a.$3z=c;d&&d()})},$GA:function(d,a,b,c){this.$XI(a,b,c,false)},$c8:function(d,a,b,c){this.$XI(a,b,c,true)},$XI:function(i,g,e,h){var a=null,b=this.$5h,f=b.$$d_transaction||(b.$$d_transaction=Function.createDelegate(b,b.transaction));if(h){var c=this.$5h;f=c.$$d_readTransaction||(c.$$d_readTransaction=Function.createDelegate(c,c.readTransaction))}var d=this,j=this,k=this;f(function(b){a=new $e.$1k(b,d.$2g,d.$rZ,d.$Fm,h);i(a)},function(b){if(a&&a.$1A5&&e)e(new $a.$34(5,"transaction aborted."));else $e.$4P.$pe(b,e)},function(){a&&a.$pC();g&&g()})},$1aC:function(a,b){var c=this,d=this;this.$uc("",this.$$d_$1tR,function(){a&&a()},function(a){b&&b(a)})},$1M:function(a,c){$a.$B.$1I(a,"success");var b=this,d=this,e=this;this.$5h.transaction(function(a){$e.$61.$1iX(a);$e.$61.$1j4(a);b.$28U(a)},function(a){$e.$4P.$pe(a,c)},function(){a()})},$1tR:function(d){for(var a=d,c=this.get_$HM(),b=0;b<c.length;++b)a.$2AF(c[b]);a.$29E();a.$29F()},$28U:function(d){var a=String.format("SELECT * FROM {0}","__OBJECTSTORE"),c=new Array(0),b=this;$e.$1k.$6c(d,a,c,function(f,e){a=String.format("SELECT * FROM {0}","__VERSIONS");$e.$1k.$6c(d,a,c,function(c,a){b.$2g=$e.$71.$1hf(e,a);b.$1WO(a)},null)},null)},$1WO:function(c){for(var a=0;a<c.rows.length;++a){var b=c.rows.item(a);if(b.EntityName==="db"){this.$3z=b.VersionName;break}}}};$e.$4P=function(a,b){$e.$4P.initializeBase(this,[a,b])};$e.$4P.$pe=function(c,d){var a=c.message,b=$e.$4P.$2GE(c);$a.Trace.logError(109,"SQL Error - code "+b+": {0}",a);$e.$4P.$16P(b,a,d)};$e.$4P.$16P=function(b,c,a){a&&a(new $e.$4P(b,c))};$e.$4P.$2GE=function(b){var a=0;switch(b.code){case 6:a=1;break;case 1:a=0;break;case 4:a=3;break;case 5:a=0;break;case 7:a=4;break;case 3:a=0;break;case 0:a=0;break;case 2:a=0}return a};$e.$D9=function(a){$e.$D9.initializeBase(this);this.$1a8=a};$e.$D9.prototype={$1a8:null,$26W:function(i,j,h,a){$a.$B.$1I(h,"success");var b,c,d,e,f;if(f=this.$2GK(i,j,d={val:b},e={val:c}),b=d.val,c=e.val,f){var g=new $e.$61(b),k=this,l=this;g.$1M(function(){h(g)},function(b){a&&a(b)})}else a&&a(new $a.$34(0,c))},$2GK:function(b,d,a,c){$a.$B.$2Z(b,"name");a.val=null;c.val="";try{a.val=this.$1a8.openDatabase(b,"","",d*1048576,null)}catch(e){c.val=e.message;a.val=null}return!!a.val}};$e.$Aa=function(a,b,c,d){this.$4Y=a;this.$2g=b;this.$c6=c;this.$ET=d};$e.$Aa.$1o5=function(b){var a=null;if(b.rows.length)a=$e.$5U.$1Iw(0,b).$H3;return a};$e.$Aa.prototype={$4Y:null,$2g:null,$c6:null,$ET:null,get_$1T:function(){return this.$2g.get_$HL()},get_$MF:function(){return this.$2g.get_$MF()},$Gv:function(b,c,f){$a.$B.$1I(b,"id must be provided");$a.$B.$1I(b.$A8(),"id must be provided");$a.$B.$1I(c,"success callback must be provided");var a=b.$A8();$a.$B.$1I(a,"id must be provided");$a.$B.$2Z(a.toString(),"id must be provided");var d=String.format("SELECT * FROM [{0}] WHERE {1} = ?",this.$2g.get_$HL(),$e.$47.$Ml),e=[a],g=this;$e.$1k.$6c(this.$4Y.$4Y,d,e,function(d,a){var b=$e.$Aa.$1o5(a);c(b)},f)},$FC:function(a,d,g){$a.$B.$1I(a,"id must be provided");var c=a.$A8();$a.$B.$1I(c,"id must be provided");$a.$B.$2Z(c.toString(),"id must be provided");var e=String.format("DELETE FROM [{0}] WHERE {1} = ?",this.$2g.get_$HL(),$e.$47.$Ml),f=[c];this.$ET.$1Qf(this,a);var b=this;$e.$1k.$6c(this.$4Y.$4Y,e,f,function(){b.$c6&&b.$c6(b.get_$1T(),2,a,null);d&&d()},g)},$3B:function(a,d){var b=String.format("DELETE FROM [{0}]",this.$2g.get_$HL()),c=[];this.$ET.$1Qe(this);var e=this;$e.$1k.$6c(this.$4Y.$4Y,b,c,function(){a&&a()},d)},$1Td:function(a,b,d,g){$a.$B.$1I(a,"id must be provided");$a.$B.$1I(b,"json must be provided");var e=String.format("INSERT OR REPLACE INTO [{0}] {1} VALUES {2}",this.$2g.get_$HL(),this.$1dZ(),this.$1dm()),f=this.$1dl(a.$A8(),b);this.$ET.$1Qg(this,a,b);var c=this;$e.$1k.$6c(this.$4Y.$4Y,e,f,function(f,e){c.$c6&&c.$c6(c.get_$1T(),1,a,b);if(!a.$A8())a=new $a.$4L(e.insertId);d&&d(a)},g)},$22f:function(a,b){$a.$B.$1I(b,"success");this.$1f5(a);var c=$e.$8H.$B(a,this.$2g.get_$HL());b(new $e.$5U(this.$4Y,c))},$1f5:function(a){if(a){this.$1f3(a);this.$1f6(a)}},$1f6:function(b){if(b.$4U)for(var a=0;a<b.$4U.length;++a)if(!this.$2g.$a3(b.$4U[a].$4H.$q)){var c=String.format("KeyPath {0} is being sorted but it is not an indexed field",b.$4U[a].$4H.$q);$a.$34.$G8(1,c)}},$1f3:function(c){if(c.$1d)for(var b=c.$1d.$RW,a=0;a<b.length;++a)if(!this.$2g.$a3(b[a].$q)){var d=String.format("KeyPath {0} is being queried but it is not an indexed field",b[a].$q);$a.$34.$G8(1,d)}},$1dl:function(d,e){var b=[];Array.add(b,d);Array.add(b,JSON.stringify(e));for(var a=0;a<this.get_$MF().length;++a){var f=new $a.$1q(this.get_$MF()[a]),c=f.$M1(e);this.$2FQ(d,this.get_$MF()[a],c);this.$2FR(d,this.get_$MF()[a],c);Array.add(b,c)}return b},$2FQ:function(b,c,d){if($a.$0.$0(d)){var a=String.format("KeyPath {0} is a declared index on store {1} but does not exist in object with id {2}",c,this.$2g.get_$HL(),b);$a.$34.$G8(1,a)}},$2FR:function(c,d,a){if(!String.isInstanceOfType(a)&&!Number.isInstanceOfType(a)){var b=String.format("KeyPath {0} is a declared index on store {1} but the object with id {2} is attempting to store the non-primitive type {3}.",d,this.$2g.get_$HL(),c,Object.getType(a).getName());$a.$34.$G8(1,b)}},$1dm:function(){for(var a="(?, ?",b=0;b<this.get_$MF().length;++b)a+=", ?";return a+")"},$1dZ:function(){for(var b=String.format("({0}, {1}",$e.$47.$Ml,"json"),a=0;a<this.get_$MF().length;++a)b+=String.format(", [{0}]",this.get_$MF()[a]);return b+")"}};$e.$1k=function(b,c,a,d,e){this.$4Y=b;this.$2g=c;this.$ET=new $a.$9I(this,d);this.$Jk=null;this.$WC=true;this.$lF=e;if(a)this.$Jk=new $a.$CY(a)};$e.$1k.$6c=function(h,d,c,g,i){var e="",f="";if($a.Trace.get_$2L()){for(var a="{ ",b=0;b<c.length;++b){a+=!c[b]?"null":c[b].toString();if(b<c.length-1)a+=", "}a+=" }";e=String.format("ExecuteSql => {0} {1}",d,a.substr(0,50));f=String.format("ExecuteSql => {0} {1}",d,a.substr(0,256))}h.executeSql(d,c,function(a,b){$a.Trace.get_$2L()&&$a.Trace.logInfo(109,"SUCCESS!: {0}",e);g&&g(a,b)},function(b,a){$a.Trace.get_$2L()&&$a.Trace.logInfo(109,"ERROR! '{0}': {1}",a.message,f);$e.$4P.$pe(a,i);return true})};$e.$1k.prototype={$4Y:null,$2g:null,$lF:false,$Jk:null,$ET:null,$WC:false,$1A5:false,get_$1MX:function(){return this.$lF},get_$1lk:function(){var a=null;if(this.$Jk)a=this.$Jk.$$d_$29J;return a},$Mt:function(b){var a=this.$2g.$1pc(b);if(!a)throw Error.invalidOperation(String.format("Object store {0} does not exist",b));var c=this.$WC?this.$ET:new $a.$9I(this,new $a.$8L);return new $e.$Aa(this,a,this.get_$1lk(),c)},$pC:function(){this.$WC&&this.$Jk&&this.$Jk.$pC()}};$e.$47=function(){};$e.$Gl=function(a,b){$e.$Gl.initializeBase(this,[a,b]);this.$1d=a.$1d};$e.$Gl.prototype={$1d:null,get_$2Hp:function(){return"WHERE ["+this.$1d.get_$7M().$q+"] = ?"},get_$1a3:function(){return[this.$1d.$1i]}};$e.$Gm=function(a,b){$e.$Gm.initializeBase(this,[a,b]);this.$1d=a.$1d};$e.$Gm.prototype={$1d:null,get_$2Hp:function(){var a=" ["+this.$1d.get_$7M().$q+"] ";return"WHERE"+a+this.get_$1vQ()+" ? AND"+a+this.get_$2BU()+" ?"},get_$1a3:function(){return[this.$1d.$H5,this.$1d.$Hd]},get_$1vQ:function(){var a=">";if(!this.$1d.$Pm||this.$1d.$Pm===2)a+="=";return a},get_$2BU:function(){var a="<";if(!this.$1d.$Pm||this.$1d.$Pm===1)a+="=";return a}};$e.$Gn=function(a,b){$e.$Gn.initializeBase(this,[a,b]);this.$1d=a.$1d};$e.$Gn.prototype={$1d:null,get_$2Hp:function(){var a;switch(this.$1d.$nn){case 0:a=this.$1d.$Sf===1?">=":">";break;case 1:a=this.$1d.$Sf===1?"<=":"<";break;default:throw Error.invalidOperation("OperatorType is not supported.");}return"WHERE ["+this.$1d.get_$7M().$q+"] "+a+" ?"},get_$1a3:function(){return[this.$1d.$L2]}};$e.$71=function(){this.$Ie=[]};$e.$71.$AI=function(){return new $e.$71};$e.$71.$1hf=function(n,l){for(var d=new $e.$71,e={},a=0;a<l.rows.length;++a){var g=l.rows.item(a),m=g.EntityName.toLowerCase();e[m]=g.VersionName}for(var f=n.rows,b=0;b<f.length;++b){var c=f.item(b),h=c.StoreName,i=c.IndexName,j=c.IndexKeyPath,k=d.$1Hw(h,e[h.toLowerCase()]);!$a.$5.$L(i)&&k.$SO(i);!$a.$5.$L(j)&&k.$1AR(j)}return d};$e.$71.prototype={get_$HM:function(){for(var b=[],a=0;a<this.$Ie.length;++a){var c=this.$jG(a);Array.add(b,c.$DM)}return b},$h:function(a,b){this.$1Hw(a,b)},$5P:function(c){for(var a=0;a<this.$Ie.length;++a){var b=this.$jG(a);if(b.$1M8(c.$DM)){Array.removeAt(this.$Ie,a);break}}},$8x:function(){for(var b=new $e.$71,a=0;a<this.$Ie.length;++a){var c=this.$jG(a);Array.add(b.$Ie,c.$8x())}return b},$1lw:function(a){return!!this.$ir(a)},$ir:function(d){for(var b=null,a=0;a<this.$Ie.length;++a){var c=this.$jG(a);if(c.$1M8(d)){b=c;break}}return b},$1pc:function(a){return this.$ir(a)},$jG:function(a){return this.$Ie[a]},$1Hw:function(b,c){var a=this.$ir(b);if(!a){a=new $e.$DA(b,c);Array.add(this.$Ie,a)}return a}};$e.$DA=function(a,b){this.$DM=a;this.$3z=b;this.$aF={};this.$Um={}};$e.$DA.prototype={$DM:null,$3z:null,$aF:null,$Um:null,get_$HL:function(){return this.$DM},get_$MF:function(){var c=[],a=this.$Um;for(var b in a){var d={key:b,value:a[b]};Array.add(c,d.value)}return c},$1M8:function(a){return this.$DM.toLowerCase()===a.toLowerCase()},$8x:function(){var a=new $e.$DA(this.$DM,this.$3z);a.$aF=$a.$2j.$8x(this.$aF);a.$Um=$a.$2j.$8x(this.$Um);return a},$SO:function(a){this.$aF[a.toLowerCase()]=a},$1AR:function(a){this.$Um[a.toLowerCase()]=a},$1rs:function(a){return a.toLowerCase()in this.$aF},$a3:function(a){return a.toLowerCase()in this.$Um||a.toLowerCase()===$e.$47.$Ml}};$e.$8H=function(a,b){this.$1g=a;this.$DM=b};$e.$8H.$B=function(a,c){var b=null;if(!a||!a.$1d)b=new $e.$8H(a,c);else if($a.$5r.isInstanceOfType(a.$1d))b=new $e.$Gl(a,c);else if($a.$8u.isInstanceOfType(a.$1d))b=new $e.$Gm(a,c);else if($a.$8v.isInstanceOfType(a.$1d))b=new $e.$Gn(a,c);return b};$e.$8H.$1qE=function(a){return!a?"ASC":"DESC"};$e.$8H.prototype={$1g:null,$DM:null,get_$2Cc:function(){return this.$uS($e.$47.$Ml+", json")},get_$2CX:function(){return this.$uS("COUNT(*)")},get_$187:function(){var a=[];this.get_$1a3()&&Array.addRange(a,this.get_$1a3());return a},get_$2Hp:function(){return""},get_$1a3:function(){return[]},get_$26k:function(){var b="";if(this.$1rw()){b="ORDER BY";for(var a=0;a<this.$1g.$4U.length;++a){var c=this.$1g.$4U[a];b+=" ["+c.$4H.$q+"] "+$e.$8H.$1qE(c.$45)+(a<this.$1g.$4U.length-1?",":"")}}return b},$2Ca:function(){for(var c=[],a=0;a<arguments.length;++a)c[a]=arguments[a];for(var d="",b=0;b<c.length;++b){d+="["+c[b].$q+"]";if(b+1<c.length)d+=", "}return this.$uS(d)},$1rw:function(){return!!this.$1g&&!!this.$1g.$4U&&this.$1g.$4U.length>0},$uS:function(d){var a="SELECT "+d+" FROM ["+this.$DM+"]",b=this.get_$2Hp();if(b)a+=" "+b;var c=this.get_$26k();if(c)a+=" "+c;return a}};$e.$5U=function(a,b){this.$4Y=a;this.$Rl=b};$e.$5U.$1Iw=function(e,f){var a=f.rows.item(e),b=a.json,c=JSON.parse(b),d=a[$e.$47.$Ml];return new $a.$8E(new $a.$4L(d),c)};$e.$5U.$1nK=function(b,c){for(var a=0;a<b.rows.length;++a)if(c.$1uV(b.rows.item(a)))return a;return-1};$e.$5U.$1C7=function(b,c,d){var a=String.format(" LIMIT {0} OFFSET {1}",d,c);return b+a};$e.$5U.prototype={$Rl:null,$4Y:null,$Vi:0,$17H:false,$fF:function(a,b){var c=this;$e.$1k.$6c(this.$4Y.$4Y,this.$Rl.get_$2CX(),this.$Rl.get_$187(),function(d,b){var c=b.rows.item(0)["COUNT(*)"];a(c)},b)},$HJ:function(a,b,e){this.$2FS();var d=$e.$5U.$1C7(this.$Rl.get_$2Cc(),this.$Vi,a);this.$Vi=this.$Vi+a;var c=this;$e.$1k.$6c(this.$4Y.$4Y,d,this.$Rl.get_$187(),function(g,d){if(b){for(var e=[],a=0;a<d.rows.length;++a){var f=$e.$5U.$1Iw(a,d);Array.add(e,f)}b(c.$4Y,e)}},e)},$1Ld:function(b,c,f,d){var e,h=$e.$5U.$1C7((e=this.$Rl).$2Ca.apply(e,b.$RW),c,500),a=this,g=this;$e.$1k.$6c(this.$4Y.$4Y,h,this.$Rl.get_$187(),function(j,e){var g=$e.$5U.$1nK(e,b),h=g!==-1,i=e.rows.length>0;if(h||!i){a.$17H=false;a.$Vi=c+g;f(h)}else a.$1Ld(b,c+e.rows.length,f,d)},function(a){g.$17H=false;d&&d(a)})},$N:function(){},$2FS:function(){if(this.$17H)throw Error.invalidOperation("A seek operation is currently in progress");}};$e.$62=function(a,b){$e.$62.initializeBase(this);this.$7A=a;this.$bQ=b};$e.$62.$1es=function(a){if(a.startsWith("__"))throw Error.create("An object store cannot be created with a name beginning with __");};$e.$62.$1dY=function(c){for(var a="(",b=0;b<c.length;++b){if(b>0)a+=", ";a+=String.format("[{0}]",c[b].$q.$q)}a+=")";return a};$e.$62.$1f2=function(a){if(a.length>2)throw Error.invalidOperation("Cannot create a multi-column index with more than two fields");};$e.$62.$1ex=function(b,a){if(b.$1rs(a))throw Error.invalidOperation(String.format("The index {0} already exists",a));};$e.$62.prototype={$bQ:null,$7A:null,$1iW:function(a,b,c){this.$1l5(a);$e.$62.$1es(a);this.$1UM(a);this.$1j2(a,c);this.$1bM(a,b);this.$1bL(a,b)},$2AF:function(b){var a=this.$1GB(b);this.$1UM(a.$DM);this.$2AL(a)},$1hw:function(b,d,c){$e.$62.$1f2(c);var a=this.$1GB(d);$e.$62.$1ex(a,b);this.$1h0(b,c,a);this.$1io(b,a,c);a.$SO(b)},$29E:function(){var a=String.format("DELETE FROM {0}","__OBJECTSTORE"),b=new Array(0);$e.$1k.$6c(this.$7A,a,b,null,null)},$29F:function(){var a=String.format("DELETE FROM {0}","__VERSIONS"),b=new Array(0);$e.$1k.$6c(this.$7A,a,b,null,null)},$9k:function(){this.$7A=null},$1h0:function(e,d,c){for(var a=0;a<d.length;++a){var b=d[a];if(!c.$a3(b.$q.$q)){this.$1bh(c,b);this.$1as(c,e,b)}}},$1j2:function(d,e){var a=e?"INTEGER PRIMARY KEY AUTOINCREMENT":"TEXT PRIMARY KEY",b=String.format("CREATE TABLE [{0}]({1} {3}, {2} BLOB)",$e.$5X.$e1(d),$e.$47.$Ml,"json",a),c=new Array(0);$e.$1k.$6c(this.$7A,b,c,null,null)},$1bM:function(c,d){var a=String.format("INSERT OR REPLACE INTO {0} ({1}, {2}) VALUES (?, ?)","__VERSIONS","EntityName","VersionName"),b=[$e.$5X.$e1(c),$e.$5X.$e1(d)];$e.$1k.$6c(this.$7A,a,b,null,null)},$1bL:function(a,d){var b=String.format("INSERT INTO {0} VALUES(?,?,?)","__OBJECTSTORE"),c=[a,"",""];$e.$1k.$6c(this.$7A,b,c,null,null);this.$bQ.$h(a,d)},$2AL:function(a){var b=String.format("DELETE FROM {0} WHERE {1} = ?","__OBJECTSTORE","StoreName"),c=[a.$DM];$e.$1k.$6c(this.$7A,b,c,null,null);this.$bQ.$5P(a)},$1UM:function(c){var a=String.format("DROP TABLE IF EXISTS [{0}]",$e.$5X.$e1(c)),b=new Array(0);$e.$1k.$6c(this.$7A,a,b,null,null)},$1l5:function(b){if(this.$bQ.$1lw(b)){var a=new $e.$4P(1,String.format("The object store {0} already exists.",b));throw Error.create(a.$P,a);}},$1GB:function(c){var a=this.$bQ.$ir(c);if(!a){var b=new $e.$4P(1,String.format("The object store {0} was not found.",$e.$5X.$e1(c)));throw Error.create(b.$P,b);}return a},$1io:function(d,e,f){var a=$e.$62.$1dY(f),b=String.format("CREATE INDEX [{0}] ON [{1}] {2}",d,e.get_$HL(),a),c=new Array(0);$e.$1k.$6c(this.$7A,b,c,null,null)},$1as:function(a,e,b){var c=String.format("INSERT INTO {0} VALUES(?,?,?)","__OBJECTSTORE"),d=[a.$DM,e,b.$q.$q];$e.$1k.$6c(this.$7A,c,d,null,null);a.$1AR(b.$q.$q)},$1bh:function(d,a){var b=String.format("ALTER TABLE [{0}] ADD COLUMN [{1}] {2}",d.get_$HL(),a.$q.$q,$a.$CC.$S2(a.$7h)),c=new Array(0);$e.$1k.$6c(this.$7A,b,c,null,null)}};$e.$Gi=function(a,b){this.transaction=this.$GA;this.readTransaction=this.$2Ig;this.$C8=a;this.$V0=b;this.$s9=[];this.$sA=false};$e.$Gi.prototype={$C8:null,$V0:null,$sA:false,$s9:null,$GA:function(c,a,f){$a.$B.$1I(c,"transaction");var b=new $e.$2i(this.$C8,this.$V0,f,a);try{c(b);Array.enqueue(this.$s9,b);this.$1Gd()}catch(g){$a.Trace.logException(109,g,"Exception caught in transaction callback.");if(a){var d=String.format("Exception caught in transaction callback. {0}",g.message),e=new $a.$CT(0,d);a(e)}}},$2Ig:function(a,b,c){this.$GA(a,b,c)},$1Gd:function(){if(!this.$sA&&this.$s9.length>0){this.$sA=true;var b=Array.dequeue(this.$s9),a=this;this.$V0.setTimeout(function(){b.$2El(function(){a.$sA=false;a.$1Gd()})},0)}}};$e.$Gj=function(a){$e.$Gj.initializeBase(this);this.insertId=a.insertId;this.rowsAffected=a.rowsAffected;this.rows=new $e.$Gk(a)};$e.$Gk=function(a){$e.$Gk.initializeBase(this);this.length=a.rows.length;this.$mz=a};$e.$Gk.prototype={$mz:null,item:function(e){for(var b={},c=this.$mz.rows[e],a=0;a<this.$mz.columnNames.length;++a){var d=this.$mz.columnNames[a];b[d]=c[a]}return b}};$e.$9E=function(a,b,c,d){$a.$B.$2Z(a,"sql");$a.$B.$1I(b,"args");$a.$B.$1I(c,"successCallback");$a.$B.$1I(d,"errorCallback");this.$1XZ=a;this.$SX=b;this.$rb=c;this.$1GJ=d};$e.$9E.prototype={$1XZ:null,$SX:null,$rb:null,$1GJ:null,$1bR:function(c){var a=this,b=this;c.$1bE(this.$1XZ,this.$SX,function(b){a.$rb(b)},function(a){b.$1GJ(a)})}};$e.$2i=function(b,c,d,a){this.$$d_$1Dl=Function.createDelegate(this,this.$1Dl);this.executeSql=this.$6c;this.$C8=b;this.$V0=c;this.$f=d;this.$14M=a;this.$1V=0;this.$HW=[];this.$1l4(a)};$e.$2i.prototype={$V0:null,$f:null,$14M:null,$C8:null,$14J:null,$1V:0,$HW:null,$11E:false,$1Gi:false,$11f:false,$6c:function(c,d,e,f){this.$1Gi=true;if(this.$1V===2)throw Error.invalidOperation("ExecuteSql cannot be invoked on a completed transaction.");var b=new $e.$9E(c,d,this.$1hW(e),this.$1hV(f));Array.enqueue(this.$HW,b);if(this.$1V&&!this.$11f){this.$11f=true;var a=this;this.$V0.setTimeout(function(){a.$11f=false;a.$Z9()},0)}},$2El:function(a){this.$tt(0);this.$14J=a;if(!this.$1Gi){$a.Trace.logInfo($e.$2i.$5v,"Completing transaction because no statements were queued.");this.$1V=2;this.$V0.setTimeout(this.$$d_$1Dl,0)}else{$a.Trace.logInfo($e.$2i.$5v,"Starting execution of the transaction");this.$1V=1;this.$Z9()}},$1fq:function(){$a.Trace.logInfo($e.$2i.$5v,"Committing transaction");this.$tt(1);this.$1V=2;var a=this,b=this,c=new $e.$9E("COMMIT TRANSACTION",[],function(){$a.Trace.logInfo($e.$2i.$5v,"Commit success.");a.$1Dl()},function(a){$a.Trace.logError($e.$2i.$5v,"Commit error: {0}",a.message);b.$vZ(a)});Array.enqueue(this.$HW,c);this.$Z9()},$1Dl:function(){this.$1Dk();this.$f&&this.$f()},$vZ:function(a){this.$1Dk();this.$14M&&this.$14M(a)},$1Dk:function(){this.$C8=null;this.$14J&&this.$14J()},$2BV:function(b){var a=new $a.$CT(0,"Exception occurred on a transaction callback. "+b.message);this.$1VJ(a)},$1VJ:function(a){$a.Trace.logInfo($e.$2i.$5v,"Rolling back transaction");this.$tt(1);this.$1V=2;Array.clear(this.$HW);var b=this,c=this,d=new $e.$9E("ROLLBACK TRANSACTION",[],function(){$a.Trace.logInfo($e.$2i.$5v,"Rollback success.");b.$vZ(a)},function(b){$a.Trace.logInfo($e.$2i.$5v,"Rollback error: {0}",b.message);c.$vZ(a)});Array.enqueue(this.$HW,d);this.$Z9()},$1hW:function(b){var a=this;return function(c){if(a.$1V!==2){$a.Trace.logVerbose($e.$2i.$5v,"ExecuteSql success");b&&a.$1tW(b,c)}}},$1hV:function(b){var a=this;return function(c){$a.Trace.logVerbose($e.$2i.$5v,"ExecuteSql error");a.$1V!==2&&a.$1VJ(c);b&&b(a,c)}},$1tW:function(a,b){try{a(this,new $e.$Gj(b))}catch(c){$a.Trace.logException($e.$2i.$5v,c,"Exception during transaction callback.");this.$2BV(c)}},$1fr:function(){!this.$HW.length&&this.$1fq()},$1l4:function(a){var c=this,d=this,b=new $e.$9E("BEGIN TRANSACTION",[],function(){},function(b){$a.Trace.logError($e.$2i.$5v,"BEGIN error: {0}",b.message);a&&a(b)});Array.enqueue(this.$HW,b)},$Z9:function(){if(!this.$11E&&this.$HW.length>0){var b=this.$C8.$1gv();while(this.$HW.length>0&&b.get_$1GP()<4194304){var c=Array.dequeue(this.$HW);c.$1bR(b)}this.$11E=true;var a=this;b.$R(function(){a.$11E=false;a.$1V!==2&&a.$1fr();a.$Z9()})}},$tt:function(a){if(this.$1V!==a)throw Error.invalidOperation(String.format("transaction state expected {0}.  Actual {1}.",a,this.$1V));}};$e.$Go=function(a,b){this.openDatabase=this.$26W;this.$C8=a;this.$1aD=b};$e.$Go.prototype={$C8:null,$1aD:null,$26W:function(){return new $e.$Gi(this.$C8,this.$1aD)}};PersistedDataRecord.registerClass("PersistedDataRecord");$e.$3h.registerClass("$e.$3h");ItemMetadata.registerClass("ItemMetadata");SettingRecord.registerClass("SettingRecord");$e.$75.registerClass("$e.$75",null,$a.$ID);$e.$n.registerClass("$e.$n",null,Sys.IDisposable);$e.$5H.registerClass("$e.$5H",$e.$n);$e.$5H.$1Sy.registerClass("$e.$5H.$1Sy");$e.$7w.registerClass("$e.$7w",null,$a.$IE);$e.$Ev.registerClass("$e.$Ev",null,$e.$I6,$a.$IG);$e.$5d.registerClass("$e.$5d");$e.$Ew.registerClass("$e.$Ew",$e.$5d);$e.$2y.registerClass("$e.$2y");$e.$8m.registerClass("$e.$8m",$e.$n);$e.$Bo.registerClass("$e.$Bo",null,$e.$I3);$e.$Bo.$1GI.registerClass("$e.$Bo.$1GI",null,$e.$I2);$e.$Ey.registerClass("$e.$Ey",$e.$n);$e.$Ez.registerClass("$e.$Ez",null,$a.$IJ);$e.$F0.registerClass("$e.$F0");$e.$F2.registerClass("$e.$F2",null,$a.$II);$e.$Et.registerClass("$e.$Et",null,$a.$IF);$e.$1f.registerClass("$e.$1f",$a.$34);$e.$Eu.registerClass("$e.$Eu",$e.$75);$e.$Ex.registerClass("$e.$Ex");$e.$F3.registerClass("$e.$F3",$e.$5d);$e.$5e.registerClass("$e.$5e",$e.$Ey);$e.$5e.$2ET.registerClass("$e.$5e.$2ET");$e.$Bq.registerClass("$e.$Bq");$e.$6G.registerClass("$e.$6G");$e.$5X.registerClass("$e.$5X");$e.$61.registerClass("$e.$61",null,$a.$IF);$e.$4P.registerClass("$e.$4P",$a.$34);$e.$D9.registerClass("$e.$D9",$e.$75);$e.$Aa.registerClass("$e.$Aa",null,$a.$IE);$e.$1k.registerClass("$e.$1k",null,$a.$IG);$e.$47.registerClass("$e.$47");$e.$8H.registerClass("$e.$8H");$e.$Gl.registerClass("$e.$Gl",$e.$8H);$e.$Gm.registerClass("$e.$Gm",$e.$8H);$e.$Gn.registerClass("$e.$Gn",$e.$8H);$e.$71.registerClass("$e.$71",null,$e.$I8);$e.$DA.registerClass("$e.$DA",null,$e.$I9);$e.$5U.registerClass("$e.$5U",null,$a.$IJ);$e.$62.registerClass("$e.$62",$a.$9p,$a.$II);$e.$Gi.registerClass("$e.$Gi",null,$a.$Hx);$e.$Gj.registerClass("$e.$Gj",$a.ISqlResultSet);$e.$Gk.registerClass("$e.$Gk",$a.ISqlResultSetRowList);$e.$9E.registerClass("$e.$9E");$e.$2i.registerClass("$e.$2i",null,$a.$Hz);$e.$Go.registerClass("$e.$Go",null,$a.$Hy);$e.$2y.$181=-0xffffffffffff;$e.$47.$Ml=$a.$1q.$g.$q;$e.$2i.$5v=111