Type.registerNamespace("Microsoft.Crm.Client.Application.PhoneApp");Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError=function(){};Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError.prototype={galleryNotAvailable:0,genericError:1,fileSizeBreached:2,userCanceled:3};Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError.registerEnum("Microsoft.Crm.Client.Application.PhoneApp.GetPhotoFromGalleryError",false);Microsoft.Crm.Client.Application.PhoneApp.StartPage=function(){this.$$d_$15y=Function.createDelegate(this,this.$15y);this.$$d_$1Rh=Function.createDelegate(this,this.$1Rh);this.$$d_$1Rk=Function.createDelegate(this,this.$1Rk);this.$$d_$1Um=Function.createDelegate(this,this.$1Um);this.$$d_$1Q3=Function.createDelegate(this,this.$1Q3);this.$$d_$225=Function.createDelegate(this,this.$225);this.$1Ri=this.$$d_$225;this.$1Rj=this.$$d_$1Q3;this.$WW=this.$$d_$1Um;this.$Lb=false};Microsoft.Crm.Client.Application.PhoneApp.StartPage.get_instance=function(){return Microsoft.Crm.Client.Application.PhoneApp.StartPage.$7};Microsoft.Crm.Client.Application.PhoneApp.StartPage.prototype={$1Ri:null,$1Rj:null,$WW:null,$Lb:false,$8w:false,$OX:false,$YJ:false,get_palEnabled:function(){return $a.UserAgent.getInstance().get_$4k()},get_hideCommandBar:function(){return $a.NativeBridge.get_$4().$2p.get_$5K().get_$1s4()},addNativeBridgeOnReadyOrNow:function(a){this.get_palEnabled()&&$a.NativeBridge.get_$4().add_$1Rt(a)},getPhotoFromGallery:function(b,c,a){var d=$a.NativeBridge.get_$4().$HE.get_$1Q1();if(!d.get_$1IR()){a(0);return}var e=this,f=this;$a.NativeBridge.get_$4().$HE.$1JQ(false,b,function(a){window.setTimeout(function(){var b={};b.FileName=a.get_$Lt();b.FileContents=a.get_$Ze();b.MimeType=a.get_$QK();c(b)},0)},function(b){window.setTimeout(function(){var e="MultimediaDispatcherErrorDomain",f="ImagePickerControllerError",c=b[$a.ErrorConverter.$ZU],d;if(c.startsWith(e))d=c.substr(e.length);else if(c.startsWith(f))d=c.substr(f.length);else{a(1);return}var g=Number.parseInvariant(d);if(g===1)a(3);else a(g===5?2:1)},0)})},saveAttachment:function(b,d,f,e,c,g){var a=new $a.$1x;a.set_$Ze(b);a.set_$Lt(d);a.set_$QK(f);a.set_$6U(e);var h=this;$a.NativeBridge.get_$4().$Or.$1VZ(a,function(b){a.set_$LU(b);c(a)},g)},openAttachment:function(a,b){$a.NativeBridge.get_$4().$BI.$1SP(a.get_$LU(),a.get_$Lt(),a.get_$QK(),b)},setCommandBar:function(c,a,b){this.get_palEnabled()&&$a.NativeBridge.get_$4().get_device().setCommandBar(c,a,b)},setMasthead:function(a){this.get_palEnabled()&&$a.NativeBridge.get_$4().get_device().setMasthead(a)},setServerVersion:function(c,b){if(this.get_palEnabled()){var a={};a.serverversion=c;a.databaseversion=b;if(!this.$YJ){var d=this;window.setTimeout(function(){d.setServerVersion(c,b)},10)}$a.NativeBridge.get_$4().$46($a.NativeBridge.get_$4().$2p,$a.NativeBridge.get_$4().get_$2l().get_$40(),new $a.$5C(a))}},signOut:function(){this.get_palEnabled()&&$a.NativeBridge.get_$4().$9V.$17x()},bootstrap:function(a){this.get_palEnabled()&&this.$1Bs(a,true,false)},start:function(g){var a=window.applicationCache;if(!$a.$0.$0(a)){this.$8w=true;var b=this;a.onupdateready=function(c){b.$Ff(c);b.$8w=false;if(a.status===4){Microsoft.Dynamics.Client.Core.Framework.$13.$1A("AppCache: SwapCache");a.swapCache();b.$XB(1,Microsoft.Dynamics.Client.Core.Framework.$6.$15("Appcache updated").$Iq(),0)}else b.$DR()};var c=this;a.onerror=function(a){c.$Ff(a);c.$8w=false;c.$DR()};var d=this;a.onnoupdate=function(a){d.$Ff(a);d.$8w=false;d.$DR()};var e=this;a.oncached=function(a){e.$Ff(a);e.$8w=false;e.$DR()};try{Microsoft.Dynamics.Client.Core.Framework.$13.$1A("AppCache: Start Update");a.update()}catch(i){Microsoft.Dynamics.Client.Core.Framework.$13.$1A("AppCache: Update threw exception");this.$8w=false;this.$DR()}}var h=this.$1pO(g),f="liveid"in h;if(!this.get_palEnabled())if(f)$a.Trace.logError(97,"Unsupported client server configuration");else this.$15y();else this.$1Bs(g,f,true)},$Ff:function(c){var a="ApplicationCacheObjectWasNull",b=window.applicationCache;if(!$a.$0.$0(b))switch(b.status){case 2:a="Checking";break;case 3:a="Downloading";break;case 1:a="Idle";break;case 5:a="Obsolete";break;case 0:a="Uncached";break;case 4:a="UpdateReady"}try{Microsoft.Dynamics.Client.Core.Framework.$13.$1A(String.format("AppCache Event {0}. Status : {1}. Details : {2}",c.type,a,JSON.stringify(c)))}catch(d){}},$1Bs:function(b,c,a){$a.Trace.set_$2L(false);$a.$12.set_$Gm(0);$a.$1T.set_$1Lv(false);Microsoft.Crm.Client.Core.Framework.AuthenticationManager.set_defaultInstance(Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$Io(b,c,a));this.addNativeBridgeOnReadyOrNow(a?this.$1Ri:this.$1Rj)},$1pO:function(f){var e=$a.$2E.$Qy(f),c={},a=e;for(var b in a){var d={key:b,value:a[b]};c[d.key.toLowerCase()]=d.value.toLowerCase()}return c},$225:function(){if($a.NativeBridge.get_$4().get_$2l().get_$1Zm()===1){var a=Microsoft.Dynamics.Client.Core.Framework.$6.$15("");a.$m=Microsoft.Dynamics.Client.Core.Framework.$H.$13f;this.$XB(0,a.$Iq(),0);return}var b=this;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().add_$EU(function(c,d){var a=d;Microsoft.Dynamics.Client.Core.Framework.$13.$1A("StartPage OnAuthenticated: FirstPageLoad. Arguments: "+JSON.stringify(a));var e=c;if(!a.$JB&&e.get_$rV()===1)b.$15y();else Microsoft.Dynamics.Client.Core.Framework.$13.$1A("StartPage OnAuthenticated: FirstPageLoad. Could not redirect because IsError is true OR AuthManager.Status is != Ready")});this.$1Q3()},$1Q3:function(){var b=this;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().add_$EU(function(c,d){var a=d;Microsoft.Dynamics.Client.Core.Framework.$13.$1A("StartPage OnAuthenticated: SubsequentPageLoad. Arguments: "+JSON.stringify(a));var e=c;if(a.$JB)b.$XB(0,a.$FK.$Iq(),a.$FK.$Tr);else e.get_$rV()===1&&$a.NativeBridge.get_$4().$2p.$1DJ()});$a.NativeBridge.get_$4().add_$1S0(this.$$d_$1Rk);$a.NativeBridge.get_$4().add_$1Rp(this.$$d_$1Rh);Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().$u0();var a=this;window.setTimeout(function(){a.$OX=true;a.$DR()},0)},$1Rk:function(){if(!this.$Lb)return;Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().$17f();Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().add_$EU(this.$WW)},$1Um:function(){Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().remove_$EU(this.$WW);this.$Lb=false},$1Rh:function(){this.$Lb=true},$DR:function(){if(this.$OX&&!this.$8w){$a.NativeBridge.get_$4().$gO(null);this.$YJ=true}},$XB:function(a,b,c){if(c===1)$a.NativeBridge.get_$4().$9V.$fU(a,b);else $a.NativeBridge.get_$4().$2p.$1DH(a,b)},$15y:function(){if(this.$8w){Microsoft.Dynamics.Client.Core.Framework.$13.$1wK("Delaying RedirectToDefault since the AppCache update is still pending");window.setTimeout(this.$$d_$15y,100);return}var a=Microsoft.Crm.Client.Core.Framework.AuthenticationManager.get_defaultInstance().$52,b=a+"/m/default.aspx?client_type=MobileClient&HideMasthead=true";Microsoft.Dynamics.Client.Core.Framework.$13.$1A("Do RedirectToDefaultPage");var c=this;window.setTimeout(function(){window.location.replace(b)},100)}};Microsoft.Crm.Client.Application.PhoneApp.StartPage.registerClass("Microsoft.Crm.Client.Application.PhoneApp.StartPage");Microsoft.Crm.Client.Application.PhoneApp.StartPage.$7=new Microsoft.Crm.Client.Application.PhoneApp.StartPage