Mscrm.Form_onload=function(){Xrm.Page.ui.getFormType()!=4&&Mscrm.allocationtype_onchange();if(Xrm.Page.context.client.getClient()!=Xrm.ClientNames.mobile){var remainingterms=Xrm.Page.ui.controls.get("remainingterms");if(!IsNull(remainingterms)){remainingterms.set_disabled(1);remainingterms.set_lockIcon()}var header_remainingterms=Xrm.Page.ui.controls.get("header_remainingterms");if(!IsNull(header_remainingterms)){header_remainingterms.set_disabled(1);header_remainingterms.set_lockIcon()}}};Mscrm.allocationtype_onchange=function(){var allocationtypecode=Xrm.Page.data.entity.attributes.get("allocationtypecode"),decreaseRemainingOn=Xrm.Page.data.entity.attributes.get("decreaseremainingon"),options=Xrm.Page.getAttribute("decreaseremainingon").getOptions(),decreaseControl=Xrm.Page.ui.controls.get("decreaseremainingon");if(!IsNull(allocationtypecode.getValue()))if(1==allocationtypecode.getValue()){decreaseRemainingOn.setValue(options[0].value);decreaseControl.setDisabled(true)}else decreaseControl.setDisabled(false)};Mscrm.customerid_onchange=function(){var relationshipId="",oRelatedLookup=Xrm.Page.data.entity.attributes.get("customerid");if(!IsNull(oRelatedLookup)&&!IsNull(oRelatedLookup.getValue())){var relatedItem=oRelatedLookup.getValue()[0];if(relatedItem.type===Mscrm.EntityTypeCode.Account.toString())relationshipId="contact_customer_accounts";else if(relatedItem.type===Mscrm.EntityTypeCode.Contact.toString())relationshipId="contact_customer_contacts";var oLookup=Mscrm.FormControlInputBehavior.GetBehavior("lookup_grid_EntitlementContacts_i");if(oLookup!=null){oLookup.set_filterRelationshipId(relationshipId);oLookup.set_dependantAttributeName("entitlement.customerid");oLookup.set_dependantAttributeType(relatedItem.type.toString());oLookup.AddParam("AllowFilterOff","0")}}}