Type.registerNamespace("Mscrm");Mscrm.OpportunityMainSystemLibraryWebResource=function(){};Mscrm.OpportunityMainSystemLibraryWebResource.pricelevelid_setadditionalparams=function(context){var $v_0=Xrm.Page.data.entity.attributes.get("transactioncurrencyid"),$v_1="",$v_2=null;if(!Mscrm.InternalUtilities.JSTypes.isNull($v_0))$v_2=$v_0.getValue();if(!Mscrm.InternalUtilities.JSTypes.isNull($v_2))$v_1=$v_2[0].id;var $v_3='<filter type="and"><condition attribute="transactioncurrencyid" operator="like" value="';$v_3+=CrmEncodeDecode.CrmXmlAttributeEncode($v_1);$v_3+='"/></filter>';Xrm.Page.ui.controls.get("pricelevelid").addCustomFilter($v_3)};Mscrm.OpportunityMainSystemLibraryWebResource.form_onload=function(){var $v_0=Xrm.Page.ui.getFormType();if($v_0!==3&&$v_0!==4)Mscrm.OpportunityMainSystemLibraryWebResource.setValueAndControlsOfEstimatedValue();else Mscrm.OpportunityMainSystemLibraryWebResource.enableOrDisableAttributesControl("estimatedvalue",true)};Mscrm.OpportunityMainSystemLibraryWebResource.isrevenuesystemcalculated_onchange=function(){Mscrm.OpportunityMainSystemLibraryWebResource.setValueAndControlsOfEstimatedValue()};Mscrm.OpportunityMainSystemLibraryWebResource.transactioncurrencyid_onchange=function(){!Mscrm.InternalUtilities.JSTypes.isNull(Xrm.Page.ui.controls.get("pricelevelid"))&&Xrm.Page.data.entity.attributes.get("pricelevelid").setValue([])};Mscrm.OpportunityMainSystemLibraryWebResource.setValueAndControlsOfEstimatedValue=function(){Mscrm.OpportunityMainSystemLibraryWebResource.setEstimatedValue("estimatedvalue");Mscrm.OpportunityMainSystemLibraryWebResource.enableOrDisableEstimatedValueControl("estimatedvalue");Mscrm.OpportunityMainSystemLibraryWebResource.enableOrDisableEstimatedValueControl("header_estimatedvalue")};Mscrm.OpportunityMainSystemLibraryWebResource.setEstimatedValue=function(attributeName){var $v_0=Xrm.Page.data.entity.attributes.get("isrevenuesystemcalculated").getValue();if($v_0){var $v_1=Xrm.Page.data.entity.attributes.get(attributeName);if(!Mscrm.InternalUtilities.JSTypes.isNull($v_1)){var $v_2=Xrm.Page.data.entity.attributes.get("totalamount").getValue();$v_1.setValue($v_2)}}};Mscrm.OpportunityMainSystemLibraryWebResource.enableOrDisableEstimatedValueControl=function(controlName){var $v_0=Xrm.Page.data.entity.attributes.get("isrevenuesystemcalculated").getValue(),$v_1=Xrm.Page.ui.controls.get(controlName);!Mscrm.InternalUtilities.JSTypes.isNull($v_1)&&$v_1.setDisabled($v_0)};Mscrm.OpportunityMainSystemLibraryWebResource.enableOrDisableAttributesControl=function(attributeName,disable){var $v_0=Xrm.Page.data.entity.attributes.get(attributeName),$v_1=$v_0.controls;if(!Mscrm.InternalUtilities.JSTypes.isNull($v_1))for(var $v_2=$v_1.getLength(),$v_3=0;$v_3<$v_2;$v_3++){var $v_4=$v_1.get($v_3);!Mscrm.InternalUtilities.JSTypes.isNull($v_4)&&$v_4.setDisabled(disable)}};Mscrm.OpportunityMainSystemLibraryWebResource.registerClass("Mscrm.OpportunityMainSystemLibraryWebResource");Type.registerNamespace("Mscrm");Mscrm.pricelevelid_setadditionalparams=Mscrm.OpportunityMainSystemLibraryWebResource.pricelevelid_setadditionalparams;Mscrm.Form_onload=Mscrm.OpportunityMainSystemLibraryWebResource.form_onload;Mscrm.isrevenuesystemcalculated_onchange=Mscrm.OpportunityMainSystemLibraryWebResource.isrevenuesystemcalculated_onchange;Mscrm.transactioncurrencyid_onchange=Mscrm.OpportunityMainSystemLibraryWebResource.transactioncurrencyid_onchange;SetValueAndControlsOfEstimatedValue=Mscrm.OpportunityMainSystemLibraryWebResource.setValueAndControlsOfEstimatedValue;SetEstimatedValue=Mscrm.OpportunityMainSystemLibraryWebResource.setEstimatedValue;EnableOrDisableEstimatedValueControl=Mscrm.OpportunityMainSystemLibraryWebResource.enableOrDisableEstimatedValueControl