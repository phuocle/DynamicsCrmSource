Type.registerNamespace("Mscrm");Mscrm.FormatArguments=function(){Mscrm.FormatArguments.initializeBase(this)};Mscrm.FormatArguments.prototype={type:null,inputValue:null,valueIndex:0,formattedValue:null,returnValue:null,sEntry:null};Mscrm.Result=function(){};Mscrm.Result.prototype={isValid:false,sFormattedInput:null,sUnderlyingValue:null,iNext:0,iPrevious:0};Mscrm.EditableSelectControl=function(element){this.$$d_handleClick=Function.createDelegate(this,this.handleClick);this.$$d_$i_3=Function.createDelegate(this,this.$i_3);this.$$d_on=Function.createDelegate(this,this.on);this.$$d_onArrowImageMouseOut=Function.createDelegate(this,this.onArrowImageMouseOut);this.$$d_onArrowImageMouseOver=Function.createDelegate(this,this.onArrowImageMouseOver);this.$$d_$e_3=Function.createDelegate(this,this.$e_3);this.$$d_$g_3=Function.createDelegate(this,this.$g_3);this.$$d_$h_3=Function.createDelegate(this,this.$h_3);this.$$d_$f_3=Function.createDelegate(this,this.$f_3);this.$$d_$d_3=Function.createDelegate(this,this.$d_3);this.$$d_onBlur=Function.createDelegate(this,this.onBlur);this.$$d_$b_3=Function.createDelegate(this,this.$b_3);this.$$d_$c_3=Function.createDelegate(this,this.$c_3);Mscrm.EditableSelectControl.initializeBase(this,[element])};Mscrm.EditableSelectControl.optimizeTimeForMobile=function(dialog){var $v_0=302,$v_1=402,$v_2=44,$v_3=dialog.get_container(),$v_4=$P_CRM(window).width()/2-$v_0/2,$v_5=$P_CRM(window).height()/2-$v_1/2;if($v_5<$v_2)$v_5=$v_2;$v_4=$v_4<0?0:$v_4;$v_5=$v_5<0?0:$v_5;$v_3.style.position="absolute";$v_3.style.top=$v_5.toString()+"px";$v_3.style.left=$v_4.toString()+"px";$v_3.style.height="400px";$v_3.style.width="300px";var $v_6=XUI.Html.DomUtils.GetFirstChild($v_3);$v_6.style.height="400px";$v_6.style.width="300px";if($P_CRM("body").hasClass("androidStatic")){$v_5=$P_CRM(window).scrollTop();$v_3.style.top=$v_5.toString()+"px";$P_CRM("body div.ms-crm-Floating-Div").height($P_CRM("#crmForm").height()+$v_2)}};Mscrm.EditableSelectControl.prototype={$N_3:121,$5_3:false,$C_3:false,$B_3:false,$H_3:false,$G_3:false,$A_3:"",$1_3:null,$8_3:null,$0_3:null,$2_3:null,$4_3:null,$D_3:null,get_$T_3:function(){return this.get_$3_3().length},get_$I_3:function(){var $v_0=this.get_$M_3()[0],$v_1=XUI.Html.DomUtils.GetFirstChild($v_0.getElementsByTagName("td")[1]);return this.$0_3.clientWidth+$v_1.clientWidth},add_returnValueChange:function(value){this.get_events().addHandler("ReturnValueChange",value)},remove_returnValueChange:function(value){this.get_events().removeHandler("ReturnValueChange",value)},add_validate:function(value){this.get_events().addHandler("Validate",value)},remove_validate:function(value){this.get_events().removeHandler("Validate",value)},add_findNextSmallestEntry:function(value){this.get_events().addHandler("FindNextSmallestEntry",value)},remove_findNextSmallestEntry:function(value){this.get_events().removeHandler("FindNextSmallestEntry",value)},add_initComplete:function(value){this.get_events().addHandler("InitComplete",value)},remove_initComplete:function(value){this.get_events().removeHandler("InitComplete",value)},add_controlFocus:function(value){this.get_events().addHandler("ControlFocus",value)},remove_controlFocus:function(value){this.get_events().removeHandler("ControlFocus",value)},add_controlBlur:function(value){this.get_events().addHandler("ControlBlur",value)},remove_controlBlur:function(value){this.get_events().removeHandler("ControlBlur",value)},add_propertyChangedEvent:function(value){this.get_events().addHandler("PropertyChangedEvent",value)},remove_propertyChangedEvent:function(value){this.get_events().removeHandler("PropertyChangedEvent",value)},markAsTimeControl:function(){this.$0_3.setAttribute("timeControl","true")},get_isInitializedProperty:function(){return this.$H_3},get_allowValueEditProperty:function(){return this.$5_3},set_allowValueEditProperty:function(value){this.$5_3=value;document.readyState==="complete"&&this.$H_3&&this.fireControlEvent("PropertyChangedEvent",new Sys.PropertyChangedEventArgs("allowValueEditProperty"));return value},get_returnValueProperty:function(){return this.$0_3.getAttribute("returnValue")},get_required:function(){return 0},get_allowKeyDownPropagation:function(){return this.$G_3},set_allowKeyDownPropagation:function(value){this.$G_3=value;return value},initialize:function(){Mscrm.CrmUIControl.prototype.initialize.call(this);$addHandler(this.get_element(),"mouseup",this.$$d_$c_3);$addHandler(this.get_element(),"keydown",this.$$d_$b_3);$addHandler(this.get_element(),"blur",this.$$d_onBlur);$addHandler(this.get_element(),"focus",this.$$d_$d_3);var $v_0=false;this.$5_3=Mscrm.Utilities.parseBoolean(this.get_element().getAttribute("allowValueEdit").toString());try{var $v_1=this.get_element().parentNode.parentNode.parentNode.parentNode.parentNode;if($v_1.className==="ms-crm-DateTime"){var $v_2=$v_1.getAttribute("initialDisableInit");if(!IsNull($v_2)&&$v_2.toLowerCase()==="true")$v_0=true}}catch($$e_3){}this.$A_3=CrmEncodeDecode.CrmHtmlAttributeEncode(this.get_element().getAttribute("defaultbgcolor"));if(IsNull(this.$A_3))this.$A_3="";this.$D_3=CrmEncodeDecode.CrmHtmlAttributeEncode(this.get_element().getAttribute("dropdownfontsize"));if(IsNull(this.$D_3))this.$D_3="11";if($v_0)return;this.$k_3();this.set_allowValueEditProperty(this.$5_3);this.get_element().disabled&&this.disable();this.$H_3=true;this.set_allowValueEditProperty(this.$5_3);!IsNull(this.get_element().getAttribute("setdisabled"))&&this.$L_3(true);this.fireControlEvent("InitComplete",new Sys.EventArgs);Mscrm.FormControlInputBehavior.createSlugSupportIfNeeded(this.get_element())},dispose:function(){if(this.get_isDisposed())return;if(!IsNull(this.get_element())){$removeHandler(this.get_element(),"mouseup",this.$$d_$c_3);$removeHandler(this.get_element(),"keydown",this.$$d_$b_3);$removeHandler(this.get_element(),"blur",this.$$d_onBlur);$removeHandler(this.get_element(),"focus",this.$$d_$d_3);try{if(!IsNull(this.$0_3)){$clearHandlers(this.$0_3);this.$0_3=null}if(!IsNull(this.$4_3)){$clearHandlers(this.$4_3);this.$4_3=null}if(!IsNull(this.$1_3)){$clearHandlers(this.$1_3);this.$1_3=null}if(!IsNull(this.$8_3)){$clearHandlers(this.$8_3);this.$8_3=null}if(!IsNull(this.$2_3)){this.$2_3.dispose();this.$2_3=null}}catch($$e_0){}}Mscrm.CrmUIControl.prototype.dispose.call(this)},get_$M_3:function(){return this.$8_3.getElementsByTagName("tr")},get_$3_3:function(){return this.$1_3.getElementsByTagName("tr")},$k_3:function(){this.$8_3=XUI.Html.DomUtils.GetChildElementAt(this.get_element(),0);this.$1_3=XUI.Html.DomUtils.GetChildElementAt(this.get_element(),1);var $v_0=this.get_$M_3()[0];this.$0_3=XUI.Html.DomUtils.GetFirstChild($v_0.getElementsByTagName("td")[0]);var $v_1=this.get_element().getAttribute("changeHandler");!isNullOrEmptyString($v_1)&&$addHandler(this.$0_3,"change",this.$$d_$f_3);$addHandler(this.$0_3,"selectstart",this.$$d_$h_3);$addHandler(this.$0_3,"mousedown",this.$$d_$h_3);$addHandler(this.$0_3,"focus",this.$$d_$g_3);$addHandler(this.$0_3,"blur",this.$$d_$e_3);var $v_2=this.get_element().getAttribute("value");this.$0_3.setAttribute("lastValue",$v_2);this.$0_3.setAttribute("returnValue",$v_2);var $v_3=this.$a_3($v_2);if(this.$6_3($v_3)){this.$0_3.value=this.$J_3($v_3);this.$0_3.setAttribute("returnValue",this.getValue($v_3))}else{this.$0_3.value=$v_2;this.$0_3.setAttribute("returnValue",$v_2)}this.$0_3.setAttribute("defaultValue",this.$0_3.getAttribute("returnValue"));this.$0_3.setAttribute("oldDisplayValue",this.$0_3.value);this.$0_3.setAttribute("rowNum",this.getValueIndex(this.$0_3.value));this.$0_3.setAttribute("req",this.get_required());$addHandler(this.$0_3,"blur",this.$$d_onBlur);$addHandler(this.$0_3,"focus",this.$$d_$d_3);var $v_4=window.LOCID_SELECTBOX_BUTTON_ALT,$v_5=this.get_element().getAttribute("ButtonTitle");if(!IsNull($v_5))$v_4=$v_5;this.$4_3=XUI.Html.DomUtils.GetFirstChild($v_0.getElementsByTagName("td")[1]);this.$4_3.alt=$v_4;this.$4_3.title=this.$4_3.alt;$addHandler(this.$4_3,"mouseover",this.$$d_onArrowImageMouseOver);$addHandler(this.$4_3,"mouseout",this.$$d_onArrowImageMouseOut);!IsNull(this.$1_3.getAttribute("bCached"))&&this.$1_3.removeAttribute("bCached")},$a_3:function($p0){var $v_0=0,$v_1=this.get_$3_3().length;while($v_0<$v_1){if(this.getValue($v_0)===$p0)break;$v_0++}if($v_0>=$v_1)$v_0=!$p0.length?0:Mscrm.EditableSelectControl.$7;return $v_0},$h_3:function($p0){var $v_0=this.get_element().getAttribute("allowValueEdit");if(!IsNull($v_0)&&$v_0.toUpperCase()==="TRUE")this.$1_3.style.MozUserSelect="";else{this.$1_3.style.MozUserSelect="none";$p0.preventDefault()}},$f_3:function($p0){var $v_0=$p0.target;if($v_0.getAttribute("returnValue")!==$v_0.getAttribute("lastValue")){var $v_1=this.get_element().getAttribute("changeHandler");eval($v_1)}},$g_3:function($p0){var $v_0=this.$8_3.parentNode,$v_1=$v_0.getAttribute("allowValueEdit");if(!$v_1)this.$0_3.style.backgroundColor="#abc0e7"},$e_3:function($p0){this.$0_3.style.backgroundColor=this.$A_3},onArrowImageMouseOver:function(eventObject){var $v_0=eventObject.target;if(!this.get_element().disabled){$v_0.src="/_imgs/selectOn.gif";!Mscrm.Utilities.get_isLeftToRight()&&Mscrm.Utilities.flipElementHorizontally($v_0)}},onArrowImageMouseOut:function(eventObject){var $v_0=eventObject.target;if(!this.get_element().disabled)$v_0.src="/_imgs/selectOff.gif"},$j_3:function(){if(IsNull(this.$2_3)||this.$2_3.get_width()===this.get_$I_3())return;this.$2_3.set_width(this.get_$I_3());this.$2_3.refresh()},$P_3:function($p0){var $v_0=new Mscrm.Result,$v_1=parseInt(this.$0_3.getAttribute("rowNum"));if(this.$6_3($v_1)){$v_0.iPrevious=$v_1-1;$v_0.iNext=$v_1+1}else{var $v_3=new Mscrm.FormatArguments;$v_3.inputValue=$p0;this.fireControlEvent("FindNextSmallestEntry",$v_3);if(!IsNull($v_3.sEntry)){var $v_4=this.getValueIndex($v_3.sEntry);$v_0.iPrevious=$v_4;$v_0.iNext=$v_4+1}else{$v_0.iPrevious=0;$v_0.iNext=1}}var $v_2=this.get_$3_3().length;if($v_0.iPrevious<0){$v_0.iPrevious=0;$v_0.iNext=$v_2>1?1:0}else if($v_0.iNext>=$v_2){$v_0.iNext=$v_2-1;$v_0.iPrevious=$v_2>1?$v_0.iNext-1:$v_0.iNext}return $v_0},$d_3:function($p0){var $v_0=new Mscrm.FormatArguments;this.fireControlEvent("ControlFocus",$v_0)},onBlur:function(eventObject){if(this.$B_3)return;this.$B_3=true;if(this.$5_3)this.$0_3.value!==this.$0_3.getAttribute("oldDisplayValue")&&this.validateValue(eventObject);this.$B_3=false},validateValue:function(eventObject){var $v_0=this.$S_3(eventObject,this.$0_3.value);if($v_0.isValid){this.$0_3.value=$v_0.sFormattedInput;this.$0_3.setAttribute("returnValue",$v_0.sUnderlyingValue||Mscrm.Utilities.emptyString);this.$0_3.setAttribute("oldDisplayValue",this.$0_3.value);this.fireReturnValueChange();var $v_1=this.getValueIndex(this.$0_3.getAttribute("returnValue"));this.$0_3.setAttribute("rowNum",$v_1);var $v_2=new Mscrm.FormatArguments;this.fireControlEvent("ControlBlur",$v_2)}else{this.$0_3.value=this.$0_3.getAttribute("oldDisplayValue");if(!this.$0_3.disabled&&!this.$R_3(this.$0_3))try{this.$0_3.focus()}catch($$e_4){}}},$R_3:function($p0){if(IsNull($p0))return true;while(!IsNull($p0)&&!IsNull($p0.tagName)&&$p0.tagName.toLowerCase()!=="body"){if(XUI.Html.GetComputedStyle($p0,"display")==="none"||XUI.Html.GetComputedStyle($p0,"visibility")==="hidden")return true;$p0=$p0.parentNode}return false},$S_3:function($p0,$p1){var $v_0=this.$K_3($p1),$v_1,$v_2=false;if(!IsNull($p0)&&$p0.type==="keydown"){$v_2=true;this.$B_3=true}var $v_3=new Mscrm.FormatArguments;$v_3.inputValue=this.$0_3.value;$v_3.valueIndex=$v_0;$v_3.type="Validate";this.fireControlEvent("Validate",$v_3);if(IsNull($v_3.returnValue))$v_1=this.$X_3($p1,$v_0);else if(Mscrm.Utilities.parseBoolean($v_3.returnValue.toString())){$v_0=this.$K_3($v_3.formattedValue);$v_1=this.$X_3($v_3.formattedValue,$v_0)}else{$v_1=new Mscrm.Result;$v_1.isValid=false}if($v_2)this.$B_3=false;return $v_1},$X_3:function($p0,$p1){var $v_0=new Mscrm.Result;$v_0.isValid=true;$v_0.sFormattedInput=$p0;if($p1===Mscrm.EditableSelectControl.$7){$p1=this.getValueIndex($v_0.sFormattedInput);if($p1===Mscrm.EditableSelectControl.$7)$v_0.sUnderlyingValue=$p0;else{$v_0.sFormattedInput=this.$J_3($p1);$v_0.sUnderlyingValue=this.getValue($p1)}}else $v_0.sUnderlyingValue=this.getValue($p1);return $v_0},$J_3:function($p0){var $v_0=this.get_$3_3();if($p0<0||$p0>=$v_0.length)return null;var $v_1=$v_0[$p0].getElementsByTagName("td")[0];return XUI.Html.GetText($v_1)},getValue:function(rowNumber){var $v_0=this.get_$3_3();if(rowNumber<0||rowNumber>=$v_0.length)return null;var $v_1=$v_0[rowNumber];return $v_1.getElementsByTagName("td")[0].getAttribute("val")},$K_3:function($p0){if(!IsNull($p0)&&!$p0.length)return Mscrm.EditableSelectControl.$F;for(var $v_0=this.get_$T_3(),$v_1=0;$v_1<$v_0;$v_1++)if(this.$J_3($v_1)===$p0)return $v_1;return Mscrm.EditableSelectControl.$7},getValueIndex:function(value){if(!IsNull(value)&&!value.length)return Mscrm.EditableSelectControl.$F;for(var $v_0=this.get_$T_3(),$v_1=0;$v_1<$v_0;$v_1++)if(this.getValue($v_1)===value)return $v_1;return Mscrm.EditableSelectControl.$7},setValue:function(value,returnValue,doNotFire){var $v_0=this.getValueIndex(value);if(this.$6_3($v_0))this.setValues($v_0,doNotFire);else{this.$0_3.value=value;this.$0_3.setAttribute("oldDisplayValue",this.$0_3.value);if(!IsNull(returnValue))this.$0_3.setAttribute("returnValue",returnValue);else this.$0_3.setAttribute("returnValue",value);this.$0_3.setAttribute("rowNum",$v_0);(IsNull(doNotFire)||!doNotFire)&&this.fireReturnValueChange()}},fireReturnValueChange:function(){this.fireControlEvent("PropertyChangedEvent",new Sys.PropertyChangedEventArgs("returnValueProperty"));var $v_0=new Mscrm.FormatArguments;$v_0.inputValue=this.$0_3.getAttribute("returnValue");$v_0.type="returnvaluechange";this.fireControlEvent("ReturnValueChange",$v_0)},$Q_3:function(){if(this.$1_3.getAttribute("Cached")==="true"){this.$j_3();return}this.$1_3=this.$1_3.cloneNode(true);this.$1_3.setAttribute("Cached","true");var $v_0=this.get_$3_3().length;if($v_0<=6)this.$N_3=$v_0*17+2;var $v_1="";if(!Mscrm.Utilities.get_isLeftToRight())$v_1="rtl";var $v_2=this.get_element().ownerDocument.createElement("COLGROUP"),$v_3=this.get_element().ownerDocument.createElement("COL");$v_3.style.fontSize=this.$D_3+"px";$v_3.className="select_htc_col";$v_2.appendChild($v_3);var $v_4=XUI.Html.DomUtils.GetFirstChild(this.$1_3);this.$1_3.insertBefore($v_2,$v_4);this.$1_3.style.width="100%";this.$2_3=this.$Z_3(this.get_element(),this.$1_3,this.get_$I_3(),this.$N_3,"selectPopup",this.get_element().ownerDocument,$v_1);$addHandler(this.$1_3,"mouseover",this.$$d_on);$addHandler(this.$1_3,"selectstart",this.$$d_$i_3);this.$1_3.style.MozUserSelect="none";$addHandler(this.$1_3,"mousedown",this.$$d_$i_3);$addHandler(this.$1_3,"click",this.$$d_handleClick)},$i_3:function($p0){$p0.preventDefault()},$c_3:function($p0){this.setOpen();if(this.$0_3.disabled||this.$5_3&&$p0.target.tagName.toUpperCase()==="INPUT")return;!Mscrm.Utilities.isMobileRefresh()&&this.$0_3.focus();if(this.$C_3)this.$2_3.hide();else this.$W_3()},$E_3:function(){this.$C_3=false;try{this.$2_3.hide();!Mscrm.Utilities.isMobileRefresh()&&this.$0_3.focus();XUI.Html.DispatchDomEvent(this.$0_3,XUI.Html.CreateDomEvent("change"));var $v_0=this.$0_3.getAttribute("rowNum");this.$6_3($v_0)&&this.$9_3(this.$0_3,this.get_$3_3()[$v_0],false)}catch($$e_1){}},reset:function(){this.$1_3.setAttribute("Cached","false");this.$0_3.setAttribute("rowNum","0")},disableDropDownIcon:function(imageElement,disable){if(IsNull(imageElement))return;if(disable){imageElement.className="ms-crm-ReadOnly";imageElement.src="/_imgs/selectGrey.gif";!Mscrm.Utilities.get_isLeftToRight()&&Mscrm.Utilities.flipElementHorizontally(imageElement)}else{imageElement.className="ms-crm-SelectBox";imageElement.src="/_imgs/selectOff.gif";!Mscrm.Utilities.get_isLeftToRight()&&Mscrm.Utilities.flipElementHorizontally(imageElement)}imageElement.disabled=disable},$L_3:function($p0){var $v_0=this.get_$M_3()[0],$v_1=$v_0.getElementsByTagName("td")[1],$v_2=XUI.Html.DomUtils.GetFirstChild($v_1);if($p0){this.$0_3.style.borderColor="#cccccc";this.$0_3.className="ms-crm-SelectBox ms-crm-ReadOnly";$v_2.style.cursor="default"}else{this.$0_3.style.borderColor="";this.$0_3.className="ms-crm-SelectBox";$v_2.style.cursor="pointer"}this.disableDropDownIcon($v_2,$p0);this.$0_3.disabled=$p0;$v_0.disabled=$p0;this.get_element().disabled=$p0},enable:function(){this.$L_3(false)},disable:function(){this.$L_3(true)},setOpen:function(){this.$C_3=!IsNull(this.$2_3)&&this.$2_3.get_isVisible()},$W_3:function(){var $v_0=this.getValueIndex(this.$0_3.getAttribute("returnValue"));this.$0_3.setAttribute("rowNum",$v_0);this.$Q_3();this.$V_3();this.$1_3.style.display="";this.$U_3(this.$2_3,this.get_element(),this.get_element().ownerDocument);if(!Mscrm.Utilities.isMobileRefresh()){var $$t_2=this;this.$2_3.show(function($p1_0){$$t_2.$l_3($v_0)})}else this.$2_3.show(Mscrm.EditableSelectControl.optimizeTimeForMobile)},$l_3:function($p0){if($p0<=0)return;if(this.$2_3.get_dialogId()){var $v_0=$get(this.$2_3.get_dialogId());if(!IsNull($v_0)){var $v_1=XUI.Html.DomUtils.GetChildElementAt($v_0,0);if(!IsNull($v_1)){var $v_2=$P_CRM("#"+$v_0.id+" .ms-crm-inlineSelectRow").get(0);if(!IsNull($v_2)){var $v_3=$v_2.clientHeight;$v_1.scrollTop=$p0*$v_3}}}}},on:function(eventObject){var $v_0=eventObject.target.parentNode;if($v_0.tagName.toUpperCase()==="TR"){var $v_1=this.$0_3.getAttribute("rowNum");this.$9_3($v_0,this.get_$3_3()[$v_1],false);this.$0_3.setAttribute("rowNum",$v_0.rowIndex)}},handleClick:function(eventObject){var $v_0=eventObject.target.parentNode,$v_1=$v_0.rowIndex;if($v_1>=0){this.$0_3.setAttribute("rowNum",$v_1);this.setValues(this.$0_3.getAttribute("rowNum"),false);this.$E_3()}},$b_3:function($p0){this.setOpen();var $v_0=Mscrm.Utilities.getDomEventKeyCode($p0),$v_1=null;if($v_0===9){this.tabKeyAction($p0);return}switch($v_0){case 38:case 40:case 13:this.$Q_3();!this.$C_3&&this.$V_3();if($v_0!==13&&$p0.altKey){if(this.$2_3.get_isVisible())this.$E_3();else this.$W_3();return}break;default:return}var $v_2=false;if(this.$5_3)if(this.$0_3.value!==this.$0_3.getAttribute("oldDisplayValue")){$v_1=this.$S_3($p0,this.$0_3.value);if($v_1.isValid){var $v_B=$v_1.sFormattedInput,$v_C=this.$K_3($v_B);this.$0_3.setAttribute("rowNum",$v_C);this.$0_3.setAttribute("returnValue",$v_B);$v_2=true}else{var $v_D=this.$0_3.getAttribute("oldDisplayValue");this.$0_3.value=IsNull($v_D)?"":$v_D;if(!this.$0_3.disabled&&!this.$R_3(this.$0_3))try{this.$0_3.focus()}catch($$e_7){}}}switch($v_0){case 38:$v_1=this.$P_3(this.$0_3.getAttribute("returnValue"));if($v_1.iPrevious===this.$0_3.getAttribute("rowNum"))break;var $v_3,$v_4=this.get_$3_3(),$v_5=this.$0_3.getAttribute("rowNum");if(this.$6_3($v_5))$v_3=$v_4[$v_5];else $v_3=null;var $v_6=$v_4[$v_1.iPrevious];this.$9_3($v_6,$v_3,true);this.setValues($v_1.iPrevious,false);XUI.Html.DispatchDomEvent(this.$0_3,XUI.Html.CreateDomEvent("change"));break;case 40:$v_1=this.$P_3(this.$0_3.getAttribute("returnValue"));var $v_7=this.$0_3.getAttribute("rowNum");if($v_1.iNext===$v_7)break;var $v_8,$v_9=this.get_$3_3();if(this.$6_3($v_7))$v_8=$v_9[$v_7];else $v_8=null;var $v_A=$v_9[$v_1.iNext];this.$9_3($v_A,$v_8,true);this.setValues($v_1.iNext,false);XUI.Html.DispatchDomEvent(this.$0_3,XUI.Html.CreateDomEvent("change"));break;case 13:this.$E_3();if($v_2){XUI.Html.DispatchDomEvent(this.$0_3,XUI.Html.CreateDomEvent("change"));this.fireReturnValueChange()}break}!this.$G_3&&$p0.stopPropagation();$p0.preventDefault()},tabKeyAction:function(eventObject){if(this.$C_3){this.$0_3.focus();this.$E_3()}},setValues:function(index,doNotFire){var $v_0=this.get_$3_3()[index],$v_1=$v_0.getElementsByTagName("td")[0];this.$0_3.setAttribute("lastValue",this.$0_3.getAttribute("returnValue"));this.$0_3.value=XUI.Html.GetText($v_1);this.$0_3.setAttribute("oldDisplayValue",this.$0_3.value);this.$0_3.setAttribute("returnValue",$v_1.getAttribute("val"));this.$0_3.setAttribute("rowNum",index);!doNotFire&&this.fireReturnValueChange()},$9_3:function($p0,$p1,$p2){$p2&&$p0.scrollIntoView();if($p0!==$p1){if(!IsNull($p0))$p0.style.backgroundColor="#abc0e7";if(!IsNull($p1))$p1.style.backgroundColor=this.$A_3}},$V_3:function(){for(var $v_0=this.get_$3_3(),$v_1=$v_0.length,$v_3=0;$v_3<$v_1;$v_3++)this.$9_3(null,$v_0[$v_3],false);var $v_2=parseInt(this.$0_3.getAttribute("rowNum"));this.$6_3($v_2)&&this.$9_3($v_0[$v_2],null,false)},setFocus:function(){this.$0_3.focus()},$6_3:function($p0){return !IsNull($p0)&&$p0!==Mscrm.EditableSelectControl.$F&&$p0!==Mscrm.EditableSelectControl.$7},$Z_3:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $v_0=this.$O_3($p5),$v_1=$p5.createElement("div");$v_1.className="ms-crm-InlineSelectContainer";$v_0.appendChild($v_1);var $v_2=$p5.createElement("div");$v_2.style.overflowX="hidden";$v_2.style.overflowY="auto";$v_2.style.width="100%";$v_2.style.backgroundColor="#FFF";$v_2.style.direction=$p6;$v_2.appendChild($p1);var $v_3=Mscrm.Dialog.createDialog($v_1);$v_3.set_isModal(false);$v_1.style.border="1px solid #000";this.$U_3($v_3,$p0,$p5);$v_3.set_shiftVertical(true);$v_3.set_shiftHorizontal(false);$v_3.set_minHeight(Mscrm.Dialog.auto);$v_3.set_maxHeight(Mscrm.Dialog.auto);$v_3.set_isLoading(false);$v_3.set_enableShadow(false);$v_3.set_body($v_2);$v_3.set_height($p3);$v_3.set_width($p2);$v_3.set_dialogId(this.get_element().id+$p4);$v_3.set_neverGrabFocus(true);return $v_3},$U_3:function($p0,$p1,$p2){var $v_0=this.$O_3($p2),$v_1=XUI.Html.DomUtils.GetFirstChild($p1),$v_2=Mscrm.Utilities.getXYPos($v_1,!Mscrm.Utilities.get_isLeftToRight(),$v_0),$v_3=$v_2["x"],$v_4=$v_2["y"];$p0.set_top($v_4+$v_1.offsetHeight);if(!Mscrm.Utilities.get_isLeftToRight())$v_3+=$v_1.offsetWidth;$p0.set_left($v_3)},$O_3:function($p0){var $v_0=$p0.getElementById("contentDiv");if(IsNull($v_0))$v_0=$p0.body;return $v_0}};Mscrm.FormatArguments.registerClass("Mscrm.FormatArguments",Sys.EventArgs);Mscrm.Result.registerClass("Mscrm.Result");Mscrm.EditableSelectControl.registerClass("Mscrm.EditableSelectControl",Mscrm.CrmUIControl);Mscrm.EditableSelectControl.$F=-1;Mscrm.EditableSelectControl.$7=-2