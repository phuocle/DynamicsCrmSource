Type.registerNamespace("Mscrm");Mscrm.ListEdit=function($p0){this.$$d_$o_3=Function.createDelegate(this,this.$o_3);this.$$d_$p_3=Function.createDelegate(this,this.$p_3);Mscrm.ListEdit.initializeBase(this,[$p0])};Mscrm.ListEdit.editValueCallback=function(result,thisContext,oldValue){if(IsNull(result))return;var $v_0=result.sLabel,$v_1=result.iValue;thisContext.$h_3($v_0,$v_1,oldValue)};Mscrm.ListEdit.addValueCallback=function(result,thisContext,description){if(IsNull(result))return;var $v_0=result.sLabel,$v_1=result.iValue;thisContext.$f_3($v_0,$v_1,description)};Mscrm.ListEdit.prototype={$b_3:1e5,$0_3:null,$C_3:null,$V_3:null,$d_3:false,$Z_3:null,$Y_3:null,$L_3:null,$M_3:null,$K_3:null,$P_3:null,$H_3:null,$J_3:null,$R_3:null,get_selectedValue:function(){return this.$0_3.$5_0},set_selectedValue:function(value){var $v_0=IsNull(value)?value:Number.parseInvariant(value.toString());if(!this.get_disabled()){var $v_1=this.$0_3.$5_0;this.$0_3.setSelectedValue($v_0);for(var $v_2=0,$v_3=0,$v_4=this.$0_3.$2_0.length,$v_5=0;$v_5<$v_4;$v_5++){var $v_6=this.$7_3($v_5).$1_0;if($v_1===$v_6)$v_2=$v_5;else if($v_0===$v_6)$v_3=$v_5}this.$0_3.$5_0=!IsNull($v_3)?$v_0:-1;this.$n_3($v_2);this.$i_3($v_3)}return value},get_defaultValue:function(){if(!this.checkFunction("setdefault"))throw Error.create("Function not available");if(this.get_disabled())return 0;return this.$0_3.$8_0},set_defaultValue:function(value){if(!this.checkFunction("setdefault"))throw Error.create("Function not available");if(this.get_disabled())return value;this.$0_3.setDefaultValue(value);this.$r_3();return value},get_nextValue:function(){if(!this.checkFunction("addremove"))throw Error.create("Function not available");if(this.get_disabled())return 0;return this.$0_3.$D_0},set_nextValue:function(value){if(!this.checkFunction("addremove"))throw Error.create("Function not available");if(this.get_disabled())return value;this.$0_3.setNextValue(value);return value},get_prefixValue:function(){return this.$0_3.$9_0},set_prefixValue:function(value){this.$0_3.setPrefixValue(value);return value},get_count:function(){var $v_0=this.$0_3.$2_0.length;return $v_0-1},get_disabled:function(){return this.$d_3},set_disabled:function(value){this.$d_3=value;this.$X_3("move",value);this.$X_3("edit",value);this.$X_3("addremove",value);this.$X_3("sort",value);return value},get_messageXml:function(){return this.$Z_3},set_messageXml:function(value){this.$Z_3=value;return value},get_xmlData:function(){return this.$0_3.serialize()},set_xmlData:function(value){this.$0_3.deserialize(value);this.$F_3();return value},get_initialXml:function(){return this.$Y_3},set_initialXml:function(value){this.$Y_3=value;return value},get_$W_3:function(){return this.get_element().id},$X_3:function($p0,$p1){switch($p0.toLowerCase()){case "move":this.$I_3(this.$3_3("btnMoveValueUp"),$p1);this.$I_3(this.$3_3("btnMoveValueDown"),$p1);break;case "edit":this.$I_3(this.$3_3("btnEditValue"),$p1);break;case "addremove":this.$I_3(this.$3_3("btnAddValue"),$p1);this.$I_3(this.$3_3("btnRemoveValue"),$p1);break;case "sort":this.$I_3(this.$3_3("btnSortAsc"),$p1);this.$I_3(this.$3_3("btnSortDesc"),$p1);break;default:return}},isOptionSet:function(){var $v_0=this.get_element().id,$v_1=$get($v_0+"_txtItemDesc");return !IsNull($v_1)},$q_3:function($p0){var $v_0=XUI.Xml.LoadXml($p0);this.$C_3.$N_0=XUI.Xml.GetText(XUI.Xml.SelectSingleNode($v_0,"messages/deletevalue",null));this.$C_3.$Q_0=XUI.Xml.GetText(XUI.Xml.SelectSingleNode($v_0,"messages/savechangedvalue",null));this.$C_3.$S_0=XUI.Xml.GetText(XUI.Xml.SelectSingleNode($v_0,"messages/valuechangedwithoutprefix",null))},$F_3:function(){this.$l_3();this.$g_3()},$l_3:function(){for(var $v_0=new Sys.StringBuilder('<table cellpadding="2" cellspacing="0" width="100%">'),$v_1=-1,$v_2=this.get_element().id,$v_3=this.$0_3.$2_0.length,$v_4=0;$v_4<$v_3;$v_4++){var $v_5=this.$7_3($v_4),$v_6=$v_5.$1_0;if($v_5.$6_0){$v_0.append("<tr ");$v_0.append(String.format("id={0}_val{1} ",CrmEncodeDecode.CrmHtmlAttributeEncode($v_2),$v_4));$v_0.append(String.format("value={0} ",$v_6));$v_0.append(String.format("selected={0} ",0));$v_0.append(String.format('onclick="$find({0}).handleItemSelected({1})" ',CrmEncodeDecode.CrmJavaScriptEncode(this.get_$W_3()),$v_4));var $v_7='onclick="$find('+CrmEncodeDecode.CrmJavaScriptEncode(this.get_$W_3())+").handleItemSelected("+$v_4+')" ';$v_0.append($v_7);var $v_8="ondblclick=$find("+CrmEncodeDecode.CrmJavaScriptEncode(this.get_$W_3())+").editValue("+$v_6+"); ";$v_0.append($v_8);$v_0.append(String.format('><td nowrap class="hand">{0}</td></tr>',CrmEncodeDecode.CrmHtmlEncode($v_5.$4_0)))}if(this.$V_3!=="add"&&this.$0_3.$5_0===$v_6){$v_1=$v_4;this.$0_3.$5_0=$v_6}}$v_0.append("</table>");this.$3_3("divValueList").innerHTML=$v_0.toString();if(this.$V_3==="add"){this.$V_3=null;for(var $v_9=$v_3-1;$v_9>=0;$v_9--){var $v_A=this.$7_3($v_9);if($v_A.$6_0){$v_1=$v_9;this.$0_3.$5_0=$v_A.$1_0;break}}}this.$i_3($v_1);this.$T_3()},handleItemSelected:function(index){if(IsNull(index))return;if(this.$0_3.$2_0.length>index){this.set_selectedValue(this.$7_3(index).$1_0);this.$T_3()}},$7_3:function($p0){var $v_0=this.$0_3.$2_0[$p0];return $v_0},$T_3:function(){if(!this.isOptionSet())return;if(IsNull(this.$H_3))return;var $v_0=this.$0_3.getValue(this.get_selectedValue());if(IsNull($v_0)){this.$j_3();return}this.$H_3.set_dataValue($v_0.$1_0);this.$H_3.set_disabled(this.get_disabled());this.$P_3.set_dataValue($v_0.$4_0);this.$P_3.set_disabled(this.get_disabled());this.$J_3.set_dataValue($v_0.$E_0);this.$J_3.set_disabled(this.get_disabled())},$j_3:function(){if(IsNull(this.$H_3))return;this.$H_3.set_dataValue(null);this.$H_3.set_disabled(true);this.$P_3.set_dataValue(null);this.$P_3.set_disabled(true);this.$J_3.set_dataValue(null);this.$J_3.set_disabled(true)},$r_3:function(){if(this.checkFunction("setdefault")&&this.get_hasDefaultValue()&&!this.get_disabled())for(var $v_0=this.$3_3("selDefaultValue"),$v_1=$v_0.options,$v_2=$v_1.length,$v_3=0;$v_3<$v_2;$v_3++)if(Number.parseInvariant($v_1[$v_3].toString())===this.$0_3.$8_0)$v_0.selectedIndex=$v_3},$g_3:function(){if(this.checkFunction("setdefault")&&this.get_hasDefaultValue()){var $v_0=new Select(false,false),$v_1=this.get_element().id;$v_0.ID=$v_1+"_selDefaultValue";$v_0.Selected=this.$0_3.$8_0.toString();$v_0.OnChange=String.format("$find({0}).set_defaultValue(Number(this.options[this.selectedIndex].value));",CrmEncodeDecode.CrmJavaScriptEncode(this.get_$W_3()));for(var $v_2=this.$0_3.$2_0.length,$v_3=[],$v_4=[],$v_5,$v_9=0;$v_9<$v_2;$v_9++){$v_5=this.$7_3($v_9);Array.add(!$v_5.$6_0?$v_3:$v_4,$v_5)}var $v_6=$v_3.concat($v_4),$$t_E=this,$v_7=function($p1_0,$p1_1,$p1_2){var $v_A=$p1_0;$v_0.AddOption($v_A.$4_0,$v_A.$1_0.toString())};Array.forEach($v_6,$v_7);var $v_8=this.$3_3("selDefaultValue");XUI.Html.SetOuterHTML($v_8,$v_0.Render());$v_8.disabled=this.get_disabled()}},createDefaultControl:function(id,defaultValue){var $v_0=new Select(false,false);$v_0.ID=id.toString();$v_0.Selected=this.$0_3.$8_0;var $v_1=-1,$v_2=this.$0_3.$2_0.length;if(!IsNull(defaultValue))$v_1=Number.parseInvariant(defaultValue);for(var $v_3,$v_4=0;$v_4<$v_2;$v_4++){$v_3=this.$7_3($v_4);if(!$v_3.$6_0){$v_0.AddOption($v_3.$4_0,$v_3.$1_0.toString());if($v_1===$v_3.$1_0)$v_0.Selected=$v_1.toString()}}for(var $v_5=0;$v_5<$v_2;$v_5++){$v_3=this.$7_3($v_5);if($v_3.$6_0){$v_0.AddOption($v_3.$4_0,$v_3.$1_0.toString());if($v_1===$v_3.$1_0)$v_0.Selected=$v_1.toString()}}return $v_0.Render()},$i_3:function($p0){this.$k_3($p0,"#c4ddff")},$n_3:function($p0){this.$k_3($p0,"#ffffff")},$k_3:function($p0,$p1){if(!IsNull($p0)){var $v_0=this.$3_3("val"+$p0);if(IsNull($v_0))return;$v_0.style.backgroundColor=$p1;$v_0.selected=$p1!=="#ffffff"}},$3_3:function($p0){return $get(String.format("{0}_{1}",this.get_element().id,$p0))},$I_3:function($p0,$p1){$p0.disabled=$p1;var $v_0=XUI.Xml.DomUtils.GetFirstChild($p0);if(!IsNull($v_0)&&$v_0.tagName==="IMG")$v_0.className=$p1?"ms-crm-Picklist-MenuButton-Disabled":"ms-crm-Picklist-MenuButton"},checkFunction:function(functionName){switch(functionName.toLowerCase()){case "move":return !IsNull(this.$3_3("btnMoveValueUp"))&&!IsNull(this.$3_3("btnMoveValueDown"));case "edit":return !IsNull(this.$3_3("btnEditValue"));case "addremove":return !IsNull(this.$3_3("btnAddValue"))&&!IsNull(this.$3_3("btnRemoveValue"));case "setdefault":return !IsNull(this.$3_3("selDefaultValue"));case "sort":return !IsNull(this.$3_3("btnSortAsc"))&&!IsNull(this.$3_3("btnSortDesc"));default:return false}},get_hasDefaultValue:function(){return this.$0_3.$B_0},moveValueUp:function(){var $v_0,$v_1=arguments.length;if(!this.checkFunction("move"))throw Error.create("Function not available");if(this.get_disabled())return;if(!$v_1)$v_0=this.$0_3.$5_0;else if($v_1===1&&Number.isInstanceOfType(arguments[0]))$v_0=arguments[0];else throw Error.create("Invalid argument");this.$0_3.moveValueUp($v_0)&&this.$F_3()},moveValueDown:function(){var $v_0;if(!this.checkFunction("move"))throw Error.create("Function not available");if(this.get_disabled())return;if(!arguments.length)$v_0=this.$0_3.$5_0;else if(arguments.length===1&&Number.isInstanceOfType(arguments[0]))$v_0=arguments[0];else throw Error.create("Invalid argument");this.$0_3.moveValueDown($v_0)&&this.$F_3()},editValue:function(){var $v_0,$v_1,$v_2=null;if(this.isOptionSet())return;if(!this.checkFunction("edit"))throw Error.create("Function not available");if(this.get_disabled())return;if(!arguments.length){$v_0=this.$0_3.$5_0;$v_1=null;if(IsNull($v_0))return}else if(arguments.length===1&&Number.isInstanceOfType(arguments[0])){$v_0=arguments[0];$v_1=null}else if(arguments.length===1&&String.isInstanceOfType(arguments[0])){$v_0=this.$0_3.$5_0;$v_1=arguments[0]}else if(arguments.length===2&&Number.isInstanceOfType(arguments[0])&&String.isInstanceOfType(arguments[1])){$v_0=arguments[0];$v_1=arguments[1]}else throw Error.create("Invalid argument");$v_2=this.$0_3.getValue($v_0);if(IsNull($v_2)||!$v_2.$6_0)throw Error.create("Invalid argument");if(IsNull($v_1)){var $v_3=new Mscrm.ListItem;$v_3.$1_0=$v_2.$1_0;$v_3.$4_0=$v_2.$4_0;$v_3.bIsAttribute=_bIsAttribute;if(_bIsAttribute)if(this.$R_3.get_dataValue()==="picklist"){$v_3.aValues=this.$0_3.$2_0;$v_3.isCustomAttribute="_bIsCustomAttribute";$v_3.sAttributeType=this.$R_3.get_dataValue()}var $v_4=new Xrm.DialogOptions;$v_4.height=220;$v_4.width=300;var $v_5=[this,$v_0],$v_6=Mscrm.InternalUtilities.GridUtilities.createCallbackFunctionFactory(Mscrm.ListEdit.editValueCallback,$v_5);Xrm.Internal.openDialog(Mscrm.CrmUri.create("/_controls/listEdit/listValue.aspx?mode=edit").toString(),$v_4,$v_3,null,$v_6)}else this.$h_3($v_1,$v_0,$v_0)},$h_3:function($p0,$p1,$p2){var $v_0=this.$0_3.getValue($p2);$v_0.$4_0=$p0;$v_0.$1_0=$p1;this.$F_3()},addValue:function(){var $v_0,$v_1="",$v_2=-1;this.$V_3="add";if(!this.checkFunction("addremove"))throw Error.create("Function not available");if(this.get_disabled())return;if(!arguments.length)$v_0=null;else if(arguments.length===1&&String.isInstanceOfType(arguments[0]))$v_0=arguments[0].toString();else if(arguments.length===2&&String.isInstanceOfType(arguments[0])&&String.isInstanceOfType(arguments[1])){$v_0=arguments[0].toString();$v_1=arguments[1].toString()}else throw Error.create("Invalid argument");if(IsNull($v_0)){var $v_3=new Mscrm.ListItem;$v_3.$1_0=this.$0_3.$D_0;$v_3.$4_0="";if($v_3.$1_0===this.$b_3){if(!confirm(window.LOCID_MAX_PICKLIST_VALUE))return}else if($v_3.$1_0>this.$b_3){alert(window.LOCID_ABOVE_MAX_PICKLIST_VALUE);return}$v_3.bIsAttribute=_bIsAttribute;if(_bIsAttribute)if(this.$R_3.get_dataValue()==="picklist"){$v_3.aValues=this.$0_3.$2_0;$v_3.isCustomAttribute="_bIsCustomAttribute";$v_3.sAttributeType=this.$R_3.get_dataValue()}var $v_4=new Xrm.DialogOptions;$v_4.height=220;$v_4.width=300;var $v_5=[this,$v_1],$v_6=Mscrm.InternalUtilities.GridUtilities.createCallbackFunctionFactory(Mscrm.ListEdit.addValueCallback,$v_5);Xrm.Internal.openDialog(Mscrm.CrmUri.create("/_controls/listEdit/listValue.aspx?mode=add").toString(),$v_4,$v_3,null,$v_6)}else this.$f_3($v_0,$v_2,$v_1)},$f_3:function($p0,$p1,$p2){var $v_0=-1;if(!IsNull(this.$0_3.$5_0)&&this.$0_3.$5_0)$v_0=this.$0_3.findValue(this.$0_3.$5_0)+1;var $v_1=this.$0_3.addValue($p0,$v_0,$p2);if($p1!==-1&&$v_1!==-1)this.$7_3($v_1).$1_0=$p1;this.$F_3();if(!IsNull($v_1))this.get_selectedValue()!==this.$7_3($v_1).$1_0&&this.set_selectedValue(this.$7_3($v_1).$1_0)},removeValue:function(showWarning,value){var $v_0=arguments.length;if(!this.checkFunction("addremove"))throw Error.create("Function not available");else if(this.get_disabled())return;if($v_0>2||$v_0>=1&&!Boolean.isInstanceOfType(arguments[0])||$v_0>=2&&!Number.isInstanceOfType(arguments[1]))throw Error.create("Invalid argument");if(IsNull(showWarning))showWarning=false;if(IsNull(value))value=this.$0_3.$5_0;var $v_1=this.$0_3.findValue(value);if($v_1<0)return;var $v_2=this.$7_3($v_1);showWarning=showWarning&&this.$C_3.$N_0.length>0;if(!IsNull($v_2)&&$v_2.$G_0)showWarning=false;if(!showWarning||confirm(this.$C_3.$N_0)){this.$0_3.removeValue(value);this.$F_3()}},sortValues:function(ascend){if(!this.checkFunction("sort"))throw Error.create("Function not available");if(this.get_disabled())return;this.$0_3.sortValues(ascend);this.$F_3()},$p_3:function($p0){var $v_0=this.$3_3("divValueList"),$v_1=$p0.target;while(!IsNull($v_1)&&!IsNull($v_1.id)&&!($v_1===this.get_element()||$v_1===$v_0||$v_1.id.toLowerCase()==="commandbar"))$v_1=$v_1.parentNode;if(IsNull($v_1)||$v_1===this.get_element())return;switch($p0.keyCode){case 38:case 40:$p0.preventDefault();var $v_2=$p0.keyCode===38,$v_3=XUI.Xml.DomUtils.GetFirstChild($v_0).rows,$v_4=$v_3.length;if($v_4>0){var $v_5;if(IsNull(this.get_selectedValue())||this.get_selectedValue()===-1){$v_5=this.$a_3($v_3[0]);this.set_selectedValue(this.$7_3($v_5).$1_0)}else{$v_5=this.$0_3.findValue(this.get_selectedValue());var $v_6=this.$3_3("val"+$v_5);if(IsNull($v_6))break;$v_5=$v_6.rowIndex;if($v_5>=$v_4-1&&!$v_2||$v_2&&!$v_5){var $v_7=$v_2?$v_4-1:0;$v_6=$v_3[$v_7];$v_5=this.$a_3($v_6);this.set_selectedValue(this.$7_3($v_5).$1_0);$v_5>=0&&$v_6.scrollIntoView(true)}else{$v_5=$v_2?$v_5-1:$v_5+1;$v_6=$v_3[$v_5];$v_5=this.$a_3($v_6);if($v_5>=0){this.set_selectedValue(this.$7_3($v_5).$1_0);ScrollVerticalList($v_0,$v_6,$v_6.rowIndex,$v_4,false)}}}}this.$T_3();break;default:break}},$a_3:function($p0){var $v_0=parseInt($p0.id.substr((this.get_element().id+"_val").length));if(IsNull($v_0)&&$v_0.toString()!=="NaN")return -1;return $v_0},runCommand:function(command){if(this.get_disabled()||!this.$m_3(command))return;switch(command){case "add":if(picklistEditIsFor!=="paramaterDialog")this.addValue(String.format(window.LOCID_PICKLIST_DEFAULT_LABEL,""));else{var $v_0=$get("parameterEditValues_txtItemDesc");this.addValue(String.format("parameter_{0}",this.$0_3.$D_0),$v_0.options[0].value)}this.$T_3();break;case "edit":break;case "remove":if(!IsNull(this.get_selectedValue())){var $v_1=this.$0_3.findValue(this.get_selectedValue());this.removeValue(true,this.get_selectedValue());if(IsNull(this.get_selectedValue())||!this.get_selectedValue()){var $v_2=this.$3_3("val"+$v_1);if(!IsNull($v_2))this.set_selectedValue(this.$7_3($v_1).$1_0);else{$v_1=$v_1-1;$v_2=this.$3_3("val"+$v_1);!IsNull($v_2)&&this.set_selectedValue(this.$7_3($v_1).$1_0)}this.$T_3()}}this.$0_3.setNextValue(this.$0_3.$9_0*1e4);break;case "moveup":!IsNull(this.get_selectedValue())&&this.moveValueUp();break;case "movedown":!IsNull(this.get_selectedValue())&&this.moveValueDown();break;case "sortasc":this.sortValues(true);break;case "sortdes":this.sortValues(false);break;default:return}this.fireControlEvent("change",Sys.EventArgs.Empty)},$m_3:function($p0){var $v_0=null;switch($p0){case "add":$v_0=this.$3_3("btnAddValue");break;case "edit":$v_0=this.$3_3("btnEditValue");break;case "remove":$v_0=this.$3_3("btnRemoveValue");break;case "moveup":$v_0=this.$3_3("btnMoveValueUp");break;case "movedown":$v_0=this.$3_3("btnMoveValueDown");break;case "sortasc":$v_0=this.$3_3("btnSortAsc");break;case "sortdes":$v_0=this.$3_3("btnSortDesc");break}if(!IsNull($v_0)||!$v_0.disabled)return true;return false},$o_3:function($p0){if(IsNull(this.get_selectedValue())){this.$j_3();return}var $v_0=this.get_element().id,$v_1;if(!this.checkFunction("edit"))throw Error.create("Function not available");else if(this.get_disabled())return;$v_1=this.$0_3.$5_0;var $v_2=this.$0_3.getValue($v_1),$v_3=Mscrm.FormControlInputBehavior.GetElementBehavior($p0.target),$v_4=$p0.target;if(!IsNull($v_3)){var $v_5=$v_4.id.substr(($v_0+"_").length);switch($v_5){case "txtItemVal":this.$t_3($v_3,$v_4,$v_2,$v_1);break;case "txtItemLb":this.$s_3($v_3,$v_4,$v_2);break;case "txtItemDesc":$v_2.$E_0=this.$J_3.get_dataValue().toString();break}var $v_6=this.$0_3.findValue($v_1);if($v_6>=0){var $v_7=$get(this.get_id()+"_val"+$v_6);if(!IsNull($v_7)){$v_7.nodeValue=$v_2.$1_0.toString();XUI.Xml.DomUtils.GetFirstChild($v_7).innerHTML=CrmEncodeDecode.CrmHtmlEncode($v_2.$4_0)}}if(this.checkFunction("setdefault")&&this.get_hasDefaultValue()){this.$g_3();this.set_defaultValue(this.$0_3.$8_0)}this.fireControlEvent("change",Sys.EventArgs.Empty)}},$t_3:function($p0,$p1,$p2,$p3){if(IsNull($p0.get_dataValue())){$p0.set_dataValue($p2.$1_0);$p0.setFocus();$p1.select();return}var $v_0=Number.parseInvariant($p0.get_dataValue().toString());if($v_0!==$p3){var $v_1=true,$v_2=this.$0_3.getValue($v_0);if(!IsNull($v_2)){alert(String.format(window.LOCID_VALUE_NOT_UNIQUE,Mscrm.NumberUtility.addFormatting($v_2.$1_0,0),$v_2.$4_0));$v_1=false}if($v_1&&this.$C_3.$Q_0.length>0&&!$p2.$G_0)if(!confirm(this.$C_3.$Q_0))$v_1=false;if($v_1&&this.$0_3.$9_0>=1e4&&this.$C_3.$S_0.length>0&&$p2.$G_0)if($v_0<this.$0_3.$9_0*1e4||$v_0>this.$0_3.$9_0*1e4+9999)if(!confirm(String.format(this.$C_3.$S_0,Mscrm.NumberUtility.addFormatting(this.$0_3.$9_0,0),Mscrm.NumberUtility.addFormatting(this.$0_3.$9_0*1e4,0),Mscrm.NumberUtility.addFormatting(this.$0_3.$9_0*1e4+9999,0))))$v_1=false;if(!$v_1){$p0.set_dataValue($p2.$1_0);return}$p2.$1_0=$v_0;this.$0_3.$B_0&&this.$0_3.$8_0===$p3&&this.set_defaultValue($v_0);this.set_selectedValue($v_0);this.$0_3.setNextValue(this.$0_3.$9_0*1e4+1)}},$s_3:function($p0,$p1,$p2){var $v_0=!IsNull($p0.get_dataValue())?$p0.get_dataValue().toString():null;if(!IsNull($v_0))if(picklistEditIsFor!=="paramaterDialog")$p2.$4_0=$v_0;else{var $v_1=$v_0,$v_2=$v_1.match(new RegExp("([A-Za-z0-9])+([_])+([A-Za-z0-9_])*"));if(IsNull($v_2)||$v_2[0]!==$v_1||$v_1.substr(0,4).toUpperCase()==="CRM_"){alert(window.LOCID_PARAM_NAME_NOT_VALID);$p0.set_dataValue($p2.$4_0);$p0.setFocus();$p1.select();return}if($v_1!==$p2.$4_0){var $v_3=this.$0_3.findLabel($v_1.toString());if($v_3.length>0){alert(String.format(window.LOCID_PARAM_NAME_NOT_UNIQUE,$v_3));$p0.set_dataValue($p2.$4_0);return}else $p2.$4_0=$v_0}}else{$p0.set_dataValue($p2.$4_0);$p0.setFocus();$p1.select()}},add_change:function(value){this.get_events().addHandler("change",value)},remove_change:function(value){this.get_events().removeHandler("change",value)},initialize:function(){Mscrm.CrmUIControl.prototype.initialize.call(this);this.$b_3=Number.parseInvariant(this.get_element().attributes.getNamedItem("maxvalue").value);this.$C_3=new Mscrm.Messages;this.$q_3(this.$Z_3);this.$L_3=this.$3_3("txtItemLb");this.$M_3=this.$3_3("txtItemVal");this.$K_3=this.$3_3("txtItemDesc");this.$P_3=Mscrm.FormControlInputBehavior.GetElementBehavior(this.$L_3);this.$H_3=Mscrm.FormControlInputBehavior.GetElementBehavior(this.$M_3);this.$J_3=Mscrm.FormControlInputBehavior.GetElementBehavior(this.$K_3);this.$R_3=Mscrm.FormControlInputBehavior.GetBehavior("selType");this.$0_3=new Mscrm.ValuesList;this.$0_3.$B_0=this.checkFunction("setdefault");this.$0_3.deserialize(this.$Y_3);this.$F_3();$addHandler(this.get_element(),"keydown",this.$$d_$p_3);if(!this.isOptionSet())return;!IsNull(this.$L_3)&&$addHandler(this.$L_3,"change",this.$$d_$o_3);!IsNull(this.$M_3)&&$addHandler(this.$M_3,"change",this.$$d_$o_3);!IsNull(this.$K_3)&&$addHandler(this.$K_3,"change",this.$$d_$o_3)},dispose:function(){if(this.get_isDisposed())return;!IsNull(this.$L_3)&&$removeHandler(this.$L_3,"change",this.$$d_$o_3);!IsNull(this.$M_3)&&$removeHandler(this.$M_3,"change",this.$$d_$o_3);!IsNull(this.$K_3)&&$removeHandler(this.$K_3,"change",this.$$d_$o_3);$removeHandler(this.get_element(),"keydown",this.$$d_$p_3);Mscrm.CrmUIControl.prototype.dispose.call(this)}};Mscrm.ListItem=function(){};Mscrm.ListItem.prototype={$1_0:0,$4_0:null,$6_0:false,$E_0:null,$e_0:null,$G_0:false,$O_0:null,get_value:function(){return this.$1_0},set_value:function(value){this.$1_0=value;return value},get_label:function(){return this.$4_0},set_label:function(value){this.$4_0=value;return value},get_editable:function(){return this.$6_0},set_editable:function(value){this.$6_0=value;return value},get_description:function(){return this.$E_0},set_description:function(value){this.$E_0=value;return value},get_parameter:function(){return this.$e_0},set_parameter:function(value){this.$e_0=value;return value},get_hasNewValue:function(){return this.$G_0},set_hasNewValue:function(value){this.$G_0=value;return value},get_innerXml:function(){return this.$O_0},set_innerXml:function(value){this.$O_0=value;return value}};Mscrm.Messages=function(){};Mscrm.Messages.prototype={$N_0:null,$Q_0:null,$S_0:null,get_deleteValue:function(){return this.$N_0},set_deleteValue:function(value){this.$N_0=value;return value},get_saveChangedValue:function(){return this.$Q_0},set_saveChangedValue:function(value){this.$Q_0=value;return value},get_valueChangedWithoutPrefix:function(){return this.$S_0},set_valueChangedWithoutPrefix:function(value){this.$S_0=value;return value}};Mscrm.ValuesList=function(){this.$2_0=[];this.$5_0=-1};Mscrm.ValuesList.prototype={$B_0:false,$8_0:0,$D_0:0,$9_0:0,$c_0:false,get_bitmask:function(){return this.$c_0},set_bitmask:function(value){this.$c_0=value;return value},get_defaultValue:function(){return this.$8_0},set_defaultValue:function(value){this.$8_0=value;return value},get_nextValue:function(){return this.$D_0},set_nextValue:function(value){this.$D_0=value;return value},get_prefixValue:function(){return this.$9_0},set_prefixValue:function(value){this.$9_0=value;return value},get_valuesCollection:function(){return this.$2_0},set_valuesCollection:function(value){this.$2_0=value;return value},get_selectedValue:function(){return this.$5_0},set_selectedValue:function(value){this.$5_0=value;return value},get_hasDefaultValue:function(){return this.$B_0},set_hasDefaultValue:function(value){this.$B_0=value;return value},setSelectedValue:function(value){var $v_0=this.getValue(value);if(IsNull($v_0)||!$v_0.$6_0)throw Error.create("Invalid argument");this.$5_0=value},getValue:function(value){var $v_0=this.findValue(value);return $v_0>=0?this.$A_0($v_0):null},findValue:function(value){for(var $v_1=this.$2_0.length,$v_0=0;$v_0<$v_1;$v_0++)if(this.$A_0($v_0).$1_0===value)return $v_0;return -1},setDefaultValue:function(value){if(!this.$B_0)throw Error.create("The control does not have default value");if(this.$2_0.length>0&&this.findValue(value)<0){this.$8_0=0;return}this.$8_0=value},setNextValue:function(value){for(var $v_0=value,$v_1=false,$v_2=this.$2_0.length,$v_3=[],$v_4=0;$v_4<$v_2;++$v_4){var $v_5=this.$A_0($v_4).$1_0;if($v_5>=$v_0){$v_1=$v_1||$v_5===$v_0;Array.add($v_3,$v_5)}}if($v_1){var $$t_A=this;$v_3.sort(function($p1_0,$p1_1){return $p1_0-$p1_1});for(var $v_6=0;$v_6<$v_2;++$v_6)if($v_0===$v_3[$v_6])++$v_0;else if($v_0<$v_3[$v_6])break}this.$D_0=$v_0},findLabel:function(label){for(var $v_1=this.$2_0.length,$v_0=0;$v_0<$v_1;$v_0++){var $v_2=this.$A_0($v_0);if($v_2.$4_0===label)return $v_2.$4_0}return ""},addValue:function(label,position,description){var $v_0=this.$2_0.length;if(position!==-1)$v_0=position;var $v_1=new Mscrm.ListItem;$v_1.$1_0=this.$D_0;$v_1.$4_0=label;$v_1.$6_0=true;$v_1.$G_0=true;$v_1.$E_0=description;for(var $v_2=this.$2_0.length,$v_3=$v_2;$v_3>$v_0;$v_3--)this.$2_0[$v_3]=this.$2_0[$v_3-1];this.$2_0[$v_0]=$v_1;this.$B_0&&$v_2===1&&this.setDefaultValue(this.$D_0);this.setNextValue(this.$D_0+1);return $v_0},moveValueUp:function(value){var $v_0=false,$v_1=this.findValue(value),$v_2,$v_3=this.$A_0($v_1);if($v_1<0||!$v_3.$6_0)throw Error.create("Invalid argument");for($v_2=$v_1-1;$v_2>=0&&!this.$A_0($v_2).$6_0;$v_2--);if($v_2>=0){var $v_4=this.$A_0($v_2);this.$2_0[$v_2]=$v_3;this.$2_0[$v_1]=$v_4;$v_0=true}return $v_0},moveValueDown:function(value){var $v_0=false,$v_1=this.findValue(value),$v_2,$v_3=this.$A_0($v_1);if($v_1<0||!$v_3.$6_0)throw Error.create("Invalid argument");var $v_4=this.$2_0.length;for($v_2=$v_1+1;$v_2<$v_4&&!this.$A_0($v_2).$6_0;$v_2++);if($v_2<$v_4){var $v_5=this.$A_0($v_2);this.$2_0[$v_2]=$v_3;this.$2_0[$v_1]=$v_5;$v_0=true}return $v_0},$A_0:function($p0){var $v_0=this.$2_0[$p0];return $v_0},removeValue:function(value){var $v_0=this.findValue(value),$v_1=this.$A_0($v_0);if($v_0<0||!$v_1.$6_0)throw Error.create("Invalid argument");this.$2_0.splice($v_0,1);var $v_2=this.$2_0.length;if(this.$5_0===value)this.$5_0=0;if(this.$B_0&&this.$8_0===value)this.$8_0=$v_2>0?this.$A_0(0).$1_0:-1},sortValues:function(ascend){if(ascend){var $$t_5=this;this.$2_0.sort(function($p1_0,$p1_1){return $p1_0.$4_0.localeCompare($p1_1.$4_0)})}else{var $$t_6=this;this.$2_0.sort(function($p1_0,$p1_1){return $p1_1.$4_0.localeCompare($p1_0.$4_0)})}},serialize:function(){var $v_0=XUI.Xml.CreateDocument(),$v_1=$v_0.createElement("values");if(this.$B_0&&!IsNull(this.$8_0)){var $v_5=$v_0.createAttribute("default");$v_5.nodeValue=this.$8_0.toString();$v_1.attributes.setNamedItem($v_5)}var $v_2=$v_0.createAttribute("next");$v_2.nodeValue=this.$D_0.toString();$v_1.attributes.setNamedItem($v_2);var $v_3=$v_0.createAttribute("prefix");$v_3.nodeValue=this.$9_0.toString();$v_1.attributes.setNamedItem($v_3);for(var $v_4=this.$2_0.length,$v_6=0;$v_6<$v_4;$v_6++){var $v_7=this.$A_0($v_6),$v_8=$v_0.createElement("value"),$v_9=$v_0.createAttribute("value");$v_9.nodeValue=$v_7.$1_0.toString();var $v_A=$v_0.createAttribute("label");$v_A.nodeValue=$v_7.$4_0;var $v_B=$v_0.createAttribute("editable");$v_B.nodeValue=$v_7.$6_0?"1":"0";var $v_C=$v_0.createAttribute("description");$v_C.nodeValue=IsNull($v_7.$E_0)?"":$v_7.$E_0;$v_8.attributes.setNamedItem($v_9);$v_8.attributes.setNamedItem($v_A);$v_8.attributes.setNamedItem($v_B);$v_8.attributes.setNamedItem($v_C);$v_7.$O_0&&$v_8.appendChild(XUI.Xml.DomUtils.GetFirstChild(XUI.Xml.LoadXml($v_7.$O_0)));$v_1.appendChild($v_8)}$v_0.appendChild($v_1);return XUI.Xml.XMLSerializer.serializeToString($v_0)},deserialize:function(xml){var $v_0,$v_1;this.$2_0=[];var $v_2=XUI.Xml.LoadXml(xml),$v_3=XUI.Xml.SelectNodes($v_2,"values/value",null);for($v_0=0;$v_0<$v_3.length;$v_0++){$v_1=$v_3[$v_0];var $v_5=new Mscrm.ListItem;$v_5.$1_0=Number.parseInvariant($v_1.attributes.getNamedItem("value").nodeValue);$v_5.$4_0=$v_1.attributes.getNamedItem("label").nodeValue;$v_5.$6_0=$v_1.attributes.getNamedItem("editable").nodeValue==="1";$v_5.$G_0=false;var $v_6=XUI.Xml.DomUtils.GetFirstChild($v_1);if($v_6)$v_5.$O_0=XUI.Xml.XMLSerializer.serializeToString($v_6);this.$2_0[this.$2_0.length]=$v_5;var $v_7=$v_1.attributes.getNamedItem("description");if(!IsNull($v_7))$v_5.$E_0=$v_7.nodeValue}if(this.$B_0){var $v_8=$v_2.documentElement.attributes.getNamedItem("default");!IsNull($v_8)&&this.setDefaultValue(Number.parseInvariant($v_8.nodeValue))}this.setNextValue(Number.parseInvariant($v_2.documentElement.attributes.getNamedItem("next").nodeValue));var $v_4=$v_2.documentElement.attributes.getNamedItem("prefix");!IsNull($v_4)&&this.setPrefixValue(Number.parseInvariant($v_4.nodeValue))},setPrefixValue:function(value){this.$9_0=value}};Mscrm.ListEdit.registerClass("Mscrm.ListEdit",Mscrm.CrmUIControl);Mscrm.ListItem.registerClass("Mscrm.ListItem");Mscrm.Messages.registerClass("Mscrm.Messages");Mscrm.ValuesList.registerClass("Mscrm.ValuesList");Mscrm.ListEdit.highlighT_COLOR="#c4ddff";Mscrm.ListEdit.diM_COLOR="#ffffff";Mscrm.ListEdit.optionValueSuffix=1e4