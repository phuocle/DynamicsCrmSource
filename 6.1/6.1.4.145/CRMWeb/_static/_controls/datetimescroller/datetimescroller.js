Type.registerNamespace("Mscrm");Mscrm.DateScroller=function($p0,$p1,$p2){this.$$d_$l_1=Function.createDelegate(this,this.$l_1);Mscrm.DateScroller.initializeBase(this);this.$1_1=$p1;this.$0_1=$p0;this.setShortDatePattern($p2);this.$9_1=new Mscrm.DateTimeScrollerComponent(this.$0_1.find(".dayComponent"));this.$9_1.set_date(this.get_date());this.$9_1.set_dateComponent("day");this.$9_1.$2_2=this.$P_1(this.$9_1.get_dateComponent());var $$t_9=this;this.$9_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_9.set_date($$t_9.$9_1.get_date())});this.$9_1.add_showPopupEvent(this.$$d_$l_1);this.$9_1.activate();this.$D_1=new Mscrm.DateTimeScrollerComponent(this.$0_1.find(".monthComponent"));this.$D_1.set_date(this.get_date());this.$D_1.set_dateComponent("month");this.$D_1.$2_2=this.$P_1(this.$D_1.get_dateComponent());var $$t_A=this;this.$D_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_A.set_date($$t_A.$D_1.get_date())});this.$D_1.add_showPopupEvent(this.$$d_$l_1);this.$D_1.activate();this.$G_1=new Mscrm.DateTimeScrollerComponent(this.$0_1.find(".yearComponent"));this.$G_1.set_date(this.get_date());this.$G_1.set_dateComponent(this.$J_1.indexOf("g")>=0?"yearwithera":"year");this.$G_1.$2_2=this.$P_1(this.$G_1.get_dateComponent());var $$t_B=this;this.$G_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_B.set_date($$t_B.$G_1.get_date())});this.$G_1.add_showPopupEvent(this.$$d_$l_1);this.$G_1.activate()};Mscrm.DateScroller.prototype={$0_1:null,$1_1:null,$9_1:null,$D_1:null,$G_1:null,$5_1:null,$J_1:null,get_attachedElement:function(){return this.$0_1},get_date:function(){return this.$1_1},set_date:function($p0){if(this.$1_1!==$p0){if(IsNull($p0)||!Date.isInstanceOfType($p0))this.$1_1=new Date;else this.$1_1=$p0;this.$9_1.set_date(this.$1_1);this.$D_1.set_date(this.$1_1);this.$G_1.set_date(this.$1_1);this.$m_1("date")}return $p0},add_dateChangedEvent:function($p0){this.get_events().addHandler("date",$p0)},remove_dateChangedEvent:function($p0){this.get_events().removeHandler("date",$p0)},$m_1:function($p0){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,new Sys.PropertyChangedEventArgs($p0))},add_showPopupEvent:function($p0){this.get_events().addHandler("showPopupEvent",$p0)},remove_showPopupEvent:function($p0){this.get_events().removeHandler("showPopupEvent",$p0)},$A_1:function($p0,$p1){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,$p1)},hideSubcomponents:function(){this.$9_1.set_showingPopup(false);this.$D_1.set_showingPopup(false);this.$G_1.set_showingPopup(false)},$l_1:function($p0,$p1){this.$A_1("showPopupEvent",new Mscrm.FormatArguments)},setShortDatePattern:function($p0){this.$J_1=$p0;this.$5_1={};var $v_0=null,$v_1=new RegExp("(d)\\1+");$v_0=this.$J_1.match($v_1);this.$5_1["day"]=IsNull($v_0)||!$v_0.length?"%d":$v_0[0];$v_1=new RegExp("(M)\\1+");$v_0=this.$J_1.match($v_1);this.$5_1["month"]=IsNull($v_0)||!$v_0.length?"%M":$v_0[0];$v_1=new RegExp("(y)\\1+");$v_0=this.$J_1.match($v_1);this.$5_1["year"]=IsNull($v_0)||!$v_0.length?"yyyy":$v_0[0];this.$5_1["yearwithera"]=this.$5_1["year"]},get_$v_1:function(){if(!this.$5_1){this.$5_1={};this.$5_1["day"]="dd";this.$5_1["month"]="MM";this.$5_1["year"]="yyyy";this.$5_1["yearwithera"]="yyyy"}return this.$5_1},$P_1:function($p0){return this.get_$v_1()[$p0]}};Mscrm.DateTimeScroller=function(element){this.$$d_$13_1=Function.createDelegate(this,this.$13_1);this.$$d_$18_1=Function.createDelegate(this,this.$18_1);this.$$d_$1A_1=Function.createDelegate(this,this.$1A_1);this.$$d_$17_1=Function.createDelegate(this,this.$17_1);Mscrm.DateTimeScroller.initializeBase(this);this.$L_1=new Date;this.$Y_1="date";this.$U_1=false;this.$T_1=false;this.$N_1=false;this.$Z_1=true;this.$M_1=true;this.$a_1=true;this.$8_1=null;this.$6_1=null;this.add_formatChangedEvent(this.$$d_$17_1);this.$0_1=element;this.$b_1=this.$0_1.find("span.controlValue")};Mscrm.DateTimeScroller.$11=function($p0,$p1){if(IsNull($p0)||IsNull($p1))return false;return $p0.isSameNode($p1)};Mscrm.DateTimeScroller.prototype={$Y_1:null,$L_1:null,$0_1:null,$b_1:null,$8_1:null,$6_1:null,$U_1:false,$T_1:false,$N_1:false,$Z_1:false,$a_1:false,$M_1:false,$J_1:"M/d/yyyy",$K_1:"HH:mm",activate:function(){if(!this.$U_1){this.$U_1=true;this.$8_1=new Mscrm.DateScroller(this.$0_1.find(".dateScroller"),this.get_date(),this.$J_1);var $$t_8=this;this.$8_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_8.$s_1($$t_8.$8_1.get_date())});var $$t_9=this;this.$8_1.add_showPopupEvent(function($p1_0,$p1_1){$$t_9.$c_1()});this.$6_1=new Mscrm.TimeScroller(this.$0_1.find(".timeScroller"),this.get_date(),this.$K_1);var $$t_A=this;this.$6_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_A.$t_1($$t_A.$6_1.get_date())});var $$t_B=this;this.$6_1.add_showPopupEvent(function($p1_0,$p1_1){$$t_B.$c_1()});this.$j_1();this.$q_1()}},dispose:function(){if(this.$U_1){this.$1G_1();this.set_$I_1(false)}},get_date:function(){return this.$L_1},set_date:function(value){if(this.$L_1!==value){if(IsNull(value)||!Date.isInstanceOfType(value)){this.$M_1=true;this.$L_1=new Date}else{this.$M_1=false;this.$L_1=value}this.$n_1();!IsNull(this.$8_1)&&this.$8_1.set_date(this.$L_1);!IsNull(this.$6_1)&&this.$6_1.set_date(this.$L_1)}return value},get_format:function(){return this.$Y_1},set_format:function(value){if(this.$Y_1!==value){this.$Y_1=value==="date"||value==="time"||value==="datetime"?value:"date";this.$A_1("FormatChanged",new Mscrm.FormatArguments)}return value},get_shortDatePattern:function(){return this.$J_1},set_shortDatePattern:function(value){this.$J_1=value;return value},get_shortTimePattern:function(){return this.$K_1},set_shortTimePattern:function(value){this.$K_1=value;return value},get_isDisabled:function(){return this.$N_1},set_isDisabled:function(value){if(this.$N_1&&!value)this.$N_1=false;if(!this.$N_1&&value){this.$N_1=true;this.get_$I_1()&&this.set_$I_1(false)}return value},get_isTimeEditable:function(){return this.$Z_1},set_isTimeEditable:function(value){if(this.$Z_1!==value){this.$Z_1=value;this.$j_1()}return value},get_showTime:function(){return this.$a_1},set_showTime:function(value){if(this.$a_1!==value){this.$a_1=value;this.$n_1()}return value},setDate:function(date){if(isNullOrEmptyString(date))this.set_date(null);else{var $v_0=Mscrm.DateTimeUtility.parseDate(date),$v_1=new Date($v_0.getFullYear(),$v_0.getMonth(),$v_0.getDate(),this.get_date().getHours(),this.get_date().getMinutes());this.set_date($v_1)}},getDate:function(){if(this.$M_1)return Mscrm.Utilities.emptyString;else return Mscrm.DateTimeUtility.formatDate(this.get_date())},setTime:function(time){if(isNullOrEmptyString(time))this.set_date(null);else{var $v_0=parseTime(time,0),$v_1=new Date(this.get_date().getFullYear(),this.get_date().getMonth(),this.get_date().getDate(),$v_0.getHours(),$v_0.getMinutes());this.set_date($v_1)}},clearAll:function(){if(!this.$M_1){this.set_date(null);this.$A_1("DateChanged",new Mscrm.FormatArguments);var $v_0=new Mscrm.FormatArguments;$v_0.inputValue=timeToString(this.get_date(),0);this.$A_1("TimeChanged",$v_0)}},add_dateChangedEvent:function(value){this.get_events().addHandler("DateChanged",value)},remove_dateChangedEvent:function(value){this.get_events().removeHandler("DateChanged",value)},add_timeChangedEvent:function(value){this.get_events().addHandler("TimeChanged",value)},remove_timeChangedEvent:function(value){this.get_events().removeHandler("TimeChanged",value)},add_formatChangedEvent:function(value){this.get_events().addHandler("FormatChanged",value)},remove_formatChangedEvent:function(value){this.get_events().removeHandler("FormatChanged",value)},add_undoChangesEvent:function(value){this.get_events().addHandler("UndoChanges",value)},remove_undoChangesEvent:function(value){this.get_events().removeHandler("UndoChanges",value)},add_confirmChangesEvent:function(value){this.get_events().addHandler("ConfirmChanges",value)},remove_confirmChangesEvent:function(value){this.get_events().removeHandler("ConfirmChanges",value)},get_$I_1:function(){return this.$T_1},set_$I_1:function($p0){if(this.$T_1!==$p0){this.$T_1=$p0;if(this.$T_1){this.$0_1.addClass("activeDateTimeControl");this.$b_1.hide()}else{this.$c_1();this.$0_1.removeClass("activeDateTimeControl");this.$b_1.show()}var $v_0=this.$0_1.find(".dateTimeEditablePanel");$v_0.toggle()}return $p0},$s_1:function($p0){if(this.get_date()===$p0)return;$p0.setHours(this.get_date().getHours());$p0.setMinutes(this.get_date().getMinutes());this.set_date($p0);this.$A_1("DateChanged",new Mscrm.FormatArguments);this.$0_1.focus()},$t_1:function($p0){if(this.get_date()===$p0)return;$p0.setDate(this.get_date().getDate());$p0.setMonth(this.get_date().getMonth());$p0.setFullYear(this.get_date().getFullYear());this.set_date($p0);var $v_0=new Mscrm.FormatArguments;$v_0.inputValue=timeToString(this.get_date(),0);this.$A_1("TimeChanged",$v_0);this.$0_1.focus()},$n_1:function(){var $v_0="";if(this.$M_1)$v_0="---";else switch(this.get_format()){case "date":$v_0=Mscrm.DateTimeUtility.formatDate(this.get_date());break;case "time":$v_0=this.get_date().localeFormat("t");break;case "datetime":$v_0=Mscrm.DateTimeUtility.formatDate(this.get_date());if(this.get_showTime())$v_0+=" "+this.get_date().localeFormat("t");break}this.$b_1.text($v_0)},$j_1:function(){if(this.$U_1)switch(this.get_format()){case "date":this.$8_1.$0_1.show();this.$6_1.$0_1.hide();break;case "time":this.$8_1.$0_1.hide();this.get_isTimeEditable()&&this.$6_1.$0_1.show();break;case "datetime":this.$8_1.$0_1.show();if(this.get_isTimeEditable())this.$6_1.$0_1.show();else this.$6_1.$0_1.hide();break}},$c_1:function(){this.$8_1.hideSubcomponents();this.$6_1.hideSubcomponents()},$10_1:function($p0){var $v_0=this.$0_1.get(0);return Mscrm.DateTimeScroller.$11($v_0,$p0)||XUI.Html.DomUtils.Contains($v_0,$p0)},$q_1:function(){this.$0_1.keydown(this.$$d_$1A_1);$P_CRM(document).click(this.$$d_$18_1);this.$0_1.find(".scrollerButton").click(this.$$d_$13_1)},$1G_1:function(){this.$0_1.unbind("keydown",this.$$d_$1A_1);$P_CRM(document).unbind("click",this.$$d_$18_1);this.$0_1.find(".scrollerButton").unbind("click",this.$$d_$13_1)},$A_1:function($p0,$p1){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,$p1)},$17_1:function($p0,$p1){this.$j_1()},$18_1:function($p0){if(!this.get_isDisabled()){var $v_0=this.$10_1($p0.target);if(this.get_$I_1())if($v_0)this.$c_1();else this.$A_1("ConfirmChanges",new Mscrm.FormatArguments);this.set_$I_1($v_0)}$p0.stopPropagation()},$1A_1:function($p0){if(this.get_$I_1())if($p0.which===27){this.$A_1("UndoChanges",new Mscrm.FormatArguments);this.set_$I_1(false);this.$0_1.blur()}else if($p0.which===13){this.$A_1("ConfirmChanges",new Mscrm.FormatArguments);this.set_$I_1(false);this.$0_1.blur()}$p0.stopPropagation()},$13_1:function($p0){this.clearAll();this.set_$I_1(false);this.$A_1("ConfirmChanges",new Mscrm.FormatArguments);$p0.stopPropagation()}};Mscrm.DateTimeScrollerComponent=function($p0){Mscrm.DateTimeScrollerComponent.initializeBase(this,[$p0]);this.$1_2=new Date};Mscrm.DateTimeScrollerComponent.prototype={$1_2:null,$3_2:null,$2_2:"",get_date:function(){return this.$1_2},set_date:function($p0){if(this.$1_2!==$p0){if(IsNull($p0)||!Date.isInstanceOfType($p0))this.$1_2=new Date;else this.$1_2=$p0;this.$H_1&&this.updateScrollerComponent();this.onPropertyChanged("Date")}return $p0},get_dateComponent:function(){return this.$3_2},set_dateComponent:function($p0){if(this.$3_2!==$p0){this.$3_2=$p0;this.$H_1&&this.updateScrollerComponent()}return $p0},get_shortFormatPattern:function(){return this.$2_2},set_shortFormatPattern:function($p0){this.$2_2=$p0;return $p0},add_dateChangedEvent:function($p0){this.get_events().addHandler("Date",$p0)},remove_dateChangedEvent:function($p0){this.get_events().removeHandler("Date",$p0)},updateScrollerComponent:function(){this.$0_1.empty();var $v_0=Mscrm.DateTimeScrollerItem.create();$v_0.$2_2=this.$2_2;$v_0.set_date(this.get_date());$v_0.set_dateComponent(this.get_dateComponent());$v_0.set_isCurrentItem(true);this.$0_1.append($v_0.$0_1)},initializePopup:function(){if(IsNull(this.$7_1)){this.$7_1=Mscrm.DateTimeScrollerPopup.create($P_CRM(document.body));var $v_1=this.$0_1.offset().left;this.$7_1.$0_1.css("left",$v_1.toString()+"px")}var $v_0=this.$7_1;$v_0.set_date(this.get_date());$v_0.set_dateComponent(this.get_dateComponent());$v_0.$2_2=this.$2_2;var $$t_7=this;$v_0.add_dateChangedEvent(function($p1_0,$p1_1){$$t_7.set_date($v_0.get_date())});var $$t_8=this;$v_0.add_triggerHidePopupEvent(function($p1_0,$p1_1){$$t_8.set_showingPopup(false)});if($v_0.get_hasMaxItems()){var $v_2=this.$0_1.offset().top;$v_0.$0_1.css("top",$v_2.toString()+"px")}$v_0.activate()}};Mscrm.DateTimeScrollerItem=function($p0){this.$$d_$16_2=Function.createDelegate(this,this.$16_2);this.$$d_$15_2=Function.createDelegate(this,this.$15_2);Mscrm.DateTimeScrollerItem.initializeBase(this,[$p0]);this.$1_2=null;this.$3_2=null;this.add_dateChangedEvent(this.$$d_$15_2);this.add_dateComponentChangedEvent(this.$$d_$16_2)};Mscrm.DateTimeScrollerItem.create=function(){return new Mscrm.DateTimeScrollerItem($P_CRM(window.document.createElement("div")))};Mscrm.DateTimeScrollerItem.prototype={$1_2:null,$3_2:null,$2_2:null,get_date:function(){return this.$1_2},set_date:function($p0){if(this.$1_2!==$p0){this.$1_2=$p0;this.onPropertyChanged("Date")}return $p0},get_dateComponent:function(){return this.$3_2},set_dateComponent:function($p0){if(this.$3_2!==$p0){this.$3_2=$p0;this.onPropertyChanged("DateComponent");if(this.$3_2==="yearwithera")this.$0_1.addClass("yearWithEra");else this.$0_1.removeClass("yearWithEra")}return $p0},add_dateChangedEvent:function($p0){this.get_events().addHandler("Date",$p0)},remove_dateChangedEvent:function($p0){this.get_events().removeHandler("Date",$p0)},add_dateComponentChangedEvent:function($p0){this.get_events().addHandler("DateComponent",$p0)},remove_dateComponentChangedEvent:function($p0){this.get_events().removeHandler("DateComponent",$p0)},$15_2:function($p0,$p1){$p1.get_propertyName()==="Date"&&this.$p_2()},$16_2:function($p0,$p1){$p1.get_propertyName()==="DateComponent"&&this.$p_2()},$p_2:function(){if(!IsNull(this.get_date())&&!IsNull(this.get_dateComponent())){var $v_0=Mscrm.Utilities.emptyString;switch(this.$3_2){case "year":$v_0=Mscrm.Utilities.emptyString;break;case "yearwithera":$v_0="gg";break;case "month":$v_0="MMMM";break;case "day":$v_0="dddd";break;case "hour":case "minute":case "period":$v_0=Mscrm.Utilities.emptyString;break}!isNullOrEmptyString(this.$2_2)&&this.set_text(Mscrm.DateTimeUtility.formatDate(this.get_date(),this.$2_2));!isNullOrEmptyString($v_0)&&this.set_smallText(Mscrm.DateTimeUtility.formatDate(this.get_date(),$v_0))}},get_shortFormatPattern:function(){return this.$2_2},set_shortFormatPattern:function($p0){this.$2_2=$p0;return $p0}};Mscrm.DateTimeScrollerPopup=function($p0){Mscrm.DateTimeScrollerPopup.initializeBase(this,[$p0])};Mscrm.DateTimeScrollerPopup.create=function($p0){var $v_0=$P_CRM(window.document.createElement("div"));$p0.append($v_0);return new Mscrm.DateTimeScrollerPopup($v_0)};Mscrm.DateTimeScrollerPopup.prototype={$1_2:null,$3_2:null,$2_2:null,get_date:function(){return this.$1_2},set_date:function($p0){if(this.$1_2!==$p0){if(IsNull($p0)||!Date.isInstanceOfType($p0))this.$1_2=new Date;else this.$1_2=$p0;this.$H_1&&this.initializeItems();this.onPropertyChanged("Date")}return $p0},get_dateComponent:function(){return this.$3_2},set_dateComponent:function($p0){this.$3_2=$p0;if(this.$3_2==="period")this.$W_1=2;return $p0},add_dateChangedEvent:function($p0){this.get_events().addHandler("Date",$p0)},remove_dateChangedEvent:function($p0){this.get_events().removeHandler("Date",$p0)},createItem:function($p0){var $v_0=Mscrm.DateTimeScrollerItem.create();$v_0.$2_2=this.$2_2;$v_0.set_date(this.$w_2($p0));$v_0.set_dateComponent(this.$3_2);$v_0.set_isCurrentItem(this.$12_2($p0));var $$t_3=this;$v_0.$0_1.click(function($p1_0){$v_0.set_isCurrentItem(true);$$t_3.fireEvent("triggerHidePopupEvent",new Mscrm.FormatArguments);$$t_3.set_date($v_0.get_date());$p1_0.stopImmediatePropagation()});return $v_0},$w_2:function($p0){var $v_0=new Date(this.get_date().toString());switch(this.$3_2){case "year":case "yearwithera":var $v_1=$v_0.getFullYear()+$p0;if($v_1<1900)$v_1-=8100*Math.floor($p0/8100);else if($v_1>9999)$v_1-=8100*Math.ceil($p0/8100);$v_0.setYear($v_1);break;case "month":var $v_2=$v_0.getDate();$v_0.setDate(1);$v_0.setMonth($v_0.getMonth()+$p0);$v_0.setYear(this.get_date().getFullYear());var $v_3=this.$h_2($v_0);if($v_2>$v_3)$v_0.setDate($v_3);else $v_0.setDate($v_2);break;case "day":var $v_4=this.$h_2($v_0),$v_5=$v_0.getDate()-1,$v_6=($v_5+$v_4+$p0)%$v_4+1;$v_0.setDate($v_6);break;case "hour":var $v_7=12,$v_8=this.$2_2.indexOf("h")<0;if($v_8)$v_7=24;var $v_9=($v_0.getHours()%$v_7+$p0)%$v_7;if($v_9<0)$v_9+=$v_7;if(!$v_8&&$v_0.getHours()>=12)$v_9+=12;$v_0.setHours($v_9%24);break;case "minute":var $v_A=($v_0.getMinutes()+$p0)%60;if($v_A<0)$v_A+=60;$v_0.setMinutes($v_A);break;case "period":$v_0.setHours(($v_0.getHours()+Math.abs($p0)*12)%24);break}return $v_0},$h_2:function($p0){var $v_0=new Date($p0.toString());$v_0.setMonth($v_0.getMonth()+1);$v_0.setDate(0);return $v_0.getDate()},$12_2:function($p0){switch(this.get_dateComponent()){case "year":case "yearwithera":return !$p0;case "month":return !($p0%12);case "day":return !($p0%this.$h_2(this.get_date()));case "hour":return !($p0%12);case "minute":return !($p0%60);case "period":return !($p0%2)}return false},get_shortFormatPattern:function(){return this.$2_2},set_shortFormatPattern:function($p0){this.$2_2=$p0;return $p0}};Mscrm.ScrollerComponent=function($p0){this.$$d_$14_1=Function.createDelegate(this,this.$14_1);Mscrm.ScrollerComponent.initializeBase(this);this.$H_1=false;this.$R_1=false;this.$7_1=null;this.$0_1=$p0};Mscrm.ScrollerComponent.prototype={$7_1:null,$0_1:null,$H_1:false,$R_1:false,get_attachedElement:function(){return this.$0_1},get_currentPopup:function(){return this.$7_1},set_currentPopup:function($p0){this.$7_1=$p0;return $p0},get_isActive:function(){return this.$H_1},get_showingPopup:function(){return this.$R_1},set_showingPopup:function($p0){if(!this.$R_1&&$p0){this.fireEvent("showPopupEvent",new Mscrm.FormatArguments);this.$1E_1();this.$R_1=true}if(this.$R_1&&!$p0){this.$y_1();this.$R_1=false}return $p0},add_showPopupEvent:function($p0){this.get_events().addHandler("showPopupEvent",$p0)},remove_showPopupEvent:function($p0){this.get_events().removeHandler("showPopupEvent",$p0)},fireEvent:function($p0,$p1){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,$p1)},onPropertyChanged:function($p0){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,new Sys.PropertyChangedEventArgs($p0))},activate:function(){this.$H_1=true;this.updateScrollerComponent();this.$0_1.click(this.$$d_$14_1)},updateScrollerComponent:function(){},initializePopup:function(){},$14_1:function($p0){this.set_showingPopup(true);$p0.stopPropagation()},$1E_1:function(){this.initializePopup();if(!IsNull(this.$7_1)){this.$7_1.$S_1=this.$0_1.offset().top;this.$7_1.set_isVisible(true)}},$y_1:function(){this.$7_1.set_isVisible(false)}};Mscrm.ScrollerItem=function($p0){this.$$d_$19_1=Function.createDelegate(this,this.$19_1);this.$$d_$1C_1=Function.createDelegate(this,this.$1C_1);Mscrm.ScrollerItem.initializeBase(this);this.$f_1=null;this.$g_1=null;this.$d_1=false;$p0.addClass("scrollerItem");$p0.append('<span class="scrollerItemMainLabel"></span>');$p0.append('<span class="scrollerItemSmallLabel"></span>');this.$0_1=$p0;this.add_textChangedEvent(this.$$d_$1C_1);this.add_smallTextChangedEvent(this.$$d_$1C_1);this.add_isCurrentItemChangedEvent(this.$$d_$19_1)};Mscrm.ScrollerItem.prototype={$g_1:null,$f_1:null,$d_1:false,$0_1:null,get_attachedElement:function(){return this.$0_1},get_text:function(){return this.$g_1},set_text:function($p0){if(this.$g_1!==$p0){this.$g_1=$p0;this.onPropertyChanged("Text")}return $p0},get_smallText:function(){return this.$f_1},set_smallText:function($p0){if(this.$f_1!==$p0){this.$f_1=$p0;this.onPropertyChanged("SmallText")}return $p0},get_isCurrentItem:function(){return this.$d_1},set_isCurrentItem:function($p0){if(this.$d_1!==$p0){this.$d_1=$p0;this.onPropertyChanged("IsCurrentItem")}return $p0},add_textChangedEvent:function($p0){this.get_events().addHandler("Text",$p0)},remove_textChangedEvent:function($p0){this.get_events().removeHandler("Text",$p0)},add_smallTextChangedEvent:function($p0){this.get_events().addHandler("SmallText",$p0)},remove_smallTextChangedEvent:function($p0){this.get_events().removeHandler("SmallText",$p0)},add_isCurrentItemChangedEvent:function($p0){this.get_events().addHandler("IsCurrentItem",$p0)},remove_isCurrentItemChangedEvent:function($p0){this.get_events().removeHandler("IsCurrentItem",$p0)},onPropertyChanged:function($p0){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,new Sys.PropertyChangedEventArgs($p0))},$1C_1:function($p0,$p1){var $v_0=null;if($p1.get_propertyName()==="Text"){$v_0=this.$0_1.find("span.scrollerItemMainLabel");$v_0.text(this.get_text())}else if($p1.get_propertyName()==="SmallText"){$v_0=this.$0_1.find("span.scrollerItemSmallLabel");$v_0.text(this.get_smallText())}},$19_1:function($p0,$p1){if($p1.get_propertyName()==="IsCurrentItem")if(this.get_isCurrentItem())this.$0_1.addClass("currentScrollerItem");else this.$0_1.removeClass("currentScrollerItem")}};Mscrm.ScrollerPopup=function($p0){this.$$d_$1B_1=Function.createDelegate(this,this.$1B_1);this.$V_1=-1;Mscrm.ScrollerPopup.initializeBase(this);this.$H_1=false;this.$Q_1=false;this.$0_1=$p0;this.$e_1=0};Mscrm.ScrollerPopup.prototype={$e_1:0,$W_1:0,$O_1:null,$X_1:0,$S_1:0,$Q_1:false,$H_1:false,$0_1:null,get_attachedElement:function(){return this.$0_1},get_isActive:function(){return this.$H_1},get_isVisible:function(){return this.$Q_1},set_isVisible:function($p0){if(!this.$Q_1&&$p0){this.$Q_1=true;this.$1D_1()}if(this.$Q_1&&!$p0){this.$Q_1=false;this.$x_1()}return $p0},get_unexpandedControlTop:function(){return this.$S_1},set_unexpandedControlTop:function($p0){this.$S_1=$p0;return $p0},onPropertyChanged:function($p0){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,new Sys.PropertyChangedEventArgs($p0))},add_triggerHidePopupEvent:function($p0){this.get_events().addHandler("triggerHidePopupEvent",$p0)},remove_triggerHidePopupEvent:function($p0){this.get_events().removeHandler("triggerHidePopupEvent",$p0)},fireEvent:function($p0,$p1){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,$p1)},activate:function(){if(!this.$H_1){this.$H_1=true;this.$0_1.addClass("popup");this.$0_1.addClass("scrollerPopup");this.$0_1.scroll(this.$$d_$1B_1)}},initializeItems:function(){if(IsNull(this.$O_1)){this.$O_1=$P_CRM(window.document.createElement("div"));this.$0_1.append(this.$O_1)}this.$u_1();this.$o_1()},$1D_1:function(){this.initializeItems();this.$0_1.show();this.$z_1()},$x_1:function(){this.$0_1.hide()},$1B_1:function($p0){this.$o_1()},$u_1:function(){this.$O_1.empty();this.$V_1=-1;this.$X_1=0;this.$e_1=0},$z_1:function(){this.$0_1.scrollTop(this.$r_1(0))},$r_1:function($p0){var $v_0=88-this.$S_1%88,$v_1=$v_0===88?0:$v_0,$v_2=2640,$v_3=$p0*88;return $v_1+$v_2+$v_3},$o_1:function(){var $v_0=this.$0_1.scrollTop(),$v_1;if(!$v_0)$v_1=Math.floor(-this.$S_1/88);else $v_1=Math.floor($v_0/88)+this.$X_1;var $v_2=this.$S_1%88,$v_3=Math.ceil((this.$0_1.height()-$v_2)/88),$v_4=$v_1+$v_3-1;if(this.$X_1>$v_1-2)while(this.$X_1>$v_1-30&&!this.get_$i_1())this.$k_1(true);if(this.$V_1<$v_4+2)while(this.$V_1<$v_4+30&&!this.get_$i_1())this.$k_1(false)},get_$i_1:function(){return this.get_hasMaxItems()&&this.$e_1>=this.$W_1},$k_1:function($p0){var $v_0=$p0?--this.$X_1:++this.$V_1;if(this.get_$i_1())return;var $v_1=this.createItem($v_0);if($p0){this.$O_1.prepend($v_1.$0_1);this.$0_1.scrollTop(this.$0_1.scrollTop()+88)}else this.$O_1.append($v_1.$0_1);this.$e_1++},get_maxItems:function(){return this.$W_1},set_maxItems:function($p0){this.$W_1=$p0;return $p0},get_hasMaxItems:function(){return this.$W_1>0}};Mscrm.TimeScroller=function($p0,$p1,$p2){this.$$d_$l_1=Function.createDelegate(this,this.$l_1);Mscrm.TimeScroller.initializeBase(this);this.$1_1=$p1;this.$0_1=$p0;this.setShortTimePattern($p2);this.$B_1=new Mscrm.DateTimeScrollerComponent(this.$0_1.find(".hourComponent"));this.$B_1.set_date(this.get_date());this.$B_1.set_dateComponent("hour");this.$B_1.$2_2=this.$P_1(this.$B_1.get_dateComponent());var $$t_9=this;this.$B_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_9.set_date($$t_9.$B_1.get_date())});this.$B_1.add_showPopupEvent(this.$$d_$l_1);this.$B_1.activate();this.$C_1=new Mscrm.DateTimeScrollerComponent(this.$0_1.find(".minuteComponent"));this.$C_1.set_date(this.get_date());this.$C_1.set_dateComponent("minute");this.$C_1.$2_2=this.$P_1(this.$C_1.get_dateComponent());var $$t_A=this;this.$C_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_A.set_date($$t_A.$C_1.get_date())});this.$C_1.add_showPopupEvent(this.$$d_$l_1);this.$C_1.activate();this.$E_1=new Mscrm.DateTimeScrollerComponent(this.$0_1.find(".periodComponent"));this.$E_1.set_date(this.get_date());this.$E_1.set_dateComponent("period");this.$E_1.$2_2=this.$P_1(this.$E_1.get_dateComponent());var $$t_B=this;this.$E_1.add_dateChangedEvent(function($p1_0,$p1_1){$$t_B.set_date($$t_B.$E_1.get_date())});this.$E_1.add_showPopupEvent(this.$$d_$l_1);this.$E_1.activate()};Mscrm.TimeScroller.prototype={$0_1:null,$1_1:null,$B_1:null,$C_1:null,$E_1:null,$K_1:null,$F_1:null,get_attachedElement:function(){return this.$0_1},get_date:function(){return this.$1_1},set_date:function($p0){if(this.$1_1!==$p0){if(IsNull($p0)||!Date.isInstanceOfType($p0))this.$1_1=new Date;else this.$1_1=$p0;this.$B_1.set_date(this.$1_1);this.$C_1.set_date(this.$1_1);this.$E_1.set_date(this.$1_1);this.$m_1("date")}return $p0},add_dateChangedEvent:function($p0){this.get_events().addHandler("date",$p0)},remove_dateChangedEvent:function($p0){this.get_events().removeHandler("date",$p0)},$m_1:function($p0){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,new Sys.PropertyChangedEventArgs($p0))},add_showPopupEvent:function($p0){this.get_events().addHandler("showPopupEvent",$p0)},remove_showPopupEvent:function($p0){this.get_events().removeHandler("showPopupEvent",$p0)},$A_1:function($p0,$p1){var $v_0=this.get_events().getHandler($p0);!IsNull($v_0)&&$v_0(this,$p1)},hideSubcomponents:function(){this.$B_1.set_showingPopup(false);this.$C_1.set_showingPopup(false);this.$E_1.set_showingPopup(false)},$l_1:function($p0,$p1){this.$A_1("showPopupEvent",new Mscrm.FormatArguments)},setShortTimePattern:function($p0){this.$K_1=$p0;this.$F_1={};var $v_0=null,$v_1=new RegExp("(h)+");$v_0=this.$K_1.match($v_1);if(IsNull($v_0)||!$v_0.length){$v_1=new RegExp("(H)+");$v_0=this.$K_1.match($v_1);this.$F_1["hour"]=IsNull($v_0)||!$v_0.length?"%h":$v_0[0].length===1?"%"+$v_0[0]:$v_0[0]}else this.$F_1["hour"]=$v_0[0].length===1?"%"+$v_0[0]:$v_0[0];$v_1=new RegExp("(m)\\1+");$v_0=this.$K_1.match($v_1);this.$F_1["minute"]=IsNull($v_0)||!$v_0.length?"%m":$v_0[0];$v_1=new RegExp("(t)\\1+");$v_0=this.$K_1.match($v_1);this.$F_1["period"]=IsNull($v_0)||!$v_0.length?Mscrm.Utilities.emptyString:$v_0[0]},get_$1F_1:function(){if(!this.$F_1){this.$F_1={};this.$F_1["hour"]="%h";this.$F_1["minute"]="%m";this.$F_1["period"]="tt"}return this.$F_1},$P_1:function($p0){return this.get_$1F_1()[$p0]}};Mscrm.DateScroller.registerClass("Mscrm.DateScroller",Sys.Component);Mscrm.DateTimeScroller.registerClass("Mscrm.DateTimeScroller",Sys.Component);Mscrm.ScrollerComponent.registerClass("Mscrm.ScrollerComponent",Sys.Component);Mscrm.DateTimeScrollerComponent.registerClass("Mscrm.DateTimeScrollerComponent",Mscrm.ScrollerComponent);Mscrm.ScrollerItem.registerClass("Mscrm.ScrollerItem",Sys.Component);Mscrm.DateTimeScrollerItem.registerClass("Mscrm.DateTimeScrollerItem",Mscrm.ScrollerItem);Mscrm.ScrollerPopup.registerClass("Mscrm.ScrollerPopup",Sys.Component);Mscrm.DateTimeScrollerPopup.registerClass("Mscrm.DateTimeScrollerPopup",Mscrm.ScrollerPopup);Mscrm.TimeScroller.registerClass("Mscrm.TimeScroller",Sys.Component);Mscrm.DateScroller.showPopupEventKey="showPopupEvent";Mscrm.DateScroller.datePropertyName="date";Mscrm.DateTimeScroller.dateChangedEventKey="DateChanged";Mscrm.DateTimeScroller.timeChangedEventKey="TimeChanged";Mscrm.DateTimeScroller.formatChangedEventKey="FormatChanged";Mscrm.DateTimeScroller.undoChangesEventKey="UndoChanges";Mscrm.DateTimeScroller.confirmChangesEventKey="ConfirmChanges";Mscrm.DateTimeScroller.dateComponentYear="year";Mscrm.DateTimeScroller.dateComponentYearWithEra="yearwithera";Mscrm.DateTimeScroller.dateComponentMonth="month";Mscrm.DateTimeScroller.dateComponentDay="day";Mscrm.DateTimeScroller.dateComponentHour="hour";Mscrm.DateTimeScroller.dateComponentMinute="minute";Mscrm.DateTimeScroller.dateComponentPeriod="period";Mscrm.DateTimeScrollerComponent.datePropertyName="Date";Mscrm.DateTimeScrollerItem.datePropertyName="Date";Mscrm.DateTimeScrollerItem.dateComponentPropertyName="DateComponent";Mscrm.DateTimeScrollerPopup.datePropertyName="Date";Mscrm.ScrollerItem.textPropertyName="Text";Mscrm.ScrollerItem.smallTextPropertyName="SmallText";Mscrm.ScrollerItem.isCurrentItemPropertyName="IsCurrentItem";Mscrm.ScrollerItem.textClassName="scrollerItemMainLabel";Mscrm.ScrollerItem.smallTextClassName="scrollerItemSmallLabel";Mscrm.ScrollerItem.scrollerItemClassName="scrollerItem";Mscrm.ScrollerPopup.triggerHidePopupEventKey="triggerHidePopupEvent";Mscrm.TimeScroller.datePropertyName="date";Mscrm.TimeScroller.showPopupEventKey="showPopupEvent"