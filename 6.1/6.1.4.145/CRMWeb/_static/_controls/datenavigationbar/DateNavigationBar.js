Type.registerNamespace("Mscrm");Mscrm.IDateNavigationHost=function(){};Mscrm.IDateNavigationHost.registerInterface("Mscrm.IDateNavigationHost");Mscrm.DateNavigationBar=function(element){this.$$d_handleDateChange=Function.createDelegate(this,this.handleDateChange);Mscrm.DateNavigationBar.initializeBase(this,[element])};Mscrm.DateNavigationBar.prototype={$1_3:null,$5_3:12,$7_3:null,$4_3:null,$9_3:null,$3_3:null,$0_3:null,$C_3:false,get_$6_3:function(){if(IsNull(this.$7_3))this.$7_3=$get("dateValue");return this.$7_3},get_$H_3:function(){return this.get_$6_3().value},get_$J_3:function(){return $get("crmGrid")},get_$I_3:function(){return $get("frmGrid")},get_dateIncrement:function(){return this.$5_3},set_dateIncrement:function(value){this.$5_3=value;return value},get_baseButtonId:function(){return this.$4_3},set_baseButtonId:function(value){this.$4_3=value;return value},get_useLocal:function(){return this.$C_3.toString().toLowerCase()==="true"},set_useLocal:function(value){this.$C_3=value;return value},get_$K_3:function(){if(IsNull(this.$9_3)&&!IsNull(this.$4_3))this.$9_3=$get(String.format("{0}1",this.$4_3));return this.$9_3},get_$A_3:function(){return this.$3_3.get_currentDateUTC()},set_$A_3:function($p0){this.$3_3.set_currentDateUTC($p0);return $p0},initialize:function(){Mscrm.CrmUIControl.prototype.initialize.call(this);this.$G_3()},dispose:function(){if(this.get_isDisposed())return;$removeHandler(this.get_$6_3(),"change",this.$$d_handleDateChange);Mscrm.CrmUIControl.prototype.dispose.call(this)},$G_3:function(){InitCalendar(window.USER_DATE_FORMATSTRING,window.USER_DATE_SEPARATOR,window.ORG_DATE_START_DAY,null,null);this.$1_3=this.get_$J_3();if(!IsNull(this.$1_3))this.$3_3=new Mscrm.GridControlHost(this.$1_3);else{this.$1_3=this.get_$I_3();this.$3_3=new Mscrm.FormElementHost(this.$1_3)}this.$0_3=this.get_useLocal()?Mscrm.DateTimeUtility.localDateTimeNow():new Date;if(IsNull(this.$1_3));$addHandler(this.get_$6_3(),"change",this.$$d_handleDateChange)},handleDateChange:function(eventArgs){this.$0_3.setTime(Mscrm.DateTimeUtility.parseDate(this.get_$H_3()).getTime());this.set_$A_3(this.$0_3);this.$E_3();this.$F_3()},$D_3:function($p0){this.$0_3=this.get_$A_3();this.$0_3.setDate(1);this.$0_3.setMonth(this.$0_3.getMonth()+this.$5_3*$p0);this.set_$A_3(this.$0_3);this.$E_3();this.$F_3()},nextDate:function(){this.$D_3(1)},previousDate:function(){this.$D_3(-1)},launchCalendar:function(domEventObject){var $v_0=$get("calendarContainer");if(IsNull($v_0)){$v_0=document.createElement("span");$v_0.id="calendarContainer";$v_0.innerHTML=domEventObject.target.innerHTML;domEventObject.target.innerHTML="";domEventObject.target.appendChild($v_0)}LaunchCalendar($v_0,this.get_$6_3(),this.$0_3,1,false,null,"ReturnDate(this, true);",0,null,true)},$F_3:function(){this.$3_3.refresh()},$E_3:function(){var $v_0=parseInt(this.$5_3)===12?Mscrm.DateTimeUtility.getCalendarYear(this.$0_3):Mscrm.DateTimeUtility.formatDate(this.$0_3,"y");this.get_$K_3().innerHTML=String.format("&nbsp;{0}&nbsp;",CrmEncodeDecode.CrmHtmlEncode($v_0))}};Mscrm.GridControlHost=function($p0){this.$2_0=$p0};Mscrm.GridControlHost.prototype={$2_0:null,$8_0:null,get_$B_0:function(){if(IsNull(this.$8_0))this.$8_0=$find(this.$2_0.id);return this.$8_0},get_currentDateUTC:function(){return ParseUtcDate(this.get_$B_0().GetParameter("date"))},set_currentDateUTC:function($p0){this.get_$B_0().SetParameter("date",FormatUtcDate($p0));return $p0},refresh:function(){this.get_$B_0().Refresh()}};Mscrm.FormElementHost=function($p0){this.$2_0=$p0};Mscrm.FormElementHost.prototype={$2_0:null,get_currentDateUTC:function(){var $v_0=this.$2_0.date,$v_1=$v_0.value;return ParseUtcDate($v_1)},set_currentDateUTC:function($p0){var $v_0=this.$2_0.date;$v_0.value=FormatUtcDate($p0);return $p0},refresh:function(){this.$2_0.submit()}};Mscrm.DateNavigationBar.registerClass("Mscrm.DateNavigationBar",Mscrm.CrmUIControl);Mscrm.GridControlHost.registerClass("Mscrm.GridControlHost",null,Mscrm.IDateNavigationHost);Mscrm.FormElementHost.registerClass("Mscrm.FormElementHost",null,Mscrm.IDateNavigationHost)