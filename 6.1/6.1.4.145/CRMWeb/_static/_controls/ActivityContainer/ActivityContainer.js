Type.registerNamespace("Mscrm");Mscrm.CheckBoxStatus=function(){};Mscrm.CheckBoxStatus.prototype={yes:1,no:0};Mscrm.CheckBoxStatus.registerEnum("Mscrm.CheckBoxStatus",false);Mscrm.ActivityCommandBarCommand=function(){};Mscrm.ActivityCommandBarCommand.prototype={addPhoneCall:0,addTask:1,selectFilter:2,moreActivities:3,addEmail:4,addAppointment:5,addCustomActivity:6};Mscrm.ActivityCommandBarCommand.registerEnum("Mscrm.ActivityCommandBarCommand",false);Mscrm.ActivityContainer=function(element){Mscrm.ActivityContainer.initializeBase(this,[element])};Mscrm.ActivityContainer.get_parentFormInitializationCompleted=function(){return Mscrm.ActivityContainer.$O};Mscrm.ActivityContainer.set_parentFormInitializationCompleted=function(value){Mscrm.ActivityContainer.$O=value;return value};Mscrm.ActivityContainer.get_activitiesWallFilter=function(){if(!Mscrm.ActivityContainer.$D){Mscrm.ActivityContainer.$D=Mscrm.CrmUIComponent.crmCreate(Mscrm.ActivityCommandBarButton,null,null,null,$get("activityWallFilterButton"));Mscrm.ActivityContainer.$D.get_menu().changeSelectedMenuItem(Mscrm.ActivityContainerConstants.activitiesWallFilterButtonId()[Mscrm.FormInputControl.ActivityWallFilter.allActivities])}return Mscrm.ActivityContainer.$D};Mscrm.ActivityContainer.get_moreActivitiesButton=function(){if(!Mscrm.ActivityContainer.$N)Mscrm.ActivityContainer.$N=Mscrm.CrmUIComponent.crmCreate(Mscrm.ActivityCommandBarButton,null,null,null,$get("moreActivitiesButton"));return Mscrm.ActivityContainer.$N};Mscrm.ActivityContainer.activityBarClick=function(select,command,eventObject){if(!Mscrm.ActivityContainer.$O)return;switch(command){case 0:Mscrm.ActivityContainer.$i(Mscrm.EntityTypeCode.PhoneCall,select);Mscrm.ActivityContainer.changeNotchPosition(select);break;case 1:Mscrm.ActivityContainer.$i(Mscrm.EntityTypeCode.Task,select);Mscrm.ActivityContainer.changeNotchPosition(select);break;case 2:if(Mscrm.InlineEditDataService.get_formEntity()&&Mscrm.InlineEditDataService.get_formEntity().get_isNew())break;Mscrm.ActivityContainer.get_activitiesWallFilter().get_menu().processAndShowMenu();break;case 3:if(Mscrm.InlineEditDataService.get_formEntity()&&Mscrm.InlineEditDataService.get_formEntity().get_isNew())break;Mscrm.ActivityContainer.get_moreActivitiesButton().get_menu().processAndShowMenu();break}};Mscrm.ActivityContainer.changeNotchPosition=function(select){if(IsNull(select))return;var $v_0=select.offsetLeft,$v_1=select.offsetParent.offsetWidth;Mscrm.ActivityContainer.$Y=select.offsetWidth/2-Mscrm.ActivityContainer.$q;var $v_2=$v_0+Mscrm.ActivityContainer.$Y;$v_2=$v_2>=$v_1?($v_0+$v_1)/2:$v_2;var $v_3=$v_2+"px",$v_4=$P_CRM($get("activitycontainer"+Mscrm.ActivityContainer.$6));$v_4.find("b.notch").css("left",$v_3)};Mscrm.ActivityContainer.selectActivityWallFilter=function(id){Mscrm.ActivityContainer.get_activitiesWallFilter().get_menu().changeSelectedMenuItem(id);Mscrm.ActivityContainer.changeNotchPosition(Mscrm.ActivityContainer.$S);Mscrm.ActivityContainer.$p(Mscrm.ActivityContainer.$V,Mscrm.FormInputControl.WallCommands.refreshAllCommandName,null)};Mscrm.ActivityContainer.$u=function(){for(var $v_0=Mscrm.ActivityContainer.get_activitiesWallFilter().get_menu().get_currentMenu(),$v_1=0;$v_1<Mscrm.ActivityContainerConstants.activitiesWallFilterButtonId().length;$v_1++)if(!$v_0.localeCompare(Mscrm.ActivityContainerConstants.activitiesWallFilterButtonId()[$v_1]))return $v_1;return -1};Mscrm.ActivityContainer.$i=function($p0,$p1){var $v_0="activitycontainer"+$p0;if(Mscrm.ActivityContainer.$6!==$p0){var $v_2="activitycontainer"+Mscrm.ActivityContainer.$6,$v_3=$get($v_2);if(!IsNull($v_3))$v_3.style.display="none";var $v_4=$get($v_0);if($v_4)$v_4.style.display="block"}var $v_1=$get($v_0);if(!IsNull($v_1)){var $v_5=$v_1.parentNode.parentNode.parentNode,$v_6=0;if(XUI.Html.GetComputedStyle($v_5,"overflowX")==="visible")$v_6=$v_5.clientWidth;else{$v_5.style.overflow="scroll";$v_6=$v_5.clientWidth;$v_5.style.overflow=""}$v_1.style.width=$v_6-5+"px"}Mscrm.ActivityContainer.$6=$p0;Mscrm.ActivityContainer.$S=$p1;Mscrm.ActivityContainer.$11($p0)};Mscrm.ActivityContainer.openNewActivityCreateFormInline=function(activityTypeCode){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_1=$v_0.get_parentFormDataEntity(),$v_2=Mscrm.InlineEditDataService.get_formEntity().get_recordId(),$v_3=Mscrm.InlineEditDataService.get_formEntity().get_recordName(),$v_4=$v_1.get_typeName(),$v_5=String.format("regardingobjectid={0}&regardingobjecttypecode={1}&regardingobjectidname={2}",CrmEncodeDecode.CrmUrlEncode($v_2),CrmEncodeDecode.CrmUrlEncode($v_4),CrmEncodeDecode.CrmUrlEncode($v_3));if($v_4===Mscrm.EntityLogicalNames.Account||$v_4===Mscrm.EntityLogicalNames.Contact||$v_4===Mscrm.EntityLogicalNames.Lead){$v_5+="&partyid="+CrmEncodeDecode.CrmUrlEncode($v_2);$v_5+="&partytype="+CrmEncodeDecode.CrmUrlEncode(Xrm.Internal.getEntityCode($v_4).toString());$v_5+="&partyname="+CrmEncodeDecode.CrmUrlEncode($v_3)}else{var $v_7=Mscrm.AddActivity.getPartyDetailsForRefreshForm(Xrm.Internal.getEntityCode($v_4));if(!IsNull($v_7)){var $v_8=$v_7;$v_5+="&partyid="+CrmEncodeDecode.CrmUrlEncode($v_8[0].id);$v_5+="&partytype="+CrmEncodeDecode.CrmUrlEncode(Xrm.Internal.getEntityCode($v_8[0].entityType).toString());$v_5+="&partyname="+CrmEncodeDecode.CrmUrlEncode($v_8[0].name)}}var $v_6={};$v_6["preservePreviousContent"]=true;openFrmObj($v_5,null,activityTypeCode,null,Mscrm.NavigationMode.DefaultNavigationMode,$v_6)};Mscrm.ActivityContainer.$11=function($p0){var $v_0="",$v_1="";switch($p0){case Mscrm.EntityTypeCode.PhoneCall:$v_0=Mscrm.ActivityContainer.$2;$v_1="description";Mscrm.ActivityContainer.initializePhoneCallQuickForm();break;case Mscrm.EntityTypeCode.Task:$v_0=Mscrm.ActivityContainer.$G;$v_1="subject";!Mscrm.ActivityContainer.$T&&Mscrm.ActivityContainer.initializeTaskQuickForm();var $v_2=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$G),$v_3=$v_2.get_formDataEntityObject().get_attributes().get("subject");Mscrm.ActivityContainer.$I($v_3);var $v_4=$v_2.get_formDataEntityObject().get_attributes().get("ownerid");Mscrm.ActivityContainer.$I($v_4);break;default:break}var $v_5=Mscrm.QuickFormBehavior.getBehaviorById($v_0);!IsNull($v_5)&&$v_5.setEditMode($v_1)};Mscrm.ActivityContainer.focusOnPhoneActivity=function(){Mscrm.ActivityContainer.activityBarClick(null,0,null);var $v_0=$find(String.format("{0}{1}",Mscrm.InlineEditConstants.FormDataEntityIdPrefix,Mscrm.QuickFormBehavior.getQuickFormDomId(Mscrm.ActivityContainer.$P))),$v_1=$v_0.get_attributes().get("directioncode");if(!IsNull($v_1)){$v_1.resetValue(1);$v_1.fireOnChange()}var $v_2=$get(Mscrm.ActivityContainer.$4+"description");$v_2&&Mscrm.Utilities.click(XUI.Html.DomUtils.GetFirstChild($v_2))};Mscrm.ActivityContainer.$o=function(){var $v_0=$P_CRM($get(Mscrm.ActivityContainer.$4+"subject_d"));$v_0&&$v_0.parents("tr").first().hide()};Mscrm.ActivityContainer.enableActivityCommandBar=function(){var $v_0=$P_CRM($get("activityWallFilterButton"));if($v_0&&$v_0.hasClass(Mscrm.ActivityContainer.$7)){$v_0.removeClass(Mscrm.ActivityContainer.$7);var $v_2=$v_0.parents("span");$v_2.find(".activityMoreCommands").removeAttr("style");$v_2.find(".activity-filter-image").attr("src","/_imgs/Activitiesdropdown.png")}var $v_1=$P_CRM($get("moreActivitiesButton"));if($v_1&&$v_1.hasClass(Mscrm.ActivityContainer.$7)){$v_1.removeClass(Mscrm.ActivityContainer.$7);$v_1.children("img").filter(".activityMoreCommandsImage").attr("src","/_imgs/More_16.png")}};Mscrm.ActivityContainer.initializeActivityContainer=function(){Mscrm.ActivityContainer.initializePhoneCallQuickForm();Mscrm.ActivityContainer.initializeTaskQuickForm()};Mscrm.ActivityContainer.initializePhoneCallQuickForm=function(){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2);if(IsNull($v_0))return;var $v_1=$v_0.get_formDataEntityObject().get_attributes().get("from");Mscrm.ActivityContainer.$j($v_1);var $v_2=$v_0.get_formDataEntityObject().get_attributes().get("to");Mscrm.ActivityContainer.$j($v_2);$v_0.disableWarningsOnAllControls();$v_0.setDefaultEmptyValuePlaceholderText("description",Mscrm.ActivityContainer.$9);var $v_3=$get(Mscrm.ActivityContainer.$4+"description_i");$v_3.title=Mscrm.ActivityContainer.$c;$v_3.style.border="0px";if(IsNull(Mscrm.ActivityContainer.$B))Mscrm.ActivityContainer.$B=Mscrm.ActivityContainer.$v();var $v_4=$v_0.get_formDataEntityObject().get_attributes().get("directioncode"),$v_5=function($p1_0){window.setTimeout(function(){Mscrm.ActivityContainer.$Z(null)},10)};$v_4.addOnChange($v_5,false);Mscrm.ActivityContainer.$z();Mscrm.ActivityContainer.$Q($v_0.get_parentFormDataEntity(),true);Mscrm.ActivityContainer.$I($v_2);if($v_4.get_value()===1){Mscrm.ActivityContainer.$I($v_2);$v_2.resetValue(Mscrm.ActivityContainer.$1);$v_2.fireOnChange()}else{Mscrm.ActivityContainer.$I($v_1);$v_1.resetValue(Mscrm.ActivityContainer.$1);$v_1.fireOnChange()}Mscrm.ActivityContainer.$12();Mscrm.ActivityContainer.$l();var $v_6=$v_0.get_formDataEntityObject().get_attributes().get("subject");$v_6.resetValue(null)};Mscrm.ActivityContainer.$H=function($p0){if(!IsNull($p0))if(!($p0.get_name() in Mscrm.ActivityContainer.$5)){var $v_0=function($p1_0){Mscrm.ActivityContainer.$x()};$p0.addOnChange($v_0,false);Mscrm.ActivityContainer.$5[$p0.get_name()]=$v_0}};Mscrm.ActivityContainer.$Q=function($p0,$p1){switch($p0.get_typeName()){case Mscrm.EntityLogicalNames.Incident:var $v_0=$p0.get_attributes().get("customerid");if($p1&&!IsNull(Mscrm.ActivityContainer.$1))return;Mscrm.ActivityContainer.$H($v_0);Mscrm.ActivityContainer.$w();Mscrm.ActivityContainer.$1=!IsNull($v_0)?$v_0.get_value():null;break;case Mscrm.EntityLogicalNames.Account:var $v_1=$p0.get_attributes().get("primarycontactid");if(!IsNull($v_1)&&!IsNull($v_1.get_value()))Mscrm.ActivityContainer.$1=$v_1.get_value();else if(!isNullOrEmptyString($p0.get_recordId())&&!isNullOrEmptyString($p0.get_recordName()))Mscrm.ActivityContainer.$1=Mscrm.ActivityContainer.$W($p0.get_recordName(),$p0.get_recordId(),Mscrm.EntityTypeCode.Account,Mscrm.EntityLogicalNames.Account);Mscrm.ActivityContainer.$H($v_1);Mscrm.ActivityContainer.$f($p0);Mscrm.ActivityContainer.$e($p0);break;case Mscrm.EntityLogicalNames.Contact:if(!isNullOrEmptyString($p0.get_recordId())&&!isNullOrEmptyString($p0.get_recordName()))Mscrm.ActivityContainer.$1=Mscrm.ActivityContainer.$W($p0.get_recordName(),$p0.get_recordId(),Mscrm.EntityTypeCode.Contact,Mscrm.EntityLogicalNames.Contact);Mscrm.ActivityContainer.$f($p0);Mscrm.ActivityContainer.$e($p0);break;case Mscrm.EntityLogicalNames.Opportunity:var $v_2=$p0.get_attributes().get("parentcontactid");if(!IsNull($v_2)){Mscrm.ActivityContainer.$H($v_2);Mscrm.ActivityContainer.$1=$v_2.get_value()}var $v_3=$p0.get_attributes().get("parentaccountid");if(!IsNull($v_3)){Mscrm.ActivityContainer.$H($v_3);if(IsNull(Mscrm.ActivityContainer.$1))Mscrm.ActivityContainer.$1=$v_3.get_value()}break;case Mscrm.EntityLogicalNames.Lead:$v_2=$p0.get_attributes().get("parentcontactid");if(!IsNull($v_2)&&!IsNull($v_2.get_value()))Mscrm.ActivityContainer.$1=$v_2.get_value();else if(!isNullOrEmptyString($p0.get_recordId())&&!IsNull($p0.get_recordName()))Mscrm.ActivityContainer.$1=Mscrm.ActivityContainer.$W($p0.get_recordName(),$p0.get_recordId(),Mscrm.EntityTypeCode.Lead,Mscrm.EntityLogicalNames.Lead);Mscrm.ActivityContainer.$H($v_2);Mscrm.ActivityContainer.$f($p0);Mscrm.ActivityContainer.$e($p0);break;default:break}};Mscrm.ActivityContainer.$e=function($p0){if(!(Mscrm.ActivityContainer.$a in Mscrm.ActivityContainer.$5)){var $v_0=function($p1_0){Mscrm.ActivityContainer.$Q($p0,false);Mscrm.ActivityContainer.$g()};$p0.addOnRecordIdChanged($v_0,false);Mscrm.ActivityContainer.$5[Mscrm.ActivityContainer.$a]=$v_0}};Mscrm.ActivityContainer.$f=function($p0){if(!(Mscrm.ActivityContainer.$b in Mscrm.ActivityContainer.$5)){var $v_0=function($p1_0){Mscrm.ActivityContainer.$Q($p0,false);Mscrm.ActivityContainer.$g()};$p0.addOnRecordNameChanged($v_0,false);Mscrm.ActivityContainer.$5[Mscrm.ActivityContainer.$b]=$v_0}};Mscrm.ActivityContainer.$w=function(){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_1=$v_0.get_parentFormDataEntity().get_attributes().get("existingcase");if(!IsNull($v_1)){Mscrm.ActivityContainer.$K=Mscrm.ActivityContainer.$n($v_1);if(IsNull(Mscrm.ActivityContainer.$L)){Mscrm.ActivityContainer.$L=function($p1_0){var $v_2=Mscrm.ActivityContainer.$n($v_1);if(Mscrm.ActivityContainer.$K!==$v_2){Mscrm.ActivityContainer.$M=true;Mscrm.ActivityContainer.$K=$v_2}};$v_1.addOnChange(Mscrm.ActivityContainer.$L,false)}}};Mscrm.ActivityContainer.$W=function($p0,$p1,$p2,$p3){var $v_0=new Array(1);$v_0[0]=new LookupItem;$v_0[0].name=$p0;$v_0[0].id=$p1;$v_0[0].type=$p2.toString();$v_0[0].typename=$p3;return $v_0};Mscrm.ActivityContainer.$z=function(){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_1=$v_0.get_formDataEntityObject().get_attributes().get("directioncode");if(!IsNull($v_1)){var $v_2=1,$v_3=_activityTypeCode;if(!IsNull($v_3)&&Mscrm.EntityTypeCode.PhoneCall===$v_3)$v_2=0;$v_1.resetValue($v_2);$v_1.fireOnChange();Mscrm.ActivityContainer.hideRecipientSenderField($v_2);Mscrm.ActivityContainer.$J=$v_2}};Mscrm.ActivityContainer.$I=function($p0){$p0.get_controls().forEach(Mscrm.ActivityContainer.$y)};Mscrm.ActivityContainer.$j=function($p0){if(IsNull($p0))return;$p0.addOnChange(function($p1_0){var $v_0=$p1_0.getEventSource();if(IsNull($v_0))return;$v_0.controls.forEach(function($p2_0,$p2_1){!IsNull($p2_0)&&$p2_0.clearValidation()})},false)};Mscrm.ActivityContainer.$n=function($p0){if(IsNull($p0.get_value()))return null;var $v_0=$p0.get_value();return $v_0[0].id};Mscrm.ActivityContainer.$y=function($p0,$p1){var $v_0=$p0;$v_0.resetLayout()};Mscrm.ActivityContainer.$x=function(){var $v_0=Mscrm.ActivityContainer.$M;Mscrm.ActivityContainer.$M=false;var $v_1=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_2=Mscrm.ActivityContainer.$m();if(!IsNull($v_2)&&(!$v_0||IsNull($v_2.get_value()))){Mscrm.ActivityContainer.$Q($v_1.get_parentFormDataEntity(),false);Mscrm.ActivityContainer.$g()}};Mscrm.ActivityContainer.$m=function(){var $v_0=null,$v_1=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_2=$v_1.get_formDataEntityObject().get_attributes().get("directioncode");if(!IsNull($v_2)&&$v_2.get_value()===1)$v_0=$v_1.get_formDataEntityObject().get_attributes().get("to");else $v_0=$v_1.get_formDataEntityObject().get_attributes().get("from");return $v_0};Mscrm.ActivityContainer.$g=function(){var $v_0=Mscrm.ActivityContainer.$m();if(!IsNull($v_0)){$v_0.resetValue(Mscrm.ActivityContainer.$1);$v_0.fireOnChange()}};Mscrm.ActivityContainer.$12=function(){if(IsNull(Mscrm.ActivityContainer.$B))return;var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_1=$v_0.get_formDataEntityObject().get_attributes().get("directioncode");if(!IsNull($v_1)&&$v_1.get_value()===0){var $v_2=$v_0.get_formDataEntityObject().get_attributes().get("to");if(!IsNull($v_2)){$v_2.resetValue(Mscrm.ActivityContainer.$B);$v_2.fireOnChange()}}else{var $v_3=$v_0.get_formDataEntityObject().get_attributes().get("from");if(!IsNull($v_3)){$v_3.resetValue(Mscrm.ActivityContainer.$B);$v_3.fireOnChange()}}};Mscrm.ActivityContainer.$Z=function($p0){var $v_0=$get(Mscrm.ActivityContainer.$4+"directioncode_i"),$v_1=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_2=$v_1.get_formDataEntityObject().get_attributes().get("directioncode"),$v_3=function($p1_0){Mscrm.ActivityContainer.$Z(null)};$v_2.removeOnChange($v_3);if(!IsNull($v_1)&&Mscrm.ActivityContainer.$J!==$v_0.selectedIndex){var $v_4=$v_1.get_formDataEntityObject().get_attributes().get("from"),$v_5=$v_1.get_formDataEntityObject().get_attributes().get("to"),$v_6=$v_4.get_value();if(!IsNull($v_5)&&!IsNull($v_4)){var $v_7=$v_5.get_value();if($v_7)$v_4.resetValue([$v_7[0]]);else $v_4.resetValue(null);$v_4.fireOnChange()}if(!IsNull($v_5)){$v_5.resetValue($v_6);$v_5.fireOnChange()}}!IsNull($v_0)&&Mscrm.ActivityContainer.hideRecipientSenderField($v_0.selectedIndex);Mscrm.ActivityContainer.$J=$v_0.selectedIndex};Mscrm.ActivityContainer.hideRecipientSenderField=function(selectedIndex){var $v_0=$P_CRM($get(Mscrm.ActivityContainer.$4+"from_d")),$v_1=$P_CRM($get(Mscrm.ActivityContainer.$4+"to_d"));if(selectedIndex===0){$v_1.parents("tr").first().hide();$v_0.parents("tr").first().show()}else{$v_1.parents("tr").first().show();$v_0.parents("tr").first().hide()}};Mscrm.ActivityContainer.$v=function(){var $v_0=new Array(1);$v_0[0]=new LookupItem;$v_0[0].id=Xrm.Page.context.getUserId();$v_0[0].name=Xrm.Page.context.getUserName();$v_0[0].typename="systemuser";return $v_0};Mscrm.ActivityContainer.initializeTaskQuickForm=function(){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$G);if(!IsNull($v_0)){$v_0.disableWarningsOnAllControls();$v_0.setDefaultEmptyValuePlaceholderText("description",Mscrm.ActivityContainer.$A)}var $v_1=$v_0.get_formDataEntityObject().get_attributes().get("subject");$v_1.resetValue(null);Mscrm.ActivityContainer.$T=true};Mscrm.ActivityContainer.inlineActivityFormAction=function(command,activityTypeCode,quickFormId){switch(command){case "save":window.setTimeout(function(){Mscrm.ActivityContainer.$k(activityTypeCode);var $v_0=Mscrm.ActivityContainer.$10(quickFormId);if($v_0.get_code()!==Mscrm.SaveResponseCode.saveSuccessfullyInitiated){Mscrm.ErrorStatusControl.showError($v_0.get_message(),true);Mscrm.ActivityContainer.$o()}else Mscrm.ActivityContainer.hideQuickForm(activityTypeCode,null)},0);break;case "cancel":window.setTimeout(function(){Mscrm.ActivityContainer.$k(activityTypeCode);Mscrm.ActivityContainer.hideQuickForm(activityTypeCode,function(){Mscrm.ActivityContainer.$s(quickFormId)})},0);break;case "default":break}};Mscrm.ActivityContainer.$k=function($p0){if($p0===Mscrm.EntityTypeCode.PhoneCall){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById(Mscrm.ActivityContainer.$2),$v_1=$v_0.get_formDataEntityObject().get_attributes().get("directioncode"),$v_2=function($p1_0){Mscrm.ActivityContainer.$Z(null)};$v_1.removeOnChange($v_2)}};Mscrm.ActivityContainer.hideQuickForm=function(activityTypeCode,callbackAfterSlideUpCompletes){var $v_0=$get("activitycontainer"+activityTypeCode);if($v_0){if(IsNull(callbackAfterSlideUpCompletes))callbackAfterSlideUpCompletes=function(){};$P_CRM($get("activitycontainer"+activityTypeCode)).slideUp(500,callbackAfterSlideUpCompletes)}Mscrm.ActivityContainer.$6=-1;activityTypeCode===Mscrm.EntityTypeCode.PhoneCall&&Mscrm.ActivityContainer.$l();var $v_1=$get(Mscrm.ActivityContainer.$8+activityTypeCode);$v_1.focus()};Mscrm.ActivityContainer.$10=function($p0){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById($p0);$v_0.add_successEvent(Mscrm.ActivityContainer.$d);$v_0.add_failureEvent(Mscrm.ActivityContainer.$X);Mscrm.ActivityContainer.$P=$p0;if($p0&&$p0===Mscrm.ActivityContainer.$2){var $v_2=$find(String.format("{0}{1}",Mscrm.InlineEditConstants.FormDataEntityIdPrefix,Mscrm.QuickFormBehavior.getQuickFormDomId($p0))),$v_3=$v_2.get_attributes().get("subject"),$v_4=$v_2.get_attributes().get("description");if("description"){$v_3.resetValue(Mscrm.ActivityContainer.$t($v_4.get_value()));$v_3.fireOnChange()}}var $v_1=null;if(Mscrm.InlineEditDataService.get_formEntity()&&!Mscrm.InlineEditDataService.get_formEntity().get_isNew()&&!$v_0.get_formDataEntityObject().get_typeName().localeCompare(Mscrm.EntityLogicalNames.PhoneCall)&&window.MakeSocialPanePhoneCallCompleted)$v_1=$v_0.saveAsCompleted();else $v_1=$v_0.save();if($v_1.get_code()!==Mscrm.SaveResponseCode.saveSuccessfullyInitiated){$v_0.remove_successEvent(Mscrm.ActivityContainer.$d);$v_0.remove_failureEvent(Mscrm.ActivityContainer.$X)}return $v_1};Mscrm.ActivityContainer.$t=function($p0){if(isNullOrEmptyString($p0))return null;var $v_0,$v_1,$v_2;$v_2=Mscrm.ActivityContainer.$R<100?Mscrm.ActivityContainer.$R:100;Mscrm.ActivityContainer.$3=$p0;if(Mscrm.ActivityContainer.$3.length>$v_2){Mscrm.ActivityContainer.$3=Mscrm.ActivityContainer.$3.substring(0,$v_2-Mscrm.ActivityContainer.$F.length);$v_0=Mscrm.ActivityContainer.$3.lastIndexOf(" ");$v_1=Mscrm.ActivityContainer.$3.lastIndexOf("\t");if($v_0>$v_1)Mscrm.ActivityContainer.$3=Mscrm.ActivityContainer.$3.substring(0,$v_0)+Mscrm.ActivityContainer.$F;else Mscrm.ActivityContainer.$3=Mscrm.ActivityContainer.$3.substring(0,$v_1)+Mscrm.ActivityContainer.$F}return Mscrm.ActivityContainer.$3.replace("\n"," ")};Mscrm.ActivityContainer.$r=function($p0){Mscrm.QuickFormBehavior.getBehaviorById($p0.get_uniqueId()).remove_failureEvent(Mscrm.ActivityContainer.$X);Mscrm.QuickFormBehavior.getBehaviorById($p0.get_uniqueId()).remove_successEvent(Mscrm.ActivityContainer.$d)};Mscrm.ActivityContainer.$X=function($p0,$p1){Mscrm.ActivityContainer.$r($p1)};Mscrm.ActivityContainer.$d=function($p0,$p1){Mscrm.ActivityContainer.$r($p1);var $v_0=Mscrm.FormInputControl.WallCommands.prependToWall,$v_1=[$p1.get_jsonData()];Mscrm.ActivityContainer.$p(Mscrm.ActivityContainer.$V,$v_0,$v_1)};Mscrm.ActivityContainer.$s=function($p0){var $v_0=Mscrm.QuickFormBehavior.getBehaviorById($p0);$v_0.clear()};Mscrm.ActivityContainer.$p=function($p0,$p1,$p2){var $v_0=$find($p0);$v_0.get_wallCommandDispatcher().set_wallFilter(Mscrm.ActivityContainer.$u());var $$t_4;($$t_4=$v_0.get_wallCommandDispatcher()).dispatchCommand.apply($$t_4,[$p1].concat($p2))};Mscrm.ActivityContainer.voicemailChecked=function(checkBoxId){var $v_0=$get(checkBoxId),$v_1=$find(String.format("{0}{1}",Mscrm.InlineEditConstants.FormDataEntityIdPrefix,Mscrm.QuickFormBehavior.getQuickFormDomId(Mscrm.ActivityContainer.$P))),$v_2=$v_1.get_attributes().get("leftvoicemail");if($v_0&&$v_2){if($v_0.checked)$v_2.set_value(1);else $v_2.set_value(0);$v_2.fireOnChange()}};Mscrm.ActivityContainer.onCheckBoxKeyDown=function(domEvent,checkBoxId){if(domEvent.keyCode===32&&!Mscrm.Utilities.isFirefox()){domEvent.preventDefault();var $v_0=$get(checkBoxId);$v_0.click();domEvent.stopPropagation()}};Mscrm.ActivityContainer.$l=function(){var $v_0=$get(Mscrm.ActivityContainer.$C);$v_0.checked=Boolean.parse(Mscrm.CheckBoxStatus.toString(0))};Mscrm.ActivityContainer.prototype={$U_3:null,$h_3:false,get_masterComponentId:function(){return this.$U_3},set_masterComponentId:function(value){this.$U_3=value;return value},get_isControlReadOnly:function(){return this.$h_3},set_isControlReadOnly:function(value){this.$h_3=value;return value},handleEvent:function(eventCode,parameters,sourceComponent){Mscrm.CrmUIControl.prototype.handleEvent.call(this,eventCode,parameters,sourceComponent);switch(eventCode){case Mscrm.ScriptEvents.RefreshActivityContainer:this.$U_3===sourceComponent.get_id()&&this.get_eventManager().raiseEvent(Mscrm.ScriptEvents.RefreshActivitiesWall,parameters,this);break;case Mscrm.ScriptEvents.IFrameReactivated:if(IsNull(parameters[Mscrm.FormInputControl.Tabs.RefreshTabEventParameters.entityId])){parameters[Mscrm.FormInputControl.Tabs.RefreshTabEventParameters.entityId]=Mscrm.InlineEditDataService.get_formEntity().get_recordId();this.get_eventManager().raiseEvent(Mscrm.ScriptEvents.RefreshActivitiesWall,parameters,this)}break}return null},initialize:function(){Mscrm.CrmUIControl.prototype.initialize.call(this);if(!IsNull(this.get_eventManager())){this.get_eventManager().subscribeEvent(Mscrm.ScriptEvents.RefreshActivityContainer,this.get_id());this.get_eventManager().subscribeEvent(Mscrm.ScriptEvents.IFrameReactivated,this.get_id())}Mscrm.ActivityContainer.$4=window.self.PHONECALL_QUICKFORM_CONTROL_PREFIX;Mscrm.ActivityContainer.$2=window.self.PHONECALL_QUICKFORM_ID;Mscrm.ActivityContainer.$G=window.self.TASK_QUICKFORM_ID;Mscrm.ActivityContainer.$F=window.self.ELLIPSES_CONSTANT_TEXT;Mscrm.ActivityContainer.$R=window.self.MAX_SUBJECT_LENGTH_FOR_PHONECALL;Mscrm.ActivityContainer.$c=window.self.PHONECALL_DESCRIPTION_ATTRIBUTE_NAME;Mscrm.ActivityContainer.$9=window.self.ACTIVITY_PHONECALL_DESCRIPTION_EMPTYVALUE_PLACEHOLDER_TEXT;Mscrm.ActivityContainer.$9=!Mscrm.ActivityContainer.$9?Mscrm.InlineEditConstants.DefaultEmptyValuePlaceholder:Mscrm.ActivityContainer.$9;Mscrm.ActivityContainer.$A=window.self.ACTIVITY_TASK_DESCRIPTION_EMPTYVALUE_PLACEHOLDER_TEXT;Mscrm.ActivityContainer.$A=!Mscrm.ActivityContainer.$A?Mscrm.InlineEditConstants.DefaultEmptyValuePlaceholder:Mscrm.ActivityContainer.$A;Mscrm.ActivityContainer.$E=window.self.ACTIVITY_SUBJECT_EMPTYVALUE_PLACEHOLDER_TEXT;Mscrm.ActivityContainer.$E=!Mscrm.ActivityContainer.$E?Mscrm.InlineEditConstants.DefaultEmptyValuePlaceholder:Mscrm.ActivityContainer.$E;Mscrm.ActivityContainer.$C=window.self.PHONECALL_LEFTVOICEMAIL_CHECKBOXID;Mscrm.ActivityContainer.$C=!Mscrm.ActivityContainer.$C?Mscrm.InlineEditConstants.DefaultEmptyValuePlaceholder:Mscrm.ActivityContainer.$C;Mscrm.ActivityContainer.$8=window.self.ACTIVITYBAR_PREFIX;Mscrm.ActivityContainer.$8=!Mscrm.ActivityContainer.$8?Mscrm.InlineEditConstants.DefaultEmptyValuePlaceholder:Mscrm.ActivityContainer.$8;var $v_0=_activityTypeCode;if(!IsNull($v_0)&&-1!==$v_0){var $v_2=$get("activitycontainer"+$v_0);if(!IsNull($v_2)){$v_2.style.display="block";Mscrm.ActivityContainer.$6=$v_0}}Mscrm.ActivityContainer.$o();Mscrm.ActivityContainer.hideRecipientSenderField(0);var $v_1=$P_CRM($get(Mscrm.ActivityContainer.$4+"leftvoicemail"));$v_1&&$v_1.parents("tr").first().hide();if(Mscrm.InlineEditDataService.get_formEntity()&&Mscrm.InlineEditDataService.get_formEntity().get_isNew()){var $v_3=$P_CRM($get("activityWallFilterButton"));if(!IsNull($v_3)){$v_3.addClass(Mscrm.ActivityContainer.$7);var $v_5=$v_3.parents("span");$v_5.find(".activityMoreCommands").css("background-color","white");$v_5.find(".activity-filter-image").attr("src","/_imgs/Activitiesdropdown_disabled.png")}var $v_4=$P_CRM($get("moreActivitiesButton"));if(!IsNull($v_4)){$v_4.children("img").filter(".activityMoreCommandsImage").attr("src","/_imgs/moredisabled.png");$v_4.addClass(Mscrm.ActivityContainer.$7)}}}};Mscrm.ActivityContainerConstants=function(){};Mscrm.ActivityContainerConstants.activitiesWallFilterButtonId=function(){return ["AllActivitiesButton","OpenActivitiesButton","OverdueActivitiesButton"]};Mscrm.ActivityContainer.registerClass("Mscrm.ActivityContainer",Mscrm.CrmUIControl);Mscrm.ActivityContainerConstants.registerClass("Mscrm.ActivityContainerConstants");Mscrm.ActivityContainer.$6=-1;Mscrm.ActivityContainer.$4=null;Mscrm.ActivityContainer.$2=null;Mscrm.ActivityContainer.$G=null;Mscrm.ActivityContainer.$P="df202c21-8393-488d-b464-aa6c70c21f88";Mscrm.ActivityContainer.$9=null;Mscrm.ActivityContainer.$A=null;Mscrm.ActivityContainer.$E=null;Mscrm.ActivityContainer.$J=0;Mscrm.ActivityContainer.$F=null;Mscrm.ActivityContainer.$3=null;Mscrm.ActivityContainer.$R=0;Mscrm.ActivityContainer.$c=null;Mscrm.ActivityContainer.$C=null;Mscrm.ActivityContainer.$8=null;Mscrm.ActivityContainer.$M=false;Mscrm.ActivityContainer.$1=null;Mscrm.ActivityContainer.$K=null;Mscrm.ActivityContainer.$5={};Mscrm.ActivityContainer.$L=null;Mscrm.ActivityContainer.$B=null;Mscrm.ActivityContainer.$b="OnRecordNameChanged";Mscrm.ActivityContainer.$a="OnRecordIdChanged";Mscrm.ActivityContainer.$T=false;Mscrm.ActivityContainer.$O=false;Mscrm.ActivityContainer.$V="notescontrolactivityContainer_notescontrol_59697FC4-279B-4757-B43D-8B811A614A8A";Mscrm.ActivityContainer.$D=null;Mscrm.ActivityContainer.$N=null;Mscrm.ActivityContainer.$7="activityfilterdisabled";Mscrm.ActivityContainer.$S=null;Mscrm.ActivityContainer.$Y=-1;Mscrm.ActivityContainer.$q=10;Mscrm.ActivityContainerConstants.activityDivIdPrefix="activitycontainer";Mscrm.ActivityContainerConstants.phoneCallEntityTypeCode=Mscrm.EntityTypeCode.PhoneCall;Mscrm.ActivityContainerConstants.descriptionDivId="description";Mscrm.ActivityContainerConstants.processControlLookup="header_process_customer_i";Mscrm.ActivityContainerConstants.formLookup="customerid_i";Mscrm.ActivityContainerConstants.subjectTextBoxId="subject_d";Mscrm.ActivityContainerConstants.descriptionTextAreaId="description_i";Mscrm.ActivityContainerConstants.senderTextBoxId="from_d";Mscrm.ActivityContainerConstants.recipientTextBoxId="to_d";Mscrm.ActivityContainerConstants.directionCode="directioncode";Mscrm.ActivityContainerConstants.directionSelectionIndexId="directioncode_i";Mscrm.ActivityContainerConstants.subjectAttribute="subject";Mscrm.ActivityContainerConstants.descriptionAttribute="description";Mscrm.ActivityContainerConstants.ownerIdAttribute="ownerid";Mscrm.ActivityContainerConstants.senderAttribute="from";Mscrm.ActivityContainerConstants.recipientAttribute="to";Mscrm.ActivityContainerConstants.subjectCharacterLength=100;Mscrm.ActivityContainerConstants.leftVoicemailCode="leftvoicemail";Mscrm.ActivityContainerConstants.activityFilterButtonId="activityWallFilterButton";Mscrm.ActivityContainerConstants.moreActivitiesButtonId="moreActivitiesButton"