Type.registerNamespace("Microsoft.Crm.Client.Core.Offline");
Microsoft.Crm.Client.Core.Offline.$H9 = function() {};
Microsoft.Crm.Client.Core.Offline.$H9.registerInterface("Microsoft.Crm.Client.Core.Offline.$H9");
Microsoft.Crm.Client.Core.Offline.$H8 = function() {};
Microsoft.Crm.Client.Core.Offline.$H8.registerInterface("Microsoft.Crm.Client.Core.Offline.$H8");
Microsoft.Crm.Client.Core.Offline.$t = function() {};
Microsoft.Crm.Client.Core.Offline.$t.$7A = function(n) { return Xrm.Objects.AttributeType.toString(n) };
Microsoft.Crm.Client.Core.Offline.$t.prototype = {
    $17: function() { this.$2rT() },
    $2rT: function() {
        Microsoft.Crm.Client.Core.Offline.$t.$A7 = new(Microsoft.Crm.Client.Core.Framework.$8X
            .$$(Microsoft.Crm.Client.Core.Offline.$IS));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(21),
            new Microsoft.Crm.Client.Core.Offline.$IS({
                attributelogicalname: String,
                entitylogicalname: String,
                attributetype: Xrm.Objects.AttributeType
            }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(1),
            new Microsoft.Crm.Client.Core.Offline.$IS({
                id: Microsoft.Crm.Client.Core.Framework.Guid,
                logicalname: String,
                name: String
            }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(6),
            new Microsoft.Crm.Client.Core.Offline.$IS({
                id: Microsoft.Crm.Client.Core.Framework.Guid,
                logicalname: String,
                name: String
            }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(9),
            new Microsoft.Crm.Client.Core.Offline.$IS({
                id: Microsoft.Crm.Client.Core.Framework.Guid,
                logicalname: String,
                name: String
            }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(13),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(12),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(0),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(11),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(2),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": Number }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(14),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(15),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": Microsoft.Crm.Client.Core.Framework.Guid }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(3),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(4),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(5),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(7),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(8),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(-1),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(10),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(16),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(17),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(18),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(19),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }));
        Microsoft.Crm.Client.Core.Offline.$t.$A7.set_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(20),
            new Microsoft.Crm.Client.Core.Offline.$IS({ "": String }))
    },
    $1p5: function(n) {
        var t = Microsoft.Crm.Client.Core.Offline.$t.$7A(n);
        return!Microsoft.Crm.Client.Core.Framework.$3.$A(t) && Microsoft.Crm.Client.Core.Offline.$t.$A7.$3ZW(t)
            ? Microsoft.Crm.Client.Core.Offline.$t.$A7.get_$H(t)
            : null
    },
    $1p2: function(n) {
        var t = Microsoft.Crm.Client.Core.Offline.$t.$7A(n);
        return!Microsoft.Crm.Client.Core.Framework.$3.$A(t) && Microsoft.Crm.Client.Core.Offline.$t.$A7.$3ZW(t)
            ? Microsoft.Crm.Client.Core.Offline.$t.$A7.get_$H(t).$1jR
            : null
    },
    $2y0: function(n, t) {
        return Microsoft.Crm.Client.Core.Offline.$t.$A7 &&
            Microsoft.Crm.Client.Core.Offline.$t.$A7.$3ZW(Microsoft.Crm.Client.Core.Offline.$t.$7A(n))
            ? Microsoft.Crm.Client.Core.Offline.$t.$A7.get_$H(Microsoft.Crm.Client.Core.Offline.$t.$7A(n)).$rF.get_$H(t)
            : null
    },
    $tH: function(n) {
        switch (n) {
        case 21:
        case 1:
        case 6:
        case 9:
            return!0;
        default:
            return!1
        }
    }
};
Microsoft.Crm.Client.Core.Offline.$1G = function() {};
Microsoft.Crm.Client.Core.Offline.$1G.$17 = function(n, t) {
    Microsoft.Crm.Client.Core.Offline.$1G.$Em = new Microsoft.Crm.Client.Core.Offline.$t;
    Microsoft.Crm.Client.Core.Offline.$1G.$s1 = new Microsoft.Crm.Client.Core.Offline.$61;
    Microsoft.Crm.Client.Core.Offline.$1G.$Em.$17();
    Microsoft.Crm.Client.Core.Offline.$1G.$s1.$17(Microsoft.Crm.Client.Core.Offline.$1G.$Em);
    Microsoft.Crm.Client.Core.Offline.$1G.$2O2 = new Microsoft.Crm.Client.Core.Offline
        .$2d(Microsoft.Crm.Client.Core.Offline.$1G.$Em);
    Microsoft.Crm.Client.Core.Offline.$1G.$5Y = n;
    Microsoft.Crm.Client.Core.Offline.$1G.$1e = t
};
Microsoft.Crm.Client.Core.Offline.$1G.$2pu = function(n, t) {
    for (var v, f = n.$N.LogicalName, e = Microsoft.Crm.Client.Core.Offline.$1G.$5Y.$i(f), s = t, h = s.length, o = 0;
        o < h;
        ++o) {
        var r = s[o], u = Microsoft.Crm.Client.Core.Offline.$1G.$5Y.$2V(f, r), i = {};
        switch (r) {
        case"statecode":
            e.$OL &&
            (i.value = !$0.$1(u) && !$0.$1(u.$D8) ? u.$D8 : 0, n
                .initializeValue(r, Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$1N.$18(i), 12));
            break;
        case"statuscode":
            if (e.$OL && !$0.$1(n.getFieldObjectData("statecode"))) {
                var c = Microsoft.Crm.Client.Core.Offline.$1G.$5Y.$2V(f, "statecode"),
                    l = n.getFieldObjectData("statecode").value,
                    a = c.$7M.$2f[l.toString()].$df;
                i.value = a;
                n.initializeValue(r, Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$1N.$18(i), 13)
            }
            break;
        case"createdon":
        case"modifiedon":
            i[r] = new Date(Date.now());
            n.initializeValue(r, i[r], 2);
            break;
        case"createdby":
        case"modifiedby":
        case"ownerid":
            (r !== "ownerid" || e.$13o === 1) &&
            (i.id = Microsoft.Crm.Client.Core.Offline.$1G.$1e.$3G.getObjectData(), i.logicalname = "systemuser", i
                .name = Microsoft.Crm.Client.Core.Offline.$1G.$1e.$AN, v = $0.$1(u) ? r === "ownerid" ? 9 : 6 : u.$2R, n
                .initializeValue(r, Xrm.Objects.EntityReference.createFromObjectData(i), 6));
            break;
        default:
            u.$2R !== 11 && u.$2R ||
            (i.value = $0.$1(u.$D8) ? u.$At ? 1 : 0 : u.$D8, n
                .initializeValue(r, Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$1N.$18(i), u.$2R))
        }
    }
    return n
};
Microsoft.Crm.Client.Core.Offline.$1G.$z6 = function(n, t, i, r) {
    var u = {},
        c = {},
        p = new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.RelatedEntityCollection(new Array(0)),
        b = Microsoft.Crm.Client.Core.Offline.$1G.$s1.$2zE(i.get_$1l(), t),
        l = Microsoft.Crm.Client.Core.Framework.Guid.get_empty(),
        a = new String,
        v = n,
        o,
        f,
        s,
        h;
    for (o in v) {
        f = { key: o, value: v[o] };
        f.key === i.get_$HZ()
            ? l = Microsoft.Crm.Client.Core.Framework.Guid.tryCreate(f.value.toString().toUpperCase())
            : f.key === i.get_$GU() && (a = f.value);
        var e = f.key.split("!"), y = $0.$1(e[0]) ? "" : e[0], w = e.length === 2 && !$0.$1(e[1]) ? e[1] : "";
        Microsoft.Crm.Client.Core.Offline.$1G.$2pt(u, c, t[y], y, w.toLowerCase(), f.value, i.get_$1l())
    }
    return s = new Xrm.Objects.EntityReference(i
        .get_$1l(),
        l,
        a), i.$tN &&
        "versionnumber" in u &&
        !$0.$1(u.versionnumber) &&
        s.setValue("RowVersion", u.versionnumber.toString()), u = Microsoft.Crm.Client.Core.Offline.$1G
        .$2j5(u, t), h = new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityRecord(s, u, t, c, {}, p), h
        .set_clientRetrieveOptions(r), h
};
Microsoft.Crm.Client.Core.Offline.$1G.$2pt = function(n, t, i, r, u, f, e) {
    var l, a, o, c, s, h;
    if (Microsoft.Crm.Client.Core.Offline.$1G.$1Uj(i) && (e !== "activityparty" || r !== "ownerid"))
        if (l = Microsoft.Crm.Client.Core.Offline.$1G.$Em.$tH(i), a = Microsoft.Crm.Client.Core.Offline.$1G.$Em
            .$2y0(i, u), l) {
            r in n || (n[r] = {});
            n[r][u] = a === Microsoft.Crm.Client.Core.Framework.Guid
                ? !$0.$1(f) && !Microsoft.Crm.Client.Core.Framework.Guid.$A(f.toString())
                ? { rawguid: f.toString() }
                : null
                : f;
            switch (i) {
            case 9:
            case 6:
            case 1:
                o = Microsoft.Crm.Client.Core.Offline.$1G.$5Y.$2V(e, r);
                $0.$1(o) || $0.$1(o.$RI) || o.$RI.length !== 1 || (n[r].logicalname = o.$RI[0])
            }
        } else
            switch (i) {
            case 11:
            case 12:
            case 13:
            case 0:
                $0.$1(f)
                    ? n[r] = null
                    : (c = "", s = Microsoft.Crm.Client.Core.Offline.$1G.$5Y
                        .$2V(e, r), !$0
                        .$1(s) &&
                        f.toString() in s.$7M.$2f &&
                        (c = s.$7M.$2f[f.toString()]
                            .$1B), n[r] = { value: Number.parseInvariant(f.toString()), label: c });
                break;
            case 15:
                n[r] = !$0.$1(f) && !Microsoft.Crm.Client.Core.Framework.Guid.$A(f.toString())
                    ? { rawguid: f.toString() }
                    : null;
                break;
            case 2:
                n[r] = !$0.$1(f) && f.toString().length > 0 ? Xrm.Soap.CrmDateTimeSerializer.$13w(f.toString()) : null;
                break;
            case 20:
                $0.$1(f)
                    ? n[r] = null
                    : (h = Microsoft.Crm.Client.Core.Offline.$1G.$5Y
                        .$i(f.toString()), $0.$1(h) || (n[r] = h.$d, t[r] = h.$1P));
                break;
            default:
                n[r] = !$0.$1(f) && !Microsoft.Crm.Client.Core.Framework.$3.$A(f.toString()) ? f : null
            }
};
Microsoft.Crm.Client.Core.Offline.$1G.$2j5 = function(n, t) {
    var r = {}, f = n, u, i;
    for (u in f) {
        i = { key: u, value: f[u] };
        switch (t[i.key]) {
        case 9:
        case 1:
        case 6:
            r[i.key] = $0.$1(i.value.id)
                ? null
                : Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityRecord
                .createSingleFieldFromObjectData(i.value, t[i.key]);
            break;
        default:
            r[i.key] = Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityRecord
                .createSingleFieldFromObjectData(i.value, t[i.key])
        }
    }
    return r
};
Microsoft.Crm.Client.Core.Offline.$1G.$1Uj = function(n) {
    switch (n) {
    case-1:
    case 3:
    case 4:
    case 5:
    case 7:
    case 8:
    case 14:
    case 15:
    case 18:
    case 9:
    case 1:
    case 6:
    case 2:
    case 11:
    case 12:
    case 13:
    case 0:
    case 20:
        return!0;
    default:
        return!1
    }
};
Microsoft.Crm.Client.Core.Offline.$1G.$3HO = function(n, t, i, r, u) {
    var c = new(Microsoft.Crm.Client.Core.Framework.List$1
            .$$(String))(Microsoft.Crm.Client.Core.Offline.$2l.get_$1kE()),
        g,
        f,
        e,
        w,
        b,
        s,
        k,
        a,
        o,
        h,
        y;
    if (c.add("versionnumber"), c.remove("ownerid"), g = new(Microsoft.Crm.Client.Core.Framework.List$1
        .$$(String)), i === 1) {
        for (var p = n.get_fieldNames(), nt = p.length, l = 0; l < nt; ++l)
            if (f = p[l], !c.contains(f))
                if (e = t[f], $0.$1(e) || e !== 6 && e !== 1 && e !== 9) {
                    if (!$0.$1(r[f])) {
                        if (e && e !== 11 && e !== 12) {
                            if (e === 13 &&
                            (a = Microsoft.Crm.Client.Core.Offline.$1G.$5Y.$2V(n.$N.LogicalName, "statecode"), !$0
                                .$1(a))) {
                                var tt = n.getValue("statecode").$1f,
                                    it = a.$7M.$2f[tt.toString()].$df,
                                    rt = n.getValue(f).$1f;
                                if (rt === it) continue
                            }
                        } else if (b = n.getValue(f).$1f, s = Microsoft.Crm.Client.Core.Offline.$1G.$5Y
                            .$2V(n.$N.LogicalName, f), !$0.$1(s) &&
                            (!$0.$1(s.$At) || !$0.$1(s.$D8)) &&
                            (k = $0.$1(s.$D8) ? s.$At ? 1 : 0 : s.$D8, k === b)) continue;
                        n.$4P.add(f)
                    }
                } else w = Microsoft.Crm.Client.Core.Offline.$1G.$2zM(f, r), $0.$1(w) || n.$4P.add(f)
    } else if (i === 3)
        for (var d = n
                     .get_fieldNames(),
            ut = d.length,
            v = 0;
            v < ut;
            ++v)
            o = d[v], c.contains(o) ||
            (h = t[o], $0.$1(h) || h !== 6 && h !== 1 && h !== 9
                ? r[o] !== u[o] && n.$4P.add(o)
                : (y = o + "!id", r[y] !== u[y] && n.$4P.add(o)));
    return n
};
Microsoft.Crm.Client.Core.Offline.$1G.$2zM = function(n, t) {
    var i = t[n + "!id"], r = t[n + "!logicalname"], u = t[n + "!name"];
    return!$0.$1(i) && !$0.$1(r)
        ? $0.$1(u)
        ? new Xrm.Objects.EntityReference(r.toString(), i)
        : new Xrm.Objects.EntityReference(r.toString(), i, u.toString())
        : null
};
Microsoft.Crm.Client.Core.Offline.$2u = function() {};
Microsoft.Crm.Client.Core.Offline.$61 = function() {};
Microsoft.Crm.Client.Core.Offline.$61.prototype = {
    $1BF: null,
    $17: function(n) {
        this.$1BF = new(Microsoft.Crm.Client.Core.Framework.$BC.$$(Microsoft.Crm.Client.Core.Offline.$IT))(1e4);
        Microsoft.Crm.Client.Core.Offline.$61.$Em = n
    },
    $2qb: function() { this.$1BF.$3ZV() },
    $2zE: function(n, t) {
        var h = this.$1BF.$3ZU(n), r, u, i, f, s;
        if ($0.$1(h)) return this.$2it(n, t);
        for (var a = this
                     .$2GK(t),
            e = h.get_$H(0).$1NH,
            c = !1,
            l = a,
            v = l.length,
            o = 0;
            o < v;
            ++o)
            for (r = l[o], u = Microsoft.Crm.Client.Core.Offline.$61.$Em
                    .$1p2(t[r]), i = 0;
                i < u.length;
                i++) f = r, u[i] !== "" && (f += "!" + u[i]), f in e || (c = !0, e[f] = r);
        return s = new Microsoft.Crm.Client.Core.Offline.$IT(e), c && this.$25a(s, n), s
    },
    $2it: function(n, t) {
        for (var i, u, r, o, h = this.$2GK(t), f = {}, s = h, c = s.length, e = 0;
            e < c;
            ++e
        )
            for (i = s[e], u = Microsoft.Crm.Client.Core.Offline.$61.$Em
                    .$1p2(t[i]), r = 0;
                r < u.length;
                r++) u[r] !== "" ? f[i + "!" + u[r]] = i : f[i] = i;
        return o = new Microsoft.Crm.Client.Core.Offline.$IT(f), this.$25a(o, n), o
    },
    $25a: function(n, t) {
        var i = new(Microsoft.Crm.Client.Core.Framework.$P.$$(Microsoft.Crm.Client.Core.Offline.$IT))(n);
        this.$1BF.$19Q(t, i)
    },
    $2GK: function(n) {
        var t = [], r = n, i, u;
        for (i in r) u = { key: i, value: r[i] }, t[t.length] = u.key;
        return t
    }
};
Microsoft.Crm.Client.Core.Offline.$IS = function(n) {
    this.$rF = new(Microsoft.Crm.Client.Core.Framework.$8X.$$(Type))(n);
    this.$1jR = this.$rF.get_$396()
};
Microsoft.Crm.Client.Core.Offline.$IS.prototype = { $1jR: null, $rF: null };
Microsoft.Crm.Client.Core.Offline.$IT = function(n) { this.$1NH = n };
Microsoft.Crm.Client.Core.Offline.$IT.prototype = {
    $1NH: null,
    $2ed: function() { return this.$1NH.toString().length }
};
Microsoft.Crm.Client.Core.Offline.$IU = function(n, t) {
    this.$24y = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Xrm.Objects.AttributeType))([17, 10]);
    this.$1QR = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String))(["activitypointer".toLowerCase()]);
    this.$5C = n;
    this.$IN = t;
    this.$WJ = ""
};
Microsoft.Crm.Client.Core.Offline.$IU.prototype = {
    $5C: null,
    $LE: null,
    $WJ: null,
    $IN: null,
    $313: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Object, Microsoft.Crm.Client.Core.Framework.$4),
            r = this,
            u = this;
        return this.$2ei(n, t).then(function() {
                r.$3Nf().then(function() { i.resolve(r.$LE) }, function(n) { i.reject(n) })
            },
            function(n) {
                Microsoft.Crm.Client.Core.Framework.$C
                    .$1F("OfflineMetadataManager_CalculateMetadataMismatchEntities_Error",
                        1032,
                        "Calculation of offline disabled entities failed with error : " + n.$E);
                i.reject(n)
            }), i.promise()
    },
    $3Nf: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4);
        if (!$0.$1(this.$WJ) && !$0.$9c(this.$LE)) {
            var t = new Microsoft.Crm.Client.Core.Offline.$8B(this.$WJ, this.$LE), i = this, r = this;
            this.$5C.$R7("offlinedisabledinfo", t.$1A(), !1).then(function() {
                    Microsoft.Crm.Client.Core.Framework.$C.$1d("OfflineMetadataManager_MetadataSchemaValidator",
                        1032,
                        "Successfully saved the offline disabled info as session state.");
                    n.resolve(!0)
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_MetadataSchemaValidator_Error",
                        1032,
                        "Saving offline disabled info as session state failed with error : " + t.$E);
                    n.reject()
                })
        }
        return n.promise()
    },
    $2ei: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            f,
            e,
            u,
            s,
            h,
            c,
            r,
            v,
            y;
        if (this.$LE = {}, !$0.$25(n) &&
            !Microsoft.Crm.Client.Core.Framework.$3.$A(n.userData) &&
            n.userData.split("#").length > 1)
            if (this.$WJ = t.toString(), f = n.userData
                    .split("#"), f[0] === Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$14B &&
                    f[1] === this.$WJ
            ) i.resolve(!0);
            else {
                e = [];
                u = {};
                for (var l = n.tables, a = l.length, o = 0; o < a; ++o) s = l[o], u[s.name] = s;
                h = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$LD;
                for (c in h)
                    r = { key: c, value: h[c] }, r.key in u
                        ? Array.add(e, this.$2gp(u[r.key]))
                        : this.$1QR.contains(r.key) || (this.$LE[r.key] = !0);
                v = this;
                y = this;
                Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(e)
                    .then(function() { i.resolve(!0) }, function(n) { i.reject(n) })
            }
        else i.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Retrieved client model is corrupt or empty."));
        return i.promise()
    },
    $2gp: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            i = this,
            r = this;
        return this.$5C.$4j(new Microsoft.Crm.Client.Core.Storage.DataApi.$5u(n.name), this.$IN).then(function(r) {
                for (var o, u, h, f = {}, c = n.column, a = c.length, e = 0; e < a; ++e) o = c[e], f[o.name] = o.type;
                for (var l = r.$21O(), v = l.length, s = 0; s < v; ++s)
                    if (u = l[s], h = u.get_$5M() === 6 || u.get_$5M() === 9 || u.get_$5M() === 1
                        ? u.get_$1l() + "!id"
                        : u.get_$1l(), !i.$24y.contains(u.get_$5M()) &&
                        (!(h in f) || f[h] !== Microsoft.Crm.Client.Core.Offline.$BH.$30z(u.get_$5M()))) {
                        i.$LE[n.name] = !0;
                        break
                    }
                t.resolve().promise()
            },
            function(n) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_MetadataSchemaValidator_Error",
                    1032,
                    n.$E);
                t.reject().promise()
            }), t.promise()
    }
};
Microsoft.Crm.Client.Core.Offline.$BH = function() {};
Microsoft.Crm.Client.Core.Offline.$BH.$30z = function(n) {
    switch (n) {
    case 1:
    case 6:
    case 7:
    case 9:
    case 14:
    case 15:
    case 20:
        return"text";
    case 4:
        return"real";
    case 8:
    case 3:
        return"fixed";
    case 2:
        return"datetime";
    case 18:
    case 5:
    case 0:
    case 11:
    case 12:
    case 13:
    case 19:
        return"integer";
    default:
        return""
    }
};
Microsoft.Crm.Client.Core.Offline.$8B = function(n, t) {
    this.$WJ = n;
    this.$LE = t
};
Microsoft.Crm.Client.Core.Offline.$8B.$18 = function(n) {
    var t = "", i = {};
    return $0.$1(n) ||
    (Microsoft.Crm.Client.Core.Framework.$3.$A(n.metadataversionused.toString()) ||
        (t = n.metadataversionused.toString()), i = n.offlinedisabledentities), new Microsoft.Crm.Client.Core.Offline
        .$8B(t, i)
};
Microsoft.Crm.Client.Core.Offline.$8B.prototype = {
    $WJ: null,
    $LE: null,
    $1A: function() {
        var n = {};
        return n.metadataversionused = this.$WJ, n.offlinedisabledentities = this.$LE, n
    }
};
Microsoft.Crm.Client.Core.Offline.$IV = function() {
    this.$fx = !1;
    this.$fI = !1;
    this.$LE = {}
};
Microsoft.Crm.Client.Core.Offline.$IV.prototype = {
    $nK: 0,
    $nJ: 0,
    $kH: 0,
    $5C: null,
    $IN: null,
    $fI: !1,
    $fx: !1,
    $1Um: !1,
    $1OU: null,
    $LE: null,
    $1uT: null,
    $1l1: null,
    get_$1uS: function() { return this.$LE },
    set_$1uS: function(n) {
        var i, r, u, t;
        this.$LE = n;
        i = {};
        r = this.$LE;
        for (u in r)
            t = { key: u, value: r[u] }, t.key in Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$1uR() &&
                (i[t.key] = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$1uR()[t.key]);
        return this.$1uT = i, this.$5C.get_$6R().get_$3C() && this.$1OB(), n
    },
    get_$3CE: function() { return this.$1uT },
    get_$1OV: function() {
        return Number.parseInvariant(Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q()
            .$14B)
    },
    $17: function(n, t, i) {
        this.$5C = t;
        this.$IN = i;
        this.$1l1 = n;
        this.$2VZ();
        var r = this, u = this;
        this.$5C.$X1("offlinedisabledinfo").then(function(n) {
                if (!$0.$1(n)) {
                    var t = Microsoft.Crm.Client.Core.Offline.$8B.$18(n);
                    r.set_$1uS(t.$LE);
                    Microsoft.Crm.Client.Core.Framework.$C.$1d("RetrieveSessionState_OfflineDisabledEntities_Success",
                        1032,
                        n.toString())
                }
            },
            function(n) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("RetrieveSessionState_OfflineDisabledEntities_Fail",
                    1032,
                    n.$E)
            })
    },
    $3Ib: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i;
        return this
            .$fI ||
            n ||
            this.$1Um
            ? (i = this, this.$25d().always(function() { t.resolve(!0) }))
            : t.resolve(!1), t.promise()
    },
    $344: function() { this.$fI && !this.$fx && this.$1l1.$2P1(this, new Sys.EventArgs) },
    $342: function() { this.$fI = !0 },
    $3IJ: function(n) {
        this.$1Um = !0;
        this.$3QX(n);
        this.$2Vw(n) && this.$2fk()
    },
    $33u: function(n) {
        var t, i, r;
        switch (n.$UB) {
        case 0:
        case 1:
        case 5:
        case 3:
        case 2:
        case 6:
        case 4:
            this.$fx = !0;
            Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_HandleMetadataSyncProgress",
                1032,
                "Metadata sync progress flag set as true. Stage : " + n.$UB);
            break;
        case 8:
            this.$fI = !1;
            t = this;
            i = this;
            this.$2VZ().always(function() {
                t.$25e().always(function() {
                    t.$fx = !1;
                    Microsoft.Crm.Client.Core.Framework.$C
                        .$1F("OfflineMetadataManager_HandleMetadataSyncProgress",
                            1032,
                            "Metadata sync progress flag set as false.")
                })
            }).done(function() { i.$1OB() });
            break;
        case 7:
            r = this;
            this.$25e().always(function() {
                r.$fx = !1;
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_HandleMetadataSyncProgress",
                    1032,
                    "Metadata sync progress flag set as false.")
            });
            break;
        case 9:
            this.$fx = !1;
            this.$fI = !1;
            Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_HandleMetadataSyncProgress",
                1032,
                "Metadata sync progress flag set as false.")
        }
    },
    $1Vo: function() { return this.$nK > this.get_$1OV() || this.$nJ > this.$kH || this.$1rw() },
    $25e: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return this.$3Rv().then(function(i) { i ? t.$25d().always(function() { n.resolve() }) : n.resolve() },
            function() { n.reject() }), n.promise()
    },
    $3Rv: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t, i;
        return $0.$1(this.$5C)
            ? n.resolve(!1).promise()
            : (t = this, i = this, this.$5C.$X1("offlinedisabledinfo").then(function(i) {
                    if ($0.$1(i)) n.resolve(!0);
                    else {
                        var r = Microsoft.Crm.Client.Core.Offline.$8B.$18(i);
                        Microsoft.Crm.Client.Core.Framework.$3.$A(r.$WJ)
                            ? n.resolve(!0)
                            : r.$WJ === t.$kH.toString() ? n.resolve(!1) : n.resolve(!0)
                    }
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Framework.$C
                        .$1F("OfflineMetadataManager_ShouldReCalculateAfterMetadataSync_Error",
                            1032,
                            "Retrieval of offline disabled info failed. Error: " + t.$E);
                    n.reject()
                }), n.promise())
    },
    $25d: function() {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n, i;
        return Microsoft.Crm.Client.Core.Framework.$C.$1d("OfflineMetadataManager_CalculateDisabledOfflineEntities",
            1032,
            "Calculation of disabled offline entities started"), n = this, i = this, this.$2Ho().then(function(i) {
                var r, u;
                !$0.$25(i) && !Microsoft.Crm.Client.Core.Framework.$3.$A(i.userData) && i.userData.split("#").length > 1
                    ? (r = i.userData.split("#"), n.$nK = Number.parseInvariant(r[0]), n.$nJ = Number
                        .parseInvariant(r[1]), u = new Microsoft.Crm.Client.Core.Offline.$IU(n.$5C, n.$IN), u
                        .$313(i, n.$kH)
                        .then(function(i) {
                                n.set_$1uS(i);
                                n.$1Um = !1;
                                t.resolve()
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Framework.$C
                                    .$1F("OfflineMetadataSync_CalculateDisabledOfflineEntities_Error", 1032, n.$E);
                                t.reject()
                            }))
                    : t.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Retrieved client model is corrupt or empty."))
            },
            function(n) { t.reject(n) }), t.promise()
    },
    $2fk: function() {
        this.$nJ === this.$kH && this.$nK === this.get_$1OV()
            ? this.$fI = !1
            : (this.$fI = !0, Microsoft.Crm.Client.Core.Framework.$C
                .$1d("OfflineMetadataManager_CheckIfMetadataSyncIsNeeded", 1032, "Metadata updates available detected.")
            )
    },
    $1OB: function() {
        var n = this;
        this.$2fu().done(function(t) {
            t &&
            (Microsoft.Crm.Client.Core.Framework.$C
                .$1d("OfflineMetadataManager_CheckForMetadataOutofSyncForSyncStatus",
                    1032,
                    "Client Metadata Version: " +
                    n.$kH +
                    " Middleware Metadata Version: " +
                    n.$nJ +
                    " Client Profile Version: " +
                    n.get_$1OV() +
                    " Middleware Profile Version: " +
                    n.$nK), n.$kH !== n.$nJ || n.get_$1OV() !== n.$nK || n.$1rw()
                ? Microsoft.Crm.Client.Core.Offline.$l.get_$6J().$1zt(2, 3)
                : Microsoft.Crm.Client.Core.Offline.$l.get_$6J().$1zt(2))
        })
    },
    $2fu: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t;
        return this
            .$nK &&
            this.$nJ
            ? n.resolve(!0)
            : (t = this, this.$2Ho().done(function(i) { n.resolve(t.$2Vw(i)) })), n.promise()
    },
    $2Vw: function(n) {
        if ($0
            .$1(n) ||
            Microsoft.Crm.Client.Core.Framework.$3.$A(n
                .userData))
            Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_SetMiddlewareMetadataVersions_Error",
                1032,
                "Data model from middleware incomplete or corrupt.");
        else {
            var t = n.userData.split("#");
            if (!$0.$1(t) && t.length > 1)
                return this.$nK = Number.parseInvariant(t[0]), this.$nJ = Number.parseInvariant(t[1]), Microsoft.Crm
                    .Client.Core.Framework.$C.$1F("OfflineMetadataManager_SetMiddlewareMetadataVersions",
                        1032,
                        "Middleware versions retrieved successfully."), !0;
            Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_SetMiddlewareMetadataVersions_Error",
                1032,
                "Retrieval of Middleware versions failed.")
        }
        return!1
    },
    $2VZ: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return this.$2yH().then(function(i) {
                t.$kH = Number.parseInvariant(i);
                n.resolve(!0)
            },
            function(t) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_SetClientMetadataVersion_Error",
                    1032,
                    t.$E);
                n.reject()
            }), n.promise()
    },
    $3QX: function(n) {
        var t = [], u;
        if (!$0.$1(n) && !$0.$1(n.tables))
            for (var r = n.tables, f = r.length, i = 0; i < f; ++i) u = r[i], t[t.length] = u.name.toString();
        this.$1OU = t
    },
    $2yy: function(n) {
        try {
            return Sys.Serialization.JavaScriptSerializer.deserialize(n)
        } catch (t) {
            Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_MetadataSchemaValidator_Error",
                1032,
                t.message)
        }
        return null
    },
    $2Ho: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Imported.Norsync.NorsyncModel,
                Microsoft.Crm.Client.Core.Framework.$4),
            t = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(new Array(0)),
            i = this,
            r = this;
        return this.$5C.get_$6R().$1ad("_NORSYNC_SYSTEM_TABLE", t).then(function(t) {
                if (!$0.$1(t) && t.rows.length > 0 && !$0.$1(t.rows.item(0).DATA_MODEL)) {
                    var r = t.rows.item(0).DATA_MODEL.toString(), u = i.$2yy(r);
                    n.resolve(u)
                } else
                    n.reject(Microsoft.Crm.Client.Core.Framework.$4
                        .$h("Error in the retrieved client model from offline db."))
            },
            function(t) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_MetadataSchemaValidator_Error",
                    1032,
                    t.$E);
                n.reject(t)
            }), n.promise()
    },
    $2yH: function() {
        var n = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4), t, i;
        return $0.$1(this.$5C)
            ? n.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("parent datasource is null.")).promise()
            : (t = this, i = this, this.$5C.$1HH().then(function(t) {
                    t.length > 0 ? n.resolve(t.split("!")[0]).promise() : n.reject()
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineMetadataManager_MetadataSchemaValidator_Error",
                        1032,
                        t.$E);
                    n.reject()
                }), n.promise())
    },
    $1rw: function() {
        return!Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().$4h.$8x
            .equals(Microsoft.Crm.Client.Core.Framework.Guid.get_empty()) &&
            Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().$4h.$8x.toString() !==
            Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString()
            ? !0
            : !1
    }
};
Microsoft.Crm.Client.Core.Offline.$IW = function(n, t) {
    this.$rX = Microsoft.Crm.Client.Core.Framework.$3.$A(n)
        ? Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString()
        : n;
    this.$1e = t;
    this.$nR = new Microsoft.Crm.Client.Core.Framework.Net.Uri(t.$1O.$1FO);
    this.$k3 = Microsoft.Crm.Client.Core.Framework.AuthenticationManager.$D.get_$19G();
    this.$8x = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString();
    this.$1Ht = localStorage.getItem("MoCASessionID")
};
Microsoft.Crm.Client.Core.Offline.$IW.prototype = {
    $rX: null,
    $1e: null,
    $8x: null,
    $k3: null,
    $nR: null,
    $1Ht: null,
    $2g4: function(n) {
        var i, t;
        if ($0.$1(n))
            return Microsoft.Crm.Client.Core.Framework.$C
                .$1F("CheckWhetherLoginParametersChanged", 1031, "Login Parameters are empty"), !0;
        var u = n.$1A(), f = this.$1A(), r = u;
        for (i in r)
            if (t = { key: i, value: r[i] }, f[t
                    .key] !==
                t.value)
                return Microsoft.Crm.Client.Core.Framework.$C
                    .$1F("CheckWhetherLoginParametersChanged", 1031, "Login Parameter" + t.key + "Changed"), !0;
        return Microsoft.Crm.Client.Core.Framework.$C.$1F("CheckWhetherLoginParametersChanged",
            1031,
            "Login Parameteres Didn't change"), !1
    },
    get_$pH: function() { return this.$1e.$3G.toString() },
    get_$1wQ: function() { return Number.parseInvariant(this.$nR.$ud) },
    get_$1qX: function() { return this.$nR.$eu },
    get_$1zH: function() {
        return!Microsoft.Crm.Client.Core.Framework.$3.$A(this.$nR.$bx) && this.$nR.$bx.length > 1
            ? this.$nR.$bx.slice(1)
            : this.$1e.get_$Jl().toString()
    },
    get_$2Ll: function() { return this.$nR.$oZ === "https" },
    $1A: function() {
        var n = {};
        return n.DataBaseName = this.$rX, n.UserId = this.get_$pH(), n.Host = this.get_$1qX(), n.Port = this.get_$1wQ()
            .toString(), n.IsSSL = this.get_$2Ll().toString(), n.ServerDataBaseName = this.get_$1zH(), n
            .ProfileId = this.$8x, n.AuthToken = this.$k3, n.SessionId = this.$1Ht, n
    }
};
Microsoft.Crm.Client.Core.Offline.$l = function(n) {
    this.$1FU = new Microsoft.Crm.Client.Core.Offline.$I3(0);
    this.get_$1EG = this.get_isMobileOfflineOptinFeatureEnabledInternal;
    this.set_$1EG = this.set_isMobileOfflineOptinFeatureEnabledInternal;
    this.get_$11v = this.get_isMobileOfflineOptOutFeatureEnabledInternal;
    this.set_$11v = this.set_isMobileOfflineOptOutFeatureEnabledInternal;
    this.get_$1Vb = this.get_isOfflineSyncTransitionStarted;
    this.set_$1Vb = this.set_isOfflineSyncTransitionStarted;
    this.get_$7q = this.get_offlineProfile;
    this.set_$7q = this.set_offlineProfile;
    this.$AY = n
};
Microsoft.Crm.Client.Core.Offline.$l.get_$6J = function() {
    return $0.$1(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3) ||
        ($0.$1(Microsoft.Crm.Client.Core.Offline.$l.$3) ||
            Microsoft.Crm.Client.Core.Offline.$l.$3.get_$LS() !==
            Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS()) &&
        (Microsoft.Crm.Client.Core.Offline.$l.$3 = new Microsoft.Crm.Client.Core.Offline
            .$l(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$1o()), Microsoft.Crm.Client.Core.Offline.$l
            .$3
            .set_$LS(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS())), Microsoft.Crm.Client.Core
        .Offline
        .$l.$3
};
Microsoft.Crm.Client.Core.Offline.$l.prototype = {
    $AY: null,
    $4h_0: null,
    $1e_0: null,
    $IK: !1,
    $1FQ: null,
    $11u_0: !1,
    get_offlineProfile: function() { return this.$4h_0 },
    set_offlineProfile: function(n) {
        return($0.$1(n) ||
                $0.$1(this.$4h_0) ||
                JSON.stringify(this.get_$K().$4h.$1A()) !== JSON.stringify(this.$4h_0.$1A())) &&
            (this.$4h_0 = n, this.$2XE()), n
    },
    get_$2LK: function() { return this.$11u_0 },
    set_$2LK: function(n) { return this.$11u_0 = n, n },
    $3R4: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4);
        return $0.$1(n) ||
            $0.$1(this.$4h_0) ||
            JSON.stringify(this.get_$K().$4h.$1A()) !== JSON.stringify(this.$4h_0.$1A())
            ? (this.$4h_0 = n, this.$2XE())
            : t.resolve()
    },
    get_$2O7: function() {
        if ($0.$1(this.$1FU)) throw Error.invalidOperation("OfflineSyncInfo has not been initialized yet.");
        return this.$1FU
    },
    get_$2XX: function() { return this.get_$2O7().$1d1 },
    set_$2XX: function(n) { return this.get_$2O7().$1d1 = n, n },
    get_$K: function() {
        if ($0.$1(this.$1e_0))
            if (Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                .$JT()) this.$1e_0 = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K();
            else throw Error.invalidOperation("UserContext is not initialized");
        return this.$1e_0
    },
    set_$K: function(n) { return this.$1e_0 = n, n },
    get_isMobileOfflineOptinFeatureEnabledInternal: function() { return this.$HO },
    set_isMobileOfflineOptinFeatureEnabledInternal: function(n) {
        return this.$HO !== n && (this.$HO = n, n || this.$1zt(0), this.$2ea()), n
    },
    get_isMobileOfflineOptOutFeatureEnabledInternal: function() { return this.$W5 },
    set_isMobileOfflineOptOutFeatureEnabledInternal: function(n) {
        return this.$W5 !== n && (this.$W5 = n, this.$2eb()), n
    },
    get_isOfflineSyncTransitionStarted: function() { return this.$120 },
    set_isOfflineSyncTransitionStarted: function(n) {
        return this.$120 !== n &&
        (this.$120 = n, Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().get_PALEnabled() &&
            Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().$EO &&
            this.$16K()), n
    },
    get_$tW: function() { return $0.$1(this.$IK) && (this.$IK = !1), this.$IK },
    set_$tW: function(n) { return this.$IK = n, n },
    get_$1uR: function() { return this.$1FQ },
    set_$1uR: function(n) { return this.$1FQ = n, n },
    $HO: !1,
    $120: !1,
    $W5: !1,
    $65_0: null,
    $Fl_0: null,
    $17: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i;
        return this.set_$K(n), i = this, this.$2fa()
                .always(function() {
                    i.$AY.$35s(i.$1e_0).then(function(n) { t.resolve(n) }, function(n) { t.reject(n) })
                }),
            t.promise()
    },
    $2XE: function() {
        return this.$25b("LastRetrievedOfflineProfileData",
            $0.$1(this.$4h_0) || Microsoft.Crm.Client.Core.Framework.$3.$A(this.$4h_0.toString())
            ? null
            : JSON.stringify(this.$4h_0.$1A()),
            !0)
    },
    $2ea: function() { this.$25b("ismobileofflineoptedin", this.$HO, !0) },
    $2eb: function() {
        var n = {};
        n.ismobileofflineoptedout = this.$W5;
        Microsoft.Crm.Client.Core.Framework.$h.get_$5().$R7("ismobileofflineoptedout", n, !0)
    },
    $3Mj: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return Microsoft.Crm.Client.Core.Framework.$h.get_$5().$LN("ismobileofflineoptedin")
            .then(function(i) {
                    !$0.$1(i) && "ismobileofflineoptedin" in i
                        ? (t.$HO = i.ismobileofflineoptedin, n.resolve(t.$HO))
                        : (t.$HO = !1, n.resolve(t.$HO))
                },
                function(t) {
                    i.$HO = !1;
                    n.reject(t)
                }), n.promise()
    },
    $3Mk: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return Microsoft.Crm.Client.Core.Framework.$h.get_$5().$LN("ismobileofflineoptedout")
            .then(function(i) {
                    !$0.$1(i) && "ismobileofflineoptedout" in i
                        ? (t.$W5 = i.ismobileofflineoptedout, n.resolve(t.$W5))
                        : (t.$W5 = !1, n.resolve(t.$W5))
                },
                function(t) {
                    i.$W5 = !1;
                    n.reject(t)
                }), n.promise()
    },
    get_$LS: function() { return this.$65_0 },
    set_$LS: function(n) { return this.$65_0 = n, n },
    get_$Zu: function() {
        return Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$s() ||
            $0.$1(this.$Fl_0) ||
            (this.$Fl_0.$RD === -1 && this.$Fl_0.$Mv === 1 && (this.$Fl_0.$Mv = 0), this.$Fl_0.$RD = this
                .$2Ig(this.$Fl_0.$Mv)), this.$Fl_0
    },
    $2fa: function() {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            n = this,
            i = this;
        return this.$AY.$3Mh().then(function(i) {
                $0.$1(i)
                    ? n.$AY.$2Tx(n.get_$K().$1O.$IK).then(function() {
                            n.$IK = n.get_$K().$1O.$IK;
                            Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineDataSource_CheckForDeploymentChange",
                                1005,
                                "SaveOfflineDbDeploymentInformation succeeded. Value : " + n.get_$tW());
                            t.resolve()
                        },
                        function(i) {
                            Microsoft.Crm.Client.Core.Framework.$C
                                .$1F("OfflineDataSource_CheckForDeploymentChange_Error",
                                    1005,
                                    "SaveOfflineDbDeploymentInformation failed. Value : " +
                                    n.get_$tW() +
                                    ". Details : " +
                                    i.$E);
                            t.reject(i)
                        })
                    : (n.$IK = Boolean.parse(i.toString()), t.resolve())
            },
            function(n) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineDataSource_CheckForDeploymentChange_Error",
                    1005,
                    "Error retrieving Offline db deployment info. Details : " + n.$E);
                t.reject(n)
            }), t.promise()
    },
    $1zt: function(n, t) {
        $0.$1(this.$Fl_0) && (this.$Fl_0 = new Microsoft.Crm.Client.Core.Framework.Offline.$Nx(n, t));
        $0.$1(this.$4h_0) ||
        (this.$Fl_0.$Mv = n, this.$Fl_0.$Mv !== 1 && this.$Fl_0.$Mv
            ? (this.$Fl_0.$zj = Microsoft.Crm.Client.Core.Framework.$1J
                .$l(this.$AY.get_$6R().get_$12y().get_$3CE()), this.$Fl_0
                .$1BA = Microsoft.Crm.Client.Core.Framework.$1J.$l(this.$1FQ) - this.$Fl_0.$zj)
            : (this.$Fl_0.$zj = Microsoft.Crm.Client.Core.Framework.$1J.$l(this.$1FQ), this.$Fl_0.$1BA = 0), this.$Fl_0
            .$RD = $0.$1(t) ? this.$2Ig(n) : t);
        Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$6M().$3EK(this, null)
    },
    $Bo: function(n) {
        return this.get_$K().$1O.$L2 && this.$AY.get_$6R().get_$3C() && n in this.$4h_0.$LD && !this.$1E3(n)
    },
    $1E3: function(n) { return n in this.$AY.get_$6R().get_$12y().get_$1uS() },
    $1xG: function(n, t, i, r) {
        var c = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                .EntityRecord,
                Microsoft.Crm.Client.Core.Framework.$4),
            o = {},
            w = t.$1X,
            l,
            f,
            s,
            u,
            e,
            h,
            a,
            v,
            y,
            p,
            b,
            k,
            d;
        for (l in w)
            if (f = { key: l, value: w[l] }, s = f.value, (s === 6 || s === 1 || s === 9) &&
                t.hasValue(f.key.toString())) {
                if (u = t.getValue(f.key.toString()), $0.$1(u)) continue;
                !u.equals(n) &&
                    this.$Bo(u.LogicalName) &&
                    (e = u
                        .LogicalName in
                        o
                        ? o[u.LogicalName]
                        : {}, u.Id.toString() in e
                        ? (h = e[u.Id.toString()], h[h.length] = f.key, e[u.Id.toString()] = h)
                        : e[u.Id.toString()] = [f.key], o[u.LogicalName] = e)
            }
        a = [];
        v = o;
        for (y in v)
            p = { key: y, value: v[y] }, b = new(Microsoft.Crm.Client.Core.Framework.$8X.$$(Array))(p.value), Array
                .add(a, this.$AY.get_$6R().$2T3(b.get_$396(), p.key, r, i));
        return k = this, d = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(a)
            .then(function(n) {
                    for (var h, l, i, y, s = n, p = s.length, r = 0; r < p; ++r) {
                        h = s[r];
                        l = h;
                        for (var a = l.get_entities(), w = a.length, u = 0; u < w; ++u) {
                            var f = a[u], v = f.$N, e = o[f.$N.LogicalName][f.$N.Id.toString()];
                            for (i = 0; i < e.length; i++) y = t.getValue(e[i]), y.equals(v) || t.setValue(e[i], v)
                        }
                    }
                    c.resolve(t)
                },
                function() { c.resolve(t) }), c.promise()
    },
    $2Rf: function(n, t, i) {
        for (var w,
            l,
            a,
            u,
            f,
            s,
            v,
            p,
            d,
            g,
            h = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                .EntityCollection,
                Microsoft.Crm.Client.Core.Framework.$4),
            e = new(Microsoft.Crm.Client.Core.Framework.$8X.$$(Microsoft.Crm.Client.Core.Framework.List$1.$$(String))),
            c = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String)),
            r = n.get_entities(),
            o = 0;
            o < r.length;
            o++) {
            w = r[o].$1X;
            l = w;
            for (a in l)
                if (u = { key: a, value: l[a] }, (u.value === 6 || u.value === 1 || u.value === 9) &&
                    r[o].hasValue(u.key)) {
                    if (f = r[o].getValue(u.key), $0.$1(f)) continue;
                    this.$Bo(f.LogicalName) &&
                    (c.contains(u
                            .key) ||
                        c.add(u.key), s = e.$3ZW(f.LogicalName)
                        ? e.get_$H(f.LogicalName)
                        : new(Microsoft.Crm.Client.Core.Framework.List$1
                            .$$(String)), s.contains(f.get_identifier()) ||
                        (s.add(f.get_identifier().toUpperCase()), e.set_$H(f.LogicalName, s)))
                }
        }
        v = [];
        for (var b = e
                     .get_$396(),
            k = b.length,
            y = 0;
            y < k;
            ++y) p = b[y], Array.add(v, this.$AY.get_$6R().$2T3(e.get_$H(p).get_Items(), p, i, t));
        return d = this, g = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(v)
            .then(function(t) {
                    for (var u, i, f, e, o, s = {}, y = t, w = y.length, l = 0; l < w; ++l) {
                        var b = y[l], k = b, a = k.get_entities();
                        for (u = 0; u < a.length; u++) s[a[u].get_key()] = a[u]
                    }
                    for (i = 0; i < r.length; i++)
                        for (var p = c
                                     .get_Items(),
                            d = p.length,
                            v = 0;
                            v < d;
                            ++v)
                            f = p[v], r[i].hasValue(f) &&
                                !$0.$1(r[i].getValue(f)) &&
                                (e = r[i].getValue(f), o = e
                                    .get_identifier() in
                                    s
                                    ? s[e.get_identifier()].$N
                                    : null, $0.$1(o) || e.equals(o) || r[i].setValue(f, o));
                    h.resolve(n)
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Framework.$C
                        .$C("OfflineDataSource_RefreshRetrieveMultipleLookupData_OfflineError", 1005, t.$E);
                    h.resolve(n)
                }), h.promise()
    },
    $2zW: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Array, Microsoft.Crm.Client.Core.Framework.$4);
        if ($0.$1(n.getValue("activityid")) ||
            n
            .getValue("activityid") ===
            Microsoft.Crm.Client.Core.Framework.Guid
            .get_empty())
            return Microsoft.Crm.Client.Core.Framework.$C
                .$C("OfflineDataSource_GetExistingActivityParties",
                    1005,
                    "No activityparty data to retrieve for current entity"), t.resolve(new Array(0));
        var i = new Array(0),
            r = [
                new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
                .$Hz("activityid!id", n.getValue("activityid").toString(), 1, 0)
            ],
            u = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(r),
            f = this,
            e = this;
        return this.$AY.get_$6R().$1ad("activityparty", u).then(function(n) {
                for (var f = !$0
                             .$1(n) &&
                             !$0.$1(n.rows)
                             ? n.rows.length
                             : 0,
                    u = "activitypartyid",
                    r = 0;
                    r < f;
                    r++)
                    $0.$1(n.rows
                        .item(r)) ||
                    $0.$1(n.rows.item(r)[u]) ||
                    (i[i.length] = n.rows.item(r)[u].toUpperCase());
                Microsoft.Crm.Client.Core.Framework.$C.$C("OfflineDataSource_GetExistingActivityParties",
                    1005,
                    "GetExistingActivityParties completed successfully");
                t.resolve(i)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineDataSource_GetExistingActivityParties - Failure",
                    1005,
                    n.$E);
                t.reject(n)
            }), t.promise()
    },
    $K4: function(n) {
        Microsoft.Crm.Client.Core.Framework.$C.$C("OfflineDataSource_OnMetadataSyncUpdated",
            1005,
            "Metadata Sync Updated");
        n.$UB !== 8 &&
            (n.$UB !== 9 ||
                $0.$1(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().$4h) ||
                $0.$1(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().$4h.$8x) ||
                !Microsoft.Crm.Client.Core.Framework.Guid.$A(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                    .get_$K().$4h.$8x.toString())) ||
            (Microsoft.Crm.Client.Core.Offline.$l.$3.set_$7q(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                .get_$K().$4h), Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().$EO && this.$16K());
        $0.$1(this.$AY.get_$6R().get_$12y()) || this.$AY.get_$6R().get_$12y().$33u(n);
        n.$UB === 8 && this.$AY.get_$6R().$1qm()
    },
    $16K: function() {
        var t, n, i;
        Microsoft.Crm.Client.Core.Framework.UserAgent.getInstance().get_PALEnabled() &&
        (t = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K(), n = {}, n.username = t.$AN, n
            .serverversion = t.$Yd, n.databaseversion = t.$P0.$SX, n.userroles = t.$aT.join(", "), n.userculturelcid = t
            .get_$tc().toString(16), i = this.$1rz(), n.isoptincommandenabled = i, n.lastsyncdate = Microsoft.Crm.Client
            .Core.Storage.DataApi.DataSource.$3.get_$1WF(), n.isoptoutcommandenabled = this.$2LV(), Microsoft.Crm.Client
            .Core.Framework.PAL.Core.NativeBridge.get_Instance()
            .$3K(Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().$1T,
                Microsoft.Crm.Client.Core.Framework.PAL.Core.NativeBridge.get_Instance().get_$2N().get_$3A(),
                new Microsoft.Crm.Client.Core.Framework.PAL.Dispatchers.$5c(n)))
    },
    $1Ip: function() {
        var t = MscrmComponents.DeferredPromiseFactory(Object, Microsoft.Crm.Client.Core.Framework.$4),
            n = this,
            i = this;
        return Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper
            .when(this.$AY.$R5(), this.$3Mj(), this.$3Mi(), this.$3Mk()).then(function(i) {
                    i.length > 0 && !$0.$1(i[0])
                        ? (n.set_$K(i[0]), n.get_$K().$1O.$L2 && $0.$1(n.$4h_0)
                            ? n.$3R4(n.$1e_0.$4h).then(function() { t.resolve() }, function() { t.reject() })
                            : t.resolve())
                        : t.resolve();
                    n.$HO && n.$1zt(0)
                },
                function() { t.reject(Microsoft.Crm.Client.Core.Framework.$4.$St(-2147094e3)) }), t.promise()
    },
    $1rz: function() { return this.get_$K().$1O.$L2 && !this.$HO && this.$4h_0.$mH && !this.$120 },
    $2LV: function() { return this.get_$K().$1O.$L2 && this.$HO && this.$4h_0.$mH && !this.$W5 && !this.$120 },
    $3Mi: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                .OfflineProfile,
                Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return Microsoft.Crm.Client.Core.Framework.$h.get_$5().$LN("LastRetrievedOfflineProfileData")
            .then(function(i) {
                    !$0.$1(i) &&
                        "LastRetrievedOfflineProfileData" in i &&
                        !$0.$1(i.LastRetrievedOfflineProfileData) &&
                        !Microsoft.Crm.Client.Core.Framework.$3.$A(i.LastRetrievedOfflineProfileData)
                        ? (t.$4h_0 = Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.OfflineProfile
                            .$18(JSON.parse(i.LastRetrievedOfflineProfileData)), n.resolve(t.$4h_0))
                        : (Microsoft.Crm.Client.Core.Framework.$C
                            .$C("OfflineDataSource.RetrieveOfflineProfileCache.Done", 1005, "Profile Not Found"), t
                            .$4h_0 = null, n.resolve(t.$4h_0))
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Framework.$C
                        .$1F("OfflineDataSource_RetrieveOfflineProfileCache_LocalError",
                            1005,
                            t.$E);
                    i.$4h_0 = null;
                    n.reject(t)
                }), n.promise()
    },
    $25b: function(n, t, i) {
        var r = {};
        return r[n] = t, Microsoft.Crm.Client.Core.Framework.$h.get_$5().$R7(n, r, $0.$1(i) ? !0 : i)
    },
    $2Ig: function(n) {
        switch (n) {
        case 0:
            return this.$4h_0.$8x === Microsoft.Crm.Client.Core.Framework.Guid.get_empty() ? 1 : 2;
        case 1:
            return 0;
        case 2:
            return 0
        }
        return 0
    },
    $26a: function() {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n = [], i, r;
        return Array.add(n, Microsoft.Crm.Client.Core.Framework.$h.get_$5().$Qt.$VH("ismobileofflineoptedin")), Array
            .add(n, Microsoft.Crm.Client.Core.Framework.$h.get_$5().$Qt.$VH("LastRetrievedOfflineProfileData")), Array
            .add(n, Microsoft.Crm.Client.Core.Framework.$h.get_$5().$Qt.$VH("ismobileofflineoptedout")), i = this, r =
            this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(n)
            .then(function() { t.resolve(!0) }, function(n) { t.reject(n) }), t.promise()
    },
    $26Z: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t = [], i, r;
        return Array
                .add(t, Microsoft.Crm.Client.Core.Framework.$h.get_$5().$Qt.$VH("LastRetrievedOfflineProfileData")),
            Array
                .add(t, Microsoft.Crm.Client.Core.Framework.$h.get_$5().$Qt.$VH("offlinedisabledinfo")), i = this, r =
                this,
            Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(t).then(function() { n.resolve(!0) },
                function(t) {
                    Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineDataSource_ClearOfflineDataBaseState_LocalError",
                        1005,
                        t.$E);
                    n.reject(t)
                }), n.promise()
    }
};
Microsoft.Crm.Client.Core.Offline.$L = function() {
    this.$$d_$2a7 = Function.createDelegate(this, this.$2a7);
    this.$$d_$23N = Function.createDelegate(this, this.$23N);
    this.$$d_$1z0 = Function.createDelegate(this, this.$1z0);
    this.$1QR = new(Microsoft.Crm.Client.Core.Framework.List$1
        .$$(String))([
        "activitypointer".toLowerCase(), "syncerror".toLowerCase(), "activityparty".toLowerCase(), "postfollow"
        .toLowerCase(), "businessdatalocalizedlabel".toLowerCase()
    ]);
    this.$Md = new Microsoft.Crm.Client.Core.Offline.$IV;
    this.$Zt = !1
};
Microsoft.Crm.Client.Core.Offline.$L.$2Mu = function(n) {
    var t = n.code;
    switch (t) {
    case 5:
    case 6:
    case 7:
        Microsoft.Crm.Client.Core.Offline.$L.$1F("Sync.Progress", n.message);
        break;
    default:
        Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.Progress", n.message)
    }
};
Microsoft.Crm.Client.Core.Offline.$L.$az = function(n, t, i) {
    return function(n, r) {
        Microsoft.Crm.Client.Core.Offline.$L.$1F(i + ".TxFailure", r);
        t.reject(Microsoft.Crm.Client.Core.Framework.$4.$h(r))
    }
};
Microsoft.Crm.Client.Core.Offline.$L.$15f = function(n, t, i) {
    return function(n) {
        Microsoft.Crm.Client.Core.Offline.$L.$1F(i + ".SqlFailure", n);
        t.reject(Microsoft.Crm.Client.Core.Framework.$4.$h(n))
    }
};
Microsoft.Crm.Client.Core.Offline.$L.$1F = function(n, t) { Microsoft.Crm.Client.Core.Framework.$C.$1F(n, 1031, t) };
Microsoft.Crm.Client.Core.Offline.$L.$C = function(n, t) { Microsoft.Crm.Client.Core.Framework.$C.$1F(n, 1031, t) };
Microsoft.Crm.Client.Core.Offline.$L.$31O = function(n) {
    var t = [], u;
    t[t.length] = n.activityid.toString();
    t[t.length] = n.participationtypemask.toString();
    for (var r = n.resolvedparties, f = r.length, i = 0; i < f; ++i) u = r[i], t[t.length] = u;
    return t
};
Microsoft.Crm.Client.Core.Offline.$L.$31P = function(n) {
    var t = [], u;
    t[t.length] = n.activityid.toString();
    t[t.length] = n.activityid.toString();
    t[t.length] = n.participationtypemask.toString();
    for (var r = n.resolvedparties, f = r.length, i = 0; i < f; ++i) u = r[i], t[t.length] = u;
    return t
};
Microsoft.Crm.Client.Core.Offline.$L.prototype = {
    $1d2: 0,
    $Jo: null,
    $5Y: null,
    $Md: null,
    $v0: !0,
    $IN: null,
    $U9: null,
    $B2: !1,
    $FZ: null,
    $s1: null,
    $167: 0,
    $vK: 0,
    $1tq: 6e4,
    $2TP: 2,
    $1Vh: !1,
    $Zt: !1,
    $1Is: null,
    get_$3CG: function() { return this.$Zt },
    get_$12y: function() { return this.$Md },
    get_$Qu: function() { return $0.$1(this.$Jo) && (this.$Jo = norsyncPlugin.init("OfflineDataSource")), this.$Jo },
    get_$3C: function() { return this.$B2 },
    set_$3C: function(n) {
        return this.$B2 !== n &&
            (this.$B2 = n, n ? this.$Md.$1OB() : Microsoft.Crm.Client.Core.Offline.$l.get_$6J().$1zt(0)), n
    },
    $5C: null,
    $1e: null,
    $2qa: function() { $0.$1(this.$s1) || this.$s1.$2qb() },
    $17: function(n, t, i, r, u) {
        var f, e, o;
        return Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Initialize",
            "Offline DataStore Initialize started"), f = MscrmComponents
            .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), this.$5Y = t, this.$1d2 = n.$1O
            .$1F9, this.$1e = n, Microsoft.Crm.Client.Core.Offline.$1G.$17(this.$5Y, this.$1e), this.$5C = r, this
            .$IN = u, this.$Md.$17(i, r, u), e = this, o = this, this.$1qm()
            .then(function(n) { f.resolve(n) }, function(n) { f.reject(n) }), f.promise()
    },
    $1qm: function() {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n;
        return Microsoft.Crm.Client.Core.Storage.DataApi.$H.get_$5().get_$IJ()
            ? (n = this, this.$2eZ().always(function() {
                n.$B2 || Microsoft.Crm.Client.Core.Offline.$l.get_$6J().$1zt(n.$5C.$114() ? 1 : 0);
                n.$35t().then(function() {
                        n.$FZ !== ""
                            ? (n.$v0 = !0, Microsoft.Crm.Client.Core.Offline.$L
                                .$C("OfflineDataStore.Initialize.InitializeOfflineDatabase",
                                    "Database name - " +
                                    n
                                    .$FZ), t
                                .resolve(!0))
                            : (Microsoft.Crm.Client.Core.Offline.$L
                                .$C("OfflineDataStore.Initialize.InitializeOfflineDatabase", "Database name is null"), t
                                .resolve(!1))
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.$L
                            .$1F("OfflineDataStore.Initialize.InitializeOfflineDatabase", n.$E);
                        t.reject(n)
                    })
            }), t.promise())
            : t.resolve(!1).promise()
    },
    $2LP: function() {
        var n = !$0.$1(Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q()) &&
            !$0.$1(Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x) &&
            !Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x
            .equals(Microsoft.Crm.Client.Core.Framework.Guid.get_empty()) &&
            !Microsoft.Crm.Client.Core.Framework.$3.$A(this.$1e.$1O.$1FO);
        return Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.IsOfflineConfiguredForUser", n.toString()), n
    },
    $35t: function() {
        Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.InitializeOfflineDatabase",
            "Offline DataStore InitializeOfflineDatabase started");
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            n = this,
            i = this;
        return this.$5C.$2TC().then(function(i) {
                Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.InitializeOfflineDatabase",
                    "RetrieveOfflineDatabaseInformation succeeded. Database name - " + i);
                n.$FZ = i;
                n.$1OL(!1).then(function(i) {
                        Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.InitializeOfflineDatabase",
                            "CleanUpDatabases status :" + i.toString());
                        n.$2LP()
                            ? n.$2U3().always(function() { t.resolve(i) })
                            .fail(function(n) {
                                Microsoft.Crm.Client.Core.Offline.$L.$1F("Scheduling periodic sync job failed", n.$E)
                            })
                            : (Microsoft.Crm.Client.Core.Offline.$l.get_$6J().$1zt(0), n.$20Y()
                                .always(function() { t.resolve(i) }))
                    },
                    function(i) {
                        Microsoft.Crm.Client.Core.Offline.$L
                            .$1F("InitializeOfflineDatabase.CleanupFailure", n.$FZ + " " + i.$E);
                        t.reject(i)
                    })
            },
            function(n) {
                Microsoft.Crm.Client.Core.Offline.$L
                    .$1F("InitializeOfflineDatabase.RetrieveOfflineDatabaseInformation.Failure", n.$E);
                t.reject(n)
            }), t.promise()
    },
    $1OL: function(n) {
        var i;
        if (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CleanUpDatabases",
                "Offline DataStore CleanUpDatabases started"), i = MscrmComponents
                .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            n ||
                !this.$2LP() ||
                this.$1e.$4h.$8x.equals(Microsoft.Crm.Client.Core.Framework.Guid.get_empty()) &&
                Microsoft.Crm.Client.Core.Storage.DataApi.$H.$Lg ||
                this.$FZ !== Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString() ||
                Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$tW() !== this.$1e.$1O.$IK) {
            var r = Microsoft.Crm.Client.Core.Framework.Guid.tryCreate(this.$FZ),
                u = new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.OfflineProfile(r, {}, ""),
                f = new Microsoft.Crm.Client.Core.Storage.DataApi
                    .$1k(this.$1e.$3G,
                        this.$1e.$AN,
                        this.$1e.$Gg,
                        this.$1e.$uV,
                        this.$1e.$1O,
                        this.$1e.$2L,
                        this.$1e.$Eb,
                        this.$1e.$S9,
                        this.$1e.$P0,
                        this.$1e.$aT,
                        this.$1e.$WI,
                        this.$1e.$9U,
                        this.$1e.$ks,
                        this.$1e.$kt,
                        this.$1e.$rc,
                        this.$1e.$Yd,
                        u,
                        this.$1e.$Q,
                        this.$1e.$Fa),
                t = this,
                e = this;
            this.$1j8(this.$FZ, f).then(function(n) {
                    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CleanUpDatabases",
                        "Offline DataStore ClearStore succeeded. Status - " + n);
                    n
                        ? (t.$1e.$4h.$8x.equals(Microsoft.Crm.Client.Core.Framework.Guid.get_empty()) &&
                            Microsoft.Crm.Client.Core.Offline.$l.get_$6J()
                            .set_$7q(t.$1e.$4h), Microsoft.Crm.Client.Core.Offline.$l.get_$6J()
                            .get_$tW() !==
                            t.$1e.$1O.$IK &&
                            t.$5C.$2Tx(t.$1e.$1O.$IK).then(function() {
                                    Microsoft.Crm.Client.Core.Offline.$L
                                        .$C("OfflineDataStore.CleanUpDatabases",
                                            "Offline DataStore SaveOfflineDbDeploymentInformation succeeded. Old value : " +
                                            Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$tW() +
                                            ". New Value : " +
                                            t.$1e.$1O.$IK);
                                    Microsoft.Crm.Client.Core.Offline.$l.get_$6J().set_$tW(t.$1e.$1O.$IK)
                                },
                                function(n) {
                                    Microsoft.Crm.Client.Core.Offline.$L
                                        .$1F("OfflineDataStore.CleanUpDatabases",
                                            "Offline DataStore SaveOfflineDbDeploymentInformation failed. Old value : " +
                                            Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$tW() +
                                            "New Value : " +
                                            t.$1e.$1O.$IK +
                                            " Details : " +
                                            n.$E)
                                }), t.$5C.$2Tw("").then(function() {
                                Microsoft.Crm.Client.Core.Offline.$L
                                    .$C("OfflineDataStore.CleanUpDatabases",
                                        "Offline DataStore SaveOfflineDatabaseInformation succeeded");
                                t.$FZ = "";
                                Microsoft.Crm.Client.Core.Storage.DataApi.$H.get_$5().$26Z()
                                    .then(function() { i.resolve(!0) },
                                        function(n) {
                                            Microsoft.Crm.Client.Core.Offline.$L
                                                .$1F("CleanUpDatabases.ClearOfflineDataBaseState",
                                                    "Clear Offline Database State failed with error : " + n.$E);
                                            i.reject(n)
                                        })
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.$L
                                    .$1F("CleanUpDatabases.CleanUpDatabases",
                                        "Save offline info failed with error : " + n.$E);
                                i.reject(n)
                            }))
                        : (Microsoft.Crm.Client.Core.Offline.$L
                            .$C("OfflineDataStore.CleanUpDatabases", "Status - " + n), t
                            .$FZ = "", i.resolve(!1))
                },
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("CleanUpDatabases.CleanUpDatabases",
                        "cleanup database failed for database : " + e.$FZ);
                    i.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Could not delete database"))
                })
        } else
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CleanUpDatabases",
                "database cleanup not required"), i.resolve(!0);
        return i.promise()
    },
    $2U3: function() {
        Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.SchedulePeriodicSyncJob",
            "Offline DataStore SchedulePeriodicSyncJob started");
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n = this;
        return this.$20Y().always(function() {
            var i = !n.$5C.$114();
            n.$2XT().always(function() { t.isResolved() || t.resolve(!0) })
                .fail(function(n) {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("SchedulePeriodicSyncJob.SyncFailed", n.$E)
                }).done(function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.SchedulePeriodicSyncJob",
                        "Offline DataStore Immediate sync finished")
                });
            n.$167 || (n.$167 = window.setInterval(n.$$d_$1z0, n.$1d2));
            !i && Microsoft.Crm.Client.Core.Storage.DataApi.$H.$Lg && t.resolve(!1)
        }), t.promise()
    },
    $20Y: function() {
        var n, t, i;
        return Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.StopSync",
                "Offline DataStore StopSync started"), n = MscrmComponents
                .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            $0.$1(this
                    .$U9) ||
                this.$U9.get_$89() ||
                (this.$U9.$Ux(), this.$Zt = !1), $0.$1(this
                    .$167) ||
                (window.clearInterval(this.$167), this.$167 = 0), t = this, i = this, this.get_$Qu().abort(function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.StopSync",
                        "Succesfully stopped the all running sync calls");
                    n.resolve(!0)
                },
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L
                        .$1F("OfflineDataStore.StopSync", "Couldnt stop the running sync call");
                    n.resolve(!1)
                },
                !0), Microsoft.Crm.Client.Core.Offline.$L
                .$C("OfflineDataStore.StopSync", "Offline DataStore StopSync finished"), this.$U9 = null, n.promise()
    },
    $2K4: function(n, t) {
        var r, i, u, f;
        return Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.InitAndLogin",
            "Offline DataStore InitAndLogin started"), r = MscrmComponents
            .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i = new Microsoft.Crm.Client.Core
            .Offline.$IW(n, t), i.$2g4(Microsoft.Crm.Client.Core.Offline.$L.$1Wb)
            ? (Microsoft.Crm.Client.Core.Offline.$L.$C("InitAndLogin.LoginParameters",
                "UserId:- " +
                i.get_$pH() +
                " NorsyncServerEndpointHost:- " +
                i.get_$1qX() +
                " NorsyncServerPort:- " +
                i.get_$1wQ() +
                " OfflineDatabasePath:- /data/data/no.norsync.cordova/databases ServerDatabaseName :- " +
                i.get_$1zH() +
                " ProfileId:- " +
                i.$8x +
                " ModelVersion:- -1 MocaSessionId:- " +
                i.$1Ht), this.$Jo = norsyncPlugin.init(i.$rX), u = this, f = this, this.get_$Qu().login(i.$rX,
                i.get_$pH(),
                "",
                i.get_$1qX(),
                i.get_$1wQ(),
                "/data/data/no.norsync.cordova/databases",
                i.get_$2Ll(),
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$1Wb = i;
                    u.set_$3C(!Microsoft.Crm.Client.Core.Framework.$3.$A(n));
                    Microsoft.Crm.Client.Core.Offline.$L.$C("InitAndLogin.LoginSuccess", i.$rX);
                    r.resolve(!0)
                },
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("InitAndLogin.LoginFailure", i.$rX);
                    r.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Offline Store Initialize Failed"))
                },
                i.get_$1zH(),
                i.$8x,
                -1,
                i.$k3,
                i.$1Ht))
            : (Microsoft.Crm.Client.Core.Offline.$L.$C("InitAndLogin.LoginSuccess", "Already Logged In"), r
                .resolve(!0)), r
            .promise()
    },
    $1z0: function() {
        if (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ScheduleSync",
            "Offline DataStore ScheduleSync started"), $0.$1(this.$U9))
            if (this.$Zt)
                Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ScheduleSync",
                    "Offline DataStore Sync in progress, wait for completion");
            else {
                var n = this;
                this.$U9 = Microsoft.Crm.Client.Core.Framework.Scheduler
                    .Schedule(function() { n.$2XT() }, 0, "Norsync Sync")
            }
        else
            this.$U9.get_$89() ||
            (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ScheduleSync",
                "Offline DataStore ScheduleSync priority increased"), this.$U9.set_$LM(13))
    },
    $2XT: function() {
        var n, t, i;
        return Microsoft.Crm.Client.Core.Offline.$L
                .$C("OfflineDataStore.Sync", "Offline DataStore Sync started"), n = MscrmComponents
                .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            Microsoft.Crm.Client.Core.Framework.$3.$A(this.$FZ) ||
                this.$FZ === Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString()
                ? this.$2XZ(n)
                : (t = this, i = this, this.$1OL(!1).then(function() { t.$2XZ(n) }, function(t) { n.reject(t) })), n
                .promise()
    },
    $2XZ: function(n) {
        var i = new Microsoft.Crm.Client.Core.Framework.PerformanceStopwatch("DataSource_OfflineSync"), t;
        i.start();
        t = this;
        this.$2K4(this.$FZ, this.$1e).done(function() {
            if (!t.$3S0()) {
                n.resolve(!1);
                t.$U9 = null;
                return
            }
            t.$Zt = !0;
            Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.Start", "SyncStarted");
            var r = new Date, u = t.$32p();
            t.get_$Qu().synchronize(Microsoft.Crm.Client.Core.Offline.$L.$2Mu,
                function(u) {
                    if (Microsoft.Crm.Client.Core.Offline.$L
                        .$C("Sync", "Offline DataStore Plugin Synchronize progress. Result - " + u.type), Microsoft.Crm
                        .Client.Core.Offline.$L.$2Mu(u), u.type === "on-sync-complete")
                        if (Microsoft.Crm.Client.Core.Offline.$L
                            .$C("Sync", "Offline DataStore Plugin Synchronize completed"), t.$1Vh = !1, t.$vK = t
                            .$1tq, t.$2fb().always(function() {
                            var n = Microsoft.Crm.Client.Core.Framework.$3.$A(t.$FZ) ? !0 : !1;
                            t.$Md.$3Ib(n).always(function() {
                                t.$B2 && t.$Md.$1OB();
                                t.$Zt = !1;
                                t.$Md.$344()
                            }).done(function() {
                                Microsoft.Crm.Client.Core.Offline.$L
                                    .$C("Sync.ProcessSyncCompleteForSchemaChanges",
                                        "offlineMetadataManager.ProcessSyncCompleteForSchemaChanges succeeded")
                            }).fail(function() {
                                Microsoft.Crm.Client.Core.Offline.$L
                                    .$1F("Sync.ProcessSyncCompleteForSchemaChanges",
                                        "offlineMetadataManager.ProcessSyncCompleteForSchemaChanges failed")
                            })
                        }).done(function() {
                            Microsoft.Crm.Client.Core.Offline.$L
                                .$C("Sync.CheckForOfflineProfileChange",
                                    "OfflineDataStore CheckForOfflineProfileChange succeeded")
                        }).fail(function() {
                            Microsoft.Crm.Client.Core.Offline.$L
                                .$1F("Sync.CheckForOfflineProfileChange",
                                    "OfflineDataStore CheckForOfflineProfileChange failed")
                        }), t.$v0 && t.$2hr(), t.$U9 = null, Microsoft.Crm.Client.Core.Framework.$3.$A(t.$FZ)) {
                            if (Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.Plugin.Synchronize", "Initial Sync"), !t
                                .$B2) {
                                var f = new Date,
                                    o = f - r,
                                    s = new Microsoft.Crm.Client.Core.Framework.TelemetryCore
                                        .$O7("1002",
                                            "MOCADataSyncInitialDownloadCompleted",
                                            r.toString(),
                                            f.toString(),
                                            o,
                                            "Success",
                                            "Initial data downloaded successfully",
                                            Microsoft.Crm.Client.Core.Framework.Guid.get_empty(),
                                            "",
                                            "",
                                            0);
                                Microsoft.Crm.Client.Core.Framework.TelemetryCore.TelemetryReporter.get_Instance()
                                    .$1w(s)
                            }
                            t.$5C.$2Tw(Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString())
                                .done(function() {
                                    t.$FZ = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString();
                                    t.set_$3C(!0);
                                    Microsoft.Crm.Client.Core.Offline.$L
                                        .$C("Sync.SaveOfflineDatabaseInformation.Success", t.$FZ)
                                }).always(function() {
                                    i.stop();
                                    $(window).trigger("offlineSyncComplete");
                                    Microsoft.Crm.Client.Core.Offline.$L
                                        .$C("Sync.SaveOfflineDatabaseInformation.Complete", t.$FZ);
                                    n.resolve(!0)
                                });
                            Microsoft.Crm.Client.Core.Offline.$4Y.get_$6J().$25c(null)
                        } else {
                            i.stop();
                            $(window).trigger("offlineSyncComplete");
                            Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.Success", t.$FZ);
                            n.resolve(!0);
                            var e = new Date,
                                h = e - r,
                                c = new Microsoft.Crm.Client.Core.Framework.TelemetryCore
                                    .$O7("1003",
                                        "MOCADataSyncComplete",
                                        r.toString(),
                                        e.toString(),
                                        h,
                                        "Success",
                                        "Delta sync completed successfully",
                                        Microsoft.Crm.Client.Core.Framework.Guid.get_empty(),
                                        "",
                                        "",
                                        0);
                            Microsoft.Crm.Client.Core.Framework.TelemetryCore.TelemetryReporter.get_Instance().$1w(c);
                            Microsoft.Crm.Client.Core.Offline.$4Y.get_$6J().$37S().then(function(n) {
                                    n &&
                                        t.$1OL(!0).then(function() {
                                                Microsoft.Crm.Client.Core.Offline.$L
                                                    .$C("SyncInternal.CleanUpDatabases",
                                                        "Full sync because of fls change");
                                                t.$2U3()
                                            },
                                            function(n) {
                                                Microsoft.Crm.Client.Core.Offline.$L
                                                    .$1F("SyncInternal.CleanUpDatabases",
                                                        "Force sync did not happen, cleanup Error: " + n.$E.toString())
                                            })
                                },
                                function(n) {
                                    Microsoft.Crm.Client.Core.Offline.$L
                                        .$1F("SyncInternal.IsFullSyncRequired", "Error: " + n.$E.toString())
                                })
                        }
                    else t.$Zt = !0
                },
                function(i) {
                    t.$U9 = null;
                    t.$Zt = !1;
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("Sync.Failure", t.$FZ + " " + i.message);
                    i.type === "on-sync-complete" &&
                    (i.code === -35
                        ? Microsoft.Crm.Client.Core.Offline.$l.get_$6J()
                        .$1zt(Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$Zu().$Mv, -2)
                        : Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$Zu().$RD === 3 && t.$Md.$1Vo() ||
                        Microsoft.Crm.Client.Core.Offline.$l.get_$6J()
                        .$1zt(Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$Zu().$Mv, -1), t.$3N9(), n
                        .reject(Microsoft.Crm.Client.Core.Framework.$4.$h(i.message)))
                },
                -1,
                function(n) {
                    return t.$Md.$fx
                        ? (Microsoft.Crm.Client.Core.Offline.$L
                            .$1F("Sync.Aborting",
                                "Returning false for syncing data model changes as metadata sync is in progress"), !1)
                        : (t.$Zt = !0, t.$Md.$3IJ(n), t.$v0 = !0, Microsoft.Crm.Client.Core.Offline.$L
                            .$C("Sync.ModelChanged", n.toString()), !0)
                },
                u)
        })
    },
    $3N9: function() {
        if (this.$1Vh || (this.$1Vh = !0, this.$vK = this.$1tq), this.$vK < this.$1d2) {
            var n = this;
            window.setTimeout(function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.Retry", "Retrying after failure");
                    n.$1z0()
                },
                this.$vK);
            this.$vK = this.$2TP * this.$vK
        }
    },
    $2fb: function() {
        Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CheckForOfflineProfileChange",
            "Offline DataStore CheckForOfflineProfileChange started");
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            i = [
                new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
                .$Hz("systemuserid", this.$1e.$3G.toString(), 0, 0)
            ],
            r = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(i),
            t = this,
            u = this;
        return this.$1ad("_systemuser", r).then(function(i) {
                $0.$1(t.$1Is) && (t.$1Is = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$8x.toString());
                $0.$1(i) || !i.rows.length
                    ? (Microsoft.Crm.Client.Core.Offline.$L.$1F("CheckForOfflineProfileChange.NosystemUser",
                        "No system user records found in offline db."), n
                        .reject(Microsoft.Crm.Client.Core.Framework.$4
                            .$h("No system user records found in offline db.")))
                    : "mobileofflineprofileid!id" in i.rows.item(0) &&
                    !$0.$1(i.rows.item(0)["mobileofflineprofileid!id"]) &&
                    !t.$1rw(i.rows.item(0)["mobileofflineprofileid!id"].toString()) ||
                    (t.$Md.$342(), Microsoft.Crm.Client.Core.Offline.$L
                        .$C("CheckForOfflineProfileChange.Detected",
                            "Offline Profile Change detected on offline sync completion"));
                n.resolve(!0)
            },
            function(t) {
                Microsoft.Crm.Client.Core.Offline.$L.$1F("CheckForOfflineProfileChange.RetrieveSystemUserFailed", t.$E);
                n.reject(t)
            }), n.promise()
    },
    $1rw: function(n) { return n.toLowerCase() !== this.$1Is.toLowerCase() ? (this.$1Is = n, !0) : !1 },
    $2eZ: function() {
        var u, f, h, c;
        Microsoft.Crm.Client.Core.Offline.$L.$C("CacheDefaultFieldsAttributeMetadataForOfflineEnabledEntities",
            "Offline DataStore CacheDefaultFieldsAttributeMetadataForOfflineEnabledEntities started");
        var r = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            e = [],
            o = {},
            s = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$LD;
        for (u in s) {
            var t = { key: u, value: s[u] },
                n = Microsoft.Crm.Client.Core.Offline.$2l.get_$1kE(),
                i = this.$5Y.$i(t.key);
            $0.$1(i) ||
            (i
                    .$1EC ||
                    this.$1QR.contains(t.key) ||
                    (o[t.key] = i.$1P), i
                    .$OL &&
                    n.push
                    .apply(n, Microsoft.Crm.Client.Core.Offline.$2l.get_$2XA()),
                1 !== i.$13o && Array.remove(n, "ownerid")
            );
            f = this.$5Y.$Ff(t.key, n);
            ($0.$1(f) || f.length !== n.length) &&
                Array.add(e,
                    Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                    .$4j(new Microsoft.Crm.Client.Core.Storage.DataApi.$5u(t.key, n), null))
        }
        return Microsoft.Crm.Client.Core.Offline.$l.get_$6J().set_$1uR(o), h = this, c = this, Microsoft.Crm.Client.Core
            .Imported.DeferredPromiseHelper.whenArray(e).then(function() {
                    Microsoft.Crm.Client.Core.Offline.$L
                        .$C("CacheDefaultFieldsAttributeMetadataForOfflineEnabledEntities",
                            "Succeeded");
                    r.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.$L
                        .$1F("CacheDefaultFieldsAttributeMetadataForOfflineEnabledEntities.Failure", n.$E);
                    r.reject(n)
                }), r.promise()
    },
    $3S0: function() {
        if (this.$5C.$114())
            if (this.$Md.$fx)
                Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.NotStarted",
                    "Sync not started because metadata sync is in progress.");
            else {
                if (Microsoft.Crm.Client.Core.Storage.DataApi.$H.$Lg) return!0;
                Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.NotStarted",
                    "Sync not started because upsync is in progress.")
            }
        else
            Microsoft.Crm.Client.Core.Offline.$L.$C("Sync.NotStarted",
                "Sync not started due to no network connectivity");
        return!1
    },
    $32p: function() {
        var i = Microsoft.Crm.Client.Core.Storage.Common.DateTimeOperators.$X.$2Is(),
            u = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().get_$Ef(),
            r = Microsoft.Crm.Client.Core.Framework.$m.$10x(i, u),
            n = new Date(i.getTime() + r),
            f = this.$1e.get_$Il() * 6e4,
            t = {};
        return t[Microsoft.Crm.Client.Core.Offline.$L.$UA.$29B] = String
            .format("'{0}-{1:D2}-{2:D2} {3:D2}:{4:D2}:{5:D2}.{6:D3}'",
                n.getFullYear(),
                n.getMonth() + 1,
                n.getDate(),
                n.getHours(),
                n.getMinutes(),
                n.getSeconds(),
                n.getMilliseconds()), t[Microsoft.Crm.Client.Core.Offline.$L.$UA.$2O9] = f.toString(), t[Microsoft.Crm
            .Client.Core.Offline.$L.$UA.$2AH] = r.toString(), t
    },
    $30v: function() {
        var n = {};
        return n.CommandOperation = "CommandId", n.Command = "Id", n
            .businessprocessflowinstance = "businessprocessflowinstanceid", n
    },
    $19Q: function(n, t) {
        var i;
        if (Microsoft.Crm.Client.Core.Storage.DataApi.$H
            .$Lg &&
            (i = this.$5Y.$i(n.$N.LogicalName), n.hasValue(i.$4M))) {
            var u = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2rq(n.$N, i.$4M),
                f = [n.getValue(i.$4M).toString()],
                r = this,
                e = this;
            this.$Jo.transaction(function(i) {
                    i.executeSql(u,
                        f,
                        function(i, u) {
                            var f, c, e, o, l;
                            if (!$0.$1(u.rows) && u.rows.length === 1) {
                                var a = u.rows.item(0), s = !1, h = a;
                                for (f in h) c = { key: f, value: h[f] }, s = c.value;
                                if (s) {
                                    e = n.fields;
                                    for (o in e) l = { key: o, value: e[o] }, n.$4P.add(l.key);
                                    r.$7n(n.$N, n, !0, t, !0)
                                        .done(function() {
                                            Microsoft.Crm.Client.Core.Offline.$L
                                                .$C("OfflineDataStore.Cache.Success", n.$N.get_key())
                                        })
                                } else
                                    r.$B(n, !0, t, !0).done(function() {
                                        Microsoft.Crm.Client.Core.Offline.$L
                                            .$C("OfflineDataStore.Cache.Success", n.$N.get_key())
                                    })
                            }
                        },
                        function(n) {
                            Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.Cache.SqlExecutionFailure", n)
                        })
                },
                function(n, t) {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.Cache.TransactionFailure", t)
                },
                null)
        }
    },
    $B: function(n, t, i, r) {
        var u, f;
        if (Microsoft.Crm.Client.Core.Offline.$L
            .$C("OfflineDataStore.Create", "Offline DataStore Create started"), u = MscrmComponents
            .DeferredPromiseFactory(Xrm.Objects.EntityReference, Microsoft.Crm.Client.Core.Framework.$4), f = this.$5Y
            .$Ff(n.$N.LogicalName, null), r = $0.$1(r) ? !1 : r, $0.$1(f)) {
            var e = this, o = this;
            Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                .$4j(new Microsoft.Crm.Client.Core.Storage.DataApi.$5u(n.$N.LogicalName, null), null).then(function(t) {
                        e.$5Y.$Gs(n.$N.LogicalName, !0, t);
                        e.$d9(n, u, r)
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.$L
                            .$1F("OfflineDataStore.Create.RetrieveMultipleAttributeMetadata.Fail", n.$E);
                        u.reject(n)
                    })
        } else this.$d9(n, u, r);
        return u.promise()
    },
    $d9: function(n, t, i) {
        $0.$1(n.$N) &&
        (Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.Create.Fail",
            "Entity Record Identifier cannot be null"), t
            .reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Entity Record Identifier cannot be null")));
        var u = this.$5Y.$i(n.$N.LogicalName),
            f = $0.$1(n.$N.Id) || n.$N.Id === Microsoft.Crm.Client.Core.Framework.Guid.get_empty()
                ? $0.$1(n.fields[u.$4M]) ? Microsoft.Crm.Client.Core.Framework.Guid.newGuid() : n.fields[u.$4M]
                : n.$N.Id,
            r = this,
            e = this;
        Microsoft.Crm.Client.Core.Offline.$2l.$2Hr(n, 0, u.$4M, f, this.$5Y, this.$1e).then(function(e) {
                var o = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Rg(n.$N, e.$3O), s = e.$N4;
                r.get_$Qu().transaction(function(s) {
                        var h = [], c;
                        if (i &&
                        (Microsoft.Crm.Client.Core.Offline.$L
                            .$C("OfflineDataStore.CreateInternal", "Create called with triggers suppressed"), Array
                            .add(h, r.$FY(s, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Ri(), null))), Array
                            .add(h, r.$FY(s, o, e.$N4)), u.get_$9N() && !$0.$1(e.$nt)) {
                            n.$N.Id = f;
                            for (var a = e
                                         .$nt,
                                v = a.length,
                                l = 0;
                                l < v;
                                ++l)
                                c = a[l], Array.add(h,
                                    r.$FY(s,
                                        Microsoft.Crm.Client.Core.Offline.$v.get_$5()
                                        .$1Rg(c.entityreference, c.columns),
                                        c.values))
                        }
                        i && Array.add(h, r.$FY(s, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Rj(), null));
                        Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(h).then(function() {
                                Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Create",
                                    "OfflineDataStore Create succeeded");
                                n.$N.Id = f;
                                t.resolve(n.$N)
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.Create.Fail", n.$E);
                                t.reject(n)
                            })
                    },
                    Microsoft.Crm.Client.Core.Offline.$L.$az(Xrm.Objects.EntityReference, t, "Create"),
                    null)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Offline.$L
                    .$1F("OfflineDataStore.Create.GetOfflineQueryDataObject.Fail", n.$E);
                t.reject(n)
            })
    },
    $2nq: function(n) {
        Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ExecuteTransaction",
            "Offline DataStore ExecuteTransaction started");
        var t = n.$1JL,
            r = n.$20k,
            i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            f = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            u = this,
            e = this;
        return this.$10Q().then(function(n) {
            var l = new Array(0), a = [], v = new Array(0), e, c, w, d, g, b, k, s;
            for (r &&
                (l.push(Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Ri()), a.push(null), v
                    .push("Transaction.SuppressTrigger.Failed")), e = 0;
                e < t.get_Count();
                e++) {
                var nt = $0.$1(t.get_$H(e).$YX) ? null : t.get_$H(e).$YX.$x6,
                    o = new Microsoft.Crm.Client.Core.Offline.$I5(t.get_$H(e).$1Jc, nt),
                    y = "",
                    p = "",
                    h = [];
                if (o.$5x.length > 0 || t.get_$H(e).$13i === "Delete") {
                    switch (t.get_$H(e).$13i) {
                    case"Create":
                        p = "Transaction.Create";
                        h = o.$lV;
                        y = Microsoft.Crm.Client.Core.Offline.$v.get_$5()
                            .$1Rg(new Xrm.Objects.EntityReference(t.get_$H(e).$RH, n), o.$5x);
                        break;
                    case"Delete":
                        p = "Transaction.Delete";
                        h = o.$lV;
                        y = Microsoft.Crm.Client.Core.Offline.$v.get_$5()
                            .$2DF(new Xrm.Objects.EntityReference(t.get_$H(e).$RH, n), t.get_$H(e).$YX);
                        break;
                    case"Update":
                        for (p = "Transaction.Update", c = "", w = u.$30v(), (t.get_$H(e).$RH in
                        w)&&
                    !$0.$1(w[t.get_$H(e).$RH])
                        ? c = w[t.get_$H(e).$RH].toString()
                        : (d = t.get_$H(e).$RH.startsWith("_NORSYNC_LOG_")
                            ? t.get_$H(e).$RH.replace("_NORSYNC_LOG_", "")
                            : t.get_$H(e).$RH, g = u.$5Y.$i(d), c = g.get_$HZ()), b = new Array(0), k = -1, s = 0;
                    s < o.$5x.length;
                    s++)
                    o.$5x[s].toString() !== c ? (b[b.length] = o.$5x[s].toString(), h.push(o.$lV[s])) : k = s;
                    k !== -1 && h.push(o.$lV[k]);
                    y = Microsoft.Crm.Client.Core.Offline.$v.get_$5()
                        .$2DT(new Xrm.Objects.EntityReference(t.get_$H(e).$RH, n), b, c)
                }
                l.push(y);
                a.push(h);
                v.push(p)
            }
        }
        r &&
        (l.push(Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Rj()), a.push(null), v
            .push("Transaction.UnSuppressTrigger.Failed"));
        u.$Jo.transaction(function(n) {
                var u, i;
                for (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ExecuteTransaction.plugin.Transaction",
                        "Succeeded"), u = r ? t.get_Count() + 2 : t.get_Count(), i = 0;
                    i < u;
                    i++) n.executeSql(l[i], a[i], null, Microsoft.Crm.Client.Core.Offline.$L.$15f(Boolean, f, v[i]))
            },
            Microsoft.Crm.Client.Core.Offline.$L.$az(Boolean, i, "Transaction failed!"),
            function() { i.resolve(!0) })
    },
    function(n) {
        Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.ExecuteTransaction.plugin.Transaction", n.$E);
        i.reject(n)
    }),
i.promise()},
$10Q:function() {
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.GenerateUID", "Offline DataStore GenerateUID started");
    var n = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Framework.Guid,
            Microsoft.Crm.Client.Core.Framework.$4),
        t = this;
    return this.get_$Qu().generateUUID(function(t) {
            var i = Microsoft.Crm.Client.Core.Framework.Guid.tryCreate(t);
            i.equals(Microsoft.Crm.Client.Core.Framework.Guid.get_empty())
                ? (Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.GenerateUID", "Guid empty"), n
                    .reject(Microsoft.Crm.Client.Core.Framework.$4.$h("invalid Guid generation")))
                : (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.GenerateUID", "Guid - " + i), n.resolve(i))
        },
        1), n.promise()
},
$1ad:function(n, t) {
    var o = t, u = $0.$1(o) ? null : o.$x6, i, f, r, s, e;
    if (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveLocalEntities",
        "Offline DataStore RetrieveLocalEntities started"), i = MscrmComponents
        .DeferredPromiseFactory(Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteResults,
            Microsoft.Crm.Client.Core.Framework.$4), f = [], !$0.$1(u))
        for (r = 0; r < u.length; r++)
            if (u[r].$Hl === 7) for (s = u[r].$4w, e = 0; e < s.get_Items().length; e++) f.push(s.get_Items()[e]);
            else u[r].$Hl !== 6 && f.push(u[r].$4w);
    var h = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2sG(n, o), c = this, l = this;
    return this.get_$Qu().transaction(function(n) {
            n.executeSql(h,
                f,
                function(n, t) {
                    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveLocalEntities.Plugin.Transaction",
                        "RetrieveLocalEntities succeeded");
                    i.resolve(t)
                },
                Microsoft.Crm.Client.Core.Offline.$L.$15f(Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteResults,
                    i,
                    "Retrieve_DAL"))
        },
        Microsoft.Crm.Client.Core.Offline.$L.$az(Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteResults,
            i,
            "Retrieve_Dal"),
        function() { i.isPending() && i.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("No records found")) }), i
        .promise()
},
$6F:function(n, t, i, r) {
    var u = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityRecord,
            Microsoft.Crm.Client.Core.Framework.$4),
        f,
        e,
        o,
        s;
    return Microsoft.Crm.Client.Core.Offline.$L.$C("Retrieve.Start", n.get_key()), f = this.$5Y
        .$i(n.LogicalName), e = Microsoft.Crm.Client.Core.Storage.Common.ColumnSet
        .isInstanceOfType(t)
        ? t.$3O
        : null, e = this.$2c0(f, e), o = this, s = this, this.$5Y.$T5(n.LogicalName, e).then(function(t) {
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Retrieve.GetAttributeTypes",
                "GetAttributeTypes succeeded");
            var s = o.$2I8(t, r), h = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1nQ(n, s, f.$4M), e = [];
            e[e.length] = n.Id.toString().toUpperCase();
            o.get_$Qu().transaction(function(s) {
                    s.executeSql(h,
                        e,
                        function(e, s) {
                            if ($0.$1(s.rows) || !s.rows.length)
                                Microsoft.Crm.Client.Core.Offline.$L
                                    .$1F("OfflineDataStore.Retrieve.NoRecordsFound", n.get_key()), u
                                    .reject(Microsoft.Crm.Client.Core.Framework.$4.$h("No records found"));
                            else {
                                var h = Microsoft.Crm.Client.Core.Offline.$1G.$z6(s.rows.item(0), t, f, i);
                                f.get_$9N()
                                    ? (Microsoft.Crm.Client.Core.Offline.$L
                                        .$C("OfflineDataStore.Retrieve", "Entity metadata is activity"), o
                                        .$2pn(h, t, i, r)
                                        .then(function(n) {
                                                Microsoft.Crm.Client.Core.Offline.$L
                                                    .$C("OfflineDataStore.Retrieve.FillActivityParty", "Succeeded");
                                                u.resolve(n)
                                            },
                                            function(n) {
                                                Microsoft.Crm.Client.Core.Offline.$L
                                                    .$1F("OfflineDataStore.Retrieve.FillActivityParty", n.$E);
                                                u.reject(n)
                                            }))
                                    : (Microsoft.Crm.Client.Core.Offline.$L
                                        .$C("OfflineDataStore.Retrieve", "Entity metadata is not activity"), u
                                        .resolve(h))
                            }
                        },
                        Microsoft.Crm.Client.Core.Offline.$L.$15f(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                            .EntityRecord,
                            u,
                            "Retrieve" + n.get_key()))
                },
                Microsoft.Crm.Client.Core.Offline.$L.$az(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                    .EntityRecord,
                    u,
                    "Retrieve" + n.get_key()),
                null)
        },
        function(t) {
            Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.Retrieve.GetAttributeTypes.Failure",
                n.LogicalName + "." + t.$E);
            u.reject(t)
        }), u.promise()
},
$2T3:function(n, t, i, r) {
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveLookupRecords", "RetrieveLookupRecords started");
    var u = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
            .EntityCollection,
            Microsoft.Crm.Client.Core.Framework.$4),
        f = this.$5Y.$i(t),
        e = [f.$4M, f.$63],
        o = this,
        s = this;
    return this.$5Y.$T5(t, e).then(function(i) {
            var s = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2sE(n.length, e, f);
            o.$Jo.transaction(function(t) {
                    t.executeSql(s,
                        n,
                        function(n, t) {
                            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveLookupRecords",
                                "RetrieveLookupRecords succeeded");
                            var e = o.$2DG(t, i, f, r);
                            u.resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                                .EntityCollection(e, !1, t.rows.length, !1))
                        },
                        function() {
                            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveLookupRecords",
                                "No records found");
                            u.resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                                .EntityCollection(new Array(0), !1, 0, !1))
                        })
                },
                Microsoft.Crm.Client.Core.Offline.$L.$az(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                    .EntityCollection,
                    u,
                    "RetrieveLookupRecords" + t),
                null)
        },
        function() {
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveLookupRecords",
                "RetrieveLookupRecords failed");
            u.reject(Microsoft.Crm.Client.Core.Framework.$4
                .$h("Offline DB could not retrieve data for retreiveMultiple request"))
        }), u.promise()
},
$36:function(n, t) {
    var i = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
            .EntityCollection,
            Microsoft.Crm.Client.Core.Framework.$4),
        r;
    if (Microsoft.Crm.Client.Core.Offline.$L
        .$C("OfflineDataStore.RetrieveMultiple.Start", n.get_$1Z().toString()), r = n.get_$Bu(), Microsoft.Crm.Client
        .Core.Framework.$3.$A(r))
        return Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.RetrieveMultiple.SqlQueryNotFound",
            n.get_$1Z().toString()), i.resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
            .EntityCollection(new Array(0), !1, 0, !1, n)).promise();
    r = unescape(r);
    var f = Microsoft.Crm.Client.Core.Storage.Common.ColumnSet.isInstanceOfType(n.$3S) && !n.$3S.get_$11l()
            ? n.$3S.$3O
            : null,
        u = this,
        e = this;
    return this.$5Y.$T5(n.$T, f).then(function(f) {
            var e, o, s;
            if (!("transactioncurrencyid" in f)) {
                e = f;
                for (o in e)
                    if (s = { key: o, value: e[o] }, s.value === 8) {
                        f.transactioncurrencyid = 6;
                        break
                    }
            }
            u.get_$Qu().transaction(function(e) {
                    e.executeSql(r,
                        null,
                        function(r, e) {
                            var o, s, h;
                            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrieveMultiple.SqlSuccess",
                                n.get_$1Z().toString());
                            o = !1;
                            s = u.$5Y.$i(n.$T);
                            e.rows.length > n.$2u && (e.rows.length = n.$2u, o = !0);
                            h = u.$2DG(e, f, s, t);
                            i.resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                                .EntityCollection(h, o, e.rows.length, !1, n))
                        },
                        Microsoft.Crm.Client.Core.Offline.$L.$15f(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                            .EntityCollection,
                            i,
                            "OfflineDataStore.RetrieveMultiple.QueryId" + n.get_$1Z().toString()))
                },
                Microsoft.Crm.Client.Core.Offline.$L.$az(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                    .EntityCollection,
                    i,
                    "OfflineDataStore.RetrieveMultiple.QueryId" + n.get_$1Z().toString()),
                function() {
                    i.isPending() &&
                    (Microsoft.Crm.Client.Core.Offline.$L
                        .$1F("OfflineDataStore.RetrieveMultiple.TransactionSuccessWithExecuteSqlPending",
                            "QueryId" + n.get_$1Z().toString()), i
                        .resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                            .EntityCollection(new Array(0), !1, 0, !1, n, t)));
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.RetrieveMultiple.TransactionSuccess",
                        "QueryId" + n.get_$1Z().toString())
                })
        },
        function() {
            var t = String.format("Offline DB could not retrieve Attribute types for entity {0} from Metadata Cache",
                n.$T);
            Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.RetrieveMultiple.AttributeTypeRetrieveFailed",
                t + ".QueryId" + n.get_$1Z().toString());
            i.reject(Microsoft.Crm.Client.Core.Framework.$4.$h(t))
        }), i.promise()
},
$2T2:function(n) {
    var t = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4), i = this.$31T(n), r;
    return i.length
        ? (r = this, this.get_$Qu().transaction(function(n) {
                r.$FY(n, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$3MO(i.length), i).then(function(n) {
                        var r = null, u, i;
                        !$0.$1(n.rows) &&
                            n.rows.length > 0 &&
                            (u = new Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteRecord, i = {}, i = n.rows
                                .item(0), $0.$1(i) ||
                                $0.$1(i.lastdatasynctime) ||
                                (r = Xrm.Soap.CrmDateTimeSerializer.$13w(i.lastdatasynctime.toString())));
                        t.resolve(r)
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineDataStore.RetrieveLastSyncTime", n.$E);
                        t.reject(n)
                    })
            },
            Microsoft.Crm.Client.Core.Offline.$L.$az(String, t, "RetrieveLastSyncTime"),
            null), t.promise())
        : t.resolve(null)
},
$7n:function(n, t, i, r, u) {
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Update", "Update started");
    var e = MscrmComponents.DeferredPromiseFactory(Xrm.Objects.EntityReference, Microsoft.Crm.Client.Core.Framework.$4),
        o = this.$5Y.$i(n.LogicalName),
        f = this,
        s = this;
    return Microsoft.Crm.Client.Core.Offline.$2l.$2Hr(t, 1, o.$4M, n.Id, this.$5Y, this.$1e).then(function(i) {
            var r = i.$N4;
            u = $0.$1(u) ? !1 : u;
            f.get_$Qu().transaction(function(r) {
                    var s = [], l, w, h;
                    if (Array.add(s,
                        f.$FY(r,
                            Microsoft.Crm.Client.Core.Offline.$v.get_$5()
                            .$1nQ(n, [new Microsoft.Crm.Client.Core.Framework.Storage.$4R(o.$4M)], o.$4M),
                            [n.Id.toString()])), u &&
                    (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Update",
                        "Update called with triggers suppressed"), Array
                        .add(s, f.$FY(r, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Ri(), null))), Array
                        .add(s, f.$FY(r, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2DT(n, i.$3O, o.$4M), i.$N4)), o
                        .get_$9N()) {
                        Microsoft.Crm.Client.Core.Offline.$L
                            .$C("OfflineDataStore.Update", "Entity metadata is activity");
                        for (var p = i
                                     .$1G0,
                            d = p.length,
                            c = 0;
                            c < d;
                            ++c)
                            l = p[c], w = l.resolvedparties.length, Array
                                .add(s,
                                    f.$FY(r,
                                        Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2rk(w),
                                        Microsoft.Crm.Client.Core.Offline.$L.$31O(l)));
                        for (var b = i
                                     .$nt,
                            g = b.length,
                            a = 0;
                            a < g;
                            ++a)
                            h = b[a], Array.add(s,
                                f.$FY(r,
                                    Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Rg(h.entityreference, h.columns),
                                    h.values));
                        for (var k = i.$1G0, nt = k.length, v = 0; v < nt; ++v) {
                            var y = k[v], it = y.activityid.toString(), tt = y.resolvedparties.length;
                            Array.add(s,
                                f.$FY(r,
                                    Microsoft.Crm.Client.Core.Offline.$v.get_$5().$3UW(tt),
                                    Microsoft.Crm.Client.Core.Offline.$L.$31P(y)))
                        }
                    }
                    u && Array.add(s, f.$FY(r, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Rj(), null));
                    Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(s)
                        .then(function(n) {
                                $0.$1(n[0]) || !n[0].rows.length
                                    ? (Microsoft.Crm.Client.Core.Offline.$L
                                        .$1F("OfflineStore.Update.Failure",
                                            "You can’t update this record because it doesn’t exist in the offline mode"), e
                                        .reject(Microsoft.Crm.Client.Core.Framework.$4.$lh(-2147093980)))
                                    : (Microsoft.Crm.Client.Core.Offline.$L
                                        .$C("OfflineDataStore.Update", "Update succeeded"), e
                                        .resolve(t.$N))
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineStore.Update.Failure", n.$E);
                                e.reject(n)
                            })
                },
                Microsoft.Crm.Client.Core.Offline.$L.$az(Xrm.Objects.EntityReference, e, "Update"),
                null)
        },
        function(n) {
            Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineStore.Update.GetOfflineQueryDataObject.Failure", n.$E);
            e.reject(n)
        }), e.promise()
},
$FY:function(n, t, i) {
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ExecuteInternal", "ExecuteInternal started");
    var r = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteResults,
            Microsoft.Crm.Client.Core.Framework.$4),
        u = this;
    return n.executeSql(t,
        i,
        function(n, t) {
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.ExecuteInternal", "ExecuteInternal succeeded");
            r.resolve(t)
        },
        Microsoft.Crm.Client.Core.Offline.$L.$15f(Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteResults,
            r,
            "ExecuteInternal")), r.promise()
},
Delete:function(n, t, i) {
    var u, r;
    return Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Delete", "Delete started"), u = MscrmComponents
        .DeferredPromiseFactory(Xrm.Objects
            .EntityReference,
            Microsoft.Crm.Client.Core.Framework.$4), i = $0.$1(i) ? !1 : i, r = this, this.get_$Qu()
        .transaction(function(t) {
                var e = r.$5Y.$i(n.LogicalName),
                    s = [new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz(e.$4M, null, 1, 0)],
                    h = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(s),
                    c = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2DF(n, h),
                    o = [n.Id.toString()],
                    f = [];
                Array.add(f,
                    r.$FY(t,
                        Microsoft.Crm.Client.Core.Offline.$v.get_$5()
                        .$1nQ(n, [new Microsoft.Crm.Client.Core.Framework.Storage.$4R(e.$4M)], e.$4M),
                        [n.Id.toString()]));
                i &&
                (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.Delete",
                    "Delete called with triggers suppressed"), Array
                    .add(f, r.$FY(t, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Ri(), null)));
                Array.add(f, r.$FY(t, c, o));
                e.get_$9N() &&
                (Microsoft.Crm.Client.Core.Offline.$L
                    .$C("OfflineDataStore.Delete", "Entity metadata is activity"), Array
                    .add(f, r.$FY(t, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2rj(), o)));
                i && Array.add(f, r.$FY(t, Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1Rj(), null));
                Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(f)
                    .then(function(t) {
                            $0.$1(t[0]) || !t[0].rows.length
                                ? (Microsoft.Crm.Client.Core.Offline.$L
                                    .$1F("OfflineStore.Delete.Failure",
                                        "You can’t delete this record because it doesn’t exist in the offline mode"), u
                                    .reject(Microsoft.Crm.Client.Core.Framework.$4.$lh(-2147093944)))
                                : (Microsoft.Crm.Client.Core.Offline.$L
                                    .$C("OfflineDataStore.Delete", "Delete succeeded"), u
                                    .resolve(n))
                        },
                        function(n) {
                            Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineStore.Delete.Failure", n.$E);
                            u.reject(n)
                        })
            },
            Microsoft.Crm.Client.Core.Offline.$L.$az(Xrm.Objects.EntityReference, u, "Delete"),
            null), u.promise()
},
$2DG:function(n, t, i, r) {
    for (var u, o = !$0.$1(n) && !$0.$1(n.rows) ? n.rows.length : 0, f = [], e = 0;
        e < o;
        e++
    )
        u = n.rows.item(e), $0.$1(u) ||
            Microsoft.Crm.Client.Core.Framework.$3.$A(u[i.$4M]) ||
            (f[f.length] = Microsoft.Crm.Client.Core.Offline.$1G.$z6(u, t, i, r));
    return f
},
$1j8:function(n, t) {
    var i, r;
    return(Microsoft.Crm.Client.Core.Offline.$L
            .$C("OfflineDataStore.ClearStore", "ClearStore started"), i = MscrmComponents
            .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), Microsoft.Crm.Client.Core
            .Framework.$3
            .$A(n))
        ? (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineStore.ClearStore", "Database name is empty"), i.resolve(!1)
            .promise())
        : (r = this, this.$20Y().always(function() {
            r.$B2
                ? r.$29g(n, i)
                : r.$2K4(n, t).then(function() {
                        Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineStore.ClearStore", "InitAndLogin succeeded");
                        r.$29g(n, i)
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineStore.ClearStore.InitAndLogin.Failure", n.$E);
                        i.reject(n)
                    })
        }), i.promise())
},
$29g:function(n, t) {
    var i = this, r = this;
    this.get_$Qu().deleteDatabase(n,
        function() {
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineStore.DeleteDatabase",
                "Database delete successful for database : " + n);
            i.set_$3C(!1);
            i.$v0 = !0;
            Microsoft.Crm.Client.Core.Offline.$L.$1Wb = null;
            t.resolve(!0)
        },
        function() {
            Microsoft.Crm.Client.Core.Offline.$L.$1F("OfflineStore.DeleteDatabase.Failure", n);
            t.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Could not delete database"))
        })
},
$3Mn:function(n, t, i, r) {
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrievePartyRecords", "RetrievePartyRecords started");
    var u = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
            .EntityCollection,
            Microsoft.Crm.Client.Core.Framework.$4),
        f = this,
        e = this;
    return this.$5Y.$T5("activityparty", Microsoft.Crm.Client.Core.Offline.$2u.$2QH).then(function(e) {
            var s, h, l;
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrievePartyRecords.GetAttributeTypes",
                "GetAttributeTypes succeded");
            var a = f.$2I8(e, r),
                c = f.$5Y.$i("activityparty"),
                v = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2sF(a, t, c.$d),
                o = [];
            o[o.length] = n.Id.toString().toUpperCase();
            s = t;
            for (h in s) l = { key: h, value: s[h] }, o[o.length] = l.key;
            f.$Jo.transaction(function(n) {
                    n.executeSql(v,
                        o,
                        function(n, t) {
                            for (var o = t.rows
                                         .length,
                                f = [],
                                r = 0;
                                r < o;
                                r++)
                                $0.$1(t.rows.item(r)) ||
                                    (f[f.length] = Microsoft.Crm.Client.Core.Offline.$1G.$z6(t.rows.item(r), e, c, i));
                            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.RetrievePartyRecords",
                                "Executesql succeded");
                            u.resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                                .EntityCollection(f, !1, t.rows.length, !1))
                        },
                        Microsoft.Crm.Client.Core.Offline.$L.$15f(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                            .EntityCollection,
                            u,
                            "RetrievePartyRecords"))
                },
                Microsoft.Crm.Client.Core.Offline.$L.$az(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                    .EntityCollection,
                    u,
                    "RetrievePartyRecords"),
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("RetreivePartyRecords.TransactionSuccess",
                        "Identifier" + n.get_key());
                    u.resolve(new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                        .EntityCollection(new Array(0), !1, 0, !1))
                })
        },
        function(t) {
            Microsoft.Crm.Client.Core.Offline.$L.$1F("Retrieve.GetAttributeTypes.Failure", n.LogicalName + "." + t.$E);
            u.reject(t)
        }), u.promise()
},
$2pn:function(n, t, i, r) {
    var o, e, c, l, a;
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.FillActivityParty", "FillActivityParty started");
    var u = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityRecord,
            Microsoft.Crm.Client.Core.Framework.$4),
        s = !1,
        f = {},
        h = t;
    for (o in h)
        e = { key: o, value: h[o] }, e.value === 10 &&
            (c = Microsoft.Crm.Client.Core.Offline.$2u.$1YY[e.key], f[c] = e.key, s = !0);
    return s
        ? (l = this, a = this, this.$3Mn(n.$N, f, i, r).then(function(t) {
                var i, r, e;
                if (Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.FillActivityParty",
                    "RetrievePartyRecords succeeded"), !$0.$1(t.get_entities()) && t.get_entities().length > 0) {
                    i = new Array(0);
                    r = "";
                    for (var s = t
                                 .get_entities(),
                        h = s.length,
                        o = 0;
                        o < h;
                        ++o)
                        e = s[o], r !== e.getValue("participationtypemask").get_$XM() &&
                        (i.length > 0 &&
                        (n.initializeValue(f[r].toString(),
                            new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                            .EntityCollection(i, !1, i.length, !1),
                            10), i = new Array(0)), r = e.getValue("participationtypemask").get_$XM()), i[i.length] = e;
                    n.initializeValue(f[r].toString(),
                        new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityCollection(i, !1, i.length, !1),
                        10)
                }
                Microsoft.Crm.Client.Core.Offline.$L
                    .$C("OfflineDataStore.FillActivityParty", "FillActivityparty succeeded");
                u.resolve(n)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Offline.$L.$1F("Retrieve.RetrievePartyRecords.Failure", n.$E);
                u.reject(n)
            }), u.promise())
        : (u.resolve(n), u.promise())
},
$2I8:function(n, t) {
    var f = Microsoft.Crm.Client.Core.Offline.$2d.$3Ma(n, t), e = new Array(0), o = f, r, s, u, i;
    for (r in o)
        for (s = { key: r, value: o[r] }, u = f[s
                .key], i = 0;
            i < u.length;
            i++) Array.add(e, new Microsoft.Crm.Client.Core.Framework.Storage.$4R(u[i].toString()));
    return e
},
$2c0:function(n, t) {
    var i = new Array(0), e, s;
    if ($0.$1(n.$4M) || (i[i.length] = n.$4M), $0.$1(n.$63) || (i[i.length] = n.$63), i.length > 0) {
        for (var f = t, h = f.length, r = 0; r < h; ++r) if (e = f[r], Array.remove(i, e) && !i.length) break;
        for (var o = i, c = o.length, u = 0; u < c; ++u) s = o[u], t[t.length] = s
    }
    return t
},
$1XW:function() {
    var n = [], r = Microsoft.Crm.Client.Core.Offline.$l.get_$6J().get_$7q().$LD, t, i;
    for (t in r)
        i = { key: t, value: r[t] }, Microsoft.Crm.Client.Core.Offline.$l.get_$6J()
            .$1E3(i.key) ||
            (n[n.length] = i.key);
    return n
},
$2hr:function() {
    var n, t, i, r;
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CreateActivityPointerView",
        "CreateActivityPointerView started");
    n = this.$Md.$1OU;
    t = [];
    !$0.$1(n) &&
        n.length > 0 &&
        (Array.add(t, this.$2AG("activitypointer")), Array.add(t, this.$2AG("activityattachment")));
    i = this.$1XW();
    Array.indexOf(i, "activitypointer".toLowerCase()) === -1
        ? Microsoft.Crm.Client.Core.Offline.$L.$C("CreateActivityPointerView",
            "View not created as ActivityPointer is not offline available")
        : (r = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(t)
            .always(function() { r.$2hs(n, i) }))
},
$2hs:function(n, t) {
    var i = this;
    Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2ra(this.$5Y, this.$IN, this.$5C, n, t).then(function(n) {
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CreateActivityPointerView",
                "CreateActivityPointerView query :" + n);
            i.$Jo.transaction(function(t) {
                    t.executeSql(n,
                        null,
                        function() {
                            Microsoft.Crm.Client.Core.Offline.$L
                                .$C("view creation successful", "CreateActivityPointerView");
                            i.$36p() ? i.$2ho() : i.$v0 = !1
                        },
                        i.$$d_$23N)
                },
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("transaction failed while creating the view",
                        "CreateActivityPointerView")
                },
                null)
        },
        null)
},
$36p:function() {
    var n = this.$1XW();
    return Array.indexOf(n, "activitymimeattachment") === -1 ||
        Array.indexOf(n, "attachment") === -1 ||
        Array.indexOf(n, "activitypointer") === -1
        ? (Microsoft.Crm.Client.Core.Offline.$L.$C("CreateActivityAttachmentView",
            "View not created as ActivityAttachment or Attachment or ActivityPointer is not offline available"), !1)
        : !0
},
$2ho:function() {
    Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CreateActivityAttachmentView",
        "CreateActivityAttachmentView started");
    var n = this;
    Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2rZ(this.$1XW()).then(function(t) {
            Microsoft.Crm.Client.Core.Offline.$L.$C("OfflineDataStore.CreateActivityAttachmentView",
                "CreateActivityAttachmentView query :" + t);
            n.$Jo.transaction(function(i) {
                    i.executeSql(t,
                        null,
                        function() {
                            Microsoft.Crm.Client.Core.Offline.$L
                                .$C("view creation successful", "CreateActivityAttachmentView");
                            n.$v0 = !1
                        },
                        n.$$d_$2a7)
                },
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$1F("transaction failed while creating the view",
                        "CreateActivityAttachmentView")
                },
                null)
        },
        null)
},
$23N:function(n) {
    Microsoft.Crm.Client.Core.Offline.$L.$1F("view creation/removal failed",
        "ActivityPointerChangeFailed with error message : " + n)
},
$2a7:function(n) {
    Microsoft.Crm.Client.Core.Offline.$L.$1F("view creation/removal failed",
        "ActivityAttachmentView creation failed with error message : " + n)
},
$2AG:function(n) {
    var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i = this, r = this;
    return this.$Jo.transaction(function(r) {
            var u = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$2rm(n);
            r.executeSql(u,
                null,
                function() {
                    Microsoft.Crm.Client.Core.Offline.$L.$C("DropView: " + n, "success");
                    t.resolve(!0)
                },
                function(n, r) {
                    i.$23N(n, r);
                    t.resolve(!1)
                })
        },
        function() {
            Microsoft.Crm.Client.Core.Offline.$L.$1F("DropView: " + n, "transaction failed");
            t.resolve(!1)
        },
        null), t.promise()
},
$1ox:function() {
    var n = new Array(0), t = this.$1XW(), i;
    return Array.contains(t, "activitypointer") &&
        (i = this.$Md.$1OU, n = Microsoft.Crm.Client.Core.Offline.$v.get_$5().$1ox(this.$5Y, this.$IN, i, t)), n
},
$31T:function(n) {
    var t = new Array(0);
    return n === "activitypointer" ? t = this.$1ox() : t[0] = n, t
},
$2gJ:function(n) {
    this.$1e = n;
    var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i = this, r = this;
    return this.$1OL(!0).then(function() { t.resolve(!0) }, function(n) { t.reject(n) }), t.promise()
}};
Microsoft.Crm.Client.Core.Offline.$L.$UA = function() {};
Microsoft.Crm.Client.Core.Offline.$2d = function(n) { Microsoft.Crm.Client.Core.Offline.$2d.$Em = n };
Microsoft.Crm.Client.Core.Offline.$2d.$1Sk = function(n, t) {
    var i, u, f, o;
    if (!Microsoft.Crm.Client.Core.Offline.$2d.$Em) return new Array(0);
    if (i = [], Microsoft.Crm.Client.Core.Offline.$1G.$1Uj(t))
        if (Microsoft.Crm.Client.Core.Offline.$2d.$Em.$tH(t)) {
            u = Microsoft.Crm.Client.Core.Offline.$2d.$Em.$1p2(t);
            f = n + "!";
            for (var e = u, s = e.length, r = 0; r < s; ++r) o = e[r], i[i.length] = f + o
        } else i[i.length] = n;
    return i
};
Microsoft.Crm.Client.Core.Offline.$2d.$3Ma = function(n) {
    var r = {}, u = n, i, f, t;
    for (i in u) f = { key: i, value: u[i] }, t = f.key, r[t] = Microsoft.Crm.Client.Core.Offline.$2d.$1Sk(t, n[t]);
    return r
};
Microsoft.Crm.Client.Core.Offline.$2d.$2HB = function(n, t, i) {
    var r, u, h, e, f;
    if (!Microsoft.Crm.Client.Core.Offline.$2d.$Em) return{};
    if (r = {}, u = Microsoft.Crm.Client.Core.Offline.$2d.$1A(t, i), Microsoft.Crm.Client.Core.Offline.$2d.$Em.$tH(t)) {
        h = Microsoft.Crm.Client.Core.Offline.$2d.$1Sk(n, t);
        e = Microsoft.Crm.Client.Core.Offline.$2d.$Em.$1p5(t).$rF;
        for (var s = e
                     .get_$396(),
            c = s.length,
            o = 0;
            o < c;
            ++o)
            f = s[o], r[n + "!" + f] = e.get_$H(f) === Microsoft.Crm.Client.Core.Framework.Guid
                ? f in u
                ? Microsoft.Crm.Client.Core.Framework.Guid.createFromObjectData(u[f]).toString().toUpperCase()
                : ""
                : f in u ? u[f] : ""
    } else
        switch (t) {
        case 13:
        case 12:
        case 0:
        case 11:
            r[n] = $0.$1(u.value) ? -1 : u.value;
            break;
        case 15:
            r[n] = !$0.$1(i) && !Microsoft.Crm.Client.Core.Framework.Guid.$A(i.toString())
                ? i.toString().toUpperCase()
                : "";
            break;
        case 2:
            r[n] = $0.$1(i) ? "" : Xrm.Soap.CrmDateTimeSerializer.$1JD(i.toISOString());
            break;
        case 10:
            break;
        default:
            r[n] = i
        }
    return r
};
Microsoft.Crm.Client.Core.Offline.$2d.$1A = function(n, t) {
    var i = {};
    if ($0.$1(t)) return i;
    switch (n) {
    case 9:
    case 6:
    case 1:
        i = t.getObjectData();
        break;
    case 11:
    case 0:
    case 12:
    case 13:
        i = t.$1A();
        break;
    case 21:
        i = t.$1A();
        break;
    case 10:
        i = t.getObjectData();
        break;
    case 15:
        i = t.getObjectData()
    }
    return i
};
Microsoft.Crm.Client.Core.Offline.$2l = function(n, t, i, r) {
    this.$3O = new Array(0);
    this.$N4 = new Array(0);
    this.$nt = new Array(0);
    this.$1G0 = new Array(0);
    this.$1mC = new Array(0);
    this.$5Y = i;
    this.$1e = r;
    var u = this.$2ys(n, t);
    this.$6D = Microsoft.Crm.Client.Core.Offline.$1G.$2pu(n, u);
    this.$uM = t
};
Microsoft.Crm.Client.Core.Offline.$2l.get_$1kE = function() {
    return["createdon", "createdby", "ownerid", "modifiedon", "modifiedby"]
};
Microsoft.Crm.Client.Core.Offline.$2l.get_$29X = function() { return["modifiedon", "modifiedby"] };
Microsoft.Crm.Client.Core.Offline.$2l.get_$2XA = function() { return["statecode", "statuscode"] };
Microsoft.Crm.Client.Core.Offline.$2l.get_$3Gq = function() {
    return[
        "activitypartyid", "activityid!id", "activityid!name", "activityid!logicalname", "participationtypemask",
        "partyid!id", "partyid!name", "partyid!logicalname", "ispartydeleted", "partyobjecttypecode"
    ]
};
Microsoft.Crm.Client.Core.Offline.$2l.$2Hr = function(n, t, i, r, u, f) {
    var o = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Offline.$2l,
            Microsoft.Crm.Client.Core.Framework.$4),
        e = new Microsoft.Crm.Client.Core.Offline.$2l(n, t, u, f),
        s = u.$i(n.$N.LogicalName);
    return!$0.$1(s) && s.get_$9N()
        ? Microsoft.Crm.Client.Core.Offline.$l.get_$6J().$2zW(n).then(function(n) {
                e.$1mC = n;
                e.$2Va(i, r);
                Microsoft.Crm.Client.Core.Framework.$C.$C("OfflineQueryData_GetOfflineQueryDataObject",
                    1005,
                    "GetOfflineQueryDataObject completed succesfully");
                o.resolve(e)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("OfflineQueryData_GetOfflineQueryDataObject - Failure",
                    1005,
                    n.$E);
                o.reject(n)
            })
        : (e.$2Va(i, r), Microsoft.Crm.Client.Core.Framework.$C
            .$C("OfflineQueryData_GetOfflineQueryDataObject", 1005, "GetOfflineQueryDataObject completed succesfully"),
        o
            .resolve(e)), o.promise()
};
Microsoft.Crm.Client.Core.Offline.$2l.prototype = {
    $1e: null,
    $6D: null,
    $uM: 0,
    $5Y: null,
    $2Va: function(n, t) {
        var r = new Array(0), a, v, i, f, u, s, h, c, e, l;
        for (r = this.$uM === 1
                ? (a = this.$6D.$4P.toArray()).concat.apply(a, Microsoft.Crm.Client.Core.Offline.$2l.get_$29X())
                : this.$6D.get_fieldNames(), v = new(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(String))(this.$1mC), i = 0;
            i < r.length;
            i++)
            if (this.$6D.$1X[r[i]] === 10) {
                f = new Array(0);
                for (var y = this.$6D.getValue(r[i])
                             .get_entities(),
                    w = y.length,
                    o = 0;
                    o < w;
                    ++o)
                    u = y[o], s = u.hasField("activitypartyid")
                        ? u.getValue("activitypartyid")
                        : Microsoft.Crm.Client.Core.Framework.Guid
                        .get_empty(), this.$uM === 1 &&
                        u.hasValue("activitypartyid") &&
                        s !== Microsoft.Crm.Client.Core.Framework.Guid.get_empty() &&
                        v.contains(s.toString().toUpperCase())
                        ? f[f.length] = u.getValue("activitypartyid").toString().toUpperCase()
                        : this.$nt[this.$nt.length] = this.$2Qh(r[i], u, t.toString());
                this.$uM === 1 &&
                    (this.$1G0[this.$1G0.length] = this.$3I0(t.toString().toUpperCase(), f.length > 0 ? f : [""], r[i]))
            } else {
                h = Microsoft.Crm.Client.Core.Offline.$2d.$2HB(r[i], this.$6D.$1X[r[i]], this.$6D.getValue(r[i]));
                for (c in h)
                    e = { key: c, value: h[c] }, this.$3O[this.$3O.length] = e.key, this.$N4[this.$N4
                        .length] = $0.$1(e.value) ? "" : e.value.toString()
            }
        if (this.$6D.$N.LogicalName === "annotation" &&
        (this.$3O[this.$3O.length] = "objecttypecode", this.$N4[this.$N4.length] = this.$6D.getValue("objectid")
            .TypeCode.toString()), $0.$1(this.$6D.$N.$Rw) ||
            (this.$3O[this.$3O.length] = "versionnumber", this.$N4[this.$N4.length] = this.$6D.$N.$Rw), this
            .$uM) this.$uM === 1 && (this.$N4[this.$N4.length] = t.toString().toUpperCase());
        else if (n in this.$6D.fields &&
            !$0.$1(this.$6D.$N) &&
            !$0.$1(this.$6D.$N.Id) &&
            this.$6D.$N.Id !== Microsoft.Crm.Client.Core.Framework.Guid.get_empty() ||
            (this.$3O[this.$3O.length] = n, this.$N4[this.$N4.length] = t.toString().toUpperCase()), l = this.$5Y
            .$i(this.$6D.$N.LogicalName), !$0.$1(l) && l.get_$9N()) {
            var b = new Xrm.Objects.EntityReference("activityparty",
                    Microsoft.Crm.Client.Core.Framework.Guid.get_empty()),
                k = new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.RelatedEntityCollection(new Array(0)),
                p = new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityRecord(b, {}, {}, {}, {}, k);
            p.initializeValue("partyid", this.$6D.getValue("ownerid"), 6);
            this.$nt[this.$nt.length] = this.$2Qh("owner", p, t.toString())
        }
    },
    $2ys: function(n, t) {
        var i = [], u, o, f, s, p, w, k, l, r;
        if (!t) {
            u = Microsoft.Crm.Client.Core.Offline.$2l.get_$1kE();
            u.push.apply(u, Microsoft.Crm.Client.Core.Offline.$2l.get_$2XA());
            for (var v = u, g = v.length, e = 0; e < g; ++e) o = v[e], n.hasValue(o) || (i[i.length] = o);
            f = this.$5Y.$i(n.$N.LogicalName);
            !$0.$1(f) &&
                f.get_$9N() &&
                (n
                        .hasValue("activitytypecode") ||
                        n
                        .initializeValue("activitytypecode", f.$d, 14),
                    n.hasValue("isregularactivity") ||
                    (s = {}, s.value = this.$38H(n.$N.LogicalName) ? "1" : "0", n
                        .initializeValue("isregularactivity",
                            Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$1N.$18(s),
                            0)))
        }
        if (!t || t === 1) {
            for (var y = Microsoft.Crm.Client.Core.Offline.$2l
                         .get_$29X(),
                nt = y.length,
                h = 0;
                h < nt;
                ++h) p = y[h], i[i.length] = p;
            if (w = this.$5Y.$2V(n.$N.LogicalName, "fullname"), !$0.$1(w))
                for (var b = n.$4P.toArray(), tt = b.length, c = 0; c < tt; ++c)
                    if (k = b[c], Array.contains(Microsoft.Crm.Client.Core.Offline.$2u.$2D7, k)) {
                        n.initializeValue("fullname",
                            Mscrm.InternalUtilities.$5P
                            .$2rx(this.$1e.$1O.$1Rd,
                                n.getValue("firstname"),
                                n.getValue("middlename"),
                                n.getValue("lastname")),
                            14);
                        n.$4P.add("fullname");
                        break
                    }
        }
        if (!t && (l = this.$5Y.$Ff(n.$N.LogicalName, null), !$0.$1(l))
        )
            for (var d = l, it = d.length, a = 0;
                a < it;
                ++a
            )
                r = d[a], (!$0.$1(r.$At) || !$0.$1(r.$D8)) &&
                    Array.indexOf(n.get_fieldNames(), r.$d) < 0 &&
                    Array.indexOf(i, r.$d) < 0 &&
                    (i[i.length] = r.$d);
        return i
    },
    $38H: function(n) {
        var t = this.$5Y.$i(n);
        switch (t.$7h) {
        case 4208:
        case 4209:
        case 4211:
        case 4206:
        case 4406:
        case 4251:
            return!1
        }
        return t.$18h ? !0 : !1
    },
    $2Qh: function(n, t, i) {
        var r = t.getFieldObjectData("partyid"),
            u = this.$5Y.$2V("activityparty", "ispartydeleted"),
            f = t.hasField("activitypartyid") &&
                t.getValue("activitypartyid") !== Microsoft.Crm.Client.Core.Framework.Guid.get_empty()
                ? t.getValue("activitypartyid")
                : Microsoft.Crm.Client.Core.Framework.Guid.newGuid(),
            e = [
                f.toString().toUpperCase(), i.toUpperCase(), this.$6D.$N.Name, this.$6D.$N.LogicalName, Microsoft.Crm
                .Client.Core.Offline.$2u.$1YY[n].toString(), Microsoft.Crm.Client.Core.Framework.Guid
                .createFromObjectData(r.id).toString().toUpperCase(), $0.$1(r.name) ? "" : r.name.toString(), r
                .logicalname.toString(), !$0.$1(u) && u.$At ? "1" : "0", this.$5Y.$i(r.logicalname.toString()).$7h
                .toString()
            ];
        return{ entityreference: t.$N, columns: Microsoft.Crm.Client.Core.Offline.$2l.get_$3Gq(), values: e }
    },
    $3I0: function(n, t, i) {
        return{
            activityid: n,
            participationtypemask: Microsoft.Crm.Client.Core.Offline.$2u.$1YY[i].toString(),
            resolvedparties: t
        }
    }
};
Microsoft.Crm.Client.Core.Offline.$v = function() {};
Microsoft.Crm.Client.Core.Offline.$v.get_$5 = function() {
    return Microsoft.Crm.Client.Core.Offline.$v.$D ||
        (Microsoft.Crm.Client.Core.Offline.$v.$D = new Microsoft.Crm.Client.Core.Offline.$v), Microsoft.Crm.Client.Core
        .Offline.$v.$D
};
Microsoft.Crm.Client.Core.Offline.$v.$27X = function(n) {
    var t = "";
    switch (n) {
    case 0:
        t = "=";
        break;
    case 1:
        t = "<>";
        break;
    case 2:
        t = "<";
        break;
    case 3:
        t = "<=";
        break;
    case 4:
        t = ">";
        break;
    case 5:
        t = ">=";
        break;
    case 6:
        t = "ISNULL";
        break;
    case 7:
        t = "IN"
    }
    return t
};
Microsoft.Crm.Client.Core.Offline.$v.$2hY = function(n) {
    var t = "";
    switch (n) {
    case 1:
        t = "OR";
        break;
    case 0:
        t = "AND"
    }
    return t
};
Microsoft.Crm.Client.Core.Offline.$v.prototype = {
    $1Rg: function(n, t) {
        for (var r, u = "", f = "", i = 0;
            i < t.length;
            i++
        ) r = i > 0 ? "," : "", u += r + "[" + t[i] + "]", f += r + "?";
        return"INSERT INTO [" + n.LogicalName + "] (" + u + ") VALUES (" + f + ")"
    },
    $1nQ: function(n, t, i) {
        var u = n.LogicalName,
            f = new Microsoft.Crm.Client.Core.Framework.Storage
                .$82(new Microsoft.Crm.Client.Core.Framework.Storage.$4R(i), n.get_key()),
            e = new Microsoft.Crm.Client.Core.Framework.Storage.$No(f, null),
            r = Microsoft.Crm.Client.Core.Storage.PhysicalAccess.Sql.$5e.$B(e, u, !0),
            o = $0.$1(t) ? r.$1z9() : r.$1bL.apply(r, t);
        return o + " COLLATE NOCASE"
    },
    $2DT: function(n, t, i) {
        for (var u = "UPDATE " + n.LogicalName + " SET ", r = 0;
            r < t.length;
            r++
        ) u += (r > 0 ? "," : "") + "[" + t[r] + "] = ?";
        return u += " WHERE [" + i + "] = ?", u + " COLLATE NOCASE"
    },
    $2DF: function(n, t) {
        var i = t.$x6, r = "DELETE FROM [" + n.LogicalName + "] ";
        return i && i.length > 0 && (r = r + "WHERE " + this.$290(i) + " COLLATE NOCASE"), r
    },
    $2rq: function(n, t) { return"SELECT EXISTS(SELECT 1 FROM " + n.LogicalName + " WHERE [" + t + "] = ? LIMIT 1)" },
    $2sE: function(n, t, i) {
        for (var o, u, s, f = "", e = "", r = 0; r < t.length; r++) o = r > 0 ? "," : "", f += o + "[" + t[r] + "]";
        for (u = 0; u < n; u++) s = u > 0 ? " OR" : "", e += s + "[" + i.$4M + "] = ?  COLLATE NOCASE";
        return"SELECT " + f + " FROM " + i.$d + " WHERE " + e
    },
    $2sG: function(n, t) {
        var i = t.$x6, r = "SELECT * FROM " + n;
        return i && i.length > 0 && (r = r + " WHERE " + this.$290(i) + this.$2jh(t) + " COLLATE NOCASE"), r
    },
    $2jh: function(n) {
        var t = "", i;
        return!$0.$1(n.$16m) &&
            n.$16m > 0 &&
            (i = $0.$1(n.$1K7) ? "" : " OFFSET " + n.$1K7.toString(), t += " LIMIT " + n.$16m.toString() + i), t
    },
    $290: function(n) {
        for (var r, e, u, f, i = "", t = 0; t < n.length; t++) {
            if (r = n[t].$1LY ? "" : " (", e = n[t]
                .$1LY ===
                1
                ? " )"
                : "", i += t
                ? " " +
                Microsoft.Crm.Client.Core.Offline.$v.$2hY(n[t].$1fl) +
                r +
                " [" +
                n[t].$1b +
                "] " +
                Microsoft.Crm.Client.Core.Offline.$v.$27X(n[t].$Hl)
                : r + " [" + n[t].$1b + "] " + Microsoft.Crm.Client.Core.Offline.$v.$27X(n[t].$Hl), n[t].$Hl === 7) {
                for (u = n[t].$4w.get_Items().length, i += u > 0 ? "(?" : "(", f = 1; f < u; f++) i += ", ?";
                i += ")"
            } else n[t].$Hl !== 6 && (i += " ?");
            i += e
        }
        return i
    },
    $2sF: function(n, t, i) {
        for (var o, s, h, r = "", f = "", u = "", e = 0; e < n.length; e++) r += "[" + n[e].$1D + "],";
        r = r !== "" ? r.substr(0, r.length - 1) : r;
        f = "[activityid!id] = ?";
        o = t;
        for (s in o) h = { key: s, value: o[s] }, u += "?,";
        return u !== "" && (u = u.substr(0, u.length - 1), f += " AND [participationtypemask] in (" + u + ")"),
            "SELECT " + r + " FROM " + i + " WHERE " + f + " COLLATE NOCASE ORDER BY [participationtypemask]"
    },
    $2rj: function() { return"DELETE FROM [activityparty] WHERE [activityid!id] = ? COLLATE NOCASE" },
    $2rk: function(n) {
        for (var i = "", t = n; t > 0; t--) i += t > 1 ? "?," : "?";
        return"DELETE FROM [activityparty] WHERE [activityid!id] = ? AND [participationtypemask] = ?  AND [activitypartyid] NOT IN (" + i + ") COLLATE NOCASE"
    },
    $3UW: function(n) {
        for (var t = "", i = n; i > 0; i--) t += "?,";
        return t
                .length >
                1 &&
                (t = t
                    .substring(0, t.length - 1)),
            "UPDATE [activityparty] SET [activityid!id] = ? WHERE [activityid!id] = ? AND [participationtypemask] = ?  AND [activitypartyid] IN (" + t + ") COLLATE NOCASE"
    },
    $2ra: function(n, t, i, r, u) {
        var e = "CREATE VIEW activitypointer AS ",
            o = this.$1ox(n, t, r, u),
            f = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4),
            s = new Microsoft.Crm.Client.Core.Storage.DataApi.$5u("activitypointer".toLocaleLowerCase()),
            h = this;
        return i.$4j(s, t).then(function(n) {
                h.$2sJ(n, o, t, i).then(function(n) {
                        e += n;
                        f.resolve(e)
                    },
                    function() {
                        f.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Offline DB could not create view query."))
                    })
            },
            null), f.promise()
    },
    $2rZ: function(n) {
        var t = "CREATE VIEW activityattachment AS ",
            r = Array.indexOf(n, "template") > -1,
            i = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4);
        return t += this.$2sI(r), i.resolve(t), i.promise()
    },
    $2rm: function(n) { return"DROP VIEW " + n },
    $2sJ: function(n, t, i, r) {
        for (var v,
            y,
            p,
            e = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4),
            o = "",
            u = "",
            s = "",
            l = "",
            h = 0,
            f = new Microsoft.Crm.Client.Core.Offline.$t,
            a = [],
            c = 0;
            c < t.length;
            c++) v = new Microsoft.Crm.Client.Core.Storage.DataApi.$5u(t[c].toString()), Array.add(a, r.$4j(v, i));
        return y = this, p = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(a)
            .then(function(t) {
                    for (var k, v, i, y, r, p, c, d, g, w, a, it, nt, tt = t, rt = tt.length, b = 0; b < rt; ++b) {
                        for (k = tt[b], o = "SELECT ", h = 0, v = 0; v < n.get_$3XJ(); v++)
                            if (i = n.get_$H(v), i.$2R !== 17) {
                                for (y = 0; y < k.get_$3XJ(); y++)
                                    if (u = "", r = k.get_$H(y), !$0.$1(r.$tA) && r.$tA === i.$d) {
                                        if (f.$tH(r.$2R))
                                            for (p = f.$1p5(r.$2R)
                                                    .$rF, c = 0;
                                                c < p.get_$396().length;
                                                c++)
                                                d = p
                                                    .get_$396()[c], g =
                                                    "[" + r.$d + "!" + d + "] AS [" + i.$d + "!" + d + "]", u +=
                                                    c !== p.get_$396().length - 1 ? g + ", " : g;
                                        else u += r.$d + " AS " + i.$d;
                                        l = r.$T;
                                        break
                                    }
                                if (!u.length && f.$tH(i.$2R))
                                    for (w = f.$1p5(i.$2R)
                                            .$rF, a = 0;
                                        a < w.get_$396().length;
                                        a++)
                                        it = w
                                            .get_$396()[a], nt = "NULL AS [" + i.$d + "!" + it + "]", u +=
                                            a !== w.get_$396().length - 1 ? nt + ", " : nt;
                                else u.length || (u += "NULL AS " + i.$d);
                                o += h > 0 ? ", " + u : u;
                                h++
                            }
                        s += (s.length > 0 ? " UNION ALL " : "") + o + " FROM " + l
                    }
                    e.resolve(s)
                },
                function() {
                    e.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Offline DB could not create view query."))
                }), e.promise()
    },
    $2sI: function(n) {
        return Microsoft.Crm.Client.Core.Framework.$3
            .$MD("select xxemail.activityid, xxattachment.body, xxattachment.filename, xxattachment.filesize, xxattachment.mimetype, xxattachment.subject,{0},{1},{2},{3},[xxactivitymimeattachment].[attachmentnumber],[xxactivitymimeattachment].[activitymimeattachmentid],[xxactivitymimeattachment].[versionnumber],[xxactivitymimeattachment].[attachmentid!id],[xxactivitymimeattachment].[attachmentid!name],[xxactivitymimeattachment].[attachmentid!logicalname],[xxactivitymimeattachment].[objectid!id],[xxactivitymimeattachment].[objectid!name],[xxactivitymimeattachment].[objectid!logicalname],[xxactivitymimeattachment].[objecttypecode],[xxactivitymimeattachment].[componentstate],[xxactivitymimeattachment].[overwritetime],[xxactivitymimeattachment].[solutionid],[xxactivitymimeattachment].[supportingsolutionid],[xxactivitymimeattachment].[activitymimeattachmentidunique],[xxactivitymimeattachment].[ismanaged],[xxactivitymimeattachment].[attachmentcontentid] from[activitymimeattachment][xxactivitymimeattachment] left join activitypointer xxemail on xxactivitymimeattachment.[objectid!id] = xxemail.activityid and xxemail.activitytypecode='email' {4} left join attachment xxattachment on xxactivitymimeattachment.[attachmentid!id] = xxattachment.attachmentid where datetime(xxactivitymimeattachment.overwritetime) = datetime('1900-01-01') and xxactivitymimeattachment.componentstate = 0", "case when coalesce(xxemail.owneridtype, " + (n ? "xxtemplate.owneridtype" : '""') + ") = 8 then coalesce(xxemail.[ownerid!id]," + (n ? "xxtemplate.[ownerid!id]" : '""') + ") else null end as 'owninguser'", "coalesce(xxemail.[ownerid!id], " + (n ? "xxtemplate.[ownerid!id]" : '""') + ") as 'ownerid!id',coalesce(xxemail.[ownerid!logicalname], " + (n ? "xxtemplate.[ownerid!logicalname]" : '""') + ") as 'ownerid!logicalname',coalesce(xxemail.[ownerid!name], " + (n ? "xxtemplate.[ownerid!name]" : '""') + ") as 'ownerid!name'", "coalesce(xxemail.owneridtype, " + (n ? "xxtemplate.owneridtype" : '""') + ") as 'owneridtype'", "coalesce(xxemail.[owningbusinessunit!id], " + (n ? "xxtemplate.[owningbusinessunit!id]" : '""') + ") as 'owningbusinessunit!id',coalesce(xxemail.[owningbusinessunit!logicalname], " + (n ? "xxtemplate.[owningbusinessunit!logicalname]" : '""') + ") as 'owningbusinessunit!logicalname',coalesce(xxemail.[owningbusinessunit!name], " + (n ? "xxtemplate.[owningbusinessunit!name]" : '""') + ") as 'owningbusinessunit!name'", n ? " left join template xxtemplate on xxactivitymimeattachment.[objectid!id] = xxtemplate.templateid" : "")
    },
    $1ox: function(n, t, i, r) {
        for (var s, u, f = [], o = r, h = o.length, e = 0;
            e < h;
            ++e
        )
            s = o[e], u = n.$i(s), !$0.$1(u) &&
                u.get_$9N() &&
                u.$d.toLowerCase() !== "activitypointer".toLowerCase() &&
                Array.indexOf(r, u.$d.toLowerCase()) >= 0 &&
                ($0.$1(i) || Array.indexOf(i, u.$d.toLowerCase()) >= 0) &&
                (f[f.length] = u.$d.toLowerCase());
        return f
    },
    $3MO: function(n) {
        for (var t = "", i = n; i > 0; i--) t += "?,";
        return t !== "" && (t = t.substr(0, t.length - 1)),
            "SELECT MIN(lastdatasynctime) AS [lastdatasynctime] FROM entitysettings WHERE entitylogicalname IN (" +
                t +
                ") COLLATE NOCASE"
    },
    $1Ri: function() { return Microsoft.Crm.Client.Core.Offline.$v.$2XS },
    $1Rj: function() { return Microsoft.Crm.Client.Core.Offline.$v.$2XR }
};
Microsoft.Crm.Client.Core.Offline.$I2 = function(n) {
    this.$1JL = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Microsoft.Crm.Client.Core.Offline.$I4));
    this.$20k = n
};
Microsoft.Crm.Client.Core.Offline.$I2.prototype = {
    $20k: !1,
    $2b1: function(n, t) {
        var i = new Microsoft.Crm.Client.Core.Offline.$I4;
        i.$RH = n;
        i.$1Jc = t;
        i.$13i = "Create";
        this.$1JL.add(i)
    },
    $2cP: function(n, t) {
        var i = new Microsoft.Crm.Client.Core.Offline.$I4;
        i.$RH = n;
        i.$1Jc = t;
        i.$13i = "Update";
        this.$1JL.add(i)
    },
    $2b7: function(n, t) {
        var i = new Microsoft.Crm.Client.Core.Offline.$I4;
        i.$RH = n;
        i.$YX = t;
        i.$13i = "Delete";
        this.$1JL.add(i)
    }
};
Microsoft.Crm.Client.Core.Offline.$I4 = function() {};
Microsoft.Crm.Client.Core.Offline.$I4.prototype = { $RH: null, $1Jc: null, $YX: null, $13i: null };
Microsoft.Crm.Client.Core.Offline.$I5 = function(n, t) {
    var i, f, r, u, e, o, s;
    if (this.$5x = [], this.$lV = [], $0.$1(t)) {
        u = 0;
        e = n;
        for (o in e) s = { key: o, value: e[o] }, this.$5x[u] = s.key, this.$lV[u] = this.$110(s.value), u++
    } else
        for (i = 0; i < t.length; i++)
            if (t[i].$Hl === 7)
                for (f = t[i].$4w, r = 0; r < f.get_Items().length; r++) this.$lV.push(this.$110(f.get_Items()[r]));
            else this.$lV.push(this.$110(t[i].$4w))
};
Microsoft.Crm.Client.Core.Offline.$I5.prototype = {
    $110: function(n) { return Microsoft.Crm.Client.Core.Framework.Guid.isInstanceOfType(n) ? n.toString() : n }
};
Microsoft.Crm.Client.Core.Offline.$4Y = function() {};
Microsoft.Crm.Client.Core.Offline.$4Y.get_$6J = function() {
    return $0.$1(Microsoft.Crm.Client.Core.Offline.$4Y.$3) &&
        (Microsoft.Crm.Client.Core.Offline.$4Y.$3 = new Microsoft.Crm.Client.Core.Offline.$4Y), Microsoft.Crm.Client
        .Core.Offline.$4Y.$3
};
Microsoft.Crm.Client.Core.Offline.$4Y.prototype = {
    $2XG: function(n) {
        var t = this, i = this;
        Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$1o().$3Nq(n, "MaxTime")
            .then(function() {
                    Microsoft.Crm.Client.Core.Framework.$C.$C("SecurityUtil", 1005, "StoreMaxDate: New Date is " + n)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Framework.$C.$1F("SecurityUtilFailureErrors",
                        1005,
                        "StoreMaxDate Error: " + n.$E.toString())
                })
    },
    $3MX: function() {
        var n = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$1o().$3MZ("MaxTime").then(function(t) {
                Microsoft.Crm.Client.Core.Framework.$C.$C("SecurityUtil", 1005, "RetrieveMaxDate: " + t);
                n.resolve(t)
            },
            function(t) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("SecurityUtilFailureErrors",
                    1005,
                    "RetrieveMaxDate Error: " + t.$E.toString());
                n.reject(t)
            }), n.promise()
    },
    $37S: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return this.$3MX().then(function(i) {
                Microsoft.Crm.Client.Core.Framework.$3.$A(i) && (i = null);
                t.$25c(i).then(function(t) {
                        Microsoft.Crm.Client.Core.Framework.$3.$A(i) || (i = Xrm.Soap.CrmDateTimeSerializer.$13w(i));
                        !$0.$1(t) && t > new Date(i) ? n.resolve(!0) : n.resolve(!1)
                    },
                    function(t) {
                        Microsoft.Crm.Client.Core.Framework.$C.$1F("SecurityUtilFailureErrors",
                            1005,
                            "IsFullSyncRequired: CalculateAndStoreMaxDate Error: " + t.$E.toString());
                        n.reject(t)
                    })
            },
            function(t) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("SecurityUtilFailureErrors",
                    1005,
                    "IsFullSyncRequired: RetrieveMaxDate Error: " + t.$E.toString());
                n.reject(t)
            }), n.promise()
    },
    $25c: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Date, Microsoft.Crm.Client.Core.Framework.$4),
            u = new Array(0),
            i = n;
        $0.$1(n) ||
        (n = Xrm.Soap.CrmDateTimeSerializer.$13w(n), u[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
            .$Hz("CreatedOn", i, 1, 4));
        var r = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(u),
            f = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k,
            e = this,
            o = this;
        return f.$6F("UserEntityAttributeMap", r).then(function(r) {
                var o = new Date(n), u, f, s;
                if (r.rows.length > 0)
                    for (u = 0; u < r.rows.length; u++)
                        $0.$1(r.rows.item(u)) ||
                        (f = r.rows.item(u).CreatedOn, Microsoft.Crm.Client.Core.Framework.$3.$A(f)
                            ? Microsoft.Crm.Client.Core.Framework.$C
                            .$1F("SecurityUtil", 1005, "CalculateAndStoreMaxDate date is not stored for row: " + u)
                            : (s = new Date(Xrm.Soap.CrmDateTimeSerializer.$13w(f)), o < s && (o = s, i = f)));
                e.$2XG(i);
                t.resolve(o)
            },
            function(i) {
                if ($0.$1(n))
                    Microsoft.Crm.Client.Core.Framework.$C.$1F("SecurityUtilFailureErrors",
                        1005,
                        "CalculateAndStoreMaxDate retrieve data was null Error: " + i.$E.toString()), t.reject(i);
                else {
                    var u = new Array(0);
                    r = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(u);
                    f.$6F("UserEntityAttributeMap", r).then(function() {
                            Microsoft.Crm.Client.Core.Framework.$C
                                .$1F("SecurityUtil",
                                    1005,
                                    "CalculateAndStoreMaxDate retrieve data Error: " + i.$E.toString());
                            t.reject(i)
                        },
                        function() {
                            t.resolve(new Date);
                            o.$2XG("1970-01-01 00:00:00.000")
                        })
                }
            }), t.promise()
    }
};
Microsoft.Crm.Client.Core.Offline.$5X = function() {};
Microsoft.Crm.Client.Core.Offline.$5X.$z6 = function(n, t, i, r, u, f, e, o, s, h, c, l) {
    var b = Microsoft.Crm.Client.Core.Offline.$5X.$2zU(h),
        k = b !== 1 && t.toLowerCase() !== "create" ? new Xrm.Objects.EntityReference(n, i, r) : null,
        a = {},
        v = {},
        y = new Array(0),
        w,
        p;
    return y.push("name"), a.name = 14, v.name = n, y.push("action"), a.action = 14, v
        .action = t, $0.$1(k) ||
    (y.push("regardingobjectid"), a.regardingobjectid = 6, v.regardingobjectid = k, y
        .push("regardingobjectidname"), a.regardingobjectidname = 14, v.regardingobjectidname = r, y
        .push("regardingobjecttypecode"), a.regardingobjecttypecode = 20, v.regardingobjecttypecode = u), y
        .push("errormessage"), a.errormessage = 14, v.errormessage = Microsoft.Crm.Client.Core.Offline.$5X
        .$2YA("errormessage", f), y.push("actiondata"), a.actiondata = 14, v.actiondata = e, y.push("errortime"), a
        .errortime = 2, v.errortime = o, y.push("requestdata"), a.requestdata = 14, v.requestdata = s, y
        .push("errorcode"), a.errorcode = 14, v.errorcode = h.toString(), w = {}, w.value = b, y.push("errortype"), a
        .errortype = 11, v.errortype = Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$1N.$18(w), y
        .push("errordetail"), a.errordetail = 14, v.errordetail = Microsoft.Crm.Client.Core.Offline.$5X
        .$2YA("errordetail", c), p = l, $0.$1(p) &&
    (p = new Xrm.Objects
        .EntityReference("syncerror", Microsoft.Crm.Client.Core.Framework.Guid.newGuid())), new Microsoft.Crm.Client
        .Core.Storage.Common.ObjectModel.EntityRecord(p,
            v,
            a,
            {},
            {},
            new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.RelatedEntityCollection(new Array(0)))
};
Microsoft.Crm.Client.Core.Offline.$5X.$2zU = function(n) {
    var t;
    switch (n) {
    case-2147220969:
        t = 1;
        break;
    case-2147220685:
    case-2147220937:
        t = 2;
        break;
    case-2147088254:
    case-2147088253:
        t = 0;
        break;
    default:
        t = 3
    }
    return t
};
Microsoft.Crm.Client.Core.Offline.$5X.$2YA = function(n, t) {
    var i = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$2V("syncerror", n);
    return!$0.$1(i) && !$0.$1(t) && t.length > i.$L7 ? t.substring(0, i.$L7) : t
};
Microsoft.Crm.Client.Core.Offline.OfflineSyncErrorLogProvider = function(n) {
    this.$AY = n;
    this.$1FU = Microsoft.Crm.Client.Core.Storage.DataApi.$H.get_$5().$3H;
    this.$65 = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS();
    this.$Pg = new Microsoft.Crm.Client.Core.Framework.$N3("OfflineSyncErrorLogProvider.BatchedCallbackRunner",
        Microsoft.Crm.Client.Core.Framework.SchedulerPriorities.$1WZ)
};
Microsoft.Crm.Client.Core.Offline.OfflineSyncErrorLogProvider.prototype = {
    $65: null,
    $Pg: null,
    $1FU: null,
    $AY: null,
    $2k2: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Xrm.Objects.EntityReference,
                Microsoft.Crm.Client.Core.Framework.$4),
            r = this,
            u = this;
        return this.$AY.get_$6R().$B(n, !0, t).then(function(n) {
                Microsoft.Crm.Client.Core.Framework.$C.$1F("MOCADataSyncFailureErrors",
                    1005,
                    "CreateOfflineSyncErrorLog Success");
                i.resolve(n)
            },
            function(t) {
                var r = new Microsoft.Crm.Client.Core.Framework.TelemetryCore
                    .$O7("1005",
                        "MOCADataSyncFailureErrors",
                        "",
                        "",
                        0,
                        "",
                        n.get_key().toString() + " " + t.$E.toString(),
                        Microsoft.Crm.Client.Core.Framework.Guid.get_empty(),
                        (new Date).toString(),
                        "",
                        0);
                Microsoft.Crm.Client.Core.Framework.TelemetryCore.TelemetryReporter.get_Instance().$1w(r);
                Microsoft.Crm.Client.Core.Framework.$C.$1F("MOCADataSyncFailureErrors",
                    1005,
                    "CreateOfflineSyncErrorLog Error: " + t.$E.toString());
                i.reject(t)
            }), i.promise()
    },
    $1b2: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(String, Microsoft.Crm.Client.Core.Framework.$4),
            r = this,
            u = this;
        return this.$AY.$R7(n, t, !0).then(function(n) { i.resolve(n) }, function(n) { i.reject(n) }), i.promise()
    },
    $X1: function(n) { return this.$AY.$X1(n) },
    $2LQ: function() { return!$0.$1(this.$AY) && !$0.$1(this.$AY.get_$6R()) && this.$AY.get_$6R().get_$3C() }
};
Microsoft.Crm.Client.Core.Offline.$I3 = function(n) { this.$1d1 = n };
Microsoft.Crm.Client.Core.Offline.$I3.prototype = { $1d1: 0 };
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator");
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N = function() { this.$17() };
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.prototype = {
    $17: function() {
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB = new(Microsoft.Crm.Client.Core.Framework.$8X
            .$$(Microsoft.Crm.Client.Core.Framework.List$1.$$(String)));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(15),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.In,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(0),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$tf, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uB,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$qq, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$u9, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ru,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uA, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.In, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(14),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$tf, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uB,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$qq, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$u9, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ru,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uA
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(11),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$tf, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uB,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$qq, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$u9, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ru,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uA, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.In, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(12),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$tf, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uB,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$qq, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$u9, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ru,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uA, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.In, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(13),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$tf, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uB,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$qq, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$u9, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ru,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uA, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.In, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(20),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$tf, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uB,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$qq, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$u9, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ru,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$uA, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.In, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(1),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.In, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(6),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.In,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$1ln, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$1uI
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(9),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.In,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Zp, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$1ln, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$1uI, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$2Ah,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$2Ag
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(5),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Z0, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$mF,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ZQ, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$n6
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(18),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Z0, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$mF,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ZQ, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$n6
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(4),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Z0, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$mF,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ZQ, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$n6
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(3),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Z0, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$mF,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ZQ, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$n6
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(8),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.Null,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$Z0, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$mF,
                    Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$ZQ, Microsoft.Crm.Client.Core.Storage
                    .Common.FetchExpression.$J.$n6
                ]));
        Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB
            .set_$H(this.$7A(2),
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))([
                    "on-or-after", "on", "on-or-before", "today", "tomorrow", "yesterday", "next-seven-days",
                    "last-seven-days", "next-week", "last-week", "this-week", "next-month", "last-month", "this-month",
                    "next-year", "last-year", "this-year", "last-x-days", "next-x-days", "last-x-weeks", "next-x-weeks",
                    "last-x-months", "next-x-months", "last-x-years", "next-x-years", "not-null", Microsoft.Crm.Client
                    .Core.Storage.Common.FetchExpression.$J.Null, Microsoft.Crm.Client.Core.Storage.Common
                    .FetchExpression.$J.$Je, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$GC, Microsoft
                    .Crm.Client.Core.Storage.Common.FetchExpression.$J.$HV, Microsoft.Crm.Client.Core.Storage.Common
                    .FetchExpression.$J.$Z0, Microsoft.Crm.Client.Core.Storage.Common.FetchExpression.$J.$mF, Microsoft
                    .Crm.Client.Core.Storage.Common.FetchExpression.$J.$ZQ, Microsoft.Crm.Client.Core.Storage.Common
                    .FetchExpression.$J.$n6
                ]))
    },
    $7A: function(n) { return Xrm.Objects.AttributeType.toString(n) },
    get_$24x: function() { return Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB.$1dN() }
};
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$Pi = function() {
    Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$Pi.initializeBase(this);
    this.$Em = new Microsoft.Crm.Client.Core.Offline.$t;
    this.$EB = new Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N
};
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$Pi.prototype = {
    $Em: null,
    $EB: null,
    $2au: function(n, t, i) {
        this.$163(n, "attributeName");
        this.$163(t, "entityName");
        var r = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$2V(t, n);
        this.$163(r, Microsoft.Crm.Client.Core.Framework.$3.$MD("attributeMetadata: {0}.{1}", t, n));
        this.$Em.$tH(r.$2R) && this.$2av(n, r, t, i)
    },
    $2av: function(n, t, i, r) {
        for (var f,
            o = Microsoft.Crm.Client.Core.Offline.$2d.$1Sk(n, t.$2R),
            s = this.$10v(n, i),
            e = o,
            h = e.length,
            u = 0;
            u < h;
            ++u)
            f = e[u], f !== s &&
                this.$B8.get_$vY().append(Microsoft.Crm.Client.Core.Framework.$3
                    .$MD("{0} [{1}].[{2}] as [{2}]",
                        Microsoft.Crm.Client.Core.Framework.$3.$A(this.$B8.get_$vY().toString()) ? "" : ",",
                        r,
                        f))
    },
    $3TS: function(n) {
        if (!Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$71
            .$1rM(n))
            throw Error.create(Microsoft.Crm.Client.Core.Framework.$3
                .$MD("Attribute type {0} for attribute {1} not supported in offline", n.$2R, n.$d));
    },
    $10v: function(n, t) {
        if ($0.$1(n) || $0.$1(t)) throw Error.create("Attribute name or entity name cannot be null or undefined");
        var i = null, r, u;
        return n = (u = Microsoft.Crm.Client.Core.Storage.Common.$1U
            .$10O(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V(), t, n, r = { val: i }), i = r
            .val, u), n.endsWith("]") && n.startsWith("[") && (n = n.substring(1, n.length - 1)), n
    },
    $3TX: function(n, t, i) {
        var r, u;
        if ($0.$1(n) || $0.$1(t)) throw Error.create("Attribute name or entity name cannot be null or undefined");
        if (r = Microsoft.Crm.Client.Core.Storage.Common.QueryGenerator.$2e
            .$2V(n, t), !$0.$1(r) &&
            Xrm.Objects.AttributeType.toString(r.get_$5M()) in this.$EB.get_$24x() &&
            (u = this.$EB.get_$24x()[Xrm.Objects.AttributeType.toString(r.get_$5M())], !u
                .contains(i)))
            throw Error.create(Microsoft.Crm.Client.Core.Framework.$3
                .$MD("Condition Operation {0} is not supported on Attribute Type {1}",
                    i,
                    Xrm.Objects.AttributeType.toString(r.get_$5M())));
        return
    },
    $2Hc: function(n, t, i, r, u) {
        var f = new Sys.StringBuilder;
        return f.append(String
            .format('\n left outer join {0} as "{1}" on ("{1}".[ObjectId!id] = "{2}".{3} and "{1}".LanguageId = {4} and "{1}".{5} like "%{6}%" )', "businessdatalocalizedlabel", r, n, t, i, "objectcolumnname", u)), f
    }
};
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$71 = function() {};
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$71.$1rM = function(n) {
    var t = !0;
    return Microsoft.Crm.Client.Core.Offline.$1G.$1Uj(n.$2R) && $0.$1(n.$Pf) || (t = !1), t
};
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL");
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$H2 = function() {};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$H2
    .registerInterface("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$H2");
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW = function(n) {
    Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW.initializeBase(this, [n]);
    this.$K9 = n
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW
    .prototype = {
        $B: function(n, t) { this.$K9.$B(n, t) },
        $6F: function(n, t) { return this.$K9.$6F(n, t) },
        $7n: function(n, t) { this.$K9.$7n(n, t) },
        Delete: function(n, t) { this.$K9.Delete(n, t) },
        $25E: function(n) { this.$K9.$25E(n) },
        Commit: function(n) { return this.$K9.Commit(n) }
    };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k = function() {};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k
    .$2QM = function(n, t) {
        for (var i, f, u, e, o, r = 0;
            r < n.get_Count();
            r++
        )
            i = n.get_$H(r), i.$uN === 1
                ? Object.isInstanceOfType(i.$4z) && (f = i.$4z, t.$B(i.$Q0, f))
                : i.$uN === 2
                ? (u = i.$4z, u &&
                    (e = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(u), t.Delete(i.$Q0, e)))
                : i.$uN === 3 && Object.isInstanceOfType(i.$4z) && (o = i.$4z, t.$7n(i.$Q0, o))
    };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k.prototype = {
    $ny: function(n, t, i) {
        var f = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd,
            r = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW(f);
        r.$25E(i);
        !$0.$1(t) && t.get_Count() > 0 && Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k.$2QM(t, r);
        !$0.$1(n) && n.get_Count() > 0 && Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k.$2QM(n, r);
        var u = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            e = this,
            o = this;
        return r.Commit(f.$AL).then(function() { u.resolve(!0) }, function(n) { u.reject(n) }), u.promise()
    },
    $6F: function(n, t) {
        var i = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd;
        return i.$6F(n, t)
    },
    $10Q: function() {
        var n = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$1o().get_$6R();
        return n.$10Q()
    },
    $2hZ: function(n, t, i, r) {
        var u = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                .EntityRecord,
                Microsoft.Crm.Client.Core.Framework.$4),
            f = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(i),
            e = this,
            o = this;
        return this.$2zK(i, f, n, t, r).then(function(n) { u.resolve(n) }, function(n) { u.reject(n) }), u.promise()
    },
    $2zK: function(n, t, i, r, u) {
        var e = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Storage.Common.ObjectModel
                .EntityRecord,
                Microsoft.Crm.Client.Core.Framework.$4),
            f,
            c,
            l,
            o,
            s,
            a,
            h,
            v,
            y;
        if ($0.$1(i) || Microsoft.Crm.Client.Core.Framework.$3.$A(i[t.$4M])) e.resolve(null);
        else {
            f = new Array(0);
            c = i;
            for (l in c)
                o = { key: l, value: c[l] }, s = o.key
                    .toLowerCase(), s.indexOf("norsync") < 0 &&
                    s.toLowerCase() !== "_MODIFIED_ON".toLowerCase() &&
                    (s.indexOf("!") < 0
                        ? f.push(o.key)
                        : (a = o.key.split("!"), h = Microsoft.Crm.Client.Core.Framework.$3
                            .$A(a[0])
                            ? ""
                            : a[0], Microsoft.Crm.Client.Core.Framework.$3.$A(h) ||
                            Array.indexOf(f, h) !== -1 ||
                            f.push(h)));
            v = this;
            y = this;
            Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$T5(n, f).then(function(n) {
                    var o = u !== 3 ? i : r,
                        s = new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.$23(2, 0),
                        f = Microsoft.Crm.Client.Core.Offline.$1G.$z6(o, n, t, s);
                    f = Microsoft.Crm.Client.Core.Offline.$1G.$3HO(f, n, u, i, r);
                    e.resolve(f)
                },
                function() {
                    e.reject(Microsoft.Crm.Client.Core.Framework.$4
                        .$h("Offline DB could not retrieve data"))
                })
        }
        return e.promise()
    }
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd = function() {
    Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd.initializeBase(this);
    this.$Zs = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$1o().get_$6R()
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd
    .prototype = {
        $AL: null,
        $Zs: null,
        $B: function(n, t) { this.$AL.$2b1(n, t) },
        $6F: function(n, t) { return this.$Zs.$1ad(n, t) },
        $7n: function(n, t) { this.$AL.$2cP(n, t) },
        Delete: function(n, t) { this.$AL.$2b7(n, t) },
        $25E: function(n) { this.$AL = new Microsoft.Crm.Client.Core.Offline.$I2(n) },
        Commit: function(n) { return this.$Zs.$2nq(n) }
    };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I1 = function() {};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc = function(n) {
    Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc.initializeBase(this);
    this.$K9 = n
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc.prototype = { $K9: null };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V = function(n, t, i) {
    this.$4z = n;
    this.$uN = t;
    this.$Q0 = i
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V
    .prototype = {
        $4z: null,
        $uN: 0,
        $Q0: null,
        get_entity: function() { return this.$4z },
        set_entity: function(n) { return this.$4z = n, n },
        get_operationPerformed: function() { return this.$uN },
        set_operationPerformed: function(n) { return this.$uN = n, n },
        get_entityType: function() { return this.$Q0 },
        set_entityType: function(n) { return this.$Q0 = n, n }
    };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz = function(n, t, i, r, u) {
    this.$1b = n;
    this.$4w = t;
    this.$1fl = i;
    this.$Hl = r;
    this.$1LY = $0.$1(u) ? 2 : u
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz.prototype = { $1b: null, $4w: null, $1fl: 0, $Hl: 0, $1LY: 0 };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Sk = function(n) {
    Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Sk.initializeBase(this, [n]);
    this.$K9 = n
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Sk
    .prototype = {
        $B: function(n, t) { this.$K9.$B(n, t) },
        $6F: function(n, t) { return this.$K9.$6F(n, t) },
        $7n: function(n, t) { this.$K9.$7n(n, t) },
        Delete: function(n, t) { this.$K9.Delete(n, t) },
        $25E: function(n) { this.$K9.$25E(n) },
        Commit: function(n) { return this.$K9.Commit(n) }
    };
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0 = function(n, t, i) {
    this.$x6 = n;
    $0.$1(i) || (this.$1K7 = i);
    $0.$1(t) || (this.$16m = t)
};
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0.prototype = { $1K7: 0, $16m: 0, $x6: null };
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.$Hx = function(n) {
    this.$lJ = new(Microsoft.Crm.Client.Core.Framework.$8X.$$(Xrm.Objects.EntityReference));
    this.$Da = n;
    this.$XZ = !1;
    this.$BC = new(Microsoft.Crm.Client.Core.Framework.List$1
        .$$(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q));
    this.$q8 = [];
    this.$xo = {};
    this.$qN = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Number));
    this.$18O = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Number));
    this.$pf = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String));
    this.$Rd = Microsoft.Crm.Client.Core.Framework.Guid.get_empty()
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.$Hx.prototype = {
    $Da: null,
    $BC: null,
    $xo: null,
    $J4: 0,
    $2XY: 3,
    $qN: null,
    $Rd: null,
    $18O: null,
    $pf: null,
    $q8: null,
    $XZ: !1,
    $2Qm: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t, i;
        if (this.$XZ)
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessBatchForUpSync.NetworkFailure",
                    "ProcessPlaybackQueue Stopped"), Array.clear(this.$q8), n.resolve(!1);
        else if (this.$q8.length) {
            var r = Array.dequeue(this.$q8), u = this, f = this;
            this.$2Qw(r, 0).then(function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessBatchForUpSync.Success", "BatchItem Processed");
                    n.resolve(!0)
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessBatchForUpSync.Failure", t.$E);
                    n.reject(t)
                })
        } else
            this.$qN.get_Count() > 0 && this.$Da.$26Y(this.$qN, this.$pf, this.$Rd), t = this, i = this, this.$1Yx(!0)
                .then(function() {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackBatchManager.ProcessBatchForUpSync.Success",
                                "ProcessPlaybackQueue Completed");
                        n.resolve(!0)
                    },
                    function(t) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackBatchManager.ProcessBatchForUpSync.Failure", t.$E);
                        n.reject(t)
                    });
        return n.promise()
    },
    $2Qw: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), r, u;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataList", "ProcessUpSyncDataList Started"),
            $0.$1(n) || n.get_Count() === t || this.$XZ
                ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataList.Success",
                            "ProcessUpSyncDataList Completed"),
                    i.resolve(!0))
                : (r = this, u = this, this.$3Id(n.get_Items()[t]).then(function() {
                        r.$2Qw(n, ++t).then(function() { i.resolve(!0) },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataList.Failure", n.$E);
                                i.reject(n)
                            })
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataList.Failure", n.$E);
                        i.reject(n)
                    })), i.promise()
    },
    $3Id: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i, r;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Started", "ProcessUpSyncDataList Started"), $0
            .$1(n)
            ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Success",
                    "ProcessUpSyncDataList Completed"), t.resolve(!0))
            : (i = this, r = this, this.$2ne(n).then(function(r) {
                    r && !i.$XZ
                        ? n.get_$kM()
                        ? i.$3IS(n).then(function() {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Success",
                                        "ProcessUpSyncDataList Completed");
                                t.resolve(!0)
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Failure", n.$E);
                                t.reject(n)
                            })
                        : i.$3IF(n).then(function() {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Success",
                                        "ProcessUpSyncDataList Completed");
                                t.resolve(!0)
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Failure", n.$E);
                                t.reject(n)
                            })
                        : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Success",
                                "ProcessUpSyncDataList Completed"), t.resolve(!0))
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessUpSyncDataItem.Failure", n.$E);
                    t.reject(n)
                })), t.promise()
    },
    $2ne: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i, r;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ExecuteActionDataListIfRequired",
                "ExecuteActionDataListIfRequired Started"), i = n.get_$Pc().$Xf, Microsoft.Crm.Client.Core.Offline
            .Upsync.BatchManager.PlaybackManager.get_$20J()
            .contains(i))
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ExecuteActionDataListIfRequired.Success",
                    "ExecuteActionDataListIfRequired Completed"), this.$18q(n.get_$Pc()), t.resolve(!1);
        else {
            if (n.get_$kM())
                return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ExecuteActionDataListIfRequired.Non-CRUDActionEncountered",
                        "ExecuteActionDataListIfRequired Completed"), this.$1Yx(!0);
            if (r = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$sp(n.get_$Pc()), r !== "activityparty" &&
                this.$BC.get_Count() ===
                Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_DefaultInstance()
                .get_$1Wm())
                return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ExecuteActionDataListIfRequired.Success",
                        "ExecuteActionDataListIfRequired Completed"), this.$1Yx(!0);
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.CheckActionDataListForExecution.Success",
                    "CheckActionDataListForExecution Completed");
            t.resolve(!0)
        }
        return t.promise()
    },
    $3IF: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessCRUDItem", "ProcessCRUDItem Started"), i = n.$E4.$N
            .LogicalName, i === "activityparty")
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessCRUDItem.Success", "ProcessCRUDItem Completed"), this
                .$33a(n), t.resolve(!0);
        else
            return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessCRUDItem.Success", "ProcessCRUDItem Completed"), this.$BC
                .add(n), this.$1Yx(!1);
        return t.promise()
    },
    $1Yx: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4);
        return(Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessActionDataList", "ProcessActionDataList Started"),
                this.$BC.get_Count() > 0 &&
                (n ||
                    this.$BC.get_Count() ===
                    Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_DefaultInstance()
                    .get_$1Wm() &&
                    !this.$37f()))
            ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessActionDataList.Success",
                    "CRUD Criteria satisfied for Execution"), this.$3IE(), this.$271(0).always(this.$2J8()))
            : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessActionDataList.Success",
                        "ProcessActionDataList Completed"),
                t.resolve(!0), t.promise())
    },
    $3IE: function() {
        var r = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String)), i, n, t;
        for (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessCrudCommandAction", "ProcessCrudCommandAction Started"),
            i =
                0;
            i < this.$BC.get_Count();
            i++)
            (n = this.$BC.get_Items()[i], $0.$1(n)) ||
            (r.contains(n.$E4.get_key())
                ? "versionnumber" in n.$E4.fields &&
                (delete n.$E4.fields.versionnumber, n.$qO === 2 && (n.$E4.$N.$Rw = ""))
                : (t = n.$E4.get_key(), r.add(t), t in this.$xo &&
                (n.$E4.initializeValue("versionnumber", this.$xo[t].toString(), 14), n.$E4.$N.$Rw = this.$xo[t]
                    .toString(), n.$E4.$4P.remove("versionnumber"))));
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessCrudCommandAction.Success",
                "ProcessCrudCommandAction Completed")
    },
    $37f: function() {
        var t = this.$BC.get_Items()[this.$BC.get_Count() - 1], i, n;
        return $0.$1(t)
            ? !1
            : (i = t.$E4.$N.LogicalName, n = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V()
                .$i(i), !$0.$1(n) && n.get_$9N() ? !0 : !1)
    },
    $33a: function(n) {
        var t, i, e, o;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.HandleActivityParty", "HandleActivityParty Started"), t =
            this.$BC.get_Count() - 1, t >= 0 &&
            !$0.$1(this.$BC.get_Items()[t]) &&
            (i = this.$BC.get_Items()[t], !$0.$1(i))) {
            var r = i.$E4,
                u = n.$E4,
                f = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(r.$N.LogicalName);
            !$0.$1(f) &&
                f.get_$9N() &&
                (i.$bJ.add(n), r.hasField("activityid") &&
                (e = u.getValue("activityid"), o = r
                    .getValue("activityid"), e.Id.toString() === o.toString() && this.$2al(u, r)))
        }
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.HandleActivityParty", "HandleActivityParty Completed")
    },
    $2al: function(n, t) {
        var u = n
                .getValue("participationtypemask"),
            i = Microsoft.Crm.Client.Core.Offline.$2u.$1Fz[u.$1f.toString()],
            r;
        Microsoft.Crm.Client.Core.Framework.$3.$A(i) ||
        (t.hasField(i) && !$0.$1(t.getValue(i))
            ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.AddActivityPartyToActivity",
                    "Adding activity part to activity " + t.getValue("activitytypecode")), r = t.getValue(i), r.add(n))
            : (t.initializeValue(i,
                new Microsoft.Crm.Client.Core.Storage.Common.ObjectModel.EntityCollection([n], !1, 1, !1),
                10), t.$4P.add(i)))
    },
    $3IS: function(n) {
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessNonCRUDItem", "ProcessNonCRUDItem Started"), this.$BC
            .add(n), this.$271(n.get_$kM()).always(this.$2J8())
    },
    $271: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4);
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.CommandExecutor.Success", "CommandExecutor Started"),
            n === 2
                ? Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.get_$5().$3Vl(this.$BC)
                .then(this.$34R(t), this.$2J9(t))
                : Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.get_$5().$XJ(n, this.$BC)
                .then(this.$34Q(n, t), this.$2J9(t)), t.promise()
    },
    $2J8: function() {
        var n = this;
        return function() {
            n.$Rd = Microsoft.Crm.Client.Core.Framework.Guid.get_empty();
            n.$BC.clear();
            n.$qN.clear();
            n.$pf.clear();
            n.$18O.clear()
        }
    },
    $34Q: function(n, t) {
        var i = this;
        return function(r) {
            i.processSuccessResponse(n, r).then(function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.HandleSuccessResponse.Success",
                            "Command Execution succeeded");
                    n ? i.$1wi().then(function() { t.resolve(!0) }, function(n) { t.reject(n) }) : t.resolve(!1)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.PlaybackBatchManager.HandleSuccessResponse.Fail", n.$E);
                    t.reject(n)
                })
        }
    },
    $34R: function(n) {
        var t = this;
        return function(i) {
            t.processSuccessJsonResponse(i).then(function(i) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.HandleSuccssJSonResponse.Success",
                            "Command Execution succeeded");
                    i ? t.$1wi().then(function() { n.resolve(!0) }, function(t) { n.reject(t) }) : n.resolve(!1)
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.PlaybackBatchManager.HandleSuccssJSonResponse.Fail", t.$E);
                    n.reject(t)
                })
        }
    },
    $2J9: function(n) {
        var t = this;
        return function(i) {
            t.processFailureResponse(i).then(function(i) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.HandleCrmErrorResponse.Success",
                            "Command Execution succeeded");
                    i ? t.$1wi().then(function() { n.resolve(!0) }, function(t) { n.reject(t) }) : n.resolve(!1)
                },
                function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.HandleCrmErrorResponse.Failure", i.get_message());
                    n.reject(Microsoft.Crm.Client.Core.Framework.$4.$h(i.get_message()))
                })
        }
    },
    processFailureResponse: function(n) {
        var t, r, u, i, f, e, o;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessFailureResponse.Start",
                    "Processing Failure Response Started"), t = MscrmComponents
                .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), $0.$1(n) || $0.$1(n.$Bt)
        )
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessFailureResponse.Success",
                    "Processing Failure Response succeeded with no response"), t.resolve(!0);
        else if (n.$Bt.status && n.$Bt.status !== 503) {
            for (r = new Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager
                    .$Il, !$0.$1(n.$6r) &&
                    !$0.$1(n.$6r.get_message()) &&
                    n.$6r.$Cn.get_Count() > 0 &&
                    (n.$6r.$Cn.get_Items()[0] = n.$Bt.responseText), r = this
                    .$25Y(n.$6r), u = [], i = this.$BC.get_Count() - 1;
                i >= 0;
                i--)
                this.$2Lo(this.$BC.get_Items()[i])
                    ? (this.$2Mz(this.$BC.get_$H(i).get_$Pc().$Iv), Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessFailureResponse.Warning",
                            "One Sync Error Entity Failed to Upsync"))
                    : (f = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f(this.$Da), Array
                        .add(u, f.$1TS(this.$BC.get_Items()[i], r)));
            e = this;
            o = this;
            Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(u).then(function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessFailureResponse.Success",
                            "Processing Failure Response succeeded");
                    t.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.PlaybackBatchManager.ProcessFailureResponse.Fail", n.$E);
                    t.reject(n)
                })
        } else
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessFailureResponse.Success",
                    "Processing Failure Response succeeded with unknown status"), this.$XZ = !0, t.resolve(!1);
        return t.promise()
    },
    processSuccessResponse: function(n, t) {
        var r = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            s,
            e,
            i,
            c,
            l,
            a,
            p;
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse", "ProcessSuccessResponse Started");
        this.$J4 = 0;
        this.$lJ = new(Microsoft.Crm.Client.Core.Framework.$8X.$$(Xrm.Objects.EntityReference));
        var u = [], f = t, v = f.responses.length;
        if (v ||
        (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse.Success",
                "Command Execution Succeeded At Server"), r.resolve(!0)), f
            .isFaulted)
            for (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse.ServerFailure",
                        "Few Command Execution failed At Server"), e = f.responses.length - 1;
                e >= 0;
                e--)
                i = f.responses[e], !$0.$1(i.$Fx) &&
                    !$0.$1(i.$Fx.$Cn) &&
                    !$0.$1(i.$Fx.$Cn.get_Items()) &&
                    i.$Fx.$Cn.get_Count() > 0
                    ? (c = this.$25Y(i.$Fx), $0.$1(this.$BC.get_Items()[i.$Ru]) ||
                    (this.$2Lo(this.$BC.get_Items()[i.$Ru])
                        ? this.$2Mz(this.$BC.get_Items()[i.$Ru].get_$Pc().$Iv)
                        : (l = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f(this.$Da), Array
                            .add(u, l.$1TS(this.$BC.get_Items()[i.$Ru], c)))))
                    : Array.add(u, this.processSuccessMultipleResponseItem(n, this.$BC.get_Items()[i.$Ru], i));
        else {
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse.Success",
                    "Command Execution Succeeded At Server");
            for (var h = f
                         .responses,
                y = h.length,
                o = 0;
                o < y;
                ++o) s = h[o], Array.add(u, this.processSuccessMultipleResponseItem(n, this.$BC.get_Items()[s.$Ru], s))
        }
        return u.length
            ? (a = this, p = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(u)
                .then(function() {
                        a.$3IX().then(function() {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse.Success",
                                        "Processing Success Response succeeded");
                                r.resolve(!0)
                            },
                            function(n) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$1F("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse.Fail", n.$E);
                                r.reject(n)
                            })
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$1F("OfflineUpSync.PlaybackBatchManager.ProcessSuccessResponse.Fail", n.$E);
                        r.reject(n)
                    }))
            : r.resolve(!0), r.promise()
    },
    processSuccessMultipleResponseItem: function(n, t, i) {
        var r = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), u, e, f;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessMultipleResponseItem",
                    "ProcessSuccessMultipleResponseItem Started"), n === 1 && i.$Am.name === "Retrieve"
        )
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessMultipleResponseItem.Success",
                    "ProcessSuccessMultipleResponseItem Completed"), u = i.$Am
                .entity, $0.$1(u.$N.$Rw) || this.$lJ.set_$H(u.get_key(), u.$N), r.resolve(!0);
        else if (e = new Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager
            .$Il, $0.$1(t) || $0.$1(t.get_$Pc()))
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessMultipleResponseItem.Success", "Empty Data"), r
                .resolve(!1);
        else {
            f = t.get_$Pc().$Iv;
            f.toString() in Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$ou() &&
                delete Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$ou()[f.toString()];
            var s = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers
                    .$Pn(this.$Da),
                o = this,
                h = this;
            s.$1TS(t, e).then(function() {
                    var u, f;
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessMultipleResponseItem.Success",
                            "ProcessSuccessMultipleResponseItem Completed");
                    n ||
                        (t.get_$Pc().$bd === 1 || t.get_$Pc().$bd === 3) &&
                        (i.$Am
                            .name ===
                            "Create" &&
                            (u = i.$Am.entityReference, o.$lJ
                                .set_$H(u.Id.toString(), u)), i.$Am.name === "Update" &&
                            (f = i.$Am.entityReference, o.$lJ.set_$H(f.Id.toString(), f)));
                    r.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessMultipleResponseItem.Failure", n.$E);
                    r.reject(n)
                })
        }
        return r.promise()
    },
    processSuccessJsonResponse: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessJsonResponse",
                    "ProcessSuccessJsonResponse Started"),
            i = this.$BC.get_Items()[0], n.$9A)
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessJsonResponse.Success ",
                    "Command Execution Succeeded At Server Processed Sucessfully"), t.resolve(!0);
        else if ($0.$1(i.get_$Pc()))
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessJsonResponse.Success ",
                    "Command Execution Succeeded At Server Processed Sucessfully"), t.resolve(!1);
        else {
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessJsonResponse.ServerFailure.Start ",
                    "Command Execution Failed At Server Processing Started");
            var r = new Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$Il,
                u = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$Pn(this.$Da),
                f = this,
                e = this;
            u.$1TS(i, r).then(function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackBatchManager.ProcessSuccessJsonResponse.ServerFailure.Success ",
                            "Command Execution Failed At Server Processed Sucessfully");
                    t.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.PlaybackBatchManager.ProcessSuccessJsonResponse.ServerFailure.Fail ", n.$E);
                    t.reject(n)
                })
        }
        return t.promise()
    },
    $3IX: function() {
        var t, n, u;
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessReturnedRowVersions.Start",
                "Process Returned Row Versions Started");
        t = [];
        n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4);
        this.$lJ.$l() ||
        (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessReturnedRowVersions.Success",
                "Process Returned Row Versions succeeded"), n.resolve(!0));
        for (var r = this.$lJ.get_$396(), e = r.length, i = 0; i < e; ++i) u = r[i], Array.add(t, this.$3VT(u));
        var f = new(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V)),
            o = this,
            s = this;
        return Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(t).then(function(t) {
                for (var r, e, u = t, s = u.length, i = 0;
                    i < s;
                    ++i
                ) r = u[i], $0.$1(r) || (e = r, f.addRange(e.get_Items()));
                o.$Da.$ny(f, null, !0).then(function() {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackBatchManager.ProcessReturnedRowVersions.Success",
                                "Updation of Row Version Succeeded");
                        n.resolve(!0)
                    },
                    function(t) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$1F("OfflineUpSync.PlaybackBatchManager.ProcessReturnedRowVersions.Fail", t.$E);
                        n.reject(t)
                    })
            },
            function(t) {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$1F("OfflineUpSync.PlaybackBatchManager.ProcessReturnedRowVersions.Fail", t.$E);
                n.reject(t)
            }), n.promise()
    },
    $3VT: function(n) {
        var i, t, r, u;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.UpdateRowVersion.Start", "Updation of Row Version started"), i =
            MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V),
                Microsoft.Crm.Client.Core.Framework.$4), t = this.$lJ.get_$H(n), $0.$1(t)
            ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackBatchManager.UpdateRowVersion.Success", "Updation of Row Version Succeeded"),
            i
                .resolve(null))
            : (r = this, u = this, Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                .$73(t.LogicalName,
                    Microsoft.Crm.Client.Core.Framework.$15.$5v(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                        .get_$LS(),
                        "PlaybackBatchManager")).then(function(n) {
                        var u, f;
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackBatchManager.UpdateRowVersion.Success",
                                "Updation of Row Version Succeeded");
                        u = {};
                        u.versionnumber = t.$Rw;
                        u[n.get_$HZ()] = t.get_identifier();
                        r.$xo[t.get_key()] = t.$Rw;
                        f = new(Microsoft.Crm.Client.Core.Framework.List$1
                            .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
                                .$6V))([
                            new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V(u, 3, t.LogicalName),
                            new Microsoft.Crm
                            .Client.Core.Offline.OfflineStore.DAL.$6V(u, 3, "_NORSYNC_LOG_" + t.LogicalName)
                        ]);
                        i.resolve(f)
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$1F("OfflineUpSync.PlaybackBatchManager.UpdateRowVersion.Fail", n.$E);
                        i.reject(n)
                    })), i.promise()
    },
    $25Y: function(n) {
        var i = new Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$Il, r, t, u, f;
        return i.$1KW = !$0
            .$1(n) &&
            !$0.$1(n.$14g)
            ? n.$14g.get_$7W()
            : "", $0.$1(n) || $0.$1(n.$Cn)
            ? (i.$E = "", i.$x4 = new Date)
            : (r = Sys.Net.XMLDOM(n.$Cn.get_Items()[0]), r
                ? (t = Microsoft.Crm.Client.Core.Storage.Common.Xml.$B.$B(r), t
                    .$3J("d", "http://schemas.microsoft.com/xrm/2011/Contracts/Services"), t
                    .$3J("a", "http://schemas.microsoft.com/xrm/2011/Contracts"), t
                    .$3J("b", "http://schemas.datacontract.org/2004/07/System.Collections.Generic"), t
                    .$3J("c", "http://schemas.microsoft.com/xrm/2012/Contracts"), t
                    .$3J("i", "http://www.w3.org/2001/XMLSchema-instance"), i
                    .$10 = $0.$1(t.$O(".//a:ErrorCode"))
                    ? $0.$1(n.$6n) ? -1 : n.$6n
                    : Number.parseInvariant(t.$O(".//a:ErrorCode").get_$r()), i
                    .$E = $0.$1(t.$O(".//a:Message"))
                    ? Microsoft.Crm.Client.Core.Framework.$3.$A(n.get_message()) ? "" : n.get_message()
                    : t.$O(".//a:Message").get_$r(), u = $0.$1(t.$O(".//a:Timestamp"))
                    ? ""
                    : t.$O(".//a:Timestamp").get_$r(), f = Microsoft.Crm.Client.Core.Framework.$3.$A(u)
                    ? new Date
                    : new Date(Date.parse(u.toString())), i.$x4 = f)
                : (i.$E = n.get_message(), i.$x4 = new Date)), i
    },
    $1wi: function() {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n, f, e;
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackBatchManager.ProcessActionDataListToDelete",
                "ProcessActionDataListToDelete Started");
        for (var r = this.$BC.get_Items(), u = r.length, i = 0; i < u; ++i) {
            n = r[i];
            switch (n.get_$kM()) {
            case 0:
                this.$3IG(n);
                break;
            case 2:
            case 1:
                this.$3IT(n)
            }
        }
        return f = this, e = this, this.$Da.$26Y(this.$qN, this.$pf, this.$Rd).then(function() {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessActionDataListToDelete.Success",
                        "ProcessActionDataListToDelete Completed");
                t.resolve(!0)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackBatchManager.ProcessActionDataListToDelete.Failure",
                        "ProcessActionDataListToDelete Failed");
                t.reject(n)
            }), t.promise()
    },
    $3IG: function(n) {
        var i;
        if (this.$18q(n.$UL), !$0.$1(n.$bJ))
            for (var r = n.$bJ.get_Items(), u = r.length, t = 0; t < u; ++t) i = r[t], $0.$1(i) || this.$18q(i.$UL)
    },
    $3IT: function(n) {
        var r;
        if (this.$18q(n.$UL), !$0.$1(n.$pO)) {
            this.$Rd = n.$Rd;
            for (var i = n.$pO.get_Items(), u = i.length, t = 0; t < u; ++t) r = i[t], this.$18q(r)
        }
    },
    $18q: function(n) {
        $0.$1(n) || this.$18O.contains(n.$Iv) || (this.$qN.add(n.$Iv), this.$pf.contains(n.$Xf) || this.$pf.add(n.$Xf))
    },
    $2Lo: function(n) {
        return $0.$1(n) || $0.$1(n.get_$Pc())
            ? !1
            : Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$11C(n.get_$Pc()) === "_NORSYNC_LOG_syncerror"
    },
    $2Mz: function(n) {
        var t = n.toString() in Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$ou()
            ? Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$ou()[n.toString()]
            : this.$2XY;
        t > 0
            ? (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$ou()[n.toString()] = --t, this
                .$18O.add(n))
            : delete Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$ou()[n.toString()]
    }
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager
    .PlaybackManager = function() { this.$Da = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IC };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
    .get_DefaultInstance = function() {
        return $0.$1(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$3) &&
        (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$3 = new Microsoft.Crm.Client.Core
            .Offline.Upsync.BatchManager.PlaybackManager), Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager
            .PlaybackManager.$3
    };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
    .set_DefaultInstance = function(n) {
        return Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$3 = n, n
    };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
    .get_$ou = function() {
        return $0.$1(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$1Io) &&
            (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$1Io = {}), Microsoft.Crm.Client.Core
            .Offline.Upsync.BatchManager.PlaybackManager.$1Io
    };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
    .get_$20J = function() {
        return new(Microsoft.Crm.Client.Core.Framework.List$1
            .$$(String))(["_NORSYNC_LOG_commandoperation", "_NORSYNC_LOG_businessprocessflowinstance"])
    };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
    .$2K1 = function() { Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$bt++ };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.prototype = {
    $td: 0,
    $yu: 0,
    $Da: null,
    $1gi: null,
    $Ue: null,
    $DX: null,
    $pe: null,
    $Mb: null,
    $PG: null,
    get_$1Wm: function() { return 10 },
    $1cj: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$Eg,
                Microsoft.Crm.Client.Core.Framework.$4),
            t,
            i;
        return(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$bt = 0, this.$td = 0, !Microsoft
                .Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5().$2LQ())
            ? n.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Offline database is not available."))
            : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackManager.StartPlayback", "Started Upsync"), t = this, i = this, this.$366()
                .then(function() {
                        t.$3IU().then(function() {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5()
                                    .$1b2("SyncErrorFailureMap",
                                        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
                                        .get_$ou());
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5()
                                    .$1yT("lastsuccessfulsaveoncrm")
                                    .then(function(i) {
                                            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                                .$C("OfflineUpSync.PlaybackManager.StartPlayback", "Upsync successful");
                                            i &&
                                                !Microsoft.Crm.Client.Core.Framework.$1J.$11l(i) &&
                                                (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
                                                    .$jL = i
                                                    .lastsuccessfulsaveoncrm);
                                            Microsoft.Crm.Client.Core.Storage.DataApi.$H.get_$5().$3H
                                                .set_$2XX(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager
                                                    .PlaybackManager.$bt);
                                            var r = !$0.$1(t.$Ue) && t.$Ue.$XZ ? 0 : 1;
                                            n.resolve(new Microsoft.Crm.Client.Core.Offline.Upsync.Entities
                                                .$Eg(r,
                                                    Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager
                                                    .PlaybackManager.$bt,
                                                    Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager
                                                    .PlaybackManager.$jL))
                                        },
                                        function(t) { n.reject(t) })
                            },
                            function(t) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackManager.StartPlayback", "Upsync failed");
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5()
                                    .$1b2("SyncErrorFailureMap",
                                        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
                                        .get_$ou());
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5()
                                    .$1yT("lastsuccessfulsaveoncrm")
                                    .then(function(i) {
                                            i &&
                                                !Microsoft.Crm.Client.Core.Framework.$1J.$11l(i) &&
                                                (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
                                                    .$jL = i
                                                    .lastsuccessfulsaveoncrm);
                                            n.reject(t)
                                        },
                                        function() { n.reject(t) })
                            })
                    },
                    function(t) { n.reject(t) }), n.promise())
    },
    $1qM: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = new Array(0);
        t[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("SID", this.$td, 1, 4);
        var i = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(t), r = this, u = this;
        return this.$Da.getNorSyncMainLogs(i).then(function(t) {
                $0.$1(t) || !t.length
                    ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.HasPlayBackQueueItems.Success", "No Items found for upsync"),
                    n
                        .resolve(!1))
                    : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.HasPlayBackQueueItems.Success", "Found items for upsync"), n
                        .resolve(!0))
            },
            function(t) {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackManager.HasPlayBackQueueItems.Faliure", t.$E);
                n.reject(t)
            }), n.promise()
    },
    $37i: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            u = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(n),
            f,
            r;
        if ($0.$1(u)) i.resolve(!1);
        else {
            f = u.$4M;
            r = new Array(0);
            r[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz(f, t.toString(), 1, 0);
            var e = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(r), o = this, s = this;
            this.$Da.getNorSyncEntityLogs(e, n).then(function(n) {
                    !$0.$1(n) && n.rows.length > 0 ? i.resolve(!0) : i.resolve(!1)
                },
                function(n) { i.reject(n) })
        }
        return i.promise()
    },
    $366: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t = this,
            i = this;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5().$1yT("SyncErrorFailureMap")
            .then(function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$1Io = $0.$1(t) ? {} : t;
                    n.resolve(!0)
                },
                function(t) { n.reject(t) }), n.promise()
    },
    $3IU: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t, i;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack", "I Pass Started"), t = this, i = this, this.$2X7()
            .then(function(i) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack.Success", "I Pass Completed");
                    i
                        ? t.$Ue.$XZ
                        ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack.NetworkFailure",
                                "II Pass Not Started due to Network Issue"), n.resolve(!1))
                        : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack", "II Pass Started"), t.$2X7()
                            .then(function() {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack.Success",
                                            "II Pass Completed");
                                    n.resolve(!0)
                                },
                                function(t) {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack.Faliure", t.$E);
                                    n.reject(t)
                                }))
                        : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack.Success", "Completed"), n.resolve(!0))
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.ProcessPlayBack.Failure", t.$E);
                    n.reject(t)
                }), n.promise()
    },
    $2X7: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t, i;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackManager.StartPass", "Started"), t = this, i = this, this.$1qM()
            .then(function(i) {
                    i
                        ? (t.$Ue = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.$Hx(t.$Da), t.$XJ()
                            .then(function() {
                                    t.$Ue.$XZ
                                        ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                            .$C("OfflineUpSync.PlaybackManager.StartPass.NetworkFaliure", "Faliure"), n
                                            .resolve(!0))
                                        : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                            .$C("OfflineUpSync.PlaybackManager.StartPass.Success",
                                                "StartPass Finished"), n
                                            .resolve(!0))
                                },
                                function(t) {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.StartPass.Failure", t.$E);
                                    n.reject(t)
                                }))
                        : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.StartPass.Success", "StartPass Completed"), n
                            .resolve(!1))
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.StartPass.Failure", t.$E);
                    n.reject(t)
                }), n.promise()
    },
    $XJ: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i, t, r;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackManager.UpSync", "UpSync Started"), i = [], Array.add(i, this.$Ue.$2Qm()), Array
            .add(i, this.$3Hz()), t = this, r = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper
            .whenArray(i).then(function() {
                    t.$Ue.$XZ &&
                    (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.UpSync.Warning", "NetWork Issue Encountered while upsync"), n
                        .resolve(!1));
                    t.$Ue.$q8.length
                        ? t.$XJ().then(function(t) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackManager.UpSync.Success", "ManagePlayBackQueue Finished");
                                n.resolve(t)
                            },
                            function(t) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackManager.UpSync.Failure", t.$E);
                                n.reject(t)
                            })
                        : (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.UpSync.Info",
                                "ManagePlayBackQueue PlayBack All Remaining Requests Started"), t.$Ue.$2Qm()
                            .then(function() { n.resolve(!0) },
                                function(t) {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.UpSync.Failure", t.$E);
                                    n.reject(t)
                                }))
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.UpSync.Success", t.$E);
                    n.reject(t)
                }), n.promise()
    },
    $3Hz: function() {
        var n = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), t, i;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackManager.PrepareNextBatch", "ProcessBatch Started"), t = this, i = this, this
            .$2Ss(!0).then(function() {
                    $0.$1(t.$DX) || !t.$DX.get_Count()
                        ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.PrepareNextBatch.Success", "ProcessBatch Completed"), n
                            .resolve(!1))
                        : t.$2iC().then(function(i) {
                                !$0.$1(i) &&
                                    i.get_Count() > 0 &&
                                    (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.PrepareNextBatch",
                                            "Batch Added to PlayBackBatchManager"), Array.enqueue(t.$Ue.$q8, i));
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackManager.PrepareNextBatch.Success",
                                        "ProcessBatch Finished");
                                n.resolve(!0)
                            },
                            function(t) {
                                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackManager.PrepareNextBatch.Failure", t.$E);
                                n.reject(t)
                            })
                },
                function(t) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.PrepareNextBatch.Failure", t.$E);
                    n.reject(t)
                }), n.promise()
    },
    $3Hv: function(n) {
        for (var t = 0, i = !n, r, u;
            t < this.$Mb.length &&
            (this.$DX.get_Count() < this.get_$1Wm() || i
            );
        )
            r = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$11C(this.$Mb[t]), u = Microsoft.Crm.Client.Core
                .Offline.Upsync.Common.$K.$2Gz(r), this.$DX
                .add(this.$Mb[t]), this.$pe
                .contains(u) ||
                this.$pe.add(u), i
                ? r.toLowerCase() === "_NORSYNC_LOG_commandoperation".toLowerCase()
                ? this.$yu++
                : (this.$yu--, this.$yu <= 0 && (i = !1, this.$yu = 0))
                : r.toLowerCase() === "_NORSYNC_LOG_Command".toLowerCase() && (i = !0, this.$yu = 0), t++;
        return this.$td = this.$DX.get_Items()[this.$DX.get_Count() - 1].$Iv, this.$Mb.splice(0, t), i
    },
    $3Hy: function() {
        var i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            t,
            f,
            r,
            o,
            n,
            h;
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackManager.RetrieveEntityLogs", "RetrieveEntityLogs Started");
        this.$PG = {};
        t = new Array(0);
        t.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
            .$Hz("NORSYNC_LOG_SID", this.$DX.get_Items()[0].$Iv, 0, 5));
        t.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("NORSYNC_LOG_SID", this.$td, 0, 3));
        f = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(t);
        r = [];
        for (var e = this.$pe
                     .get_Items(),
            s = e.length,
            u = 0;
            u < s;
            ++u) o = e[u], Array.add(r, this.$Da.getNorSyncEntityLogs(f, o));
        return n = this, h = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(r)
            .then(function(t) {
                    var r, o, s, u, e, f, h;
                    for (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.PlaybackManager.RetrieveEntityLogs.Success",
                                "RetrieveEntityLogs Completed"), r =
                            0;
                        r < n.$pe.get_Count();
                        r++)
                        if (o = n.$pe.get_Items()[r], $0.$1(t[r])) n.$PG[o] = null;
                        else {
                            for (s = t[r], u = {}, e = 0;
                                e < s.rows.length;
                                e++
                            )
                                f = s.rows.item(e), h = f.NORSYNC_LOG_SID.toString() in u
                                    ? u[f.NORSYNC_LOG_SID.toString()]
                                    : new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Object)), h.add(f), u[f
                                    .NORSYNC_LOG_SID.toString()] = h;
                            n.$PG[o] = u
                        }
                    i.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.RetrieveEntityLogs.Failure", n.$E);
                    i.reject(n)
                }), i.promise()
    },
    $2iC: function() {
        var r = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q),
                Microsoft.Crm.Client.Core.Framework.$4),
            i,
            o,
            s;
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.PlaybackManager.CreateBatchData", "CreateBatchData Started");
        this.$1gi = new Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IA(this.$Da, this.$DX, this.$PG);
        for (var f = new(Microsoft.Crm.Client.Core.Framework.List$1
                     .$$(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q)),
            e = [],
            n = 0,
            t = 0,
            u = !1;
            n < this.$DX.get_Count();
        )
            i = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$11C(this.$DX.get_Items()[n]), u
                ? i.toLowerCase() === "_NORSYNC_LOG_commandoperation".toLowerCase()
                ? (t++, n++)
                : (n += i
                    .toLowerCase() ===
                    "_NORSYNC_LOG_businessprocessflowinstance".toLowerCase() &&
                    !t
                    ? 1
                    : t, u = !1, t = 0)
                : (i.toLowerCase() === "_NORSYNC_LOG_Command".toLowerCase() && (u = !0, t = 0), Array
                    .add(e, this.$1gi.$2iM(n)), n++);
        return o = this, s = this, Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(e)
            .then(function(n) {
                    var u;
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.CreateBatchData.Success", "CreateBatchData Completed");
                    for (var i = n, e = i.length, t = 0; t < e; ++t) u = i[t], f.add(u);
                    r.resolve(f)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.CreateBatchData.Failure", n.$E);
                    r.reject(n)
                }), r.promise()
    },
    $2y3: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            r = new Array(0);
        r[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("SID", this.$td, 1, 4);
        var u = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(r, n), i = this, f = this;
        return this.$Da.getNorSyncMainLogs(u).then(function(n) {
                if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackManager.GetBatch.Success", "GetBatch Completed."), $0
                    .$1(i.$Mb)) i.$Mb = n;
                else {
                    var r;
                    (r = i.$Mb).push.apply(r, n)
                }
                t.resolve(!0)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$1F("OfflineUpSync.PlaybackManager.GetBatch.Fail", n.$E);
                t.reject(n)
            }), t.promise()
    },
    $2Ss: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), r, i, u;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackManager.RetrieveBatch", "RetrieveBatch Started."),
            n &&
            (this.$DX = new(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7)), this.$pe = new(Microsoft.Crm.Client.Core
                .Framework.List$1.$$(String))), r = this
                .get_$1Wm(), !$0.$1(this.$Mb) &&
                this.$Mb.length > 0 &&
                (r -= this.$Mb.length, this.$td = this.$Mb[this.$Mb.length - 1].$Iv), i = this, u = this, this.$2y3(r)
                .then(function() {
                        $0.$1(i.$Mb) || !i.$Mb.length
                            ? t.resolve(!0)
                            : i.$3Hv(n)
                            ? i.$2Ss(!1).then(function() {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.RetrieveBatch.Force.Success",
                                            "Force RetrieveBatch Completed.");
                                    t.resolve(!0)
                                },
                                function(n) {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.RetrieveBatch.Force.Failure", n.$E);
                                    t.reject(n)
                                })
                            : i.$3Hy().then(function() {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.RetrieveBatch.Success",
                                            "RetrieveBatch Completed.");
                                    t.resolve(!0)
                                },
                                function(n) {
                                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                        .$C("OfflineUpSync.PlaybackManager.RetrieveBatch.Failure", n.$E);
                                    t.reject(n)
                                })
                    },
                    function(n) { t.reject(n) }), t.promise()
    }
};
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$H3 = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$H3
    .registerInterface("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$H3");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IC = function() {
    this.$1Ac = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd;
    this.$nQ = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Sk(this.$1Ac);
    this.$1Od = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW(this.$1Ac);
    this.$16d = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IC.prototype = {
    $1Ac: null,
    $nQ: null,
    $1Od: null,
    $16d: null,
    getNorSyncMainLogs: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Array, Microsoft.Crm.Client.Core.Framework.$4),
            i = this,
            r = this;
        return this.$nQ.$6F("_NORSYNC_MAIN_LOG_TABLE", n)
            .then(function(n) { t.resolve(Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$2ha(n)) },
                function(n) { t.reject(n) }), t.promise()
    },
    getNorSyncEntityLogs: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Imported.Norsync.SQLiteResults,
                Microsoft.Crm.Client.Core.Framework.$4),
            r = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$30y(t),
            u = this,
            f = this;
        return this.$nQ.$6F(r, n).then(function(n) { i.resolve(n) }, function(n) { i.reject(n) }), i.promise()
    },
    $ny: function(n, t, i) {
        var r = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            u = this,
            f = this;
        return this.$16d.$ny(n, t, i).then(function() {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackManager.UpdateRowVersion.Success", "Updation of Row Version Succeeded");
                r.resolve(!0)
            },
            function(n) {
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$1F("OfflineUpSync.PlaybackManager.UpdateRowVersion.Fail", n.$E);
                r.reject(n)
            }), r.promise()
    },
    $26Y: function(n, t, i) {
        var r = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            u,
            o,
            f,
            s,
            c,
            a,
            v;
        if (n.get_Count()) {
            u = new Array(0);
            u.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("SID", n, 1, 7));
            o = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(u);
            f = new Array(0);
            f.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("NORSYNC_LOG_SID", n, 1, 7));
            s = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(f);
            this.$nQ.$25E(!0);
            for (var h = t.get_Items(), l = h.length, e = 0; e < l; ++e) c = h[e], this.deleteNorSyncEntityLog(c, s);
            this.deleteNorSyncMainLogs(o);
            i.equals(Microsoft.Crm.Client.Core.Framework.Guid.get_empty()) || this.$zb(i);
            a = this;
            v = this;
            this.$nQ.Commit(this.$1Ac.$AL).then(function() { r.resolve(!0) }, function(n) { r.reject(n) })
        } else r.resolve(!0);
        return r.promise()
    },
    $2YS: function(n, t) {
        if ($0.$1(n)) return null;
        var i = n.$1dN();
        return i.Status = t, new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V(i, 3, "Command")
    },
    $zb: function(n) {
        var t = new Array(0), i, r, u;
        t.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("Id", n.toString(), 1, 0));
        i = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(t);
        r = new Array(0);
        r.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("CommandId", n.toString(), 1, 0));
        u = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(t);
        this.$1Od.Delete("Command", i);
        this.$1Od.Delete("CommandOperation", u)
    },
    deleteNorSyncMainLogs: function(n) { this.$nQ.Delete("_NORSYNC_MAIN_LOG_TABLE", n) },
    deleteNorSyncEntityLog: function(n, t) { this.$nQ.Delete(n, t) }
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IA = function(n, t, i) {
    this.$Da = n;
    this.$DX = t;
    this.$PG = i;
    this.$1kt = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IA.prototype = {
    $1kt: null,
    $DX: null,
    $PG: null,
    $Da: null,
    $16k: null,
    $16j: null,
    $1KU: null,
    $2iM: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q,
                Microsoft.Crm.Client.Core.Framework.$4),
            i,
            r,
            u,
            f;
        return n >= this.$DX.get_Count()
            ? t.reject(Microsoft.Crm.Client.Core.Framework.$4.$h("Invalid index specified for batch logs"))
            : (i = [], r = this.$DX.get_Items()[n], r.$Xf.toLowerCase() !== "_NORSYNC_LOG_Command".toLowerCase()
                ? Array.add(i, this.$2yc(n))
                : Array.add(i, this.$30w(n)), u = this, f = this, Microsoft.Crm.Client.Core.Imported
                .DeferredPromiseHelper
                .whenArray(i).then(function(n) {
                        var i = $0.$1(n[0]) ? null : n[0];
                        $0.$1(i)
                            ? t.resolve(null)
                            : (i.set_$Pc(r), i.set_$2dO(Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                .$1D0(r, u.$PG)), t
                                .resolve(i))
                    },
                    function(n) { t.reject(n) })), t.promise()
    },
    $2yc: function(n) {
        var i = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q,
                Microsoft.Crm.Client.Core.Framework.$4),
            t = this.$DX.get_Items()[n],
            r = t.$bd;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$20J()
            .contains(t.$Xf)) i.resolve(new Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9(r, null));
        else {
            var u = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$1D0(t, this.$PG),
                f = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$32N(t, this.$PG),
                e = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$sp(t),
                o = this,
                s = this;
            this.$1kt.$2hZ(u, f, e, r).then(function(n) {
                    i.resolve(new Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9(r, n))
                },
                function(n) { i.reject(n) })
        }
        return i.promise()
    },
    $30w: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q,
                Microsoft.Crm.Client.Core.Framework.$4),
            f = this.$DX.get_Items()[n];
        this.$1KU = new(Microsoft.Crm.Client.Core.Framework.$8X.$$(String));
        this.$16k = new(Microsoft.Crm.Client.Core.Framework.List$1
            .$$(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7));
        this.$16j = {};
        var r = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$1D0(f, this.$PG),
            e = Microsoft.Crm.Client.Core.Framework.Guid.tryCreate(r.Id.toString()),
            u = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$2yM(r),
            i = this,
            o = this;
        return this.$3IM(n, u).then(function() {
                t.resolve(new Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I6(e, u, i.$1KU, i.$16k, i.$16j))
            },
            function(n) { t.reject(n) }), t.promise()
    },
    $2yN: function(n) {
        for (var t = 0, i; n < this.$DX.get_Count();) {
            if (i = this.$DX.get_Items()[n], i.$Xf
                .toLowerCase() !==
                "_NORSYNC_LOG_commandoperation".toLowerCase()) break;
            t++;
            n++
        }
        return t
    },
    $3IM: function(n, t) {
        var i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            r,
            e,
            o,
            f,
            u,
            s,
            h;
        if (t.$1b
            .toLowerCase() ===
            "ChangeProcessAndStage".toLowerCase())
            n + 1 >= this.$DX.get_Count()
                ? i.resolve(!0)
                : (r = this.$DX.get_$H(n + 1), e = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$11C(r), e === "_NORSYNC_LOG_businessprocessflowinstance"
                    ? (this.$16k.add(r), this.$16j[r.$Iv.toString()] = Microsoft.Crm.Client.Core.Offline.Upsync.Common
                        .$K.$1D0(r, this.$PG), i.resolve(!0))
                    : i.resolve(!0));
        else {
            for (o = this.$2yN(n + 1), f = [], u = 1; u <= 2 * o; u++) Array.add(f, this.$3HS(n + u));
            s = this;
            h = this;
            Microsoft.Crm.Client.Core.Imported.DeferredPromiseHelper.whenArray(f).then(function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.PlaybackManager.ProcessEntitiesInNonCrud.Success",
                            "Processing of Entities in NonCrud Succeeded");
                    i.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.PlaybackManager.ProcessEntitiesInNonCrud.Fail", n.$E);
                    i.reject(n)
                })
        }
        return i.promise()
    },
    $3HS: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), s, r, e, h;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackManager.PopulateEntitiesInNonCrud.Start",
                    "Population of Entities in NonCrud Started"), n >= this.$DX.get_Count()
        )
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                .$C("OfflineUpSync.PlaybackManager.PopulateEntitiesInNonCrud.Success",
                    "Population of Entities in NonCrud Succeeded"), t.resolve(!1);
        else {
            var i = this.$DX.get_Items()[n],
                o = i.$Xf,
                u = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$sp(i),
                f = new Array(0);
            f.push(new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("NORSYNC_LOG_SID", i.$Iv, 1, 0));
            s = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0(f);
            r = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$1D0(i, this.$PG);
            this.$16k.add(i);
            this.$16j[i.$Iv.toString()] = r;
            Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.get_$20J().contains(o)
                ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                    .$C("OfflineUpSync.PlaybackManager.PopulateEntitiesInNonCrud.Success",
                        "Population of Entities in NonCrud is skipped"), t.resolve(!0))
                : (e = this, h = this, Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                    .$73(u,
                        Microsoft.Crm.Client.Core.Framework.$15
                        .$5v(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS(), "UpSyncDataBuilder"))
                    .then(function(n) {
                            !$0.$1(n) && n.get_$HZ() in r
                                ? (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                    .$C("OfflineUpSync.PlaybackManager.PopulateEntitiesInNonCrud.Success",
                                        "Population of Entities in NonCrud Succeeded"), e.$1KU
                                    .set_$H(r[n.get_$HZ()].toString(), u), t.resolve(!0))
                                : t.resolve(!0)
                        },
                        function(n) {
                            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                                .$1F("OfflineUpSync.PlaybackManager.PopulateEntitiesInNonCrud.Fail", n.$E);
                            t.reject(n)
                        }))
        }
        return t.promise()
    }
};
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$IB = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f = function(n) {
    Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.initializeBase(this);
    this.$Da = n
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.$1P3 = function(n, t, i, r) {
    var e, h, u, o, f, s;
    for (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("RollbackHandler:CreateActionData", "Started"), e = r, ($0.$1(e) || !e.get_Count()) && (e = n.$4P), h =
            Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(n.$N.LogicalName), u = new Sys
            .StringBuilder, o = 0;
        o < e.get_Count();
        o++)
        if (!Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.$20I.contains(e.get_$H(o)))
            if (f = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V()
                .$2V(t, e.get_$H(o)), $0
                .$1(f) ||
                f.$2R === 15)
                $0.$1(f) &&
                    !$0.$1(r) &&
                    (u.append(e.get_$H(o)), u.append(" - "), u.appendLine(n.getValue(e.get_$H(o)).toString()));
            else if ($0.$1(n.getValue(e.get_$H(o)))) u.append(f.$1P), u.append(" - "), u.appendLine("");
            else if (f
                .$2R ===
                6 ||
                f.$2R === 1 ||
                f.$2R === 9) u.append(f.$1P), u.append(" - "), u.appendLine(n.getValue(e.get_$H(o)).Name);
            else if (f.$2R !== 12 && f.$2R !== 13 && f.$2R !== 11 && f.$2R)
                if (f.$2R === 20 && i === "create") continue;
                else
                    f.$2R === 2
                        ? (u.append(f.$1P), u.append(" - "), u
                            .appendLine($0.$1(n.getValue(e.get_$H(o)))
                                ? ""
                                : Xrm.Soap.CrmDateTimeSerializer.$FF(n.getValue(e.get_$H(o)))))
                        : (u.append(f.$1P), u.append(" - "), u.appendLine(n.getValue(e.get_$H(o)).toString()));
            else {
                if (Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
                    .$2WX(h, i, e.get_$H(o).toString())) continue;
                s = n.getValue(e.get_$H(o)).get_$XM();
                u.append(f.$1P);
                u.append(" - ");
                u.appendLine(s !== "-1" && !$0.$1(f.$7M.$2f[s]) ? f.$7M.$2f[s].$1B.toString() : "")
            }
    return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
        .$C("RollbackHandler:CreateActionData", "Completed" + u.toString()), u.toString()
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.$3GP = function(n, t, i) {
    var f,
        y = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS(),
        p = new Microsoft.Crm.Client.Core.Storage.CrmSoapServiceProxy.$2O(y),
        a,
        c,
        r,
        o,
        u,
        s,
        h,
        e,
        l,
        v;
    try {
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$C("RollbackHandler:ParseActionDataForNonCud", "Started");
        a = Microsoft.Crm.Client.Core.Storage.Common.Xml.$B.$Z(p.$1kA(t, t, n));
        c = Microsoft.Crm.Client.Core.Storage.Common.Xml.$B.$B(a);
        Xrm.Soap.Serializer.$D3(c);
        f = Xrm.Soap.Serializer.$2Mb(c, t)
    } catch (w) {
        return""
    }
    r = new Sys.StringBuilder;
    switch (t) {
    case"WinOpportunity":
        return o = f, r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$1P3(o.opportunityClose,
                i,
                "WinOpportunity",
                new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String))(o.opportunityClose.get_fieldNames()))), u = o
            .status, r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$18u(i, u, "statuscode")), Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("RollbackHandler:ParseActionDataForNonCud", "WinOpportunityOperation:Completed " + r.toString()), r
            .toString();
    case"LoseOpportunity":
        return s = f, r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$1P3(s.opportunityClose,
                i,
                "LoseOpportunity",
                new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String))(s.opportunityClose.get_fieldNames()))), u = s
            .status, r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$18u(i, u, "statuscode")), Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("RollbackHandler:ParseActionDataForNonCud", "LoseOpportunityOperation:Completed " + r.toString()), r
            .toString();
    case"CloseIncident":
        return h = f, r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$1P3(h.incidentResolution,
                i,
                "CloseIncident",
                new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(String))(h.incidentResolution.get_fieldNames()))), u = h.status, r
            .append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
                .$18u(i, u, "statuscode")), Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("RollbackHandler:ParseActionDataForNonCud", "CloseIncidentOperation:Completed " + r.toString()), r
            .toString();
    case"ConvertActivity":
        return e = f, r.appendLine(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$1P3(e.targetEntity,
                e.targetEntityName,
                "ConvertActivity",
                new(Microsoft.Crm.Client.Core.Framework.List$1.$$(String))(e.targetEntity.get_fieldNames()))), r
            .append("CreateCampaignResponse - "), r.append(e.createCampaignResponse.toString()), Microsoft.Crm.Client
            .Core.Offline.Upsync.Common.$K.$C("RollbackHandler:ParseActionDataForNonCud",
                "ConvertActivityOperation:Completed " + r.toString()), r.toString();
    case"SetState":
        return i !== "lead" &&
        (l = f, v = l.state, u = l.status, r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers
            .$2f.$18u(i, v, "statecode")), r.append(Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
            .$18u(i, u, "statuscode"))), r.toString();
    default:
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("RollbackHandler:ParseActionDataForNonCud", "default:Completed "), ""
    }
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.$18u = function(n, t, i) {
    var r = new Sys.StringBuilder, u = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$2V(n, i);
    return $0.$1(u) || u.$2R !== 13 && u.$2R !== 12 || t === -1
        ? t !== -1 &&
        (i.toLowerCase() === "statuscode" ? r.append("status - ") : r.append("state - "), r.appendLine(t.toString()))
        : (r.append(u.$1P), r.append(" - "), r.appendLine(u.$7M.$2f[t.toString()].$1B.toString())), r.toString()
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
    .$2WX = function(n, t, i) {
        return!$0.$1(n) &&
            t.toLowerCase() === "create" &&
            (n.get_$9N() && i === "isregularactivity" || n.$F5 && i === "statecode")
            ? !0
            : !1
    };
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.prototype = {
    $Da: null,
    get_$e: function() {
        return Microsoft.Crm.Client.Core.Framework.$15.$5v(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
            .get_$LS(),
            "RollBackHandler")
    },
    $1TS: function(n, t) {
        var i, r, u;
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.RollBackHandler.Handle.Start", "Rollback of failed command started"), i = MscrmComponents
            .DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n.get_$kM()
            ? (u = this, this.$3NI(n).always(function() {
                u.$242(n, t).then(function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.RollBackHandler.Handle.Success",
                                "Rollback of failed Non-CRUD command succeeded");
                        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$2K1();
                        i.resolve(n)
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$1F("OfflineUpSync.RollBackHandler.Handle.Failure", n.$E);
                        i.reject(n)
                    })
            }))
            : (r = this, this.$3NG(n).always(function() {
                r.$242(n, t).then(function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$C("OfflineUpSync.RollBackHandler.Handle.Success",
                                "Rollback of failed CUD command succeeded");
                        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$2K1();
                        i.resolve(n)
                    },
                    function(n) {
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                            .$1F("OfflineUpSync.RollBackHandler.Handle.Failure", n.$E);
                        i.reject(n)
                    })
            })), i.promise()
    },
    $3NG: function(n) {
        var i = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            r = new(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V)),
            t = this.$1ym(n.$wV, n.$E4.$N.LogicalName, n.$qO),
            f,
            s,
            h;
        if ($0.$1(t)) i.resolve(!1);
        else {
            if (r.add(t), !$0.$1(n
                    .$bJ) &&
                n.$bJ.get_Count() > 0)
                for (var e = n.$bJ
                             .get_Items(),
                    o = e.length,
                    u = 0;
                    u < o;
                    ++u) f = e[u], t = this.$1ym(f.$wV, "activityparty", f.$qO), $0.$1(t) || r.add(t);
            s = this;
            h = this;
            this.$Da.$ny(r, null, !0).then(function() { i.resolve(!0) }, function(n) { i.reject(n) })
        }
        return i.promise()
    },
    $3NI: function(n) {
        for (var u,
            v,
            y,
            t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            h = n.$iy,
            f = n.$pO,
            c = n.$1K0,
            e = new(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V)),
            o = new(Microsoft.Crm.Client.Core.Framework.List$1
                .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V)),
            i = f.get_Count() - 1;
            i >= 0;
            i--) {
            var r = f.get_Items()[i],
                l = c[r.$Iv.toString()],
                a = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$sp(r),
                s = this.$1ym(l, a, r.$bd);
            $0.$1(s) || e.add(s)
        }
        return u = this.$Da.$2YS(h, 3), $0.$1(u) || o.add(u), v = this, y = this, this.$Da.$ny(e, o, !0)
            .then(function() { t.resolve(!0) }, function(n) { t.reject(n) }), t.promise()
    },
    $242: function(n, t) {
        var r, s, h, l;
        if (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("OfflineUpSync.RollBackHandler.AddRecordSyncErrorLog.Start", "Sync Error Creation Started"), r =
            MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), n.get_$kM()) {
            var u = n, f = u.$iy, i = "", e = null, o = Microsoft.Crm.Client.Core.Framework.Guid.get_empty(), c = "";
            n.get_$kM() === 2
                ? (s = JSON.parse(f.$pM), i = s.entitylogicalname.toString(), o = Microsoft.Crm.Client.Core.Framework
                    .Guid.tryCreate(s.entityid.toString()), e = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                    .get_$V().$i(i))
                : (h = u.$pO.get_Items()[u.$pO.get_Count() - 1], l = u.$1K0[h.$Iv.toString()], i = Microsoft.Crm.Client
                    .Core.Offline.Upsync.Common.$K.$sp(h), e = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3
                    .get_$V().$i(i), o = Microsoft.Crm.Client.Core.Framework.Guid
                    .tryCreate(l[e.$4M].toString()), c = Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers
                    .$2f.$3GP(f.$pM, f.$1b, i));
            var a = Microsoft.Crm.Client.Core.Offline.$5X.$z6(i, f.$1b, o, i, e.$d, t.$E, c, t.$x4, "", t.$10, t.$1KW),
                v = this,
                y = this;
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5().$1ka(a, this.get_$e()).then(function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$C("OfflineUpSync.RollBackHandler.AddRecordSyncErrorLog.Success",
                            "Sync Error Creation Succeeded");
                    r.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.RollBackHandler.AddRecordSyncErrorLog.Fail", n.$E);
                    r.reject(n)
                })
        } else return this.$1ka(n, t);
        return r.promise()
    },
    $1ka: function(n, t) {
        var e = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4),
            p = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$11C(n.$UL),
            o = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$2Gz(p),
            i = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(o),
            r = n.$E4,
            y = r.$N.Id,
            f,
            c,
            l,
            a,
            v;
        if ($0.$1(r)) e.resolve(!1);
        else {
            var w = !!i && (i.get_$9N() || o === "activityparty"),
                u = n.$qO,
                s = Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
                    .$1P3(r, o, Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26.toString(u)),
                h = this.$1sF(u) ? this.$2kX(r, i, y.toString(), u) : null;
            if (w &&
            (f = this.$2xT(n, u, i), $0.$1(f
                    .ActivityPartyActionData) ||
                (s = s + f.ActivityPartyActionData), this.$1sF(u) && !$0.$1(f.ActivityPartyCollection))) {
                c = JSON.parse(h);
                l = f.ActivityPartyCollection;
                for (a in l) v = { key: a, value: l[a] }, c[v.key] = v.value;
                h = this.$27Z(c)
            }
            var b = Microsoft.Crm.Client.Core.Offline.$5X
                    .$z6(o,
                        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26.toString(u),
                        y,
                        $0.$1(r.getValue(i.$63)) ? "" : r.getValue(i.$63).toString(),
                        i.$d,
                        t.$E,
                        s,
                        t.$x4,
                        h,
                        t.$10,
                        t.$1KW),
                k = this,
                d = this;
            Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5().$1ka(b, this.get_$e()).then(function() {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.RollBackHandler.CreateSyncErrorLog.Success",
                            "Sync Error Creation Succeeded");
                    e.resolve(!0)
                },
                function(n) {
                    Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
                        .$1F("OfflineUpSync.RollBackHandler.CreateSyncErrorLog.Fail", n.$E);
                    e.reject(n)
                })
        }
        return e.promise()
    },
    $2xT: function(n, t, i) {
        for (var y,
            p,
            s,
            f,
            h,
            w,
            b = n.$bJ,
            c = new Sys.StringBuilder,
            e = {},
            u = {},
            l = n.$E4,
            a = b.get_Items(),
            k = a.length,
            o = 0;
            o < k;
            ++o) {
            var v = a[o], d = v.$UL, r = v.$E4;
            i.get_$9N() && t === 1 && this.$387(r) ||
            (l.hasField("activityid") &&
            (y = r.getValue("activityid"), p = l
                .getValue("activityid"), y.Id
                .toString() ===
                p.toString() &&
                c.appendLine(this.$2xS(r))), this.$1sF(t) &&
                d.$bd !== 2 &&
                (s = r.getValue("participationtypemask"), $0.$1(s) ||
                (f = Microsoft.Crm.Client.Core.Offline.$2u.$1Fz[s.$1f.toString()], h = r
                    .getValue("partyid"), $0
                    .$1(h) ||
                    (w = h.getObjectData(), $0.$1(u[f]) && (u[f] = []), u[f].push(w)))))
        }
        return e.ActivityPartyCollection = u, e.ActivityPartyActionData = c.toString(), e
    },
    $387: function(n) {
        var t = n.getValue("participationtypemask"), i;
        return!$0.$1(t) && (i = Microsoft.Crm.Client.Core.Offline.$2u.$1Fz[t.$1f.toString()], i === "owner") ? !0 : !1
    },
    $2xS: function(n) {
        var i = n.getValue("participationtypemask"), r, t, u;
        return!$0.$1(i) &&
            (r = Microsoft.Crm.Client.Core.Offline.$2u.$1Fz[i.$1f.toString()], t = n.getValue("partyid"), !$0.$1(t))
            ? (u = t, r + " - " + u.Name)
            : ""
    },
    $1ym: function(n, t, i) {
        var r = null;
        return i === 1 ? r = this.$3NF(n, t) : i === 2 ? r = this.$3NH(n, t) : i === 3 && (r = this.$3NJ(n, t)), r
    },
    $3NF: function(n, t) {
        var i = new Array(0), r;
        return t === "CommandOperation".toLowerCase()
            ? i[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz("Id", n.Id.toString(), 1, 0)
            : t === "businessprocessflowinstance".toLowerCase()
            ? i[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
            .$Hz("businessprocessflowinstanceid", n.businessprocessflowinstanceid.toString(), 1, 0)
            : (r = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V()
                .$i(t), $0.$1(n) ||
                $0.$1(r) ||
                (i[0] = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
                    .$Hz(r.$4M, n[r.$4M].toString(), 1, 0))), new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL
            .$6V(i, 2, t)
    },
    $3NJ: function(n, t) {
        var i = null;
        return $0
            .$1(n) ||
            (n = this.$2SS(n), i = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V(n, 3, t)), i
    },
    $3NH: function(n, t) {
        var i = null;
        return $0
            .$1(n) ||
            (n = this.$2SS(n), i = new Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V(n, 1, t)), i
    },
    $2SS: function(n) {
        return delete n.NORSYNC_SID, delete n.NORSYNC_LOG_SID, delete n.NORSYNC_TABLE_ID, delete n.NORSYNC_LOG_TYPE, n
    },
    $2kX: function(n, t, i, r) {
        var f, u, l, s;
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$C("RollbackHandler:CreateRequestData", "Started");
        var e = n.$4P, o = {}, h = Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.$20I;
        for (r === 1 && h.add(t.$4M), o.syncerror__regardingentityid = i, o.entitylogicalname = t.$d, f = 0;
            f < e.get_Count();
            f++)
            if (!h.contains(e.get_$H(f)) &&
            (u = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$2V(t.$d, e.get_$H(f)), !$0
                .$1(u)))
                if ($0.$1(n.getValue(e.get_$H(f)))) o[u.$d] = "";
                else if (u.$2R === 6 || u.$2R === 1 || u.$2R === 9) {
                    var a = n.getValue(e.get_$H(f)), v = a.getObjectData(), c = [];
                    c.push(v);
                    o[u.$d] = c
                } else if (u.$2R !== 12 && u.$2R !== 13 && u.$2R !== 11 && u.$2R)
                    if (u.$2R === 20 && r === 1) continue;
                    else
                        o[u.$d] = u.$2R === 2
                            ? $0.$1(n.getValue(e.get_$H(f)))
                            ? ""
                            : Xrm.Soap.CrmDateTimeSerializer.$FF(n.getValue(e.get_$H(f)))
                            : n.getValue(e.get_$H(f)).toString();
                else {
                    if (l = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$32c(r), Microsoft.Crm.Client.Core
                        .Offline.Upsync.BatchManager.Handlers.$2f.$2WX(t, l, e.get_$H(f).toString())) continue;
                    s = n.getValue(e.get_$H(f)).get_$XM();
                    o[u.$d] = s !== "-1" ? s : ""
                }
        return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K
            .$C("RollbackHandler:CreateRequestData", "Completed" + o.toString()), this.$27Z(o)
    },
    $27Z: function(n) { return JSON.stringify(n) },
    $1sF: function(n) { return n === 1 || n === 3 ? !0 : !1 }
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$Pn = function(n) {
    Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$Pn.initializeBase(this);
    this.$1XO = n
};
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$Pn.prototype = {
    $1XO: null,
    $1TS: function(n) {
        var t = MscrmComponents.DeferredPromiseFactory(Boolean, Microsoft.Crm.Client.Core.Framework.$4), i, r, u, f, e;
        return n.get_$kM()
            ? (i = n.$iy, $0.$1(i)
                ? t.resolve(!1)
                : (r = new(Microsoft.Crm.Client.Core.Framework.List$1
                    .$$(Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V)), u = this.$1XO.$2YS(i, 2), r
                    .add(u), f = this, e = this, this.$1XO.$ny(null, r, !0).then(function() {
                        f.$2Vs();
                        t.resolve(!0)
                    },
                    function(n) { t.reject(n) })))
            : (this.$2Vs(), t.resolve(!0)), t.promise()
    },
    $2Vs: function() {
        var t = new Date, n = {};
        n.lastsuccessfulsaveoncrm = Microsoft.Crm.Client.Core.Storage.Common.CrmFormatter.$D.$O8(t, 0);
        Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.get_$5().$1b2("lastsuccessfulsaveoncrm", n)
    }
};
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Upsync.Common");
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$5Z = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$5Z.prototype = { failure: 0, success: 1 };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$5Z
    .registerEnum("Microsoft.Crm.Client.Core.Offline.Upsync.Common.$5Z", !1);
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26 = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26.prototype = { create: 1, Delete: 2, update: 3, retrieve: 4 };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26
    .registerEnum("Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26", !1);
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J = function(n) {
    this.$12z = new Microsoft.Crm.Client.Core.Offline.OfflineSyncErrorLogProvider(n)
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J
    .get_$5 = function() {
        return $0.$1(Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.$D) &&
        (Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.$D = new Microsoft.Crm.Client.Core.Offline.Upsync
            .Common.$2J(Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$1o())), Microsoft.Crm.Client.Core
            .Offline.Upsync.Common.$2J.$D
    };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J
    .prototype = {
        $12z: null,
        $1ka: function(n, t) { return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.$D.$12z.$2k2(n, t) },
        $1b2: function(n, t) { Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.$D.$12z.$1b2(n, t) },
        $1yT: function(n) { return Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.$D.$12z.$X1(n) },
        $2LQ: function() { return this.$12z.$2LQ() }
    };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$30y = function(n) { return"_NORSYNC_LOG_" + n };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$2ha = function(n) {
    for (var i, t, u = new Array(n.rows.length), r = 0;
        r < n.rows.length;
        r++
    )
        i = n.rows.item(r), t = new Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7, t.$Iv = i.SID, t.$22x = i
            .DEVICE_ID.toString(), t.$Xf = i.LOG_TABLE_ID.toString(), t.$bd = i.OPERATION_TYPE, t.$Xt = i
            .TIME_STAMP, u[r] = t;
    return u
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$1F = function(n, t) {
    Microsoft.Crm.Client.Core.Framework.$C.$1F(n, 1035, t)
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$C = function(n, t) {
    Microsoft.Crm.Client.Core.Framework.$C.$1F(n, 1035, t)
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$11C = function(n) { return n.$Xf };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$2Gz = function(n) { return n.replace("_NORSYNC_LOG_", "") };
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$1D0 = function(n, t) {
    var u, r;
    if ($0.$1(n)) return null;
    var i = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$sp(n), f = n.$Iv, e = n.$bd;
    return!$0.$1(i) && !$0.$1(t) && i in t ? (u = t[i], r = u[f.toString()], $0.$1(r) ? null : r.get_Items()[0]) : null
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$32N = function(n, t) {
    var f, r;
    if ($0.$1(n)) return null;
    var i = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$sp(n), e = n.$Iv, u = n.$bd;
    return u !== 1 && u !== 2 && !$0.$1(i) && !$0.$1(t) && i in t
        ? (f = t[i], r = f[e.toString()], $0.$1(r) ? null : r.get_Items()[1])
        : null
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$sp = function(n) {
    var t = Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$11C(n);
    return t.replace("_NORSYNC_LOG_", "")
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$2yM = function(n) {
    if ($0.$1(n))
        return new Microsoft.Crm.Client.Core.Offline.Upsync.Entities
            .$3Z(Microsoft.Crm.Client.Core.Framework.Guid.get_empty(), null, 1, null);
    var t = n.Id, i = n.Name.toString(), r = n.Status, u = n.ActionData.toString();
    return new Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$3Z(t, i, r, u)
};
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.$32c = function(n) {
    var t = "";
    switch (n) {
    case 1:
        t = "Create";
        break;
    case 2:
        t = "Delete";
        break;
    case 3:
        t = "Update";
        break;
    case 4:
        t = "Retrieve"
    }
    return t
};
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Upsync.Entities");
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q
    .registerInterface("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q");
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$3Z = function(n, t, i, r) {
    this.$2Z = n;
    this.$1b = t;
    this.$qP = i;
    this.$pM = r;
    this.$iz = new Date
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$3Z.prototype = {
    $2Z: null,
    $1b: null,
    $qP: 0,
    $pM: null,
    $iz: null,
    $1dN: function() {
        var n = {};
        return n.Id = this.$2Z, n.Name = this.$1b, n.Status = this.$qP, n.ActionData = this.$pM, n.CreatedOn = this
            .$iz, n
    }
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I8 = function(n, t, i, r) {
    this.$2Z = n;
    this.$Rd = t;
    this.$7d = i;
    this.$1g0 = r
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I8.prototype = {
    $2Z: null,
    $Rd: null,
    $7d: null,
    $1g0: 0,
    $1dN: function() {
        var n = {};
        return n.Id = this.$2Z, n.CommandId = this.$Rd, n.EntityName = this.$7d, n.Operation = this.$1g0, n
    }
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9 = function(n, t) {
    this.$wg = 0;
    this.$qO = n;
    this.$E4 = t;
    this.$bJ = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9))
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9
    .prototype = {
        $wg: 0,
        get_$kM: function() { return this.$wg },
        $UL: null,
        get_$Pc: function() { return this.$UL },
        set_$Pc: function(n) { return this.$UL = n, n },
        $wV: null,
        set_$2dO: function(n) { return this.$wV = n, n },
        $qO: 0,
        $E4: null,
        $bJ: null
    };
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I6 = function(n, t, i, r, u) {
    this.$wg = t.$1b.toLowerCase() === "ChangeProcessAndStage".toLowerCase() ? 2 : 1;
    this.$Rd = n;
    this.$iy = t;
    this.$1f2 = i;
    this.$pO = r;
    this.$1K0 = u
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I6
    .prototype = {
        $wg: 0,
        get_$kM: function() { return this.$wg },
        $UL: null,
        get_$Pc: function() { return this.$UL },
        set_$Pc: function(n) { return this.$UL = n, n },
        $wV: null,
        set_$2dO: function(n) { return this.$wV = n, n },
        $Rd: null,
        $iy: null,
        $1f2: null,
        $pO: null,
        $1K0: null
    };
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7 = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7.prototype = { $Iv: 0, $Xt: null, $Xf: null, $22x: null, $bd: 0 };
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$Eg = function(n, t, i) {
    this.$qP = n;
    this.$1KV = t;
    this.$jL = i
};
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$Eg.prototype = { $qP: 0, $1KV: 0, $jL: null };
Type.registerNamespace("Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager");
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9p = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9p.$27Q = function(n, t) {
    switch (n) {
    case 0:
        return Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9r.$27R(t);
    case 1:
        return Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$89.$27R(t.get_Items()[0]);
    default:
        return null
    }
};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9r = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9r.$27R = function(n) {
    var u, o;
    Microsoft.Crm.Client.Core.Framework.Utils.$E.$1W(n, "crudCommandActionData");
    u = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Xrm.Sdk.Request));
    for (var e = n.get_Items(), s = e.length, f = 0; f < s; ++f) {
        var h = e[f],
            i = h,
            c = $1W.$Cr(Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26,
                Microsoft.Crm.Client.Core.Offline.Upsync.Common.$26.toString(i.$qO)),
            r,
            t = null;
        switch (c) {
        case 1:
            t = new Xrm.Gen.CreateRequest(i.$E4);
            t.returnRowVersion = !0;
            break;
        case 3:
            r = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(i.$E4.$N.LogicalName);
            t = new Xrm.Gen.UpdateRequest(i.$E4);
            !$0.$1(r) &&
                r.$tN &&
                Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().$1O.$1Dv &&
                (t.concurrencyBehavior = 1);
            t.returnRowVersion = !0;
            break;
        case 2:
            r = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V().$i(i.$E4.$N.LogicalName);
            o = i.$E4;
            t = new Xrm.Gen.DeleteRequest(o.$N);
            !$0.$1(r) &&
                r.$tN &&
                Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$K().$1O.$1Dv &&
                (t.concurrencyBehavior = 1)
        }
        t && u.add(t)
    }
    return new Xrm.Gen.ExecuteMultipleRequest(u.toArray(), new Xrm.Gen.ExecuteMultipleSettings(!0, !0))
};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$89 = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$89.$27R = function(n) {
    var v = n.$iy.$pM, r = n.$iy.$1b, u, h, c, t, i, y, p, f, a, b;
    Microsoft.Crm.Client.Core.Framework.Utils.$E.$1W(r, "commandName");
    Microsoft.Crm.Client.Core.Framework.Utils.$E.$1W(v, "data");
    var e = n.$1f2,
        k = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS(),
        d = new Microsoft.Crm.Client.Core.Storage.CrmSoapServiceProxy.$2O(k),
        o = new(Microsoft.Crm.Client.Core.Framework.List$1.$$(Xrm.Sdk.Request)),
        g = Microsoft.Crm.Client.Core.Storage.Common.Xml.$B.$Z(d.$1kA(r, r, v)),
        s = Microsoft.Crm.Client.Core.Storage.Common.Xml.$B.$B(g);
    if (Xrm.Soap.Serializer.$D3(s), u = Xrm.Soap.Serializer.$2Mb(s, r), Microsoft.Crm.Client.Core.Offline.Upsync
            .UpSyncManager.$89.$2as(u), h = s
            .$O(".//a:KeyValuePairOfstringanyType[b:key='OfflineData']/b:value"),
        !$0.$1(h) && (c = {}, t = h.get_$C6(), !$0.$1(t))) {
        for (i = 0, y = t.childNodes.length; i < y; i++)
            c[t.childNodes[i].childNodes[0].textContent] = t.childNodes[i].childNodes[1].textContent;
        u.$WR = c
    }
    o.add(u);
    p = new Microsoft.Crm.Client.Core.Storage.Common.ColumnSet(["versionnumber"]);
    for (var w = e
                 .get_$396(),
        nt = w.length,
        l = 0;
        l < nt;
        ++l)
        f = w[l], a = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V()
            .$i(e.get_$H(f)), $0.$1(a) ||
        (b = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$V()
            .$2V(a.$d, "versionnumber"), $0.$1(b) ||
            o.add(new Xrm.Gen.RetrieveRequest(new Xrm.Objects
                .EntityReference(e.get_$H(f), new Microsoft.Crm.Client.Core.Framework.Guid(f)),
                p)));
    return new Xrm.Gen.ExecuteMultipleRequest(o.toArray(), new Xrm.Gen.ExecuteMultipleSettings(!0, !0))
};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$89.$2as = function(n) {
    var t = null, u, f, e, o, r;
    if (n.name === "ConvertActivity"
        ? (u = n, t = u.targetEntity)
        : n.name === "LoseOpportunity"
        ? (f = n, t = f.opportunityClose)
        : n.name === "WinOpportunity"
        ? (e = n, t = e.opportunityClose)
        : n
        .name ===
        "CloseIncident" &&
        (o = n, t = o.incidentResolution), !$0
        .$1(t) &&
        !$0.$1(t.get_fieldNames()))
        for (var s = t
                     .get_fieldNames(),
            h = s.length,
            i = 0;
            i < h;
            ++i) r = s[i], Microsoft.Crm.Client.Core.Framework.$3.$1S(r) || t.$4P.add(r)
};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d
    .get_$5 = function() {
        return Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.$3 ||
        (Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.$3 = new Microsoft.Crm.Client.Core.Offline
            .Upsync.UpSyncManager.$4d), Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.$3
    };
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.prototype = {
    $CN: null,
    get_$7k: function() {
        if (!this.$CN) {
            var n = Microsoft.Crm.Client.Core.Storage.DataApi.DataSource.$3.get_$LS();
            this.$CN = new Microsoft.Crm.Client.Core.Storage.CrmSoapServiceProxy.$2O(n)
        }
        return this.$CN
    },
    $XJ: function(n, t) {
        var i = Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9p.$27Q(n, t);
        return this.get_$7k().$2B(i, Microsoft.Crm.Client.Core.Framework.$15.$5v("", "MobileClient-OfflineSync"))
    },
    $3Vl: function(n) {
        var t = JSON.parse(n.get_Items()[0].$iy.$pM);
        return $0.$1(t)
            ? null
            : this.get_$7k().$r4(t.entityid.toString(),
                t.entitylogicalname.toString(),
                t.processid.toString(),
                "",
                t.stageid.toString(),
                t.traversedpath.toString(),
                Microsoft.Crm.Client.Core.Framework.$15.$5v("", "MobileClient-OfflineSync"))
    }
};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$Il = function() {};
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$Il.prototype = { $E: null, $1KW: null, $10: 0, $x4: null };
Microsoft.Crm.Client.Core.Offline.$t.registerClass("Microsoft.Crm.Client.Core.Offline.$t",
    null,
    Microsoft.Crm.Client.Core.Offline.$H9);
Microsoft.Crm.Client.Core.Offline.$1G.registerClass("Microsoft.Crm.Client.Core.Offline.$1G");
Microsoft.Crm.Client.Core.Offline.$2u.registerClass("Microsoft.Crm.Client.Core.Offline.$2u");
Microsoft.Crm.Client.Core.Offline.$61.registerClass("Microsoft.Crm.Client.Core.Offline.$61",
    null,
    Microsoft.Crm.Client.Core.Offline.$H8);
Microsoft.Crm.Client.Core.Offline.$IS.registerClass("Microsoft.Crm.Client.Core.Offline.$IS");
Microsoft.Crm.Client.Core.Offline.$IT.registerClass("Microsoft.Crm.Client.Core.Offline.$IT",
    null,
    Microsoft.Crm.Client.Core.Framework.$HP);
Microsoft.Crm.Client.Core.Offline.$IU.registerClass("Microsoft.Crm.Client.Core.Offline.$IU");
Microsoft.Crm.Client.Core.Offline.$BH.registerClass("Microsoft.Crm.Client.Core.Offline.$BH");
Microsoft.Crm.Client.Core.Offline.$8B.registerClass("Microsoft.Crm.Client.Core.Offline.$8B",
    null,
    Microsoft.Crm.Client.Core.Framework.ISerializable);
Microsoft.Crm.Client.Core.Offline.$IV.registerClass("Microsoft.Crm.Client.Core.Offline.$IV",
    null,
    Microsoft.Crm.Client.Core.Storage.DataApi.$Hs);
Microsoft.Crm.Client.Core.Offline.$IW.registerClass("Microsoft.Crm.Client.Core.Offline.$IW");
Microsoft.Crm.Client.Core.Offline.$l.registerClass("Microsoft.Crm.Client.Core.Offline.$l",
    null,
    Microsoft.Crm.Client.Core.Storage.DataApi.$Hj,
    Microsoft.Crm.Client.Core.Storage.DataApi.$Fq);
Microsoft.Crm.Client.Core.Offline.$L.registerClass("Microsoft.Crm.Client.Core.Offline.$L",
    null,
    Microsoft.Crm.Client.Core.Storage.DataApi.$Hq);
Microsoft.Crm.Client.Core.Offline.$L.$UA.registerClass("Microsoft.Crm.Client.Core.Offline.$L.$UA");
Microsoft.Crm.Client.Core.Offline.$2d.registerClass("Microsoft.Crm.Client.Core.Offline.$2d");
Microsoft.Crm.Client.Core.Offline.$2l.registerClass("Microsoft.Crm.Client.Core.Offline.$2l");
Microsoft.Crm.Client.Core.Offline.$v.registerClass("Microsoft.Crm.Client.Core.Offline.$v");
Microsoft.Crm.Client.Core.Offline.$I2.registerClass("Microsoft.Crm.Client.Core.Offline.$I2");
Microsoft.Crm.Client.Core.Offline.$I4.registerClass("Microsoft.Crm.Client.Core.Offline.$I4");
Microsoft.Crm.Client.Core.Offline.$I5.registerClass("Microsoft.Crm.Client.Core.Offline.$I5");
Microsoft.Crm.Client.Core.Offline.$4Y.registerClass("Microsoft.Crm.Client.Core.Offline.$4Y");
Microsoft.Crm.Client.Core.Offline.$5X.registerClass("Microsoft.Crm.Client.Core.Offline.$5X");
Microsoft.Crm.Client.Core.Offline.OfflineSyncErrorLogProvider
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineSyncErrorLogProvider");
Microsoft.Crm.Client.Core.Offline.$I3.registerClass("Microsoft.Crm.Client.Core.Offline.$I3");
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N
    .registerClass("Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N");
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$Pi
    .registerClass("Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$Pi",
        Microsoft.Crm.Client.Core.Storage.Common.QueryGenerator.$Jx);
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$71
    .registerClass("Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$71");
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I1
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I1");
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc",
        Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I1);
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$SW",
        Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc);
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$7k",
        null,
        Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$H2);
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pd",
        Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I1);
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$6V");
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Hz");
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Sk
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Sk",
        Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$Pc);
Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0
    .registerClass("Microsoft.Crm.Client.Core.Offline.OfflineStore.DAL.$I0");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.$Hx
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.$Hx");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IC
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IC",
        null,
        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$H3);
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IA
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Common.$IA");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$IB
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$IB");
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f",
        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$IB);
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$Pn
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$Pn",
        Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$IB);
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J");
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K.registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Common.$K");
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$3Z
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$3Z");
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I8
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I8");
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I9",
        null,
        Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q);
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I6
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I6",
        null,
        Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$7q);
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$I7");
Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$Eg
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.Entities.$Eg");
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9p
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9p");
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9r
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$9r");
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$89
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$89");
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d");
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$Il
    .registerClass("Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$Il");
Microsoft.Crm.Client.Core.Offline.$t.$A7 = null;
Microsoft.Crm.Client.Core.Offline.$1G.$s1 = null;
Microsoft.Crm.Client.Core.Offline.$1G.$Em = null;
Microsoft.Crm.Client.Core.Offline.$1G.$2O2 = null;
Microsoft.Crm.Client.Core.Offline.$1G.$5Y = null;
Microsoft.Crm.Client.Core.Offline.$1G.$1e = null;
Microsoft.Crm.Client.Core.Offline.$2u.$2D7 = ["firstname", "middlename", "lastname"];
Microsoft.Crm.Client.Core.Offline.$2u.$2QH = [
    "participationtypemask", "activityid", "activitypartyid", "partyid", "ispartydeleted", "partyobjecttypecode"
];
Microsoft.Crm.Client.Core.Offline.$2u.$1YY = {
    from: "1",
    to: "2",
    cc: "3",
    bcc: "4",
    requiredattendees: "5",
    optionalattendees: "6",
    organizer: "7",
    regarding: "8",
    owner: "9",
    resources: "10",
    customer: "11",
    partner: "12"
};
Microsoft.Crm.Client.Core.Offline.$2u.$1Fz = {
    "1": "from",
    "2": "to",
    "3": "cc",
    "4": "bcc",
    "5": "requiredattendees",
    "6": "optionalattendees",
    "7": "organizer",
    "8": "regarding",
    "9": "owner",
    "10": "resources",
    "11": "customer",
    "12": "partner"
};
Microsoft.Crm.Client.Core.Offline.$61.$Em = null;
Microsoft.Crm.Client.Core.Offline.$l.$3 = null;
Microsoft.Crm.Client.Core.Offline.$L.$1Wb = null;
Microsoft.Crm.Client.Core.Offline.$L.$UA.$29B = "$_NORSYNC_CURRENT_TIME";
Microsoft.Crm.Client.Core.Offline.$L.$UA.$2O9 = "$_NORSYNC_TIMEZONE_OFFSET";
Microsoft.Crm.Client.Core.Offline.$L.$UA.$2AH = "$_NORSYNC_DST_ADJUSTMENT";
Microsoft.Crm.Client.Core.Offline.$2d.$Em = null;
Microsoft.Crm.Client.Core.Offline.$v.$D = null;
Microsoft.Crm.Client.Core.Offline.$v.$2XS = "INSERT INTO _NORSYNC_SUPPRESS_TRIGGERS(value) VALUES(1)";
Microsoft.Crm.Client.Core.Offline.$v.$2XR = "DELETE FROM _NORSYNC_SUPPRESS_TRIGGERS";
Microsoft.Crm.Client.Core.Offline.$4Y.$3 = null;
Microsoft.Crm.Client.Core.Offline.Common.QueryGenerator.$2N.$EB = null;
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$3 = null;
this.$bt = 0;
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.PlaybackManager.$1Io = null;
this.$jL = null;
Microsoft.Crm.Client.Core.Offline.Upsync.BatchManager.Handlers.$2f.$20I = new(Microsoft.Crm.Client.Core.Framework.List$1
    .$$(String))(["traversedpath", "stageid", "processid"]);
Microsoft.Crm.Client.Core.Offline.Upsync.Common.$2J.$D = null;
Microsoft.Crm.Client.Core.Offline.Upsync.UpSyncManager.$4d.$3 = null
//# sourceMappingURL=../../../../../../../../../../Symbols/retail/amd64/jsmin/Microsoft.Crm.Client.Core.Offline.js.srcmap